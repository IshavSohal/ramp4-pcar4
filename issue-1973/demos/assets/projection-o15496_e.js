import { cz as n, cA as j, cB as _, cC as n$1, cD as S$1, cE as f$1, ao as z$1, cF as l$1, bu as J$1, cG as c, cH as C, H as G$1, cI as k$1, cJ as f$2, cK as p, ap as n$3, cL as h } from './main-5ivotA7d.js';
import { e as e$2 } from './mat3f64-BNcPSU_3.js';
import { o, e as e$1 } from './mat4f64-UGgSIQpQ.js';
import { a } from './spatialReferenceEllipsoidUtils-BCtq26AC.js';
import { u } from './computeTranslationToOriginAndRotation-DpXeX_Fh.js';
import { t, o as o$1 } from './DoubleArray-D04FUswz.js';
import { i, T } from './BufferView-BPu5ppB7.js';
import { f, l, e } from './vec3-B5zfTS4z.js';
import { n as n$2 } from './vec4-g_DyLy6N.js';
import './preload-helper-dJJaZANz.js';

/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.30/esri/copyright.txt for details.
*/
const L="Projection may be possible after calling projection.load().";function S(r,t,o,e){r.error(`Failed to project from (wkid:${t.wkid}) to (wkid:${o.wkid}).${e?" ":""}${e}`);}function v(r,t,o,e,n){return I(z.TO_PCPF,i.fromTypedArray(r),D.NORMAL,T.fromTypedArray(t),T.fromTypedArray(o),e,i.fromTypedArray(n))?n:null}function k(r,t,o,e,n){return I(z.FROM_PCPF,i.fromTypedArray(r),D.NORMAL,T.fromTypedArray(t),T.fromTypedArray(o),e,i.fromTypedArray(n))?n:null}function w(r,t,o){return n(r,t,0,o,a(t),0,r.length/3)?o:null}function G(r,t,o){return n(r,a(o),0,t,o,0,r.length/3)?t:null}function V(t,e,n){return j(or,n),f(e,t,or),_(or)&&l(e,e),e}function B(t,o,n){return n$1(or,n),n$2(o,t,or),_(or)&&l(o,o,4),o}function Y(r,t,o,e,n){if(!I(z.TO_PCPF,i.fromTypedArray(r,4*Float32Array.BYTES_PER_ELEMENT),D.TANGENT,T.fromTypedArray(t),T.fromTypedArray(o),e,i.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT)))return null;for(let i=3;i<r.length;i+=4)n[i]=r[i];return n}function q(r,t,o,e,n){if(!I(z.FROM_PCPF,i.fromTypedArray(r,16),D.TANGENT,T.fromTypedArray(t),T.fromTypedArray(o),e,i.fromTypedArray(n,16)))return null;for(let i=3;i<r.length;i+=4)n[i]=r[i];return n}var D,z;function H(r,t,n,i,c){switch(u(i,n,tr,i),r===z.FROM_PCPF&&h(tr,tr),t){case D.NORMAL:return j(c,tr);case D.TANGENT:return n$1(c,tr)}}function I(r,t,o,e,n,i,c){if(!t)return;const a$1=e.count,f=a(i);if(X(i))for(let s=0;s<a$1;s++)n.getVec(s,Z),t.getVec(s,rr),S$1(rr,rr,H(r,o,Z,f,or)),c.setVec(s,rr);else for(let s=0;s<a$1;s++){n.getVec(s,Z),t.getVec(s,rr);const i=f$1(e.get(s,1));let a=Math.cos(i);o===D.TANGENT!=(r===z.TO_PCPF)&&(a=1/a),H(r,o,Z,f,or),r===z.TO_PCPF?(or[0]*=a,or[1]*=a,or[2]*=a,or[3]*=a,or[4]*=a,or[5]*=a):(or[0]*=a,or[3]*=a,or[6]*=a,or[1]*=a,or[4]*=a,or[7]*=a),S$1(rr,rr,or),z$1(rr,rr),c.setVec(s,rr);}return c}function J(r){return "local"===r.vertexSpace.type?K(r):Q(r)}function K({vertexSpace:r,transform:t$1,inSpatialReference:o$1,outSpatialReference:e$1,localMode:n$1,outPositions:c$1,positions:a$1}){const s=r.origin??l$1,l=null!=r.origin?t$1?.localMatrix??o:o,m=a(o$1),u$1=e$1.isWebMercator&&n$1||!J$1(o$1,m)?o$1:m;u(o$1,s,tr,u$1),c(tr,tr,l);const T=c$1??t(a$1.length);return e(T,a$1,tr),n(T,u$1,0,T,e$1,0,T.length/3),T}function Q({vertexSpace:r,transform:t$1,outPositions:o$2,positions:e$1,inSpatialReference:n$1,outSpatialReference:i}){const a=null!=r.origin?t$1?.localMatrix??o:o,s=o$2??t(e$1.length);C(a,o)?o$1(s,e$1):e(s,e$1,a);const l=r.origin??l$1;if(!G$1(l,l$1)){const[r,t,o]=l;for(let e=0;e<s.length;e+=3)s[e]+=r,s[e+1]+=t,s[e+2]+=o;}return n(s,n$1,0,s,i,0,s.length/3)?s:null}function X(r){return r.isWGS84||k$1(r)||f$2(r)||p(r)}!function(r){r[r.NORMAL=0]="NORMAL",r[r.TANGENT=1]="TANGENT";}(D||(D={})),function(r){r[r.TO_PCPF=0]="TO_PCPF",r[r.FROM_PCPF=1]="FROM_PCPF";}(z||(z={}));const Z=n$3(),rr=n$3(),tr=e$1(),or=e$2();

export { D as VectorType, L as loadProjectErrorMessage, S as logProjectionError, J as project, G as projectFromPCPF, k as projectNormalFromPCPF, v as projectNormalToPCPF, q as projectTangentFromPCPF, Y as projectTangentToPCPF, w as projectToPCPF, V as transformNormal, B as transformTangent };
