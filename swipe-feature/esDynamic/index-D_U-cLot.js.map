{"version":3,"file":"index-D_U-cLot.js","sources":["../../src/fixtures/swipe/swipe.vue","../../src/fixtures/swipe/index.ts"],"sourcesContent":["<template>\n    <div class=\"swipe-container\">\n        <div\n            id=\"verticalLine\"\n            :style=\"{ left: linePosition, height: lineHeight, top: lineTop }\"\n            ref=\"line\"\n            tabIndex=\"0\"\n            v-tippy=\"{ content: 'Drag and slide to move', placement: 'left' }\"\n        ></div>\n        <input v-model=\"sliderPosition\" id=\"layerSlider\" type=\"range\" ref=\"slider\" min=\"5\" max=\"95\" step=\"0.5\" />\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { FixtureInstance } from '@/api';\nimport { onBeforeMount, computed, onMounted, ref, useTemplateRef, onBeforeUnmount } from 'vue';\nimport { usePanelStore } from '@/stores/panel';\n\nconst panelStore = usePanelStore();\nconst slider = useTemplateRef('slider');\nconst sliderPosition = ref<number>(50);\nconst innerShellHeight = ref<number>(0);\nconst line = useTemplateRef('line');\nconst lineDragging = ref<Boolean>(false);\nconst linePosition = computed(() => {\n    const diff = +sliderPosition.value - 50;\n    const position = 50 + 0.99 * diff;\n    return `${position - 1}%`;\n});\n\nconst lineHeight = computed(() => {\n    return `${innerShellHeight.value}px`;\n});\n\nconst lineTop = computed(() => {\n    return `${(-innerShellHeight.value + 45) / 2}px`;\n});\n\ndefineProps({\n    fixture: {\n        type: FixtureInstance,\n        required: true\n    },\n    message: String\n});\n\nconst mouseMoveHandler = (e: MouseEvent) => {\n    console.log('mosuemove event');\n    console.log(e);\n    if (lineDragging.value) {\n        sliderPosition.value = +sliderPosition.value + e.movementX / 4;\n        setTimeout(() => {\n            const inputEvent = new Event('input');\n            slider.value?.dispatchEvent(inputEvent);\n        });\n    }\n};\n\nonBeforeMount(() => {\n    const innerShell = document.querySelector('.inner-shell');\n    innerShellHeight.value = innerShell?.clientHeight ?? 1000;\n});\n\nonMounted(() => {\n    window.addEventListener('resize', () => {\n        const innerShell = document.querySelector('.inner-shell');\n        innerShellHeight.value = innerShell?.clientHeight ?? innerShellHeight.value;\n    });\n    line.value?.addEventListener('mousedown', e => {\n        lineDragging.value = true;\n        panelStore.setOpacity(0.1);\n    });\n\n    line.value?.addEventListener('mouseup', () => {\n        lineDragging.value = false;\n        panelStore.setOpacity(1);\n    });\n\n    window.addEventListener('mouseup', () => {\n        lineDragging.value = false;\n        panelStore.setOpacity(1);\n    });\n\n    line.value?.addEventListener('mouseover', () => {\n        panelStore.setOpacity(0.1);\n    });\n\n    line.value?.addEventListener('mouseleave', () => !lineDragging.value && panelStore.setOpacity(1));\n\n    slider.value?.addEventListener('focus', () => panelStore.setOpacity(0.1));\n\n    slider.value?.addEventListener('blur', () => panelStore.setOpacity(1));\n\n    slider.value?.addEventListener('mouseover', () => panelStore.setOpacity(0.1));\n\n    slider.value?.addEventListener('mouseleave', () => panelStore.setOpacity(1));\n\n    line.value?.addEventListener('mousemove', mouseMoveHandler);\n});\n\nonBeforeUnmount(() => {\n    window.removeEventListener('resize', () => {\n        const innerShell = document.querySelector('.inner-shell');\n        innerShellHeight.value = innerShell?.clientHeight ?? innerShellHeight.value;\n    });\n\n    line.value?.removeEventListener('mousedown', () => {\n        lineDragging.value = true;\n        panelStore.setOpacity(0.1);\n    });\n\n    line.value?.removeEventListener('mouseup', () => {\n        lineDragging.value = false;\n        panelStore.setOpacity(1);\n    });\n\n    window.removeEventListener('mouseup', () => {\n        lineDragging.value = false;\n        panelStore.setOpacity(1);\n    });\n\n    line.value?.removeEventListener('mouseover', () => panelStore.setOpacity(0.1));\n\n    line.value?.removeEventListener('mouseleave', () => !lineDragging.value && panelStore.setOpacity(1));\n\n    slider.value?.removeEventListener('focus', () => panelStore.setOpacity(0.1));\n\n    slider.value?.removeEventListener('blur', () => panelStore.setOpacity(1));\n\n    slider.value?.removeEventListener('mouseover', () => panelStore.setOpacity(0.1));\n\n    slider.value?.removeEventListener('mouseleave', () => panelStore.setOpacity(1));\n\n    line.value?.removeEventListener('mousemove', mouseMoveHandler);\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.swipe-container {\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    position: absolute;\n    bottom: 50%;\n    z-index: 5;\n}\n\n#layerSlider {\n    width: 90%;\n    opacity: 0.7;\n    -webkit-appearance: none;\n    appearance: none;\n    height: 5px;\n    background: inherit;\n}\n\n#layerSlider:hover {\n    opacity: 1;\n}\n\n#layerSlider::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    appearance: none;\n    width: 25px;\n    height: 25px;\n    background: black;\n    cursor: col-resize;\n}\n\n#verticalLine {\n    display: flex;\n    align-items: center;\n    position: absolute;\n    padding-right: 25px;\n    z-index: 10;\n    background: linear-gradient(#000, #000) no-repeat center/4px 100%;\n}\n\n#verticalLine:hover {\n    cursor: col-resize;\n}\n</style>\n","import SwipeV from './swipe.vue'; // import on-map component\n\nimport { FixtureInstance } from '@/api';\n\nclass SwipeFixture extends FixtureInstance {\n    added(): void {\n        // console.log(`[fixture] ${this.id} added`);\n\n        const { el } = this.mount(SwipeV, {\n            app: this.$element,\n            props: { message: 'This is a swipe.', fixture: this }\n        });\n\n        this.$vApp.$el.appendChild(el.childNodes[0]);\n    }\n\n    removed(): void {\n        // console.log(`[fixture] ${this.id} removed`);\n    }\n}\n\nexport default SwipeFixture;\n"],"names":["panelStore","usePanelStore","slider","useTemplateRef","sliderPosition","ref","innerShellHeight","line","lineDragging","linePosition","computed","lineHeight","lineTop","mouseMoveHandler","e","inputEvent","onBeforeMount","innerShell","onMounted","onBeforeUnmount","SwipeFixture","FixtureInstance","el","SwipeV"],"mappings":"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"}