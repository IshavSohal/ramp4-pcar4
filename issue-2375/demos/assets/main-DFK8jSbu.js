const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./request-D1c3vzLz.js","./preload-helper-ExcqyqRp.js","./IdentityManager-DMZNjZn9.js","./substitute-ClGAsagR.js","./pe-wasm-CU3YFA8c.js","./ElevationLayer-btH1gs8g.js","./resourceUtils-DgSXkoxr.js","./layersCreator-CYoENPV5.js","./portalLayers-FR8acVJI.js","./associatedFeatureServiceUtils-D8wUatu6.js","./fetchService-CAd53wed.js","./WhereClause-BOVBfb1I.js","./TimeOnly-Uamt_DHo.js","./arcadeUtils-CIAWkIgM.js","./ImmutableArray-BPVd6ESQ.js","./number-BPmFagV8.js","./webStyleSymbolUtils-B1ihta4M.js","./devEnvironmentUtils-b2XrV2Jv.js","./geometryEngineJSON-Dtfpmcvj.js","./geometryEngineBase-tPRu0UqQ.js","./json-Wa8cmqdu.js","./arcgisLayers-B3jOf8de.js","./statsWorker-RN93Ljxi.js","./utils-BkhlLUkW.js","./utils-CZzvPL7I.js","./utils-CtxxGeLQ.js","./geometryEngineWorker-DsJUIPpe.js","./CSVSourceWorker-CH-uf4GH.js","./date-oVhaTydQ.js","./FeatureStore-Cykt-WOx.js","./BoundsStore-9jQ8uoTI.js","./PooledRBush-Bp7OqXGW.js","./timeSupport-CfktqnEB.js","./QueryEngine-CEqO3HyH.js","./QueryEngineCapabilities-CTDe3LlQ.js","./clientSideDefaults-COHwWYv5.js","./EdgeProcessingWorker-CKbQ5ewk.js","./InterleavedLayout-B6fx3q8S.js","./BufferView-CEl8sR5b.js","./types-D0PSWh4d.js","./Util-CkoEJ5y1.js","./edgeProcessing-CNOUPJ4S.js","./deduplicate--iQIF3Ph.js","./Indices-BApqJ_jg.js","./VertexAttribute-BlT9lbVY.js","./enums-BlUEVwJR.js","./VertexElementDescriptor-BOD-G50G.js","./ElevationSamplerWorker-DvrDR7X1.js","./MeshLocalVertexSpace-pEBTS0z9.js","./vertexSpaceConversion-jg6Wm_0v.js","./mat3f64-q3fE-ZOt.js","./mat4f64-CSKppSlJ.js","./spatialReferenceEllipsoidUtils-DRDp9obx.js","./computeTranslationToOriginAndRotation-DJAc2PK0.js","./meshVertexSpaceUtils-DDiFCYF9.js","./vec3-C7Bs7UPg.js","./projection-GzeXKBbO.js","./DoubleArray-4aYsOW9A.js","./vec4-vJ-WKNIY.js","./FeatureServiceSnappingSourceWorker-DjzplnA3.js","./GeoJSONSourceWorker-ClJVcTJd.js","./geojson-ltPHkyTw.js","./sourceUtils-D6rwqJC2.js","./LercWorker-CRcAB_Y3.js","./MemorySourceWorker-CN85jZ_C.js","./objectIdUtils-BmFjqQA3.js","./PBFDecoderWorker-YwPaoE2G.js","./FeaturePipelineWorker-x3pDisar.js","./definitions-Y_v3njP4.js","./AttributeStore-BkFFkk-V.js","./LabelMetric-BIB4X_A2.js","./enums-BRXbslMp.js","./Texture-FfKAQHnx.js","./Program-BbMc5Czo.js","./UpdateTracking2D-ad_Ac2ZU.js","./BidiEngine-BwB1Df7c.js","./GeometryUtils-Lv1u_oM6.js","./Rect-CUzevAry.js","./BindType-BmZEZMMh.js","./highlightReasons-ckal6SW8.js","./tileUtils-B7X19rIS.js","./MeshWriterRegistry-YNmBeo33.js","./PieChartMeshWriter-Byw2ngse.js","./TurboLine-DEiZBkqW.js","./earcut-hEbqLwXm.js","./constants-D5zmR9t2.js","./grouping-C3oVcgXr.js","./ogcFeatureUtils-CaJ_VnUu.js","./CircularArray-CujHzHWW.js","./createConnection-Cxwn-tNF.js","./PointCloudWorker-6oSLKj02.js","./quat-Di6-uQ_H.js","./quatf64-Bdb9ZJJK.js","./vec3f32-nZdmKIgz.js","./PointCloudUniqueValueRenderer-BiUpBoHF.js","./I3SBinaryReader-DKKduEPB.js","./orientedBoundingBox-ByoPEHE1.js","./plane-DNt1QyR-.js","./RasterWorker-C9A23FMv.js","./PolynomialTransform-CYOTgfEl.js","./rasterProjectionHelper-CwRlYQoK.js","./SceneLayerSnappingSourceWorker-CdJthQkm.js","./lineSegment-DCswYVSe.js","./sphere-DvTH8s7G.js","./SceneLayerWorker-DkC2p5lT.js","./I3SUtil-Dj0_obMH.js","./floatRGBA-cKbXmZnj.js","./NormalAttribute.glsl-DenI5o3F.js","./interfaces-B8ge7Jg9.js","./WFSSourceWorker-BGbNNL9y.js","./wfsUtils-BNNzRcMe.js","./xmlUtils-CtUoQO7q.js","./WorkerTileHandler-CLgQz1-i.js","./enums-BRzLM11V.js","./config-MDUrh2eL.js","./StyleDefinition-BK3ROBTO.js","./SourceLayerData-CPgI6t-j.js","./StyleRepository-2CpeQsX7.js","./Lyr3DWorker-DZXoIO71.js","./deleteForwardEdits-D71bJFCM.js","./DeleteForwardEditsParameters-COvNhdhP.js","./editingSupport-D8aB9y34.js","./hydrated-DEIkVKN7.js","./layersLoader-C9LinuhP.js","./jsonContext-D47tZeCv.js","./featureLayerUtils-Cc6X0ju_.js","./originUtils-CPX8CCAY.js","./multiOriginJSONSupportUtils-C0wm8_Yw.js","./utils-adJ9faTq.js","./saveAPIKeyUtils-CBj3ZJIs.js","./saveUtils-DpKKKQHS.js","./FeatureLayerSource-CeL7i0Ih.js","./MeshTransform-pjJj-2Mn.js","./symbolLayerUtils-DmAXyJ4F.js","./lerc-wasm-DKLPZUaK.js","./imageryUtils-BCEbWFcj.js","./meshFeatureSet-D6Dlfi8N.js","./Mesh-Bi-ZOOPm.js","./imageUtils-DQUK3jRk.js","./MeshVertexAttributes-Cwd8DGa7.js","./executeRelationshipQuery-DKVnU5qr.js","./queryAttachments-C3qrVcq9.js","./executeTopFeaturesQuery-D_iQ9hUm.js","./queryTopFeatures-DdfKQaNl.js","./executeForTopIds-DGq5l7o-.js","./executeForTopExtents-C-9A48V4.js","./executeForTopCount-BiNmedc9.js","./ElevationQuery-CegAKfs-.js","./Popup-BcmjNxAq.js","./layerViewUtils-CuYS5zdy.js","./geometryServiceUtils-BlCp-5My.js","./project-CcZkIvwN.js","./webglDeps-D6JzrBv5.js","./NestedMap-DFQLExW6.js","./ProgramTemplate-CIyD-_a6.js","./mapViewDeps-C0zfIe5e.js","./SDFHelper-gVMSMcoj.js","./Container-SlS0oaFf.js","./WGLContainer-D6DF2o9v.js","./MagnifierPrograms-DfpeV_8x.js","./testSVGPremultipliedAlpha-CUw0m24e.js","./RenderingContext-Cp9MLWwC.js","./renderState-C37QfRey.js","./basicInterfaces-DngWxyLO.js","./doublePrecisionUtils-B0owpBza.js","./rasterizingUtils-j9geDMBM.js","./utils-Caab-46Y.js","./FeatureCommandQueue-Ce-uxMWf.js","./GraphicsView2D-ydBwMa7G.js","./normalizeUtilsSync-WNUymize.js","./GraphicContainer-DTQw2Wrw.js","./AGraphicContainer-DHUUdnRF.js","./TechniqueInstance-DKDIsdjh.js","./TileContainer-C8mPBLxZ.js","./requestImageUtils-CvwOXDS0.js","./TileLayerView2D-Df4ZIL2J.js","./imageUtils-DqczBGWl.js","./Bitmap-BUSEXtVI.js","./LayerView-B8We1wij.js","./HighlightGraphicContainer-CggBqmdP.js","./RefreshableLayerView-CqOJexJ4.js","./drapedUtils-BPhfPjPh.js","./popupUtils-C4cfC0oX.js","./FeatureLayerView2D-CQVfJHkX.js","./timeSupport-CJ5nYXC7.js","./HighlightCounter-zp5w_oOi.js","./BaseDynamicLayerView2D-t2fua-JI.js","./BitmapContainer-BBCLcmJi.js","./ExportStrategy-2Zm5zjM1.js","./CatalogLayerView2D-C54DsJ5l.js","./CatalogDynamicGroupLayerView2D-DgGl5G_5.js","./CatalogFootprintLayerView2D-BF0Canas.js","./GeoRSSLayerView2D-CWqRTn79.js","./GraphicsLayerView2D-B8zPY_2R.js","./GroupLayerView2D-DGmsG1yQ.js","./ImageryLayerView2D-DIHHYKP_.js","./RasterVFDisplayObject-CmRdjvcw.js","./ImageryTileLayerView2D-BqJtk7c1.js","./rasterUtils-D84yqhma.js","./RawBlockCache-DRv9AK6h.js","./KMLLayerView2D-CrN6Ro6a.js","./kmlUtils-BHcCPtfl.js","./KnowledgeGraphLayerView2D-CNnUbgRR.js","./MapImageLayerView2D-BZUcvzAU.js","./MapNotesLayerView2D-C-CbcZW0.js","./MediaLayerView2D-DdvX_mq_.js","./perspectiveUtils-DYUra_75.js","./OverlayContainer-DMOeXAzX.js","./OGCFeatureLayerView2D-Dl2pdFpy.js","./RouteLayerView2D-CTwvJOYT.js","./Stop-D06e_WTe.js","./StreamLayerView2D-BocCihch.js","./SubtypeGroupLayerView2D-BSG6hUSE.js","./VectorTileLayerView2D-BaZeiddM.js","./VideoLayerView2D-CwKVfaQz.js","./TelemetryDisplay-CZ51nemI.js","./WMSLayerView2D-IxT_k1ch.js","./WMTSLayerView2D-B_6YUfu9.js","./calcite-button-MPcyXaF9.js","./form-E5eKqEgG.js","./dom-DjKP7Xeh.js","./interactive-BeJmDjyi.js","./label-xcfpHbl0.js","./component-6CIDVndn.js","./loadable-Cf4pJpHj.js","./locale-DLcXRSOr.js","./observers-BjkDf4CO.js","./t9n-DgHYWAbm.js","./icon-DHHNGh6y.js","./loader-MtTF7h1E.js","./calcite-icon-E1cKYEny.js","./shp.min-BSaRyakr.js","./_commonjs-dynamic-modules-TDtrdbi3.js","./jszip.min-DYoo7LzA.js","./index-Bh7qbEVi.js","./index-carWiDED.css","./index-CyYGCWEC.js","./screen.vue_vue_type_script_setup_true_lang-DWn0Sc7G.js","./screen-Cea9pofX.css","./index-CO7xKVXD.js","./index-Du7_d06n.js","./index-Ctc7h-US.css","./index-r1a2JTQb.js","./hilight-defs-CqXQYtIh.js","./index-DGc9zG0r.js","./fabric-B_7CmGOX.js","./index-DJbh_WTz.js","./index-CM-ZMkGS.js","./index-DPClZ7Dn.js","./index-8ziTb45B.js","./index-BKmj040x.js","./index-DQ5tkJT5.js","./index-BgVgGMLS.js","./screen.vue_vue_type_script_setup_true_lang-Dj2gYKUR.js","./index-CN7r9_ue.js","./index-C2sWq2Tl.js","./index-0zFChL0V.js","./index-pK0h9t06.js","./table-state-manager-D0AQ-RaE.js","./index-wl5Sw16T.js","./index-D-e8a6Kf.js","./index-CKS9V-uO.js","./index-Bix7Y3QS.js","./index-iClN2xwk.js","./index-CV_Qci6f.css","./index-pcZmjvUb.js","./index-CYRstoDP.js","./index-gHG4fV0D.js","./index-C6ufsCCa.css","./index-DoDptNk9.js","./index-nDri3W3u.css","./index-BZr-g9x4.js","./index-Dti23dwS.css","./index-CqRnhPtZ.js","./index-CC-MkzSl.js","./index-AkOR3c4J.js","./screen-RALGRNJ8.js","./screen-CwZKIVuX.js","./screen-METnU-sb.css","./screen-DLeSmi6z.js","./screen-Dk_bN7g0.js","./screen-CwbtZ41W.css","./screen-DmUFbCJa.js","./screen-CHEYFOo7.css","./screen-CWwMpTRd.js","./marked.esm-DmSrlTiT.js","./screen-DcX-wckC.css","./screen-a5Xh5ZG1.js","./index-D7CTOdaK.js","./screen-DH2W8SRu.css","./screen-DFHzawtH.js","./screen-DEi7lwan.js","./screen-CkXxljnt.css","./screen-BVFnOf1Q.js","./toggle-switch-control-CITXaYi2.js","./toggle-switch-control-CXkTZWA3.css","./screen-DdmnHAye.css","./screen-Bhsny0Q4.js","./screen-BkGPqtHP.css"])))=>i.map(i=>d[i]);
import{_ as fe}from"./preload-helper-ExcqyqRp.js";var ch=(e=>(e.BLOB="blob",e.DATE="date",e.DOUBLE="double",e.GEOMETRY="geometry",e.GLOBAL_ID="global-id",e.GUID="guid",e.INTEGER="integer",e.LONG="long",e.OID="oid",e.RASTER="raster",e.SINGLE="single",e.SMALL_INTEGER="small-integer",e.STRING="string",e.XML="xml",e))(ch||{}),Ac=(e=>(e.CIRCLE="circle",e.CROSS="cross",e.DIAMOND="diamond",e.ICON="icon",e.PATH="path",e.SQUARE="square",e.TRIANGLE="triangle",e.X="x",e))(Ac||{}),io=(e=>(e.DASH="dash",e.DASHDOT="dash-dot",e.DASHDOTDOT="short-dash-dot-dot",e.DOT="dot",e.LONGDASH="long-dash",e.LONGDASHDOT="long-dash-dot",e.LONGDASHDOTDOT="long-dash-dot-dot",e.NONE="none",e.NULL="none",e.SHORTDASH="short-dash",e.SHORTDASHDOT="short-dash-dot",e.SHORTDASHDOTDOT="short-dash-dot-dot",e.SHORTDOT="short-dot",e.SOLID="solid",e))(io||{}),ZW=(e=>(e.BEVEL="bevel",e.MITER="miter",e.ROUND="round",e))(ZW||{}),YW=(e=>(e.ROUND="round",e.BUTT="butt",e.SQUARE="square",e))(YW||{}),KW=(e=>(e.BDIAG="backward-diagonal",e.CROSS="cross",e.DIAG_CROSS="diagonal-cross",e.FDIAG="forward-diagonal",e.HORIZONTAL="horizontal",e.NONE="none",e.NULL="none",e.SOLID="solid",e.VERTICAL="vertical",e))(KW||{}),Ft=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e.LINEARRING="LinearRing",e.EXTENT="Extent",e.NONE="None",e.UNKNOWN="Unknown",e))(Ft||{}),jE=(e=>(e.Simple="simple",e.Unique="uniqueValue",e.ClassBreaks="classBreaks",e.Unknown="unknown",e))(jE||{}),ct=(e=>(e.FEATURE="esri-feature",e.MAPIMAGE="esri-map-image",e.TILE="esri-tile",e.IMAGERY="esri-imagery",e.GRAPHIC="esri-graphic",e.WMS="ogc-wms",e.WFS="ogc-wfs",e.GEOJSON="file-geojson",e.GEOJSONZIPPED="file-zip-geojson",e.CSV="file-csv",e.SHAPEFILE="file-shape",e.FLATGEOBUF="file-fgb",e.FLATGEOBUFZIPPED="file-zip-fgb",e.OSM="osm-tile",e.DATACSV="data-csv",e.DATAJSON="data-json",e.DATATABLE="data-esri-table",e.UNKNOWN="unknown",e.SUBLAYER="sublayer",e))(ct||{}),aa=(e=>(e.FEATURE="feature",e.GRAPHIC="graphic",e.IMAGERY="imagery",e.MAPIMAGE="map-image",e.NOLAYER="no-layer",e.OSM="osm-tile",e.TILE="tile",e.UNKNOWN="unknown",e.WMS="wms",e))(aa||{}),Ps=(e=>(e.ESRI_FEATURE="esriFeature",e.ESRI_RASTER="esriRaster",e.ESRI_TILE="esriTile",e.OSM_TILE="osmTile",e.OGC_RASTER="ogcRaster",e.UNKNOWN="unknown",e))(Ps||{}),mi=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e))(mi||{}),Ki=(e=>(e.GEOMETRIC="geometric",e.SYMBOLIC="symbolic",e.HYBRID="hybrid",e.NONE="none",e))(Ki||{}),Jr=(e=>(e.NEW="new",e.INITIATING="initiating",e.INITIATED="initiated",e.TERMINATING="terminating",e.TERMINATED="terminated",e))(Jr||{}),yi=(e=>(e.NEW="new",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error",e))(yi||{}),ho=(e=>(e.NOT_LOADED="not-loaded",e.NOT_VISUAL="not-visual",e.REFRESH="refresh",e.UP_TO_DATE="up-to-date",e))(ho||{}),q0=(e=>(e.ESRI="esri",e.TEXT="text",e.IMAGE="image",e.HTML="html",e.XML="xml",e.JSON="json",e.UNKNOWN="unknown",e))(q0||{}),Ln=(e=>(e.SYMBOL="symbol",e.GRID="grid",e.EXTENT="extent",e.INITIAL="initial",e.API="api",e.PERMANENT="permanent",e))(Ln||{}),Ii=(e=>(e.BoundaryZoom="boundaryZoom",e.Datatable="datatable",e.Identify="identify",e.Metadata="metadata",e.Opacity="opacity",e.Refresh="refresh",e.Reload="reload",e.Remove="remove",e.Settings="settings",e.Symbology="symbology",e.Visibility="visibility",e))(Ii||{});class Vl{attributes;geometry;style;id;constructor(t,r,i){this.geometry=t,r?this.id=r:this.id=wv.sharedUtils.generateUUID(),i?this.attributes=i:this.attributes={}}_hover;get hover(){return this._hover}set hover(t){t&&this._hover&&this._hover.id!==t.id&&this.removeHover(),this._hover=t}removeHover(){this._hover&&(this._hover=void 0)}}function h(e,t,r,i){var s,n=arguments.length,o=n<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(n<3?s(o):n>3?s(t,r,o):s(t,r))||o);return n>3&&o&&Object.defineProperty(t,r,o),o}function dtt(e,t){return function(r,i){t(r,i,e)}}function ftt(e,t,r,i){function s(n){return n instanceof r?n:new r(function(o){o(n)})}return new(r||(r=Promise))(function(n,o){function a(c){try{u(i.next(c))}catch(p){o(p)}}function l(c){try{u(i.throw(c))}catch(p){o(p)}}function u(c){c.done?n(c.value):s(c.value).then(a,l)}u((i=i.apply(e,[])).next())})}let ld;function ce(e){return typeof ld[e]=="function"?ld[e]=ld[e](globalThis):ld[e]}ld=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},ce.add=(e,t,r,i)=>((i||ld[e]===void 0)&&(ld[e]=t),r&&ce(e)),ce.cache=ld,ce.add("big-integer-warning-enabled",!0),ce.add("esri-deprecation-warnings",!0),ce.add("esri-tests-disable-screenshots",!1),ce.add("esri-tests-use-full-window",!1),ce.add("esri-tests-post-to-influx",!0),(()=>{ce.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const e=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ce.add("host-browser",e),ce.add("host-node",typeof globalThis.process=="object"&&globalThis.process.versions?.node&&globalThis.process.versions.v8),ce.add("dom",e),ce("host-browser")){const t=navigator,r=t.userAgent,i=t.appVersion,s=parseFloat(i);if(ce.add("wp",parseFloat(r.split("Windows Phone")[1])||void 0),ce.add("msapp",parseFloat(r.split("MSAppHost/")[1])||void 0),ce.add("khtml",i.includes("Konqueror")?s:void 0),ce.add("edge",parseFloat(r.split("Edge/")[1])||void 0),ce.add("opr",parseFloat(r.split("OPR/")[1])||void 0),ce.add("webkit",!ce("wp")&&!ce("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),ce.add("chrome",!ce("edge")&&!ce("opr")&&parseFloat(r.split("Chrome/")[1])||void 0),ce.add("android",!ce("wp")&&parseFloat(r.split("Android ")[1])||void 0),ce.add("safari",!i.includes("Safari")||ce("wp")||ce("chrome")||ce("android")||ce("edge")||ce("opr")?void 0:parseFloat(i.split("Version/")[1])),ce.add("mac",i.includes("Macintosh")),!ce("wp")&&/(iPhone|iPod|iPad)/.test(r)){const n=RegExp.$1.replace(/P/,"p"),o=/OS ([\d_]+)/.test(r)?RegExp.$1:"1",a=parseFloat(o.replace(/_/,".").replaceAll("_",""));ce.add(n,a),ce.add("ios",a)}ce("webkit")||(!r.includes("Gecko")||ce("wp")||ce("khtml")||ce("edge")||ce.add("mozilla",s),ce("mozilla")&&ce.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&ce.add("esri-mobile",t),r&&ce.add("esri-iPhone",r),ce.add("esri-geolocation",!!navigator.geolocation)}ce.add("esri-wasm","WebAssembly"in globalThis),ce.add("esri-performance-mode-frames-between-render",20),ce.add("esri-force-performance-mode",!1),ce.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),ce.add("wasm-simd",()=>{const e=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(e))}),ce.add("esri-atomics","Atomics"in globalThis),ce.add("esri-workers","Worker"in globalThis),ce.add("web-feat:cache","caches"in globalThis),ce.add("esri-workers-arraybuffer-transfer",!ce("safari")||Number(ce("safari"))>=12),ce.add("workers-pool-size",8),ce.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ce.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ce.add("featurelayer-fast-triangulation-enabled",!0),ce.add("featurelayer-animation-enabled",!0),ce.add("featurelayer-snapshot-enabled",!0),ce.add("featurelayer-snapshot-point-min-threshold",8e4),ce.add("featurelayer-snapshot-point-max-threshold",4e5),ce.add("featurelayer-snapshot-point-coverage",.1),ce.add("featurelayer-query-max-depth",4),ce.add("featurelayer-query-pausing-enabled",!1),ce.add("featurelayer-advanced-symbols",!1),ce.add("featurelayer-pbf",!0),ce.add("featurelayer-pbf-statistics",!1),ce.add("feature-layers-workers",!0),ce.add("feature-polyline-generalization-factor",1),ce.add("mapview-transitions-duration",200),ce.add("mapview-essential-goto-duration",200),ce.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ce.add("mapserver-pbf-version-support",10.81),ce.add("mapservice-popup-identify-max-tolerance",20),ce("host-webworker")||ce("host-browser")&&(ce.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ce.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{ce.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ce.add("esri-image-decode",!1,!0,!0)})}return!1}),ce.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();let Lw=class Nf{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*Nf._m}getInt(){return this._seed=(Nf._a*this._seed+Nf._c)%Nf._m,this._seed}getFloat(){return this.getInt()/(Nf._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/Nf._m*i}};Lw._m=2147483647,Lw._a=48271,Lw._c=0;function mtt(e,t){return t?e.filter((r,i,s)=>s.findIndex(t.bind(null,r))===i):Array.from(new Set(e))}function VE(e,t,r){if(e==null&&t==null)return!0;if(e==null||t==null||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function ytt(e,t){let r=e.length!==t.length;r&&(e.length=t.length);for(let i=0;i<t.length;++i)e[i]!==t[i]&&(e[i]=t[i],r=!0);return r}function p7(e,t,r){let i,s;return r?(i=t.filter(n=>!e.some(o=>r(o,n))),s=e.filter(n=>!t.some(o=>r(o,n)))):(i=t.filter(n=>!e.includes(n)),s=e.filter(n=>!t.includes(n))),{added:i,removed:s}}function gtt(e){return e&&typeof e.length=="number"}let XW=class{constructor(){this.last=0}};const QW=new XW;function UC(e,t,r,i){i=i||QW;const s=Math.max(0,i.last-10);for(let o=s;o<r;++o)if(e[o]===t)return i.last=o,o;const n=Math.min(s,r);for(let o=0;o<n;++o)if(e[o]===t)return i.last=o,o;return-1}function Vce(e,t,r,i){const s=e.length,n=UC(e,t,s,i);if(n!==-1)return e[n]=e[s-1],e.pop(),t}const Ka=new Set;function Uce(e,t,r=e.length,i=t.length,s,n){if(i===0||r===0)return r;Ka.clear();for(let a=0;a<i;++a)Ka.add(t[a]);s=s||QW;const o=Math.max(0,s.last-10);for(let a=o;a<r;++a)if(Ka.has(e[a])&&(n?.push(e[a]),Ka.delete(e[a]),e[a]=e[r-1],--r,--a,Ka.size===0||r===0))return Ka.clear(),r;for(let a=0;a<o;++a)if(Ka.has(e[a])&&(n?.push(e[a]),Ka.delete(e[a]),e[a]=e[r-1],--r,--a,Ka.size===0||r===0))return Ka.clear(),r;return Ka.clear(),r}function zce(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function ra(e,t){return e!=null}function eJ(e){return 32+e.length}function aD(){return 16}function btt(e){if(!e)return 0;let t=rJ;for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];switch(typeof i){case"string":t+=eJ(i);break;case"number":t+=aD();break;case"boolean":t+=4}}return t}function Gce(e){if(!e)return 0;if(Array.isArray(e))return Bce(e);let t=rJ;for(const r in e)e.hasOwnProperty(r)&&(t+=tJ(e[r]));return t}function Bce(e){const t=e.length;if(t===0||typeof e[0]=="number")return 32+8*t;let r=iJ;for(let i=0;i<t;i++)r+=tJ(e[i]);return r}function tJ(e){switch(typeof e){case"object":return Gce(e);case"string":return eJ(e);case"number":return aD();case"boolean":return 4;default:return 8}}function qce(e,t){return iJ+e.length*t}const rJ=32,iJ=16;function wtt(e){return e instanceof ArrayBuffer}function lD(e){return e?.constructor?.name==="Int8Array"}function sJ(e){return e?.constructor?.name==="Uint8Array"}function nJ(e){return e?.constructor?.name==="Uint8ClampedArray"}function uD(e){return e?.constructor?.name==="Int16Array"}function oJ(e){return e?.constructor?.name==="Uint16Array"}function cD(e){return e?.constructor?.name==="Int32Array"}function aJ(e){return e?.constructor?.name==="Uint32Array"}function UE(e){return e?.constructor?.name==="Float32Array"}function zE(e){return e?.constructor?.name==="Float64Array"}function Hce(e){return!("buffer"in e)}function Wce(...e){return e.reduce((t,r)=>t+(r?Hce(r)?qce(r,aD()):r.byteLength+Jce:0),0)}const Jce=145,Zce=1024;function _tt(e){return zE(e)||UE(e)||cD(e)||uD(e)||lD(e)}function Stt(e){return zE(e)||UE(e)}function xtt(e){return zE(e)?179769e303:UE(e)?3402823e32:aJ(e)?4294967295:oJ(e)?65535:sJ(e)||nJ(e)?255:cD(e)?2147483647:uD(e)?32767:lD(e)?127:256}function Yce(e,t){let r;for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function Z(e){if(!e||typeof e!="object"||typeof e=="function")return e;const t=cJ(e);if(t!=null)return t;if($3(e))return e.clone();if(lJ(e))return e.map(Z);if(uJ(e))return e.clone();const r={};for(const i of Object.getOwnPropertyNames(e))r[i]=Z(e[i]);return r}function zC(e){if(!e||typeof e!="object"||typeof e=="function"||"HTMLElement"in globalThis&&e instanceof HTMLElement)return e;const t=cJ(e);if(t!=null)return t;if(lJ(e)){let r=!0;const i=e.map(s=>{const n=zC(s);return s!=null&&n==null&&(r=!1),n});return r?i:null}if($3(e))return e.clone();if(e instanceof File||e instanceof Blob)return e;if(!uJ(e)){const r=new(Object.getPrototypeOf(e)).constructor;for(const i of Object.getOwnPropertyNames(e)){const s=e[i],n=zC(s);if(s!=null&&n==null)return null;r[i]=n}return r}return null}function $3(e){return typeof e.clone=="function"}function lJ(e){return typeof e.map=="function"&&typeof e.forEach=="function"}function uJ(e){return typeof e.notifyChange=="function"&&typeof e.watch=="function"}function d7(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;const t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function cJ(e){if(lD(e)||sJ(e)||nJ(e)||uD(e)||oJ(e)||cD(e)||aJ(e)||UE(e)||zE(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,i]of e)t.set(r,Z(i));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(Z(r));return t}return null}function hD(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof e?.getTime=="function"&&typeof t?.getTime=="function"&&e.getTime()===t.getTime()||!1}function hJ(e,t){return e===t||(e==null||typeof e=="string"?e===t:typeof e=="number"?e===t||typeof t=="number"&&isNaN(e)&&isNaN(t):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():Array.isArray(e)?Array.isArray(t)&&VE(e,t):e instanceof Set?t instanceof Set&&Xce(e,t):e instanceof Map?t instanceof Map&&Qce(e,t):!!d7(e)&&d7(t)&&Kce(e,t))}function Kce(e,t){if(e===null||t===null)return!1;const r=Object.keys(e);if(t===null||Object.keys(t).length!==r.length)return!1;for(const i of r)if(e[i]!==t[i]||!Object.prototype.hasOwnProperty.call(t,i))return!1;return!0}function Xce(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function Qce(e,t){if(e.size!==t.size)return!1;for(const[r,i]of e){const s=t.get(r);if(s!==i||s===void 0&&!t.has(r))return!1}return!0}function pD(e,t,r=!1){return dJ(e,t,r)}function GE(e,t){if(t!=null)return t[e]||pJ(e.split("."),!1,t)}function mn(e,t,r){const i=e.split("."),s=i.pop(),n=pJ(i,!0,r);n&&s&&(n[s]=t)}function f7(e,t){if(e==null&&t==null)return!1;if(e==null||t==null)return!0;if(typeof e=="object"){if(Array.isArray(e)){const r=t;if(e.length!==r.length)return!0;for(let i=0;i<e.length;i++)if(f7(e[i],r[i]))return!0;return!1}if(Object.keys(e).length!==Object.keys(t).length)return!0;for(const r in e)if(f7(e[r],t[r]))return!0;return!1}return e!==t}function pJ(e,t,r){let i=r;for(const s of e){if(i==null)return;if(!(s in i)){if(!t)return;i[s]={}}i=i[s]}return i}function dJ(e,t,r){return t?Object.keys(t).reduce((i,s)=>{let n=i[s],o=t[s];return n===o?i:n===void 0?(i[s]=Z(o),i):(Array.isArray(o)||Array.isArray(i)?(n=n?Array.isArray(n)?i[s]=n.concat():i[s]=[n]:i[s]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{n.includes(a)||n.push(a)}):i[s]=o.concat())):o&&typeof o=="object"?i[s]=dJ(n,o,r):i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[s]=o),i)},e||{}):e}const Vt={apiKey:void 0,applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!0,portalUrl:"https://www.arcgis.com",respectPrefersReducedMotion:!0,routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],internalInterceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(pD(Vt,globalThis.esriConfig,!0),delete Vt.has),!Vt.assetsPath){{const e="4.30";Vt.assetsPath=`https://js.arcgis.com/${e}/@arcgis/core/assets`}Vt.defaultAssetsPath=Vt.assetsPath}const ehe=/\{([^}]+)\}/g;function m7(e){return e??""}function BE(e,t){return t?e.replaceAll(ehe,typeof t=="object"?(r,i)=>m7(GE(i,t)):(r,i)=>m7(t(i))):e}function Mtt(e,t){return e.replaceAll(/([.$?*|{}()[\]\\/+\-^])/g,r=>t?.includes(r)?r:`\\${r}`)}function fJ(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}let y7;function Ttt(e){return y7??=new DOMParser,y7.parseFromString(e||"","text/html").body.innerText||""}function Itt(e,t){return new RegExp(`{${t}}`,"ig").test(e)}const g7={info:0,warn:1,error:2,none:3};let be=class $o{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,$o._loggers.set(this.module,this);const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=$o.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){}static get test(){}static getLogger(t){return t=typeof t!="string"?t.declaredClass:t,$o._loggers.get(t)||new $o({module:t})}_log(t,r,...i){if(this._matchLevel(t)){if(r!=="always"&&!$o._throttlingDisabled){const s=rhe(i),n=this._loggedMessages[t].get(s);if(r==="once"&&n!=null||r==="oncePerTick"&&n&&n>=$o._tickCounter)return;this._loggedMessages[t].set(s,$o._tickCounter),$o._scheduleTickCounterIncrement()}for(const s of Vt.log.interceptors)if(s(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;i!=null;){const s=i[t];if(s!=null)return s;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",the)}_matchLevel(t){const r=Vt.log.level||"warn";return g7[this._parentWithMember("level",r)]<=g7[t]}static _scheduleTickCounterIncrement(){$o._tickCounterScheduled||($o._tickCounterScheduled=!0,Promise.resolve().then(()=>{$o._tickCounter++,$o._tickCounterScheduled=!1}))}};function the(e,t,...r){console[e](`[${t}]`,...r)}function rhe(...e){return fJ(JSON.stringify(e,(r,i)=>typeof i!="object"||Array.isArray(i)?i:"[Object]"))}be._loggers=new Map,be._tickCounter=0,be._tickCounterScheduled=!1,be._throttlingDisabled=!1;function ihe(e,t){return e.replaceAll(/\$\{([^\s:}]*)(?::([^\s:}]+))?\}/g,(r,i)=>i===""?"$":(GE(i,t)??"").toString())}let mJ=class{constructor(t,r,i=void 0){this.name=t,this.details=i,this.message=(r&&ihe(r,i))??""}toString(){return"["+this.name+"]: "+this.message}},K=class yJ extends mJ{constructor(t,r,i){super(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return Z(r)}catch{return"[object]"}}))}}catch(t){throw be.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new yJ(t.name,t.message,t.details)}};K.prototype.type="error";const v7=new WeakMap;function she(e,t,r=!1){const i=`ðŸ›‘ DEPRECATED - ${t}`;if(!r)return void e.warn(i);let s=v7.get(e);s||(s=new Set,v7.set(e,s)),s.has(t)||(s.add(t),e.warn(i))}function gJ(e,t,r={}){if(ce("esri-deprecation-warnings")){const{moduleName:i}=r;yy(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function Al(e,t,r={}){if(ce("esri-deprecation-warnings")){const{moduleName:i}=r;yy(e,`Property: ${(i?i+"::":"")+t}`,r)}}function nhe(e,t,r={}){ce("esri-deprecation-warnings")&&yy(e,`Multiple argument constructor: ${t}`,{warnOnce:!0,replacement:`new ${t}({ <your properties here> })`,...r})}function yy(e,t,r={}){if(ce("esri-deprecation-warnings")){const{replacement:i,version:s,see:n,warnOnce:o}=r;let a=t;i&&(a+=`
	ðŸ› ï¸ Replacement: ${i}`),s&&(a+=`
	âš™ï¸ Version: ${s}`),n&&(a+=`
	ðŸ”— See ${n} for more details.`),she(e,a,o)}}function Att(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function ohe(e,t){for(const r of e)if(r!=null&&t(r))return r}function C3(e){return e!=null&&typeof e[Symbol.iterator]=="function"}let k2=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let t=0;return this._groups.forEach(r=>{t+=r.length}),t}add(t,r){if(C3(t)){const i=this._getOrCreateGroup(r);for(const s of t)w7(s)&&i.push(s)}else w7(t)&&this._getOrCreateGroup(r).push(t);return this}forEach(t,r){if(typeof t=="function")this._groups.forEach(i=>i.forEach(t));else{const i=this._getGroup(t);i&&r&&i.forEach(r)}}has(t){return this._groups.has(BS(t))}remove(t){if(typeof t!="string"&&C3(t)){for(const r of t)this.remove(r);return this}return this.has(t)?(b7(this._getGroup(t)),this._groups.delete(BS(t)),this):this}removeAll(){return this._groups.forEach(b7),this._groups.clear(),this}removeReference(t){return this._groups.delete(t),this}_getOrCreateGroup(t){if(this.has(t))return this._getGroup(t);const r=[];return this._groups.set(BS(t),r),r}_getGroup(t){return this._groups.get(BS(t))}};function BS(e){return e||"_default_"}function b7(e){for(const t of e)t instanceof k2?t.removeAll():t.remove()}function w7(e){return e!=null&&(!!e.remove||e instanceof k2)}function gd(e,t){if(e==null)throw new Error(t??"value is None")}function jr(e){return e?.destroy(),null}function Ctt(e){return e?.dispose(),null}function Kr(e){return e?.remove(),null}function O_(e){return e?.abort(),null}function Ott(e){return e?.release(),null}function ahe(e,t,r){return e!=null&&t!=null?r!=null?r(e,t):e.equals(t):e===t}function lhe(e,t){let r;return e.some((i,s)=>(r=t(i,s),r!=null)),r??void 0}const vJ=Symbol("Accessor-beforeDestroy"),uhe={remove:()=>{}};function or(e){return e?{remove(){e&&(e(),e=void 0)}}:uhe}function che(e){e.forEach(t=>t?.remove())}function N2(e){return or(()=>che(e))}function es(e){return e.__accessor__??null}function hhe(e,t){return e?.metadata?.[t]!=null}function PM(e,t,r){return r?O3(e,t,{policy:r,path:""}):O3(e,t,null)}function O3(e,t,r){return t?Object.keys(t).reduce((i,s)=>{const n=s;let o=null,a="merge";if(r&&(o=r.path?`${r.path}.${s}`:s,a=r.policy(o)),a==="replace"||a==="replace-arrays"&&Array.isArray(i[n]))return i[n]=t[n],i;if(i[n]===void 0)return i[n]=Z(t[n]),i;let l=i[n],u=t[n];if(l===u)return i;if(Array.isArray(u)||Array.isArray(i))l=l?Array.isArray(l)?i[n]=l.concat():i[n]=[l]:i[n]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(c=>{l.includes(c)||l.push(c)}));else if(u&&typeof u=="object")if(r){const c=r.path;r.path=o,i[n]=O3(l,u,r),r.path=c}else i[n]=O3(l,u,null);else i.hasOwnProperty(s)&&!t.hasOwnProperty(s)||(i[n]=u);return i},e||{}):e}function bJ(e){return Array.isArray(e)?e:e.split(".")}function _7(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function phe(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(..._7(r));return t}return _7(e)}function wJ(e,t,r,i){const s=phe(t);if(s.length!==1){const n=s.map(o=>i(e,o,r));return N2(n)}return i(e,s[0],r)}function _J(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const s=parseInt(r,10);if(!isNaN(s))return Array.isArray(t)?t[s]:t.at(s)}const i=es(t);return hhe(i,r)?i.get(r):t[r]}function SJ(e,t,r){if(e==null)return e;const i=_J(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:SJ(i,t,r+1)}function D2(e,t,r=0){return typeof t!="string"||t.includes(".")?SJ(e,bJ(t),r):_J(t,e)}function Ll(e,t){return D2(e,t)}function S7(e,t){return D2(t,e)!==void 0}var ao;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(ao||(ao={}));function F2(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(const i in t)t[i]=Z(t[i]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function qE(e,t){const r=F2(e);let i=r[t];return i||(i=r[t]={}),i}function dhe(e,t){return PM(e,t,mhe)}const fhe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function mhe(e){return fhe.test(e)?"replace":"merge"}function yhe(e){return e?.release&&typeof e.release=="function"}function ghe(e){return e?.acquire&&typeof e.acquire=="function"}let Vd=class GC{constructor(t,r,i,s=1,n=0){if(this._ctor=t,this._acquireFunction=r,this._releaseFunction=i,this.allocationSize=s,this._pool=new Array(n),this._initialSize=n,this._ctor)for(let o=0;o<n;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...t){let r;if(GC.test.disabled)r=new this._ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let s=0;s<i;s++)this._pool[s]=new this._ctor}r=this._pool.pop()}return this._acquireFunction?this._acquireFunction(r,...t):ghe(r)&&r.acquire(...t),r}release(t){t&&!GC.test.disabled&&(this._releaseFunction?this._releaseFunction(t):yhe(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}};Vd.test={disabled:!1};let vhe=class{constructor(t,r){this._observers=t,this._observer=r}remove(){zce(this._observers,this._observer)}},xJ=class{constructor(){this._observers=null,this.destroyed=!1}observe(t){if(this.destroyed||t.destroyed)return bhe;this._observers==null&&(this._observers=[]);const r=this._observers;let i=!1,s=!1;const n=r.length;for(let o=0;o<n;++o){const a=r[o];if(a.destroyed)s=!0;else if(a===t){i=!0;break}}return i||(r.push(t),s&&this._removeDestroyedObservers()),new vhe(r,t)}_removeDestroyedObservers(){const t=this._observers;if(!t||t.length===0)return;const r=t.length;let i=0;for(let s=0;s<r;++s){for(;s+i<r&&t[s+i].destroyed;)++i;if(i>0){if(!(s+i<r))break;t[s]=t[s+i]}}t.length=r-i}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this._observers;if(t!=null){for(const r of t)r.onCommitted();this._observers=null}}};const bhe=or();var Ne;(function(e){e[e.DEFAULTS=0]="DEFAULTS",e[e.COMPUTED=1]="COMPUTED",e[e.SERVICE=2]="SERVICE",e[e.PORTAL_ITEM=3]="PORTAL_ITEM",e[e.WEB_SCENE=4]="WEB_SCENE",e[e.WEB_MAP=5]="WEB_MAP",e[e.LINK_CHART=6]="LINK_CHART",e[e.USER=7]="USER"})(Ne||(Ne={}));const BC=Ne.USER+1;function Fn(e){switch(e){case"defaults":return Ne.DEFAULTS;case"service":return Ne.SERVICE;case"portal-item":return Ne.PORTAL_ITEM;case"web-scene":return Ne.WEB_SCENE;case"web-map":return Ne.WEB_MAP;case"link-chart":return Ne.LINK_CHART;case"user":return Ne.USER;default:return null}}function P_(e){switch(e){case Ne.DEFAULTS:return"defaults";case Ne.SERVICE:return"service";case Ne.PORTAL_ITEM:return"portal-item";case Ne.WEB_SCENE:return"web-scene";case Ne.WEB_MAP:return"web-map";case Ne.LINK_CHART:return"link-chart";case Ne.USER:return"user"}}function whe(e){return P_(e)}var lr;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(lr||(lr={}));const P3={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},Mb=[];let kw=P3;function ot(e){kw.onObservableAccessed(e)}let RM=!1,LM=!1;function Ch(e,t,r){if(RM)return dD(e,t,r);MJ(e);const i=t.call(r);return TJ(),i}function _he(e,t){return Ch(P3,e,t)}function dD(e,t,r){const i=RM;RM=!0,MJ(e);let s=null;try{s=t.call(r)}catch(n){LM&&be.getLogger("esri.core.accessorSupport.tracking").error(n)}return TJ(),RM=i,s}function MJ(e){kw=e,Mb.push(e)}function TJ(){const e=Mb.length;if(e>1){const t=Mb.pop();kw=Mb[e-2],t.onTrackingEnd()}else if(e===1){const t=Mb.pop();kw=P3,t.onTrackingEnd()}else kw=P3}function IJ(e,t){if(t.flags&lr.DepTrackingInitialized)return;const r=LM;LM=!1,t.flags&lr.AutoTracked?dD(t,t.metadata.get,e):EJ(e,t),LM=r}const She=[];function EJ(e,t){t.flags&lr.ExplicitlyTracking||(t.flags|=lr.ExplicitlyTracking,dD(t,()=>{const r=t.metadata.dependsOn||She;for(const i of r)if(typeof i!="string"||i.includes(".")){const s=bJ(i);for(let n=0,o=e;n<s.length&&o!=null&&typeof o=="object";++n)o=x7(o,s[n],n!==s.length-1)}else x7(e,i,!1)}),t.flags&=~lr.ExplicitlyTracking)}function x7(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const n=parseInt(i,10);if(!isNaN(n))return Array.isArray(e)?e[n]:e.at(n)}const s=es(e);if(s){const n=s.propertiesByName.get(i);n&&(ot(n),IJ(e,n))}return r?e[i]:void 0}let M7=class extends xJ{constructor(t,r){super(),this.propertyName=t,this.metadata=r,this._accessed=null,this._handles=null,this.flags=0,this.flags=lr.Dirty|(r.nonNullable?lr.NonNullable:0)|(r.hasOwnProperty("value")?lr.HasDefaultValue:0)|(r.get===void 0?lr.DepTrackingInitialized:0)|(r.dependsOn===void 0?lr.AutoTracked:0)}destroy(){this.flags&lr.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(t){ot(this);const r=t.store,i=this.propertyName,s=this.flags,n=r.get(i);if(s&lr.Computing||~s&lr.Dirty&&r.has(i))return n;this.flags|=lr.Computing;const o=t.host;let a;s&lr.AutoTracked?a=Ch(this,this.metadata.get,o):(EJ(o,this),a=this.metadata.get.call(o)),r.set(i,a,Ne.COMPUTED);const l=r.get(i);return l===n?this.flags&=~lr.Dirty:_he(this.commit,this),this.flags&=~lr.Computing,l}onObservableAccessed(t){t!==this&&(this._accessed??=new Set,this._accessed.add(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=lr.DepTrackingInitialized,this._accessed!=null&&(this._handles??=[],this._accessed.forEach(t=>{this._handles.push(t.observe(this))}),this._accessed.clear())}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~lr.Dirty,this.onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}onInvalidated(){~this.flags&lr.Overridden&&(this.flags|=lr.Dirty);const t=this._observers;if(t&&t.length>0)for(const r of t)r.onInvalidated()}onCommitted(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onCommitted()}}},xhe=class AJ{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new AJ;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,Z(i))}),r}get(t){return this._values.get(t)}originOf(){return Ne.USER}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}};function qS(e,t,r){return e!==void 0}function T7(e,t,r,i){return e!==void 0&&(!(r==null&&e.flags&lr.NonNullable)||(i.lifecycle,ao.INITIALIZING,!1))}let Mhe=class{constructor(t){this.host=t,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=ao.INITIALIZING,this.store=new xhe,this._origin=Ne.USER;const r=this.host.constructor.__accessorMetadata__;for(const i in r){const s=new M7(i,r[i]);this.propertiesByName.set(i,s)}this.metadata=r}initialize(){this.lifecycle=ao.CONSTRUCTING}constructed(){this.lifecycle=ao.CONSTRUCTED}destroy(){this.lifecycle=ao.DESTROYED,this.propertiesByName.forEach(t=>t.destroy())}get initialized(){return this.lifecycle!==ao.INITIALIZING}get(t){const r=this.propertiesByName.get(t);if(r.metadata.get)return r.getComputed(this);ot(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.propertiesByName.get(t);if(i!==void 0&&i.flags&lr.HasDefaultValue)return"defaults"}return P_(r)}has(t){return this.propertiesByName.has(t)&&this.store.has(t)}keys(){return[...this.propertiesByName.keys()]}internalGet(t){const r=this.propertiesByName.get(t);if(qS(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.propertiesByName.get(t);qS(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const s=this.propertiesByName.get(r);if(!qS(s))return"";const n=new Set,o=Ch({onObservableAccessed:l=>n.add(l),onTrackingEnd:()=>{}},()=>s.metadata.get?.call(t));let a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;if(n.size===0)return a;i+="  ";for(const l of n)l instanceof M7&&(a+=`${i}${l.propertyName}: undefined
`);return a}setAtOrigin(t,r,i){const s=this.propertiesByName.get(t);if(qS(s))return this._setAtOrigin(s,r,i)}isOverridden(t){const r=this.propertiesByName.get(t);return r!==void 0&&!!(r.flags&lr.Overridden)}clearOverride(t){const r=this.propertiesByName.get(t);r&&r.flags&lr.Overridden&&(r.flags&=~lr.Overridden,r.notifyChange())}override(t,r){const i=this.propertiesByName.get(t);if(!T7(i,t,r,this))return;const s=i.metadata.cast;if(s){const n=this._cast(s,r),{valid:o,value:a}=n;if(p4.release(n),!o)return;r=a}i.flags|=lr.Overridden,this._internalSet(i,r)}set(t,r){const i=this.propertiesByName.get(t);if(!T7(i,t,r,this))return;const s=i.metadata.cast;if(s){const o=this._cast(s,r),{valid:a,value:l}=o;if(p4.release(o),!a)return;r=l}const n=i.metadata.set;n?n.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=Fn(t)}getDefaultOrigin(){return P_(this._origin)}notifyChange(t){const r=this.propertiesByName.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.propertiesByName.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.propertiesByName.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==ao.INITIALIZING?this._origin:Ne.DEFAULTS;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const s=this.store,n=t.propertyName;s.has(n,i)&&hD(r,s.get(n))&&~t.flags&lr.Overridden&&i===s.originOf(n)||(t.invalidate(),s.set(n,r,i),t.commit(),IJ(this.host,t))}_cast(t,r){const i=p4.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}},The=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const p4=new Vd(The);function R3(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))R3(e,i,t[i]);else{if(t.includes(".")){const s=t.split("."),n=s.splice(-1,1)[0];return void R3(Ll(e,s),n,r)}const i=e.__accessor__;i!=null&&Ihe(t,i),e[t]=r}}function Ihe(e,t){if(ce("esri-unknown-property-errors")&&!Ehe(e,t))throw new K("set:unknown-property",Ahe(e,t))}function Ehe(e,t){return t.metadata[e]!=null}function Ahe(e,t){return"setting unknown property '"+e+"' on instance of "+t.host.declaredClass}let $he;function Che(){return $he}var I7;(function(e){e[e.Ignore=0]="Ignore",e[e.Destroy=1]="Destroy",e[e.ThrowError=2]="ThrowError"})(I7||(I7={}));function Ohe(e){e.length=0}let Nn=class{constructor(t=50,r=50){this._pool=new Vd(Array,void 0,Ohe,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return d4.acquire()}static release(t){return d4.release(t)}static prune(){d4.prune()}};const d4=new Nn(100);let $J=class extends Vd{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}};const HS=[];function L3(e){HS.push(e),HS.length===1&&queueMicrotask(()=>{const t=HS.slice();HS.length=0;for(const r of t)r()})}let CJ=class{constructor(t,r=30){this.name=t,this._counter=0,this._samples=new Array(r)}record(t){t!=null&&(this._samples[++this._counter%this._samples.length]=t)}get median(){return this._samples.slice().sort((t,r)=>t-r)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((t,r)=>t+r,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var qC;(function(e){const t=(n,o,a,l)=>{let u=o,c=o;const p=a>>>1,f=n[u-1];for(;c<=p;){c=u<<1,c<a&&l(n[c-1],n[c])<0&&++c;const m=n[c-1];if(l(m,f)<=0)break;n[u-1]=m,u=c}n[u-1]=f},r=(n,o)=>n<o?-1:n>o?1:0;function i(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=r);for(let c=a>>>1;c>o;c--)t(n,c,a,l);const u=o+1;for(let c=a-1;c>o;c--){const p=n[o];n[o]=n[c],n[c]=p,t(n,u,c,l)}}function*s(n,o,a,l){o===void 0&&(o=0),a===void 0&&(a=n.length),l===void 0&&(l=r);for(let c=a>>>1;c>o;c--)t(n,c,a,l),yield;const u=o+1;for(let c=a-1;c>o;c--){const p=n[o];n[o]=n[c],n[c]=p,t(n,u,c,l),yield}}e.sort=i,e.iterableSort=s})(qC||(qC={}));const E7=qC,Phe=1.5,Rhe=1.1;let R_=class{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new XW,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>A7(this)))}toArray(){return this.data.slice(0,this.length)}filter(t){const r=new Array;for(let i=0;i<this._length;i++){const s=this.data[i];t(s)&&r.push(s)}return r}at(t){if((t=Math.trunc(t)||0)<0&&(t+=this._length),!(t<0||t>=this._length))return this.data[t]}includes(t,r){const i=this.data.indexOf(t,r);return i!==-1&&i<this.length}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,A7(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=UC(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){return this.removeUnorderedIndex(UC(this.data,t,this.length,this._hint))}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=Uce(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){if(t>=this.length||r>=this.length||t===r)return;const i=this.data[t];this.data[t]=this.data[r],this.data[r]=i}sort(t){E7.sort(this.data,0,this.length,t)}iterableSort(t){return E7.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}find(t,r){for(let i=0;i<this.length;++i){const s=this.data[i];if(t.call(r,s,i))return s}}filterInPlace(t,r){let i=0;for(let s=0;s<this._length;++s){const n=this.data[s];t.call(r,n,s,this.data)&&(this.data[s]=this.data[i],this.data[i]=n,i++)}if(this._deallocator)for(let s=i;s<this._length;s++)this.data[s]=this._deallocator(this.data[s]);return this._length=i,this._shrink(),this}forAll(t,r){const{data:i,length:s}=this;for(let n=0;n<s;++n)t.call(r,i[n],n,i)}forEach(t,r){this.data.slice(0,this.length).forEach(t,r)}map(t,r){const i=new Array(this.length);for(let s=0;s<this.length;++s)i[s]=t.call(r,this.data[s],s,this.data);return i}reduce(t,r){let i=r;for(let s=0;s<this.length;++s)i=t(i,this.data[s],s,this.data);return i}has(t){const r=this.length,i=this.data;for(let s=0;s<r;++s)if(i[s]===t)return!0;return!1}*[Symbol.iterator](){for(let t=0;t<this.length;t++)yield this.data[t]}};function A7(e){e.data.length>Phe*e.length&&(e.data.length=Math.floor(e.length*Rhe))}function Lhe(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return or(()=>e.clearTimeout(i))}}}const a1=Lhe(globalThis);function HE(e){return khe(e)||OJ(e)}function khe(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function OJ(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function j2(e,t,r){if(!HE(e))throw new TypeError("target is not a Evented or EventTarget object");return OJ(e)?Nhe(e,t,r):e.on(t,r)}function Nhe(e,t,r,i){if(Array.isArray(t)){const s=t.slice();for(const n of s)e.addEventListener(n,r,i);return or(()=>{for(const n of s)e.removeEventListener(n,r,i)})}return e.addEventListener(t,r,i),or(()=>e.removeEventListener(t,r,i))}function PJ(e,t,r){if(!HE(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=j2(e,t,s=>{i.remove(),r.call(e,s)});return i}function ii(e="Aborted"){return new K("AbortError",e)}function dr(e,t="Aborted"){if(Ul(e))throw ii(t)}function WE(e){return e instanceof AbortSignal?e:e?.signal}function Ul(e){const t=WE(e);return t!=null&&t.aborted}function lo(e){if(ws(e))throw e}function $7(e){if(!ws(e))throw e}function Zo(e,t){const r=WE(e);if(r!=null){if(!r.aborted)return PJ(r,"abort",()=>t());t()}}function fD(e,t){const r=WE(e);if(r!=null)return dr(r),PJ(r,"abort",()=>t(ii()))}function wu(e,t){return WE(t)==null?e:new Promise((r,i)=>{let s=Zo(t,()=>i(ii()));const n=()=>{s=Kr(s)};e.then(n,n),e.then(r,i)})}function ws(e){return e?.name==="AbortError"}async function HC(e){try{return await e}catch(t){if(!ws(t))throw t;return}}async function mD(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e),i=r.map(o=>e[o]),s=await mD(i),n={};return r.map((o,a)=>n[o]=s[a]),n}const t=e;return Promise.allSettled(t).then(r=>Array.from(t,(i,s)=>{const n=r[s];return n.status==="fulfilled"?{promise:i,value:n.value}:{promise:i,error:n.reason}}))}async function Dhe(e){return(await Promise.allSettled(e)).filter(t=>t.status==="fulfilled").map(t=>t.value)}async function Utt(e){return(await Promise.allSettled(e)).filter(t=>t.status==="rejected").map(t=>t.reason)}function RJ(e,t=void 0,r){const i=new AbortController;return Zo(r,()=>i.abort()),new Promise((s,n)=>{let o=setTimeout(()=>{o=0,s(t)},e);Zo(i,()=>{o&&(clearTimeout(o),n(ii()))})})}function Fhe(e,t){const r=new AbortController,i=setTimeout(()=>r.abort(),t);return Zo(e,()=>{r.abort(),clearTimeout(i)}),{...e,signal:r.signal}}function Ud(e){return e&&typeof e.then=="function"}function C7(e){return Ud(e)?e:Promise.resolve(e)}function JE(e,t=-1){let r,i,s,n,o=null;const a=(...l)=>{if(r){i=l,n&&n.reject(ii()),n=ia();const f=n.promise;if(o){const m=o;o=null,m.abort()}return f}if(s=n||ia(),n=null,t>0){const f=new AbortController;r=C7(e(...l,f.signal));const m=r;RJ(t).then(()=>{r===m&&(n?f.abort():o=f)})}else r=1,r=C7(e(...l));const u=()=>{const f=i;i=s=r=o=null,f!=null&&a(...f)},c=r,p=s;return c.then(u,u),c.then(p.resolve,p.reject),p.promise};return a}function ia(){let e,t;const r=new Promise((s,n)=>{e=s,t=n}),i=s=>{e(s)};return i.resolve=s=>e(s),i.reject=s=>t(s),i.timeout=(s,n)=>a1.setTimeout(()=>i.reject(n),s),i.promise=r,i}async function k3(e){await Promise.resolve(),dr(e)}function ztt(e){return e}function jhe(e){return 1e3*e}function Gtt(e){return e}let Vhe=class{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}},Uhe=class{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}},WC=0;const G1={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},JC=["prepare","preRender","render","postRender","update","finish"],ZC=[],gy=new R_;let zhe=class{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function Ghe(){Hm!=null&&(cancelAnimationFrame(Hm),Hm=requestAnimationFrame(yD))}const N3={frameTasks:gy,willDispatch:!1,clearFrameTasks:Bhe,dispatch:kJ,executeFrameTasks:qhe,reschedule:Ghe};function l1(e){const t=new Uhe(e);return ZC.push(t),N3.willDispatch||(N3.willDispatch=!0,L3(kJ)),t}function _v(e){const t=new Vhe(e);return gy.push(t),Hm==null&&(WC=performance.now(),Hm=requestAnimationFrame(yD)),new zhe(t)}let Hm=null;function Bhe(e=!1){gy.forAll(t=>{t.removed=!0}),e&&LJ()}function yD(){const e=performance.now();Hm=null,Hm=gy.length>0?requestAnimationFrame(yD):null,N3.executeFrameTasks(e)}function qhe(e){const t=e-WC;WC=e;const r=1e3/60,i=Math.max(0,t-r);G1.time=e,G1.frameDuration=r-i;for(let s=0;s<JC.length;s++){const n=performance.now(),o=JC[s];gy.forAll(a=>{a.paused||a.removed||(s===0&&a.ticks++,a.phases[o]&&(G1.elapsedFrameTime=performance.now()-e,G1.deltaTime=a.ticks===0?0:t,a.phases[o]?.call(a,G1)))}),Whe[s].record(performance.now()-n)}LJ(),Jhe.record(performance.now()-e)}const WS=new R_;function LJ(){gy.forAll(e=>{e.removed&&WS.push(e)}),gy.removeUnorderedMany(WS.data,WS.length),WS.clear()}function kJ(){for(;ZC.length;){const e=ZC.shift();e.isActive&&e.callback()}N3.willDispatch=!1}function Hhe(e=1,t){const r=ia(),i=()=>{Ul(t)?r.reject(ii()):e===0?r():(--e,L3(()=>i()))};return i(),r.promise}const Whe=JC.map(e=>new CJ(e)),Jhe=new CJ("total");function Zhe(e,t){for(const r of e.entries())if(t(r[0]))return!0;return!1}function D3(e,t){if(!t)return e;for(const r of t)r!=null&&e.add(r);return e}function O7(e,t){return t!=null&&e.add(t),e}function NJ(e,t){const r=new Set;return D3(r,e),D3(r,t),r}function Yhe(e,t){const r=new Set;for(const i of t)e.has(i)&&r.add(i);return r}function Wtt(e,t){if(!e||!t)return!1;if(e===t)return!0;for(const r of e)if(!t.has(r))return!1;return!0}function Jtt(e,t){if(e==null&&t==null)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function Khe(e,t){const r=new Set(e);for(const i of t)r.delete(i);return r}function Xhe(e,t){return Khe(NJ(e,t),Yhe(e,t))}let Qhe=0;function Nw(){return++Qhe}let ZE=class{constructor(t){this._accessed=new Set,this._handles=[],this._observerObject=new epe(t),P7.register(this,new WeakRef(this._observerObject),this)}destroy(){P7.unregister(this._observerObject),this._accessed.clear(),this._observerObject?.destroy(),this.clear()}onObservableAccessed(t){this._accessed.add(t)}onTrackingEnd(){const t=this._handles,r=this._observerObject;this._accessed.forEach(i=>{t.push(i.observe(r))}),this._accessed.clear()}clear(){const t=this._handles;for(let r=0;r<t.length;++r)t[r].remove();t.length=0}},epe=class{constructor(t){this._notify=t,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}destroy(){this.destroyed=!0,this._notify=tpe}};const P7=new FinalizationRegistry(e=>{e.deref()?.destroy()});function tpe(){}let H0=!1;const F3=[];function DJ(e,t){let r=new ZE(n),i=null,s=!1;function n(){if(!r||s)return;if(H0)return void VJ(n);const a=i;r.clear(),H0=!0,s=!0,i=Ch(r,e),s=!1,H0=!1,t(i,a),UJ()}function o(){r&&(r.destroy(),r=null,i=null)}return s=!0,i=Ch(r,e),s=!1,or(o)}function FJ(e,t){let r=new ZE(s),i=null;function s(){t(i,o)}function n(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=Ch(r,e),i):null}return o(),or(n)}function jJ(e){let t=new ZE(i),r=!1;function i(){t&&!r&&(H0?VJ(i):(t.clear(),H0=!0,r=!0,Ch(t,e),r=!1,H0=!1,UJ()))}function s(){t&&(t.destroy(),t=null)}return r=!0,Ch(t,e),r=!1,or(s)}function VJ(e){F3.includes(e)||F3.unshift(e)}function UJ(){for(;F3.length;)F3.pop()()}var Dw;(function(e){e[e.Untracked=0]="Untracked",e[e.Tracked=1]="Tracked"})(Dw||(Dw={}));let L_=class{constructor(){this.uid=Nw(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,s,n){return this.pool.acquire(Dw.Untracked,t,r,i,s,n,hD)}static acquireTracked(t,r,i,s){return this.pool.acquire(Dw.Tracked,t,r,i,null,null,s)}notify(t,r){this.type===Dw.Untracked?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r,void 0,void 0)}acquire(t,r,i,s,n,o,a){this.uid=Nw(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=s,this.target=n,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Nw(),this.removed=!0}};L_.pool=new $J(L_);const kM=new Nn,_h=new Set;let j3;function V3(e){_h.delete(e),_h.add(e),j3||(j3=l1(spe))}function rpe(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function ipe(e){for(const t of _h.values())t.target===e&&(t.removed=!0)}function spe(){let e=10;for(;j3&&e--;){j3=null;const t=npe(),r=kM.acquire();for(const i of t){const s=i.uid;rpe(i),s===i.uid&&i.removed&&r.push(i)}for(const i of _h)i.removed&&(r.push(i),_h.delete(i));for(const i of r)L_.pool.release(i);kM.release(r),kM.release(t),YC.forEach(i=>i())}}function npe(){const e=kM.acquire();e.length=_h.size;let t=0;for(const r of _h)e[t]=r,++t;return _h.clear(),e}const YC=new Set;function ope(e){return YC.add(e),or(()=>YC.delete(e))}function ape(e,t,r){let i=wJ(e,t,r,(s,n,o)=>{let a,l,u=FJ(()=>D2(s,n),(c,p)=>{s.__accessor__?.lifecycle===ao.DESTROYED||a&&a.uid!==l?i.remove():(a||(a=L_.acquireUntracked(c,o,p,s,n),l=a.uid),V3(a))});return or(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,V3(a)),a=null),i=u=null})});return i}function lpe(e,t,r){const i=wJ(e,t,r,(s,n,o)=>{let a=!1;return DJ(()=>D2(s,n),(l,u)=>{s.__accessor__.lifecycle!==ao.DESTROYED?a||(a=!0,hD(u,l)||o.call(s,l,u,n,s),a=!1):i.remove()})});return i}function upe(e,t,r,i=!1){return e.__accessor__&&e.__accessor__.lifecycle!==ao.DESTROYED?i?lpe(e,t,r):ape(e,t,r):or()}function cpe(e,t,r){let i,s,n=FJ(e,(o,a)=>{i&&i.uid!==s?n.remove():(i||(i=L_.acquireTracked(o,t,a,r),s=i.uid),V3(i))});return or(()=>{n.remove(),i&&(i.uid!==s||i.removed||(i.removed=!0,V3(i)),i=null),n=null})}function hpe(e,t,r){let i=!1;return DJ(e,(s,n)=>{i||(i=!0,r(n,s)||t(s,n),i=!1)})}function ppe(e,t,r=!1,i=hJ){return r?hpe(e,t,i):cpe(e,t,i)}function R7(e){return Zhe(_h,t=>t.oldValue===e)}function YE(e,t){for(const[r,i]of e)if(t(i,r))return!0;return!1}function KE(e,t,r){const i=e.get(t);if(i!==void 0)return i;const s=r();return e.set(t,s),s}function Xtt(e){const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}const W0=()=>be.getLogger("esri.core.accessorSupport.ensureTypes");function dpe(e){return e==null?e:new Date(e)}function fpe(e){return e==null?e:!!e}function V2(e){return e==null?e:e.toString()}function Bo(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function XE(e){return e==null?e:Math.round(parseFloat(e))}function mpe(e){return null}function zJ(e){return e?.constructor&&e.constructor.__accessorMetadata__!==void 0}function U3(e,t){return t!=null&&e&&!(t instanceof e)}function GJ(e){return e&&"isCollection"in e}function L7(e){return e?.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function ype(e,t){if(!t?.constructor||!GJ(t.constructor))return KC(e,t)?t:new e(t);const r=L7(e.prototype.itemType),i=L7(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(KC(e,t),t):new e(t):t}function KC(e,t){return!!zJ(t)&&(W0().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+QE(e)+"'"),!0)}function zr(e,t){return t==null?t:GJ(e)?ype(e,t):U3(e,t)?KC(e,t)?t:new e(t):t}function QE(e){return e?.prototype?.declaredClass||"unknown"}const gpe=new WeakMap;function vpe(e){switch(e){case Number:return Bo;case St:return XE;case Boolean:return fpe;case String:return V2;case Date:return dpe;case eA:return mpe;default:return KE(gpe,e,()=>zr.bind(null,e))}}function ni(e,t){const r=vpe(e);return arguments.length===1?r:r(t)}function k_(e,t,r){return arguments.length===1?k_.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function bpe(e,t){return arguments.length===1?k_(r=>ni(e,r)):k_(r=>ni(e,r),t)}function BJ(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>BJ(e,t-1,i)):e(r)}function z3(e,t,r){if(arguments.length===2)return n=>z3(e,t,n);if(!r)return r;r=BJ(e,t,r);let i=t,s=r;for(;i>0&&Array.isArray(s);)i--,s=s[0];if(s!==void 0)for(let n=0;n<i;n++)r=[r];return r}function wpe(e,t,r){return arguments.length===2?z3(i=>ni(e,i),t):z3(i=>ni(e,i),t,r)}function qJ(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function XC(e,t){if(arguments.length===2)return XC(e).call(null,t);const r=new Set,i=e.filter(a=>typeof a!="function"),s=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let n=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,c=u==="string"||u==="number";return c&&(r.has(a)||s.some(p=>u==="string"&&p===String||u==="number"&&p===Number))||u==="object"&&s.some(p=>!U3(a,p))?a:(c&&i.length?(n||(n=i.map(p=>typeof p=="string"?`'${p}'`:`${p}`).join(", ")),W0().error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${n}`)):typeof a=="object"&&s.length?(o||(o=s.map(p=>QE(p)).join(", ")),W0().error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):W0().error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Zu(e,t){if(arguments.length===2)return Zu(e).call(null,t);const r={},i=[],s=[];for(const l in e.typeMap){const u=e.typeMap[l];r[l]=ni(u),i.push(QE(u)),s.push(l)}const n=()=>`'${i.join("', '")}'`,o=()=>`'${s.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!U3(e.base,l)||l==null)return l;const u=a(l)||e.defaultKeyValue,c=r[u];if(!c)return W0().error("Accessor#set",`Invalid property value, value needs to be one of ${n()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!U3(e.typeMap[u],l))return l;if(typeof e.key=="string"&&!zJ(l)){const p={};for(const f in l)f!==e.key&&(p[f]=l[f]);return c(p)}return c(l)}}let St=class{},eA=class{};const B1={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function _pe(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function HJ(e){switch(e.type){case"native":return ni(e.value);case"array":return k_(HJ(e.value));case"one-of":return Spe(e);default:return null}}function Spe(e){let t=null;return(r,i)=>eO(r,e)?r:(t==null&&(t=QC(e)),W0().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function QC(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case St:return"integer";case Date:return"date";case eA:return"null";default:return QE(e.value)}case"array":return`array of ${QC(e.value)}`;case"one-of":{const t=e.values.map(r=>QC(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function eO(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case St:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case eA:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!eO(r,t.value));case"one-of":return t.values.some(r=>eO(e,r))}}function d(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),s=qE(t,r);i&&(i.get||i.set?(s.get=i.get||s.get,s.set=i.set||s.set):"value"in i&&("value"in e&&be.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),s.value=e.value=i.value)),e.readOnly!=null&&(s.readOnly=e.readOnly);const n=e.aliasOf;if(n){const l=typeof n=="string"?n:n.source,u=typeof n=="string"?null:n.overridable===!0;let c;s.dependsOn=[l],s.get=function(){let p=Ll(this,l);if(typeof p=="function"){c||(c=l.split(".").slice(0,-1).join("."));const f=Ll(this,c);f&&(p=p.bind(f))}return p},s.readOnly||(s.set=u?function(p){this._override(r,p)}:function(p){R3(this,l,p)})}const o=e.type,a=e.types;s.cast||(o?s.cast=xpe(o):a&&(Array.isArray(a)?s.cast=k_(Zu(a[0])):s.cast=Zu(a))),dhe(s,e),e.range&&(s.cast=JJ(s.cast,e.range))}}function WJ(e,t,r){const i=qE(e,r);i.json||(i.json={});let s=i.json;return t!==void 0&&(s.origins||(s.origins={}),s.origins[t]||(s.origins[t]={}),s=s.origins[t]),s}function xpe(e){let t=0,r=e;if(_pe(e))return HJ(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(qJ(i))return t===0?XC(i):z3(XC(i),t);if(t===1)return bpe(i);if(t>1)return wpe(i,t);const s=e;return s.from?s.from:ni(s)}function JJ(e,t){return r=>{let i=+e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function Mpe(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const s=t[i];r[i].forEach(n=>{t[n]=s}),delete t[i]}}}let sa=class extends mJ{constructor(t,r,i){super(t,r,i)}};sa.prototype.type="warning";function ZJ(e){return!!e&&e.prototype?.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const tO=()=>be.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function k7(e,t,r){e&&(!r&&!t.read||t.read?.reader||t.read?.enabled===!1||Epe(e)&&mn("read.reader",u1(e),t))}function u1(e){const t=e.ndimArray??0;if(t>1)return Ipe(e);if(t===1)return N7(e);if("type"in e&&KJ(e.type)){const r=e.type.prototype?.itemType?.Type,i=N7(typeof r=="function"?{type:r}:{types:r});return(s,n,o)=>{const a=i(s,n,o);return a&&new e.type(a)}}return gD(e)}function gD(e){return"type"in e?Tpe(e.type):Ape(e.types)}function Tpe(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const s=typeof t;if(s!=="object")return void tO().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${s}'`);const n=new e;return n.read(t,i),n}:e.fromJSON}function YJ(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(s=>YJ(e,s,r,i-1)):e(t,void 0,r)}function Ipe(e){const t=gD(e),r=YJ.bind(null,t),i=e.ndimArray??0;return(s,n,o)=>{if(s==null)return s;s=r(s,o,i);let a=i,l=s;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)s=[s];return s}}function N7(e){const t=gD(e);return(r,i,s)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const l=t(a,void 0,s);l!==void 0&&o.push(l)}return o}const n=t(r,void 0,s);return n!==void 0?[n]:void 0}}function KJ(e){if(!ZJ(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?vD(t.Type):XJ(t.Type))}function Epe(e){return"types"in e?XJ(e.types):vD(e.type)}function vD(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||KJ(e))}function XJ(e){for(const t in e.typeMap)if(!vD(e.typeMap[t]))return!1;return!0}function Ape(e){let t=null;const r=e.errorContext??"type",i=e.validate;return(s,n,o)=>{if(s==null)return s;const a=typeof s;if(a!=="object")return void tO().error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);t||(t=$pe(e));const l=e.key;if(typeof l!="string")return;const u=s[l],c=u?t[u]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!c){const f=`Type '${u||"unknown"}' is not supported`;return o?.messages&&s&&o.messages.push(new sa(`${r}:unsupported`,f,{definition:s,context:o})),void tO().error(f)}const p=new c;return p.read(s,o),i?i(p):p}}function $pe(e){const t={};for(const r in e.typeMap){const i=e.typeMap[r],s=F2(i.prototype);if(typeof e.key=="function")continue;const n=s[e.key];if(!n)continue;if(n.json?.type&&Array.isArray(n.json.type)&&n.json.type.length===1&&typeof n.json.type[0]=="string"){t[n.json.type[0]]=i;continue}const o=n.json?.write;if(!o?.writer){t[r]=i;continue}const a=o.target,l=typeof a=="string"?a:e.key,u={};o.writer(r,u,l),u[l]&&(t[u[l]]=i)}return t}function Cpe(e){if(e.json||(e.json={}),F7(e.json),j7(e.json),D7(e.json),e.json.origins)for(const t in e.json.origins)F7(e.json.origins[t]),j7(e.json.origins[t]),D7(e.json.origins[t]);return!0}function D7(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function F7(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function j7(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function V7(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const r=e?.ndimArray??0;e&&(r===1||"type"in e&&ZJ(e.type))?t.write.writer=Rpe:r>1?t.write.writer=Lpe(r):t.types?Array.isArray(t.types)?t.write.writer=Ppe(t.types[0]):t.write.writer=Ope(t.types):t.write.writer=N_}function Ope(e){return(t,r,i,s)=>t?QJ(t,e,s)?N_(t,r,i,s):void 0:N_(t,r,i,s)}function QJ(e,t,r){for(const i in t.typeMap)if(e instanceof t.typeMap[i])return!0;if(r?.messages){const i=t.errorContext??"type",s=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new K(`${i}:unsupported`,s,{definition:e,context:r})),be.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(s)}return!1}function Ppe(e){return(t,r,i,s)=>!t||!Array.isArray(t)?N_(t,r,i,s):N_(t.filter(n=>QJ(n,e,s)),r,i,s)}function N_(e,t,r,i){mn(r,G3(e,i),t)}function G3(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?B3(e):e}function B3(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function Rpe(e,t,r,i){let s;e===null?s=null:e&&typeof e.map=="function"?(s=e.map(n=>G3(n,i)),typeof s.toArray=="function"&&(s=s.toArray())):s=[G3(e,i)],mn(r,s,t)}function eZ(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>eZ(i,t,r-1)):G3(e,t)}function Lpe(e){return(t,r,i,s)=>{let n;if(t===null)n=null;else{n=eZ(t,s,e);let o=e,a=n;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)n=[n]}mn(i,n,r)}}function kpe(e,t){return bD(e,"any",t?.origin)}function rO(e,t){return bD(e,"read",t?.origin)}function tZ(e,t){return bD(e,"write",t?.origin)}function bD(e,t,r){let i=e?.json;if(i?.origins&&r){let s;s=r==="link-chart"?i.origins[r]&&(t==="any"||t in i.origins[r])?i.origins[r]:i.origins["web-map"]:i.origins[r],s&&(t==="any"||t in s)&&(i=s)}return i}function Npe(e){const t=Dpe(e);if(e.json.origins)for(const r in e.json.origins){const i=e.json.origins[r],s=i.types?Fpe(i):t;k7(s,i,!1),i.types&&!i.write&&e.json.write?.enabled&&(i.write={...e.json.write}),V7(s,i)}k7(t,e.json,!0),V7(t,e.json)}function Dpe(e){return e.json.types?iO(e.json):e.type?rZ(e):iO(e)}function Fpe(e){return e.type?rZ(e):iO(e)}function rZ(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!qJ(r);)r=r[0],t++;return{type:r,ndimArray:t}}function iO(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function jpe(e){Cpe(e)&&(Mpe(e),Npe(e))}const f4=new Set,m4=new Set;function j(e){return t=>{e??="esri.core.Accessor",t.prototype.declaredClass=e,Upe(t);const r=[],i=[];let s=t.prototype;for(;s;)s.hasOwnProperty("initialize")&&!f4.has(s.initialize)&&(f4.add(s.initialize),r.push(s.initialize)),s.hasOwnProperty("destroy")&&!m4.has(s.destroy)&&(m4.add(s.destroy),i.push(s.destroy)),s=Object.getPrototypeOf(s);f4.clear(),m4.clear();const n=class extends t{constructor(...a){if(super(...a),this.constructor===n&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),i.length){let l=!1;const u=this[vJ];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,u.call(this);for(let c=0;c<i.length;c++)i[c].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};n.__accessorMetadata__=F2(t.prototype),n.prototype.declaredClass=e;const o=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(n,"name",{value:o,configurable:!0}),n}}function Vpe(e,t){return t.get==null?function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i===void 0)return;ot(i);const s=r.store;return s.has(e)?s.get(e):i.metadata.value}:function(){const r=this.__accessor__,i=r.propertiesByName.get(e);if(i!==void 0)return i.getComputed(r)}}function Upe(e){const t=e.prototype,r=F2(t),i={};for(const s of Object.getOwnPropertyNames(r)){const n=r[s];jpe(n),i[s]={enumerable:!0,configurable:!0,get:Vpe(s,n),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this))return a.initialized&&n.readOnly?U7("read-only",s):a.lifecycle===ao.CONSTRUCTED&&n.constructOnly?U7("construct-only",s):void a.set(s,o)}else Object.defineProperty(this,s,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}const U7=(e,t)=>{be.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};var iZ,sZ;function zpe(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor?.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}const cp=Symbol("Accessor-Handles"),sO=Symbol("Accessor-Initialized");let et=class nZ{static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:s}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const n=this;class o extends n{constructor(...l){super(...l),this.inherited=null,s&&s.apply(this,l)}}F2(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...u){const c=this.inherited;let p;this.inherited=function(...f){if(n.prototype[a])return n.prototype[a].apply(this,f)};try{p=l.apply(this,u)}catch(f){throw this.inherited=c,f}return this.inherited=c,p}:t[a]}for(const a in r){const l=zpe(r[a]);d(l)(o.prototype,a)}return j(i)(o)}constructor(...t){if(this[iZ]=null,this[sZ]=!1,this.constructor===nZ)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");const r=new Mhe(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:r}),t.length>0&&(r.ctorArgs=this.normalizeCtorArgs?.apply(this,t)??t[0])}postscript(){const t=this.__accessor__,r=t.ctorArgs;t.initialize(),r&&(this.set(r),t.ctorArgs=null),t.constructed(),this.initialize(),this[sO]=!0}initialize(){}[vJ](){this[cp]=jr(this[cp])}destroy(){this.destroyed||(ipe(this),this.__accessor__.destroy(),Che()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[sO]}get destroyed(){return this.__accessor__?.lifecycle===ao.DESTROYED||!1}commitProperty(t){Ll(this,t)}get(t){return gJ(be.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),Ll(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return R3(this,t,r),this}watch(t,r,i){return upe(this,t,r,i)}addHandles(t,r){if(this.destroyed){const i=Array.isArray(t)?t:[t];for(const s of i)s.remove();return}(this[cp]??=new k2).add(t,r)}removeHandles(t){this[cp]?.remove(t)}removeAllHandles(){this[cp]?.removeAll()}removeHandlesReference(t){this[cp]?.removeReference(t)}hasHandles(t){return this[cp]?.has(t)===!0}_override(t,r){r===void 0?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_overrideIfSome(t,r){r==null?this.__accessor__.clearOverride(t):this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}};iZ=cp,sZ=sO;let Gpe=class oZ{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(t){const r=new oZ;return this._values.forEach((i,s)=>{t&&t.has(s)||r.set(s,Z(i.value),i.origin)}),r}get(t,r){r=this._normalizeOrigin(r);const i=this._values.get(t);return r==null||i?.origin===r?i?.value:void 0}originOf(t){return this._values.get(t)?.origin??Ne.USER}keys(t){t=this._normalizeOrigin(t);const r=[...this._values.keys()];return t==null?r:r.filter(i=>this._values.get(i)?.origin===t)}set(t,r,i){if((i=this._normalizeOrigin(i))===Ne.DEFAULTS){const s=this._values.get(t);if(s?.origin!=null&&s.origin>i)return}this._values.set(t,new Bpe(r,i))}delete(t,r){(r=this._normalizeOrigin(r))!=null&&this._values.get(t)?.origin!==r||this._values.delete(t)}has(t,r){return(r=this._normalizeOrigin(r))!=null?this._values.get(t)?.origin===r:this._values.has(t)}forEach(t){this._values.forEach(({value:r},i)=>t(r,i))}_normalizeOrigin(t){if(t!=null)return t===Ne.DEFAULTS?t:Ne.USER}},Bpe=class{constructor(t,r){this.value=t,this.origin=r}};function aZ(e,t,r){t.keys().forEach(s=>{r.set(s,t.get(s),Ne.DEFAULTS)});const i=e.metadata;Object.keys(i).forEach(s=>{e.internalGet(s)&&r.set(s,e.internalGet(s),Ne.DEFAULTS)})}function qpe(e,t,r){if(!e?.read||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.includes(".")&&i.indexOf(t)===0&&S7(i,r))return!0}else for(const s of i)if(s===t||s.includes(".")&&s.indexOf(t)===0&&S7(s,r))return!0;return!1}function Hpe(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Wpe(e,t,r,i,s){let n=rO(t[r],s);Hpe(n)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))n=rO(t[o],s),qpe(n,r,i)&&(e[o]=!0)}function Jpe(e,t,r,i){const s=r.metadata,n=kpe(s[t],i),o=n?.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,i):o;a!==void 0&&r.set(t,a)}const lZ={origin:"service"};function uZ(e,t,r=lZ){if(!t||typeof t!="object")return;const i=es(e),s=i.metadata,n={};for(const o of Object.getOwnPropertyNames(t))Wpe(n,s,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(n)){const a=rO(s[o],r).read,l=a?.source;let u;u=l&&typeof l=="string"?D2(t,l):t[o],a?.reader&&(u=a.reader.call(e,u,t,r)),u!==void 0&&i.set(o,u)}if(!r||!r.ignoreDefaults){i.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(s))n[o]||Jpe(e,o,i,r)}i.setDefaultOrigin("user")}function Zpe(e,t,r,i=lZ){const s={...i,messages:[]};r(s),s.messages?.forEach(n=>{n.type!=="warning"||e.loaded?i?.messages&&i.messages.push(n):e.loadWarnings.push(n)})}function Ype(e,t,r,i,s){const n={};return t.write?.writer?.call(e,i,n,r,s),n}function cZ(e,t,r,i,s,n){if(!i?.write)return!1;const o=Ll(e,r);if(!s&&i.write.overridePolicy){const a=i.write.overridePolicy.call(e,o,r,n??void 0);a!==void 0&&(s=a)}if(s||(s=i.write),!s||s.enabled===!1||s.layerContainerTypes&&n?.layerContainerType&&!s.layerContainerTypes.includes(n.layerContainerType))return!1;if((o===null&&!s.allowNull&&!s.writerEnsuresNonNull||o===void 0)&&s.isRequired){const a=new K("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&n?.messages?n.messages.push(a):a&&!n&&be.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!s.allowNull&&!s.writerEnsuresNonNull||!s.alwaysWriteDefaults&&(!t.store.multipleOriginsSupported||t.store.originOf(r)===Ne.DEFAULTS)&&Kpe(e,r,n,i,o)||!s.ignoreOrigin&&n?.origin&&t.store.multipleOriginsSupported&&t.store.originOf(r)<Fn(n.origin))}function Kpe(e,t,r,i,s){const n=i.default;if(n===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(s);if(typeof n=="function"){if(Array.isArray(s)){const o=n.call(e,t,r??void 0);return VE(o,s)}return!1}return n===s}function hZ(e,t,r,i){const s=es(e),n=s.metadata,o=tZ(n[t],i);return!!o&&cZ(e,s,t,o,r,i)}function pZ(e,t,r){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return PM(t,e.toJSON(r));const i=es(e),s=i.metadata;for(const n in s){const o=tZ(s[n],r);if(!cZ(e,i,n,o,void 0,r))continue;const a=Ll(e,n),l=Ype(e,o,o.write&&typeof o.write.target=="string"?o.write.target:n,a,r);Object.keys(l).length>0&&(t=PM(t,l),r?.resources?.pendingOperations?.length&&r.resources.pendingOperations.push(Promise.all(r.resources.pendingOperations).then(()=>PM(t,l,()=>"replace-arrays"))),r?.writtenProperties&&r.writtenProperties.push({target:e,propName:n,oldOrigin:whe(i.store.originOf(n)),newOrigin:r.origin}))}return t}const U2=e=>{let t=class extends e{constructor(...r){super(...r);const i=es(this),s=i.store,n=new Gpe;i.store=n,aZ(i,s,n)}read(r,i){uZ(this,r,i)}write(r,i){return pZ(this,r??{},i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return Xpe.call(this,r,i)}};return t=h([j("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Xpe(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}function D_(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}let ue=class extends U2(et){};ue=h([j("esri.core.JSONSupport")],ue);const Qpe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,ede={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function z7(e){const t=e?.match(Qpe);if(!t)return null;const[,r,i,s]=t;if(!r)return null;let n=null,o=null,a=null;const{devext:l,qaext:u,www:c}=ede;if(i)if(n=r,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}else({customBaseUrl:o,portalHostname:a}=c);else switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=u);break;case"www":({customBaseUrl:o,portalHostname:a}=c);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:n}}function tde(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function dZ(e){const t=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,i=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return t.test(e)?e=e.replace(t,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):i.test(e)&&(e=e.replace(i,"https://qaext.arcgis.com")),e}function rde(e){const t=atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r.buffer}function ide(e){const t=new Uint8Array(e);let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return btoa(r)}const sde=()=>be.getLogger("esri.core.urlUtils"),c1=Vt.request,G7="esri/config: esriConfig.request.proxyUrl is not set.",fZ=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,mZ=/^\s*http:/i,nde=/^\s*https:/i,ode=/^\s*file:/i,ade=/:\d+$/,lde=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,ude=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),cde=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$");let Vu=class{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(ude);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(cde),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}};const JS={},hde=new Vu(Vt.applicationUrl);let an=hde;const pde=dde();let wD=pde;const _D=()=>an,nrt=()=>wD;function dde(){const e=an.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${an.scheme}://${an.host}${an.port!=null?`:${an.port}`:""}`}${t}`}function gi(e){if(!e)return null;const t={path:null,query:null},r=new Vu(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.substring(0,i),t.query=SD(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function SD(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const s=i.indexOf("=");let n,o;s<0?(n=decodeURIComponent(i),o=""):(n=decodeURIComponent(i.slice(0,s)),o=decodeURIComponent(i.slice(s+1)));let a=r[n];typeof a=="string"&&(a=r[n]=[a]),Array.isArray(a)?a.push(o):r[n]=o}return r}function Td(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r]))).join("&"):Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const s=encodeURIComponent(r)+"=",n=t?.[r];return n?s+encodeURIComponent(n(i)):Array.isArray(i)?i.map(o=>D_(o)?s+encodeURIComponent(JSON.stringify(o)):s+encodeURIComponent(o)).join("&"):D_(i)?s+encodeURIComponent(JSON.stringify(i)):s+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function fde(e=!1){let t,r=c1.proxyUrl;if(typeof e=="string"){t=_de(e);const i=tA(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw sde().warn(G7),new K("urlUtils:proxy-not-set",G7);return t&&oO()&&(r=ED(r)),gi(r)}function mde(e){const t=tA(e);let r,i;if(t){const s=xD(t.proxyUrl);r=s.path,i=s.query?SD(s.query):null}if(r){const s=gi(e);e=r+"?"+s.path;const n=Td({...i,...s.query});n&&(e=`${e}?${n}`)}return e}const q1={path:"",query:""};function xD(e){const t=e.indexOf("?");return t!==-1?(q1.path=e.slice(0,t),q1.query=e.slice(t+1)):(q1.path=e,q1.query=null),q1}function yZ(e){return e=(e=H3(e=bZ(e=xD(e).path),!0)).toLowerCase()}function yde(e){const t={proxyUrl:e.proxyUrl,urlPrefix:yZ(e.urlPrefix)},r=c1.proxyRules,i=t.urlPrefix;let s=r.length;for(let n=0;n<r.length;n++){const o=r[n].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;s=n;break}o.indexOf(i)===0&&(s=n+1)}return r.splice(s,0,t),s}function tA(e){const t=c1.proxyRules,r=yZ(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function gde(e,t){if(!e||!t)return!1;e=q3(e),t=q3(t);const r=z7(e),i=z7(t);return r!=null&&i!=null?r.portalHostname===i.portalHostname:r==null&&i==null&&Sv(e,t,!0)}function gZ(e,t){return e=q3(e),t=q3(t),H3(e)===H3(t)}function q3(e){const t=(e=La(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function nO(e,t=c1.interceptors){const r=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i);if(t){for(const i of t)if(Array.isArray(i.urls)){if(i.urls.some(r))return i}else if(r(i.urls))return i}return null}function Sv(e,t,r=!1){if(!e||!t)return!1;const i=lO(e),s=lO(t);return!(!r&&i.scheme!==s.scheme)&&i.host!=null&&s.host!=null&&i.host.toLowerCase()===s.host.toLowerCase()&&i.port===s.port}function MD(e){if(typeof e=="string"){if(!Yo(e))return!0;e=lO(e)}if(Sv(e,an))return!0;const t=c1.trustedServers||[];for(let r=0;r<t.length;r++){const i=vde(t[r]);for(let s=0;s<i.length;s++)if(Sv(e,i[s]))return!0}return!1}function vde(e){return JS[e]||(ID(e)||zl(e)?JS[e]=[new Vu(Ho(e))]:JS[e]=[new Vu(`http://${e}`),new Vu(`https://${e}`)]),JS[e]}function Ho(e,t=wD,r){return zl(e)?r?.preserveProtocolRelative?e:an.scheme==="http"&&an.authority===ka(e).slice(2)?`http:${e}`:`https:${e}`:ID(e)?e:Oh(e[0]==="/"?Tde(t):t,e)}function TD(e,t=wD,r){if(e==null||!Yo(e))return e;const i=La(e),s=i.toLowerCase(),n=La(t).toLowerCase().replace(/\/+$/,""),o=r?La(r).toLowerCase().replace(/\/+$/,""):null;if(o&&n.indexOf(o)!==0)return e;const a=(p,f,m)=>(m=p.indexOf(f,m))===-1?p.length:m;let l=a(s,"/",s.indexOf("//")+2),u=-1;for(;s.slice(0,l+1)===n.slice(0,l)+"/"&&(u=l+1,l!==s.length);)l=a(s,"/",l+1);if(u===-1||o&&u<o.length)return e;e=i.slice(u);const c=n.slice(u-1).replaceAll(/[^/]+/g,"").length;if(c>0)for(let p=0;p<c;p++)e=`../${e}`;else e=`./${e}`;return e}function La(e){return e=$de(e=Ade(e=Ede(e=Ho(e=e.trim()))))}function Oh(...e){const t=e.filter(ra);if(!t?.length)return;const r=[];if(Yo(t[0])){const s=t[0],n=s.indexOf("//");n!==-1&&(r.push(s.slice(0,n+1)),xde(t[0])&&(r[0]+="/"),t[0]=s.slice(n+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((s,n)=>n?s.concat(n.split("/")):s,[]);for(let s=0;s<i.length;s++){const n=i[s];n===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!n&&s===i.length-1||n&&(n!=="."||r.length===0))&&r.push(n)}return r.join("/")}function ka(e,t=!1){if(e==null||rA(e)||Gy(e))return null;let r=e.indexOf("://");if(r===-1&&zl(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=H3(e,!0)),e}function Yo(e){return zl(e)||ID(e)}function rA(e){return e!=null&&e.slice(0,5)==="blob:"}function Gy(e){return e!=null&&e.slice(0,5)==="data:"}function bde(e){const t=F_(e);return t?.isBase64?rde(t.data):null}function ort(e){return ide(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}const wde=/^data:(.*?)(;base64)?,(.*)$/;function F_(e){const t=e.match(wde);if(!t)return null;const[,r,i,s]=t;return{mediaType:r,isBase64:!!i,data:s}}function vZ(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}async function art(e){return(await fetch(e)).blob()}function lrt(e){const t=bde(e);if(!t)return null;const r=F_(e);return new Blob([t],{type:r.mediaType})}function zl(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function ID(e){return e!=null&&fZ.test(e)}function _de(e){return e!=null&&nde.test(e)||an.scheme==="https"&&zl(e)}function Sde(e){return e!=null&&mZ.test(e)||an.scheme==="http"&&zl(e)}function xde(e){return e!=null&&ode.test(e)}function ED(e){return zl(e)?`https:${e}`:e.replace(mZ,"https:")}function Mde(){return an.scheme==="http"}function oO(){return an.scheme==="https"}function H3(e,t=!1){return zl(e)?e.slice(2):(e=e.replace(fZ,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Tde(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function Ide(e){let t=0;if(Yo(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function urt(e,t){if(!e)return"";const r=gi(e).path.replace(/\/+$/,""),i=r.substring(r.lastIndexOf("/")+1);if(!t?.length)return i;const s=new RegExp(`\\.(${t.join("|")})$`,"i");return i.replace(s,"")}function bZ(e){return e.endsWith("/")?e:`${e}/`}function wZ(e){return e.replace(/\/+$/,"")}function Ede(e){if(/^https?:\/\//i.test(e)){const t=xD(e);e=(e=t.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Ade(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function $de(e){const t=c1.httpsDomains;if(!Sde(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),ade.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return Mde()&&i===an.authority&&!lde.test(e)||(oO()&&i===an.authority||t&&t.some(s=>i===s||i.endsWith(`.${s}`))||oO()&&!tA(e))&&(e=ED(e)),e}function aO(e,t,r){if(!(t&&r&&e&&Yo(e)))return e;const i=e.indexOf("//"),s=e.indexOf("/",i+2),n=e.indexOf(":",i+2),o=Math.min(s<0?e.length:s,n<0?e.length:n);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function lO(e){return typeof e=="string"?new Vu(Ho(e)):(e.scheme||(e.scheme=an.scheme),e)}function crt(e){return Ode.test(e)}function _Z(e,t){const r=gi(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function Cde(e,t,r){const i=gi(e),s=i.query||{};return s[t]=String(r),`${i.path}?${Td(s)}`}function Fw(e,t){if(!t)return e;const r=gi(e),i=r.query||{};for(const[n,o]of Object.entries(t))o!=null&&(i[n]=o);const s=Td(i);return s?`${r.path}?${s}`:r.path}function hrt(e){if(e==null)return null;const t=e.match(SZ);return t?t[2]:null}function B7(e){if(e==null)return null;const t=e.match(SZ);return t?{path:t[1],extension:t[2]}:{path:e,extension:null}}async function prt(e){return typeof e=="string"?F_(e)??{data:e}:new Promise((t,r)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(F_(i.result)),i.onerror=s=>r(s)})}const SZ=/([^.]*)\.([^/]*)$/,Ode=/(^data:image\/svg|\.svg$)/i,xZ="20240724",MZ="ac51c09e1d17be02f839eb2e22bd05fd7a16c2d3";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");const Pde="4.30";let sr,AD=Pde;AD="4.30.9";function drt(e){sr=e}function frt(e){const t=sr?.findCredential(e);return t?.token?Cde(e,"token",t.token):e}ce("host-webworker");const Rde=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function TZ(e){const t=ka(e,!0);return!!t&&t.endsWith(".arcgis.com")&&!Rde.has(t)&&!e.endsWith("/sharing/rest/generateToken")}function Lde(e,t,r=!1,i){return new Promise((s,n)=>{if(Ul(i))return void n(q7());let o=()=>{u(),n(new Error(`Unable to load ${t}`))},a=()=>{const c=e;u(),s(c)},l=()=>{if(!e)return;const c=e;u(),c.src="",n(q7())};const u=()=>{ce("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,i?.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};i?.addEventListener("abort",l),ce("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function q7(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}const IZ="Timeout exceeded";function kde(){return new Error(IZ)}function mrt(e){return typeof e=="object"&&!!e&&"message"in e&&e.message===IZ}function Nde(e){Vt.request.crossOriginNoCorsDomains||(Vt.request.crossOriginNoCorsDomains={});const t=Vt.request.crossOriginNoCorsDomains;for(let r of e)r=r.toLowerCase(),/^https?:\/\//.test(r)?t[ka(r)??""]=0:(t[ka("http://"+r)??""]=0,t[ka("https://"+r)??""]=0)}function Dde(e){const t=Vt.request.crossOriginNoCorsDomains;if(t){let r=ka(e);if(r)return r=r.toLowerCase(),!Sv(r,_D())&&t[r]<Date.now()-36e5}return!1}async function Fde(e){const t=Vt.request.crossOriginNoCorsDomains,r=ka(e);t&&r&&(t[r.toLowerCase()]=Date.now());const i=gi(e);e=i.path,i.query?.f==="json"&&(e+="?f=json");try{await fetch(e,{mode:"no-cors",credentials:"include"})}catch{}}async function Re(e,t){e instanceof URL&&(e=e.toString()),t?.query instanceof URLSearchParams&&(t.query=SD(t.query.toString().replaceAll("+"," ")));const r=Gy(e),i=rA(e);i||r||(e=La(e));const s={url:e,requestOptions:{...t}},n=f=>({data:f,getAllHeaders:xv,getHeader:xv,httpStatus:200,requestOptions:s.requestOptions,url:s.url}),o=nO(e,Aa.internalInterceptors);if(o){const f=await W7(o,s);if(f!=null)return n(f)}let a=nO(e);if(a){const f=await W7(a,s);if(f!=null)return n(f);a.after||a.error||(a=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"&&(ce("host-webworker")||ce("host-node")))throw Uu("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s);if(t.method==="head"){if(t.body)throw Uu("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(r||i)throw Uu("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await Gde(),W3)return W3.execute(e,t);const l=new AbortController,u=Zo(t,()=>l.abort()),c={controller:l,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:a,params:s,redoRequest:!1,useIdentity:Aa.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},p=await Wde(c).finally(()=>u?.remove());return a?.after?.(p),p}let W3;const Aa=Vt.request,EZ="FormData"in globalThis,jde=new Set([499,498,403,401]),Vde=new Set(["COM_0056","COM_0057","SB_0008"]),Ude=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],xv=()=>null,J3=Symbol();function zde(e){const t=ka(e);t&&!Re._corsServers.includes(t)&&Re._corsServers.push(t)}function H7(e){const t=ka(e);return!t||t.endsWith(".arcgis.com")||Re._corsServers.includes(t)||MD(t)}function Uu(e,t,r,i){let s="Error";const n={url:r.url,requestOptions:r.requestOptions,getAllHeaders:xv,getHeader:xv,ssl:!1};if(t instanceof K)return t.details?(t.details=Z(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=n,t;if(t){const o=i&&(()=>Array.from(i.headers)),a=i&&(c=>i.headers.get(c)),l=i?.status,u=t.message;u&&(s=u),o&&a&&(n.getAllHeaders=o,n.getHeader=a),n.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||l||0,n.subCode=t.subcode,n.messageCode=t.messageCode,typeof t.details=="string"?n.messages=[t.details]:n.messages=t.details,n.raw=J3 in t?t[J3]:t}return ws(t)?ii():new K(e,s,n)}async function Gde(){ce("host-webworker")&&!W3&&(W3=await fe(()=>import("./request-D1c3vzLz.js"),__vite__mapDeps([0,1]),import.meta.url))}async function uO(){sr||await fe(()=>import("./IdentityManager-DMZNjZn9.js"),__vite__mapDeps([2,1,3]),import.meta.url)}async function Bde(e){const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,s=r.body;let n=null,o=null;if(EZ&&"HTMLFormElement"in globalThis&&(s instanceof FormData?n=s:s instanceof HTMLFormElement&&(n=new FormData(s))),typeof s=="string"&&(o=s),e.fetchOptions={cache:r.cacheBust?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",priority:Aa.priority,redirect:"follow",signal:i},(n||o)&&(e.fetchOptions.body=n||o),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query?.token||n?.get("token")),!e.hasToken&&Vt.apiKey&&TZ(t)&&(r.query||(r.query={}),r.query.token=Vt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!AZ(t)&&!Ul(i)){let a;r.authMode==="immediate"?(await uO(),a=await sr.getCredential(t,{signal:i}),e.credential=a):r.authMode==="no-prompt"?(await uO(),a=await sr.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=a):sr&&(a=sr.findCredential(t)),a&&(e.credentialToken=a.token,e.useSSL=!!a.ssl)}}function AZ(e){return Ude.some(t=>t.test(e))}async function qde(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions??{},s=rA(t)||Gy(t),n=r.responseType||"json",o=s?0:r.timeout!=null?r.timeout:Aa.timeout;let a=!1;if(!s){e.useSSL&&(t=ED(t));let f={...r.query};e.credentialToken&&(f.token=e.credentialToken);let m=Td(f);ce("esri-url-encodes-apostrophe")&&(m=m.replaceAll("'","%27"));const g=t.length+1+m.length;let b;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||g>Aa.maxUrlLength;const w=r.useProxy||!!tA(t);if(w){const S=fde(t);b=S.path,!a&&b.length+1+g>Aa.maxUrlLength&&(a=!0),S.query&&(f={...S.query,...f})}if(i.method==="HEAD"&&(a||w)){if(a)throw g>Aa.maxUrlLength?Uu("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):Uu("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw Uu("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=Fw(t,f):(i.body=Td(f),i.headers||(i.headers={}),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=Fw(t,f),w&&(e.useProxy=!0,t=`${b}?${t}`),f.token&&EZ&&i.body instanceof FormData&&!tde(t)&&i.body.set("token",f.token),r.hasOwnProperty("withCredentials")?e.withCredentials=r.withCredentials:Sv(t,_D())||(MD(t)||sr&&sr.findServerInfo(t)?.webTierAuth)&&(e.withCredentials=!0),e.withCredentials&&(i.credentials="include",Dde(t)&&await Fde(a?Fw(t,f):t))}let l,u,c=0,p=!1;o>0&&(c=setTimeout(()=>{p=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")u=i,u.url=t;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||a||Hde(r.headers)||!s&&!e.useProxy&&Aa.proxyUrl&&!H7(t)){if(Re._beforeFetch&&await Re._beforeFetch(t,i),l=await fetch(t,i),Re._afterFetch&&await Re._afterFetch(l),e.useProxy||zde(t),r.responseType==="native")u=l;else if(i.method!=="HEAD")if(l.ok){switch(n){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(c&&(clearTimeout(c),c=0),n==="json"||n==="xml"||n==="document")if(u)switch(n){case"json":u=JSON.parse(u);break;case"xml":u=J7(u,"application/xml");break;case"document":u=J7(u,"text/html")}else u=null;if(u){if(n==="array-buffer"||n==="blob"){const f=l.headers.get("Content-Type");if(f&&/application\/json|text\/plain/i.test(f)&&u[n==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(u).json();m.error&&(u=m)}catch{}}n==="image"&&u instanceof Blob&&(u=await Z7(URL.createObjectURL(u),e,!0))}}else{u=await l.text();try{u=JSON.parse(u)}catch{}}}else u=await Z7(t,e)}catch(f){if(f.name==="AbortError")throw p?kde():ii("Request canceled");if(!(!l&&f instanceof TypeError&&Aa.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||H7(t))throw f;e.redoRequest=!0,yde({proxyUrl:Aa.proxyUrl,urlPrefix:ka(t)??""})}finally{c&&clearTimeout(c)}return[l,u]}async function W7(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(s){r=Uu("request:interceptor",s,t)}if((i instanceof Error||i instanceof K)&&(r=Uu("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function Hde(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function J7(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function Wde(e){let t,r;await Bde(e);try{do[t,r]=await qde(e);while(!await Jde(e,t,r))}catch(n){const o=Uu("request:server",n,e.params,t);throw o.details.ssl=e.useSSL,e.interceptor?.error&&e.interceptor.error(o),o}const i=e.params.url;if(r&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(i)){if(!e.hasToken&&!e.credentialToken&&r.user?.username&&!MD(i)){const n=ka(i,!0);n&&Aa.trustedServers.push(n)}Array.isArray(r.authorizedCrossOriginNoCorsDomains)&&Nde(r.authorizedCrossOriginNoCorsDomains)}const s=e.credential;if(s&&sr){let o=sr.findServerInfo(s.server)?.owningSystemUrl;if(o){o=o.replace(/\/?$/,"/sharing");const a=sr.findCredential(o,s.userId);a&&sr._getIdenticalSvcIdx(o,a)===-1&&a.resources.unshift(o)}}return{data:r,getAllHeaders:t?()=>Array.from(t.headers):xv,getHeader:t?n=>t.headers.get(n):xv,httpStatus:t?.status??200,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function Jde(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let s,n;if(r&&(r.error&&typeof r.error=="object"?s=r.error:r.status==="error"&&Array.isArray(r.messages)&&(s={...r},s[J3]=r,s.details=r.messages)),!s&&!t.ok)throw s=new Error(`Unable to load ${t.url} status: ${t.status}`),s[J3]=r,s;let o,a=null;s&&(n=Number(s.code),a=s.hasOwnProperty("subcode")?Number(s.subcode):null,o=s.messageCode,o=o?.toUpperCase());const l=i.authMode;if(n===403&&(a===4||s.message?.toLowerCase().includes("ssl")&&!s.message.toLowerCase().includes("permission"))){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||n===498)&&n!==void 0&&jde.has(n)&&!AZ(e.params.url)&&(n!==403||(!o||!Vde.has(o))&&(a==null||a===2&&e.credentialToken))){await uO();try{const u=await sr.getCredential(e.params.url,{error:Uu("request:server",s,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=u,e.credentialToken=u.token,e.useSSL=e.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return e.credential=void 0,e.credentialToken=void 0,!1;s=u}}if(s)throw s;return!0}function Z7(e,t,r=!1){const i=t.controller.signal,s=new Image;return t.withCredentials?s.crossOrigin="use-credentials":s.crossOrigin="anonymous",s.alt="",s.fetchPriority=Aa.priority,s.src=e,Lde(s,e,r,i)}Re._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],Re._beforeFetch=void 0,Re._afterFetch=void 0;let NM=class $Z{constructor(){this._emitter=new $Z.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}};(function(e){class t{constructor(s=null){this._target=s,this._listenersMap=null}clear(){this._listenersMap?.clear(),this._listenersMap=null}destroy(){this.clear()}emit(s,n){let o=this._listenersMap?.get(s);if(!o)return!1;const a=this._target||this;let l=!1;for(const u of o.slice()){const c="deref"in u?u.deref():u;c?c?.call(a,n):l=!0}return l&&(o=o.filter(u=>!("deref"in u)||u.deref()!=null),this._listenersMap.set(s,o)),o.length>0}on(s,n){if(Array.isArray(s)){const a=s.map(l=>this.on(l,n));return N2(a)}if(s.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap??=new Map;const o=this._listenersMap.get(s)||[];return o.push(n),this._listenersMap.set(s,o),or(()=>{const a=this._listenersMap?.get(s),l=a?.indexOf(n)??-1;l>=0&&a.splice(l,1)})}once(s,n){const o=this.on(s,a=>{o.remove(),("deref"in n?n.deref():n)?.call(null,a)});return o}hasEventListener(s){const n=this._listenersMap?.get(s);return n!=null&&n.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let s=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(n,o){return this._emitter.emit(n,o)}on(n,o){return this._emitter.on(n,o)}once(n,o){return this._emitter.once(n,o)}hasEventListener(n){return this._emitter.hasEventListener(n)}};return s=h([j("esri.core.Evented")],s),s};let r=class extends et{constructor(){super(...arguments),this._emitter=new NM.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,s){return this._emitter.emit(i,s)}on(i,s){return this._emitter.on(i,s)}once(i,s){return this._emitter.once(i,s)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=h([j("esri.core.Evented.EventedAccessor")],r),e.EventedAccessor=r})(NM||(NM={}));const jh=NM;var er;(function(e){e[e.ADD=1]="ADD",e[e.REMOVE=2]="REMOVE",e[e.MOVE=4]="MOVE"})(er||(er={}));function $D(e){return(t,r)=>{t[r]=e}}let z2=class extends xJ{notify(){const t=this._observers;if(t&&t.length>0){const r=t.slice();for(const i of r)i.onInvalidated(),i.onCommitted()}}};var hh;let Zde=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}},Yde=class{constructor(t,r,i,s,n){this.target=t,this.added=r,this.removed=i,this.start=s,this.deleteCount=n}};const ua=new Vd(Zde,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1});function Y7(e){e&&typeof e=="object"&&"destroy"in e&&typeof e.destroy=="function"&&e.destroy()}function y4(e){return e?e instanceof sh?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function g4(e){if(e?.length)return e[0]}function Kde(e,t,r,i){const s=Math.min(e.length-r,t.length-i);let n=0;for(;n<s&&e[r+n]===t[i+n];)n++;return n}function CZ(e,t,r,i){t&&t.forEach((s,n,o)=>{e.push(s),CZ(e,r.call(i,s,n,o),r,i)})}const Zh=new Set,Yh=new Set,Kh=new Set,v4=new Map;let Xde=0,sh=hh=class extends jh.EventedAccessor{static isCollection(e){return e!=null&&e instanceof hh}constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._updating=!1,this._timer=null,this._observable=new z2,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Xde++})}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof hh?{items:e}:e:{}}destroy(){this._removeAllRaw(),this._timer&&this._timer.remove(),this._emitter.destroy(),this._notifications=null}*[Symbol.iterator](){yield*this.items}get items(){return ot(this._observable),this._items}set items(e){this._emitBeforeChanges(er.ADD)||(this._splice(0,this.length,y4(e)),this._emitAfterChanges(er.ADD))}hasEventListener(e){return!this.destroyed&&(e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e))}on(e,t){if(this.destroyed)return or();if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),or(()=>{i.removed=!0,r.splice(r.indexOf(i),1)})}return this._emitter.on(e,t)}once(e,t){const r="deref"in t?()=>t.deref():()=>t,i=this.on(e,s=>{r()?.call(null,s),i.remove()});return i}add(e,t){if(ot(this._observable),this._emitBeforeChanges(er.ADD))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(er.ADD),this}addMany(e,t=this._items.length){if(ot(this._observable),!e?.length)return this;if(this._emitBeforeChanges(er.ADD))return this;const r=this.getNextIndex(t);return this._splice(r,0,y4(e)),this._emitAfterChanges(er.ADD),this}at(e){if(ot(this._observable),(e=Math.trunc(e)||0)<0&&(e+=this.length),!(e<0||e>=this.length))return this._items[e]}removeAll(){if(ot(this._observable),!this.length||this._emitBeforeChanges(er.REMOVE))return[];const e=this._removeAllRaw();return this._emitAfterChanges(er.REMOVE),e}_removeAllRaw(){return this.length===0?[]:this._splice(0,this.length)||[]}clone(){return ot(this._observable),this._createNewInstance({items:this._items.map(Z)})}concat(...e){ot(this._observable);const t=e.map(y4);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(ot(this._observable),!this.length||this._emitBeforeChanges(er.REMOVE))return;const r=this._splice(0,this.length),i=r.length;for(let s=0;s<i;s++)e.call(t,r[s],s,r);this._emitAfterChanges(er.REMOVE)}destroyAll(){this.drain(Y7)}destroyMany(e){const t=this.removeMany(e);return t.forEach(Y7),t}every(e,t){return ot(this._observable),this._items.every(e,t)}filter(e,t){let r;return ot(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return ot(this._observable),this._items.find(e,t)}findIndex(e,t){return ot(this._observable),this._items.findIndex(e,t)}flatten(e,t){ot(this._observable);const r=[];return CZ(r,this,e,t),new hh(r)}forEach(e,t){return ot(this._observable),this._items.forEach(e,t)}getItemAt(e){return ot(this._observable),this._items[e]}getNextIndex(e){ot(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return ot(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return ot(this._observable),this._items.indexOf(e,t)}join(e=","){return ot(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return ot(this._observable),this._items.lastIndexOf(e,t)}map(e,t){ot(this._observable);const r=this._items.map(e,t);return new hh({items:r})}reorder(e,t=this.length-1){ot(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(er.MOVE))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(er.MOVE)}return e}}pop(){if(ot(this._observable),!this.length||this._emitBeforeChanges(er.REMOVE))return;const e=g4(this._splice(this.length-1,1));return this._emitAfterChanges(er.REMOVE),e}push(...e){return ot(this._observable),this._emitBeforeChanges(er.ADD)||(this._splice(this.length,0,e),this._emitAfterChanges(er.ADD)),this.length}reduce(e,t){ot(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){ot(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return ot(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(ot(this._observable),e<0||e>=this.length||this._emitBeforeChanges(er.REMOVE))return;const t=g4(this._splice(e,1));return this._emitAfterChanges(er.REMOVE),t}removeMany(e){if(ot(this._observable),!e?.length||this._emitBeforeChanges(er.REMOVE))return[];const t=e instanceof hh?e.toArray():e,r=this._items,i=[],s=t.length;for(let n=0;n<s;n++){const o=t[n],a=r.indexOf(o);if(a>-1){const l=1+Kde(t,r,n+1,a+1),u=this._splice(a,l);u&&u.length>0&&i.push.apply(i,u),n+=l-1}}return this._emitAfterChanges(er.REMOVE),i}reverse(){if(ot(this._observable),this._emitBeforeChanges(er.MOVE))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(er.MOVE),this}shift(){if(ot(this._observable),!this.length||this._emitBeforeChanges(er.REMOVE))return;const e=g4(this._splice(0,1));return this._emitAfterChanges(er.REMOVE),e}slice(e=0,t=this.length){return ot(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return ot(this._observable),this._items.some(e,t)}sort(e){if(ot(this._observable),!this.length||this._emitBeforeChanges(er.MOVE))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(er.MOVE),this}splice(e,t,...r){ot(this._observable);const i=(t?er.REMOVE:0)|(r.length?er.ADD:0);if(this._emitBeforeChanges(i))return[];const s=this._splice(e,t,r)||[];return this._emitAfterChanges(i),s}toArray(){return ot(this._observable),this._items.slice()}toJSON(){return ot(this._observable),this.toArray()}toLocaleString(){return ot(this._observable),this._items.toLocaleString()}toString(){return ot(this._observable),this._items.toString()}unshift(...e){return ot(this._observable),!e.length||this._emitBeforeChanges(er.ADD)||(this._splice(0,0,e),this._emitAfterChanges(er.ADD)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,s=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._updating=!0,this._timer=l1(()=>this._dispatchChange())),e<0&&(e+=this.length),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const a=ua.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)n=o[l],a.reset(n),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),i.splice(e,0,n),e+=1,l-=1,u-=1);ua.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=ua.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);ua.release(a)}}if(r?.length){if(s){const c=[];for(const p of r){const f=s.ensureType(p);f==null&&p!=null||c.push(f)}r=c}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=e===this.length;if(a||l){const c=ua.acquire();c.target=this,c.cancellable=!0;const p=ua.acquire();p.target=this,p.cancellable=!1;for(const f of r)a?(c.reset(f),this.emit("before-add",c),c.defaultPrevented||(u?i.push(f):i.splice(e++,0,f),this._set("length",i.length),l&&(p.reset(f),this.emit("after-add",p)))):(u?i.push(f):i.splice(e++,0,f),this._set("length",i.length),p.reset(f),this.emit("after-add",p));ua.release(p),ua.release(c)}else{if(u)for(const c of r)i.push(c);else i.splice(e,0,...r);this._set("length",i.length)}}if((r?.length||o?.length)&&this._notifyChangeEvent(r,o),this.hasEventListener("after-splice")){const a=new Yde(this,r,o,e,t);this.emit("after-splice",a)}return o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=ua.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,ua.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=ua.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),ua.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}get updating(){return this._updating}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),this._updating=!1,!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;Zh.clear(),Yh.clear(),Kh.clear();for(const{added:l,removed:u}of r){if(l)if(Kh.size===0&&Yh.size===0)for(const c of l)Zh.add(c);else for(const c of l)Yh.has(c)?(Kh.add(c),Yh.delete(c)):Kh.has(c)||Zh.add(c);if(u)if(Kh.size===0&&Zh.size===0)for(const c of u)Yh.add(c);else for(const c of u)Zh.has(c)?Zh.delete(c):(Kh.delete(c),Yh.add(c))}const i=Nn.acquire();Zh.forEach(l=>{i.push(l)});const s=Nn.acquire();Yh.forEach(l=>{s.push(l)});const n=this._items,o=t.items,a=Nn.acquire();if(Kh.forEach(l=>{o.indexOf(l)!==n.indexOf(l)&&a.push(l)}),t.listeners&&(i.length||s.length||a.length)){const l={target:this,added:i,removed:s,moved:a},u=t.listeners.length;for(let c=0;c<u;c++){const p=t.listeners[c];p.removed||p.callback.call(this,l)}}Nn.release(i),Nn.release(s),Nn.release(a)}Zh.clear(),Yh.clear(),Kh.clear()}};sh.ofType=e=>{if(!e)return hh;if(v4.has(e))return v4.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const s=e.typeMap[i].prototype.declaredClass;t?t+=` | ${s}`:t=s}let r=class extends hh{};return h([$D({Type:e,ensureType:typeof e=="function"?ni(e):Zu(e)})],r.prototype,"itemType",void 0),r=h([j(`esri.core.Collection<${t}>`)],r),v4.set(e,r),r},h([d()],sh.prototype,"_updating",void 0),h([d()],sh.prototype,"length",void 0),h([d()],sh.prototype,"items",null),h([d({readOnly:!0})],sh.prototype,"updating",null),sh=hh=h([j("esri.core.Collection")],sh);const qe=sh;function Id(e,t,r=qe){return t||(t=new r),t===e||(t.removeAll(),Qde(e)?t.addMany(e):e&&t.add(e)),t}function OZ(e){return e}function Qde(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}var Hp;(function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"})(Hp||(Hp={}));let efe=class{constructor(){this._resolver=ia(),this._status=Hp.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=Hp.RESOLVED,this._cleanUp()},()=>{this._status=Hp.REJECTED,this._cleanUp()}),this.promise=this._resolver.promise}destroy(){this._cleanUp()}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===Hp.RESOLVED}isRejected(){return this._status===Hp.REJECTED}isFulfilled(){return this._status!==Hp.PENDING}abort(){this._resolver.reject(ii())}_cleanUp(){this._allPromise=null,this._resolvingPromises=null}_tryResolve(){if(this.isFulfilled())return;const t=ia(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve()},s=>{this.isFulfilled()||this._allPromise!==i||ws(s)||this._resolver.reject(s)}),t.resolve()}};const iA=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new efe,this.addResolvingPromise(Promise.resolve())}destroy(){this._promiseProps.destroy()}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return this._promiseProps.promise.then(()=>this).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=h([j("esri.core.Promise")],t),t};let Z3=class extends iA(et){};Z3=h([j("esri.core.Promise")],Z3);const tfe="not-loaded",rfe="loading",ife="failed",K7="loaded",PZ=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const s=this.load.bind(this);this.load=n=>{const o=new Promise((a,l)=>{const u=fD(n,l);this.destroyed&&l(new K("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===tfe){this._set("loadStatus",rfe);const a=this._loadController=new AbortController;s({signal:a.signal})}return i(),o}})),this.when(()=>{this._set("loadStatus",K7),this._loadController=null},i=>{this._set("loadStatus",ife),this._set("loadError",i),this._loadController=null})}destroy(){this._loadController&&(this._loadController=O_(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===K7}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new K("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return h([d({readOnly:!0})],t.prototype,"loaded",null),h([d({readOnly:!0})],t.prototype,"loadError",void 0),h([d({clonable:!1})],t.prototype,"loadStatus",void 0),h([d({type:[sa],readOnly:!0})],t.prototype,"loadWarnings",null),t=h([j("esri.core.Loadable")],t),t};let Tb=class extends PZ(Z3){};Tb=h([j("esri.core.Loadable")],Tb),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=PZ,e.isLoadable=t}(Tb||(Tb={}));const Yu=Tb;function sfe(e,t,r){return mD(e.map((i,s)=>t.apply(r,[i,s])))}async function nfe(e,t,r){return(await mD(e.map((i,s)=>t.apply(r,[i,s])))).map(i=>i.value)}function CD(e){return{ok:!0,value:e}}function OD(e){return{ok:!1,error:e}}function ofe(e){return e!=null&&e.ok===!0?e.value:null}function afe(e){return e!=null&&e.ok===!1?e.error:null}async function sA(e){if(e==null)return{ok:!1,error:new Error("no promise provided")};try{return CD(await e)}catch(t){return OD(t)}}async function lfe(e){try{return CD(await e)}catch(t){return lo(t),OD(t)}}function PD(e,t){return new hp(e,t)}let hp=class extends et{get value(){return ofe(this._result)}get error(){return afe(this._result)}get finished(){return this._result!=null}constructor(t,r){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=O_(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:i}=this._abortController;this.promise=t(i),this.promise.then(s=>{this._result=CD(s),this._cleanup()},s=>{this._result=OD(s),this._cleanup()}),this._abortHandle=Zo(r,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=Kr(this._abortHandle),this._abortController=null}};h([d()],hp.prototype,"value",null),h([d()],hp.prototype,"error",null),h([d()],hp.prototype,"finished",null),h([d()],hp.prototype,"promise",void 0),h([d()],hp.prototype,"_result",void 0),hp=h([j("esri.core.asyncUtils.ReactiveTask")],hp);async function nA(e,t){return await e.load(),ufe(e,t)}async function ufe(e,t){const r=[],i=(...n)=>{for(const o of n)o!=null&&(Array.isArray(o)?i(...o):qe.isCollection(o)?o.forEach(a=>i(a)):Yu.isLoadable(o)&&r.push(o))};t(i);let s=null;if(await nfe(r,async n=>{const o=await sA(cfe(n)?n.loadAll():n.load());o.ok!==!1||s||(s=o)}),s)throw s.error;return e}function cfe(e){return"loadAll"in e&&typeof e.loadAll=="function"}function ge(e,t,r){let i,s;return t===void 0?(s=e,i=[void 0]):typeof t!="string"?(s=e,i=[void 0],r=t):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;for(const l of i){const u=WJ(n,l,s);u.write&&typeof u.write=="object"||(u.write={}),r&&(u.write.target=r),u.write.writer=a[o]}}}let wt=class{constructor(t,r={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=t,this._options=r,this.apiValues=[],this.jsonValues=[],this._apiToJSON=hfe(t),this.apiValues=X7(this._apiToJSON),this.jsonValues=X7(this._jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,s,n)=>{const o=this.toJSON(i);o!==void 0&&mn(n,o,s)},this.write.isJSONMapWriter=!0}toJSON(t){if(t==null)return null;if(this._apiToJSON.hasOwnProperty(t)){const r=this._apiToJSON[t];return this._options.useNumericKeys?+r:r}return this._options.ignoreUnknown?void 0:t}fromJSON(t){return t!=null&&this._jsonToAPI.hasOwnProperty(t)?this._jsonToAPI[t]:this._options.ignoreUnknown?void 0:t}};function hfe(e){const t={};for(const r in e)t[e[r]]=r;return t}function X7(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}function Oi(){return function(e,t){return new wt(e,{ignoreUnknown:!0,...t})}}let RD=class{constructor(t,r,i,s){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i;const n=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*n,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=s||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const oi=new RD(6378137,1/298.257223563,3e5,.006694379990137799),zu=new RD(3396190,1/169.8944472236118,23e4),Ed=new RD(1737400,0,0);function Xt(e){if(!Vt.assetsPath)throw be.getLogger("esri.assets").errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new K("assets:path-not-set","config.assetsPath is not set");return Oh(Vt.assetsPath,e)}let b4,ie=null;function LD(){return!!ie}function pfe(){return!!ce("esri-wasm")}function RZ(){return b4||(b4=fe(()=>import("./pe-wasm-CU3YFA8c.js"),__vite__mapDeps([4,1]),import.meta.url).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Xt(`esri/geometry/support/${t}`)})).then(e=>{kZ(e)}),b4)}var cO,Fr,hO;(function(e){function t(n,o,a){ie.ensureCache.prepare();const l=$m(a),u=a===l,c=ie.ensureFloat64(l),p=ie._pe_geog_to_proj(ie.getPointer(n),o,c);return p&&sd(a,o,c,u),p}function r(n,o,a,l){switch(l){case Fr.PE_TRANSFORM_P_TO_G:return i(n,o,a);case Fr.PE_TRANSFORM_G_TO_P:return t(n,o,a)}return 0}function i(n,o,a){return s(n,o,a,0)}function s(n,o,a,l){ie.ensureCache.prepare();const u=$m(a),c=a===u,p=ie.ensureFloat64(u),f=ie._pe_proj_to_geog_center(ie.getPointer(n),o,p,l);return f&&sd(a,o,p,c),f}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=s})(cO||(cO={})),function(e){function t(){e.PE_BUFFER_MAX=ie.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=ie.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=ie.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=ie.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=ie.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=ie.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=ie.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=ie.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=ie.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=ie.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=ie.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=ie.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=ie.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=ie.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=ie.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=ie.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=ie.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=ie.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=ie.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=ie.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_STR_FMT_WKT=ie.PeDefs.prototype.PE_STR_FMT_WKT,e.PE_STR_FMT_WKT2=ie.PeDefs.prototype.PE_STR_FMT_WKT2,e.PE_PARM_X0=ie.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=ie.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=ie.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=ie.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=ie.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=ie.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=ie.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=ie.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=ie.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=ie.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Fr||(Fr={})),function(e){const t={},r={},i=m=>{if(m){const g=m.getType();switch(g){case Fr.PE_TYPE_GEOGCS:m=ie.castObject(m,ie.PeGeogcs);break;case Fr.PE_TYPE_PROJCS:m=ie.castObject(m,ie.PeProjcs);break;case Fr.PE_TYPE_GEOGTRAN:m=ie.castObject(m,ie.PeGeogtran);break;default:g&Fr.PE_TYPE_UNIT&&(m=ie.castObject(m,ie.PeUnit))}}return m};function s(){ie.PeFactory.prototype.initialize(null)}function n(m){return o(Fr.PE_TYPE_COORDSYS,m)}function o(m,g){let b=null,w=t[m];if(w||(w={},t[m]=w),w.hasOwnProperty(String(g)))b=w[g];else{const S=ie.PeFactory.prototype.factoryByType(m,g);ie.compare(S,ie.NULL)||(b=S,w[g]=b)}return b=i(b),b}function a(m,g){let b=null,w=r[m];if(w||(w={},r[m]=w),w.hasOwnProperty(g))b=w[g];else{const S=ie.PeFactory.prototype.fromString(m,g);ie.compare(S,ie.NULL)||(b=S,w[g]=b)}return b=i(b),b}function l(m){return o(Fr.PE_TYPE_GEOGCS,m)}function u(m){return o(Fr.PE_TYPE_GEOGTRAN,m)}function c(m){return ie.PeFactory.prototype.getCode(m)}function p(m){return o(Fr.PE_TYPE_PROJCS,m)}function f(m){return o(Fr.PE_TYPE_UNIT,m)}e.initialize=s,e.coordsys=n,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=u,e.getCode=c,e.projcs=p,e.unit=f}(hO||(hO={}));let LZ=null;var Y3,pO,dO,fO,K3,mO,X3,Q3,yO;function kZ(e){function t(n,o,a){n[o]=a(n[o])}ie=e,Fr.init(),Y3.init(),K3.init(),X3.init(),Q3.init(),LZ=class extends ie.PeGCSExtent{destroy(){ie.destroy(this)}};const r=[ie.PeDatum,ie.PeGeogcs,ie.PeGeogtran,ie.PeObject,ie.PeParameter,ie.PePrimem,ie.PeProjcs,ie.PeSpheroid,ie.PeUnit];for(const n of r)t(n.prototype,"getName",o=>function(){return o.call(this,new Array(Fr.PE_NAME_MAX))});for(const n of[ie.PeGeogtran,ie.PeProjcs])t(n.prototype,"getParameters",o=>function(){const a=new Array(Fr.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const c=ie.getValue(l,"*");a[u]=c?ie.wrapPointer(c,ie.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(ie.PeHorizon.prototype,"getCoord",n=>function(){const o=this.getSize();if(!o)return null;const a=[];return sd(a,o,n.call(this)),a}),t(ie.PeGTlistExtendedEntry.prototype,"getEntries",n=>{const o=ie._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=n.call(this);if(!ie.compare(l,ie.NULL)){a=[l];const u=this.getSteps();if(u>1){const c=ie.getPointer(l);for(let p=1;p<u;p++)a.push(ie.wrapPointer(c+o*p,ie.PeGTlistExtendedGTs))}}return a}});const i=ie._pe_getPeHorizonSize(),s=n=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(n))return o.get(n);let a=null;const l=n.call(this);if(!ie.compare(l,ie.NULL)){a=[l];const u=l.getNump();if(u>1){const c=ie.getPointer(l);for(let p=1;p<u;p++)a.push(ie.wrapPointer(c+i*p,ie.PeHorizon))}}return o.set(n,a),a};t(ie.PeProjcs.prototype,"horizonGcsGenerate",s),t(ie.PeProjcs.prototype,"horizonPcsGenerate",s),ie.PeObject.prototype.toString=function(n=Fr.PE_STR_OPTS_NONE){ie.ensureCache.prepare();const o=ie.getPointer(this),a=ie.ensureInt8(new Array(Fr.PE_BUFFER_MAX));return ie.UTF8ToString(ie._pe_object_to_string_ext(o,n,a))}}function vc(e){if(!e)return;const t=ie.getClass(e);if(!t)return;const r=ie.getCache(t);if(!r)return;const i=ie.getPointer(e);i&&delete r[i]}function ZS(e,t){const r=[],i=new Array(t);for(let s=0;s<e;s++)r.push(ie.ensureInt8(i));return r}function $m(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(r=>{t.push(r[0],r[1])})):t=e,t}function sd(e,t,r,i=!1){if(i)for(let s=0;s<2*t;s++)e[s]=ie.getValue(r+s*Float64Array.BYTES_PER_ELEMENT,"double");else{const s=e.length===0;for(let n=0;n<t;n++)s&&(e[n]=new Array(2)),e[n][0]=ie.getValue(r,"double"),e[n][1]=ie.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=ie.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=ie._pe_getPeGTlistExtendedEntrySize()}function i(s,n,o,a,l,u){let c=null;const p=new ie.PeInteger(u);try{const f=ie.PeGTlistExtended.prototype.getGTlist(s,n,o,a,l,p);if((u=p.val)&&(c=[f],u>1)){const m=ie.getPointer(f);for(let g=1;g<u;g++)c.push(ie.wrapPointer(m+t*g,ie.PeGTlistExtendedEntry))}}finally{ie.destroy(p)}return c}e.init=r,e.getGTlist=i})(Y3||(Y3={})),function(e){function t(r){if(r?.length){for(const i of r)vc(i),i.getEntries().forEach(s=>{vc(s);const n=s.getGeogtran();vc(n),n.getParameters().forEach(vc),[n.getGeogcs1(),n.getGeogcs2()].forEach(o=>{vc(o);const a=o.getDatum();vc(a),vc(a.getSpheroid()),vc(o.getPrimem()),vc(o.getUnit())})});ie.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(pO||(pO={})),function(e){function t(r,i,s,n,o){ie.ensureCache.prepare();const a=$m(s),l=s===a,u=ie.ensureFloat64(a);let c=0;n&&(c=ie.ensureFloat64(n));const p=ie._pe_geog_to_geog(ie.getPointer(r),i,u,c,o);return p&&sd(s,i,u,l),p}e.geogToGeog=t}(dO||(dO={})),function(e){const t=(u,c,p,f,m,g)=>{let b,w;switch(ie.ensureCache.prepare(),u){case"dd":b=ie._pe_geog_to_dd,w=Fr.PE_DD_MAX;break;case"ddm":b=ie._pe_geog_to_ddm,w=Fr.PE_DDM_MAX;break;case"dms":b=ie._pe_geog_to_dms,w=Fr.PE_DMS_MAX}let S=0;c&&(S=ie.getPointer(c));const M=$m(f),x=ie.ensureFloat64(M),_=ZS(p,w),I=b(S,p,x,m,ie.ensureInt32(_));if(I)for(let E=0;E<p;E++)g[E]=ie.UTF8ToString(_[E]);return I},r=(u,c,p,f,m)=>{let g;switch(ie.ensureCache.prepare(),u){case"dd":g=ie._pe_dd_to_geog;break;case"ddm":g=ie._pe_ddm_to_geog;break;case"dms":g=ie._pe_dms_to_geog}let b=0;c&&(b=ie.getPointer(c));const w=f.map(_=>ie.ensureString(_)),S=ie.ensureInt32(w),M=ie.ensureFloat64(new Array(2*p)),x=g(b,p,S,M);return x&&sd(m,p,M),x};function i(u,c,p,f,m){return t("dms",u,c,p,f,m)}function s(u,c,p,f){return r("dms",u,c,p,f)}function n(u,c,p,f,m){return t("ddm",u,c,p,f,m)}function o(u,c,p,f){return r("ddm",u,c,p,f)}function a(u,c,p,f,m){return t("dd",u,c,p,f,m)}function l(u,c,p,f){return r("dd",u,c,p,f)}e.geogToDms=i,e.dmsToGeog=s,e.geogToDdm=n,e.ddmToGeog=o,e.geogToDd=a,e.ddToGeog=l}(fO||(fO={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=ie.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=ie.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=ie.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(s,n,o,a,l,u,c){ie.ensureCache.prepare();let p=0;s&&(p=ie.getPointer(s));const f=$m(o),m=ie.ensureFloat64(f),g=ZS(n,Fr.PE_MGRS_MAX),b=ie.ensureInt32(g),w=ie._pe_geog_to_mgrs_extended(p,n,m,a,l,u,b);if(w)for(let S=0;S<n;S++)c[S]=ie.UTF8ToString(g[S]);return w}function i(s,n,o,a,l){ie.ensureCache.prepare();let u=0;s&&(u=ie.getPointer(s));const c=o.map(g=>ie.ensureString(g)),p=ie.ensureInt32(c),f=ie.ensureFloat64(new Array(2*n)),m=ie._pe_mgrs_to_geog_extended(u,n,p,a,f);return m&&sd(l,n,f),m}e.init=t,e.geogToMgrsExtended=r,e.mgrsToGeogExtended=i}(K3||(K3={})),function(e){function t(i,s,n,o,a,l,u){ie.ensureCache.prepare();let c=0;i&&(c=ie.getPointer(i));const p=$m(n),f=ie.ensureFloat64(p),m=ZS(s,Fr.PE_MGRS_MAX),g=ie.ensureInt32(m),b=ie._pe_geog_to_usng(c,s,f,o,a,l,g);if(b)for(let w=0;w<s;w++)u[w]=ie.UTF8ToString(m[w]);return b}function r(i,s,n,o){ie.ensureCache.prepare();let a=0;i&&(a=ie.getPointer(i));const l=n.map(f=>ie.ensureString(f)),u=ie.ensureInt32(l),c=ie.ensureFloat64(new Array(2*s)),p=ie._pe_usng_to_geog(a,s,u,c);return p&&sd(o,s,c),p}e.geogToUsng=t,e.usngToGeog=r}(mO||(mO={})),function(e){function t(){e.PE_UTM_OPTS_NONE=ie.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=ie.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=ie.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(s,n,o,a,l){ie.ensureCache.prepare();let u=0;s&&(u=ie.getPointer(s));const c=$m(o),p=ie.ensureFloat64(c),f=ZS(n,Fr.PE_UTM_MAX),m=ie.ensureInt32(f),g=ie._pe_geog_to_utm(u,n,p,a,m);if(g)for(let b=0;b<n;b++)l[b]=ie.UTF8ToString(f[b]);return g}function i(s,n,o,a,l){ie.ensureCache.prepare();let u=0;s&&(u=ie.getPointer(s));const c=o.map(g=>ie.ensureString(g)),p=ie.ensureInt32(c),f=ie.ensureFloat64(new Array(2*n)),m=ie._pe_utm_to_geog(u,n,p,a,f);return m&&sd(l,n,f),m}e.init=t,e.geogToUtm=r,e.utmToGeog=i}(X3||(X3={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=ie.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=ie.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=ie.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=ie.PePCSInfo.prototype.PE_POLE_POINT}function i(s,n=e.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return t.has(s)&&(a=t.get(s),a[n]&&(o=a[n])),o||(o=ie.PePCSInfo.prototype.generate(s,n),a||(a=[],t.set(s,a)),a[n]=o),o}e.init=r,e.generate=i}(Q3||(Q3={})),function(e){function t(){return ie.PeVersion.prototype.version_string()}e.versionString=t}(yO||(yO={}));const dfe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return cO},get PeDefs(){return Fr},get PeFactory(){return hO},get PeGCSExtent(){return LZ},get PeGTTransformations(){return dO},get PeGTlistExtended(){return Y3},get PeGTlistExtendedEntry(){return pO},get PeNotationDms(){return fO},get PeNotationMgrs(){return K3},get PeNotationUsng(){return mO},get PeNotationUtm(){return X3},get PePCSInfo(){return Q3},get PeVersion(){return yO},_init:kZ,get _pe(){return ie},isLoaded:LD,isSupported:pfe,load:RZ},Symbol.toStringTag,{value:"Module"}));var vy;(function(e){e[e.CGCS2000=4490]="CGCS2000",e[e.GCSMARS2000=104971]="GCSMARS2000",e[e.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",e[e.GCSMOON2000=104903]="GCSMOON2000"})(vy||(vy={}));let v;const F={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9895:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,10160:0,10183:0,10188:0,10194:0,10199:0,10207:0,10212:0,10217:0,10222:0,10227:0,10235:0,10240:0,10250:0,10254:0,10270:0,10275:0,10280:0,10306:0,10329:0,10471:0,10477:0,10481:2,10516:2,20002:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2,103897:1};for(v=2e3;v<=2045;v++)F[v]=0;for(v=2056;v<=2065;v++)F[v]=0;for(v=2067;v<=2135;v++)F[v]=0;for(v=2137;v<=2154;v++)F[v]=0;for(v=2161;v<=2170;v++)F[v]=0;for(v=2172;v<=2193;v++)F[v]=0;for(v=2195;v<=2198;v++)F[v]=0;for(v=2200;v<=2203;v++)F[v]=0;for(v=2205;v<=2217;v++)F[v]=0;for(v=2222;v<=2224;v++)F[v]=1;for(v=2225;v<=2250;v++)F[v]=2;for(v=2251;v<=2253;v++)F[v]=1;for(v=2257;v<=2264;v++)F[v]=2;for(v=2274;v<=2279;v++)F[v]=2;for(v=2280;v<=2282;v++)F[v]=1;for(v=2283;v<=2289;v++)F[v]=2;for(v=2290;v<=2292;v++)F[v]=0;for(v=2308;v<=2313;v++)F[v]=0;for(v=2315;v<=2491;v++)F[v]=0;for(v=2494;v<=2866;v++)F[v]=0;for(v=2867;v<=2869;v++)F[v]=1;for(v=2870;v<=2888;v++)F[v]=2;for(v=2891;v<=2895;v++)F[v]=2;for(v=2896;v<=2898;v++)F[v]=1;for(v=2902;v<=2908;v++)F[v]=2;for(v=2915;v<=2920;v++)F[v]=2;for(v=2921;v<=2923;v++)F[v]=1;for(v=2924;v<=2930;v++)F[v]=2;for(v=2931;v<=2962;v++)F[v]=0;for(v=2964;v<=2968;v++)F[v]=2;for(v=2969;v<=2973;v++)F[v]=0;for(v=2975;v<=2991;v++)F[v]=0;for(v=2995;v<=3051;v++)F[v]=0;for(v=3054;v<=3079;v++)F[v]=0;for(v=3081;v<=3088;v++)F[v]=0;for(v=3092;v<=3101;v++)F[v]=0;for(v=3106;v<=3138;v++)F[v]=0;for(v=3146;v<=3151;v++)F[v]=0;for(v=3153;v<=3166;v++)F[v]=0;for(v=3168;v<=3172;v++)F[v]=0;for(v=3174;v<=3203;v++)F[v]=0;for(v=3294;v<=3358;v++)F[v]=0;for(v=3367;v<=3403;v++)F[v]=0;for(v=3408;v<=3416;v++)F[v]=0;for(v=3417;v<=3438;v++)F[v]=2;for(v=3441;v<=3446;v++)F[v]=2;for(v=3447;v<=3450;v++)F[v]=0;for(v=3451;v<=3459;v++)F[v]=2;for(v=3460;v<=3478;v++)F[v]=0;for(v=3554;v<=3559;v++)F[v]=0;for(v=3560;v<=3570;v++)F[v]=2;for(v=3571;v<=3581;v++)F[v]=0;for(v=3594;v<=3597;v++)F[v]=0;for(v=3601;v<=3604;v++)F[v]=0;for(v=3637;v<=3639;v++)F[v]=0;for(v=3665;v<=3667;v++)F[v]=0;for(v=3693;v<=3695;v++)F[v]=0;for(v=3701;v<=3727;v++)F[v]=0;for(v=3728;v<=3739;v++)F[v]=2;for(v=3740;v<=3751;v++)F[v]=0;for(v=3753;v<=3760;v++)F[v]=2;for(v=3761;v<=3773;v++)F[v]=0;for(v=3775;v<=3777;v++)F[v]=0;for(v=3779;v<=3781;v++)F[v]=0;for(v=3783;v<=3785;v++)F[v]=0;for(v=3788;v<=3791;v++)F[v]=0;for(v=3797;v<=3802;v++)F[v]=0;for(v=3814;v<=3816;v++)F[v]=0;for(v=3825;v<=3829;v++)F[v]=0;for(v=3832;v<=3841;v++)F[v]=0;for(v=3844;v<=3852;v++)F[v]=0;for(v=3873;v<=3885;v++)F[v]=0;for(v=3890;v<=3893;v++)F[v]=0;for(v=3907;v<=3912;v++)F[v]=0;for(v=3942;v<=3950;v++)F[v]=0;for(v=3968;v<=3970;v++)F[v]=0;for(v=3973;v<=3976;v++)F[v]=0;for(v=3986;v<=3989;v++)F[v]=0;for(v=3994;v<=3997;v++)F[v]=0;for(v=4048;v<=4051;v++)F[v]=0;for(v=4056;v<=4063;v++)F[v]=0;for(v=4093;v<=4096;v++)F[v]=0;for(v=4390;v<=4398;v++)F[v]=0;for(v=4399;v<=4413;v++)F[v]=2;for(v=4418;v<=4433;v++)F[v]=2;for(v=4455;v<=4457;v++)F[v]=2;for(v=4484;v<=4489;v++)F[v]=0;for(v=4491;v<=4554;v++)F[v]=0;for(v=4568;v<=4589;v++)F[v]=0;for(v=4652;v<=4656;v++)F[v]=0;for(v=4766;v<=4800;v++)F[v]=0;for(v=5014;v<=5016;v++)F[v]=0;for(v=5069;v<=5072;v++)F[v]=0;for(v=5105;v<=5130;v++)F[v]=0;for(v=5167;v<=5188;v++)F[v]=0;for(v=5253;v<=5259;v++)F[v]=0;for(v=5269;v<=5275;v++)F[v]=0;for(v=5292;v<=5311;v++)F[v]=0;for(v=5329;v<=5331;v++)F[v]=0;for(v=5343;v<=5349;v++)F[v]=0;for(v=5355;v<=5357;v++)F[v]=0;for(v=5387;v<=5389;v++)F[v]=0;for(v=5459;v<=5463;v++)F[v]=0;for(v=5479;v<=5482;v++)F[v]=0;for(v=5518;v<=5520;v++)F[v]=0;for(v=5530;v<=5539;v++)F[v]=0;for(v=5550;v<=5552;v++)F[v]=0;for(v=5562;v<=5583;v++)F[v]=0;for(v=5623;v<=5625;v++)F[v]=2;for(v=5631;v<=5639;v++)F[v]=0;for(v=5649;v<=5653;v++)F[v]=0;for(v=5663;v<=5680;v++)F[v]=0;for(v=5682;v<=5685;v++)F[v]=0;for(v=5875;v<=5877;v++)F[v]=0;for(v=5896;v<=5899;v++)F[v]=0;for(v=5921;v<=5940;v++)F[v]=0;for(v=6050;v<=6125;v++)F[v]=0;for(v=6244;v<=6275;v++)F[v]=0;for(v=6328;v<=6348;v++)F[v]=0;for(v=6350;v<=6356;v++)F[v]=0;for(v=6366;v<=6372;v++)F[v]=0;for(v=6381;v<=6387;v++)F[v]=0;for(v=6393;v<=6404;v++)F[v]=0;for(v=6480;v<=6483;v++)F[v]=0;for(v=6511;v<=6514;v++)F[v]=0;for(v=6579;v<=6581;v++)F[v]=0;for(v=6619;v<=6624;v++)F[v]=0;for(v=6625;v<=6627;v++)F[v]=2;for(v=6628;v<=6632;v++)F[v]=0;for(v=6634;v<=6637;v++)F[v]=0;for(v=6669;v<=6692;v++)F[v]=0;for(v=6707;v<=6709;v++)F[v]=0;for(v=6720;v<=6723;v++)F[v]=0;for(v=6732;v<=6738;v++)F[v]=0;for(v=6931;v<=6933;v++)F[v]=0;for(v=6956;v<=6959;v++)F[v]=0;for(v=7005;v<=7007;v++)F[v]=0;for(v=7057;v<=7070;v++)F[v]=2;for(v=7074;v<=7082;v++)F[v]=0;for(v=7109;v<=7118;v++)F[v]=0;for(v=7119;v<=7127;v++)F[v]=1;for(v=7374;v<=7376;v++)F[v]=0;for(v=7528;v<=7586;v++)F[v]=0;for(v=7587;v<=7645;v++)F[v]=2;for(v=7692;v<=7696;v++)F[v]=0;for(v=7755;v<=7787;v++)F[v]=0;for(v=7791;v<=7795;v++)F[v]=0;for(v=7799;v<=7801;v++)F[v]=0;for(v=7803;v<=7805;v++)F[v]=0;for(v=7825;v<=7831;v++)F[v]=0;for(v=7845;v<=7859;v++)F[v]=0;for(v=8013;v<=8032;v++)F[v]=0;for(v=8065;v<=8068;v++)F[v]=1;for(v=8518;v<=8529;v++)F[v]=2;for(v=8533;v<=8536;v++)F[v]=2;for(v=8538;v<=8540;v++)F[v]=2;for(v=8677;v<=8679;v++)F[v]=0;for(v=8836;v<=8840;v++)F[v]=0;for(v=8857;v<=8859;v++)F[v]=0;for(v=8908;v<=8910;v++)F[v]=0;for(v=9154;v<=9159;v++)F[v]=0;for(v=9205;v<=9218;v++)F[v]=0;for(v=9271;v<=9273;v++)F[v]=0;for(v=9295;v<=9297;v++)F[v]=0;for(v=9356;v<=9360;v++)F[v]=0;for(v=9404;v<=9407;v++)F[v]=0;for(v=9476;v<=9482;v++)F[v]=0;for(v=9487;v<=9494;v++)F[v]=0;for(v=9697;v<=9699;v++)F[v]=0;for(v=9821;v<=9865;v++)F[v]=0;for(v=10285;v<=10291;v++)F[v]=0;for(v=10314;v<=10317;v++)F[v]=0;for(v=10448;v<=10465;v++)F[v]=0;for(v=10731;v<=10733;v++)F[v]=0;for(v=11114;v<=11118;v++)F[v]=0;for(v=20004;v<=20032;v++)F[v]=0;for(v=20047;v<=20049;v++)F[v]=0;for(v=20062;v<=20092;v++)F[v]=0;for(v=20135;v<=20138;v++)F[v]=0;for(v=20248;v<=20258;v++)F[v]=0;for(v=20348;v<=20358;v++)F[v]=0;for(v=20436;v<=20440;v++)F[v]=0;for(v=20822;v<=20824;v++)F[v]=0;for(v=20904;v<=20932;v++)F[v]=0;for(v=20934;v<=20936;v++)F[v]=0;for(v=21004;v<=21032;v++)F[v]=0;for(v=21035;v<=21037;v++)F[v]=0;for(v=21095;v<=21097;v++)F[v]=0;for(v=21148;v<=21150;v++)F[v]=0;for(v=21207;v<=21264;v++)F[v]=0;for(v=21307;v<=21364;v++)F[v]=0;for(v=21413;v<=21423;v++)F[v]=0;for(v=21453;v<=21463;v++)F[v]=0;for(v=21473;v<=21483;v++)F[v]=0;for(v=21780;v<=21782;v++)F[v]=0;for(v=21891;v<=21894;v++)F[v]=0;for(v=21896;v<=21899;v++)F[v]=0;for(v=22171;v<=22177;v++)F[v]=0;for(v=22181;v<=22187;v++)F[v]=0;for(v=22191;v<=22197;v++)F[v]=0;for(v=22207;v<=22222;v++)F[v]=0;for(v=22229;v<=22232;v++)F[v]=0;for(v=22234;v<=22236;v++)F[v]=0;for(v=22243;v<=22250;v++)F[v]=0;for(v=22262;v<=22265;v++)F[v]=0;for(v=22307;v<=22322;v++)F[v]=0;for(v=22348;v<=22357;v++)F[v]=0;for(v=22407;v<=22422;v++)F[v]=0;for(v=22462;v<=22465;v++)F[v]=0;for(v=22521;v<=22525;v++)F[v]=0;for(v=22607;v<=22622;v++)F[v]=0;for(v=22641;v<=22646;v++)F[v]=0;for(v=22648;v<=22657;v++)F[v]=0;for(v=22707;v<=22722;v++)F[v]=0;for(v=22762;v<=22765;v++)F[v]=0;for(v=22807;v<=22822;v++)F[v]=0;for(v=22991;v<=22994;v++)F[v]=0;for(v=23028;v<=23038;v++)F[v]=0;for(v=23301;v<=23333;v++)F[v]=2;for(v=23830;v<=23853;v++)F[v]=0;for(v=23866;v<=23872;v++)F[v]=0;for(v=23877;v<=23884;v++)F[v]=0;for(v=23886;v<=23894;v++)F[v]=0;for(v=23946;v<=23948;v++)F[v]=0;for(v=24311;v<=24313;v++)F[v]=0;for(v=24342;v<=24347;v++)F[v]=0;for(v=24370;v<=24374;v++)F[v]=10;for(v=24375;v<=24381;v++)F[v]=0;for(v=24718;v<=24721;v++)F[v]=0;for(v=24817;v<=24821;v++)F[v]=0;for(v=24877;v<=24882;v++)F[v]=0;for(v=24891;v<=24893;v++)F[v]=0;for(v=25391;v<=25395;v++)F[v]=0;for(v=25828;v<=25838;v++)F[v]=0;for(v=26191;v<=26195;v++)F[v]=0;for(v=26391;v<=26393;v++)F[v]=0;for(v=26701;v<=26722;v++)F[v]=0;for(v=26729;v<=26799;v++)F[v]=2;for(v=26801;v<=26803;v++)F[v]=2;for(v=26811;v<=26813;v++)F[v]=2;for(v=26847;v<=26870;v++)F[v]=2;for(v=26891;v<=26899;v++)F[v]=0;for(v=26901;v<=26923;v++)F[v]=0;for(v=26929;v<=26946;v++)F[v]=0;for(v=26948;v<=26998;v++)F[v]=0;for(v=27037;v<=27040;v++)F[v]=0;for(v=27205;v<=27232;v++)F[v]=0;for(v=27258;v<=27260;v++)F[v]=0;for(v=27391;v<=27398;v++)F[v]=0;for(v=27561;v<=27564;v++)F[v]=0;for(v=27571;v<=27574;v++)F[v]=0;for(v=27581;v<=27584;v++)F[v]=0;for(v=27591;v<=27594;v++)F[v]=0;for(v=27700;v<=27707;v++)F[v]=0;for(v=28191;v<=28193;v++)F[v]=0;for(v=28348;v<=28358;v++)F[v]=0;for(v=28402;v<=28432;v++)F[v]=0;for(v=28462;v<=28492;v++)F[v]=0;for(v=29118;v<=29122;v++)F[v]=0;for(v=29168;v<=29172;v++)F[v]=0;for(v=29177;v<=29185;v++)F[v]=0;for(v=29187;v<=29195;v++)F[v]=0;for(v=29900;v<=29903;v++)F[v]=0;for(v=30161;v<=30179;v++)F[v]=0;for(v=30491;v<=30494;v++)F[v]=0;for(v=30729;v<=30732;v++)F[v]=0;for(v=31251;v<=31259;v++)F[v]=0;for(v=31265;v<=31268;v++)F[v]=0;for(v=31275;v<=31279;v++)F[v]=0;for(v=31281;v<=31297;v++)F[v]=0;for(v=31461;v<=31469;v++)F[v]=0;for(v=31491;v<=31495;v++)F[v]=0;for(v=31917;v<=31922;v++)F[v]=0;for(v=31965;v<=32e3;v++)F[v]=0;for(v=32001;v<=32003;v++)F[v]=2;for(v=32005;v<=32031;v++)F[v]=2;for(v=32033;v<=32060;v++)F[v]=2;for(v=32064;v<=32067;v++)F[v]=2;for(v=32074;v<=32077;v++)F[v]=2;for(v=32081;v<=32086;v++)F[v]=0;for(v=32107;v<=32130;v++)F[v]=0;for(v=32133;v<=32159;v++)F[v]=0;for(v=32164;v<=32167;v++)F[v]=2;for(v=32180;v<=32199;v++)F[v]=0;for(v=32201;v<=32260;v++)F[v]=0;for(v=32301;v<=32360;v++)F[v]=0;for(v=32401;v<=32460;v++)F[v]=0;for(v=32501;v<=32560;v++)F[v]=0;for(v=32601;v<=32662;v++)F[v]=0;for(v=32664;v<=32667;v++)F[v]=2;for(v=32701;v<=32761;v++)F[v]=0;for(v=53001;v<=53004;v++)F[v]=0;for(v=53008;v<=53019;v++)F[v]=0;for(v=53021;v<=53032;v++)F[v]=0;for(v=53034;v<=53037;v++)F[v]=0;for(v=53042;v<=53046;v++)F[v]=0;for(v=53074;v<=53080;v++)F[v]=0;for(v=54001;v<=54004;v++)F[v]=0;for(v=54008;v<=54019;v++)F[v]=0;for(v=54021;v<=54032;v++)F[v]=0;for(v=54034;v<=54037;v++)F[v]=0;for(v=54042;v<=54046;v++)F[v]=0;for(v=54048;v<=54053;v++)F[v]=0;for(v=54074;v<=54080;v++)F[v]=0;for(v=54098;v<=54101;v++)F[v]=0;for(v=102001;v<=102040;v++)F[v]=0;for(v=102042;v<=102063;v++)F[v]=0;for(v=102065;v<=102067;v++)F[v]=0;for(v=102070;v<=102117;v++)F[v]=0;for(v=102122;v<=102216;v++)F[v]=0;for(v=102221;v<=102377;v++)F[v]=0;for(v=102382;v<=102388;v++)F[v]=0;for(v=102389;v<=102398;v++)F[v]=2;for(v=102399;v<=102444;v++)F[v]=0;for(v=102445;v<=102447;v++)F[v]=2;for(v=102448;v<=102458;v++)F[v]=0;for(v=102459;v<=102468;v++)F[v]=2;for(v=102469;v<=102499;v++)F[v]=0;for(v=102500;v<=102519;v++)F[v]=1;for(v=102520;v<=102524;v++)F[v]=0;for(v=102525;v<=102529;v++)F[v]=2;for(v=102530;v<=102588;v++)F[v]=0;for(v=102590;v<=102598;v++)F[v]=0;for(v=102601;v<=102603;v++)F[v]=0;for(v=102605;v<=102628;v++)F[v]=0;for(v=102629;v<=102646;v++)F[v]=2;for(v=102648;v<=102700;v++)F[v]=2;for(v=102701;v<=102703;v++)F[v]=0;for(v=102707;v<=102730;v++)F[v]=2;for(v=102733;v<=102758;v++)F[v]=2;for(v=102767;v<=102900;v++)F[v]=0;for(v=102901;v<=102933;v++)F[v]=2;for(v=102934;v<=102950;v++)F[v]=13;for(v=102951;v<=102963;v++)F[v]=0;for(v=102965;v<=102969;v++)F[v]=0;for(v=102971;v<=102973;v++)F[v]=0;for(v=102975;v<=102989;v++)F[v]=0;for(v=102990;v<=102992;v++)F[v]=1;for(v=102997;v<=103002;v++)F[v]=0;for(v=103003;v<=103008;v++)F[v]=2;for(v=103009;v<=103011;v++)F[v]=0;for(v=103012;v<=103014;v++)F[v]=2;for(v=103019;v<=103021;v++)F[v]=0;for(v=103022;v<=103024;v++)F[v]=2;for(v=103029;v<=103031;v++)F[v]=0;for(v=103032;v<=103034;v++)F[v]=2;for(v=103065;v<=103068;v++)F[v]=0;for(v=103074;v<=103076;v++)F[v]=0;for(v=103077;v<=103079;v++)F[v]=1;for(v=103080;v<=103082;v++)F[v]=0;for(v=103083;v<=103085;v++)F[v]=2;for(v=103090;v<=103093;v++)F[v]=0;for(v=103097;v<=103099;v++)F[v]=0;for(v=103100;v<=103102;v++)F[v]=2;for(v=103107;v<=103109;v++)F[v]=0;for(v=103110;v<=103112;v++)F[v]=2;for(v=103113;v<=103116;v++)F[v]=0;for(v=103117;v<=103120;v++)F[v]=2;for(v=103153;v<=103157;v++)F[v]=0;for(v=103158;v<=103162;v++)F[v]=2;for(v=103163;v<=103165;v++)F[v]=0;for(v=103166;v<=103168;v++)F[v]=1;for(v=103169;v<=103171;v++)F[v]=2;for(v=103186;v<=103188;v++)F[v]=0;for(v=103189;v<=103191;v++)F[v]=2;for(v=103192;v<=103195;v++)F[v]=0;for(v=103196;v<=103199;v++)F[v]=2;for(v=103200;v<=103224;v++)F[v]=0;for(v=103225;v<=103227;v++)F[v]=1;for(v=103232;v<=103237;v++)F[v]=0;for(v=103238;v<=103243;v++)F[v]=2;for(v=103244;v<=103246;v++)F[v]=0;for(v=103247;v<=103249;v++)F[v]=2;for(v=103254;v<=103256;v++)F[v]=0;for(v=103257;v<=103259;v++)F[v]=2;for(v=103264;v<=103266;v++)F[v]=0;for(v=103267;v<=103269;v++)F[v]=2;for(v=103300;v<=103375;v++)F[v]=0;for(v=103381;v<=103383;v++)F[v]=0;for(v=103384;v<=103386;v++)F[v]=1;for(v=103387;v<=103389;v++)F[v]=0;for(v=103390;v<=103392;v++)F[v]=2;for(v=103397;v<=103399;v++)F[v]=0;for(v=103400;v<=103471;v++)F[v]=2;for(v=103476;v<=103478;v++)F[v]=0;for(v=103479;v<=103481;v++)F[v]=2;for(v=103486;v<=103488;v++)F[v]=0;for(v=103489;v<=103491;v++)F[v]=2;for(v=103492;v<=103495;v++)F[v]=0;for(v=103496;v<=103499;v++)F[v]=2;for(v=103528;v<=103543;v++)F[v]=0;for(v=103544;v<=103548;v++)F[v]=2;for(v=103549;v<=103551;v++)F[v]=0;for(v=103552;v<=103554;v++)F[v]=1;for(v=103555;v<=103557;v++)F[v]=2;for(v=103558;v<=103560;v++)F[v]=0;for(v=103571;v<=103573;v++)F[v]=0;for(v=103574;v<=103576;v++)F[v]=2;for(v=103577;v<=103580;v++)F[v]=0;for(v=103581;v<=103583;v++)F[v]=2;for(v=103595;v<=103694;v++)F[v]=0;for(v=103696;v<=103699;v++)F[v]=0;for(v=103700;v<=103793;v++)F[v]=2;for(v=103794;v<=103890;v++)F[v]=0;for(v=103891;v<=103896;v++)F[v]=2;for(v=103900;v<=103971;v++)F[v]=2;for(v=103972;v<=103977;v++)F[v]=0;for(v=112e3;v<=112101;v++)F[v]=0;const NZ=[102100,102113,3857,3785],ffe=[104905,104971],mfe=[4326,...NZ,...ffe],Q7='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',YS=[-20037508342788905e-9,20037508342788905e-9],KS=[-20037508342787e-6,20037508342787e-6],DZ={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:YS,origin:KS,dx:1e-5},102100:{wkTemplate:Q7,valid:YS,origin:KS,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:YS,origin:KS,dx:1e-5},3857:{wkTemplate:Q7,valid:YS,origin:KS,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function vi(e,t){if(e===t)return!0;if(e==null||t==null)return!1;const r=e.wkid,i=t.wkid;if(r!=null||i!=null){if(r===i||Ku(e)&&Ku(t))return!0;const o=e.latestWkid;if(o!=null&&i===o)return!0;const a=t.latestWkid;return a!=null&&r===a}let s,n;return e.wkt2&&t.wkt2?(s=e.wkt2,n=t.wkt2):e.wkt&&t.wkt&&(s=e.wkt,n=t.wkt),!(!s||!n)&&s.toUpperCase()===n.toUpperCase()}function Un(e){const t=e?.wkid;return t!=null&&t>=2e3&&DZ[t]||null}function Ad(e){if(!e)return;const{wkid:t,vcsWkid:r}=e;if(t)return r?JSON.stringify({wkid:t,vcsWkid:r}):String(t);const i=e.wkt||e.wkt2;return JSON.stringify(i?r?{wkt:i,vcsWkid:r}:{wkt:i}:{})}function oA(e){if(!Wo(e))return!1;const{wkid:t}=e;if(t)return F[t]==null;const r=e.wkt2||e.wkt;return!!r&&/^\s*(?:GEOGCS|GEOGCRS|GEOGRAPHICCRS)/i.test(r)}function yfe(e){return!(FZ(e)||jZ(e))}function by(e){return e?.wkid===4326}function Trt(e){return/^\s*(?:GEOD|GEODETIC|GEOG|GEOGRAPHIC|PROJ|PROJECTED|VERT|VERTICAL|ENG|ENGINEERING|PARAMETRIC|TIME|DERIVEDPROJ|COMPOUND|BOUND)CRS/i.test(e)}function ej(e){return e?.wkid===vy.CGCS2000}function Ku(e){const t=e?.wkid;return t!=null&&t>=2e3&&NZ.includes(t)}function gfe(e){return e?.wkid===32662}function aA(e){return e===vy.GCSMARS2000||e===vy.GCSMARS2000_SPHERE}function FZ(e){return aA(e?.wkid)}function lA(e){return e===vy.GCSMOON2000}function jZ(e){return lA(e?.wkid)}function vfe(e){const t=e?.wkid;return t!=null&&t>=2e3&&mfe.includes(t)}function Wo(e){if(e==null)return!1;const t=e.wkid;return t!=null&&t>=2e3||e.wkt2!=null||e.wkt!=null}const VZ={wkid:4326,wkt:BE(DZ[4326].wkTemplate,{Central_Meridian:"0.0"})},UZ={wkid:102100,latestWkid:3857},bfe={wkid:32662};function kD(e){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const wfe=kD(oi),ND=kD(zu),DD=kD(Ed),_fe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${oi.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`},Sfe=ND.wkt.toUpperCase(),xfe=DD.wkt.toUpperCase();function Mfe(e){if(e!=null&&Wo(e)){const t=e.wkid,r=e.wkt2??e.wkt;if(aA(t))return zu;const i=r?.toUpperCase();if(r&&i===Sfe)return zu;if(lA(t)||i&&i===xfe)return Ed}return oi}function Irt(e){return aA(e)?zu:lA(e)?Ed:oi}function eI(e){return vi(e,wfe)}function $d(e){return eI(e)||vi(e,ND)||vi(e,DD)}const zZ=39.37,Tfe=oi.radius*Math.PI/200,GZ=/(?:LENGTH)?UNIT\[([^\]]+)]]$/i,Wm=F,BZ=/UNIT\[([^\]]+)]/i,Ife=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),Efe=Oi()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Xl=e=>e*e,Xh=e=>e*e*e,j_={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Xl(.001)},"square-centimeters":{inBaseUnits:Xl(.01)},"square-decimeters":{inBaseUnits:Xl(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Xl(1e3)},"square-inches":{inBaseUnits:Xl(.0254)},"square-feet":{inBaseUnits:Xl(.3048)},"square-yards":{inBaseUnits:Xl(.9144)},"square-miles":{inBaseUnits:Xl(1609.344)},"square-us-feet":{inBaseUnits:Xl(1200/3937)},acres:{inBaseUnits:.0015625*Xl(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Xh(.001)},"cubic-centimeters":{inBaseUnits:1e3*Xh(.01)},"cubic-decimeters":{inBaseUnits:1e3*Xh(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Xh(1e3)},"cubic-inches":{inBaseUnits:1e3*Xh(.0254)},"cubic-feet":{inBaseUnits:1e3*Xh(.3048)},"cubic-yards":{inBaseUnits:1e3*Xh(.9144)},"cubic-miles":{inBaseUnits:1e3*Xh(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},Afe=(()=>{const e={};for(const t in j_)for(const r in j_[t].units)e[r]=t;return e})();function $fe(e,t,r){return e*j_[r].units[t].inBaseUnits}function Cfe(e,t,r){return e/j_[r].units[t].inBaseUnits}function gO(e){const t=Afe[e];if(!t)throw new Error("unknown type");return t}function tj(e,t=null){return t=t||gO(e),j_[t].baseUnit===e}function fa(e,t,r){if(t===r)return e;const i=gO(t);if(i!==gO(r))throw new Error("incompatible units");const s=tj(t,i)?e:$fe(e,t,i);return tj(r,i)?s:Cfe(s,r,i)}function Ofe(e,t,r){return fa(e,t,"meters")/(r*Math.PI/180)}function qZ(e){return Efe.fromJSON(e.toLowerCase())||null}function Mv(e){if(e!=null&&!yfe(e))return 1;const t=Vh(e);return t>1e5?1:t}function Pfe(e){return Vh(e)>=Mfe(e).metersPerDegree?"meters":WZ(e)}function Vh(e,t=oi.metersPerDegree){return Rfe(e,!0)??t}function Rfe(e,t=!1){const r=e?.wkid??null,i=e?.wkt2??e?.wkt??null;let s=null;if(r){if(aA(r))return zu.metersPerDegree;if(lA(r))return Ed.metersPerDegree;s=Wm.values[Wm[r]],!s&&t&&Ife.has(r)&&(s=Tfe)}else i&&(ZZ(i)?s=rj(GZ.exec(i),s):JZ(i)&&(s=rj(BZ.exec(i),s)));return s}function Ert(e){return oA(e)?1:Vh(e)}function rj(e,t){return e?.[1]?HZ(e[1]):t}function HZ(e){return parseFloat(e.split(",")[1])}function WZ(e){const t=e?.wkid??null,r=e?.wkt2??e?.wkt??null;let i=null;if(t)i=Wm.units[Wm[t]];else if(r){const s=ZZ(r)?GZ:JZ(r)?BZ:null;if(s){const n=s.exec(r);n?.[1]&&(i=kfe(n[1]))}}return i!=null?qZ(i):null}function JZ(e){return/^GEOCCS/i.test(e)}function ZZ(e){return/^\s*(?:PROJCS|PROJCRS|PROJECTEDCRS)/i.test(e)}const Lfe=1e-7;function kfe(e){let r=/[\\"']{1}([^\\"']+)/.exec(e)?.[1];if(!r||!Wm.units.includes(r)){const i=HZ(e);r=null;const s=Wm.values;for(let n=0;n<s.length;++n)if(Math.abs(i-s[n])<Lfe){r=Wm.units[n];break}}return r}const Nfe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},Dfe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Ffe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},V_=Oi()(Nfe),Ph=Oi()(Dfe),tI=Oi()(Ffe);var ru;let Kt=ru=class extends ue{static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return ru.WebMercator;if(e.wkid===4326)return ru.WGS84}const t=new ru;return t.read(e),t}constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.wkt2=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return by(this)}get isWebMercator(){return Ku(this)}get isGeographic(){return oA(this)}get isWrappable(){return vfe(this)}get metersPerUnit(){return Vh(this)}get unit(){return WZ(this)||(this.isGeographic?"degrees":null)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===ru.WGS84)return new ru(VZ);if(this===ru.WebMercator)return new ru(UZ);const e=new ru;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):(this.wkt!=null&&(e.wkt=this.wkt),this.wkt2!=null&&(e.wkt2=this.wkt2)),this.imageCoordinateSystem&&(e.imageCoordinateSystem=Z(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,s=this.imageCoordinateSystem;return t==null||i?JSON.stringify(s)===JSON.stringify(e.imageCoordinateSystem):r?s.id===t&&s.referenceServiceName===r:s.id===t}return vi(this,e)}toJSON(e){return this.write(void 0,e)}};Kt.GCS_NAD_1927=null,Kt.WGS84=null,Kt.WebMercator=null,Kt.PlateCarree=null,h([d({readOnly:!0})],Kt.prototype,"isWGS84",null),h([d({readOnly:!0})],Kt.prototype,"isWebMercator",null),h([d({readOnly:!0})],Kt.prototype,"isGeographic",null),h([d({readOnly:!0})],Kt.prototype,"isWrappable",null),h([d({type:St,json:{write:!0}})],Kt.prototype,"latestWkid",void 0),h([d({readOnly:!0})],Kt.prototype,"metersPerUnit",null),h([d({readOnly:!0})],Kt.prototype,"unit",null),h([d({type:St,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt==null}}}}}}})],Kt.prototype,"wkid",void 0),h([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid==null}}}}}}})],Kt.prototype,"wkt",void 0),h([ge("wkt"),ge("web-scene","wkt")],Kt.prototype,"writeWkt",null),h([d({type:String,json:{write:!1}})],Kt.prototype,"wkt2",void 0),h([d({type:St,json:{write:!0}})],Kt.prototype,"vcsWkid",void 0),h([d({type:St,json:{write:!0}})],Kt.prototype,"latestVcsWkid",void 0),h([d()],Kt.prototype,"imageCoordinateSystem",void 0),Kt=ru=h([j("esri.geometry.SpatialReference")],Kt),Kt.prototype.toJSON.isDefaultToJSON=!0,Kt.GCS_NAD_1927=new Kt({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),Kt.WGS84=new Kt(VZ),Kt.WebMercator=new Kt(UZ),Kt.PlateCarree=new Kt(bfe),Object.freeze&&(Object.freeze(Kt.GCS_NAD_1927),Object.freeze(Kt.WGS84),Object.freeze(Kt.WebMercator),Object.freeze(Kt.PlateCarree));const Fe=Kt;function pe(e,t,r){let i,s;return t===void 0||Array.isArray(t)?(s=e,r=t,i=[void 0]):(s=t,i=Array.isArray(e)?e:[e]),(n,o)=>{const a=n.constructor.prototype;i.forEach(l=>{const u=WJ(n,l,s);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],r&&(u.read.source=(u.read.source||[]).concat(r))})}}let iu=class extends ue{constructor(...t){super(...t),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Fe.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(t,r){if(t instanceof Fe)return t;if(t!=null){const i=new Fe;return i.read(t,r),i}return t}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(t){return this.cache[t]}setCacheValue(t,r){this.cache[t]=r}};h([d()],iu.prototype,"type",void 0),h([d({readOnly:!0})],iu.prototype,"cache",null),h([d({readOnly:!0})],iu.prototype,"extent",null),h([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],iu.prototype,"hasM",void 0),h([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],iu.prototype,"hasZ",void 0),h([d({type:Fe,json:{write:!0},value:Fe.WGS84})],iu.prototype,"spatialReference",void 0),h([pe("spatialReference")],iu.prototype,"readSpatialReference",null),iu=h([j("esri.geometry.Geometry")],iu);const uc=iu,jfe=Object.prototype.toString;function Vfe(e){const t="__accessorMetadata__"in e?ni(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return Ufe.apply(this,r)}}function Ufe(e,t,r,i){qE(e,t).cast=i}function zfe(e){return(t,r)=>{qE(t,e).cast=t[r]}}function Zt(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&jfe.call(e[0])==="[object Function]"?Vfe(e[0]):e.length===1&&typeof e[0]=="string"?zfe(e[0]):void 0}const Gfe=57.29577951308232,Bfe=.017453292519943;function ij(e){return e*Gfe}function sj(e){return e*Bfe}function $rt(e){return Math.PI/2-2*Math.atan(Math.exp(-e/oi.radius))}function vO(e){return e.wkid!=null||e.wkt!=null}const w4=[0,0];function rI(e,t,r,i,s){const n=e,o=s;if(o.spatialReference=r,"x"in n&&"x"in o)[o.x,o.y]=t(n.x,n.y,w4,i);else if("xmin"in n&&"xmin"in o)[o.xmin,o.ymin]=t(n.xmin,n.ymin,w4,i),[o.xmax,o.ymax]=t(n.xmax,n.ymax,w4,i);else if("paths"in n&&"paths"in o||"rings"in n&&"rings"in o){const a="paths"in n?n.paths:n.rings,l=[];let u;for(let c=0;c<a.length;c++){const p=a[c];u=[],l.push(u);for(let f=0;f<p.length;f++)u.push(t(p[f][0],p[f][1],[0,0],i)),p[f].length>2&&u[f].push(p[f][2]),p[f].length>3&&u[f].push(p[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in n&&"points"in o){const a=n.points,l=[];for(let u=0;u<a.length;u++)l[u]=t(a[u][0],a[u][1],[0,0],i),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return s}function DM(e,t){const r=e&&(vO(e)?e:e.spatialReference),i=t&&(vO(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!vi(i,r)||Ku(i)&&by(r)||Ku(r)&&by(i))}function uA(e,t){if(e==null)return null;const r=e.spatialReference,i=t&&(vO(t)?t:t.spatialReference);return DM(r,i)?vi(r,i)?Z(e):Ku(i)?rI(e,T0,Fe.WebMercator,!1,Z(e)):by(i)?rI(e,cA,Fe.WGS84,!1,Z(e)):null:null}function T0(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=sj(t);return r[0]=sj(e)*oi.radius,r[1]=oi.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function cA(e,t,r=[0,0],i=!1){const s=ij(e/oi.radius);return r[0]=i?s:s-360*Math.floor((s+180)/360),r[1]=ij(Math.PI/2-2*Math.atan(Math.exp(-t/oi.radius))),r}function Jm(e,t=!1,r=Z(e)){return rI(e,T0,Fe.WebMercator,t,r)}function I0(e,t=!1,r=Z(e)){return rI(e,cA,Fe.WGS84,t,r)}function YZ(e,t){const r=e.x-t.x,i=e.y-t.y,s=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+i*i+s*s)}function qfe(e){return KZ(e,XZ)?.[0]??null}function Hfe(e){return KZ(e,XZ)?.[1]??null}function KZ({x:e,y:t,spatialReference:r},i=[0,0]){if(r){if(Ku(r))return cA(e,t,i);if(oA(r))return i[0]=e,i[1]=t,i}return null}const XZ=[0,0];var FM;const _4=[0,0];function nj(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let Sn=FM=class extends uc{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,i,s){let n;if(Array.isArray(e))n=e,s=t,e=n[0],t=n[1],r=n[2],i=n[3];else if(e&&typeof e=="object"){if(n=e,e=n.x!=null?n.x:n.longitude,t=n.y!=null?n.y:n.latitude,r=n.z,i=n.m,(s=n.spatialReference)&&s.declaredClass!=="esri.geometry.SpatialReference"&&(s=new Fe(s)),n.longitude!=null||n.latitude!=null){if(n.longitude==null)be.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(n.latitude==null)be.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!n.declaredClass&&s?.isWebMercator){const a=T0(n.longitude,n.latitude,_4);e=a[0],t=a[1]}}}else nj(r)?(s=r,r=null):nj(i)&&(s=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?be.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&be.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),s!=null&&(o.spatialReference=s),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return Hfe(this)}set latitude(e){const{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",T0(r,e,_4)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return qfe(this)}set longitude(e){const{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",T0(e,t,_4)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new FM;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return FM.copy(e,this),this}equals(e){if(e==null)return!1;const{x:t,y:r,z:i,m:s,spatialReference:n}=this,{z:o,m:a}=e;let{x:l,y:u,spatialReference:c}=e;if(!n.equals(c))if(n.isWebMercator&&c.isWGS84)[l,u]=T0(l,u),c=n;else{if(!n.isWGS84||!c.isWebMercator)return!1;[l,u]=cA(l,u),c=n}return t===l&&r===u&&i===o&&s===a&&n.wkid===c.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;const e=Un(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,s=2*i;let n;return t>i?(n=Math.ceil(Math.abs(t-i)/s),t-=n*s):t<r&&(n=Math.ceil(Math.abs(t-r)/s),t+=n*s),this._set("x",t),this}distance(e){return YZ(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};h([d({readOnly:!0})],Sn.prototype,"cache",null),h([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Sn.prototype,"hasM",null),h([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Sn.prototype,"hasZ",null),h([d({type:Number})],Sn.prototype,"latitude",null),h([d({type:Number})],Sn.prototype,"longitude",null),h([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Zt(e=>isNaN(e)?e:Bo(e))],Sn.prototype,"x",void 0),h([ge("x")],Sn.prototype,"writeX",null),h([pe("x")],Sn.prototype,"readX",null),h([d({type:Number,json:{write:!0}})],Sn.prototype,"y",void 0),h([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Sn.prototype,"z",void 0),h([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Sn.prototype,"m",void 0),Sn=FM=h([j("esri.geometry.Point")],Sn),Sn.prototype.toJSON.isDefaultToJSON=!0;const je=Sn,S4=[0,0];function G2(e,t){return t!=null&&$n(e,t.x,t.y,t.z)}function Crt(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!Tv(e,r))return!1;return!0}function Wfe(e,t){const{xmin:r,ymin:i,zmin:s,xmax:n,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?$n(e,r,i,s)&&$n(e,r,o,s)&&$n(e,n,o,s)&&$n(e,n,i,s)&&$n(e,r,i,a)&&$n(e,r,o,a)&&$n(e,n,o,a)&&$n(e,n,i,a):$n(e,r,i)&&$n(e,r,o)&&$n(e,n,o)&&$n(e,n,i)}function Tv(e,t){return $n(e,t[0],t[1])}function Jfe(e,t){return $n(e,t[0],t[1],t[2])}function $n(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function FD(e,t){return S4[1]=t.y,S4[0]=t.x,Zfe(e,S4)}function Zfe(e,t){return jD(e.rings,t)}function jD(e,t){if(!e)return!1;if(Yfe(e))return oj(!1,e,t);let r=!1;for(let i=0,s=e.length;i<s;i++)r=oj(r,e[i],t);return r}function Yfe(e){return!Array.isArray(e[0][0])}function oj(e,t,r){const[i,s]=r;let n=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[u,c]=t[a],[p,f]=t[o];(c<s&&f>=s||f<s&&c>=s)&&u+(s-c)/(f-c)*(p-u)<i&&(n=!n)}return n}function Kfe(e,t){return G2(e,t)}function Xfe(e,t){const r=e.hasZ&&t.hasZ;let i,s,n;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(s=t.ymin,e.ymax<s)return!1}else if(s=e.ymin,t.ymax<s)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1}return!0}function Qfe(e,t){const{points:r,hasZ:i}=t,s=i?Jfe:Tv;for(const n of r)if(s(e,n))return!0;return!1}const wy=[0,0],_y=[0,0],Sy=[0,0],xy=[0,0],eme=[wy,_y,Sy,xy],QZ=[[Sy,wy],[wy,_y],[_y,xy],[xy,Sy]];function tme(e,t){return rme(e,t.rings)}function rme(e,t){wy[0]=e.xmin,wy[1]=e.ymax,_y[0]=e.xmax,_y[1]=e.ymax,Sy[0]=e.xmin,Sy[1]=e.ymin,xy[0]=e.xmax,xy[1]=e.ymin;for(const r of eme)if(jD(t,r))return!0;for(const r of t){if(!r.length)continue;let i=r[0];if(Tv(e,i))return!0;for(let s=1;s<r.length;s++){const n=r[s];if(Tv(e,n)||eY(i,n,QZ))return!0;i=n}}return!1}function ime(e,t){wy[0]=e.xmin,wy[1]=e.ymax,_y[0]=e.xmax,_y[1]=e.ymax,Sy[0]=e.xmin,Sy[1]=e.ymin,xy[0]=e.xmax,xy[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let s=i[0];if(Tv(e,s))return!0;for(let n=1;n<i.length;n++){const o=i[n];if(Tv(e,o)||eY(s,o,QZ))return!0;s=o}}return!1}const os=[0,0];function sme(e){for(let t=0;t<e.length;t++){const r=e[t];for(let s=0;s<r.length-1;s++){const n=r[s],o=r[s+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const u=e[a][l],c=e[a][l+1];if(bO(n,o,u,c,os)&&!(os[0]===n[0]&&os[1]===n[1]||os[0]===u[0]&&os[1]===u[1]||os[0]===o[0]&&os[1]===o[1]||os[0]===c[0]&&os[1]===c[1]))return!0}}const i=r.length;if(!(i<=4))for(let s=0;s<i-3;s++){let n=i-1;s===0&&(n=i-2);const o=r[s],a=r[s+1];for(let l=s+2;l<n;l++){const u=r[l],c=r[l+1];if(bO(o,a,u,c,os)&&!(os[0]===o[0]&&os[1]===o[1]||os[0]===u[0]&&os[1]===u[1]||os[0]===a[0]&&os[1]===a[1]||os[0]===c[0]&&os[1]===c[1]))return!0}}}return!1}function eY(e,t,r){for(let i=0;i<r.length;i++)if(bO(e,t,r[i][0],r[i][1]))return!0;return!1}function bO(e,t,r,i,s){const[n,o]=e,[a,l]=t,[u,c]=r,[p,f]=i,m=p-u,g=n-u,b=a-n,w=f-c,S=o-c,M=l-o,x=w*b-m*M;if(x===0)return!1;const _=(m*S-w*g)/x,I=(b*S-M*g)/x;return _>=0&&_<=1&&I>=0&&I<=1&&(s&&(s[0]=n+_*(a-n),s[1]=o+_*(l-o)),!0)}function nme(e){switch(e){case"esriGeometryEnvelope":case"extent":return Xfe;case"esriGeometryMultipoint":case"multipoint":return Qfe;case"esriGeometryPoint":case"point":return Kfe;case"esriGeometryPolygon":case"polygon":return tme;case"esriGeometryPolyline":case"polyline":return ime}}var ma;function ome(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Qh(e,t,r){return t==null?r:r==null?t:e(t,r)}let Hi=ma=class extends uc{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,s){return ome(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Fe.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:s??Fe.WGS84}}static fromBounds(e,t){return new ma({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new ma({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new je({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new ma;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&DM(t,r)&&(e=t.isWebMercator?Jm(e):I0(e,!0)),e.type==="point"?G2(this,e):e.type==="extent"&&Wfe(this,e)}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&DM(t,r)&&(e=t.isWebMercator?Jm(e):I0(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const s=(this.zmax-this.zmin)*t;this.zmin+=s,this.zmax-=s}if(this.hasM){const s=(this.mmax-this.mmin)*t;this.mmin+=s,this.mmax-=s}return this}intersects(e){if(e==null)return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!vi(t,r)&&DM(t,r)&&(e=t.isWebMercator?Jm(e):I0(e,!0)),nme(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Qh(Math.min,this.zmin,e.zmin),this.zmax=Qh(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Qh(Math.min,this.mmin,e.mmin),this.mmax=Qh(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:e!=null&&this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Qh(Math.max,this.zmin,e.zmin),this.zmax=Qh(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Qh(Math.max,this.mmin,e.mmin),this.mmax=Qh(Math.min,this.mmax,e.mmax)),this):null}toJSON(e){return this.write({},e)}_shiftCM(e=Un(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?I0(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=x4(i.x,e).x),this.spatialReference=new Fe(BE((t.isWGS84?e.altTemplate:null)??e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,s=this.xmin,n=this.xmax;return s>=r&&s<=i&&n>=r&&n<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;const s=r??Un(i);if(s==null)return this;const n=this._getParts(s).map(l=>l.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(s):this.set({xmin:s.valid[0],xmax:s.valid[1]});if(e)return this._shiftCM(s);if(t)return n;let o=!0,a=!0;return n.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:n.map(l=>{const u=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const c=(l.zmax-l.zmin)/2;for(let p=0;p<u.length;p++)u[p].push(c)}if(a){const c=(l.mmax-l.mmin)/2;for(let p=0;p<u.length;p++)u[p].push(c)}return u}),hasZ:o,hasM:a,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:s,ymax:n,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let c;e=e||Un(o);const[p,f]=e.valid;c=x4(this.xmin,e);const m=c.x,g=c.frameId;c=x4(this.xmax,e);const b=c.x,w=c.frameId,S=m===b&&a>0;if(a>2*f){const M=new ma(l<u?m:b,s,f,n,o),x=new ma(p,s,l<u?b:m,n,o),_=new ma(0,s,f,n,o),I=new ma(p,s,0,n,o),E=[],A=[];M.contains(_)&&E.push(g),M.contains(I)&&A.push(g),x.contains(_)&&E.push(w),x.contains(I)&&A.push(w);for(let C=g+1;C<w;C++)E.push(C),A.push(C);t.push({extent:M,frameIds:[g]},{extent:x,frameIds:[w]},{extent:_,frameIds:E},{extent:I,frameIds:A})}else m>b||S?t.push({extent:new ma(m,s,f,n,o),frameIds:[g]},{extent:new ma(p,s,b,n,o),frameIds:[w]}):t.push({extent:new ma(m,s,b,n,o),frameIds:[g]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const s={};r&&(s.zmin=this.zmin,s.zmax=this.zmax),i&&(s.mmin=this.mmin,s.mmax=this.mmax);for(let n=0;n<t.length;n++)t[n].extent.set(s)}return t}};function x4(e,t){const[r,i]=t.valid,s=2*i;let n,o=0;return e>i?(n=Math.ceil(Math.abs(e-i)/s),e-=n*s,o=n):e<r&&(n=Math.ceil(Math.abs(e-r)/s),e+=n*s,o=-n),{x:e,frameId:o}}h([d({readOnly:!0})],Hi.prototype,"cache",null),h([d({readOnly:!0})],Hi.prototype,"center",null),h([d({readOnly:!0})],Hi.prototype,"extent",null),h([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Hi.prototype,"hasM",null),h([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Hi.prototype,"hasZ",null),h([d({readOnly:!0})],Hi.prototype,"height",null),h([d({readOnly:!0})],Hi.prototype,"width",null),h([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Hi.prototype,"xmin",void 0),h([d({type:Number,json:{write:!0}})],Hi.prototype,"ymin",void 0),h([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Hi.prototype,"mmin",void 0),h([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Hi.prototype,"zmin",void 0),h([d({type:Number,json:{write:!0}})],Hi.prototype,"xmax",void 0),h([d({type:Number,json:{write:!0}})],Hi.prototype,"ymax",void 0),h([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Hi.prototype,"mmax",void 0),h([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Hi.prototype,"zmax",void 0),Hi=ma=h([j("esri.geometry.Extent")],Hi),Hi.prototype.toJSON.isDefaultToJSON=!0;const yt=Hi;let jw;const ame=globalThis.esriConfig?.locale??globalThis.dojoConfig?.locale;function tY(){return ame??globalThis.navigator?.language??"en"}function Ko(){return jw===void 0&&(jw=tY()),jw}function lme(e=Ko()){return/^([a-zA-Z]{2,3})(?:[_-]\w+)*$/.exec(e)?.[1].toLowerCase()}const jM=[];function rY(e){return jM.push(e),or(()=>jM.splice(jM.indexOf(e),1))}const VM=[];function VD(e){return VM.push(e),or(()=>VM.splice(VM.indexOf(e),1))}function ume(){const e=tY();jw!==e&&([...VM].forEach(t=>t(e)),jw=e,[...jM].forEach(t=>t(e)))}globalThis.addEventListener?.("languagechange",ume);let XS;function cme(e){return XS&&!XS.destroyed||(XS=e()),XS}var wO;const hme=new wt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let ya=wO=class extends et{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new wO({categories:this.categories?Z(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r=[];this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let i="";if(this.extent){const o=uA(this.extent,Fe.WGS84);o!=null&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let s=this.query;!this.disableExtraQuery&&e.extraQuery&&(s="("+s+")"+e.extraQuery);const n={categories:r,bbox:i,q:s,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(n.sortField=this.sortField.split(",").map(o=>hme.toJSON(o.trim())).join(","),n.sortOrder=this.sortOrder),{query:{...t,...n}}}};h([d()],ya.prototype,"categories",void 0),h([d()],ya.prototype,"disableExtraQuery",void 0),h([d({type:yt})],ya.prototype,"extent",void 0),h([d()],ya.prototype,"filter",void 0),h([d()],ya.prototype,"num",void 0),h([d()],ya.prototype,"query",void 0),h([d()],ya.prototype,"sortField",void 0),h([d()],ya.prototype,"sortOrder",null),h([d()],ya.prototype,"start",void 0),ya=wO=h([j("esri.portal.PortalQueryParams")],ya);const Pu=ya;var _O;let ki=_O=class extends ue{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.sourceJSON=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t&&this.portal?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.portal?.restUrl;return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal.request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal.request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new K("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new _O({sourceJSON:e});return t.read(e),t}queryItems(e,t){let r=ni(Pu,e);const i=this.portal;return parseFloat(i.currentVersion)>5?(r=r||new Pu,i.queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new Pu,r.query="group:"+this.id+(r.query?" "+r.query:""),i.queryItems(r,t))}_fetchCategorySchemaSet(e,t){const r=this.portal;return r.fetchSelf(r.authMode,!0,t).then(i=>{const s=i.contentCategorySetsGroupQuery;if(s){const n=new Pu({disableExtraQuery:!0,num:1,query:s});return r.queryGroups(n,t)}throw new K("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(i=>{if(i.total){const s=i.results[0],n=new Pu({num:1,query:`typekeywords:"${e}"`});return s.queryItems(n,t)}throw new K("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(i=>i.total?i.results[0].fetchData("json",t).then(s=>{const n=s?.categorySchema;return n?.length?n:[]}):[])}};h([d()],ki.prototype,"access",void 0),h([d({type:Date})],ki.prototype,"created",void 0),h([d()],ki.prototype,"description",void 0),h([d()],ki.prototype,"id",void 0),h([d()],ki.prototype,"isInvitationOnly",void 0),h([d({type:Date})],ki.prototype,"modified",void 0),h([d()],ki.prototype,"owner",void 0),h([d()],ki.prototype,"portal",void 0),h([d()],ki.prototype,"snippet",void 0),h([d()],ki.prototype,"sortField",void 0),h([d()],ki.prototype,"sortOrder",void 0),h([d()],ki.prototype,"sourceJSON",void 0),h([d()],ki.prototype,"tags",void 0),h([d()],ki.prototype,"thumbnail",void 0),h([d({readOnly:!0})],ki.prototype,"thumbnailUrl",null),h([d()],ki.prototype,"title",void 0),h([d({readOnly:!0})],ki.prototype,"url",null),ki=_O=h([j("esri.portal.PortalGroup")],ki);const SO=ki;let Df=class extends et{constructor(t){super(t),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};h([d()],Df.prototype,"nextQueryParams",void 0),h([d()],Df.prototype,"queryParams",void 0),h([d()],Df.prototype,"results",void 0),h([d()],Df.prototype,"total",void 0),Df=h([j("esri.portal.PortalQueryResult")],Df);const pme=Df;let $c=class extends ue{constructor(t){super(t),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const t=this.portal?.restUrl;return t?`${t}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new K("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};h([d({type:Date})],$c.prototype,"created",void 0),h([d()],$c.prototype,"id",void 0),h([d()],$c.prototype,"portal",void 0),h([d()],$c.prototype,"title",void 0),h([d({readOnly:!0})],$c.prototype,"url",null),h([d()],$c.prototype,"username",void 0),$c=h([j("esri.portal.PortalFolder")],$c);const dme=$c;var xO;let wr=xO=class extends ue{constructor(e){super(e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userLicenseTypeId=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal.normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.portal?.restUrl;return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.portal?.restUrl;return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e?.data,i=e?.folder,s={method:"post"};t&&(s.query=t.createPostQuery(),r!=null&&(typeof r=="string"?s.query.text=r:typeof r=="object"&&(s.query.text=JSON.stringify(r))));let n=this.userContentUrl;return i&&(n+="/"+(typeof i=="string"?i:i.id)),this.portal.request(n+"/addItem",s).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}async deleteItem(e,t=!1){let r=this.userContentUrl;e.ownerFolder&&(r+="/"+e.ownerFolder);const i=t?{permanentDelete:!0}:{};await this.portal.request(r+`/items/${e.id}/delete`,{method:"post",query:i}),e.id=null,e.portal=null}async deleteItems(e,t=!1){e=e.concat();const r=this.userContentUrl+"/deleteItems",i=[],s=e.map(n=>n.id);if(s.length){const n={method:"post",query:{items:s.join(","),permanentDelete:t}},o=await this.portal.request(r,n);for(const a of o.results){const l=e.find(p=>a.itemId===p.id),u=a.success;let c=null;u?(l.id=null,l.portal=null):a.error&&(c=new K("portal:delete-item-failed",a.error.message,a.error)),i.push({item:l,success:u,error:c})}}return i}fetchFolders(){const e={query:{num:1}};return this.portal.request(this.userContentUrl??"",e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const s=dme.fromJSON(i);return s.portal=this.portal,s}):[],r})}fetchGroups(){return this.portal.request(this.url??"").then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=SO.fromJSON(r);return i.portal=this.portal,i}):[],t})}async fetchItems(e){e??={};let t=this.userContentUrl??"";e.folder&&(t+="/"+e.folder.id);const{default:r}=await fe(()=>Promise.resolve().then(()=>nY),void 0,import.meta.url),i={folders:!1,inRecycleBin:!!e.inRecycleBin||null,foldersContent:!(e.folder||!e.includeSubfolderItems)||null,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"},s=await this.portal.request(t,{query:i});let n;return s?.items?(n=s.items.map(o=>{const a=r.fromJSON(o);return a.portal=this.portal,a}),await Promise.all(n.map(o=>o.load())),{items:n,nextStart:s.nextStart,total:s.total}):{items:[],nextStart:-1,total:0}}fetchTags(){return this.portal.request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new SO({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new K("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}async restoreItem(e,t){const r=this.userContentUrl,i=t?{folderID:typeof t=="string"?t:t.id}:null;await this.portal.request(r+`/items/${e.id}/restore`,{method:"post",query:i})}toJSON(){throw new K("internal:not-yet-implemented","PortalUser.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new xO({sourceJSON:e});return t.read(e),t}};h([d()],wr.prototype,"access",void 0),h([d({type:Date})],wr.prototype,"created",void 0),h([d()],wr.prototype,"culture",void 0),h([d()],wr.prototype,"description",void 0),h([d()],wr.prototype,"email",void 0),h([d()],wr.prototype,"favGroupId",void 0),h([d()],wr.prototype,"fullName",void 0),h([d({type:Date})],wr.prototype,"modified",void 0),h([d()],wr.prototype,"orgId",void 0),h([d()],wr.prototype,"portal",void 0),h([d()],wr.prototype,"preferredView",void 0),h([d()],wr.prototype,"privileges",void 0),h([d()],wr.prototype,"region",void 0),h([d()],wr.prototype,"role",void 0),h([d()],wr.prototype,"roleId",void 0),h([d()],wr.prototype,"sourceJSON",void 0),h([d()],wr.prototype,"thumbnail",void 0),h([d({readOnly:!0})],wr.prototype,"thumbnailUrl",null),h([d()],wr.prototype,"units",void 0),h([d({readOnly:!0})],wr.prototype,"userContentUrl",null),h([d({readOnly:!0})],wr.prototype,"url",null),h([d()],wr.prototype,"username",void 0),h([d()],wr.prototype,"userLicenseTypeId",void 0),h([d()],wr.prototype,"userType",void 0),wr=xO=h([j("esri.portal.PortalUser")],wr);const UD=wr;var Co;let QS;const aj={PortalGroup:()=>Promise.resolve({default:SO}),PortalItem:()=>fe(()=>Promise.resolve().then(()=>nY),void 0,import.meta.url),PortalUser:()=>Promise.resolve({default:UD})};let Ce=Co=class extends U2(Yu){constructor(e){super(e),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.basemapGalleryGroupQuery3D=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.layoutGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.recycleBinEnabled=!1,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Vt.portalUrl,this.urlKey=null,this.user=null,this.use3dBasemaps=!0,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){lj.unregister(this),this.defaultBasemap=jr(this.defaultBasemap),this.defaultDevBasemap=jr(this.defaultDevBasemap),this.defaultVectorBasemap=jr(this.defaultVectorBasemap),this._esriIdCredentialCreateHandle=Kr(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Vt.request.trustedServers.includes(t)||Vt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=this.user?.orgId,t=!e||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=UD.fromJSON(e),t.portal=this),t}load(e){const t=fe(()=>Promise.resolve().then(()=>Gme),void 0,import.meta.url).then(({default:r})=>{dr(e),QS=r}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,e)).then(r=>{if(sr){const i=sr;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==Co.AUTH_MODE_AUTO&&this.authMode!==Co.AUTH_MODE_NO_PROMPT||(this._esriIdCredentialCreateHandle?.remove(),this._esriIdCredentialCreateHandle=i.on("credential-create",fme(new WeakRef(this))),lj.register(this,this._esriIdCredentialCreateHandle,this))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await fe(async()=>{const{default:r}=await import("./ElevationLayer-btH1gs8g.js");return{default:r}},__vite__mapDeps([5,1]),import.meta.url)).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async fetchBasemaps(e,t){const r=await this._fetchBasemaps(e,t);if(t?.include3d===!0&&this.use3dBasemaps!==!1){const i=await this._fetchBasemaps3D(e,t);r.unshift(...i)}return r}fetchCategorySchema(e){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):Ul(e)?Promise.reject(ii()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new Pu({num:100,sortField:"title"});if(t?.length){const i=[];for(const s of t)i.push(`(title:"${s.title}" AND owner:${s.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(s=>s.results)}return Ul(e)?Promise.reject(ii()):Promise.resolve([])}fetchRegions(e){const t=this.user?.culture||this.culture||Ko();return this.request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}fetchSettings(e){const t=this.user?.culture||this.culture||Ko();return this.request(this.restUrl+"/portals/self/settings",{...e,query:{culture:t}})}static getDefault(){return cme(()=>new Co)}queryGroups(e,t){return this.queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this.queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this.queryPortal("/community/users",e,"PortalUser",t)}fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",s={authMode:e,query:{culture:Ko().toLowerCase()},withCredentials:!0,...r};return s.authMode==="auto"&&(s.authMode="no-prompt"),t&&(s.query.default=!0),this.request(i,s)}queryPortal(e,t,r,i){const s=ni(Pu,t),n=o=>this.request(this.restUrl+e,{...s.toRequestOptions(this),...i}).then(a=>{const l=s.clone();return l.start=a.nextStart,new pme({nextQueryParams:l,queryParams:s,total:a.total,results:Co._resultsToTypedArray(o,{portal:this},a,i)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(lo(l),a)));return r&&aj[r]?aj[r]().then(({default:o})=>(dr(i),n(o))):n()}signIn(){if(this.authMode===Co.AUTH_MODE_ANONYMOUS||this.authMode===Co.AUTH_MODE_NO_PROMPT&&!sr)return Promise.reject(new K("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this.fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this.fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return sr?sr.getCredential(this.restUrl,{prompt:this.authMode!==Co.AUTH_MODE_NO_PROMPT}).then(t=>e(t)):e(this.credential)}normalizeUrl(e){const t=this.credential?.token;return this._normalizeSSL(t?e+(e.includes("?")?"&":"?")+"token="+t:e)}requestToTypedArray(e,t,r){return this.request(e,t).then(i=>{const s=Co._resultsToTypedArray(r,{portal:this},i);return Promise.all(s.map(n=>typeof n.when=="function"?n.when():i)).then(()=>s,()=>s)})}request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===Co.AUTH_MODE_ANONYMOUS||this.authMode===Co.AUTH_MODE_NO_PROMPT?this.authMode:"auto",body:s=null,cacheBust:n=!1,method:o="auto",responseType:a="json",signal:l}=t,u={authMode:i,body:s,cacheBust:n,method:o,query:r,responseType:a,timeout:0,signal:l};return t.withCredentials&&(u.withCredentials=!0),Re(this._normalizeSSL(e),u).then(c=>c.data)}toJSON(){throw new K("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Co({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new K("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}async _fetchBasemaps(e,t){const r=new Pu;r.query=e||(Vt.apiKey&&TZ(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0;const i=await this.queryGroups(r,t);if(!i.total)return[];const s=i.results[0];r.num=100,r.query='type:"Web Map" -type:"Web Application"',r.sortField=s.sortField||"name",r.sortOrder=s.sortOrder||"desc";const n=await s.queryItems(r,t);return n.total?n.results.filter(o=>o.type==="Web Map").map(o=>new QS({portalItem:o})):[]}async _fetchBasemaps3D(e,t){const r=e||this.basemapGalleryGroupQuery3D;if(!r)return[];const i=new Pu({query:r,disableExtraQuery:!0}),s=await this.queryGroups(i,t);if(!s.total)return[];const n=s.results[0];i.num=100,i.query='type:"Web Scene"',i.sortField=n.sortField||"name",i.sortOrder=n.sortOrder||"desc";const o=await n.queryItems(i,t);return o.total?o.results.filter(a=>a.type==="Web Scene").map(a=>new QS({portalItem:a})):[]}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(e){if(e){const t=QS.fromJSON(e);return t.portalItem={portal:this},t}return null}static _resultsToTypedArray(e,t,r,i){let s;if(r){const n=i!=null?i.signal:null;s=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(s=s.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(n),a}))}else s=[];return s}};Ce.AUTH_MODE_ANONYMOUS="anonymous",Ce.AUTH_MODE_AUTO="auto",Ce.AUTH_MODE_IMMEDIATE="immediate",Ce.AUTH_MODE_NO_PROMPT="no-prompt",h([d()],Ce.prototype,"access",void 0),h([d()],Ce.prototype,"allSSL",void 0),h([d()],Ce.prototype,"authMode",void 0),h([d()],Ce.prototype,"authorizedCrossOriginDomains",void 0),h([pe("authorizedCrossOriginDomains")],Ce.prototype,"readAuthorizedCrossOriginDomains",null),h([d()],Ce.prototype,"basemapGalleryGroupQuery",void 0),h([d({json:{name:"3DBasemapGalleryGroupQuery"}})],Ce.prototype,"basemapGalleryGroupQuery3D",void 0),h([d()],Ce.prototype,"bingKey",void 0),h([d()],Ce.prototype,"canListApps",void 0),h([d()],Ce.prototype,"canListData",void 0),h([d()],Ce.prototype,"canListPreProvisionedItems",void 0),h([d()],Ce.prototype,"canProvisionDirectPurchase",void 0),h([d()],Ce.prototype,"canSearchPublic",void 0),h([d()],Ce.prototype,"canShareBingPublic",void 0),h([d()],Ce.prototype,"canSharePublic",void 0),h([d()],Ce.prototype,"canSignInArcGIS",void 0),h([d()],Ce.prototype,"canSignInIDP",void 0),h([d()],Ce.prototype,"colorSetsGroupQuery",void 0),h([d()],Ce.prototype,"commentsEnabled",void 0),h([d({type:Date})],Ce.prototype,"created",void 0),h([d()],Ce.prototype,"credential",void 0),h([d()],Ce.prototype,"culture",void 0),h([d()],Ce.prototype,"currentVersion",void 0),h([d()],Ce.prototype,"customBaseUrl",void 0),h([d()],Ce.prototype,"defaultBasemap",void 0),h([pe("defaultBasemap")],Ce.prototype,"readDefaultBasemap",null),h([d()],Ce.prototype,"defaultDevBasemap",void 0),h([pe("defaultDevBasemap")],Ce.prototype,"readDefaultDevBasemap",null),h([d({type:yt})],Ce.prototype,"defaultExtent",void 0),h([d()],Ce.prototype,"defaultVectorBasemap",void 0),h([pe("defaultVectorBasemap")],Ce.prototype,"readDefaultVectorBasemap",null),h([d()],Ce.prototype,"description",void 0),h([d()],Ce.prototype,"devBasemapGalleryGroupQuery",void 0),h([d()],Ce.prototype,"eueiEnabled",void 0),h([d({readOnly:!0})],Ce.prototype,"extraQuery",null),h([d()],Ce.prototype,"featuredGroups",void 0),h([d()],Ce.prototype,"featuredItemsGroupQuery",void 0),h([d()],Ce.prototype,"galleryTemplatesGroupQuery",void 0),h([d()],Ce.prototype,"layoutGroupQuery",void 0),h([d()],Ce.prototype,"livingAtlasGroupQuery",void 0),h([d()],Ce.prototype,"hasCategorySchema",void 0),h([d()],Ce.prototype,"helpBase",void 0),h([d()],Ce.prototype,"helperServices",void 0),h([d()],Ce.prototype,"helpMap",void 0),h([d()],Ce.prototype,"homePageFeaturedContent",void 0),h([d()],Ce.prototype,"homePageFeaturedContentCount",void 0),h([d()],Ce.prototype,"httpPort",void 0),h([d()],Ce.prototype,"httpsPort",void 0),h([d()],Ce.prototype,"id",void 0),h([d()],Ce.prototype,"ipCntryCode",void 0),h([d({readOnly:!0})],Ce.prototype,"isOrganization",null),h([d()],Ce.prototype,"isPortal",void 0),h([d()],Ce.prototype,"isReadOnly",void 0),h([d({readOnly:!0})],Ce.prototype,"itemPageUrl",null),h([d()],Ce.prototype,"layerTemplatesGroupQuery",void 0),h([d()],Ce.prototype,"maxTokenExpirationMinutes",void 0),h([d({type:Date})],Ce.prototype,"modified",void 0),h([d()],Ce.prototype,"name",void 0),h([d()],Ce.prototype,"portalHostname",void 0),h([d()],Ce.prototype,"portalMode",void 0),h([d()],Ce.prototype,"portalProperties",void 0),h([d()],Ce.prototype,"region",void 0),h([d()],Ce.prototype,"recycleBinEnabled",void 0),h([d({readOnly:!0})],Ce.prototype,"restUrl",null),h([d()],Ce.prototype,"rotatorPanels",void 0),h([d()],Ce.prototype,"showHomePageDescription",void 0),h([d()],Ce.prototype,"sourceJSON",void 0),h([d()],Ce.prototype,"staticImagesUrl",void 0),h([d({json:{name:"2DStylesGroupQuery"}})],Ce.prototype,"stylesGroupQuery2d",void 0),h([d({json:{name:"stylesGroupQuery"}})],Ce.prototype,"stylesGroupQuery3d",void 0),h([d()],Ce.prototype,"supportsHostedServices",void 0),h([d()],Ce.prototype,"symbolSetsGroupQuery",void 0),h([d()],Ce.prototype,"templatesGroupQuery",void 0),h([d()],Ce.prototype,"thumbnail",void 0),h([d({readOnly:!0})],Ce.prototype,"thumbnailUrl",null),h([d()],Ce.prototype,"units",void 0),h([d()],Ce.prototype,"url",void 0),h([d()],Ce.prototype,"urlKey",void 0),h([pe("urlKey")],Ce.prototype,"readUrlKey",null),h([d()],Ce.prototype,"user",void 0),h([pe("user")],Ce.prototype,"readUser",null),h([d()],Ce.prototype,"use3dBasemaps",void 0),h([d()],Ce.prototype,"useStandardizedQuery",void 0),h([d()],Ce.prototype,"useVectorBasemaps",void 0),h([d()],Ce.prototype,"vectorBasemapGalleryGroupQuery",void 0),Ce=Co=h([j("esri.portal.Portal")],Ce);const xo=Ce,lj=new FinalizationRegistry(e=>{e.remove()});function fme(e){const t=sr;return()=>{const r=e.deref();r&&t.findCredential(r.restUrl)&&r.signIn().catch(()=>{})}}let Cc=class extends et{constructor(t){super(t),this.portalItem=null}normalizeCtorArgs(t){return t?.portalItem&&t.path?{...t,path:uj(t.path,t.portalItem)}:t}set path(t){t!=null&&Yo(t)?be.getLogger(this).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",t)}_castPath(t){return uj(t,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get cdnUrl(){return this.portalItem&&this.path?`${this.portalItem.itemCdnUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(t="json",r){const i=this.cdnUrl;if(i==null)throw new K("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(i,{responseType:t,query:{token:this.portalItem.apiKey},signal:r?.signal})}async update(t,r){const{addOrUpdateResources:i}=await fe(()=>import("./resourceUtils-DgSXkoxr.js"),__vite__mapDeps([6,1]),import.meta.url);return await i(this.portalItem,[{resource:this,content:t,compress:r?.compress,access:r?.access}],"update",r),this}hasPath(){return this.path!=null}};function uj(e,t){return e==null?e:(e=e.replace(/^\/+/,""),t!=null&&Yo(e)&&(e=TD(e,t.itemUrl)),e?.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}h([d()],Cc.prototype,"portalItem",void 0),h([d({type:String,value:null})],Cc.prototype,"path",null),h([Zt("path")],Cc.prototype,"_castPath",null),h([d({type:String,readOnly:!0})],Cc.prototype,"url",null),h([d({type:String,readOnly:!0})],Cc.prototype,"cdnUrl",null),h([d({type:String,readOnly:!0})],Cc.prototype,"itemRelativeUrl",null),Cc=h([j("esri.portal.PortalItemResource")],Cc);const mme=Cc;let Ib=class extends et{constructor(t){super(t),this.created=null,this.rating=null}};h([d()],Ib.prototype,"created",void 0),h([d()],Ib.prototype,"rating",void 0),Ib=h([j("esri.portal.PortalRating")],Ib);const M4=Ib;function h1(e,t){const r=t?.url?.path;if(e&&r&&(e=Ho(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const i=TD(e,t.portalItem.itemUrl);i!=null&&yme.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return(e=MO(e,t?.portal))&&hA.test(e)?GD(e):e}function B2(e,t,r=U_.YES){if((e=e&&hA.test(e)?sY(e):e)==null)return e;!Yo(e)&&t?.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let i=Ho(e);if(t){const s=t.verifyItemRelativeUrls?.rootPath||t.url?.path;if(s){const n=MO(s,t.portal),o=MO(i,t.portal);i=TD(o,n,n),i!=null&&i!==o&&i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=iY(i,t?.portal),Yo(i)&&(i=La(i)),t?.resources&&t?.portalItem&&!Yo(i)&&!Gy(i)&&r===U_.YES&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i),compress:!1}),i}function zD(e,t,r){return h1(e,r)}function My(e,t,r,i){const s=B2(e,i);s!==void 0&&(t[r]=s)}const hA=/\/items\/([^/]+)\/resources\/(.*)/,yme=/^\.\/resources\//;function gme(e){return(e?.match(hA)??null)?.[1]??null}function vme(e){const t=e?.match(hA)??null;if(t==null)return null;const r=t[2],i=r.lastIndexOf("/");if(i===-1){const{path:o,extension:a}=B7(r);return{prefix:null,filename:o,extension:a}}const{path:s,extension:n}=B7(r.slice(i+1));return{prefix:r.slice(0,i),filename:s,extension:n}}function iY(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?aO(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function MO(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`,i=_D();return Sv(i,`${i.scheme}://${r}`)?aO(e,t.portalHostname,r):aO(e,r,t.portalHostname)}function GD(e){if(!e)return e||null;let t=e;return t&&sr&&!sr.findCredential(t)&&(t=dZ(t),t=t.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),t=t.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),t=t.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),t}function sY(e){if(!e)return e||null;let t=e;return t=t.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),t=t.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),t=t.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),t&&sr&&!sr.findCredential(t)&&(t=dZ(t)),t}var U_;(function(e){e[e.YES=0]="YES",e[e.NO=1]="NO"})(U_||(U_={}));const krt=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return U_},ensureMainOnlineDomain:iY,fromCDNUrl:sY,fromJSON:h1,itemIdFromResourceUrl:gme,prefixAndFilenameFromResourceUrl:vme,read:zD,toCDNUrl:GD,toJSON:B2,write:My},Symbol.toStringTag,{value:"Module"}));var Ff;const bme=new Set(["3DTiles Service","CSV","Feature Collection","Feature Service","Feed","GeoJson","Group Layer","Image Service","KML","Map Service","Media Layer","Scene Service","Stream Service","Vector Tile Service","WFS","WMS","WMTS"]),wme=new Set(["KML","GeoJson","CSV"]);let Ot=Ff=class extends U2(Yu){static from(e){return zr(Ff,e)}constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.includes("Table")?"Table":t.includes("Route Layer")?"Route Layer":t.includes("Markup")?"Markup":"Feature Layer":e==="Image Service"?r=t.includes("Elevation 3D Layer")?"Elevation Layer":t.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Video Service"?r="Video Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"?r=t.includes("Web Tool")?"Tool":"Geoprocessing Service":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Geocoding Service"?r="Locator":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.includes("Spatiotemporal")||!t.includes("Hosted Service")&&!t.includes("Tiled")||t.includes("Relational")?"Map Image Layer":"Tile Layer":e?.toLowerCase().includes("add in")?r=e.replaceAll(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="Raster function template"?r="Raster Function Template":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.includes("configurableApp")?r="Instant App":e==="Insights Page"?r="Insights Report":e==="Excalibur Imagery Project"?r="Excalibur Project":e==="3DTiles Service"?r="3D tiles layer":e==="3DTiles Package"&&(r="3D tiles package"),r}readExtent(e){return e&&e.length?new yt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type?.toLowerCase()||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let s,n=!1,o=!1,a=!1,l=!1,u=!1,c=!1,p=!1,f=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(n=t.includes("Hosted Service"),e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.includes("Table"),a=t.includes("Route Layer"),l=t.includes("Markup"),u=t.includes("Spatiotemporal"),c=t.includes("UtilityNetwork"),s=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":c?"utilitynetwork":n?"featureshosted":"features"):e==="map service"||e==="wms"||e==="wmts"?(u=t.includes("Spatiotemporal"),p=t.includes("Relational"),s=u||p?"mapimages":n||t.includes("Tiled")||e==="wmts"?"maptiles":"mapimages"):s=e==="scene service"?t.includes("Line")?"sceneweblayerline":t.includes("3DObject")?"sceneweblayermultipatch":t.includes("Point")?"sceneweblayerpoint":t.includes("IntegratedMesh")?"sceneweblayermesh":t.includes("PointCloud")?"sceneweblayerpointcloud":t.includes("Polygon")?"sceneweblayerpolygon":t.includes("Building")?"sceneweblayerbuilding":t.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.includes("Elevation 3D Layer")?"elevationlayer":t.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="video service"?t.includes("Live Stream")?"livestreamvideolayer":"videolayer":e==="geoprocessing service"?t.includes("Web Tool")?"tool":"layers":e==="geodata service"?"geodataservice":e==="3dtiles service"?t.includes("3DObject")?"3dobjecttileslayer":t.includes("IntegratedMesh")?"integratedmeshtileslayer":"3dtileslayer":"layers"):e==="web map"||e==="cityengine web scene"?s="maps":e==="web scene"?s=t.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.includes("configurableApp")?s="instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?s="apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.includes("ArcGIS Pro")||e==="explorer map"&&t.indexOf("Explorer Document")?s="mapsgray":e==="service definition"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="netcdf"||e==="administrative report"?s="datafiles":e==="360 vr experience"?s="360vr":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?s="appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?s="addindesktop":e==="pdf"?s="pdf":e==="microsoft word"?s="word":e==="microsoft excel"?s="excel":e==="microsoft powerpoint"?s="ppt":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="workflow manager package"||e==="explorer map"&&t.includes("Explorer Mapping Application")||t.includes("Document")?s="datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?s="toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?s="layersgray":e==="analysis model"?s="analysismodel":e==="scene package"?s="scenepackage":e==="3dtiles package"?s="3dtileslayerpackage":e==="3dtiles service"?s="3dtileslayer":e==="mobile scene package"?s="mobilescenepackage":e==="tile package"||e==="compact tile package"?s="tilepackage":e==="task file"?s="taskfile":e==="report template"?s="report-template":e==="statistical data collection"?s="statisticaldatacollection":e==="insights workbook"?s="workbook":e==="insights model"?s="insightsmodel":e==="insights page"?s="insightspage":e==="insights theme"?s="insightstheme":e==="hub initiative"?s="hubinitiative":e==="hub page"?s="hubpage":e==="hub site application"?s="hubsite":e==="hub event"?s="hubevent":e==="hub project"?s="hubproject":e==="relational database connection"?s="relationaldatabaseconnection":e==="big data file share"?s="datastorecollection":e==="image collection"?s="imagecollection":e==="desktop style"?s="desktopstyle":e==="style"?s=t.includes("Dictionary")?"dictionarystyle":"style":e==="dashboard"?s="dashboard":e==="raster function template"?s="rasterprocessingtemplate":e==="vector tile package"?s="vectortilepackage":e==="ortho mapping project"?s="orthomappingproject":e==="ortho mapping template"?s="orthomappingtemplate":e==="solution"?s="solutions":e==="geopackage"?s="geopackage":e==="deep learning package"?s="deeplearningpackage":e==="real time analytic"?s="realtimeanalytics":e==="big data analytic"?s="bigdataanalytics":e==="feed"?s="feed":e==="excalibur imagery project"?s="excaliburimageryproject":e==="notebook"?s="notebook":e==="storymap"?s="storymap":e==="survey123 add in"?s="survey123addin":e==="mission"?s="mission":e==="mission report"?s="missionreport":e==="mission template"?s="missiontemplate":e==="quickcapture project"?s="quickcaptureproject":e==="pro report"?s="proreport":e==="pro report template"?s="proreporttemplate":e==="urban model"?s="urbanmodel":e==="web experience"?s="experiencebuilder":e==="web experience template"?s="webexperiencetemplate":e==="experience builder widget"?s="experiencebuilderwidget":e==="experience builder widget package"?s="experiencebuilderwidgetpackage":e==="workflow"?s="workflow":e==="kernel gateway connection"?s="kernelgatewayconnection":e==="insights script"?s="insightsscript":e==="hub initiative template"?s="hubinitiativetemplate":e==="storymap theme"?s="storymaptheme":e==="knowledge graph"?s="knowledgegraph":e==="knowledge graph layer"?s="knowledgegraphlayer":e==="knowledge studio project"?s="knowledgestudio":e==="native application"?s="nativeapp":e==="native application installer"?s="nativeappinstaller":e==="web link chart"?s="linkchart":e==="knowledge graph web investigation"?s="investigation":e==="ogcfeatureserver"?s="features":e==="pro project"?s="proproject":e==="insights workbook package"?s="insightsworkbookpackage":e==="apache parquet"?s="apacheparquet":e==="notebook code snippet library"?s="notebookcodesnippets":e==="suitability model"?s="suitabilitymodel":e==="esri classifier definition"?s="classifierdefinition":e==="esri classification schema"?s="classificationschema":e==="insights data engineering workbook"?s="dataengineeringworkbook":e==="insights data engineering model"?s="dataengineeringmodel":e==="deep learning studio project"?s="deeplearningproject":e==="discussion"?s="discussion":e==="allsource project"?s="allsourceproject":e==="api key"?s="apikey":e==="data pipeline"?s="datapipelines":e==="group layer"?(f=t.includes("Map"),s=f?"layergroup2d":"layergroup"):s=e==="media layer"?"onlinemedialayer":e==="form"?t.includes("Survey123")?"survey":"datafilesgray":e==="csv"?"csv":e==="image"?"image":"maps",s?Xt(r+s+i+".png"):null}get isLayer(){return this.type!=null&&bme.has(this.type)}get itemCdnUrl(){return GD(this.itemUrl)}get itemPageUrl(){const e=this.portal?.itemPageUrl;return e&&this.id?`${e}?id=${this.id}`:null}get itemUrl(){const e=this.portal?.restUrl;return e&&this.id?`${e}/content/items/${this.id}`:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal?.normalizeUrl(`${e}/info/${t}?f=json`)??null:null}get userItemUrl(){const e=this.portal?.restUrl;if(!e)return null;const t=this.owner||this.portal?.user?.username;return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){const t=this.portal??(this.portal=xo.getDefault()),r=t.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?t.request(this.itemUrl,{signal:e!=null?e.signal:null,query:{token:this.apiKey}}):{}).then(i=>{this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(r),Promise.resolve(this)}async addRating(e){const t={method:"post",query:{}};return e instanceof M4&&(e=e.rating),e==null||isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal?(await this.portal.request(this.itemUrl+"/addRating",t),new M4({rating:e,created:new Date})):null}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:Z(this.applicationProxies),avgRating:this.avgRating,categories:Z(this.categories),created:Z(this.created),culture:this.culture,description:this.description,extent:Z(this.extent),groupCategories:Z(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:Z(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:Z(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Z(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Z(this.typeKeywords),url:this.url};this.loaded&&(e.loadStatus="loaded");const t=new Ff({sourceJSON:this.sourceJSON}).set(e);return t._set("isOrgItem",this.isOrgItem),t}createPostQuery(){const e=this.toJSON();for(const r of["tags","typeKeywords","categories"])e[r]=e[r]?.join(", ");const{extent:t}=e;return t&&(e.extent=JSON.stringify(t)),e}async deleteRating(){await this.portal.request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(e="json",t){return this.portal.request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}async fetchRating(e){const t=await this.portal.request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e});return t.rating!=null?(t.created=new Date(t.created),new M4(t)):null}fetchRelatedItems(e,t){return this.portal.requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},Ff)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal.request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e?.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal.request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new K("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(e){if(!this.id)throw new K("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:t,itemUrl:r}=this;await t.signIn();const{copyResources:i,folder:s,tags:n,title:o}=e||{},a={method:"post",query:{copyPrivateResources:i==="all",folder:typeof s=="string"?s:s?.id,includeResources:!!i,tags:n?.join(","),title:o}},{itemId:l}=await t.request(`${r}/copy`,a);return new Ff({id:l,portal:t})}updateThumbnail(e){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")Gy(t)?i.query={data:t}:i.query={url:Ho(t)},r!=null&&(i.query.filename=r);else{const s=new FormData;r!=null?s.append("file",t,r):s.append("file",t),i.body=s}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new K("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){const{fetchResources:r}=await fe(()=>import("./resourceUtils-DgSXkoxr.js"),__vite__mapDeps([6,1]),import.meta.url);return r(this,e,t)}async addResource(e,t,r){const{addOrUpdateResources:i}=await fe(()=>import("./resourceUtils-DgSXkoxr.js"),__vite__mapDeps([6,1]),import.meta.url);return e.portalItem=this,await i(this,[{resource:e,content:t,compress:r?.compress,access:r?.access}],"add",r),e}async removeResource(e,t){const{removeResource:r}=await fe(()=>import("./resourceUtils-DgSXkoxr.js"),__vite__mapDeps([6,1]),import.meta.url);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new K("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r(this,e,t)}async removeAllResources(e){const{removeAllResources:t}=await fe(()=>import("./resourceUtils-DgSXkoxr.js"),__vite__mapDeps([6,1]),import.meta.url);return t(this,e)}resourceFromPath(e){return new mme({portalItem:this,path:e})}toJSON(){const e=this.extent,t={accessInformation:this.accessInformation,categories:Z(this.categories),created:this.created?.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified?.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:Z(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:Z(this.typeKeywords),url:this.url};return Yce(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new Ff({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};h([d({type:["private","shared","org","public"]})],Ot.prototype,"access",void 0),h([d()],Ot.prototype,"accessInformation",void 0),h([d({type:String})],Ot.prototype,"apiKey",void 0),h([d({json:{read:{source:"appProxies"}}})],Ot.prototype,"applicationProxies",void 0),h([d()],Ot.prototype,"avgRating",void 0),h([d()],Ot.prototype,"categories",void 0),h([d({type:Date})],Ot.prototype,"created",void 0),h([d()],Ot.prototype,"culture",void 0),h([d()],Ot.prototype,"description",void 0),h([d({readOnly:!0})],Ot.prototype,"displayName",null),h([d({type:yt})],Ot.prototype,"extent",void 0),h([pe("extent")],Ot.prototype,"readExtent",null),h([d()],Ot.prototype,"groupCategories",void 0),h([d({readOnly:!0})],Ot.prototype,"iconUrl",null),h([d()],Ot.prototype,"id",void 0),h([d({readOnly:!0})],Ot.prototype,"isLayer",null),h([d({type:Boolean,readOnly:!0})],Ot.prototype,"isOrgItem",void 0),h([d()],Ot.prototype,"itemControl",void 0),h([d({readOnly:!0})],Ot.prototype,"itemPageUrl",null),h([d({readOnly:!0})],Ot.prototype,"itemUrl",null),h([d()],Ot.prototype,"licenseInfo",void 0),h([d({type:Date})],Ot.prototype,"modified",void 0),h([d()],Ot.prototype,"name",void 0),h([d()],Ot.prototype,"numComments",void 0),h([d()],Ot.prototype,"numRatings",void 0),h([d()],Ot.prototype,"numViews",void 0),h([d()],Ot.prototype,"owner",void 0),h([d()],Ot.prototype,"ownerFolder",void 0),h([d({type:xo})],Ot.prototype,"portal",void 0),h([d()],Ot.prototype,"screenshots",void 0),h([d()],Ot.prototype,"size",void 0),h([d()],Ot.prototype,"snippet",void 0),h([d()],Ot.prototype,"sourceJSON",void 0),h([d({type:String})],Ot.prototype,"sourceUrl",void 0),h([d({type:String})],Ot.prototype,"spatialReference",void 0),h([d()],Ot.prototype,"tags",void 0),h([d()],Ot.prototype,"thumbnail",void 0),h([d({readOnly:!0})],Ot.prototype,"thumbnailUrl",null),h([d()],Ot.prototype,"title",void 0),h([d()],Ot.prototype,"type",void 0),h([d()],Ot.prototype,"typeKeywords",void 0),h([d({type:String,json:{read(e,t){if(wme.has(t.type)){const r=this.portal?.restUrl;e||=r&&this.id?`${r}/content/items/${this.id}/data`:null}return e}}})],Ot.prototype,"url",void 0),h([d({readOnly:!0})],Ot.prototype,"userItemUrl",null),Ot=Ff=h([j("esri.portal.PortalItem")],Ot);const J0=Ot,nY=Object.freeze(Object.defineProperty({__proto__:null,default:J0},Symbol.toStringTag,{value:"Module"})),cj=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,_me={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function hj(e){return e in _me}const Eb=[],Z0=new Map;function pj(e){for(const t of Z0.keys())aY(e.pattern,t)&&Z0.delete(t)}function Sme(e){return Eb.includes(e)||(pj(e),Eb.unshift(e)),or(()=>{const t=Eb.indexOf(e);t>-1&&(Eb.splice(t,1),pj(e))})}async function oY(e){const t=Ko();Z0.has(e)||Z0.set(e,Mme(e,t));const r=Z0.get(e);return r&&await Tme.add(r),r}function xme(e){if(!cj.test(e))return null;const t=cj.exec(e);if(t===null)return null;const[,r,i]=t,s=r+(i?"-"+i.toUpperCase():"");return hj(s)?s:hj(r)?r:null}async function Mme(e,t){const r=[];for(const i of Eb)if(aY(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(s){r.push(s)}throw r.length?new K("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new K("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function aY(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}VD(()=>{Z0.clear()});const Tme=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=ia())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function Ime(e){if(!e)return;const t=e.includes("-vector")?e.slice(0,e.indexOf("-vector")):e.includes("-3d")?e.slice(0,e.indexOf("-3d")):e,r=await oY("esri/t9n/basemaps");return r[e]||r[t]}const TO={satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get"dark-gray"(){return{...this["dark-gray-vector"],id:"dark-gray"}},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},get gray(){return{...this["gray-vector"],id:"gray"}},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},get streets(){return{...this["streets-vector"],id:"streets"}},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},get topo(){return{...this["topo-vector"],id:"topo"}},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Xt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"topo-3d":{id:"topo-3d",is3d:!0,get thumbnailUrl(){return Xt("esri/images/basemap/topo-3d.png")},baseMapLayers:[{id:"topo-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/1e7d1784d1ef4b79ba6764d0bd6c3150/resources/styles/root.json",layerType:"VectorTileLayer",title:"Topographic",visibility:!0,opacity:1},{id:"topo-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"topo-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-3d":{id:"navigation-3d",is3d:!0,get thumbnailUrl(){return Xt("esri/images/basemap/navigation-3d.jpg")},baseMapLayers:[{id:"navigation-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/ccc904ff872b4144b94934e55e32784b/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation",visibility:!0,opacity:1},{id:"navigation-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-3d":{id:"streets-3d",is3d:!0,get thumbnailUrl(){return Xt("esri/images/basemap/streets-3d.png")},baseMapLayers:[{id:"streets-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/198298c4c64c4cb19de5b46aa00c198d/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"streets-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"streets-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"osm-3d":{id:"osm-3d",is3d:!0,get thumbnailUrl(){return Xt("esri/images/basemap/osm-3d.png")},baseMapLayers:[{id:"osm-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/8628d259c9d14bdc848771c23c513940/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap",visibility:!0,opacity:1},{id:"osm-3d-trees",title:"Trees",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Trees_Thematic_v1/SceneServer",itemId:"f75fef56b2d944fe92ef9f7737b4f953",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"osm-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"gray-3d":{id:"gray-3d",is3d:!0,get thumbnailUrl(){return Xt("esri/images/basemap/gray-3d.png")},baseMapLayers:[{id:"gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/01a14b466345455ba4176d2e6390db92/resources/styles/root.json",layerType:"VectorTileLayer",title:"Streets",visibility:!0,opacity:1},{id:"gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_DarkLabels_v1/SceneServer",itemId:"a84404ad39c64c328d0596e361ec459b",layerType:"ArcGISSceneServiceLayer"},{id:"gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"navigation-dark-3d":{id:"navigation-dark-3d",itemId:"5a1365328b4943f09a54cf5fd1205707",is3d:!0,baseMapLayers:[{id:"navigation-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/451a1777ab3f4bf095fae24a117439d9/resources/styles/root.json",layerType:"VectorTileLayer",title:"Navigation Dark"},{id:"navigation-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"navigation-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"streets-dark-3d":{id:"streets-dark-3d",itemId:"8a4efa2c20484ec9b4557895e65736ff",is3d:!0,baseMapLayers:[{id:"streets-dark-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/bc599b6d741a4ac084b7eea7bf8c5938/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Streets Night (for 3D)"},{id:"streets-dark-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"streets-dark-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"dark-gray-3d":{id:"dark-gray-3d",itemId:"a8b7322a5fe94002bb0f5e0eeb0c5c18",is3d:!0,baseMapLayers:[{id:"dark-gray-3d-base-layer",styleUrl:"https://www.arcgis.com/sharing/rest/content/items/4178f71acb934fb89f169e7d667c20c6/resources/styles/root.json",layerType:"VectorTileLayer",title:"OpenStreetMap Dark Gray Canvas (for 3D)"},{id:"dark-gray-3d-places-and-labels",title:"Places and Labels",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_LightLabels_v1/SceneServer/layers/0",itemId:"f364b70b012a4da5a4b5921e193eac4a",layerType:"ArcGISSceneServiceLayer"},{id:"dark-gray-3d-buildings",title:"Buildings",url:"https://basemaps3d.arcgis.com/arcgis/rest/services/OpenStreetMap3D_Buildings_v1/SceneServer",itemId:"ca0470dbbddb4db28bad74ed39949e25",layerType:"ArcGISSceneServiceLayer"}]},"arcgis-imagery":{get thumbnailUrl(){return Xt("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Xt("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Xt("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Xt("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Xt("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Xt("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Xt("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Xt("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Xt("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Xt("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},Eme=new Set(["ar","bs","ca","hr","cs","da","nl","en","et","fi","fr","de","el","he","hu","id","it","ja","ko","lv","lt","nb","pl","ro","ru","sr","es","sv","th","tr","uk","vi"]);let pp=class extends et{constructor(t){super(t),this.id=null,this.language=null,this.places=null,this.serviceUrl="https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/webmaps",this.worldview=null}getLanguageParamValue(){if(this.language)return this.language;const t=Ko().toLowerCase();switch(t){case"pt-br":return"pt-BR";case"pt-pt":return"pt-PT";case"zh-cn":return"zh-CN";case"zh-hk":return"zh-HK";case"zh-tw":return"zh-TW"}const r=lme(t);return r==="pt"?"pt-BR":r&&Eme.has(r)?r:"global"}};h([d()],pp.prototype,"id",void 0),h([d()],pp.prototype,"language",void 0),h([d()],pp.prototype,"places",void 0),h([d()],pp.prototype,"serviceUrl",void 0),h([d()],pp.prototype,"worldview",void 0),pp=h([j("esri.support.BasemapStyle")],pp);const Ame=pp;function $me(e){return e!=null&&typeof e=="object"&&"type"in e&&e.type==="subtype-group"&&"sublayers"in e}function jf(e){return e?.type==="subtype-sublayer"}const Drt={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function lY(e){const t=e?.type;return t==="building-scene"||t==="integrated-mesh"||t==="point-cloud"||t==="scene"}function pA(e){return e?.type==="feature"&&!e.url&&e.source?.type==="memory"}function Frt(e){return(e?.type==="feature"||e?.type==="subtype-group")&&e.source?.type==="feature-layer"}async function uY(e,t){const r=sr?.findServerInfo(e);if(r?.currentVersion!=null)return r.owningSystemUrl||null;const i=e.toLowerCase().indexOf("/rest/services");if(i===-1)return null;const s=`${e.substring(0,i)}/rest/info`,n=t!=null?t.signal:null,{data:o}=await Re(s,{query:{f:"json"},responseType:"json",signal:n});return o?.owningSystemUrl||null}function Cme(e){if(!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"sublayer":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Ome(e){return Cme(e)?"effectiveCapabilities"in e?e.effectiveCapabilities:e.capabilities:null}function Pme(e){if(!("editingEnabled"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function Rme(e){return!!Pme(e)&&("effectiveEditingEnabled"in e?e.effectiveEditingEnabled:e.editingEnabled)}const Lme=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),kme=new Set(["catalog","csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","knowledge-graph","map-image","map-notes","media","ogc-feature","oriented-imagery","route","stream","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function Nme(e){return e.layerContainerType==="basemap"?Lme:e.layerContainerType==="operational-layers"?kme:null}function Dme(e,t){if(t.restrictedWebMapWriting){const r=Nme(t);return r==null||r.has(e.type)&&!pA(e)}return!0}function Fme(e,t){if(t)if(pA(e)){const r=GE("featureCollection.layers",t),i=r?.[0]?.layerDefinition;i&&dj(e,i)}else e.type!=="group"&&dj(e,t)}function dj(e,t){"maxScale"in e&&(t.maxScale=B3(e.maxScale)??void 0),"minScale"in e&&(t.minScale=B3(e.minScale)??void 0)}function jme(e,t){if(Fme(e,t),t&&(t.id=e.id,"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=B3(e.opacity)??void 0,t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts"))if(pA(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function fj(e,t,r){if(!e.persistenceEnabled)return null;if(!("write"in e)||!e.write)return r?.messages&&r.messages.push(new K("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(pA(e)&&!e.isTable)t=e.resourceInfo;else if(Dme(e,r)){const i={};return e.write(i,r)?i:null}return t!=null&&jme(e,t=Z(t)),t}var Ab;let Vme=0,Oo=Ab=class extends U2(Yu){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.style=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Vme++,this.baseLayers=new qe,this.referenceLayers=new qe;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&be.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.addHandles([this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{be.getLogger(this).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.baseLayers.toArray();for(const r of e)r.destroy();const t=this.referenceLayers.toArray();for(const r of t)r.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),this.portalItem=jr(this.portalItem)}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Id(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(s=>{const n=fj(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&i.push(n)}),this.referenceLayers.forEach(s=>{const n=fj(s,r.webmap?r.webmap.getLayerJSONFromResourceInfo(s):null,r);n!=null&&(s.type!=="scene"&&(n.isReference=!0),i.push(n))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",Id(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return nA(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.map(t=>$3(t)?t.clone():t),referenceLayers:this.referenceLayers.map(t=>$3(t)?t.clone():t)};return this.loaded&&(e.loadStatus="loaded"),new Ab({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t?.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo?.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const i=Z(r);return i.url&&zl(i.url)&&(i.url=`https:${i.url}`),i.templateUrl&&zl(i.templateUrl)&&(i.templateUrl=`https:${i.templateUrl}`),i})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r,style:i}=this;dr(e);const s=[];if(t){const n=t.context?t.context.url:null;if(s.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const o=t.data.id;s.push(Ime(o).then(a=>{a&&this.read({title:a},t.context)}))}}else r?s.push(this._loadFromItem(r,e)):i&&s.push(this._loadFromStylesService(i,e));await Promise.all(s)}async _loadLayersFromJSON(e,t,r){const i=this.resourceInfo?.context,s=this.portalItem?.portal||i?.portal||null,n=zme[i?.origin||""]??"web-map",{populateOperationalLayers:o}=await fe(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-CYoENPV5.js");return{populateOperationalLayers:l}},__vite__mapDeps([7,8,9,10,1]),import.meta.url),a=[];if(dr(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const l={context:{...i,origin:n,url:t,portal:s,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},u=f=>n==="web-scene"&&f.layerType==="ArcGISSceneServiceLayer"||f.isReference,c=o(this.baseLayers,e.baseMapLayers.filter(f=>!u(f)),l);a.push(c);const p=o(this.referenceLayers,e.baseMapLayers.filter(u),l);a.push(p)}await Promise.allSettled(a)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),s=gi(e.itemUrl??"");return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:Ume[e.type||""]??"web-map",portal:e.portal||xo.getDefault(),url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||xo.getDefault(),url:s}),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}async _loadFromStylesService(e,t){const r=`${e.serviceUrl}/${e.id}`,i=(await Re(r,{query:{language:e.getLanguageParamValue(),places:e.places,worldview:e.worldview},signal:t?.signal})).data,s=gi(r);return this._set("resourceInfo",{data:i.baseMap??{},context:{origin:"web-map",url:s}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this._loadLayersFromJSON(this.resourceInfo.data,s,t)}static fromId(e){const t=TO[e];return t?t.itemId?new Ab({portalItem:{id:t.itemId,portal:{url:"https://www.arcgis.com"}}}):Ab.fromJSON(t,{origin:t.is3d?"web-scene":"web-map"}):null}};h([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:qe}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],Oo.prototype,"baseLayers",null),h([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],Oo.prototype,"id",void 0),h([d({type:J0})],Oo.prototype,"portalItem",void 0),h([d()],Oo.prototype,"referenceLayers",null),h([d({readOnly:!0})],Oo.prototype,"resourceInfo",void 0),h([d({type:Fe})],Oo.prototype,"spatialReference",void 0),h([d({type:Ame})],Oo.prototype,"style",void 0),h([d()],Oo.prototype,"thumbnailUrl",void 0),h([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Oo.prototype,"title",void 0),h([ge("title")],Oo.prototype,"writeTitle",null),Oo=Ab=h([j("esri.Basemap")],Oo);const Ume={"Web Scene":"web-scene","Web Map":"web-map","Link Chart":"link-chart"},zme={"web-scene":"web-scene","web-map":"web-map","link-chart":"link-chart"},Y0=Oo,Gme=Object.freeze(Object.defineProperty({__proto__:null,default:Y0},Symbol.toStringTag,{value:"Module"})),iI={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function cY(e){return!!iI[e]||!!iI[e.toLowerCase()]}function BD(e){return iI[e]??iI[e.toLowerCase()]}function Bme(e){return[...BD(e)]}function T4(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function hY(e,t,r,i=1){const s=(e%360+360)%360/360,n=r<=.5?r*(t+1):r+t-r*t,o=2*r-n;return[Math.round(255*T4(o,n,s+1/3)),Math.round(255*T4(o,n,s)),Math.round(255*T4(o,n,s-1/3)),i]}function qme(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,s=t?1:17,n=t?e.length===9:e.length===5;let o=+("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return n&&(l=o&i,o>>=r,a[3]=s*l/255),l=o&i,o>>=r,a[2]=s*l,l=o&i,o>>=r,a[1]=s*l,l=o&i,o>>=r,a[0]=s*l,a}function zd(){return[0,0,0]}function Hme(e){return[e[0],e[1],e[2]]}function q2(e,t,r){return[e,t,r]}function Wme(e,t=zd()){const r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Jme(e,t){return new Float64Array(e,t,3)}function pY(){return zd()}function dY(){return q2(1,1,1)}function fY(){return q2(1,0,0)}function mY(){return q2(0,1,0)}function yY(){return q2(0,0,1)}const Zme=pY(),gY=dY(),Yme=fY(),Kme=mY(),Xme=yY();Object.freeze(Object.defineProperty({__proto__:null,ONES:gY,UNIT_X:Yme,UNIT_Y:Kme,UNIT_Z:Xme,ZEROS:Zme,clone:Hme,create:zd,createView:Jme,fromArray:Wme,fromValues:q2,ones:dY,unitX:fY,unitY:mY,unitZ:yY,zeros:pY},Symbol.toStringTag,{value:"Module"}));let qD=1e-6;function zn(){return qD}function Qme(e){qD=e}const dA=Math.random,eye=Math.PI/180,tye=180/Math.PI;function HD(e){return e*eye}function rye(e){return e*tye}function iye(e,t){return Math.abs(e-t)<=qD*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:dA,equals:iye,getEpsilon:zn,setEpsilon:Qme,toDegree:rye,toRadian:HD},Symbol.toStringTag,{value:"Module"}));function WD(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function sye(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function vY(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function nye(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function bY(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function wY(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function _Y(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function oye(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function aye(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function lye(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e}function uye(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e}function cye(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function hye(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function pye(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function SY(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function dye(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function xY(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return Math.sqrt(r*r+i*i+s*s)}function MY(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2];return r*r+i*i+s*s}function TY(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function fye(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function mye(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function IO(e,t){const r=t[0],i=t[1],s=t[2];let n=r*r+i*i+s*s;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n),e}function IY(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yye(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],a=r[1],l=r[2];return e[0]=s*l-n*a,e[1]=n*o-i*l,e[2]=i*a-s*o,e}function gye(e,t,r,i){const s=t[0],n=t[1],o=t[2];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e[2]=o+i*(r[2]-o),e}function vye(e,t,r,i,s,n){const o=n*n,a=o*(2*n-3)+1,l=o*(n-2)+n,u=o*(n-1),c=o*(3-2*n);return e[0]=t[0]*a+r[0]*l+i[0]*u+s[0]*c,e[1]=t[1]*a+r[1]*l+i[1]*u+s[1]*c,e[2]=t[2]*a+r[2]*l+i[2]*u+s[2]*c,e}function bye(e,t,r,i,s,n){const o=1-n,a=o*o,l=n*n,u=a*o,c=3*n*a,p=3*l*o,f=l*n;return e[0]=t[0]*u+r[0]*c+i[0]*p+s[0]*f,e[1]=t[1]*u+r[1]*c+i[1]*p+s[1]*f,e[2]=t[2]*u+r[2]*c+i[2]*p+s[2]*f,e}function wye(e,t){t=t||1;const r=dA,i=2*r()*Math.PI,s=2*r()-1,n=Math.sqrt(1-s*s)*t;return e[0]=Math.cos(i)*n,e[1]=Math.sin(i)*n,e[2]=s*t,e}function _ye(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=r[0]*i+r[4]*s+r[8]*n+r[12],e[1]=r[1]*i+r[5]*s+r[9]*n+r[13],e[2]=r[2]*i+r[6]*s+r[10]*n+r[14],e}function Sye(e,t,r){const i=t[0],s=t[1],n=t[2];return e[0]=i*r[0]+s*r[3]+n*r[6],e[1]=i*r[1]+s*r[4]+n*r[7],e[2]=i*r[2]+s*r[5]+n*r[8],e}function xye(e,t,r){const i=r[0],s=r[1],n=r[2],o=r[3],a=t[0],l=t[1],u=t[2],c=s*u-n*l,p=n*a-i*u,f=i*l-s*a,m=s*f-n*p,g=n*c-i*f,b=i*p-s*c,w=2*o;return e[0]=a+c*w+2*m,e[1]=l+p*w+2*g,e[2]=u+f*w+2*b,e}function Mye(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0],n[1]=s[1]*Math.cos(i)-s[2]*Math.sin(i),n[2]=s[1]*Math.sin(i)+s[2]*Math.cos(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function Tye(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[2]*Math.sin(i)+s[0]*Math.cos(i),n[1]=s[1],n[2]=s[2]*Math.cos(i)-s[0]*Math.sin(i),e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function Iye(e,t,r,i){const s=[],n=[];return s[0]=t[0]-r[0],s[1]=t[1]-r[1],s[2]=t[2]-r[2],n[0]=s[0]*Math.cos(i)-s[1]*Math.sin(i),n[1]=s[0]*Math.sin(i)+s[1]*Math.cos(i),n[2]=s[2],e[0]=n[0]+r[0],e[1]=n[1]+r[1],e[2]=n[2]+r[2],e}function Eye(e,t){IO(mj,e),IO(yj,t);const r=IY(mj,yj);return r>1?0:r<-1?Math.PI:Math.acos(r)}const mj=zd(),yj=zd();function Aye(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function $ye(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Cye(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],n=t[0],o=t[1],a=t[2],l=zn();return Math.abs(r-n)<=l*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-o)<=l*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(s-a)<=l*Math.max(1,Math.abs(s),Math.abs(a))}function Oye(e,t,r){const i=r[0]-t[0],s=r[1]-t[1],n=r[2]-t[2];let o=i*i+s*s+n*n;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=s*o,e[2]=n*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Pye=bY,Rye=wY,Lye=_Y,kye=xY,Nye=MY,Dye=WD,Fye=TY;Object.freeze(Object.defineProperty({__proto__:null,abs:lye,add:nye,angle:Eye,bezier:bye,ceil:oye,copy:sye,cross:yye,direction:Oye,dist:kye,distance:xY,div:Lye,divide:_Y,dot:IY,equals:Cye,exactEquals:$ye,floor:aye,hermite:vye,inverse:mye,len:Dye,length:WD,lerp:gye,max:hye,min:cye,mul:Rye,multiply:wY,negate:fye,normalize:IO,random:wye,rotateX:Mye,rotateY:Tye,rotateZ:Iye,round:pye,scale:SY,scaleAndAdd:dye,set:vY,sign:uye,sqrDist:Nye,sqrLen:Fye,squaredDistance:MY,squaredLength:TY,str:Aye,sub:Pye,subtract:bY,transformMat3:Sye,transformMat4:_ye,transformQuat:xye},Symbol.toStringTag,{value:"Module"}));const gj=new Float32Array(1);function jrt(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function Gl(e,t,r){return Math.min(Math.max(e,t),r)}function Vrt(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function $b(e,t,r){return e+(t-e)*r}function Urt(e,t,r,i,s){return $b(i,s,(e-t)/(r-t))}function H2(e){return e*Math.PI/180}function EY(e){return 180*e/Math.PI}function zrt(e){return Math.acos(Gl(e,-1,1))}function AY(e){return Math.asin(Gl(e,-1,1))}function Vw(e,t,r=1e-6){return e===t?!0:!Number.isFinite(e)||!Number.isFinite(t)?!1:(e>t?e-t:t-e)<=r}const sI=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function EO(e){return sI.setFloat64(0,e),sI.getBigInt64(0)}function jye(e){return sI.setBigInt64(0,e),sI.getFloat64(0)}const UM=BigInt("1000000"),Vye=$Y(1);function $Y(e){const t=EO(e=Math.abs(e)),r=jye(t<=UM?UM:t-UM);return Math.abs(e-r)}function Grt(e,t,r=Vye){if(e===t)return!0;if(!Number.isFinite(e)||!Number.isFinite(t))return!1;if(r!=null&&$Y(Math.min(Math.abs(e),Math.abs(t)))<r)return Math.abs(e-t)<=r;const i=EO(e),s=EO(t);return i<0!=s<0?!1:!((i<s?s-i:i-s)>UM)}function Brt(e){return CY(Math.max(-vj,Math.min(e,vj)))}function CY(e){return gj[0]=e,gj[0]}function qrt(e,t){const r=WD(e),i=AY(e[2]/r),s=Math.atan2(e[1]/r,e[0]/r);return vY(t,r,i,s),t}function Hrt(e){const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[3]*e[3]+e[4]*e[4]+e[5]*e[5],i=e[6]*e[6]+e[7]*e[7]+e[8]*e[8];return!(Vw(t,1)&&Vw(r,1)&&Vw(i,1))}const vj=CY(34028234663852886e22);function ex(e){return Gl(XE(e),0,255)}function tx(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function rx(e,t){const r=e.toString(16).padStart(2,"0");return t?r.substring(0,1):r}let zM=class Wi{static blendColors(t,r,i,s=new Wi){return s.r=Math.round(t.r+(r.r-t.r)*i),s.g=Math.round(t.g+(r.g-t.g)*i),s.b=Math.round(t.b+(r.b-t.b)*i),s.a=t.a+(r.a-t.a)*i,s._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s.\-,%0-9]+)\)/);if(i){const s=i[2].split(/\s*,\s*/),n=i[1];if(n==="rgb"&&s.length===3||n==="rgba"&&s.length===4){const o=s[0];if(o.charAt(o.length-1)==="%"){const a=s.map(l=>2.56*parseFloat(l));return s.length===4&&(a[3]=parseFloat(s[3])),Wi.fromArray(a,r)}return Wi.fromArray(s.map(a=>parseFloat(a)),r)}if(n==="hsl"&&s.length===3||n==="hsla"&&s.length===4)return Wi.fromArray(hY(parseFloat(s[0]),parseFloat(s[1])/100,parseFloat(s[2])/100,parseFloat(s[3])),r)}return null}static fromHex(t,r=new Wi){if(t[0]!=="#"||isNaN(+`0x${t.substring(1)}`))return null;switch(t.length){case 4:case 5:{const i=parseInt(t.substring(1,2),16),s=parseInt(t.substring(2,3),16),n=parseInt(t.substring(3,4),16),o=t.length===5?15:parseInt(t.substring(4),16);return Wi.fromArray([i+16*i,s+16*s,n+16*n,(o+16*o)/255],r)}case 7:case 9:{const i=parseInt(t.substring(1,3),16),s=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16),o=t.length===7?255:parseInt(t.substring(7),16);return Wi.fromArray([i,s,n,o/255],r)}default:return null}}static fromArray(t,r=new Wi){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=cY(t)?BD(t):null;return i&&Wi.fromArray(i,r)||Wi.fromRgb(t,r)||Wi.fromHex(t,r)}static fromJSON(t){return t!=null?new Wi([t[0],t[1],t[2],(t[3]??255)/255]):void 0}static toUnitRGB(t){return t!=null?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return t!=null?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){return typeof t=="string"?Wi.fromString(t,this):Array.isArray(t)?Wi.fromArray(t,this):(this._set(t.r??0,t.g??0,t.b??0,t.a??1),t instanceof Wi||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(t){const r=t?.capitalize??!1,i=t?.digits??6,s=i===3||i===4,n=i===4||i===8,o=`#${rx(this.r,s)}${rx(this.g,s)}${rx(this.b,s)}${n?rx(Math.round(255*this.a),s):""}`;return r?o.toUpperCase():o}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=Wi.AlphaMode.ALWAYS){const r=ex(this.r),i=ex(this.g),s=ex(this.b);return t===Wi.AlphaMode.ALWAYS||this.a!==1?[r,i,s,ex(255*this.a)]:[r,i,s]}clone(){return new Wi(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(t){return t!=null&&t.r===this.r&&t.g===this.g&&t.b===this.b&&t.a===this.a}_sanitize(){return this.r=Math.round(tx(this.r,0,255)),this.g=Math.round(tx(this.g,0,255)),this.b=Math.round(tx(this.b,0,255)),this.a=tx(this.a,0,1),this}_set(t,r,i,s){this.r=t,this.g=r,this.b=i,this.a=s}};zM.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(zM||(zM={}));const Le=zM;function Iv(e,t,r=!1){let{hasM:i,hasZ:s}=e;Array.isArray(t)?t.length!==4||i||s?t.length===3&&r&&!i?(s=!0,i=!1):t.length===3&&i&&s&&(i=!1,s=!1):(i=!0,s=!0):(s=!s&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!s||t.hasZ)),e.hasZ=s,e.hasM=i}var AO;function bj(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function Uye(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let dp=AO=class extends uc{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return{};const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):Uye(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=r.points?.[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new yt,r=this.hasZ,i=this.hasM,s=r?3:2,n=e[0],o=bj(Math.min),a=bj(Math.max);let l,u,c,p,[f,m]=n,[g,b]=n;for(let w=0,S=e.length;w<S;w++){const M=e[w],[x,_]=M;if(f=o(f,x),m=o(m,_),g=a(g,x),b=a(b,_),r&&M.length>2){const I=M[2];l=o(l,I),c=a(c,I)}if(i&&M.length>s){const I=M[s];u=o(u,I),p=a(p,I)}}return t.xmin=f,t.ymin=m,t.xmax=g,t.ymax=b,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=c):(t.zmin=void 0,t.zmax=void 0),i?(t.mmin=u,t.mmax=p):(t.mmin=void 0,t.mmax=void 0),t}writePoints(e,t){t.points=Z(this.points)}addPoint(e){return Iv(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:Z(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new AO(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new je(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new je(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(Iv(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};h([d({readOnly:!0})],dp.prototype,"cache",null),h([d()],dp.prototype,"extent",null),h([d({type:[[Number]],json:{write:{isRequired:!0}}})],dp.prototype,"points",void 0),h([ge("points")],dp.prototype,"writePoints",null),dp=AO=h([j("esri.geometry.Multipoint")],dp),dp.prototype.toJSON.isDefaultToJSON=!0;const p1=dp;function Wrt(e){const t=[];for(e.reset();e.nextPath();){const r=[];for(;e.nextPoint();)r.push([e.x,e.y]);t.push(r)}return e.reset(),t}function zye(e){const t=[];for(;e.nextPoint();)t.push([e.x,e.y]);return e.seekPathStart(),t}var nI;(function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"})(nI||(nI={}));function JD(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const s=e[2]-t[2];return Math.sqrt(r*r+i*i+s*s)}return Math.sqrt(r*r+i*i)}function Gye(e,t,r){const i=e[0]+r*(t[0]-e[0]),s=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,s,e[2]+r*(t[2]-e[2])]:[i,s]}function Bye(e,t,r,i){return qye(e,t,r[i],r[i+1])}function qye(e,t,r,i){const[s,n]=t,[o,a]=r,[l,u]=i,c=l-o,p=u-a,f=c*c+p*p,m=(s-o)*c+(n-a)*p,g=Math.min(1,Math.max(0,m/f));return e[0]=o+c*g,e[1]=a+p*g,e}function Jrt(e,t,r,i,s,n){let o=r,a=i,l=s-o,u=n-a;if(l!==0||u!==0){const c=((e-o)*l+(t-a)*u)/(l*l+u*u);c>1?(o=s,a=n):c>0&&(o+=l*c,a+=u*c)}return l=e-o,u=t-a,l*l+u*u}function OY(e,t){return Gye(e,t,.5)}function Zrt(e){const t=e.length;let r=0;for(let i=0;i<t-1;++i)r+=JD(e[i],e[i+1]);return r}function PY(e,t=nI.X,r=nI.Y){let i=0;const s=e.length;let n=e[0];for(let o=1;o<s;o++){const a=e[o];i+=(a[t]-n[t])*(a[r]+n[r]),n=a}if(!RY(e)){const o=e[0];i+=(o[t]-n[t])*(o[r]+n[r])}return i>=0}function RY(e){const t=e.length;return t<3||VE(e[0],e[t-1])}function Yrt(e){"rings"in e&&(Hye(e),Wye(e))}function Hye(e){if(!("rings"in e))return!1;let t=!1;for(const r of e.rings)RY(r)||(r.push(r[0].slice()),t=!0);return t}function Wye(e){if(!("rings"in e)||e.rings.length===0||PY(e.rings[0]))return!1;for(const t of e.rings)t.reverse();return!0}function Krt(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null}function Jye(e){return e?Zye(e.rings,e.hasZ??!1):null}function Zye(e,t){if(!e?.length)return null;const r=[],i=[],s=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let n=0,o=e.length;n<o;n++){const a=LY(e[n],t,s);a&&i.push(a)}if(i.sort((n,o)=>{let a=n[2]-o[2];return a===0&&t&&(a=n[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<s[0]||r[0]>s[1]||r[1]<s[2]||r[1]>s[3]||t&&(r[2]<s[4]||r[2]>s[5]))&&(r.length=0)),!r.length){const n=e[0]&&e[0].length?Yye(e[0],t):null;if(!n)return null;r[0]=n[0],r[1]=n[1],t&&n.length>2&&(r[2]=n[2])}return r}function LY(e,t,r){let i=0,s=0,n=0,o=0,a=0;const l=e.length?e[0][0]:0,u=e.length?e[0][1]:0,c=e.length&&t?e[0][2]:0;for(let f=0;f<e.length;f++){const m=e[f],g=e[(f+1)%e.length],[b,w,S]=m,M=b-l,x=w-u,[_,I,E]=g,A=_-l,C=I-u,O=M*C-A*x;if(o+=O,i+=(M+A)*O,s+=(x+C)*O,t&&m.length>2&&g.length>2){const R=S-c,D=E-c,N=M*D-A*R;n+=(R+D)*N,a+=N}b<r[0]&&(r[0]=b),b>r[1]&&(r[1]=b),w<r[2]&&(r[2]=w),w>r[3]&&(r[3]=w),t&&(S<r[4]&&(r[4]=S),S>r[5]&&(r[5]=S))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const p=[i/(6*o)+l,s/(6*o)+u,o];return t&&(r[4]===r[5]||a===0?(p[3]=(r[4]+r[5])/2,p[4]=0):(p[3]=n/(6*a)+c,p[4]=a)),p}function Xrt(e,t){let r=0,i=0,s=0;e.nextPoint();const n=e.pathSize?e.x:0,o=e.pathSize?e.y:0;for(let a=0;a<e.pathSize;a++){e.seekInPath(a);const l=[e.x,e.y];e.seekInPath((a+1)%e.pathSize);const u=[e.x,e.y],[c,p]=l,f=c-n,m=p-o,[g,b]=u,w=g-n,S=b-o,M=f*S-w*m;s+=M,r+=(f+w)*M,i+=(m+S)*M,c<t[0]&&(t[0]=c),c>t[1]&&(t[1]=c),p<t[2]&&(t[2]=p),p>t[3]&&(t[3]=p)}return s>0&&(s*=-1),s?(s*=.5,[r/(6*s)+n,i/(6*s)+o,s]):null}function Yye(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;for(let l=0,u=e.length;l<u-1;l++){const c=e[l],p=e[l+1];if(c&&p){r[0]=c[0],r[1]=c[1],i[0]=p[0],i[1]=p[1],t&&c.length>2&&p.length>2&&(r[2]=c[2],i[2]=p[2]);const f=JD(r,i);if(f){s+=f;const m=OY(c,p);n+=f*m[0],o+=f*m[1],t&&m.length>2&&(a+=f*m[2])}}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.length?e[0]:null}function Kye(e){const{hasZ:t,totalSize:r}=e;if(r===0)return null;const i=[],s=[],n=t?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(e.reset();e.nextPath();){const o=LY(zye(e),e.hasZ,n);o&&s.push(o)}if(s.sort((o,a)=>{let l=o[2]-a[2];return l===0&&t&&(l=o[4]-a[4]),l}),s.length&&(i[0]=s[0][0],i[1]=s[0][1],t&&(i[2]=s[0][3]),(i[0]<n[0]||i[0]>n[1]||i[1]<n[2]||i[1]>n[3]||t&&(i[2]<n[4]||i[2]>n[5]))&&(i.length=0)),!i.length){e.reset(),e.nextPath();const o=e.pathSize?Xye(e):null;if(!o)return null;i[0]=o[0],i[1]=o[1],t&&o.length>2&&(i[2]=o[2])}return i}function Xye(e){const{hasZ:t}=e,r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let s=0,n=0,o=0,a=0;if(e.nextPoint()){let l=e.x,u=e.y,c=e.z;for(;e.nextPoint();){const p=e.x,f=e.y,m=e.z;r[0]=l,r[1]=u,i[0]=p,i[1]=f,t&&(r[2]=c,i[2]=m);const g=JD(r,i);if(g){s+=g;const b=OY(r,i);n+=g*b[0],o+=g*b[1],t&&b.length>2&&(a+=g*b[2])}l=p,u=f,c=m}}return s>0?t?[n/s,o/s,a/s]:[n/s,o/s]:e.pathSize?(e.seekPathStart(),e.nextPoint(),[e.x,e.y]):null}const Qye=1e-6;function Qrt(e){let t=0;for(e.reset();e.nextPath();)t+=e.getCurrentRingArea();if(t<Qye){const s=Kye(e);return s?[s[0],s[1]]:null}const r=[0,0];if(e.reset(),!e.nextPath()||!e.nextPoint())return null;const i=[e.x,e.y];for(e.reset();e.nextPath();)tge(r,i,e);return r[0]*=1/t,r[1]*=1/t,r[0]+=i[0],r[1]+=i[1],r}const ege=1/3;function tge(e,t,r){if(!e||!r||r.pathSize<3)return null;r.nextPoint();const i=r.x,s=r.y;r.nextPoint();let n,o=r.x-i,a=r.y-s,l=0,u=0;for(;r.nextPoint();)l=r.x-i,u=r.y-s,n=.5*ege*(l*a-u*o),e[0]+=n*(o+l),e[1]+=n*(a+u),o=l,a=u;const c=r.getCurrentRingArea(),p=[i,s];return p[0]-=t[0],p[1]-=t[1],p[0]*=c,p[1]*=c,e[0]+=p[0],e[1]+=p[1],e}function mo(e=sge){return[e[0],e[1],e[2],e[3]]}function kY(e,t){return e!==t&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]),e}function rge(e,t,r,i,s=mo()){return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s}function eit(e,t=mo()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function tit(e,t){return new yt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function rit(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function iit(e,t,r){if(t!=null)if("length"in t)$O(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[2]),r[3]=Math.max(e[3],t[3])):t.length!==2&&t.length!==3||(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.max(e[2],t[0]),r[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":r[0]=Math.min(e[0],t.xmin),r[1]=Math.min(e[1],t.ymin),r[2]=Math.max(e[2],t.xmax),r[3]=Math.max(e[3],t.ymax);break;case"point":r[0]=Math.min(e[0],t.x),r[1]=Math.min(e[1],t.y),r[2]=Math.max(e[2],t.x),r[3]=Math.max(e[3],t.y)}else kY(r,e)}function NY(e){return e==null||e[0]>=e[2]?0:e[2]-e[0]}function DY(e){return e==null||e[1]>=e[3]?0:e[3]-e[1]}function sit(e){return NY(e)*DY(e)}function nit(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function oit(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function ige(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}function ait(e){return e?kY(e,wj):mo(wj)}function $O(e){return e!=null&&e.length===4}function lit(e,t){return $O(e)&&$O(t)?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]:e===t}const wj=[1/0,1/0,-1/0,-1/0],sge=[0,0,0,0];function FY(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function jY(e){return e.points!==void 0}function VY(e){return e.x!==void 0&&e.y!==void 0}function UY(e){return e.paths!==void 0}function zY(e){return e.rings!==void 0}function GY(e){function t(r,i){return r==null?i:i==null?r:e(r,i)}return t}const ud=GY(Math.min),cd=GY(Math.max);function uit(e,t){return UY(t)?Ev(e,t.paths,!1,!1):zY(t)?Ev(e,t.rings,!1,!1):jY(t)?ZD(e,t.points,!1,!1,!1,!1):FY(t)?BY(e,t):(VY(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function cit(e){let t,r,i,s;for(e.reset(),t=i=1/0,r=s=-1/0;e.nextPath();){const n=nge(e);t=Math.min(n[0],t),i=Math.min(n[1],i),r=Math.max(n[2],r),s=Math.max(n[3],s)}return mo([t,i,r,s])}function nge(e){let t,r,i,s;for(t=i=1/0,r=s=-1/0;e.nextPoint();)t=Math.min(e.x,t),i=Math.min(e.y,i),r=Math.max(e.x,r),s=Math.max(e.y,s);return mo([t,i,r,s])}function hit(e,t){return UY(t)?Ev(e,t.paths,!0,!1):zY(t)?Ev(e,t.rings,!0,!1):jY(t)?ZD(e,t.points,!0,!1,!0,!1):FY(t)?BY(e,t,!0,!1,!0,!1):(VY(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function Ev(e,t,r,i){const s=r?3:2;if(!t.length||!t[0].length)return null;let n,o,a,l,[u,c]=t[0][0],[p,f]=t[0][0];for(let m=0;m<t.length;m++){const g=t[m];for(let b=0;b<g.length;b++){const w=g[b],[S,M]=w;if(u=ud(u,S),c=ud(c,M),p=cd(p,S),f=cd(f,M),r&&w.length>2){const x=w[2];n=ud(n,x),o=cd(o,x)}if(i&&w.length>s){const x=w[s];a=ud(n,x),l=cd(o,x)}}}return r?i?(e[0]=u,e[1]=c,e[2]=n,e[3]=a,e[4]=p,e[5]=f,e[6]=o,e[7]=l,e.length=8,e):(e[0]=u,e[1]=c,e[2]=n,e[3]=p,e[4]=f,e[5]=o,e.length=6,e):i?(e[0]=u,e[1]=c,e[2]=a,e[3]=p,e[4]=f,e[5]=l,e.length=6,e):(e[0]=u,e[1]=c,e[2]=p,e[3]=f,e.length=4,e)}function BY(e,t,r,i,s,n){const o=t.xmin,a=t.xmax,l=t.ymin,u=t.ymax;let c=t.zmin,p=t.zmax,f=t.mmin,m=t.mmax;return s?(c=c||0,p=p||0,n?(f=f||0,m=m||0,e[0]=o,e[1]=l,e[2]=c,e[3]=f,e[4]=a,e[5]=u,e[6]=p,e[7]=m,e):(e[0]=o,e[1]=l,e[2]=c,e[3]=a,e[4]=u,e[5]=p,e)):n?(f=f||0,m=m||0,e[0]=o,e[1]=l,e[2]=f,e[3]=a,e[4]=u,e[5]=m,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=u,e)}function ZD(e,t,r,i,s,n){const o=r?3:2,a=i&&n,l=r&&s;if(!t.length||!t[0].length)return null;let u,c,p,f,[m,g]=t[0],[b,w]=t[0];for(let S=0;S<t.length;S++){const M=t[S],[x,_]=M;if(m=ud(m,x),g=ud(g,_),b=cd(b,x),w=cd(w,_),l&&M.length>2){const I=M[2];u=ud(u,I),c=cd(c,I)}if(a&&M.length>o){const I=M[o];p=ud(u,I),f=cd(c,I)}}return s?(u=u||0,c=c||0,n?(p=p||0,f=f||0,e[0]=m,e[1]=g,e[2]=u,e[3]=p,e[4]=b,e[5]=w,e[6]=c,e[7]=f,e):(e[0]=m,e[1]=g,e[2]=u,e[3]=b,e[4]=w,e[5]=c,e)):n?(p=p||0,f=f||0,e[0]=m,e[1]=g,e[2]=p,e[3]=b,e[4]=w,e[5]=f,e):(e[0]=m,e[1]=g,e[2]=b,e[3]=w,e)}function oge(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function age(e){return e.points!==void 0}function lge(e){return e.x!==void 0&&e.y!==void 0}function uge(e){return e.paths!==void 0}function cge(e){return e.rings!==void 0}const YD=[];function qY(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function HY(e,t,r,i,s,n){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:s,zmax:n}}function WY(e,t,r,i,s,n){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:s,mmax:n}}function JY(e,t,r,i,s,n,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:s,ymax:n,zmax:o,mmax:a}}function KD(e,t=!1,r=!1){return t?r?JY(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):HY(e[0],e[1],e[2],e[3],e[4],e[5]):r?WY(e[0],e[1],e[2],e[3],e[4],e[5]):qY(e[0],e[1],e[2],e[3])}function pit(e){return e?oge(e)?e:lge(e)?pge(e):cge(e)?ZY(e):uge(e)?YY(e):age(e)?hge(e):null:null}function hge(e){const{hasZ:t,hasM:r,points:i}=e;return KD(ZD(YD,i,t??!1,r??!1),t,r)}function pge(e){const{x:t,y:r,z:i,m:s}=e,n=s!=null;return i!=null?n?JY(t,r,i,s,t,r,i,s):HY(t,r,i,t,r,i):n?WY(t,r,s,t,r,s):qY(t,r,t,r)}function ZY(e){const{hasZ:t,hasM:r,rings:i}=e,s=Ev(YD,i,t??!1,r??!1);return s?KD(s,t,r):null}function YY(e){const{hasZ:t,hasM:r,paths:i}=e,s=Ev(YD,i,t??!1,r??!1);return s?KD(s,t,r):null}var GM;function _j(e){return!Array.isArray(e[0])}let su=GM=class extends uc{static fromExtent(e){const t=e.clone().normalize(),r=e.spatialReference;let i=!1,s=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(s=!0);const n={rings:t.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(s&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:r};return i&&(n.hasZ=!0),s&&(n.hasM=!0),new GM(n)}constructor(...e){super(...e),this.rings=[],this.type="polygon"}normalizeCtorArgs(e,t){let r,i,s=null,n=null;return e&&!Array.isArray(e)?(s=e.rings??null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,i=e.hasM):s=e,s=s||[],t=t||Fe.WGS84,s.length&&s[0]?.[0]!=null&&typeof s[0][0]=="number"&&(s=[s]),n=s[0]?.[0],n&&(r===void 0&&i===void 0?(r=n.length>2,i=n.length>3):r===void 0?r=i?n.length>3:n.length>2:i===void 0&&(i=r?n.length>3:n.length>2)),{rings:s,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=Jye(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new je;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=ZY(this);if(!t)return null;const r=new yt(t);return r.spatialReference=e,r}get isSelfIntersecting(){return sme(this.rings)}writeRings(e,t){t.rings=Z(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(_j(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new GM;return e.spatialReference=this.spatialReference,e.rings=Z(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(e==null)return!1;const t=this.spatialReference,r=e.spatialReference;if(t!=null!=(r!=null)||t!=null&&r!=null&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([s,n,o,a],[l,u,c,p])=>s===l&&n===u&&(o==null&&c==null||o===c)&&(a==null&&p==null||a===p);for(let s=0;s<this.rings.length;s++){const n=this.rings[s],o=e.rings[s];if(!VE(n,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=uA(e,this.spatialReference);return FD(this,t??e)}isClockwise(e){const t=_j(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e;return PY(t)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new je(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new je(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new je(r[0],r[1],r[2],r[3],this.spatialReference):new je(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Iv(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new je(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(s=>new je(s,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(Iv(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};h([d({readOnly:!0})],su.prototype,"cache",null),h([d({readOnly:!0})],su.prototype,"centroid",null),h([d({readOnly:!0})],su.prototype,"extent",null),h([d({readOnly:!0})],su.prototype,"isSelfIntersecting",null),h([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],su.prototype,"rings",void 0),h([ge("rings")],su.prototype,"writeRings",null),su=GM=h([j("esri.geometry.Polygon")],su),su.prototype.toJSON.isDefaultToJSON=!0;const Rs=su;var CO;function dge(e){return!Array.isArray(e[0])}let fp=CO=class extends uc{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let r,i,s=null,n=null;return e&&!Array.isArray(e)?(s=e.paths??null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,i=e.hasM):s=e,s=s||[],t=t||Fe.WGS84,s.length&&s[0]?.[0]!=null&&typeof s[0][0]=="number"&&(s=[s]),n=s[0]?.[0],n&&(r===void 0&&i===void 0?(r=n.length>2,i=!1):r===void 0?r=!i&&n.length>3:i===void 0&&(i=!r&&n.length>3)),{paths:s,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=YY(this);if(!t)return null;const r=new yt(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=Z(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(dge(e)){const i=[];for(let s=0,n=e.length;s<n;s++)i[s]=e[s].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new CO;return e.spatialReference=this.spatialReference,e.paths=Z(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,s=this.hasM;return i&&!s?new je(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new je(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new je(r[0],r[1],r[2],r[3],this.spatialReference):new je(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(Iv(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(s=>new je(s,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new je(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(Iv(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};h([d({readOnly:!0})],fp.prototype,"cache",null),h([d({readOnly:!0})],fp.prototype,"extent",null),h([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],fp.prototype,"paths",void 0),h([ge("paths")],fp.prototype,"writePaths",null),fp=CO=h([j("esri.geometry.Polyline")],fp),fp.prototype.toJSON.isDefaultToJSON=!0;const Jo=fp;function KY(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function XD(e){return e.points!==void 0}function QD(e){return e.x!==void 0&&e.y!==void 0}function e6(e){return e.paths!==void 0}function Zm(e){return e.rings!==void 0}function bi(e){return e==null?null:e instanceof uc?e:QD(e)?je.fromJSON(e):e6(e)?Jo.fromJSON(e):Zm(e)?Rs.fromJSON(e):XD(e)?p1.fromJSON(e):KY(e)?yt.fromJSON(e):null}function vn(e){return e?QD(e)?"esriGeometryPoint":e6(e)?"esriGeometryPolyline":Zm(e)?"esriGeometryPolygon":KY(e)?"esriGeometryEnvelope":XD(e)?"esriGeometryMultipoint":null:null}const fge={esriGeometryPoint:je,esriGeometryPolyline:Jo,esriGeometryPolygon:Rs,esriGeometryEnvelope:yt,esriGeometryMultipoint:p1};function mge(e){return e&&fge[e]||null}const oI=Oi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),Sj=Oi()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),Ss={base:uc,key:"type",typeMap:{extent:yt,multipoint:p1,point:je,polyline:Jo,polygon:Rs}};Zu(Ss);const Yt=e=>{let t=class extends e{clone(){const r=es(this);gd(r,"unable to clone instance of non-accessor class");const i=r.metadata,s=r.store,n={},o=new Map;for(const l in i){const u=i[l],c=s?.originOf(l),p=u.clonable;if(u.readOnly||p===!1||c!==Ne.USER&&c!==Ne.DEFAULTS&&c!==Ne.WEB_MAP&&c!==Ne.WEB_SCENE)continue;const f=this[l];let m=null;m=typeof p=="function"?p(f):p==="reference"?f:zC(f),f!=null&&m==null||(c===Ne.DEFAULTS?o.set(l,m):n[l]=m)}const a=new(Object.getPrototypeOf(this)).constructor(n);if(o.size){const l=es(a)?.store;if(l)for(const[u,c]of o)l.set(u,c,Ne.DEFAULTS)}return a}};return t=h([j("esri.core.Clonable")],t),t};let OO=class extends Yt(et){};OO=h([j("esri.core.Clonable")],OO);async function XY(e,t){const{WhereClause:r}=await fe(()=>import("./WhereClause-BOVBfb1I.js").then(i=>i.W),__vite__mapDeps([11,12]),import.meta.url);return r.create(e,t)}function t6(e,t){return e==="1=1"?t??e:t==="1=1"?e??t:e!=null&&e!==""?t!=null&&t!==""?`(${e}) AND (${t})`:e:t}const xj=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Bishkek"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Mazatlan"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class By extends Error{}class yge extends By{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class gge extends By{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class vge extends By{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class E0 extends By{}class QY extends By{constructor(t){super(`Invalid unit ${t}`)}}class uo extends By{}class ep extends By{constructor(){super("Zone is an abstract class")}}const Ve="numeric",Bl="short",Xo="long",aI={year:Ve,month:Ve,day:Ve},eK={year:Ve,month:Bl,day:Ve},bge={year:Ve,month:Bl,day:Ve,weekday:Bl},tK={year:Ve,month:Xo,day:Ve},rK={year:Ve,month:Xo,day:Ve,weekday:Xo},iK={hour:Ve,minute:Ve},sK={hour:Ve,minute:Ve,second:Ve},nK={hour:Ve,minute:Ve,second:Ve,timeZoneName:Bl},oK={hour:Ve,minute:Ve,second:Ve,timeZoneName:Xo},aK={hour:Ve,minute:Ve,hourCycle:"h23"},lK={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23"},uK={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23",timeZoneName:Bl},cK={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23",timeZoneName:Xo},hK={year:Ve,month:Ve,day:Ve,hour:Ve,minute:Ve},pK={year:Ve,month:Ve,day:Ve,hour:Ve,minute:Ve,second:Ve},dK={year:Ve,month:Bl,day:Ve,hour:Ve,minute:Ve},fK={year:Ve,month:Bl,day:Ve,hour:Ve,minute:Ve,second:Ve},wge={year:Ve,month:Bl,day:Ve,weekday:Bl,hour:Ve,minute:Ve},mK={year:Ve,month:Xo,day:Ve,hour:Ve,minute:Ve,timeZoneName:Bl},yK={year:Ve,month:Xo,day:Ve,hour:Ve,minute:Ve,second:Ve,timeZoneName:Bl},gK={year:Ve,month:Xo,day:Ve,weekday:Xo,hour:Ve,minute:Ve,timeZoneName:Xo},vK={year:Ve,month:Xo,day:Ve,weekday:Xo,hour:Ve,minute:Ve,second:Ve,timeZoneName:Xo};class d1{get type(){throw new ep}get name(){throw new ep}get ianaName(){return this.name}get isUniversal(){throw new ep}offsetName(t,r){throw new ep}formatOffset(t,r){throw new ep}offset(t){throw new ep}equals(t){throw new ep}get isValid(){throw new ep}}let I4=null;class fA extends d1{static get instance(){return I4===null&&(I4=new fA),I4}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return EK(t,r,i)}formatOffset(t,r){return Uw(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}let BM={};function _ge(e){return BM[e]||(BM[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),BM[e]}const Sge={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function xge(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,s,n,o,a,l,u,c]=i;return[o,s,n,a,l,u,c]}function Mge(e,t){const r=e.formatToParts(t),i=[];for(let s=0;s<r.length;s++){const{type:n,value:o}=r[s],a=Sge[n];n==="era"?i[a]=o:Nt(a)||(i[a]=parseInt(o,10))}return i}let ix={};class na extends d1{static create(t){return ix[t]||(ix[t]=new na(t)),ix[t]}static resetCache(){ix={},BM={}}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=na.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return EK(t,r,i,this.name)}formatOffset(t,r){return Uw(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=_ge(this.name);let[s,n,o,a,l,u,c]=i.formatToParts?Mge(i,r):xge(i,r);a==="BC"&&(s=-Math.abs(s)+1);const f=yA({year:s,month:n,day:o,hour:l===24?0:l,minute:u,second:c,millisecond:0});let m=+r;const g=m%1e3;return m-=g>=0?g:1e3+g,(f-m)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let Mj={};function Tge(e,t={}){const r=JSON.stringify([e,t]);let i=Mj[r];return i||(i=new Intl.ListFormat(e,t),Mj[r]=i),i}let PO={};function RO(e,t={}){const r=JSON.stringify([e,t]);let i=PO[r];return i||(i=new Intl.DateTimeFormat(e,t),PO[r]=i),i}let LO={};function Ige(e,t={}){const r=JSON.stringify([e,t]);let i=LO[r];return i||(i=new Intl.NumberFormat(e,t),LO[r]=i),i}let kO={};function Ege(e,t={}){const{base:r,...i}=t,s=JSON.stringify([e,i]);let n=kO[s];return n||(n=new Intl.RelativeTimeFormat(e,t),kO[s]=n),n}let Cb=null;function Age(){return Cb||(Cb=new Intl.DateTimeFormat().resolvedOptions().locale,Cb)}let Tj={};function $ge(e){let t=Tj[e];if(!t){const r=new Intl.Locale(e);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,Tj[e]=t}return t}function Cge(e){const t=e.indexOf("-x-");t!==-1&&(e=e.substring(0,t));const r=e.indexOf("-u-");if(r===-1)return[e];{let i,s;try{i=RO(e).resolvedOptions(),s=e}catch{const l=e.substring(0,r);i=RO(l).resolvedOptions(),s=l}const{numberingSystem:n,calendar:o}=i;return[s,n,o]}}function Oge(e,t,r){return(r||t)&&(e.includes("-u-")||(e+="-u"),r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function Pge(e){const t=[];for(let r=1;r<=12;r++){const i=Mt.utc(2009,r,1);t.push(e(i))}return t}function Rge(e){const t=[];for(let r=1;r<=7;r++){const i=Mt.utc(2016,11,13+r);t.push(e(i))}return t}function sx(e,t,r,i){const s=e.listingMode();return s==="error"?null:s==="en"?r(t):i(t)}function Lge(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class kge{constructor(t,r,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;const{padTo:s,floor:n,...o}=i;if(!r||Object.keys(o).length>0){const a={useGrouping:!1,...i};i.padTo>0&&(a.minimumIntegerDigits=i.padTo),this.inf=Ige(t,a)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):n6(t,3);return ji(r,this.padTo)}}}class Nge{constructor(t,r,i){this.opts=i,this.originalZone=void 0;let s;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&na.create(a).valid?(s=a,this.dt=t):(s="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,s=t.zone.name):(s="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const n={...this.opts};n.timeZone=n.timeZone||s,this.dtf=RO(r,n)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:i}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class Dge{constructor(t,r,i){this.opts={style:"long",...i},!r&&TK()&&(this.rtf=Ege(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):i0e(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const Fge={firstDay:1,minimalDays:4,weekend:[6,7]};class yr{static fromOpts(t){return yr.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,i,s,n=!1){const o=t||Ei.defaultLocale,a=o||(n?"en-US":Age()),l=r||Ei.defaultNumberingSystem,u=i||Ei.defaultOutputCalendar,c=NO(s)||Ei.defaultWeekSettings;return new yr(a,l,u,c,o)}static resetCache(){Cb=null,PO={},LO={},kO={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i,weekSettings:s}={}){return yr.create(t,r,i,s)}constructor(t,r,i,s,n){const[o,a,l]=Cge(t);this.locale=o,this.numberingSystem=r||a||null,this.outputCalendar=i||l||null,this.weekSettings=s,this.intl=Oge(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Lge(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:yr.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,NO(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return sx(this,t,CK,()=>{const i=r?{month:t,day:"numeric"}:{month:t},s=r?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=Pge(n=>this.extract(n,i,"month"))),this.monthsCache[s][t]})}weekdays(t,r=!1){return sx(this,t,RK,()=>{const i=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=r?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=Rge(n=>this.extract(n,i,"weekday"))),this.weekdaysCache[s][t]})}meridiems(){return sx(this,void 0,()=>LK,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Mt.utc(2016,11,13,9),Mt.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return sx(this,t,kK,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Mt.utc(-40,1,1),Mt.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[t]})}extract(t,r,i){const s=this.dtFormatter(t,r),n=s.formatToParts(),o=n.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new kge(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new Nge(t,this.intl,r)}relFormatter(t={}){return new Dge(this.intl,this.isEnglish(),t)}listFormatter(t={}){return Tge(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:IK()?$ge(this.locale):Fge}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}let E4=null;class ys extends d1{static get utcInstance(){return E4===null&&(E4=new ys(0)),E4}static instance(t){return t===0?ys.utcInstance:new ys(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new ys(gA(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Uw(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Uw(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return Uw(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class jge extends d1{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function nd(e,t){if(Nt(e)||e===null)return t;if(e instanceof d1)return e;if(zge(e)){const r=e.toLowerCase();return r==="default"?t:r==="local"||r==="system"?fA.instance:r==="utc"||r==="gmt"?ys.utcInstance:ys.parseSpecifier(r)||na.create(e)}else return Ym(e)?ys.instance(e):typeof e=="object"&&"offset"in e&&typeof e.offset=="function"?e:new jge(e)}let Ij=()=>Date.now(),Ej="system",Aj=null,$j=null,Cj=null,Oj=60,Pj,Rj=null;class Ei{static get now(){return Ij}static set now(t){Ij=t}static set defaultZone(t){Ej=t}static get defaultZone(){return nd(Ej,fA.instance)}static get defaultLocale(){return Aj}static set defaultLocale(t){Aj=t}static get defaultNumberingSystem(){return $j}static set defaultNumberingSystem(t){$j=t}static get defaultOutputCalendar(){return Cj}static set defaultOutputCalendar(t){Cj=t}static get defaultWeekSettings(){return Rj}static set defaultWeekSettings(t){Rj=NO(t)}static get twoDigitCutoffYear(){return Oj}static set twoDigitCutoffYear(t){Oj=t%100}static get throwOnInvalid(){return Pj}static set throwOnInvalid(t){Pj=t}static resetCaches(){yr.resetCache(),na.resetCache()}}class $l{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const bK=[0,31,59,90,120,151,181,212,243,273,304,334],wK=[0,31,60,91,121,152,182,213,244,274,305,335];function Pa(e,t){return new $l("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function r6(e,t,r){const i=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);const s=i.getUTCDay();return s===0?7:s}function _K(e,t,r){return r+(W2(e)?wK:bK)[t-1]}function SK(e,t){const r=W2(e)?wK:bK,i=r.findIndex(n=>n<t),s=t-r[i];return{month:i+1,day:s}}function i6(e,t){return(e-t+7)%7+1}function lI(e,t=4,r=1){const{year:i,month:s,day:n}=e,o=_K(i,s,n),a=i6(r6(i,s,n),r);let l=Math.floor((o-a+14-t)/7),u;return l<1?(u=i-1,l=z_(u,t,r)):l>z_(i,t,r)?(u=i+1,l=1):u=i,{weekYear:u,weekNumber:l,weekday:a,...vA(e)}}function Lj(e,t=4,r=1){const{weekYear:i,weekNumber:s,weekday:n}=e,o=i6(r6(i,1,t),r),a=K0(i);let l=s*7+n-o-7+t,u;l<1?(u=i-1,l+=K0(u)):l>a?(u=i+1,l-=K0(i)):u=i;const{month:c,day:p}=SK(u,l);return{year:u,month:c,day:p,...vA(e)}}function A4(e){const{year:t,month:r,day:i}=e,s=_K(t,r,i);return{year:t,ordinal:s,...vA(e)}}function kj(e){const{year:t,ordinal:r}=e,{month:i,day:s}=SK(t,r);return{year:t,month:i,day:s,...vA(e)}}function Nj(e,t){if(!Nt(e.localWeekday)||!Nt(e.localWeekNumber)||!Nt(e.localWeekYear)){if(!Nt(e.weekday)||!Nt(e.weekNumber)||!Nt(e.weekYear))throw new E0("Cannot mix locale-based week fields with ISO-based week fields");return Nt(e.localWeekday)||(e.weekday=e.localWeekday),Nt(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Nt(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function Vge(e,t=4,r=1){const i=mA(e.weekYear),s=Ra(e.weekNumber,1,z_(e.weekYear,t,r)),n=Ra(e.weekday,1,7);return i?s?n?!1:Pa("weekday",e.weekday):Pa("week",e.weekNumber):Pa("weekYear",e.weekYear)}function Uge(e){const t=mA(e.year),r=Ra(e.ordinal,1,K0(e.year));return t?r?!1:Pa("ordinal",e.ordinal):Pa("year",e.year)}function xK(e){const t=mA(e.year),r=Ra(e.month,1,12),i=Ra(e.day,1,uI(e.year,e.month));return t?r?i?!1:Pa("day",e.day):Pa("month",e.month):Pa("year",e.year)}function MK(e){const{hour:t,minute:r,second:i,millisecond:s}=e,n=Ra(t,0,23)||t===24&&r===0&&i===0&&s===0,o=Ra(r,0,59),a=Ra(i,0,59),l=Ra(s,0,999);return n?o?a?l?!1:Pa("millisecond",s):Pa("second",i):Pa("minute",r):Pa("hour",t)}function Nt(e){return typeof e>"u"}function Ym(e){return typeof e=="number"}function mA(e){return typeof e=="number"&&e%1===0}function zge(e){return typeof e=="string"}function Gge(e){return Object.prototype.toString.call(e)==="[object Date]"}function TK(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function IK(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function Bge(e){return Array.isArray(e)?e:[e]}function Dj(e,t,r){if(e.length!==0)return e.reduce((i,s)=>{const n=[t(s),s];return i&&r(i[0],n[0])===i[0]?i:n},null)[1]}function qge(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function Av(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function NO(e){if(e==null)return null;if(typeof e!="object")throw new uo("Week settings must be an object");if(!Ra(e.firstDay,1,7)||!Ra(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some(t=>!Ra(t,1,7)))throw new uo("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Ra(e,t,r){return mA(e)&&e>=t&&e<=r}function Hge(e,t){return e-t*Math.floor(e/t)}function ji(e,t=2){const r=e<0;let i;return r?i="-"+(""+-e).padStart(t,"0"):i=(""+e).padStart(t,"0"),i}function Wp(e){if(!(Nt(e)||e===null||e===""))return parseInt(e,10)}function bf(e){if(!(Nt(e)||e===null||e===""))return parseFloat(e)}function s6(e){if(!(Nt(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function n6(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function W2(e){return e%4===0&&(e%100!==0||e%400===0)}function K0(e){return W2(e)?366:365}function uI(e,t){const r=Hge(t-1,12)+1,i=e+(t-r)/12;return r===2?W2(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function yA(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function Fj(e,t,r){return-i6(r6(e,1,t),r)+t-1}function z_(e,t=4,r=1){const i=Fj(e,t,r),s=Fj(e+1,t,r);return(K0(e)-i+s)/7}function DO(e){return e>99?e:e>Ei.twoDigitCutoffYear?1900+e:2e3+e}function EK(e,t,r,i=null){const s=new Date(e),n={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(n.timeZone=i);const o={timeZoneName:t,...n},a=new Intl.DateTimeFormat(r,o).formatToParts(s).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function gA(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,s=r<0||Object.is(r,-0)?-i:i;return r*60+s}function AK(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new uo(`Invalid unit value ${e}`);return t}function cI(e,t){const r={};for(const i in e)if(Av(e,i)){const s=e[i];if(s==null)continue;r[t(i)]=AK(s)}return r}function Uw(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),s=e>=0?"+":"-";switch(t){case"short":return`${s}${ji(r,2)}:${ji(i,2)}`;case"narrow":return`${s}${r}${i>0?`:${i}`:""}`;case"techie":return`${s}${ji(r,2)}${ji(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function vA(e){return qge(e,["hour","minute","second","millisecond"])}const Wge=["January","February","March","April","May","June","July","August","September","October","November","December"],$K=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Jge=["J","F","M","A","M","J","J","A","S","O","N","D"];function CK(e){switch(e){case"narrow":return[...Jge];case"short":return[...$K];case"long":return[...Wge];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const OK=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],PK=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Zge=["M","T","W","T","F","S","S"];function RK(e){switch(e){case"narrow":return[...Zge];case"short":return[...PK];case"long":return[...OK];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const LK=["AM","PM"],Yge=["Before Christ","Anno Domini"],Kge=["BC","AD"],Xge=["B","A"];function kK(e){switch(e){case"narrow":return[...Xge];case"short":return[...Kge];case"long":return[...Yge];default:return null}}function Qge(e){return LK[e.hour<12?0:1]}function e0e(e,t){return RK(t)[e.weekday-1]}function t0e(e,t){return CK(t)[e.month-1]}function r0e(e,t){return kK(t)[e.year<0?0:1]}function i0e(e,t,r="always",i=!1){const s={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},n=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&n){const p=e==="days";switch(t){case 1:return p?"tomorrow":`next ${s[e][0]}`;case-1:return p?"yesterday":`last ${s[e][0]}`;case 0:return p?"today":`this ${s[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,u=s[e],c=i?l?u[1]:u[2]||u[1]:l?s[e][0]:e;return o?`${a} ${c} ago`:`in ${a} ${c}`}function jj(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const s0e={D:aI,DD:eK,DDD:tK,DDDD:rK,t:iK,tt:sK,ttt:nK,tttt:oK,T:aK,TT:lK,TTT:uK,TTTT:cK,f:hK,ff:dK,fff:mK,ffff:gK,F:pK,FF:fK,FFF:yK,FFFF:vK};class ln{static create(t,r={}){return new ln(t,r)}static parseFormat(t){let r=null,i="",s=!1;const n=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),r=null,i="",s=!s):s||a===r?i+=a:(i.length>0&&n.push({literal:/^\s+$/.test(i),val:i}),i=a,r=a)}return i.length>0&&n.push({literal:s||/^\s+$/.test(i),val:i}),n}static macroTokenToFormatOpts(t){return s0e[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return ji(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",s=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",n=(m,g)=>this.loc.extract(t,m,g),o=m=>t.isOffsetFixed&&t.offset===0&&m.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,m.format):"",a=()=>i?Qge(t):n({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(m,g)=>i?t0e(t,m):n(g?{month:m}:{month:m,day:"numeric"},"month"),u=(m,g)=>i?e0e(t,m):n(g?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),c=m=>{const g=ln.macroTokenToFormatOpts(m);return g?this.formatWithSystemDefault(t,g):m},p=m=>i?r0e(t,m):n({era:m},"era"),f=m=>{switch(m){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return s?n({day:"numeric"},"day"):this.num(t.day);case"dd":return s?n({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return s?n({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return s?n({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return s?n({month:"numeric"},"month"):this.num(t.month);case"MM":return s?n({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return s?n({year:"numeric"},"year"):this.num(t.year);case"yy":return s?n({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return s?n({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return s?n({year:"numeric"},"year"):this.num(t.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return c(m)}};return jj(ln.parseFormat(r),f)}formatDurationFromString(t,r){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},s=l=>u=>{const c=i(u);return c?this.num(l.get(c),u.length):u},n=ln.parseFormat(r),o=n.reduce((l,{literal:u,val:c})=>u?l:l.concat(c),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return jj(n,s(a))}}const NK=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function f1(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function m1(...e){return t=>e.reduce(([r,i,s],n)=>{const[o,a,l]=n(t,s);return[{...r,...o},a||i,l]},[{},null,1]).slice(0,2)}function y1(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const s=r.exec(e);if(s)return i(s)}return[null,null]}function DK(...e){return(t,r)=>{const i={};let s;for(s=0;s<e.length;s++)i[e[s]]=Wp(t[r+s]);return[i,null,r+s]}}const FK=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,n0e=`(?:${FK.source}?(?:\\[(${NK.source})\\])?)?`,o6=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,jK=RegExp(`${o6.source}${n0e}`),a6=RegExp(`(?:T${jK.source})?`),o0e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,a0e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,l0e=/(\d{4})-?(\d{3})/,u0e=DK("weekYear","weekNumber","weekDay"),c0e=DK("year","ordinal"),h0e=/(\d{4})-(\d\d)-(\d\d)/,VK=RegExp(`${o6.source} ?(?:${FK.source}|(${NK.source}))?`),p0e=RegExp(`(?: ${VK.source})?`);function X0(e,t,r){const i=e[t];return Nt(i)?r:Wp(i)}function d0e(e,t){return[{year:X0(e,t),month:X0(e,t+1,1),day:X0(e,t+2,1)},null,t+3]}function g1(e,t){return[{hours:X0(e,t,0),minutes:X0(e,t+1,0),seconds:X0(e,t+2,0),milliseconds:s6(e[t+3])},null,t+4]}function J2(e,t){const r=!e[t]&&!e[t+1],i=gA(e[t+1],e[t+2]),s=r?null:ys.instance(i);return[{},s,t+3]}function Z2(e,t){const r=e[t]?na.create(e[t]):null;return[{},r,t+1]}const f0e=RegExp(`^T?${o6.source}$`),m0e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function y0e(e){const[t,r,i,s,n,o,a,l,u]=e,c=t[0]==="-",p=l&&l[0]==="-",f=(m,g=!1)=>m!==void 0&&(g||m&&c)?-m:m;return[{years:f(bf(r)),months:f(bf(i)),weeks:f(bf(s)),days:f(bf(n)),hours:f(bf(o)),minutes:f(bf(a)),seconds:f(bf(l),l==="-0"),milliseconds:f(s6(u),p)}]}const g0e={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function l6(e,t,r,i,s,n,o){const a={year:t.length===2?DO(Wp(t)):Wp(t),month:$K.indexOf(r)+1,day:Wp(i),hour:Wp(s),minute:Wp(n)};return o&&(a.second=Wp(o)),e&&(a.weekday=e.length>3?OK.indexOf(e)+1:PK.indexOf(e)+1),a}const v0e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function b0e(e){const[,t,r,i,s,n,o,a,l,u,c,p]=e,f=l6(t,s,i,r,n,o,a);let m;return l?m=g0e[l]:u?m=0:m=gA(c,p),[f,new ys(m)]}function w0e(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const _0e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,S0e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,x0e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Vj(e){const[,t,r,i,s,n,o,a]=e;return[l6(t,s,i,r,n,o,a),ys.utcInstance]}function M0e(e){const[,t,r,i,s,n,o,a]=e;return[l6(t,a,r,i,s,n,o),ys.utcInstance]}const T0e=f1(o0e,a6),I0e=f1(a0e,a6),E0e=f1(l0e,a6),A0e=f1(jK),UK=m1(d0e,g1,J2,Z2),$0e=m1(u0e,g1,J2,Z2),C0e=m1(c0e,g1,J2,Z2),O0e=m1(g1,J2,Z2);function P0e(e){return y1(e,[T0e,UK],[I0e,$0e],[E0e,C0e],[A0e,O0e])}function R0e(e){return y1(w0e(e),[v0e,b0e])}function L0e(e){return y1(e,[_0e,Vj],[S0e,Vj],[x0e,M0e])}function k0e(e){return y1(e,[m0e,y0e])}const N0e=m1(g1);function D0e(e){return y1(e,[f0e,N0e])}const F0e=f1(h0e,p0e),j0e=f1(VK),V0e=m1(g1,J2,Z2);function U0e(e){return y1(e,[F0e,UK],[j0e,V0e])}const Uj="Invalid Duration",zK={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},z0e={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...zK},ca=146097/400,pg=146097/4800,G0e={years:{quarters:4,months:12,weeks:ca/7,days:ca,hours:ca*24,minutes:ca*24*60,seconds:ca*24*60*60,milliseconds:ca*24*60*60*1e3},quarters:{months:3,weeks:ca/28,days:ca/4,hours:ca*24/4,minutes:ca*24*60/4,seconds:ca*24*60*60/4,milliseconds:ca*24*60*60*1e3/4},months:{weeks:pg/7,days:pg,hours:pg*24,minutes:pg*24*60,seconds:pg*24*60*60,milliseconds:pg*24*60*60*1e3},...zK},Vm=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],B0e=Vm.slice(0).reverse();function tp(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Qt(i)}function GK(e,t){let r=t.milliseconds??0;for(const i of B0e.slice(1))t[i]&&(r+=t[i]*e[i].milliseconds);return r}function zj(e,t){const r=GK(e,t)<0?-1:1;Vm.reduceRight((i,s)=>{if(Nt(t[s]))return i;if(i){const n=t[i]*r,o=e[s][i],a=Math.floor(n/o);t[s]+=a*r,t[i]-=a*o*r}return s},null),Vm.reduce((i,s)=>{if(Nt(t[s]))return i;if(i){const n=t[i]%1;t[i]-=n,t[s]+=n*e[i][s]}return s},null)}function q0e(e){const t={};for(const[r,i]of Object.entries(e))i!==0&&(t[r]=i);return t}class Qt{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let i=r?G0e:z0e;t.matrix&&(i=t.matrix),this.values=t.values,this.loc=t.loc||yr.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(t,r){return Qt.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new uo(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new Qt({values:cI(t,Qt.normalizeUnit),loc:yr.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(Ym(t))return Qt.fromMillis(t);if(Qt.isDuration(t))return t;if(typeof t=="object")return Qt.fromObject(t);throw new uo(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=k0e(t);return i?Qt.fromObject(i,r):Qt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=D0e(t);return i?Qt.fromObject(i,r):Qt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new uo("need to specify a reason the Duration is invalid");const i=t instanceof $l?t:new $l(t,r);if(Ei.throwOnInvalid)throw new vge(i);return new Qt({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new QY(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?ln.create(this.loc,i).formatDurationFromString(this,t):Uj}toHuman(t={}){if(!this.isValid)return Uj;const r=Vm.map(i=>{const s=this.values[i];return Nt(s)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:i.slice(0,-1)}).format(s)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=n6(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Mt.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?GK(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=Qt.fromDurationLike(t),i={};for(const s of Vm)(Av(r.values,s)||Av(this.values,s))&&(i[s]=r.get(s)+this.get(s));return tp(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=Qt.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=AK(t(this.values[i],i));return tp(this,{values:r},!0)}get(t){return this[Qt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...cI(t,Qt.normalizeUnit)};return tp(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i,matrix:s}={}){const o={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:s,conversionAccuracy:i};return tp(this,o)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return zj(this.matrix,t),tp(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=q0e(this.normalize().shiftToAll().toObject());return tp(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>Qt.normalizeUnit(o));const r={},i={},s=this.toObject();let n;for(const o of Vm)if(t.indexOf(o)>=0){n=o;let a=0;for(const u in i)a+=this.matrix[u][o]*i[u],i[u]=0;Ym(s[o])&&(a+=s[o]);const l=Math.trunc(a);r[o]=l,i[o]=(a*1e3-l*1e3)/1e3}else Ym(s[o])&&(i[o]=s[o]);for(const o in i)i[o]!==0&&(r[n]+=o===n?i[o]:i[o]/this.matrix[n][o]);return zj(this.matrix,r),tp(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return tp(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,s){return i===void 0||i===0?s===void 0||s===0:i===s}for(const i of Vm)if(!r(this.values[i],t.values[i]))return!1;return!0}}const dg="Invalid Interval";function H0e(e,t){return!e||!e.isValid?fi.invalid("missing or invalid start"):!t||!t.isValid?fi.invalid("missing or invalid end"):t<e?fi.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class fi{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new uo("need to specify a reason the Interval is invalid");const i=t instanceof $l?t:new $l(t,r);if(Ei.throwOnInvalid)throw new gge(i);return new fi({invalid:i})}static fromDateTimes(t,r){const i=W1(t),s=W1(r),n=H0e(i,s);return n??new fi({start:i,end:s})}static after(t,r){const i=Qt.fromDurationLike(r),s=W1(t);return fi.fromDateTimes(s,s.plus(i))}static before(t,r){const i=Qt.fromDurationLike(r),s=W1(t);return fi.fromDateTimes(s.minus(i),s)}static fromISO(t,r){const[i,s]=(t||"").split("/",2);if(i&&s){let n,o;try{n=Mt.fromISO(i,r),o=n.isValid}catch{o=!1}let a,l;try{a=Mt.fromISO(s,r),l=a.isValid}catch{l=!1}if(o&&l)return fi.fromDateTimes(n,a);if(o){const u=Qt.fromISO(s,r);if(u.isValid)return fi.after(n,u)}else if(l){const u=Qt.fromISO(i,r);if(u.isValid)return fi.before(a,u)}}return fi.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const i=this.start.startOf(t,r);let s;return r?.useLocaleWeeks?s=this.end.reconfigure({locale:i.locale}):s=this.end,s=s.startOf(t,r),Math.floor(s.diff(i,t).get(t))+(s.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?fi.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(W1).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),i=[];let{s}=this,n=0;for(;s<this.e;){const o=r[n]||this.e,a=+o>+this.e?this.e:o;i.push(fi.fromDateTimes(s,a)),s=a,n+=1}return i}splitBy(t){const r=Qt.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,s=1,n;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(l=>l*s));n=+a>+this.e?this.e:a,o.push(fi.fromDateTimes(i,n)),i=n,s+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:fi.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return fi.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((s,n)=>s.s-n.s).reduce(([s,n],o)=>n?n.overlaps(o)||n.abutsStart(o)?[s,n.union(o)]:[s.concat([n]),o]:[s,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const s=[],n=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...n),a=o.sort((l,u)=>l.time-u.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?r=l.time:(r&&+r!=+l.time&&s.push(fi.fromDateTimes(r,l.time)),r=null);return fi.merge(s)}difference(...t){return fi.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} â€“ ${this.e.toISO()})`:dg}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=aI,r={}){return this.isValid?ln.create(this.s.loc.clone(r),t).formatInterval(this):dg}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:dg}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:dg}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:dg}toFormat(t,{separator:r=" â€“ "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:dg}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):Qt.invalid(this.invalidReason)}mapEndpoints(t){return fi.fromDateTimes(t(this.s),t(this.e))}}class nx{static hasDST(t=Ei.defaultZone){const r=Mt.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return na.isValidZone(t)}static normalizeZone(t){return nd(t,Ei.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||yr.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||yr.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||yr.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||yr.create(r,i,n)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null,outputCalendar:n="gregory"}={}){return(s||yr.create(r,i,n)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||yr.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:s=null}={}){return(s||yr.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return yr.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return yr.create(r,null,"gregory").eras(t)}static features(){return{relative:TK(),localeWeek:IK()}}}function Gj(e,t){const r=s=>s.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(Qt.fromMillis(i).as("days"))}function W0e(e,t,r){const i=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const c=Gj(l,u);return(c-c%7)/7}],["days",Gj]],s={},n=e;let o,a;for(const[l,u]of i)r.indexOf(l)>=0&&(o=l,s[l]=u(e,t),a=n.plus(s),a>t?(s[l]--,e=n.plus(s),e>t&&(a=e,s[l]--,e=n.plus(s))):e=a);return[e,s,a,o]}function J0e(e,t,r,i){let[s,n,o,a]=W0e(e,t,r);const l=t-s,u=r.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);u.length===0&&(o<t&&(o=s.plus({[a]:1})),o!==s&&(n[a]=(n[a]||0)+l/(o-s)));const c=Qt.fromObject(n,i);return u.length>0?Qt.fromMillis(l,i).shiftTo(...u).plus(c):c}const u6={arab:"[Ù -Ù©]",arabext:"[Û°-Û¹]",bali:"[á­-á­™]",beng:"[à§¦-à§¯]",deva:"[à¥¦-à¥¯]",fullwide:"[ï¼-ï¼™]",gujr:"[à«¦-à«¯]",hanidec:"[ã€‡|ä¸€|äºŒ|ä¸‰|å››|äº”|å…­|ä¸ƒ|å…«|ä¹]",khmr:"[áŸ -áŸ©]",knda:"[à³¦-à³¯]",laoo:"[à»-à»™]",limb:"[á¥†-á¥]",mlym:"[àµ¦-àµ¯]",mong:"[á -á ™]",mymr:"[á€-á‰]",orya:"[à­¦-à­¯]",tamldec:"[à¯¦-à¯¯]",telu:"[à±¦-à±¯]",thai:"[à¹-à¹™]",tibt:"[à¼ -à¼©]",latn:"\\d"},Bj={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Z0e=u6.hanidec.replace(/[\[|\]]/g,"").split("");function Y0e(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(u6.hanidec)!==-1)t+=Z0e.indexOf(e[r]);else for(const s in Bj){const[n,o]=Bj[s];i>=n&&i<=o&&(t+=i-n)}}return parseInt(t,10)}else return t}function Xa({numberingSystem:e},t=""){return new RegExp(`${u6[e||"latn"]}${t}`)}const K0e="missing Intl.DateTimeFormat.formatToParts support";function ar(e,t=r=>r){return{regex:e,deser:([r])=>t(Y0e(r))}}const X0e="Â ",BK=`[ ${X0e}]`,qK=new RegExp(BK,"g");function Q0e(e){return e.replace(/\./g,"\\.?").replace(qK,BK)}function qj(e){return e.replace(/\./g,"").replace(qK," ").toLowerCase()}function Qa(e,t){return e===null?null:{regex:RegExp(e.map(Q0e).join("|")),deser:([r])=>e.findIndex(i=>qj(r)===qj(i))+t}}function Hj(e,t){return{regex:e,deser:([,r,i])=>gA(r,i),groups:t}}function ox(e){return{regex:e,deser:([t])=>t}}function eve(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function tve(e,t){const r=Xa(t),i=Xa(t,"{2}"),s=Xa(t,"{3}"),n=Xa(t,"{4}"),o=Xa(t,"{6}"),a=Xa(t,"{1,2}"),l=Xa(t,"{1,3}"),u=Xa(t,"{1,6}"),c=Xa(t,"{1,9}"),p=Xa(t,"{2,4}"),f=Xa(t,"{4,6}"),m=w=>({regex:RegExp(eve(w.val)),deser:([S])=>S,literal:!0}),b=(w=>{if(e.literal)return m(w);switch(w.val){case"G":return Qa(t.eras("short"),0);case"GG":return Qa(t.eras("long"),0);case"y":return ar(u);case"yy":return ar(p,DO);case"yyyy":return ar(n);case"yyyyy":return ar(f);case"yyyyyy":return ar(o);case"M":return ar(a);case"MM":return ar(i);case"MMM":return Qa(t.months("short",!0),1);case"MMMM":return Qa(t.months("long",!0),1);case"L":return ar(a);case"LL":return ar(i);case"LLL":return Qa(t.months("short",!1),1);case"LLLL":return Qa(t.months("long",!1),1);case"d":return ar(a);case"dd":return ar(i);case"o":return ar(l);case"ooo":return ar(s);case"HH":return ar(i);case"H":return ar(a);case"hh":return ar(i);case"h":return ar(a);case"mm":return ar(i);case"m":return ar(a);case"q":return ar(a);case"qq":return ar(i);case"s":return ar(a);case"ss":return ar(i);case"S":return ar(l);case"SSS":return ar(s);case"u":return ox(c);case"uu":return ox(a);case"uuu":return ar(r);case"a":return Qa(t.meridiems(),0);case"kkkk":return ar(n);case"kk":return ar(p,DO);case"W":return ar(a);case"WW":return ar(i);case"E":case"c":return ar(r);case"EEE":return Qa(t.weekdays("short",!1),1);case"EEEE":return Qa(t.weekdays("long",!1),1);case"ccc":return Qa(t.weekdays("short",!0),1);case"cccc":return Qa(t.weekdays("long",!0),1);case"Z":case"ZZ":return Hj(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return Hj(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return ox(/[a-z_+-/]{1,256}?/i);case" ":return ox(/[^\S\n\r]/);default:return m(w)}})(e)||{invalidReason:K0e};return b.token=e,b}const rve={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function ive(e,t,r){const{type:i,value:s}=e;if(i==="literal"){const l=/^\s+$/.test(s);return{literal:!l,val:l?" ":s}}const n=t[i];let o=i;i==="hour"&&(t.hour12!=null?o=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?o="hour12":o="hour24":o=r.hour12?"hour12":"hour24");let a=rve[o];if(typeof a=="object"&&(a=a[n]),a)return{literal:!1,val:a}}function sve(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function nve(e,t,r){const i=e.match(t);if(i){const s={};let n=1;for(const o in r)if(Av(r,o)){const a=r[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(s[a.token.val[0]]=a.deser(i.slice(n,n+l))),n+=l}return[i,s]}else return[i,{}]}function ove(e){const t=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,i;return Nt(e.z)||(r=na.create(e.z)),Nt(e.Z)||(r||(r=new ys(e.Z)),i=e.Z),Nt(e.q)||(e.M=(e.q-1)*3+1),Nt(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),Nt(e.u)||(e.S=s6(e.u)),[Object.keys(e).reduce((n,o)=>{const a=t(o);return a&&(n[a]=e[o]),n},{}),r,i]}let $4=null;function ave(){return $4||($4=Mt.fromMillis(1555555555555)),$4}function lve(e,t){if(e.literal)return e;const r=ln.macroTokenToFormatOpts(e.val),i=JK(r,t);return i==null||i.includes(void 0)?e:i}function HK(e,t){return Array.prototype.concat(...e.map(r=>lve(r,t)))}function WK(e,t,r){const i=HK(ln.parseFormat(r),e),s=i.map(o=>tve(o,e)),n=s.find(o=>o.invalidReason);if(n)return{input:t,tokens:i,invalidReason:n.invalidReason};{const[o,a]=sve(s),l=RegExp(o,"i"),[u,c]=nve(t,l,a),[p,f,m]=c?ove(c):[null,null,void 0];if(Av(c,"a")&&Av(c,"H"))throw new E0("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:u,matches:c,result:p,zone:f,specificOffset:m}}}function uve(e,t,r){const{result:i,zone:s,specificOffset:n,invalidReason:o}=WK(e,t,r);return[i,s,n,o]}function JK(e,t){if(!e)return null;const i=ln.create(t,e).dtFormatter(ave()),s=i.formatToParts(),n=i.resolvedOptions();return s.map(o=>ive(o,e,n))}const C4="Invalid DateTime",Wj=864e13;function ax(e){return new $l("unsupported zone",`the zone "${e.name}" is not supported`)}function O4(e){return e.weekData===null&&(e.weekData=lI(e.c)),e.weekData}function P4(e){return e.localWeekData===null&&(e.localWeekData=lI(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function wf(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Mt({...r,...t,old:r})}function ZK(e,t,r){let i=e-t*60*1e3;const s=r.offset(i);if(t===s)return[i,t];i-=(s-t)*60*1e3;const n=r.offset(i);return s===n?[i,s]:[e-Math.min(s,n)*60*1e3,Math.max(s,n)]}function lx(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function qM(e,t,r){return ZK(yA(e),t,r)}function Jj(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),s=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,n={...e.c,year:i,month:s,day:Math.min(e.c.day,uI(i,s))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=Qt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=yA(n);let[l,u]=ZK(a,r,e.zone);return o!==0&&(l+=o,u=e.zone.offset(l)),{ts:l,o:u}}function H1(e,t,r,i,s,n){const{setZone:o,zone:a}=r;if(e&&Object.keys(e).length!==0||t){const l=t||a,u=Mt.fromObject(e,{...r,zone:l,specificOffset:n});return o?u:u.setZone(a)}else return Mt.invalid(new $l("unparsable",`the input "${s}" can't be parsed as ${i}`))}function ux(e,t,r=!0){return e.isValid?ln.create(yr.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function R4(e,t){const r=e.c.year>9999||e.c.year<0;let i="";return r&&e.c.year>=0&&(i+="+"),i+=ji(e.c.year,r?6:4),t?(i+="-",i+=ji(e.c.month),i+="-",i+=ji(e.c.day)):(i+=ji(e.c.month),i+=ji(e.c.day)),i}function Zj(e,t,r,i,s,n){let o=ji(e.c.hour);return t?(o+=":",o+=ji(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=":")):o+=ji(e.c.minute),(e.c.millisecond!==0||e.c.second!==0||!r)&&(o+=ji(e.c.second),(e.c.millisecond!==0||!i)&&(o+=".",o+=ji(e.c.millisecond,3))),s&&(e.isOffsetFixed&&e.offset===0&&!n?o+="Z":e.o<0?(o+="-",o+=ji(Math.trunc(-e.o/60)),o+=":",o+=ji(Math.trunc(-e.o%60))):(o+="+",o+=ji(Math.trunc(e.o/60)),o+=":",o+=ji(Math.trunc(e.o%60)))),n&&(o+="["+e.zone.ianaName+"]"),o}const YK={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},cve={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},hve={ordinal:1,hour:0,minute:0,second:0,millisecond:0},KK=["year","month","day","hour","minute","second","millisecond"],pve=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],dve=["year","ordinal","hour","minute","second","millisecond"];function fve(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new QY(e);return t}function Yj(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return fve(e)}}function Kj(e,t){const r=nd(t.zone,Ei.defaultZone),i=yr.fromObject(t),s=Ei.now();let n,o;if(Nt(e.year))n=s;else{for(const u of KK)Nt(e[u])&&(e[u]=YK[u]);const a=xK(e)||MK(e);if(a)return Mt.invalid(a);const l=r.offset(s);[n,o]=qM(e,l,r)}return new Mt({ts:n,zone:r,loc:i,o})}function Xj(e,t,r){const i=Nt(r.round)?!0:r.round,s=(o,a)=>(o=n6(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),n=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return s(n(r.unit),r.unit);for(const o of r.units){const a=n(o);if(Math.abs(a)>=1)return s(a,o)}return s(e>t?-0:0,r.units[r.units.length-1])}function Qj(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}class Mt{constructor(t){const r=t.zone||Ei.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new $l("invalid input"):null)||(r.isValid?null:ax(r));this.ts=Nt(t.ts)?Ei.now():t.ts;let s=null,n=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[s,n]=[t.old.c,t.old.o];else{const a=r.offset(this.ts);s=lx(this.ts,a),i=Number.isNaN(s.year)?new $l("invalid input"):null,s=i?null:s,n=i?null:a}this._zone=r,this.loc=t.loc||yr.create(),this.invalid=i,this.weekData=null,this.localWeekData=null,this.c=s,this.o=n,this.isLuxonDateTime=!0}static now(){return new Mt({})}static local(){const[t,r]=Qj(arguments),[i,s,n,o,a,l,u]=r;return Kj({year:i,month:s,day:n,hour:o,minute:a,second:l,millisecond:u},t)}static utc(){const[t,r]=Qj(arguments),[i,s,n,o,a,l,u]=r;return t.zone=ys.utcInstance,Kj({year:i,month:s,day:n,hour:o,minute:a,second:l,millisecond:u},t)}static fromJSDate(t,r={}){const i=Gge(t)?t.valueOf():NaN;if(Number.isNaN(i))return Mt.invalid("invalid input");const s=nd(r.zone,Ei.defaultZone);return s.isValid?new Mt({ts:i,zone:s,loc:yr.fromObject(r)}):Mt.invalid(ax(s))}static fromMillis(t,r={}){if(Ym(t))return t<-Wj||t>Wj?Mt.invalid("Timestamp out of range"):new Mt({ts:t,zone:nd(r.zone,Ei.defaultZone),loc:yr.fromObject(r)});throw new uo(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(Ym(t))return new Mt({ts:t*1e3,zone:nd(r.zone,Ei.defaultZone),loc:yr.fromObject(r)});throw new uo("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=nd(r.zone,Ei.defaultZone);if(!i.isValid)return Mt.invalid(ax(i));const s=yr.fromObject(r),n=cI(t,Yj),{minDaysInFirstWeek:o,startOfWeek:a}=Nj(n,s),l=Ei.now(),u=Nt(r.specificOffset)?i.offset(l):r.specificOffset,c=!Nt(n.ordinal),p=!Nt(n.year),f=!Nt(n.month)||!Nt(n.day),m=p||f,g=n.weekYear||n.weekNumber;if((m||c)&&g)throw new E0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(f&&c)throw new E0("Can't mix ordinal dates with month/day");const b=g||n.weekday&&!m;let w,S,M=lx(l,u);b?(w=pve,S=cve,M=lI(M,o,a)):c?(w=dve,S=hve,M=A4(M)):(w=KK,S=YK);let x=!1;for(const R of w){const D=n[R];Nt(D)?x?n[R]=S[R]:n[R]=M[R]:x=!0}const _=b?Vge(n,o,a):c?Uge(n):xK(n),I=_||MK(n);if(I)return Mt.invalid(I);const E=b?Lj(n,o,a):c?kj(n):n,[A,C]=qM(E,u,i),O=new Mt({ts:A,zone:i,o:C,loc:s});return n.weekday&&m&&t.weekday!==O.weekday?Mt.invalid("mismatched weekday",`you can't specify both a weekday of ${n.weekday} and a date of ${O.toISO()}`):O}static fromISO(t,r={}){const[i,s]=P0e(t);return H1(i,s,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,s]=R0e(t);return H1(i,s,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,s]=L0e(t);return H1(i,s,r,"HTTP",r)}static fromFormat(t,r,i={}){if(Nt(t)||Nt(r))throw new uo("fromFormat requires an input string and a format");const{locale:s=null,numberingSystem:n=null}=i,o=yr.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0}),[a,l,u,c]=uve(o,t,r);return c?Mt.invalid(c):H1(a,l,i,`format ${r}`,t,u)}static fromString(t,r,i={}){return Mt.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,s]=U0e(t);return H1(i,s,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new uo("need to specify a reason the DateTime is invalid");const i=t instanceof $l?t:new $l(t,r);if(Ei.throwOnInvalid)throw new yge(i);return new Mt({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const i=JK(t,yr.fromObject(r));return i?i.map(s=>s?s.val:null).join(""):null}static expandFormat(t,r={}){return HK(ln.parseFormat(t),yr.fromObject(r)).map(s=>s.val).join("")}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?O4(this).weekYear:NaN}get weekNumber(){return this.isValid?O4(this).weekNumber:NaN}get weekday(){return this.isValid?O4(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?P4(this).weekday:NaN}get localWeekNumber(){return this.isValid?P4(this).weekNumber:NaN}get localWeekYear(){return this.isValid?P4(this).weekYear:NaN}get ordinal(){return this.isValid?A4(this.c).ordinal:NaN}get monthShort(){return this.isValid?nx.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?nx.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?nx.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?nx.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,i=yA(this.c),s=this.zone.offset(i-t),n=this.zone.offset(i+t),o=this.zone.offset(i-s*r),a=this.zone.offset(i-n*r);if(o===a)return[this];const l=i-o*r,u=i-a*r,c=lx(l,o),p=lx(u,a);return c.hour===p.hour&&c.minute===p.minute&&c.second===p.second&&c.millisecond===p.millisecond?[wf(this,{ts:l}),wf(this,{ts:u})]:[this]}get isInLeapYear(){return W2(this.year)}get daysInMonth(){return uI(this.year,this.month)}get daysInYear(){return this.isValid?K0(this.year):NaN}get weeksInWeekYear(){return this.isValid?z_(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?z_(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:s}=ln.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:s}}toUTC(t=0,r={}){return this.setZone(ys.instance(t),r)}toLocal(){return this.setZone(Ei.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=nd(t,Ei.defaultZone),t.equals(this.zone))return this;if(t.isValid){let s=this.ts;if(r||i){const n=t.offset(this.ts),o=this.toObject();[s]=qM(o,n,t)}return wf(this,{ts:s,zone:t})}else return Mt.invalid(ax(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const s=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return wf(this,{loc:s})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=cI(t,Yj),{minDaysInFirstWeek:i,startOfWeek:s}=Nj(r,this.loc),n=!Nt(r.weekYear)||!Nt(r.weekNumber)||!Nt(r.weekday),o=!Nt(r.ordinal),a=!Nt(r.year),l=!Nt(r.month)||!Nt(r.day),u=a||l,c=r.weekYear||r.weekNumber;if((u||o)&&c)throw new E0("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new E0("Can't mix ordinal dates with month/day");let p;n?p=Lj({...lI(this.c,i,s),...r},i,s):Nt(r.ordinal)?(p={...this.toObject(),...r},Nt(r.day)&&(p.day=Math.min(uI(p.year,p.month),p.day))):p=kj({...A4(this.c),...r});const[f,m]=qM(p,this.o,this.zone);return wf(this,{ts:f,o:m})}plus(t){if(!this.isValid)return this;const r=Qt.fromDurationLike(t);return wf(this,Jj(this,r))}minus(t){if(!this.isValid)return this;const r=Qt.fromDurationLike(t).negate();return wf(this,Jj(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const i={},s=Qt.normalizeUnit(t);switch(s){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(s==="weeks")if(r){const n=this.loc.getStartOfWeek(),{weekday:o}=this;o<n&&(i.weekNumber=this.weekNumber-1),i.weekday=n}else i.weekday=1;if(s==="quarters"){const n=Math.ceil(this.month/3);i.month=(n-1)*3+1}return this.set(i)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?ln.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):C4}toLocaleString(t=aI,r={}){return this.isValid?ln.create(this.loc.clone(r),t).formatDateTime(this):C4}toLocaleParts(t={}){return this.isValid?ln.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:i=!1,includeOffset:s=!0,extendedZone:n=!1}={}){if(!this.isValid)return null;const o=t==="extended";let a=R4(this,o);return a+="T",a+=Zj(this,o,r,i,s,n),a}toISODate({format:t="extended"}={}){return this.isValid?R4(this,t==="extended"):null}toISOWeekDate(){return ux(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:s=!1,extendedZone:n=!1,format:o="extended"}={}){return this.isValid?(s?"T":"")+Zj(this,o==="extended",r,t,i,n):null}toRFC2822(){return ux(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ux(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?R4(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:i=!0}={}){let s="HH:mm:ss.SSS";return(r||t)&&(i&&(s+=" "),r?s+="z":t&&(s+="ZZ")),ux(this,s,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():C4}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return Qt.invalid("created by diffing an invalid DateTime");const s={locale:this.locale,numberingSystem:this.numberingSystem,...i},n=Bge(r).map(Qt.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,u=J0e(a,l,n,s);return o?u.negate():u}diffNow(t="milliseconds",r={}){return this.diff(Mt.now(),t,r)}until(t){return this.isValid?fi.fromDateTimes(this,t):this}hasSame(t,r,i){if(!this.isValid)return!1;const s=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(r,i)<=s&&s<=n.endOf(r,i)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Mt.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let s=["years","months","days","hours","minutes","seconds"],n=t.unit;return Array.isArray(t.unit)&&(s=t.unit,n=void 0),Xj(r,this.plus(i),{...t,numeric:"always",units:s,unit:n})}toRelativeCalendar(t={}){return this.isValid?Xj(t.base||Mt.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Mt.isDateTime))throw new uo("min requires all arguments be DateTimes");return Dj(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Mt.isDateTime))throw new uo("max requires all arguments be DateTimes");return Dj(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:s=null,numberingSystem:n=null}=i,o=yr.fromOpts({locale:s,numberingSystem:n,defaultToEN:!0});return WK(o,t,r)}static fromStringExplain(t,r,i={}){return Mt.fromFormatExplain(t,r,i)}static get DATE_SHORT(){return aI}static get DATE_MED(){return eK}static get DATE_MED_WITH_WEEKDAY(){return bge}static get DATE_FULL(){return tK}static get DATE_HUGE(){return rK}static get TIME_SIMPLE(){return iK}static get TIME_WITH_SECONDS(){return sK}static get TIME_WITH_SHORT_OFFSET(){return nK}static get TIME_WITH_LONG_OFFSET(){return oK}static get TIME_24_SIMPLE(){return aK}static get TIME_24_WITH_SECONDS(){return lK}static get TIME_24_WITH_SHORT_OFFSET(){return uK}static get TIME_24_WITH_LONG_OFFSET(){return cK}static get DATETIME_SHORT(){return hK}static get DATETIME_SHORT_WITH_SECONDS(){return pK}static get DATETIME_MED(){return dK}static get DATETIME_MED_WITH_SECONDS(){return fK}static get DATETIME_MED_WITH_WEEKDAY(){return wge}static get DATETIME_FULL(){return mK}static get DATETIME_FULL_WITH_SECONDS(){return yK}static get DATETIME_HUGE(){return gK}static get DATETIME_HUGE_WITH_SECONDS(){return vK}}function W1(e){if(Mt.isDateTime(e))return e;if(e&&e.valueOf&&Ym(e.valueOf()))return Mt.fromJSDate(e);if(e&&typeof e=="object")return Mt.fromObject(e);throw new uo(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const Xu="system",Ty="unknown",Cd="UTC",mve=Intl.DateTimeFormat().resolvedOptions().timeZone,yve="shortOffset";function gve(e){return"timeZoneIANA"in e}function vve(e){return e.startsWith("UTC")}function $v(e,t=!1){return{json:{read:{source:e,reader:(r,i)=>i[e]?HM(i[e]):null},write:!!t&&{allowNull:!0,writer(r,i){i[e]=r?bve(r):null}}}}}function HM(e,t=Xu){return e?gve(e)?e.timeZoneIANA:wve(e,t):t}function bve(e){return{timeZoneIANA:e}}function wve(e,t=Xu){if(!e||!xj.has(e.timeZone))return t;const r=xj.get(e.timeZone);return vve(e.timeZone)||e.respectsDaylightSaving?r:_ve(r)}function _ve(e){const t=Mt.local().setZone(e),r=Math.min(t.set({month:1,day:1}).offset,t.set({month:5}).offset);return r===0?"Etc/UTC":`Etc/GMT${ys.instance(-r).formatOffset(0,"narrow")}`}function fit(e,t,r,i,s){if(t&&s==="date")return{timeZone:Cd,timeZoneName:void 0};const n=i.timeStyle||i.hour,o=r===Ty;return{timeZone:o?s==="timestamp-offset"?void 0:e??Cd:r,timeZoneName:o&&n?yve:void 0}}const Sve={year:void 0,month:void 0,day:void 0,weekday:void 0},xve={hour:void 0,minute:void 0,second:void 0},XK={timeZone:Cd},Ql={year:"numeric",month:"numeric",day:"numeric"},J1={year:"numeric",month:"long",day:"numeric"},Z1={year:"numeric",month:"short",day:"numeric"},Y1={year:"numeric",month:"long",weekday:"long",day:"numeric"},Jp={hour:"numeric",minute:"numeric"},Vf={...Jp,second:"numeric"},QK={hourCycle:"h23"},K1={...Jp,...QK},X1={...Vf,...QK},eX={"short-date":Ql,"short-date-short-time":{...Ql,...Jp},"short-date-short-time-24":{...Ql,...K1},"short-date-long-time":{...Ql,...Vf},"short-date-long-time-24":{...Ql,...X1},"short-date-le":Ql,"short-date-le-short-time":{...Ql,...Jp},"short-date-le-short-time-24":{...Ql,...K1},"short-date-le-long-time":{...Ql,...Vf},"short-date-le-long-time-24":{...Ql,...X1},"long-month-day-year":J1,"long-month-day-year-short-time":{...J1,...Jp},"long-month-day-year-short-time-24":{...J1,...K1},"long-month-day-year-long-time":{...J1,...Vf},"long-month-day-year-long-time-24":{...J1,...X1},"day-short-month-year":Z1,"day-short-month-year-short-time":{...Z1,...Jp},"day-short-month-year-short-time-24":{...Z1,...K1},"day-short-month-year-long-time":{...Z1,...Vf},"day-short-month-year-long-time-24":{...Z1,...X1},"long-date":Y1,"long-date-short-time":{...Y1,...Jp},"long-date-short-time-24":{...Y1,...K1},"long-date-long-time":{...Y1,...Vf},"long-date-long-time-24":{...Y1,...X1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Jp,"long-time":Vf},Mve=Oi()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),tX={ar:"ar-u-nu-latn-ca-gregory"};let FO=new WeakMap;const bA=eX["short-date-short-time"];function Tve(e){let t=FO.get(e);if(!t){const r=Ko(),i=tX[r]||r,s=h6(e.timeZone??Xu),n={...e,timeZone:s};t=new Intl.DateTimeFormat(i,n),FO.set(e,t)}return t}function mit(e){return eX[e]}function c6(e,t=bA){return Tve(t).format(e)}function yit(e,t=bA){return c6(new Date(e),{...t,...XK,...xve})}function git(e,t=bA){return c6(new Date(`1970-01-01T${e}Z`),{...t,...XK,...Sve})}function vit(e,t=bA){if(t.timeZone)return c6(new Date(e),t);const r=Mt.fromISO(e,{setZone:!0}),i=Ko(),s=tX[i]??i,n=r.offset===0?Cd:t.timeZone,o={...t,timeZone:n};return r.toLocaleString(o,{locale:s})}function h6(e){switch(e){case Xu:return mve;case Ty:return Cd;default:return e}}VD(()=>{FO=new WeakMap});const Ive={ar:"ar-u-nu-latn"};let WM=new WeakMap,rX={};function Eve(e){const t=e||rX;if(!WM.has(t)){const r=Ko(),i=Ive[Ko()]||r;WM.set(t,new Intl.NumberFormat(i,e))}return WM.get(t)}function bit(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function wit(e,t){return Object.is(e,-0)&&(e=0),Eve(t).format(e)}VD(()=>{WM=new WeakMap,rX={}});async function Ave(e,t,r,i){const s=t.exec(r);if(!s)throw new K("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const n=s[1]?`${s[1]}/`:"",o=s[2],a=xme(i),l=`${n}${o}.json`,u=a?`${n}${o}_${a}.json`:l;let c;try{c=await eV(e(u))}catch(p){if(u===l)throw new K("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:p});try{c=await eV(e(l))}catch(f){throw new K("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f})}}return c}async function eV(e){if(tV.fetchBundleAsset!=null)return tV.fetchBundleAsset(e);const t=await Re(e,{responseType:"text"});return JSON.parse(t.data)}let $ve=class{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let s;s=typeof i=="string"?n=>new URL(n,new URL(i,window.location.href)).href:i instanceof URL?n=>new URL(n,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=s,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return Ave(this.getAssetUrl,this.matcher,t,r)}};function Cve(e){return new $ve(e)}const tV={};Sme(Cve({pattern:"esri/",location:Xt}));function Sit(e){return typeof e=="number"}function p6(e){return typeof e=="string"||e instanceof String}const Ove="yyyy-MM-dd",Pve="TT";var zw;(function(e){e.HM="HH:mm",e.HMS="HH:mm:ss",e.HMS_MS="HH:mm:ss.SSS"})(zw||(zw={}));const Rve=[zw.HMS_MS,zw.HMS,zw.HM,Pve];function rV(e){if(!e||!p6(e))return null;const t=Mt.fromFormat(e,Ove);return t.isValid?t:null}function iV(e){return e&&p6(e)?lhe(Rve,t=>{const r=Mt.fromFormat(e,t);return r.isValid?r:null})??null:null}function sV(e){if(!e||!p6(e))return null;const t=Mt.fromISO(e);return t.isValid?t:null}var Cv;(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(Cv||(Cv={}));const Lve=new Set(["integer","small-integer","big-integer","esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"]);function kve(e){return e!=null&&Lve.has(e.type)}function iX(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function sX(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function nX(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function Nve(e,t,r){const i=e?.domain;if(!i)return null;switch(i.type){case"range":{const{min:s,max:n}=Dve(e);if(s!=null&&+t<s||n!=null&&+t>n)return Cv.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(i.codedValues==null||i.codedValues.every(s=>s==null||s.code!==t))return Cv.INVALID_CODED_VALUE}return null}function Dve(e,t){const r=e?.domain;if(!r||r.type!=="range")return;const i="range"in r?r.range[0]:r.minValue,s="range"in r?r.range[1]:r.maxValue,n=kve(e);return iX(e)||nX(e)||sX(e)?{...Fve(e,s,i),isInteger:n}:{min:i!=null&&typeof i=="number"?i:null,max:s!=null&&typeof s=="number"?s:null,rawMin:i,rawMax:s,isInteger:n}}function Fve(e,t,r){return iX(e)?{min:rV(r)?.toMillis(),max:rV(t)?.toMillis(),rawMin:r,rawMax:t}:nX(e)?{min:iV(r)?.toMillis(),max:iV(t)?.toMillis(),rawMin:r,rawMax:t}:sX(e)?{min:sV(r)?.toMillis(),max:sV(t)?.toMillis(),rawMin:r,rawMax:t}:{max:null,min:null}}const jve=()=>be.getLogger("esri.support.arcadeOnDemand");let L4;function Iy(){return L4||(L4=(async()=>{const e=await fe(()=>import("./arcadeUtils-CIAWkIgM.js").then(t=>t.aN),__vite__mapDeps([13,1,12,14,15]),import.meta.url);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),L4}const Vve=(e,t,r)=>oX.create(e,t,r,null,["$feature","$view"],[]),Uve=(e,t,r,i)=>oX.create(e,t,r,i,["$feature","$view"],[]);let oX=class aX{constructor(t,r,i,s,n,o,a){this.services=null,this.script=t,this.evaluate=s;const l=Array.isArray(o)?o:o?.fields;this.fields=l??[],this._syntaxTree=i,this._arcade=r,this._arcadeFeature=n,this._spatialReference=a,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,i,s,n,o){const{arcade:a,Feature:l,Dictionary:u}=await Iy(),c=Fe.fromJSON(r);let p;try{p=a.parseScript(t,o)}catch(C){return jve().error(new K("arcade-bad-expression","Failed to parse arcade script",{script:t,error:C})),null}const f=n.reduce((C,O)=>({...C,[O]:null}),{});let m=null;s!=null&&(m=new u(s),m.immutable=!0,f.$config=null);const g=a.scriptUsesGeometryEngine(p),b=g&&a.enableGeometrySupport(),w=a.scriptUsesFeatureSet(p)&&a.enableFeatureSetSupport(),S=a.scriptIsAsync(p),M=S&&a.enableAsyncSupport(),x={vars:f,spatialReference:c,useAsync:!!M};await Promise.all([b,w,M]);const _=new Set;await a.loadDependentModules(_,p,null,S,g);const I=new u;I.immutable=!1,I.setField("scale",0);const E=a.compileScript(p,x),A=(C,O)=>{const R=C.$view?.timeZone;return"$view"in C&&C.$view&&(I.setField("scale",typeof C.$view=="object"&&"scale"in C.$view?C.$view.scale:void 0),C.$view=I),m&&(C.$config=m),E({vars:C,spatialReference:c,services:O,timeZone:R})};return new aX(t,a,p,A,new l,i,c)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const zve=/^([0-9_])/,Gve=/[^a-z0-9_\u0080-\uffff]+/gi;function Bve(e){return e==null?null:e.trim().replaceAll(Gve,"_").replace(zve,"F$1")||null}const qve=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Hve=["field","normalizationField"];function jO(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(nV(qve,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)nV(Hve,i,t)}}function nV(e,t,r){if(e)for(const i of e){const s=GE(i,t),n=s&&typeof s!="function"&&r.get(s);n&&mn(i,n.name,t)}}function lX(e,t){if(e!=null&&t?.fields?.length)if("startField"in e){const r=t.get(e.startField),i=t.get(e.endField);e.startField=r?.name??null,e.endField=i?.name??null}else{const r=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=r?.name??null,e.endTimeField=i?.name??null}}const k4=new Set;function wA(e,t){return e&&t?(k4.clear(),Ey(k4,e,t),Array.from(k4).sort()):[]}function Ey(e,t,r){if(r)if(t?.fields?.length)if(r.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const i of r)Gn(e,t,i);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const i of r)i!=null&&e.add(i)}}function Gn(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function xit(e,t){return t==null||e==null?[]:t.includes("*")?(e.fields??[]).map(r=>r.name):t}function Mit(e,t,r=1){if(!t||!e)return[];if(t.includes("*"))return["*"];const i=wA(e,t);return i.length/e.fields.length>=r?["*"]:i}async function yn(e,t,r){if(!r)return;const{arcadeUtils:i}=await Iy(),s=i.extractFieldNames(r,t?.fields?.map(n=>n.name));for(const n of s)Gn(e,t,n)}async function uX(e,t,r){if(r&&r!=="1=1"){const i=await XY(r,t);if(!i.isStandardized)throw new K("fieldUtils:collectFilterFields","Where clause is not standardized",{where:r});Ey(e,t,i.fieldNames)}}function Wve({displayField:e,fields:t}){return e||(t?.length?N4(t,"name-or-title")||N4(t,"unique-identifier")||N4(t,"type-or-category")||Jve(t):null)}function Jve(e){for(const t of e){if(!t?.name)continue;const r=t.name.toLowerCase();if(r.includes("name")||r.includes("title"))return t.name}return null}function N4(e,t){for(const r of e)if(r?.valueType&&r.valueType===t)return r.name;return null}async function Tit(e,t){if(!t)return;const r=t.elevationInfo?.featureExpressionInfo;return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}function Zve(e,t,r){r.onStatisticExpression?yn(e,t,r.onStatisticExpression.expression):e.add(r.onStatisticField)}async function Iit(e,t,r){if(!t||!r||!("fields"in r))return;const i=[],s=r.popupTemplate;i.push(Yve(e,t,s)),r.fields&&i.push(...r.fields.map(async n=>Zve(e,t.fieldsIndex,n))),await Promise.all(i)}async function Yve(e,t,r){const i=[];r?.expressionInfos&&i.push(...r.expressionInfos.map(n=>yn(e,t.fieldsIndex,n.expression)));const s=r?.content;if(Array.isArray(s))for(const n of s)n.type==="expression"&&n.expressionInfo&&i.push(yn(e,t.fieldsIndex,n.expressionInfo.expression));await Promise.all(i)}async function Eit(e,t,r){t&&(t.timeInfo&&r?.timeExtent&&Ey(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&Ey(e,t.fieldsIndex,[t.floorInfo.floorField]),r?.where!=null&&await uX(e,t.fieldsIndex,r.where))}async function Ait(e,t,r){t&&r&&await Promise.all(r.map(i=>Kve(e,t,i)))}async function Kve(e,t,r){t&&r&&(r.valueExpression?await yn(e,t.fieldsIndex,r.valueExpression):r.field&&Gn(e,t.fieldsIndex,r.field))}function $it(e){return e?wA(e.fieldsIndex,cX(e)):[]}function Xve(e){if(!e)return[];const t=e.geometryFieldsInfo;return t?wA(e.fieldsIndex,[t.shapeAreaField,t.shapeLengthField]):[]}const Qve=new Set(["oid","global-id","guid"]),e1e=new Set(["oid","global-id"]),t1e=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^shape$/i,/^shape_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/perimeter/i,/objectid/i,/_i$/i];function r1e(e){const t=new Set;hX(e).forEach(i=>t.add(i)),Xve(e).forEach(i=>t.add(i.toLowerCase()));const r=e&&"infoFor3D"in e?e.infoFor3D:void 0;return r&&(Object.values(r.assetMapFieldRoles).forEach(i=>t.add(i.toLowerCase())),Object.values(r.transformFieldRoles).forEach(i=>t.add(i.toLowerCase()))),Array.from(t)}function cX(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;if(!t)return[];const{creationDateField:r,creatorField:i,editDateField:s,editorField:n}=t;return[r,i,s,n].filter(Boolean)}function hX(e){return cX(e).map(t=>t.toLowerCase())}function i1e(e,t){return e.editable&&!Qve.has(e.type)&&!hX(t).includes(e.name?.toLowerCase()??"")}function s1e(e,t){const r=e.name?.toLowerCase()??"";return!(t?.objectIdField!=null&&r===t.objectIdField.toLowerCase()||t?.globalIdField!=null&&r===t.globalIdField.toLowerCase()||r1e(t).includes(r)||e1e.has(e.type)||t1e.some(i=>i.test(r)))}async function Cit(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r?.length&&await Promise.all(r.map(s=>n1e(e,i,s)))}async function n1e(e,t,r){if(!r)return;const i=r.getLabelExpression(),s=r.where;if(i.type==="arcade")await yn(e,t,i.expression);else{const n=i.expression.match(/{[^}]*}/g);n&&n.forEach(o=>{Gn(e,t,o.slice(1,-1))})}await uX(e,t,s)}function o1e(e){const t=e.defaultValue;return t!==void 0&&fX(e,t)?t:e.nullable?null:void 0}function Oit(e){const t=typeof e=="string"?{type:e}:e;return v1e(t)?255:t.type==="esriFieldTypeDate"||t.type==="date"?8:void 0}function pX(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function a1e(e){return e===null||pX(e)}function l1e(e){return e===null||Number.isInteger(e)}function dX(e){return e!=null&&typeof e=="string"}function u1e(e){return e===null||dX(e)}function c1e(){return!0}function fX(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"big-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":case"esriFieldTypeBigInteger":r=e.nullable?l1e:Number.isInteger;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?a1e:pX;break;case"string":case"esriFieldTypeString":r=e.nullable?u1e:dX;break;default:r=c1e}return arguments.length===1?r:r(t)}const h1e=["integer","small-integer","big-integer"],p1e=["single","double"],d1e=["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeBigInteger"],f1e=["esriFieldTypeSingle","esriFieldTypeDouble"],m1e=new Set([...h1e,...d1e]),y1e=new Set([...p1e,...f1e]),g1e=NJ(m1e,y1e);function mX(e){return e!=null&&g1e.has(e.type)}function v1e(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}function b1e(e){return e!=null&&(e.type==="date"||e.type==="esriFieldTypeDate")}function Pit(e){return e!=null&&(e.type==="date-only"||e.type==="esriFieldTypeDateOnly")}function Rit(e){return e!=null&&(e.type==="timestamp-offset"||e.type==="esriFieldTypeTimestampOffset")}function w1e(e){return e!=null&&(e.type==="time-only"||e.type==="esriFieldTypeTimeOnly")}function oV(e){return e!=null&&(e.type==="oid"||e.type==="esriFieldTypeOID")}function aV(e){return e!=null&&(e.type==="global-id"||e.type==="esriFieldTypeGlobalID")}function Lit(e,t){return _1e(e,t)===null}var hI,pI;function kit(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function _1e(e,t){return e==null||e.nullable&&t===null?null:mX(e)&&!S1e(e.type,Number(t))?hI.OUT_OF_RANGE:fX(e,t)?e.domain?Nve(e,t):null:pI.INVALID_TYPE}function S1e(e,t){const r=typeof e=="string"?yX(e):e;if(!r)return!1;const i=r.min,s=r.max;return r.isInteger?Number.isInteger(t)&&t>=i&&t<=s:t>=i&&t<=s}function yX(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return x1e;case"esriFieldTypeInteger":case"integer":return M1e;case"esriFieldTypeBigInteger":case"big-integer":return T1e;case"esriFieldTypeSingle":case"single":return I1e;case"esriFieldTypeDouble":case"double":return E1e}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(hI||(hI={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(pI||(pI={}));const x1e={min:-32768,max:32767,isInteger:!0,rawMin:-32768,rawMax:32767},M1e={min:-2147483648,max:2147483647,isInteger:!0,rawMin:-2147483648,rawMax:2147483647},T1e={min:-Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,isInteger:!0,rawMin:-Number.MAX_SAFE_INTEGER,rawMax:Number.MAX_SAFE_INTEGER},I1e={min:-34e37,max:12e37,isInteger:!1,rawMin:-34e37,rawMax:12e37},E1e={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1,rawMin:-Number.MAX_VALUE,rawMax:Number.MAX_VALUE};function Nit(e,t,r){switch(e){case Cv.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case Cv.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case pI.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case hI.OUT_OF_RANGE:{const{min:i,max:s}=yX(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${s}`}}}function Dit(e,t){return!A1e(e,t,null)}function A1e(e,t,r){if(!t?.attributes||!e)return!0;const i=new Set(Object.keys(t.attributes));let s=!1;for(const n of e)if(!i.has(n)&&(s=!0,r==null))break;return s}function $1e(e){return!!e&&["raster.itempixelvalue","raster.servicepixelvalue"].some(t=>e.toLowerCase().startsWith(t))}function gX(e){const t=e?.match(/{[^}]+}/g);return t?t.map(r=>r.slice(1,-1).split(":")[0].trim()):[]}let JM=class extends ue{constructor(t){super(t),this.type=null}};h([d({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],JM.prototype,"type",void 0),JM=h([j("esri.popup.content.Content")],JM);const Gd=JM;var VO;let Uf=VO=class extends Gd{constructor(e){super(e),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new VO({description:this.description,displayType:this.displayType,title:this.title})}};h([d({type:String,json:{write:!0}})],Uf.prototype,"description",void 0),h([d({type:["auto","preview","list"],json:{write:!0}})],Uf.prototype,"displayType",void 0),h([d({type:String,json:{write:!0}})],Uf.prototype,"title",void 0),h([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Uf.prototype,"type",void 0),Uf=VO=h([j("esri.popup.content.AttachmentsContent")],Uf);const G_=Uf;var UO;let zf=UO=class extends Gd{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new UO({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?Z(this.outFields):null})}};h([d()],zf.prototype,"creator",void 0),h([d()],zf.prototype,"destroyer",void 0),h([d()],zf.prototype,"outFields",void 0),h([d({type:["custom"],readOnly:!0})],zf.prototype,"type",void 0),zf=UO=h([j("esri.popup.content.CustomContent")],zf);const C1e=zf;var zO;let Cg=zO=class extends ue{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new zO({title:this.title,expression:this.expression})}};h([d({type:String,json:{write:!0}})],Cg.prototype,"title",void 0),h([d({type:String,json:{write:!0}})],Cg.prototype,"expression",void 0),h([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Cg.prototype,"returnType",void 0),Cg=zO=h([j("esri.popup.ElementExpressionInfo")],Cg);const O1e=Cg;var GO;let Ob=GO=class extends Gd{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){return new GO({expressionInfo:this.expressionInfo?.clone()})}};h([d({type:O1e,json:{write:!0}})],Ob.prototype,"expressionInfo",void 0),h([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Ob.prototype,"type",void 0),Ob=GO=h([j("esri.popup.content.ExpressionContent")],Ob);const d6=Ob;function We(e,t={}){const r=e instanceof wt?e:new wt(e,t),i={type:t?.ignoreUnknown??1?r.apiValues:String,json:{type:r.jsonValues,read:!t?.readOnly&&{reader:r.read},write:{writer:r.write}}};return t?.readOnly!==void 0&&(i.readOnly=!!t.readOnly),t?.default!==void 0&&(i.json.default=t.default),t?.name!==void 0&&(i.json.name=t.name),t?.nonNullable!==void 0&&(i.nonNullable=t.nonNullable),d(i)}let Og=class extends Yt(ue){constructor(t){super(t),this.dateFormat=null,this.digitSeparator=!1,this.places=null}};h([We(Mve)],Og.prototype,"dateFormat",void 0),h([d({type:Boolean,json:{write:!0}})],Og.prototype,"digitSeparator",void 0),h([d({type:St,json:{write:!0}})],Og.prototype,"places",void 0),Og=h([j("esri.popup.support.FieldInfoFormat")],Og);const ZM=Og;var BO;let sl=BO=class extends ue{constructor(e){super(e),this.fieldName=null,this.format=void 0,this.isEditable=!0,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new BO({fieldName:this.fieldName,format:this.format?.clone(),isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};h([d({type:String,json:{write:!0}})],sl.prototype,"fieldName",void 0),h([d({type:ZM,json:{write:!0}})],sl.prototype,"format",void 0),h([d({type:Boolean,json:{write:{alwaysWriteDefaults:!0},default:!0}})],sl.prototype,"isEditable",void 0),h([d({type:String,json:{write:!0}})],sl.prototype,"label",void 0),h([We(new wt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],sl.prototype,"stringFieldOption",void 0),h([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],sl.prototype,"statisticType",void 0),h([d({type:String,json:{write:!0}})],sl.prototype,"tooltip",void 0),h([d({type:Boolean,json:{write:!0}})],sl.prototype,"visible",void 0),sl=BO=h([j("esri.popup.FieldInfo")],sl);const f6=sl;var qO;let Oc=qO=class extends Gd{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new qO(Z({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};h([d({type:Object,json:{write:!0}})],Oc.prototype,"attributes",void 0),h([d({type:String,json:{write:!0}})],Oc.prototype,"description",void 0),h([d({type:[f6]})],Oc.prototype,"fieldInfos",void 0),h([ge("fieldInfos")],Oc.prototype,"writeFieldInfos",null),h([d({type:String,json:{write:!0}})],Oc.prototype,"title",void 0),h([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],Oc.prototype,"type",void 0),Oc=qO=h([j("esri.popup.content.FieldsContent")],Oc);const B_=Oc;let Gf=class extends ue{constructor(t){super(t),this.altText=null,this.caption="",this.title="",this.type=null}};h([d({type:String,json:{write:!0}})],Gf.prototype,"altText",void 0),h([d({type:String,json:{write:!0}})],Gf.prototype,"caption",void 0),h([d({type:String,json:{write:!0}})],Gf.prototype,"title",void 0),h([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Gf.prototype,"type",void 0),Gf=h([j("esri.popup.content.mixins.MediaInfo")],Gf);const m6=Gf;var HO;let Bf=HO=class extends et{constructor(e){super(e),this.color=null,this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new HO({color:this.color?.clone(),fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};h([d()],Bf.prototype,"color",void 0),h([d()],Bf.prototype,"fieldName",void 0),h([d()],Bf.prototype,"tooltip",void 0),h([d()],Bf.prototype,"value",void 0),Bf=HO=h([j("esri.popup.content.support.ChartMediaInfoValueSeries")],Bf);const P1e=Bf;var WO;let mp=WO=class extends ue{constructor(e){super(e),this.colors=null,this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new WO({colors:Z(this.colors),fields:Z(this.fields),normalizeField:this.normalizeField,series:Z(this.series),tooltipField:this.tooltipField})}};h([d({type:[Le],json:{type:[[St]],write:!0}})],mp.prototype,"colors",void 0),h([d({type:[String],json:{write:!0}})],mp.prototype,"fields",void 0),h([d({type:String,json:{write:!0}})],mp.prototype,"normalizeField",void 0),h([d({type:[P1e],json:{read:!1}})],mp.prototype,"series",void 0),h([d({type:String,json:{write:!0}})],mp.prototype,"tooltipField",void 0),mp=WO=h([j("esri.popup.content.support.ChartMediaInfoValue")],mp);const R1e=mp;let Pb=class extends m6{constructor(t){super(t),this.type=null,this.value=void 0}};h([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Pb.prototype,"type",void 0),h([d({type:R1e,json:{write:!0}})],Pb.prototype,"value",void 0),Pb=h([j("esri.popup.content.mixins.ChartMediaInfo")],Pb);const _A=Pb,SA=Oi()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var JO;let YM=JO=class extends _A{constructor(e){super(e),this.type="bar-chart"}clone(){return new JO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};h([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:SA.write}})],YM.prototype,"type",void 0),YM=JO=h([j("esri.popup.content.BarChartMediaInfo")],YM);const vX=YM;var ZO;let KM=ZO=class extends _A{constructor(e){super(e),this.type="column-chart"}clone(){return new ZO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};h([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:SA.write}})],KM.prototype,"type",void 0),KM=ZO=h([j("esri.popup.content.ColumnChartMediaInfo")],KM);const bX=KM;var YO;let Rb=YO=class extends ue{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new YO({linkURL:this.linkURL,sourceURL:this.sourceURL})}};h([d({type:String,json:{write:!0}})],Rb.prototype,"linkURL",void 0),h([d({type:String,json:{write:!0}})],Rb.prototype,"sourceURL",void 0),Rb=YO=h([j("esri.popup.content.support.ImageMediaInfoValue")],Rb);const L1e=Rb;var KO;let Pg=KO=class extends m6{constructor(e){super(e),this.refreshInterval=0,this.type="image",this.value=void 0}clone(){return new KO({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?.clone()})}};h([d({type:Number,json:{write:!0}})],Pg.prototype,"refreshInterval",void 0),h([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Pg.prototype,"type",void 0),h([d({type:L1e,json:{write:!0}})],Pg.prototype,"value",void 0),Pg=KO=h([j("esri.popup.content.ImageMediaInfo")],Pg);const wX=Pg;var XO;let XM=XO=class extends _A{constructor(e){super(e),this.type="line-chart"}clone(){return new XO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};h([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:SA.write}})],XM.prototype,"type",void 0),XM=XO=h([j("esri.popup.content.LineChartMediaInfo")],XM);const _X=XM;var QO;let QM=QO=class extends _A{constructor(e){super(e),this.type="pie-chart"}clone(){return new QO({altText:this.altText,title:this.title,caption:this.caption,value:this.value?.clone()})}};h([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:SA.write}})],QM.prototype,"type",void 0),QM=QO=h([j("esri.popup.content.PieChartMediaInfo")],QM);const SX=QM,xX={base:m6,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":vX,"column-chart":bX,"line-chart":_X,"pie-chart":SX,image:wX}};var eP;let nl=eP=class extends Gd{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?wX.fromJSON(t):t.type==="barchart"?vX.fromJSON(t):t.type==="columnchart"?bX.fromJSON(t):t.type==="linechart"?_X.fromJSON(t):t.type==="piechart"?SX.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new eP(Z({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};h([d()],nl.prototype,"activeMediaInfoIndex",void 0),h([d({type:Object,json:{write:!0}})],nl.prototype,"attributes",void 0),h([d({type:String,json:{write:!0}})],nl.prototype,"description",void 0),h([d({types:[xX]})],nl.prototype,"mediaInfos",void 0),h([pe("mediaInfos")],nl.prototype,"readMediaInfos",null),h([ge("mediaInfos")],nl.prototype,"writeMediaInfos",null),h([d({type:String,json:{write:!0}})],nl.prototype,"title",void 0),h([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],nl.prototype,"type",void 0),nl=eP=h([j("esri.popup.content.MediaContent")],nl);const dI=nl;var tP;let Lb=tP=class extends ue{constructor(e){super(e),this.field=null,this.order=null}clone(){return new tP({field:this.field,order:this.order})}};h([d({type:String,json:{write:!0}})],Lb.prototype,"field",void 0),h([d({type:["asc","desc"],json:{write:!0}})],Lb.prototype,"order",void 0),Lb=tP=h([j("esri.popup.support.RelatedRecordsInfoFieldOrder")],Lb);const y6=Lb;let nu=class extends Yt(Gd){constructor(t){super(t),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};h([d({type:String,json:{write:!0}})],nu.prototype,"description",void 0),h([d({type:Number,json:{type:St,write:!0}})],nu.prototype,"displayCount",void 0),h([d({type:["list"],json:{write:!0}})],nu.prototype,"displayType",void 0),h([d({type:[y6],json:{write:!0}})],nu.prototype,"orderByFields",void 0),h([d({type:Number,json:{type:St,write:!0}})],nu.prototype,"relationshipId",void 0),h([d({type:String,json:{write:!0}})],nu.prototype,"title",void 0),h([d({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],nu.prototype,"type",void 0),nu=h([j("esri.popup.content.RelationshipContent")],nu);const fI=nu;var rP;let kb=rP=class extends Gd{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new rP({text:this.text})}};h([d({type:String,json:{write:!0}})],kb.prototype,"text",void 0),h([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],kb.prototype,"type",void 0),kb=rP=h([j("esri.popup.content.TextContent")],kb);const mI=kb,k1e={base:null,key:"type",typeMap:{attachment:G_,media:dI,text:mI,expression:d6,field:B_,relationship:fI}};var iP;let qf=iP=class extends ue{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new iP({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};h([d({type:String,json:{write:!0}})],qf.prototype,"name",void 0),h([d({type:String,json:{write:!0}})],qf.prototype,"title",void 0),h([d({type:String,json:{write:!0}})],qf.prototype,"expression",void 0),h([d({type:["string","number"],json:{write:!0}})],qf.prototype,"returnType",void 0),qf=iP=h([j("esri.popup.ExpressionInfo")],qf);const N1e=qf;var sP;let Nb=sP=class extends ue{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new sP({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};h([d({type:Boolean,json:{write:!0}})],Nb.prototype,"returnTopmostRaster",void 0),h([d({type:Boolean,json:{write:!0}})],Nb.prototype,"showNoDataRecords",void 0),Nb=sP=h([j("esri.popup.LayerOptions")],Nb);const D1e=Nb;var nP;let Db=nP=class extends ue{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new nP({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?Z(this.orderByFields):null})}};h([d({type:Boolean,json:{write:!0}})],Db.prototype,"showRelatedRecords",void 0),h([d({type:[y6],json:{write:!0}})],Db.prototype,"orderByFields",void 0),Db=nP=h([j("esri.popup.RelatedRecordsInfo")],Db);const F1e=Db;let MX=0;const Y2=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+MX++})}};return t=h([j("esri.core.Identifiable")],t),t},g6=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:MX++})}};return t=h([j("esri.core.Identifiable.NumericIdentifiable")],t),t};let lV=class extends Y2(class{}){};lV=h([j("esri.core.Identifiable")],lV);var oP;let ga=oP=class extends Y2(et){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.icon=null,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new oP({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};h([d()],ga.prototype,"active",void 0),h([d()],ga.prototype,"className",void 0),h([d()],ga.prototype,"disabled",void 0),h([d()],ga.prototype,"icon",void 0),h([d()],ga.prototype,"id",void 0),h([d()],ga.prototype,"indicator",void 0),h([d()],ga.prototype,"title",void 0),h([d()],ga.prototype,"type",void 0),h([d()],ga.prototype,"visible",void 0),ga=oP=h([j("esri.support.actions.ActionBase")],ga);const v6=ga;var aP;let eT=aP=class extends v6{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new aP({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};h([d()],eT.prototype,"image",void 0),eT=aP=h([j("esri.support.actions.ActionButton")],eT);const j1e=eT;var lP;let Fb=lP=class extends v6{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new lP({active:this.active,className:this.className,disabled:this.disabled,icon:this.icon,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};h([d()],Fb.prototype,"image",void 0),h([d()],Fb.prototype,"value",void 0),Fb=lP=h([j("esri.support.actions.ActionToggle")],Fb);const V1e=Fb,Q1="relationships/",uV="expression/",U1e=qe.ofType({key:"type",defaultKeyValue:"button",base:v6,typeMap:{button:j1e,toggle:V1e}}),z1e={base:Gd,key:"type",typeMap:{media:dI,custom:C1e,text:mI,attachments:G_,fields:B_,expression:d6,relationship:fI}},G1e=new Set(["attachments","fields","media","text","expression","relationship"]);let Ji=class extends Yt(ue){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(t){return Array.isArray(t)?t.map(r=>Zu(z1e,r)):typeof t=="string"||typeof t=="function"||t instanceof HTMLElement||Ud(t)?t:(be.getLogger(this).error("content error","unsupported content value",{value:t}),null)}readContent(t,r){const{popupElements:i}=r;return Array.isArray(i)&&i.length>0?this._readPopupInfoElements(r.description,r.mediaInfos,i):this._readPopupInfo(r)}writeContent(t,r,i,s){typeof t!="string"?Array.isArray(t)&&(r.popupElements=t.filter(n=>G1e.has(n.type)).map(n=>n?.toJSON(s)),r.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(r):n.type==="media"?this._writeMediaContent(n,r):n.type==="text"?this._writeTextContent(n,r):n.type==="relationship"&&this._writeRelationshipContent(n,r)})):r.description=t}writeFieldInfos(t,r,i,s){const{content:n}=this,o=Array.isArray(n)?n:null;if(t){const a=o?o.filter(u=>u.type==="fields"):[],l=a.length&&a.every(u=>u.fieldInfos?.length);r.fieldInfos=t.filter(Boolean).map(u=>{const c=u.toJSON(s);return l&&(c.visible=!1),c})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,r)}writeLayerOptions(t,r,i,s){r[i]=!t||t.showNoDataRecords===null&&t.returnTopmostRaster===null?null:t.toJSON(s)}writeTitle(t,r){r.title=t||""}async collectRequiredFields(t,r){const i=this.expressionInfos||[];await this._collectExpressionInfoFields(t,r,[...i,...this._getContentExpressionInfos(this.content,i)]),Ey(t,r,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(t){const r=new Set;return await this.collectRequiredFields(r,t),[...r].sort()}_writeFieldsContent(t,r){if(!Array.isArray(t.fieldInfos)||!t.fieldInfos.length)return;const i=Z(t.fieldInfos);Array.isArray(r.fieldInfos)?i.forEach(s=>{const n=r.fieldInfos.find(o=>o.fieldName?.toLowerCase()===s.fieldName?.toLowerCase());n?n.visible=!0:r.fieldInfos.push(s)}):r.fieldInfos=i}_writeAttachmentContent(t){t.showAttachments||(t.showAttachments=!0)}_writeRelationshipContent(t,r){const i=t.orderByFields?.map(n=>this._toFieldOrderJSON(n,t.relationshipId))||[],s=[...r.relatedRecordsInfo?.orderByFields||[],...i];r.relatedRecordsInfo={showRelatedRecords:!0,...s?.length&&{orderByFields:s}}}_writeTextContent(t,r){!r.description&&t.text&&(r.description=t.text)}_writeMediaContent(t,r){if(!Array.isArray(t.mediaInfos)||!t.mediaInfos.length)return;const i=Z(t.mediaInfos);Array.isArray(r.mediaInfos)?r.mediaInfos=[...r.mediaInfos,...i]:r.mediaInfos=i}_readPopupInfoElements(t,r,i){const s={description:!1,mediaInfos:!1};return i.map(n=>n.type==="media"?(n.mediaInfos||!r||s.mediaInfos||(n.mediaInfos=r,s.mediaInfos=!0),dI.fromJSON(n)):n.type==="text"?(n.text||!t||s.description||(n.text=t,s.description=!0),mI.fromJSON(n)):n.type==="attachments"?G_.fromJSON(n):n.type==="fields"?B_.fromJSON(n):n.type==="expression"?d6.fromJSON(n):n.type==="relationship"?fI.fromJSON(n):void 0).filter(Boolean)}_toRelationshipContent(t){const{field:r,order:i}=t;if(!r?.startsWith(Q1))return null;const s=r.replace(Q1,"").split("/");if(s.length!==2)return null;const n=parseInt(s[0],10),o=s[1];return typeof n=="number"&&o?fI.fromJSON({relationshipId:n,orderByFields:[{field:o,order:i}]}):null}_toFieldOrderJSON(t,r){const{order:i,field:s}=t;return{field:`${Q1}${r}/${s}`,order:i}}_readPopupInfo({description:t,mediaInfos:r,showAttachments:i,relatedRecordsInfo:s={showRelatedRecords:!1}}){const n=[];t?n.push(new mI({text:t})):n.push(new B_),Array.isArray(r)&&r.length&&n.push(dI.fromJSON({mediaInfos:r})),i&&n.push(G_.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=s;return o&&a?.length&&a.forEach(l=>{const u=this._toRelationshipContent(l);u&&n.push(u)}),n.length?n:t}_getContentElementFields(t){const r=t?.type;if(r==="attachments")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description)];if(r==="custom")return t.outFields||[];if(r==="fields")return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...this._getFieldInfoFields(t.fieldInfos??this.fieldInfos)];if(r==="media"){const i=t.mediaInfos||[];return[...this._extractFieldNames(t.title),...this._extractFieldNames(t.description),...i.reduce((s,n)=>[...s,...this._getMediaInfoFields(n)],[])]}return r==="text"?this._extractFieldNames(t.text):[]}_getMediaInfoFields(t){const{caption:r,title:i,value:s}=t,n=s||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:u,linkURL:c}=n,p=[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(u),...this._extractFieldNames(c),...o??[]];return a&&p.push(a),l&&p.push(l),p}_getContentExpressionInfos(t,r){return Array.isArray(t)?t.reduce((i,s)=>[...i,...s.type==="expression"&&s.expressionInfo?[s.expressionInfo]:[]],r):[]}_getContentFields(t){return typeof t=="string"?this._extractFieldNames(t):Array.isArray(t)?t.reduce((r,i)=>[...r,...this._getContentElementFields(i)],[]):[]}async _collectExpressionInfoFields(t,r,i){i&&await Promise.all(i.map(s=>yn(t,r,s.expression)))}_getFieldInfoFields(t){return t?t.filter(({fieldName:r,visible:i})=>!(i!==void 0&&!i||!r||r.startsWith(Q1)||r.startsWith(uV))).map(r=>r.fieldName):[]}_getActionsFields(t){return t?t.toArray().reduce((r,i)=>[...r,...this._getActionFields(i)],[]):[]}_getActionFields(t){const{className:r,title:i,type:s}=t,n=s==="button"||s==="toggle"?t.image:"";return[...this._extractFieldNames(i),...this._extractFieldNames(r),...this._extractFieldNames(n)]}_getTitleFields(t){return typeof t=="string"?this._extractFieldNames(t):[]}_extractFieldNames(t){return gX(t).filter(r=>!(r.indexOf(Q1)===0||r.indexOf(uV)===0))}};h([d({type:U1e})],Ji.prototype,"actions",void 0),h([d()],Ji.prototype,"content",void 0),h([Zt("content")],Ji.prototype,"castContent",null),h([pe("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Ji.prototype,"readContent",null),h([ge("content",{popupElements:{type:qe.ofType(k1e)},showAttachments:{type:Boolean},mediaInfos:{type:qe.ofType(xX)},description:{type:String},relatedRecordsInfo:{type:F1e}})],Ji.prototype,"writeContent",null),h([d({type:[N1e],json:{write:!0}})],Ji.prototype,"expressionInfos",void 0),h([d({type:[f6]})],Ji.prototype,"fieldInfos",void 0),h([ge("fieldInfos")],Ji.prototype,"writeFieldInfos",null),h([d({type:D1e})],Ji.prototype,"layerOptions",void 0),h([ge("layerOptions")],Ji.prototype,"writeLayerOptions",null),h([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Ji.prototype,"lastEditInfoEnabled",void 0),h([d()],Ji.prototype,"outFields",void 0),h([d()],Ji.prototype,"overwriteActions",void 0),h([d()],Ji.prototype,"returnGeometry",void 0),h([d({json:{type:String}})],Ji.prototype,"title",void 0),h([ge("title")],Ji.prototype,"writeTitle",null),Ji=h([j("esri.PopupTemplate")],Ji);const Bd=Ji,cV=new wt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let B1e=0,Rg=class extends ue{constructor(t){super(t),this.id="sym"+B1e++,this.type=null,this.color=new Le([0,0,0,1])}readColor(t){return t?.[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}async collectRequiredFields(t,r){}hash(){return JSON.stringify(this.toJSON())}clone(){}};h([d({type:cV.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:cV.write}}})],Rg.prototype,"type",void 0),h([d({type:Le,json:{write:{allowNull:!0}}})],Rg.prototype,"color",void 0),h([pe("color")],Rg.prototype,"readColor",null),Rg=h([j("esri.symbols.Symbol")],Rg);const js=Rg;var uP;let yp=uP=class extends js{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){Object.assign(t,e)}async collectRequiredFields(e,t){if(this.data?.type==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const i=r.map(s=>{const n=s.valueExpressionInfo;return n?yn(e,t,n.expression):null});await Promise.all(i)}}}clone(){return new uP({data:Z(this.data)})}hash(){return fJ(JSON.stringify(this.data)).toString()}};h([d({json:{write:!1}})],yp.prototype,"color",void 0),h([d({json:{write:!0}})],yp.prototype,"data",void 0),h([pe("data",["symbol"])],yp.prototype,"readData",null),h([ge("data",{})],yp.prototype,"writeData",null),h([We({CIMSymbolReference:"cim"},{readOnly:!0})],yp.prototype,"type",void 0),yp=uP=h([j("esri.symbols.CIMSymbol")],yp);const qd=yp;let Lg=class extends ue{constructor(t){super(t),this.enabled=!0,this.type=null,this.ignoreDrivers=!1}writeEnabled(t,r,i){t||(r[i]=t)}};h([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Lg.prototype,"enabled",void 0),h([ge("enabled")],Lg.prototype,"writeEnabled",null),h([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Lg.prototype,"type",void 0),Lg=h([j("esri.symbols.Symbol3DLayer")],Lg);const cc=Lg,q1e=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,H1e="screenUtils.toPt: input not recognized!",TX=96;function W1e(e){return e?e/72*TX:0}function za(e){return e?72*e/TX:0}function Ut(e){if(typeof e=="string"){const t=e.match(q1e);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),s=e.charAt(0)==="-",n=i==="px"?za(r):r;return s?-n:n}return console.warn(H1e),null}return e}function Cs(e=0,t=0){return{x:e,y:t}}function Wit(e=0,t=0){return[e,t]}function xA(e){const t=XE(100*(1-e));return Math.max(0,Math.min(t,100))}function q_(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function J1e(e,t){const r=t.transparency!=null?q_(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new Le([i[0]||0,i[1]||0,i[2]||0,r]):null}function Z1e(e,t){t.color=e.toJSON().slice(0,3);const r=xA(e.a);r!==0&&(t.transparency=r)}const Hd={type:Le,json:{type:[St],default:null,read:{source:["color","transparency"],reader:J1e},write:{target:{color:{type:[St]},transparency:{type:St}},writer:Z1e}}},Qu={type:Number,cast:Ut,json:{write:!0}};let Hf=class extends ue{constructor(t){super(t),this.color=new Le([0,0,0,1]),this.extensionLength=0,this.size=za(1)}clone(){}cloneProperties(){return{color:Z(this.color),size:this.size,extensionLength:this.extensionLength}}};h([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Hf.prototype,"type",void 0),h([d(Hd)],Hf.prototype,"color",void 0),h([d({...Qu,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],Hf.prototype,"extensionLength",void 0),h([d(Qu)],Hf.prototype,"size",void 0),Hf=h([j("esri.symbols.edges.Edges3D")],Hf);const b6=Hf;var cP;let tT=cP=class extends b6{constructor(e){super(e),this.type="sketch"}clone(){return new cP(this.cloneProperties())}};h([We({sketch:"sketch"},{readOnly:!0})],tT.prototype,"type",void 0),tT=cP=h([j("esri.symbols.edges.SketchEdges3D")],tT);const Y1e=tT;var hP;let rT=hP=class extends b6{constructor(e){super(e),this.type="solid"}clone(){return new hP(this.cloneProperties())}};h([We({solid:"solid"},{readOnly:!0})],rT.prototype,"type",void 0),rT=hP=h([j("esri.symbols.edges.SolidEdges3D")],rT);const IX=rT,EX={types:{key:"type",base:b6,typeMap:{solid:IX,sketch:Y1e}},json:{write:!0}};var pP;let Qo=pP=class extends ue{constructor(e){super(e),this.color=null}clone(){const e={color:this.color!=null?this.color.clone():null};return new pP(e)}};h([d(Hd)],Qo.prototype,"color",void 0),Qo=pP=h([j("esri.symbols.support.Symbol3DMaterial")],Qo);var dP;let gp=dP=class extends cc{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new dP({edges:this.edges?.clone(),enabled:this.enabled,material:this.material?.clone(),castShadows:this.castShadows,size:this.size})}};h([We({Extrude:"extrude"},{readOnly:!0})],gp.prototype,"type",void 0),h([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],gp.prototype,"size",void 0),h([d({type:Qo,json:{write:!0}})],gp.prototype,"material",void 0),h([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],gp.prototype,"castShadows",void 0),h([d(EX)],gp.prototype,"edges",void 0),gp=dP=h([j("esri.symbols.ExtrudeSymbol3DLayer")],gp);const AX=gp;let jb=class extends js{constructor(t){super(t),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};h([We({esriSLS:"simple-line"},{readOnly:!0})],jb.prototype,"type",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],jb.prototype,"width",void 0),jb=h([j("esri.symbols.LineSymbol")],jb);const K1e=jb,X1e=["begin","end","begin-end"],$X=["arrow","circle","square","diamond","cross","x"];var fP;let ou=fP=class extends ue{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){t[r]=i?.origin==="web-map"?"arrow":e}set color(e){this._set("color",e)}readColor(e){return e?.[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){i?.origin==="web-map"||(t[r]=e)}clone(){return new fP({color:Z(this.color),placement:this.placement,style:this.style})}hash(){return`${this.placement}.${this.color?.hash()}.${this.style}`}};h([d({type:["begin","end","begin-end"],json:{write:!0}})],ou.prototype,"placement",void 0),h([We({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],ou.prototype,"type",void 0),h([d({type:$X})],ou.prototype,"style",void 0),h([ge("style")],ou.prototype,"writeStyle",null),h([d({type:Le,value:null,json:{write:{allowNull:!0}}})],ou.prototype,"color",null),h([pe("color")],ou.prototype,"readColor",null),h([ge("color")],ou.prototype,"writeColor",null),ou=fP=h([j("esri.symbols.LineSymbolMarker")],ou);const Q1e=ou;var mP;const D4=new wt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let Pc=mP=class extends K1e{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,s,n){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=Ut(r)),i!=null&&(o.cap=i),s!=null&&(o.join=s),n!=null&&(o.miterLimit=Ut(n)),o}clone(){return new mP({color:Z(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:this.marker?.clone()})}hash(){return`${super.hash()}.${this.color?.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${this.marker?.hash()}`}};h([We({esriSLS:"simple-line"},{readOnly:!0})],Pc.prototype,"type",void 0),h([d({type:D4.apiValues,json:{read:D4.read,write:D4.write}})],Pc.prototype,"style",void 0),h([d({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&r?.origin==null})}}})],Pc.prototype,"cap",void 0),h([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&r?.origin==null})}}})],Pc.prototype,"join",void 0),h([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Q1e}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],Pc.prototype,"marker",void 0),h([d({type:Number,json:{read:!1,write:!1}})],Pc.prototype,"miterLimit",void 0),Pc=mP=h([j("esri.symbols.SimpleLineSymbol")],Pc);const qn=Pc;let Vb=class extends js{constructor(t){super(t),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline?.hash()}`}};h([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":qn}},json:{default:null,write:!0}})],Vb.prototype,"outline",void 0),h([d({type:["simple-fill","picture-fill"],readOnly:!0})],Vb.prototype,"type",void 0),Vb=h([j("esri.symbols.FillSymbol")],Vb);const CX=Vb;let iT=class extends ue{constructor(t){super(t)}clone(){throw new Error("Subclasses of LinePattern3D should implement their own clone method.")}};h([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],iT.prototype,"type",void 0),iT=h([j("esri.symbols.patterns.LinePattern3D")],iT);const OX=iT,ebe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var yP;const tbe=Oi()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let Ub=yP=class extends OX{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new yP(e)}};h([d({type:["style"]})],Ub.prototype,"type",void 0),h([We(tbe),d({type:ebe})],Ub.prototype,"style",void 0),Ub=yP=h([j("esri.symbols.patterns.LineStylePattern3D")],Ub);const w6=Ub;let sT=class extends ue{constructor(t){super(t),this.type="style"}clone(){throw new Error("Subclasses of Pattern3D should implement their own clone method.")}};h([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],sT.prototype,"type",void 0),sT=h([j("esri.symbols.patterns.Pattern3D")],sT);const PX=sT,rbe=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var gP;let zb=gP=class extends PX{constructor(e){super(e),this.type="style",this.style="solid"}clone(){return new gP({style:this.style})}};h([d({type:["style"]})],zb.prototype,"type",void 0),h([d({type:rbe,json:{read:!0,write:!0}})],zb.prototype,"style",void 0),zb=gP=h([j("esri.symbols.patterns.StylePattern3D")],zb);const RX=zb,ibe={types:{key:"type",base:PX,typeMap:{style:RX}},json:{write:!0}},LX={types:{key:"type",base:OX,typeMap:{style:w6}},json:{write:!0}},Gw=new Le("white");new Le("black");const sbe=new Le([255,255,255,0]);function nbe(e){return e.r===0&&e.g===0&&e.b===0}var vP;let Bw=vP=class extends Qo{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:this.color!=null?this.color.clone():null,colorMixMode:this.colorMixMode};return new vP(e)}};h([We({multiply:"multiply",replace:"replace",tint:"tint"})],Bw.prototype,"colorMixMode",void 0),Bw=vP=h([j("esri.symbols.support.Symbol3DFillMaterial")],Bw);function _6(e=hbe){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function S6(e,t,r,i,s,n,o=_6()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function Qit(e,t){const r=isFinite(e[2])||isFinite(e[5]);return new yt(r?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})}function est(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function tst(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function rst(e,t,r=0,i=t.length/3){let s=e[0],n=e[1],o=e[2],a=e[3],l=e[4],u=e[5];for(let c=0;c<i;c++)s=Math.min(s,t[r+3*c]),n=Math.min(n,t[r+3*c+1]),o=Math.min(o,t[r+3*c+2]),a=Math.max(a,t[r+3*c]),l=Math.max(l,t[r+3*c+1]),u=Math.max(u,t[r+3*c+2]);e[0]=s,e[1]=n,e[2]=o,e[3]=a,e[4]=l,e[5]=u}function obe(e){return e[0]>=e[3]?0:e[3]-e[0]}function abe(e){return e[1]>=e[4]?0:e[4]-e[1]}function lbe(e){return e[2]>=e[5]?0:e[5]-e[2]}function ist(e,t=[0,0,0]){return t[0]=obe(e),t[1]=abe(e),t[2]=lbe(e),t}function sst(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function nst(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function ube(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function ost(e){return e?ube(e,hV):_6(hV)}function ast(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function cbe(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=Number.NEGATIVE_INFINITY,e[3]=i,e[4]=s,e[5]=Number.POSITIVE_INFINITY,e}function bP(e){return e.length===6}function lst(e,t,r){if(e==null||t==null)return e===t;if(!bP(e)||!bP(t))return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const hV=[1/0,1/0,1/0,-1/0,-1/0,-1/0],hbe=[0,0,0,0,0,0];_6();const pbe=S6(-.5,-.5,-.5,.5,.5,.5),dbe=S6(-.5,-.5,0,.5,.5,1),fbe=S6(-.5,-.5,0,.5,.5,.5);function ust(e){switch(e){case"sphere":case"cube":case"diamond":return pbe;case"cylinder":case"cone":case"inverted-cone":return dbe;case"tetrahedron":return fbe;default:return}}const x6=["butt","square","round"],mbe=[...x6,"none"],kX=["miter","bevel","round"];var wP;let Wf=wP=class extends ue{constructor(e){super(e),this.color=new Le([0,0,0,1]),this.size=za(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size,pattern:this.pattern!=null?this.pattern.clone():null,patternCap:this.patternCap};return new wP(e)}};h([d(Hd)],Wf.prototype,"color",void 0),h([d(Qu)],Wf.prototype,"size",void 0),h([d(LX)],Wf.prototype,"pattern",void 0),h([d({type:x6,json:{default:"butt",write:{overridePolicy(){return{enabled:this.pattern!=null}}}}})],Wf.prototype,"patternCap",void 0),Wf=wP=h([j("esri.symbols.support.Symbol3DOutline")],Wf);var nT;let Rc=nT=class extends cc{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:this.edges!=null?this.edges.clone():null,enabled:this.enabled,material:this.material!=null?this.material.clone():null,pattern:this.pattern!=null?this.pattern.clone():null,castShadows:this.castShadows,outline:this.outline!=null?this.outline.clone():null};return new nT(e)}static fromSimpleFillSymbol(e){const t=e.outline&&e.outline.style&&e.outline.style!=="solid"?new w6({style:e.outline.style}):null,r={size:e.outline?.width??0,color:(e.outline?.color??Gw).clone(),pattern:t};return t&&e.outline?.cap&&(r.patternCap=e.outline.cap),new nT({material:new Bw({color:(e.color??sbe).clone()}),pattern:e.style&&e.style!=="solid"?new RX({style:e.style}):null,outline:r})}};h([We({Fill:"fill"},{readOnly:!0})],Rc.prototype,"type",void 0),h([d({type:Bw,json:{write:!0}})],Rc.prototype,"material",void 0),h([d(ibe)],Rc.prototype,"pattern",void 0),h([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Rc.prototype,"castShadows",void 0),h([d({type:Wf,json:{write:!0}})],Rc.prototype,"outline",void 0),h([d(EX)],Rc.prototype,"edges",void 0),Rc=nT=h([j("esri.symbols.FillSymbol3DLayer")],Rc);const qy=Rc,ybe=["none","underline","line-through"],gbe=["normal","italic","oblique"],vbe=["normal","lighter","bold","bolder"],NX={type:Number,cast:e=>{const t=Bo(e);return t===0?1:Gl(t,.1,4)},nonNullable:!0},bbe=["left","right","center"],wbe=["baseline","top","middle","bottom"],DX={type:bbe,nonNullable:!0},FX={type:wbe,nonNullable:!0},cst=8;var _P;let Lc=_P=class extends ue{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Ut(e)}clone(){return new _P({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};h([d({type:ybe,json:{default:"none",write:!0}})],Lc.prototype,"decoration",void 0),h([d({type:String,json:{write:!0}})],Lc.prototype,"family",void 0),h([d({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],Lc.prototype,"size",void 0),h([Zt("size")],Lc.prototype,"castSize",null),h([d({type:gbe,json:{default:"normal",write:!0}})],Lc.prototype,"style",void 0),h([d({type:vbe,json:{default:"normal",write:!0}})],Lc.prototype,"weight",void 0),Lc=_P=h([j("esri.symbols.Font")],Lc);const MA=Lc;var SP;const _be=Oi()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Jf=SP=class extends ue{constructor(e){super(e)}readHref(e,t,r){return e?h1(e,r):t.dataURI}writeHref(e,t,r,i){e&&(Gy(e)?t.dataURI=e:(t.href=B2(e,i),Yo(t.href)&&(t.href=La(t.href))))}clone(){return new SP({href:this.href,primitive:this.primitive})}};h([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Jf.prototype,"href",void 0),h([pe("href")],Jf.prototype,"readHref",null),h([ge("href",{href:{type:String},dataURI:{type:String}})],Jf.prototype,"writeHref",null),h([We(_be)],Jf.prototype,"primitive",void 0),Jf=SP=h([j("esri.symbols.support.IconSymbol3DLayerResource")],Jf);var xP;let A0=xP=class extends et{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new xP({x:this.x,y:this.y})}};h([d({type:Number})],A0.prototype,"x",void 0),h([d({type:Number})],A0.prototype,"y",void 0),A0=xP=h([j("esri.symbols.support.Symbol3DAnchorPosition2D")],A0);var MP;let Gb=MP=class extends ue{constructor(e){super(e),this.color=new Le([0,0,0,1]),this.size=za(1)}clone(){const e={color:this.color!=null?this.color.clone():null,size:this.size};return new MP(e)}};h([d(Hd)],Gb.prototype,"color",void 0),h([d(Qu)],Gb.prototype,"size",void 0),Gb=MP=h([j("esri.symbols.support.Symbol3DIconOutline")],Gb);var kg;const jX="esri.symbols.IconSymbol3DLayer";let au=kg=class extends cc{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new kg({anchor:this.anchor,anchorPosition:Z(this.anchorPosition),enabled:this.enabled,material:Z(this.material),outline:Z(this.outline),resource:Z(this.resource),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||Gw,r=pV(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||Gw).clone()}:null;return new kg({size:e.size,resource:{primitive:xbe(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||nbe(e.color)?Gw:e.color,r=pV(e);return new kg({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new kg({resource:{href:vZ({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};h([d({type:Qo,json:{write:!0}})],au.prototype,"material",void 0),h([d({type:Jf,json:{write:!0}})],au.prototype,"resource",void 0),h([We({Icon:"icon"},{readOnly:!0})],au.prototype,"type",void 0),h([d(Qu)],au.prototype,"size",void 0),h([We({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],au.prototype,"anchor",void 0),h([d({type:A0,json:{type:[Number],read:{reader:e=>new A0({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],au.prototype,"anchorPosition",void 0),h([d({type:Gb,json:{write:!0}})],au.prototype,"outline",void 0),au=kg=h([j(jX)],au);const Um=au;function pV(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=dV(e.xoffset),s=dV(e.yoffset);return(i||s)&&t&&r?{x:-i/t,y:s/r}:null}function dV(e){return isFinite(e)?e:0}const Sbe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function xbe(e){return Sbe[e]||(be.getLogger(jX).warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}let Zf=class extends Yt(ue){constructor(t){super(t),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(t){return t!=null&&t.placement===this.placement&&t.style===this.style&&(this.color==null&&t.color==null||this.color!=null&&t.color!=null&&this.color.toJSON()===t.color.toJSON())}};h([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Zf.prototype,"type",void 0),h([d({type:X1e,json:{default:"begin-end",write:!0}})],Zf.prototype,"placement",void 0),h([d({type:$X,json:{default:"arrow",write:!0}})],Zf.prototype,"style",void 0),h([d({type:Le,json:{type:[St],default:null,write:!0}})],Zf.prototype,"color",void 0),Zf=h([j("esri.symbols.LineStyleMarker3D")],Zf);const TP=Zf;var oT;let lu=oT=class extends cc{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=za(1),this.pattern=null,this.marker=null}clone(){const e={enabled:this.enabled,material:this.material!=null?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:this.pattern!=null?this.pattern.clone():null,marker:this.marker!=null?this.marker.clone():null};return new oT(e)}static fromSimpleLineSymbol(e){const t={enabled:!0,size:e.width??za(1),cap:e.cap||"butt",join:e.join||"miter",pattern:e.style?new w6({style:e.style}):null,material:new Qo({color:(e.color||Gw).clone()}),marker:e.marker?new TP({placement:e.marker.placement,style:e.marker.style,color:e.marker.color?.clone()??null}):null};return new oT(t)}};h([d({type:Qo,json:{write:!0}})],lu.prototype,"material",void 0),h([We({Line:"line"},{readOnly:!0})],lu.prototype,"type",void 0),h([d({type:kX,json:{write:!0,default:"miter"}})],lu.prototype,"join",void 0),h([d({type:x6,json:{write:!0,default:"butt"}})],lu.prototype,"cap",void 0),h([d(Qu)],lu.prototype,"size",void 0),h([d(LX)],lu.prototype,"pattern",void 0),h([d({types:{key:"type",base:TP,typeMap:{style:TP}},json:{write:!0}})],lu.prototype,"marker",void 0),lu=oT=h([j("esri.symbols.LineSymbol3DLayer")],lu);const v1=lu;var IP;const Mbe=Oi()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let Bb=IP=class extends ue{clone(){return new IP({href:this.href,primitive:this.primitive})}};h([d({type:String,json:{read:zD,write:My}})],Bb.prototype,"href",void 0),h([We(Mbe)],Bb.prototype,"primitive",void 0),Bb=IP=h([j("esri.symbols.support.ObjectSymbol3DLayerResource")],Bb);var EP;let Cm=EP=class extends et{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new EP({x:this.x,y:this.y,z:this.z})}};h([d({type:Number})],Cm.prototype,"x",void 0),h([d({type:Number})],Cm.prototype,"y",void 0),h([d({type:Number})],Cm.prototype,"z",void 0),Cm=EP=h([j("esri.symbols.support.Symbol3DAnchorPosition3D")],Cm);var AP;let Hs=AP=class extends cc{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new AP({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition?.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:this.material?.clone()??null,castShadows:this.castShadows,resource:this.resource?.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};h([d({type:Qo,json:{write:!0}})],Hs.prototype,"material",void 0),h([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Hs.prototype,"castShadows",void 0),h([d({type:Bb,json:{write:!0}})],Hs.prototype,"resource",void 0),h([We({Object:"object"},{readOnly:!0})],Hs.prototype,"type",void 0),h([d({type:Number,json:{write:!0}})],Hs.prototype,"width",void 0),h([d({type:Number,json:{write:!0}})],Hs.prototype,"height",void 0),h([d({type:Number,json:{write:!0}})],Hs.prototype,"depth",void 0),h([We({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],Hs.prototype,"anchor",void 0),h([d({type:Cm,json:{type:[Number],read:{reader:e=>new Cm({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Hs.prototype,"anchorPosition",void 0),h([d({type:Number,json:{write:!0}})],Hs.prototype,"heading",void 0),h([d({type:Number,json:{write:!0}})],Hs.prototype,"tilt",void 0),h([d({type:Number,json:{write:!0}})],Hs.prototype,"roll",void 0),h([d({readOnly:!0})],Hs.prototype,"isPrimitive",null),Hs=AP=h([j("esri.symbols.ObjectSymbol3DLayer")],Hs);const M6=Hs;var $P;let xn=$P=class extends cc{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new $P({enabled:this.enabled,material:this.material!=null?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};h([d({type:Qo,json:{write:!0}})],xn.prototype,"material",void 0),h([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],xn.prototype,"castShadows",void 0),h([We({Path:"path"},{readOnly:!0})],xn.prototype,"type",void 0),h([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],xn.prototype,"profile",void 0),h([d({type:kX,json:{write:!0,default:"miter"}})],xn.prototype,"join",void 0),h([d({type:mbe,json:{write:!0,default:"butt"}})],xn.prototype,"cap",void 0),h([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],xn.prototype,"width",void 0),h([pe("width",["width","size","height"])],xn.prototype,"readWidth",null),h([d({type:Number,json:{write:!0}})],xn.prototype,"height",void 0),h([pe("height",["height","size","width"])],xn.prototype,"readHeight",null),h([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],xn.prototype,"anchor",void 0),h([d({type:["heading","all"],json:{write:!0,default:"all"}})],xn.prototype,"profileRotation",void 0),xn=$P=h([j("esri.symbols.PathSymbol3DLayer")],xn);const T6=xn;var CP;let $0=CP=class extends ue{constructor(){super(...arguments),this.color=new Le([0,0,0,1]),this.size=0}clone(){const e={color:Z(this.color),size:this.size};return new CP(e)}};h([d(Hd)],$0.prototype,"color",void 0),h([d(Qu)],$0.prototype,"size",void 0),$0=CP=h([j("esri.symbols.support.Symbol3DHalo")],$0);let qw=class extends Yt(ue){constructor(t){super(t),this.color=null}};h([d(Hd)],qw.prototype,"color",void 0),qw=h([j("esri.symbols.support.Symbol3DTextBackground")],qw);var aT;let Xn=aT=class extends cc{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(e){e!=null&&this._userSize!=null&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const s={...i,textSymbol3D:!0};t.font=e.write({},s),delete t.font.size}get size(){return this._userSize!=null?this._userSize:this.font?.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font!=null&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const e=new aT({enabled:this.enabled,font:this.font&&Z(this.font),halo:this.halo&&Z(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:this.material!=null?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:Z(this.background)});return e._userSize=this._userSize,e}static fromTextSymbol(e){return new aT({font:e.font!=null?e.font.clone():new MA,halo:Tbe(e.haloColor,e.haloSize),horizontalAlignment:e.horizontalAlignment,lineHeight:e.lineHeight,material:e.color?new Qo({color:e.color.clone()}):null,text:e.text,verticalAlignment:e.verticalAlignment,background:e.backgroundColor?new qw({color:e.backgroundColor.clone()}):null})}};function Tbe(e,t){return e&&t!=null&&t>0?new $0({color:Z(e),size:t}):null}h([d({type:MA,json:{write:!0}})],Xn.prototype,"font",null),h([ge("font")],Xn.prototype,"writeFont",null),h([d({type:$0,json:{write:!0}})],Xn.prototype,"halo",void 0),h([d({...DX,json:{default:"center",write:!0}})],Xn.prototype,"horizontalAlignment",void 0),h([d({...NX,json:{default:1,write:!0}})],Xn.prototype,"lineHeight",void 0),h([d({type:Qo,json:{write:!0}})],Xn.prototype,"material",void 0),h([d({type:qw,json:{write:!0}})],Xn.prototype,"background",void 0),h([d(Qu)],Xn.prototype,"size",null),h([d({type:String,json:{write:!0}})],Xn.prototype,"text",void 0),h([We({Text:"text"},{readOnly:!0})],Xn.prototype,"type",void 0),h([d({...FX,json:{default:"baseline",write:!0}})],Xn.prototype,"verticalAlignment",void 0),Xn=aT=h([j("esri.symbols.TextSymbol3DLayer")],Xn);const b1=Xn;var OP;let vp=OP=class extends cc{constructor(e){super(e),this.color=PP.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new OP({color:Z(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};h([d({type:Le,nonNullable:!0,json:{type:[St],write:(e,t,r)=>t[r]=e.toArray(Le.AlphaMode.UNLESS_OPAQUE),default:()=>PP.clone(),defaultEquals:e=>e.toCss(!0)===PP.toCss(!0)}})],vp.prototype,"color",void 0),h([We({Water:"water"},{readOnly:!0})],vp.prototype,"type",void 0),h([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],vp.prototype,"waterbodySize",void 0),h([d({type:Number,json:{write:!0,default:null}})],vp.prototype,"waveDirection",void 0),h([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],vp.prototype,"waveStrength",void 0),vp=OP=h([j("esri.symbols.WaterSymbol3DLayer")],vp);const VX=vp,PP=new Le([0,119,190]);var RP;let Yf=RP=class extends et{constructor(e){super(e),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new RP({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};h([d({type:String})],Yf.prototype,"name",void 0),h([d({type:String})],Yf.prototype,"styleUrl",void 0),h([d({type:String})],Yf.prototype,"styleName",void 0),h([d({type:xo})],Yf.prototype,"portal",void 0),Yf=RP=h([j("esri.symbols.support.StyleOrigin")],Yf);const LP=Yf;var kP;let Hw=kP=class extends et{constructor(){super(...arguments),this.url=""}clone(){return new kP({url:this.url})}};h([d({type:String})],Hw.prototype,"url",void 0),Hw=kP=h([j("esri.symbols.support.Thumbnail")],Hw);const UX={icon:Um,object:M6,line:v1,path:T6,fill:qy,extrude:AX,text:b1,water:VX},Ibe=qe.ofType({base:cc,key:"type",typeMap:UX,errorContext:"symbol-layer"});let uu=class extends js{constructor(t){super(t),this.styleOrigin=null,this.thumbnail=null,this.type=null;const r=this.__accessor__&&this.__accessor__.metadata&&this.__accessor__.metadata.symbolLayers,i=r?.type,s=i||qe;this._set("symbolLayers",new s)}get color(){return null}set color(t){this.constructed&&be.getLogger(this).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(t){Id(t,this._get("symbolLayers"))}readStyleOrigin(t,r,i){if(t.styleUrl&&t.name){const s=h1(t.styleUrl,i);return new LP({styleUrl:s,name:t.name})}if(t.styleName&&t.name)return new LP({portal:i?.portal||xo.getDefault(),styleName:t.styleName,name:t.name});i?.messages&&i.messages.push(new sa("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:i,definition:t}))}writeStyleOrigin(t,r,i,s){if(t.styleUrl&&t.name){let n=B2(t.styleUrl,s);Yo(n)&&(n=La(n)),r.styleOrigin={styleUrl:n,name:t.name}}else t.styleName&&t.name&&(t.portal&&s?.portal&&!gZ(t.portal.restUrl,s.portal.restUrl)?s?.messages&&s.messages.push(new sa("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):r.styleOrigin={styleName:t.styleName,name:t.name})}normalizeCtorArgs(t){return t instanceof cc||t&&UX[t.type]?{symbolLayers:[t]}:Array.isArray(t)?{symbolLayers:t}:t}};h([d({json:{read:!1,write:!1}})],uu.prototype,"color",null),h([d({type:Ibe,nonNullable:!0,json:{write:!0}}),Zt(OZ)],uu.prototype,"symbolLayers",null),h([d({type:LP})],uu.prototype,"styleOrigin",void 0),h([pe("styleOrigin")],uu.prototype,"readStyleOrigin",null),h([ge("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],uu.prototype,"writeStyleOrigin",null),h([d({type:Hw,json:{read:!1}})],uu.prototype,"thumbnail",void 0),h([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],uu.prototype,"type",void 0),uu=h([j("esri.symbols.Symbol3D")],uu);const w1=uu;let qb=class extends ue{constructor(t){super(t),this.visible=!0}clone(){throw new Error("Subclasses of Callout3D should implement their own clone method.")}};h([d({type:["line"],constructOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],qb.prototype,"type",void 0),h([d({readOnly:!0})],qb.prototype,"visible",void 0),qb=h([j("esri.symbols.callouts.Callout3D")],qb);const zX=qb;var NP;let lT=NP=class extends ue{constructor(e){super(e),this.color=new Le("white")}clone(){return new NP({color:Z(this.color)})}};h([d(Hd)],lT.prototype,"color",void 0),lT=NP=h([j("esri.symbols.callouts.LineCallout3DBorder")],lT);const Ebe=lT;var DP;let bp=DP=class extends zX{constructor(e){super(e),this.type="line",this.color=new Le([0,0,0,1]),this.size=za(1),this.border=null}get visible(){return this.size>0&&this.color!=null&&this.color.a>0}clone(){return new DP({color:Z(this.color),size:this.size,border:Z(this.border)})}};h([We({line:"line"})],bp.prototype,"type",void 0),h([d(Hd)],bp.prototype,"color",void 0),h([d(Qu)],bp.prototype,"size",void 0),h([d({type:Ebe,json:{write:!0}})],bp.prototype,"border",void 0),h([d({readOnly:!0})],bp.prototype,"visible",null),bp=DP=h([j("esri.symbols.callouts.LineCallout3D")],bp);const GX=bp;function I6(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength!=null&&t.maxWorldLength<=0)}function BX(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!I6(e)}const qX={types:{key:"type",base:zX,typeMap:{line:GX}},json:{write:!0}};var FP;let Ng=FP=class extends ue{constructor(e){super(e),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new FP({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};h([d(Qu)],Ng.prototype,"screenLength",void 0),h([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],Ng.prototype,"minWorldLength",void 0),h([d({type:Number,json:{write:!0}})],Ng.prototype,"maxWorldLength",void 0),Ng=FP=h([j("esri.symbols.support.Symbol3DVerticalOffset")],Ng);const E6=Ng;var uT;const HX=qe.ofType({base:null,key:"type",typeMap:{text:b1}});let wp=uT=class extends w1{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new HX,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return BX(this)}hasVisibleVerticalOffset(){return I6(this)}clone(){return new uT({styleOrigin:Z(this.styleOrigin),symbolLayers:Z(this.symbolLayers),thumbnail:Z(this.thumbnail),callout:Z(this.callout),verticalOffset:Z(this.verticalOffset)})}static fromTextSymbol(e){return new uT({symbolLayers:new qe([b1.fromTextSymbol(e)])})}};h([d({type:E6,json:{write:!0}})],wp.prototype,"verticalOffset",void 0),h([d(qX)],wp.prototype,"callout",void 0),h([d({json:{read:!1,write:!1}})],wp.prototype,"styleOrigin",void 0),h([d({type:HX})],wp.prototype,"symbolLayers",void 0),h([We({LabelSymbol3D:"label-3d"},{readOnly:!0})],wp.prototype,"type",void 0),wp=uT=h([j("esri.symbols.LabelSymbol3D")],wp);const TA=wp;var cT;const WX=qe.ofType({base:null,key:"type",typeMap:{line:v1,path:T6}}),Abe=qe.ofType({base:null,key:"type",typeMap:{line:v1,path:T6}});let Hb=cT=class extends w1{constructor(e){super(e),this.symbolLayers=new WX,this.type="line-3d"}clone(){return new cT({styleOrigin:Z(this.styleOrigin),symbolLayers:Z(this.symbolLayers),thumbnail:Z(this.thumbnail)})}static fromSimpleLineSymbol(e){return new cT({symbolLayers:new qe([v1.fromSimpleLineSymbol(e)])})}};h([d({type:WX,json:{type:Abe}})],Hb.prototype,"symbolLayers",void 0),h([We({LineSymbol3D:"line-3d"},{readOnly:!0})],Hb.prototype,"type",void 0),Hb=cT=h([j("esri.symbols.LineSymbol3D")],Hb);const Hy=Hb;let _p=class extends js{constructor(t){super(t),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};h([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],_p.prototype,"angle",void 0),h([d({type:["simple-marker","picture-marker"],readOnly:!0})],_p.prototype,"type",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],_p.prototype,"xoffset",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],_p.prototype,"yoffset",void 0),h([d({type:Number,cast:e=>e==="auto"?e:Ut(e),json:{write:!0}})],_p.prototype,"size",void 0),_p=h([j("esri.symbols.MarkerSymbol")],_p);const JX=_p;var hT;const ZX=qe.ofType({base:null,key:"type",typeMap:{fill:qy}});let Wb=hT=class extends w1{constructor(e){super(e),this.symbolLayers=new ZX,this.type="mesh-3d"}clone(){return new hT({styleOrigin:Z(this.styleOrigin),symbolLayers:Z(this.symbolLayers),thumbnail:Z(this.thumbnail)})}static fromSimpleFillSymbol(e){return new hT({symbolLayers:new qe([qy.fromSimpleFillSymbol(e)])})}};h([d({type:ZX})],Wb.prototype,"symbolLayers",void 0),h([We({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],Wb.prototype,"type",void 0),Wb=hT=h([j("esri.symbols.MeshSymbol3D")],Wb);const K2=Wb;function $be(e,t,r){return t.imageData?vZ({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):YX(t.url,r)}function YX(e,t){if(!Yo(e)){const r=Obe(t);if(r)return Oh(r,"images",e)}return h1(e,t)}function Cbe(e,t,r,i){if(Gy(e)){const s=F_(e);if(!s)return;t.contentType=s.mediaType,t.imageData=s.data,r&&r.imageData===t.imageData&&r.url&&My(r.url,t,"url",i)}else My(e,t,"url",i)}const KX={json:{read:{source:["imageData","url"],reader:$be},write:{writer(e,t,r,i){Cbe(e,t,this.source,i)}}}},XX={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=YX(t.url,r)),i}}}};function Obe(e){if(!e)return null;const{origin:t,layer:r}=e;if(t!=="service"&&t!=="portal-item")return null;const i=r?.type;return i==="feature"||i==="stream"?r.parsedUrl?.path:i==="map-image"||i==="tile"?e.url?.path:null}var jP;let va=jP=class extends CX{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const s={};return e&&(s.url=e),t&&(s.outline=t),r!=null&&(s.width=Ut(r)),i!=null&&(s.height=Ut(i)),s}clone(){const e=new jP({color:Z(this.color),height:this.height,outline:Z(this.outline),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",Z(this.source)),e}hash(){return`${super.hash()}.${this.color?.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};h([We({esriPFS:"picture-fill"},{readOnly:!0})],va.prototype,"type",void 0),h([d(KX)],va.prototype,"url",void 0),h([d({type:Number,json:{write:!0}})],va.prototype,"xscale",void 0),h([d({type:Number,json:{write:!0}})],va.prototype,"yscale",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],va.prototype,"width",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],va.prototype,"height",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],va.prototype,"xoffset",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],va.prototype,"yoffset",void 0),h([d(XX)],va.prototype,"source",void 0),va=jP=h([j("esri.symbols.PictureFillSymbol")],va);const A6=va;var VP;let ol=VP=class extends JX{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=Ut(t)),r!=null&&(i.height=Ut(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new VP({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",Z(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};h([d({json:{write:!1}})],ol.prototype,"color",void 0),h([We({esriPMS:"picture-marker"},{readOnly:!0})],ol.prototype,"type",void 0),h([d(KX)],ol.prototype,"url",void 0),h([d(XX)],ol.prototype,"source",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],ol.prototype,"height",void 0),h([pe("height",["height","size"])],ol.prototype,"readHeight",null),h([d({type:Number,cast:Ut,json:{write:!0}})],ol.prototype,"width",void 0),h([d({json:{write:!1}})],ol.prototype,"size",void 0),ol=VP=h([j("esri.symbols.PictureMarkerSymbol")],ol);const Sh=ol;var Kf;const QX=qe.ofType({base:null,key:"type",typeMap:{icon:Um,object:M6,text:b1}});let Xf=Kf=class extends w1{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new QX,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return BX(this)}hasVisibleVerticalOffset(){return I6(this)}clone(){return new Kf({verticalOffset:Z(this.verticalOffset),callout:Z(this.callout),styleOrigin:Z(this.styleOrigin),symbolLayers:Z(this.symbolLayers),thumbnail:Z(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new Kf({symbolLayers:new qe([Um.fromSimpleMarkerSymbol(e)])})}static fromPictureMarkerSymbol(e){return new Kf({symbolLayers:new qe([Um.fromPictureMarkerSymbol(e)])})}static fromCIMSymbol(e){if(e.data?.symbol?.type!=="CIMPointSymbol")return null;const r=e.data.symbol;return new Kf(r?.callout?{symbolLayers:new qe([Um.fromCIMSymbol(e)]),callout:new GX({size:.5,color:new Le([0,0,0])}),verticalOffset:new E6({screenLength:40})}:{symbolLayers:new qe([Um.fromCIMSymbol(e)])})}static fromTextSymbol(e){return new Kf({symbolLayers:new qe([b1.fromTextSymbol(e)])})}};h([d({type:E6,json:{write:!0}})],Xf.prototype,"verticalOffset",void 0),h([d(qX)],Xf.prototype,"callout",void 0),h([d({type:QX,json:{origins:{"web-scene":{write:!0}}}})],Xf.prototype,"symbolLayers",void 0),h([We({PointSymbol3D:"point-3d"},{readOnly:!0})],Xf.prototype,"type",void 0),Xf=Kf=h([j("esri.symbols.PointSymbol3D")],Xf);const wh=Xf;function ht(e,t,r={}){return $6(e,t,r,eQ)}function Rh(e,t,r={}){return $6(e,t,r,tQ)}function $6(e,t,r={},i){let s=null;const n=r.once?(o,a)=>{i(o)&&(Kr(s),t(o,a))}:(o,a)=>{i(o)&&t(o,a)};if(s=ppe(e,n,r.sync,r.equals),r.initial){const o=e();n(o,o)}return s}function ql(e,t,r,i={}){let s=null,n=null,o=null;function a(){s&&n&&(n.remove(),i.onListenerRemove?.(s),s=null,n=null)}function l(c){i.once&&i.once&&Kr(o),r(c)}const u=ht(e,(c,p)=>{a(),HE(c)&&(s=c,n=j2(c,t,l),i.onListenerAdd?.(c))},{sync:i.sync,initial:!0});return o=or(()=>{u.remove(),a()}),o}function C6(e,t){return Pbe(e,tQ,t)}function Pbe(e,t,r){if(Ul(r))return Promise.reject(ii());const i=e();if(t?.(i))return Promise.resolve(i);let s=null;function n(){s=Kr(s)}return new Promise((o,a)=>{s=N2([Zo(r,()=>{n(),a(ii())}),$6(e,l=>{n(),o(l)},{sync:!1,once:!0},t??eQ)])})}function eQ(e){return!0}function tQ(e){return!!e}const Os={sync:!0},fn={initial:!0},$a={sync:!0,initial:!0};var Jb;const rQ=qe.ofType({base:null,key:"type",typeMap:{extrude:AX,fill:qy,icon:Um,line:v1,object:M6,text:b1,water:VX}});let Zb=Jb=class extends w1{constructor(e){super(e),this.symbolLayers=new rQ,this.type="polygon-3d"}initialize(){const e=t=>{t.type==="line"&&yy(be.getLogger(this),"LineSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use FillSymbol3DLayer.outline instead.",version:"4.28"}),t.type==="text"&&yy(be.getLogger(this),"TextSymbol3DLayer can not be used as a SymbolLayer with a PolygonSymbol3D symbol anymore.",{replacement:"Use Labels instead.",version:"4.28"})};for(const t of this.symbolLayers)e(t);this.addHandles(ql(()=>this.symbolLayers,"after-add",({item:t})=>e(t),Os))}clone(){return new Jb({styleOrigin:Z(this.styleOrigin),symbolLayers:Z(this.symbolLayers),thumbnail:Z(this.thumbnail)})}static fromJSON(e){const t=new Jb;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.at(0).type==="fill"&&t.symbolLayers.at(1).type==="line"){const r=t.symbolLayers.at(0),i=t.symbolLayers.at(1);!i.enabled||e.symbolLayers?.[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:i.size,color:i.material!=null?i.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Jb({symbolLayers:new qe([qy.fromSimpleFillSymbol(e)])})}};h([d({type:rQ,json:{write:!0}})],Zb.prototype,"symbolLayers",void 0),h([We({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],Zb.prototype,"type",void 0),Zb=Jb=h([j("esri.symbols.PolygonSymbol3D")],Zb);const Wd=Zb;var UP;const F4=new wt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Qf=UP=class extends CX{constructor(...e){super(...e),this.color=new Le([0,0,0,.25]),this.outline=new qn,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new UP({color:Z(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};h([d()],Qf.prototype,"color",void 0),h([d()],Qf.prototype,"outline",void 0),h([We({esriSFS:"simple-fill"},{readOnly:!0})],Qf.prototype,"type",void 0),h([d({type:F4.apiValues,json:{read:F4.read,write:F4.write}})],Qf.prototype,"style",void 0),Qf=UP=h([j("esri.symbols.SimpleFillSymbol")],Qf);const Hl=Qf;var zP;const j4=new wt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let cu=zP=class extends JX{constructor(...e){super(...e),this.color=new Le([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new qn}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const s={};return e&&(s.style=e),t!=null&&(s.size=Ut(t)),r&&(s.outline=r),i&&(s.color=i),s}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new zP({angle:this.angle,color:Z(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${this.outline?.hash()}`}};h([d()],cu.prototype,"color",void 0),h([ge("color")],cu.prototype,"writeColor",null),h([We({esriSMS:"simple-marker"},{readOnly:!0})],cu.prototype,"type",void 0),h([d()],cu.prototype,"size",void 0),h([d({type:j4.apiValues,json:{read:j4.read,write:j4.write}})],cu.prototype,"style",void 0),h([d({type:String,json:{write:!0}})],cu.prototype,"path",null),h([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":qn}},json:{default:null,write:!0}})],cu.prototype,"outline",void 0),cu=zP=h([j("esri.symbols.SimpleMarkerSymbol")],cu);const Mo=cu;var GP;let kr=GP=class extends js{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new MA,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return Ut(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new GP({angle:this.angle,backgroundColor:Z(this.backgroundColor),borderLineColor:Z(this.borderLineColor),borderLineSize:this.borderLineSize,color:Z(this.color),font:this.font&&this.font.clone(),haloColor:Z(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor?.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color?.hash()}.${this.font&&this.font.hash()}.${this.haloColor?.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};h([d({type:Le,json:{write:!0}})],kr.prototype,"backgroundColor",void 0),h([d({type:Le,json:{write:!0}})],kr.prototype,"borderLineColor",void 0),h([d({type:Number,json:{write:!0},cast:Ut})],kr.prototype,"borderLineSize",void 0),h([d({type:MA,json:{write:!0}})],kr.prototype,"font",void 0),h([d({...DX,json:{write:!0}})],kr.prototype,"horizontalAlignment",void 0),h([d({type:Boolean,json:{write:!0}})],kr.prototype,"kerning",void 0),h([d({type:Le,json:{write:!0}})],kr.prototype,"haloColor",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],kr.prototype,"haloSize",void 0),h([d({type:Boolean,json:{write:!0}})],kr.prototype,"rightToLeft",void 0),h([d({type:Boolean,json:{write:!0}})],kr.prototype,"rotated",void 0),h([d({type:String,json:{write:!0}})],kr.prototype,"text",void 0),h([We({esriTS:"text"},{readOnly:!0})],kr.prototype,"type",void 0),h([d({...FX,json:{write:!0}})],kr.prototype,"verticalAlignment",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],kr.prototype,"xoffset",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],kr.prototype,"yoffset",void 0),h([d({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],kr.prototype,"angle",void 0),h([d({type:Number,json:{write:!0}})],kr.prototype,"width",void 0),h([d({type:Number})],kr.prototype,"lineWidth",void 0),h([ge("lineWidth")],kr.prototype,"writeLineWidth",null),h([Zt("lineWidth")],kr.prototype,"castLineWidth",null),h([d(NX)],kr.prototype,"lineHeight",void 0),h([ge("lineHeight")],kr.prototype,"writeLineHeight",null),kr=GP=h([j("esri.symbols.TextSymbol")],kr);const _1=kr;var BP;let al=BP=class extends js{constructor(e){super(e),this.color=null,this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const e=this.portal!=null?this.portal:xo.getDefault(),t=e.user?e.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${t}:${e.url}`}read(e,t){this.portal=t?.portal,super.read(e,t)}clone(){return new BP({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=t!=null?t.cache:null,i=r?this._fetchCacheKey:null;if(r!=null){const a=i&&r.get(i);if(a)return a.clone()}const{resolveWebStyleSymbol:s}=await fe(()=>import("./webStyleSymbolUtils-B1ihta4M.js"),__vite__mapDeps([16,17,1]),import.meta.url);dr(t);const n=s(this,{portal:this.portal},e,t);n.catch(a=>{be.getLogger(this).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await n;return e==="webRef"&&o.type==="point-3d"||e==="cimRef"&&o.type==="cim"?(r?.set(i,o.clone()),o):null}};h([d({json:{write:!1}})],al.prototype,"color",void 0),h([d({type:String,json:{write:!0}})],al.prototype,"styleName",void 0),h([d({type:xo,json:{write:!1}})],al.prototype,"portal",void 0),h([d({type:String,json:{read:zD,write:My}})],al.prototype,"styleUrl",void 0),h([d({type:Hw,json:{read:!1}})],al.prototype,"thumbnail",void 0),h([d({type:String,json:{write:!0}})],al.prototype,"name",void 0),h([We({styleSymbolReference:"web-style"},{readOnly:!0})],al.prototype,"type",void 0),h([d()],al.prototype,"_fetchCacheKey",null),al=BP=h([j("esri.symbols.WebStyleSymbol")],al);const Wy=al;function IA(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function Ay(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const Km={base:js,key:"type",typeMap:{"simple-fill":Hl,"picture-fill":A6,"picture-marker":Sh,"simple-line":qn,"simple-marker":Mo,text:_1,"label-3d":TA,"line-3d":Hy,"mesh-3d":K2,"point-3d":wh,"polygon-3d":Wd,"web-style":Wy,cim:qd},errorContext:"symbol"},yst={base:js,key:"type",typeMap:{"picture-marker":Sh,"simple-marker":Mo,"point-3d":wh,cim:qd},errorContext:"symbol"},gst={base:js,key:"type",typeMap:{"simple-line":qn,"line-3d":Hy,cim:qd},errorContext:"symbol"},vst={base:js,key:"type",typeMap:{"simple-fill":Hl,"picture-fill":A6,"polygon-3d":Wd,cim:qd},errorContext:"symbol"},Rbe={base:js,key:"type",typeMap:{"picture-marker":Sh,"simple-marker":Mo,text:_1,"web-style":Wy,cim:qd},errorContext:"symbol"},Lbe=u1({types:Km}),iQ={base:js,key:"type",typeMap:{"simple-fill":Hl,"picture-fill":A6,"picture-marker":Sh,"simple-line":qn,"simple-marker":Mo,text:_1,"line-3d":Hy,"mesh-3d":K2,"point-3d":wh,"polygon-3d":Wd,"web-style":Wy,cim:qd},errorContext:"symbol"},kbe={base:js,key:"type",typeMap:{text:_1,"label-3d":TA},errorContext:"symbol"},fV={base:js,key:"type",typeMap:{"line-3d":Hy,"mesh-3d":K2,"point-3d":wh,"polygon-3d":Wd,"web-style":Wy,cim:qd},errorContext:"symbol"},Nbe={base:js,key:"type",typeMap:{"label-3d":TA},errorContext:"symbol"},sQ=Zu(Km);var qP;function Dbe(e){if(!e)return null;const t={};for(const r in e){const i=bi(e[r]);i&&(t[r]=i)}return Object.keys(t).length!==0?t:null}function Fbe(e){if(e==null)return null;const t={};for(const r in e){const i=e[r];i&&(t[r]=i.toJSON())}return Object.keys(t).length!==0?t:null}let Mn=qP=class extends Yt(ue){constructor(e){super(e),this.isAggregate=!1,this.layer=null,this.origin=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:Nw(),configurable:!0}),Object.defineProperty(this,"_lastMeshTransform",{value:{},configurable:!0,writable:!0,enumerable:!1}),arguments.length>1&&nhe(be.getLogger(this),"Graphic",{version:"4.30"})}initialize(){this._watchMeshGeometryChanges()}set aggregateGeometries(e){const t=this._get("aggregateGeometries");JSON.stringify(t)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),e?.type!=="mesh"&&this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}cloneShallow(){return new qP({aggregateGeometries:this.aggregateGeometries,attributes:this.attributes,geometry:this.geometry,isAggregate:this.isAggregate,layer:this.layer,popupTemplate:this.popupTemplate,sourceLayer:this.sourceLayer,symbol:this.symbol,visible:this.visible,origin:this.origin})}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.origin&&"layer"in this.origin?this.origin.layer:null;for(const r of[t,this.sourceLayer,this.layer])if(r){if("popupTemplate"in r&&r.popupTemplate)return r.popupTemplate;if(e&&"defaultPopupTemplate"in r&&r.defaultPopupTemplate!=null)return r.defaultPopupTemplate}return null}getAttribute(e){return this.attributes?.[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:Fbe(this.aggregateGeometries),geometry:this.geometry!=null?this.geometry.toJSON():null,symbol:this.symbol!=null?this.symbol.toJSON():null,attributes:D_(this.attributes)?this.attributes.toJSON():{...this.attributes},popupTemplate:this.popupTemplate?.toJSON()??null}}notifyMeshTransformChanged(e={}){const{geometry:t}=this;if(t?.type==="mesh"){const r={origin:t.origin,transform:t.transform};this._notifyLayer("origin-transform",r,r,e.action)}}_notifyLayer(e,t,r,i){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:t,newValue:r};e==="origin-transform"&&(s.action=i),e==="attributes"&&(s.attributeName=i),this.layer.graphicChanged(s)}_watchMeshGeometryChanges(){this.addHandles([Rh(()=>this.geometry?.type==="mesh"&&this.geometry.vertexSpace.origin?{localMatrix:this.geometry.transform?.localMatrix,origin:this.geometry.vertexSpace.origin}:void 0,({localMatrix:e,origin:t})=>{this._lastMeshTransform.localMatrix===e&&this._lastMeshTransform.origin===t||(this._lastMeshTransform.localMatrix=e,this._lastMeshTransform.origin=t,this.notifyMeshTransformChanged())}),Rh(()=>this.geometry?.type==="mesh"?{vertexAttributes:this.geometry.vertexAttributes}:void 0,()=>{const e=this.geometry;e?.type==="mesh"&&e.vertexSpace.origin?(this._lastMeshTransform.localMatrix=e.transform?.localMatrix,this._lastMeshTransform.origin=e.vertexSpace.origin):(this._lastMeshTransform.localMatrix=void 0,this._lastMeshTransform.origin=void 0),this._notifyLayer("geometry",this.geometry,this.geometry)},{equals:(e,t)=>e===t,sync:!0})])}};h([d({value:null,json:{read:Dbe}})],Mn.prototype,"aggregateGeometries",null),h([d({value:null})],Mn.prototype,"attributes",null),h([d({value:null,types:Ss,json:{read:bi}})],Mn.prototype,"geometry",null),h([d({type:Boolean})],Mn.prototype,"isAggregate",void 0),h([d({clonable:"reference"})],Mn.prototype,"layer",void 0),h([d({clonable:"reference"})],Mn.prototype,"origin",void 0),h([d({type:Bd})],Mn.prototype,"popupTemplate",void 0),h([d({clonable:"reference"})],Mn.prototype,"sourceLayer",void 0),h([d({value:null,types:Km})],Mn.prototype,"symbol",null),h([d({type:Boolean,value:!0})],Mn.prototype,"visible",null),Mn=qP=h([j("esri.Graphic")],Mn),function(e){e.generateUID=Nw}(Mn||(Mn={}));const Ga=Mn;var HP;let Yb=HP=class extends ue{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new HP({minValue:this.minValue,maxValue:this.maxValue})}};h([d({type:Number,json:{write:!0}})],Yb.prototype,"minValue",void 0),h([d({type:Number,json:{write:!0}})],Yb.prototype,"maxValue",void 0),Yb=HP=h([j("esri.renderers.support.AuthoringInfoClassBreakInfo")],Yb);var WP;let Zp=WP=class extends ue{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=new Array}clone(){return new WP({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:Z(this.classBreakInfos)})}};h([d({type:String,json:{write:!0}})],Zp.prototype,"field",void 0),h([d({type:String,json:{write:!0}})],Zp.prototype,"normalizationField",void 0),h([d({type:String,json:{write:!0}})],Zp.prototype,"label",void 0),h([d({type:[Yb],json:{write:!0}})],Zp.prototype,"classBreakInfos",void 0),Zp=WP=h([j("esri.renderers.support.AuthoringInfoFieldInfo")],Zp);var JP;let Dg=JP=class extends ue{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new JP({label:this.label,value:this.value,size:this.size})}};h([d({type:String,json:{write:!0}})],Dg.prototype,"label",void 0),h([d({type:Number,json:{write:!0}})],Dg.prototype,"size",void 0),h([d({type:Number,json:{write:!0}})],Dg.prototype,"value",void 0),Dg=JP=h([j("esri.renderers.support.AuthoringInfoSizeStop")],Dg);const jbe=Dg;var ZP;const cx=new wt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),hx=new wt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),mV={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},yV=["high-to-low","above-and-below","centered-on","extremes"],gV=[...new Set(["high-to-low","above-and-below","centered-on","extremes","above","below","high-to-low","above-and-below","above","below","reference-size"])],vV=["seconds","minutes","hours","days","months","years"],Vbe=["circle","diamond","hexagon-flat","hexagon-pointy","square"];let ls=ZP=class extends ue{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}get normalizationField(){return this.theme==="reference-size"?this._get("normalizationField"):null}set normalizationField(e){this._set("normalizationField",e)}get referenceSizeScale(){return this.theme==="reference-size"?this._get("referenceSizeScale"):null}set referenceSizeScale(e){this._set("referenceSizeScale",e)}get referenceSizeSymbolStyle(){return this.theme==="reference-size"?this._get("referenceSizeSymbolStyle"):null}set referenceSizeSymbolStyle(e){this._set("referenceSizeSymbolStyle",e)}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get sizeStops(){return this.theme==="reference-size"?this._get("sizeStops"):null}set sizeStops(e){this._set("sizeStops",e)}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new ZP({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,normalizationField:this.normalizationField,referenceSizeScale:this.referenceSizeScale,referenceSizeSymbolStyle:this.referenceSizeSymbolStyle,sizeStops:Z(this.sizeStops),startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};h([d({types:mV,json:{write:!0}})],ls.prototype,"endTime",void 0),h([Zt("endTime")],ls.prototype,"castEndTime",null),h([d({type:String,json:{write:!0}})],ls.prototype,"field",void 0),h([d({type:Number,json:{write:!0}})],ls.prototype,"maxSliderValue",void 0),h([d({type:Number,json:{write:!0}})],ls.prototype,"minSliderValue",void 0),h([d({type:String,json:{origins:{"web-scene":{write:!1}},write:!0}})],ls.prototype,"normalizationField",null),h([d({type:Number,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],ls.prototype,"referenceSizeScale",null),h([d({type:Vbe,value:null,json:{origins:{"web-scene":{write:!1}},write:!0}})],ls.prototype,"referenceSizeSymbolStyle",null),h([d({types:mV,json:{write:!0}})],ls.prototype,"startTime",void 0),h([Zt("startTime")],ls.prototype,"castStartTime",null),h([d({type:[jbe],json:{origins:{"web-scene":{write:!1}},write:!0}})],ls.prototype,"sizeStops",null),h([d({type:cx.apiValues,value:null,json:{type:cx.jsonValues,read:cx.read,write:cx.write}})],ls.prototype,"style",null),h([d({type:gV,value:null,json:{type:gV,origins:{"web-scene":{type:yV,write:{writer:(e,t)=>{yV.includes(e)&&(t.theme=e)}}}},write:!0}})],ls.prototype,"theme",null),h([d({type:hx.apiValues,json:{type:hx.jsonValues,read:hx.read,write:hx.write}})],ls.prototype,"type",void 0),h([d({type:vV,json:{type:vV,write:!0}})],ls.prototype,"units",void 0),ls=ZP=h([j("esri.renderers.support.AuthoringInfoVisualVariable")],ls);const Ube=ls;let pT=class extends ue{constructor(t){super(t),this.type=null}};h([d({readOnly:!0,json:{read:!1,write:!0}})],pT.prototype,"type",void 0),pT=h([j("esri.rest.support.ColorRamp")],pT);const O6=pT;var YP;let em=YP=class extends O6{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new YP({fromColor:Z(this.fromColor),toColor:Z(this.toColor),algorithm:this.algorithm})}};h([We({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],em.prototype,"algorithm",void 0),h([d({type:Le,json:{type:[St],write:!0}})],em.prototype,"fromColor",void 0),h([d({type:Le,json:{type:[St],write:!0}})],em.prototype,"toColor",void 0),h([d({type:["algorithmic"]})],em.prototype,"type",void 0),em=YP=h([j("esri.rest.support.AlgorithmicColorRamp")],em);const P6=em;var KP;let Kb=KP=class extends O6{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new KP({colorRamps:Z(this.colorRamps)})}};h([d({type:[P6],json:{write:!0}})],Kb.prototype,"colorRamps",void 0),h([d({type:["multipart"]})],Kb.prototype,"type",void 0),Kb=KP=h([j("esri.rest.support.MultipartColorRamp")],Kb);const EA=Kb,R6={key:"type",base:O6,typeMap:{algorithmic:P6,multipart:EA}};function L6(e){return e?.type?e.type==="algorithmic"?P6.fromJSON(e):e.type==="multipart"?EA.fromJSON(e):null:null}var XP;const _f=new wt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),px=new wt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),bV=new wt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),wV=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],zbe=["high-to-low","above-and-below","above","below"],Gbe=["flow-line","wave-front"],Bbe=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Qr=XP=class extends ue{constructor(e){super(e),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){return e?L6(e):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(e){this._set("flowTheme",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new XP({classificationMethod:this.classificationMethod,colorRamp:Z(this.colorRamp),fadeRatio:Z(this.fadeRatio),fields:this.fields?.slice(0),field1:Z(this.field1),field2:Z(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};h([d({type:_f.apiValues,value:null,json:{type:_f.jsonValues,read:_f.read,write:_f.write,origins:{"web-document":{default:"manual",type:_f.jsonValues,read:_f.read,write:_f.write}}}})],Qr.prototype,"classificationMethod",null),h([d({types:R6,json:{write:!0}})],Qr.prototype,"colorRamp",void 0),h([pe("colorRamp")],Qr.prototype,"readColorRamp",null),h([d({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"fadeRatio",void 0),h([d({type:[String],value:null,json:{write:!0}})],Qr.prototype,"fields",null),h([d({type:Zp,value:null,json:{write:!0}})],Qr.prototype,"field1",null),h([d({type:Zp,value:null,json:{write:!0}})],Qr.prototype,"field2",null),h([d({type:Gbe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"flowTheme",null),h([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Qr.prototype,"focus",null),h([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"isAutoGenerated",void 0),h([d({type:Number,value:null,json:{type:St,write:!0}})],Qr.prototype,"numClasses",null),h([d({type:wV,json:{type:wV,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Qr.prototype,"lengthUnit",void 0),h([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"maxSliderValue",void 0),h([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"minSliderValue",void 0),h([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Qr.prototype,"statistics",null),h([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Qr.prototype,"standardDeviationInterval",null),h([d({type:px.apiValues,value:null,json:{type:px.jsonValues,read:px.read,write:px.write,origins:{"web-scene":{type:bV.jsonValues,write:{writer:bV.write,overridePolicy:e=>({enabled:e!=="flow"})}}}}})],Qr.prototype,"type",null),h([d({type:[Ube],json:{write:!0}})],Qr.prototype,"visualVariables",void 0),h([d({type:Bbe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"univariateSymbolStyle",null),h([d({type:zbe,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Qr.prototype,"univariateTheme",null),Qr=XP=h([j("esri.renderers.support.AuthoringInfo")],Qr);const X2=Qr,V4=new wt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let Xb=class extends ue{constructor(t){super(t),this.authoringInfo=null,this.type=null}async getRequiredFields(t){if(!this.collectRequiredFields)return[];const r=new Set;return await this.collectRequiredFields(r,t),Array.from(r).sort()}getSymbol(t,r){}async getSymbolAsync(t,r){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};h([d({type:X2,json:{write:!0}})],Xb.prototype,"authoringInfo",void 0),h([d({type:V4.apiValues,readOnly:!0,json:{type:V4.jsonValues,read:!1,write:{writer:V4.write,ignoreOrigin:!0}}})],Xb.prototype,"type",void 0),Xb=h([j("esri.renderers.Renderer")],Xb);const Uh=Xb;function qbe(e){return e.match(Hbe)?.[1]?.replace(/\\'/g,"'")??null}const Hbe=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var QP;let Xm=QP=class extends ue{constructor(){super(...arguments),this.title=null}clone(){return new QP({title:this.title})}};h([d({type:String,json:{write:!0}})],Xm.prototype,"title",void 0),Xm=QP=h([j("esri.renderers.support.LegendOptions")],Xm);var eR;let dT=eR=class extends Xm{constructor(){super(...arguments),this.showLegend=null}clone(){return new eR({title:this.title,showLegend:this.showLegend})}};h([d({type:Boolean,json:{write:!0}})],dT.prototype,"showLegend",void 0),dT=eR=h([j("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],dT);const nQ=dT,U4=new wt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let ll=class extends ue{constructor(t){super(t),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(t){return t==null?t:typeof t=="function"?(be.getLogger(this).error(".field: field must be a string value"),null):V2(t)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};h([d()],ll.prototype,"index",void 0),h([d({type:U4.apiValues,readOnly:!0,json:{read:U4.read,write:U4.write}})],ll.prototype,"type",void 0),h([d({type:String,json:{write:!0}})],ll.prototype,"field",void 0),h([Zt("field")],ll.prototype,"castField",null),h([d({type:String,json:{write:!0}})],ll.prototype,"valueExpression",void 0),h([d({type:String,json:{write:!0}})],ll.prototype,"valueExpressionTitle",void 0),h([d({readOnly:!0})],ll.prototype,"arcadeRequired",null),h([d({type:nQ,json:{write:!0}})],ll.prototype,"legendOptions",void 0),ll=h([j("esri.renderers.visualVariables.VisualVariable")],ll);const Q2=ll;var tR;let tm=tR=class extends ue{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new tR({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};h([d({type:Le,json:{type:[St],write:!0}})],tm.prototype,"color",void 0),h([d({type:String,json:{write:!0}})],tm.prototype,"label",void 0),h([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],tm.prototype,"value",void 0),h([ge("value")],tm.prototype,"writeValue",null),tm=tR=h([j("esri.renderers.visualVariables.support.ColorStop")],tm);const Wbe=tm;var rR;let rm=rR=class extends Q2{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new rR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};h([d({readOnly:!0})],rm.prototype,"cache",null),h([d({type:["color"],json:{type:["colorInfo"]}})],rm.prototype,"type",void 0),h([d({type:String,json:{write:!0}})],rm.prototype,"normalizationField",void 0),h([d({type:[Wbe],json:{write:!0}})],rm.prototype,"stops",null),rm=rR=h([j("esri.renderers.visualVariables.ColorVariable")],rm);const oQ=rm;var iR;let Sp=iR=class extends ue{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return q_(t.transparency)}writeOpacity(e,t,r){t[r]=xA(e)}clone(){return new iR({label:this.label,opacity:this.opacity,value:this.value})}};h([d({type:String,json:{write:!0}})],Sp.prototype,"label",void 0),h([d({type:Number,json:{type:St,write:{target:"transparency"}}})],Sp.prototype,"opacity",void 0),h([pe("opacity",["transparency"])],Sp.prototype,"readOpacity",null),h([ge("opacity")],Sp.prototype,"writeOpacity",null),h([d({type:Number,json:{write:!0}})],Sp.prototype,"value",void 0),Sp=iR=h([j("esri.renderers.visualVariables.support.OpacityStop")],Sp);const Jbe=Sp;var sR;let im=sR=class extends Q2{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new sR({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions?.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};h([d({readOnly:!0})],im.prototype,"cache",null),h([d({type:["opacity"],json:{type:["transparencyInfo"]}})],im.prototype,"type",void 0),h([d({type:String,json:{write:!0}})],im.prototype,"normalizationField",void 0),h([d({type:[Jbe],json:{write:!0}})],im.prototype,"stops",null),im=sR=h([j("esri.renderers.visualVariables.OpacityVariable")],im);const aQ=im;var nR;let kc=nR=class extends Q2{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,r,i){if(i?.messages){const s=`visualVariables[${this.index}]`;i.messages.push(new K("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpressionTitle",context:i}))}}clone(){return new nR({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions?.clone()})}};h([d({readOnly:!0})],kc.prototype,"cache",null),h([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],kc.prototype,"axis",void 0),h([d({type:["rotation"],json:{type:["rotationInfo"]}})],kc.prototype,"type",void 0),h([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],kc.prototype,"rotationType",void 0),h([d({type:String,json:{write:!0}})],kc.prototype,"valueExpressionTitle",void 0),h([ge("web-scene","valueExpressionTitle")],kc.prototype,"writeValueExpressionTitleWebScene",null),kc=nR=h([j("esri.renderers.visualVariables.RotationVariable")],kc);const AA=kc;function Zbe(e){return Ut(e)}var oR;let xp=oR=class extends ue{constructor(e){super(e),this.label=null,this.size=null,this.value=null,this.useMinValue=null,this.useMaxValue=null}clone(){return new oR({label:this.label,size:this.size,value:this.value,useMaxValue:this.useMaxValue,useMinValue:this.useMinValue})}};h([d({type:String,json:{write:!0}})],xp.prototype,"label",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],xp.prototype,"size",void 0),h([d({type:Number,json:{write:!0}})],xp.prototype,"value",void 0),h([d({type:Boolean,json:{write:!1}})],xp.prototype,"useMinValue",void 0),h([d({type:Boolean,json:{write:!1}})],xp.prototype,"useMaxValue",void 0),xp=oR=h([j("esri.renderers.visualVariables.support.SizeStop")],xp);const fT=xp;var aR;let mT=aR=class extends nQ{constructor(){super(...arguments),this.customValues=null}clone(){return new aR({title:this.title,showLegend:this.showLegend,customValues:this.customValues?.slice(0)})}};h([d({type:[Number],json:{write:!0}})],mT.prototype,"customValues",void 0),mT=aR=h([j("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],mT);const Ybe=mT;var xh,Yi;function C0(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function H_(e){return e!=null&&!isNaN(e)&&isFinite(e)}function lQ(e){return e.valueExpression?xh.Expression:e.field&&typeof e.field=="string"?xh.Field:xh.Unknown}function Kbe(e,t){const r=t||lQ(e),i=e.valueUnit||"unknown";return r===xh.Unknown?Yi.Constant:e.stops?Yi.Stops:e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?Yi.ClampedLinear:i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?Yi.Proportional:Yi.Additive:Yi.Identity:Yi.RealWorldSize}(function(e){e.Unknown="unknown",e.Expression="expression",e.Field="field"})(xh||(xh={})),function(e){e.Unknown="unknown",e.Stops="stops",e.ClampedLinear="clamped-linear",e.Proportional="proportional",e.Additive="additive",e.Constant="constant",e.Identity="identity",e.RealWorldSize="real-world-size"}(Yi||(Yi={}));function Sst(e){}function Xbe(e){return()=>e}const k6={unknown:1,inches:fa(1,"meters","inches"),feet:fa(1,"meters","feet"),"us-feet":fa(1,"meters","us-feet"),yards:fa(1,"meters","yards"),miles:fa(1,"meters","miles"),"nautical-miles":fa(1,"meters","nautical-miles"),millimeters:fa(1,"meters","millimeters"),centimeters:fa(1,"meters","centimeters"),decimeters:fa(1,"meters","decimeters"),meters:fa(1,"meters","meters"),kilometers:fa(1,"meters","kilometers"),"decimal-degrees":1/Ofe(1,"meters",oi.radius)},uQ=()=>be.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),$A=e=>uQ().warn(`The visualVariable should be an instance of esri.renderers.visualVariables.${e}`),CA=()=>uQ().error("Use of arcade expressions requires an arcade context"),_V=new Ga,yT=Math.PI,cQ=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function hQ(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="color"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void $A("ColorVariable");const s=typeof t=="number",n=s?null:t,o=n?.attributes;let a=s?t:null;const l=i.field,{ipData:u,hasExpression:c}=i.cache;let p=i.cache.compiledFunc;if(!l&&!c){const g=i.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(c){if(r?.arcade==null)return void CA();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,w=b.getViewInfo(g),S=b.createExecContext(n,w,r.timeZone);if(!p){const M=b.createSyntaxTree(i.valueExpression);p=b.createFunction(M),i.cache.compiledFunc=p}a=b.executeFunction(p,S)}else o&&(a=o[l]);const f=i.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||s||!isNaN(m)&&m!==0)){isNaN(m)||s||(a/=m);const g=D6(a,u);if(g){const b=g[0],w=g[1],S=b===w?i.stops[b].color:Le.blendColors(i.stops[b].color,i.stops[w].color,g[2],r?.color);return new Le(S)}}}function pQ(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(g=>g.type==="opacity"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void $A("OpacityVariable");const s=typeof t=="number",n=s?null:t,o=n?.attributes;let a=s?t:null;const l=i.field,{ipData:u,hasExpression:c}=i.cache;let p=i.cache.compiledFunc;if(!l&&!c){const g=i.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(c){if(r?.arcade==null)return void CA();const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,w=b.getViewInfo(g),S=b.createExecContext(n,w,r.timeZone);if(!p){const M=b.createSyntaxTree(i.valueExpression);p=b.createFunction(M),i.cache.compiledFunc=p}a=b.executeFunction(p,S)}else o&&(a=o[l]);const f=i.normalizationField,m=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||s||!isNaN(m)&&m!==0)){isNaN(m)||s||(a/=m);const g=D6(a,u);if(g){const b=g[0],w=g[1];if(b===w)return i.stops[b].opacity;{const S=i.stops[b].opacity;return S+(i.stops[w].opacity-S)*g[2]}}}}function N6(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(m=>m.type==="rotation"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void $A("RotationVariable");const s=i.axis||"heading",n=s==="heading"&&i.rotationType==="arithmetic"?90:0,o=s==="heading"&&i.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a?.attributes,u=i.field,{hasExpression:c}=i.cache;let p=i.cache.compiledFunc,f=0;if(!u&&!c)return f;if(c){if(r?.arcade==null)return void CA();const m={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,b=g.getViewInfo(m),w=g.createExecContext(a,b,r.timeZone);if(!p){const S=g.createSyntaxTree(i.valueExpression);p=g.createFunction(S),i.cache.compiledFunc=p}f=g.executeFunction(p,w)}else l&&(f=l[u]||0);return f=typeof f!="number"||isNaN(f)?null:n+o*f,f}function Qbe(e,t,r){const i=typeof t=="number",s=i?null:t,n=s?.attributes;let o=i?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const c=r?.scale,p=r?.view;o=c==null||p==="3d"?ewe(e):c}else if(!i)switch(e.inputValueType){case xh.Expression:{if(r?.arcade==null)return void CA();const c={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},p=r.arcade.arcadeUtils,f=p.getViewInfo(c),m=p.createExecContext(s,f,r.timeZone);if(!l){const g=p.createSyntaxTree(e.valueExpression);l=p.createFunction(g),e.cache.compiledFunc=l}o=p.executeFunction(l,m);break}case xh.Field:n&&(o=n[e.field]);break;case xh.Unknown:o=null}if(!H_(o))return null;if(i||!e.normalizationField)return o;const u=n?parseFloat(n[e.normalizationField]):null;return H_(u)&&u!==0?o/u:null}function ewe(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function OA(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.find(n=>n.type==="size"):e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void $A("SizeVariable");const s=fQ(Qbe(i,t,r),i,t,r,i.cache.ipData);return s==null||isNaN(s)?0:s}function vo(e,t,r){return e==null?null:C0(e)?OA(e,t,r):H_(e)?e:null}function dQ(e,t,r){return H_(r)&&e>r?r:H_(t)&&e<t?t:e}function twe(e,t,r,i){return e+((vo(t.minSize,r,i)||t.minDataValue)??0)}function rwe(e,t,r){const i=e.stops;let s=i?.length&&i[0].size;return s==null&&(s=e.minSize),vo(s,t,r)}function iwe(e,t,r,i){const s=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),n=vo(t.minSize,r,i),o=vo(t.maxSize,r,i),a=i?.shape;if(e<=t.minDataValue)return n;if(e>=t.maxDataValue)return o;if(n==null||o==null)return null;if(t.scaleBy==="area"&&a){const l=a==="circle",u=l?yT*(n/2)**2:n*n,c=u+s*((l?yT*(o/2)**2:o*o)-u);return l?2*Math.sqrt(c/yT):Math.sqrt(c)}return n+s*(o-n)}function swe(e,t,r,i){const s=i?.shape,n=e/t.minDataValue,o=vo(t.minSize,r,i),a=vo(t.maxSize,r,i);let l=null;return l=s==="circle"?2*Math.sqrt(n*(o/2)**2):s==="square"||s==="diamond"||s==="image"?Math.sqrt(n*o**2):n*o,dQ(l,o,a)}function nwe(e,t,r,i,s){const[n,o,a]=D6(e,s);if(n===o)return vo(t.stops?.[n].size,r,i);{const l=vo(t.stops?.[n].size,r,i);return l+(vo(t.stops?.[o].size,r,i)-l)*a}}function owe(e,t,r,i){const s=(i?.resolution??1)*k6[t.valueUnit],n=vo(t.minSize,r,i),o=vo(t.maxSize,r,i),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/yT)/s:a==="radius"||a==="distance"?2*e/s:e/s,dQ(l,n,o)}function fQ(e,t,r,i,s){switch(t.transformationType){case Yi.Additive:return twe(e,t,r,i);case Yi.Constant:return rwe(t,r,i);case Yi.ClampedLinear:return iwe(e,t,r,i);case Yi.Proportional:return swe(e,t,r,i);case Yi.Stops:return nwe(e,t,r,i,s);case Yi.RealWorldSize:return owe(e,t,r,i);case Yi.Identity:return e;case Yi.Unknown:return null}}function awe(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const s={scale:t,view:r};let n=vo(e.minSize,_V,s),o=vo(e.maxSize,_V,s);if(n!=null||o!=null){if(n>o){const a=o;o=n,n=a}return{minSize:n,maxSize:o}}}function lwe(e,t,r){if(!e.visualVariables)return;const i=[],s=[],n=[],o=[],a=[];for(const l of e.visualVariables)switch(l.type){case"color":s.push(l);break;case"opacity":n.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return s.forEach(l=>{const u=hQ(l,t,r);i.push({variable:l,value:u})}),n.forEach(l=>{const u=pQ(l,t,r);i.push({variable:l,value:u})}),a.forEach(l=>{const u=N6(l,t,r);i.push({variable:l,value:u})}),o.forEach(l=>{const u=OA(l,t,r);i.push({variable:l,value:u})}),i.filter(l=>l.value!=null)}function D6(e,t){if(!t)return;let r=0,i=t.length-1;return t.some((s,n)=>e<s?(i=n,!0):(r=n,!1)),[r,i,(e-t[r])/(t[i]-t[r])]}function mQ(e,t,r){const i=["proportional","proportional","proportional"];for(const s of e){const n=s.useSymbolValue?"symbol-value":OA(s,t,r);switch(s.axis){case"width":i[0]=n;break;case"depth":i[1]=n;break;case"height":i[2]=n;break;case"width-and-depth":i[0]=n,i[1]=n;break;case"all":case void 0:case null:i[0]=n,i[1]=n,i[2]=n;break;default:s.axis}}return i}const xst=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:mQ,getColor:hQ,getOpacity:pQ,getRotationAngle:N6,getSize:OA,getSizeForValue:fQ,getSizeFromNumberOrVariable:vo,getSizeRangeAtScale:awe,getVisualVariableValues:lwe,viewScaleRE:cQ},Symbol.toStringTag,{value:"Module"}));var lR;const dx=new wt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),uR=new wt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function SV(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Zbe(e):e.type==="size"?C0(e)?e:(delete(e={...e}).type,new tr(e)):void 0}function xV(e,t,r){if(typeof e!="object")return e;const i=new tr;return i.read(e,r),i}let tr=lR=class extends Q2{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&cQ.test(this.valueExpression)}}set index(e){C0(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),C0(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return lQ(this)}set maxDataValue(e){e&&this.stops&&(be.getLogger(this).warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(be.getLogger(this).warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return SV(e)}readMaxSize(e,t,r){return xV(e,t,r)}set minDataValue(e){e&&this.stops&&(be.getLogger(this).warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(be.getLogger(this).warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return SV(e)}readMinSize(e,t,r){return xV(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(be.getLogger(this).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return Kbe(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i?.messages){const s=this.index,n=typeof s=="string"?s:`visualVariables[${s}]`;i.messages.push(new K("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?uR.read(e):null}clone(){return new lR({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:C0(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:C0(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops?.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions?.clone()})}flipSizes(){if(this.transformationType===Yi.ClampedLinear){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType===Yi.Stops){const e=this.stops;if(!e)return this;const t=e.map(i=>i.size).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops?.map(e=>e.value||0)}};h([d({readOnly:!0})],tr.prototype,"cache",null),h([d({type:dx.apiValues,json:{type:dx.jsonValues,origins:{"web-map":{read:!1}},read:dx.read,write:dx.write}})],tr.prototype,"axis",void 0),h([d()],tr.prototype,"index",null),h([d({type:String,readOnly:!0})],tr.prototype,"inputValueType",null),h([d({type:Ybe,json:{write:!0}})],tr.prototype,"legendOptions",void 0),h([d({type:Number,value:null,json:{write:!0}})],tr.prototype,"maxDataValue",null),h([d({type:Number,value:null,json:{write:!0}})],tr.prototype,"maxSize",null),h([Zt("maxSize")],tr.prototype,"castMaxSize",null),h([pe("maxSize")],tr.prototype,"readMaxSize",null),h([d({type:Number,value:null,json:{write:!0}})],tr.prototype,"minDataValue",null),h([d({type:Number,value:null,json:{write:!0}})],tr.prototype,"minSize",null),h([Zt("minSize")],tr.prototype,"castMinSize",null),h([pe("minSize")],tr.prototype,"readMinSize",null),h([d({type:String,json:{write:!0}})],tr.prototype,"normalizationField",void 0),h([d({readOnly:!0})],tr.prototype,"arcadeRequired",null),h([d({type:String})],tr.prototype,"scaleBy",void 0),h([d({type:[fT],value:null,json:{write:!0}})],tr.prototype,"stops",null),h([d({type:["outline"],json:{write:!0}})],tr.prototype,"target",void 0),h([d({type:String,readOnly:!0})],tr.prototype,"transformationType",null),h([d({type:["size"],json:{type:["sizeInfo"]}})],tr.prototype,"type",void 0),h([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],tr.prototype,"useSymbolValue",void 0),h([d({type:String,json:{write:!0}})],tr.prototype,"valueExpression",void 0),h([pe("valueExpression",["valueExpression","expression"])],tr.prototype,"readValueExpression",null),h([ge("web-scene","valueExpression")],tr.prototype,"writeValueExpressionWebScene",null),h([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],tr.prototype,"valueRepresentation",void 0),h([d({type:uR.apiValues,json:{write:uR.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],tr.prototype,"valueUnit",void 0),h([pe("valueUnit")],tr.prototype,"readValueUnit",null),tr=lR=h([j("esri.renderers.visualVariables.SizeVariable")],tr);const Jy=tr,uwe={color:oQ,size:Jy,opacity:aQ,rotation:AA},cwe=new wt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),hwe=/^\[([^\]]+)\]$/i;let gT=class extends et{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(t){if(this._resetVariables(),t=t&&t.filter(r=>!!r),t?.length){for(const r of t)switch(r.type){case"color":this.colorVariables.push(r);break;case"opacity":this.opacityVariables.push(r);break;case"rotation":this.rotationVariables.push(r);break;case"size":this.sizeVariables.push(r)}this.sizeVariables.length&&this.sizeVariables.some(r=>!!r.target)&&t.sort((r,i)=>{let s=null;return s=r.target===i.target?0:r.target?1:-1,s});for(let r=0;r<t.length;r++)t[r].index=r;this._set("visualVariables",t)}else this._set("visualVariables",t)}readVariables(t,r,i){const{rotationExpression:s,rotationType:n}=r,o=s?.match(hwe),a=o?.[1];if(a&&(t||(t=[]),t.push({type:"rotationInfo",rotationType:n,field:a})),t)return t.map(l=>{const u=cwe.read(l.type),c=uwe[u];c||(be.getLogger(this).warn(`Unknown variable type: ${u}`),i?.messages&&i.messages.push(new sa("visual-variable:unsupported",`visualVariable of type '${u}' is not supported`,{definition:l,context:i})));const p=new c;return p.read(l,i),p})}writeVariables(t,r){const i=[];for(const s of t){const n=s.toJSON(r);n&&i.push(n)}return i}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};h([d()],gT.prototype,"visualVariables",null),gT=h([j("esri.renderers.visualVariables.VisualVariableFactory")],gT);const pwe=gT,dwe={base:Q2,key:"type",typeMap:{opacity:aQ,color:oQ,rotation:AA,size:Jy}},Jd=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new pwe}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,s){return this._vvFactory.readVariables(r,i,s)}writeVisualVariables(r,i,s,n){i[s]=this._vvFactory.writeVariables(r,n)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){const s=this.visualVariables;return s?s.filter(n=>n.type===r&&(typeof i=="string"?n.target===i:i!==!1||!n.target)):[]}async collectVVRequiredFields(r,i){let s=[];this.visualVariables&&(s=s.concat(this.visualVariables));for(const n of s)n&&(n.field&&Gn(r,i,n.field),n.normalizationField&&Gn(r,i,n.normalizationField),n.valueExpression&&(fwe(n.valueExpression,r,i)||await yn(r,i,n.valueExpression)))}};return h([d({types:[dwe],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),h([pe("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),h([ge("visualVariables")],t.prototype,"writeVisualVariables",null),t=h([j("esri.renderers.mixins.VisualVariablesMixin")],t),t};function fwe(e,t,r){const i=qbe(e);return i!=null&&(Gn(t,r,i),!0)}const F6=[252,146,31,255],mwe=[153,153,153,255],ywe={type:"esriSMS",style:"esriSMSCircle",size:6,color:F6,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},gwe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:F6},vwe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},bwe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},wwe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},_we={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},Swe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},xwe=Mo.fromJSON(ywe),Mwe=qn.fromJSON(gwe),Twe=Hl.fromJSON(vwe),Iwe=_1.fromJSON(bwe),Tst=Mo.fromJSON(wwe),Ist=qn.fromJSON(_we),Est=Hl.fromJSON(Swe);wh.fromSimpleMarkerSymbol(xwe);Hy.fromSimpleLineSymbol(Mwe);Wd.fromSimpleFillSymbol(Twe);new K2({symbolLayers:new qe([new qy({material:{color:F6},edges:new IX({size:za(1),color:new Le(mwe)})})])});const Ewe=new Hy({symbolLayers:new qe([new v1({material:{color:new Le([0,0,0])},size:za(1)})])}),Awe=new Wd({symbolLayers:new qe([new qy({outline:{color:new Le([0,0,0]),size:za(1)}})])}),fg={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function $we(e,t=fg){if(!e)return{symbol:null};const{retainId:r=fg.retainId,ignoreDrivers:i=fg.ignoreDrivers,hasLabelingContext:s=fg.hasLabelingContext,retainCIM:n=fg.retainCIM,cimFallbackEnabled:o=fg.cimFallbackEnabled}=t;let a=null;if(Ay(e)||e instanceof Wy)a=e.clone();else if(e.type==="cim"){const l=e.data?.symbol?.type;switch(l){case"CIMPointSymbol":a=n?e.clone():wh.fromCIMSymbol(e);break;case"CIMLineSymbol":o&&(a=Ewe.clone(),t?.logWarning?.("Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":o&&(a=Awe.clone(),t?.logWarning?.("Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!a)return{error:new K("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${l||"unknown"}' is unsupported in 3D`,{symbol:e})}}else if(e instanceof qn)a=Hy.fromSimpleLineSymbol(e);else if(e instanceof Mo)a=wh.fromSimpleMarkerSymbol(e);else if(e instanceof Sh)a=wh.fromPictureMarkerSymbol(e);else if(e instanceof Hl)a=t.geometryType&&t.geometryType==="mesh"?K2.fromSimpleFillSymbol(e):Wd.fromSimpleFillSymbol(e);else{if(!(e instanceof _1))return{error:new K("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};a=s?TA.fromTextSymbol(e):wh.fromTextSymbol(e)}return r&&a&&a.type!=="cim"&&(a.id=e.id),i&&Ay(a)&&a.symbolLayers.forEach(l=>l.ignoreDrivers=!0),{symbol:a}}function yI(e,t,r,i){const s=yQ(e,{},{context:i,isLabelSymbol:!1});s!=null&&(t[r]=s)}function MV(e,t,r,i){const s=yQ(e,{},{context:i,isLabelSymbol:!0});s!=null&&(t[r]=s)}function TV(e){return e instanceof w1||e instanceof Wy}function yQ(e,t,r){if(e==null)return null;const{context:i,isLabelSymbol:s}=r,n=i?.origin,o=i?.messages;if(n==="web-scene"&&!TV(e)){const a=$we(e,{retainCIM:!0,hasLabelingContext:s});return a.symbol!=null?a.symbol.write(t,i):(o?.push(new K("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:i,error:a.error})),null)}return(n==="web-map"||n==="portal-item"&&!lY(i?.layer))&&TV(e)?(o?.push(new K("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:i})),null):e.write(t,i)}function j6(e,t){return Lbe(e,null,t)}const PA={types:iQ,json:{write:{writer:yI},origins:{"web-scene":{types:fV,write:{writer:yI},read:{reader:u1({types:fV})}}}}},V6=pD({json:{origins:{"web-scene":{write:{isRequired:!0}}}}},PA),gQ={types:{base:js,key:"type",typeMap:{"simple-fill":Km.typeMap["simple-fill"],"picture-fill":Km.typeMap["picture-fill"],"polygon-3d":Km.typeMap["polygon-3d"]}},json:{write:{writer:yI},origins:{"web-scene":{type:Wd,write:{writer:yI}}}}},vT={cast:e=>e==null||typeof e=="string"||typeof e=="number"?e:`${e}`,json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}};var cR;let Mp=cR=class extends ue{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new cR({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?.clone()??null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};h([d({type:String,json:{write:!0}})],Mp.prototype,"description",void 0),h([d({type:String,json:{write:!0}})],Mp.prototype,"label",void 0),h([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Mp.prototype,"minValue",void 0),h([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Mp.prototype,"maxValue",void 0),h([d(V6)],Mp.prototype,"symbol",void 0),Mp=cR=h([j("esri.renderers.support.ClassBreakInfo")],Mp);const Ov=Mp;var hR;const vQ="log",bT="percent-of-total",wT="field",fx=new wt({esriNormalizeByLog:vQ,esriNormalizeByPercentOfTotal:bT,esriNormalizeByField:wT}),Cwe=ni(Ov);let Ni=hR=class extends Jd(Uh){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map(s=>{const n=new Ov;return n.read(s,r),n.minValue==null&&(n.minValue=i),n.maxValue==null&&(n.maxValue=n.minValue),i=n.maxValue,n})}writeClassBreakInfos(e,t,r,i){const s=e.map(n=>n.write({},i));this._areClassBreaksConsecutive()&&s.forEach(n=>delete n.classMinValue),t[r]=s}castField(e){return e==null?e:typeof e=="function"?(be.getLogger(this).error(".field: field must be a string value"),null):V2(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&wT||r&&bT||null,t&&r&&be.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==wT&&e!==bT||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new Ov({minValue:e,maxValue:t,symbol:sQ(r)}):Cwe(Z(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const s=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(s[0]===e&&s[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&t?.arcade==null&&be.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&t?.arcade==null&&(r={...r,arcade:await Iy()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&t?.arcade==null)return void be.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&t?.arcade==null){const s=await Iy(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r={...r,arcade:s}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((i,s)=>i+s.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new hR({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol?.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol?.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:Z(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:Z(this.visualVariables),legendOptions:Z(this.legendOptions),authoringInfo:Z(this.authoringInfo)})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),yn(e,t,this.valueExpression)];Gn(e,t,this.field),Gn(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=t??{},{valueExpression:a}=this;let l=this._compiledValueExpression.valueExpression===a?this._compiledValueExpression.compiledFunction:null;const u=n.arcadeUtils;if(!l){const p=u.createSyntaxTree(a);l=u.createFunction(p),this._compiledValueExpression.compiledFunction=l}this._compiledValueExpression.valueExpression=a;const c=u.executeFunction(l,u.createExecContext(e,u.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._getBreakIndexfromInfos(c)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let s=parseFloat(r[t]);if(i){const n=this.normalizationTotal,o=parseFloat(this.normalizationField?r[this.normalizationField]:void 0);if(i===vQ)s=Math.log(s)*Math.LOG10E;else if(i!==bT||n==null||isNaN(n)){if(i===wT&&!isNaN(o)){if(isNaN(s)||isNaN(o))return-1;s/=o}}else s=s/n*100}return this._getBreakIndexfromInfos(s)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};h([d(gQ)],Ni.prototype,"backgroundFillSymbol",void 0),h([d({type:[Ov]})],Ni.prototype,"classBreakInfos",void 0),h([pe("classBreakInfos")],Ni.prototype,"readClassBreakInfos",null),h([ge("classBreakInfos")],Ni.prototype,"writeClassBreakInfos",null),h([d({type:String,json:{write:!0}})],Ni.prototype,"defaultLabel",void 0),h([d(PA)],Ni.prototype,"defaultSymbol",void 0),h([d({type:String,json:{write:!0}})],Ni.prototype,"field",void 0),h([Zt("field")],Ni.prototype,"castField",null),h([d({type:Boolean})],Ni.prototype,"isMaxInclusive",void 0),h([d({type:Xm,json:{write:!0}})],Ni.prototype,"legendOptions",void 0),h([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],Ni.prototype,"minValue",null),h([d({type:String,json:{write:!0}})],Ni.prototype,"normalizationField",void 0),h([d({type:Number,cast:e=>Bo(e),json:{write:!0}})],Ni.prototype,"normalizationTotal",void 0),h([d({type:fx.apiValues,value:null,json:{type:fx.jsonValues,read:fx.read,write:fx.write}})],Ni.prototype,"normalizationType",null),h([We({classBreaks:"class-breaks"})],Ni.prototype,"type",void 0),h([d({type:String,json:{write:!0}})],Ni.prototype,"valueExpression",void 0),h([d({type:String,json:{write:!0}})],Ni.prototype,"valueExpressionTitle",void 0),Ni=hR=h([j("esri.renderers.ClassBreaksRenderer")],Ni);const S1=Ni,pR=-3,Owe=pR-1;var nh;(function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"})(nh||(nh={}));let Ast=class{constructor(t,r,i){this.name=t,this._storage=r,this.id=Rwe+++":",this.size=0,this.maxSize=-1,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}destroy(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}get hitRate(){return this._hit/(this._hit+this._miss)}get storageSize(){return this._storage.size}getSize(t){return this._storage.getSize(this,t)}resetHitRate(){this._hit=this._miss=0}put(t,r,i,s=0){this._storage.put(this,t,r,i,s)}pop(t){const r=this._storage.pop(this,t);return r===void 0?++this._miss:++this._hit,r}get(t){const r=this._storage.get(this,t);return r===void 0?++this._miss:++this._hit,r}peek(t){return this._storage.peek(this,t)}updateSize(t,r,i){this._storage.updateSize(this,t,r,i)}clear(){this._storage.clear(this)}clearAll(){this._storage.clearAll()}get performanceInfo(){return this._storage.performanceInfo}resetStats(){this._storage.resetStats()}},Pwe=class{get size(){return this._size}constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new R_,this._users=new R_}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,-1),this._checkSize()}getSize(t,r){return this._db.get(t.id+r)?.size??0}put(t,r,i,s,n){r=t.id+r;const o=this._db.get(r);if(o&&(this._size-=o.size,t.size-=o.size,this._db.delete(r),o.entry!==i&&this._notifyRemove(r,o.entry,o.size,nh.ALL)),s>this._maxSize)return void this._notifyRemove(r,i,s,nh.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!s||s<0)return console.warn(`Refusing to cache entry with size ${s} for key ${r}`),void this._notifyRemove(r,i,0,nh.ALL);const a=1+Math.max(n,Owe)-pR;this._db.set(r,new Lwe(i,s,a)),this._size+=s,t.size+=s,this._checkSize()}updateSize(t,r,i,s){r=t.id+r;const n=this._db.get(r);if(n&&n.entry===i){for(this._size-=n.size,t.size-=n.size;s>this._maxSize;){const o=this._notifyRemove(r,i,s,nh.SOME);if(!(o!=null&&o>0))return void this._db.delete(r);s=o}n.size=s,this._size+=s,t.size+=s,this._checkSize()}}pop(t,r){r=t.id+r;const i=this._db.get(r);if(i)return this._size-=i.size,t.size-=i.size,this._db.delete(r),++this._hit,i.entry;++this._miss}get(t,r){r=t.id+r;const i=this._db.get(r);if(i!==void 0)return this._db.delete(r),i.lives=i.lifetime,this._db.set(r,i),++this._hit,i.entry;++this._miss}peek(t,r){const i=this._db.get(t.id+r);return i?++this._hit:++this._miss,i?.entry}get performanceInfo(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;i[l]=(i[l]||0)+o.size,this._users.forAll(u=>{const{id:c,name:p}=u;if(a.startsWith(c)){const f=r[p]||0;r[p]=f+o.size}})});const s={};this._users.forAll(o=>{const a=o.name;if("hitRate"in o&&typeof o.hitRate=="number"&&!isNaN(o.hitRate)&&o.hitRate>0){const l=r[a]||0;r[a]=l,s[a]=Math.round(100*o.hitRate)+"%"}else s[a]="0%"});const n=Object.keys(r);n.sort((o,a)=>r[a]-r[o]),n.forEach(o=>t[o]=Math.round(r[o]/2**20)+"MB / "+s[o]);for(let o=i.length-1;o>=0;--o){const a=i[o];a&&(t["Priority "+(o+pR-1)]=Math.round(a/this._size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){const r=t.id;this._db.forEach((i,s)=>{s.startsWith(r)&&(this._size-=i.size,this._db.delete(s),this._notifyRemove(s,i.entry,i.size,nh.ALL))}),t.size=0}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,t.size,nh.ALL)),this._users.forAll(t=>t.size=0),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i,s){let n;return this._removeFuncs.some(o=>{if(t.startsWith(o[0])){const a=o[1](r,s,i);return typeof a=="number"&&(n=a),!0}return!1}),n}_checkSize(){this._users.forAll(t=>this._checkSizeLimits(t)),this._checkSizeLimits()}_checkSizeLimits(t){const r=t??this;if(r.maxSize<0||r.size<=r.maxSize)return;const i=t?.id;let s=!0;for(;s;){s=!1;for(const[n,o]of this._db)if(o.lifetime===0&&(!i||n.startsWith(i))){if(this._purgeItem(n,o,t),r.size<=.9*r.maxSize)return;s||=this._db.has(n)}}for(const[n,o]of this._db)if((!i||n.startsWith(i))&&(this._purgeItem(n,o,t),r.size<=.9*r.maxSize))return}_purgeItem(t,r,i=this._users.find(s=>t.startsWith(s.id))){if(this._db.delete(t),r.lives<=1){this._size-=r.size,i&&(i.size-=r.size);const s=this._notifyRemove(t,r.entry,r.size,nh.SOME);s!=null&&s>0&&(this._size+=s,i&&(i.size+=s),r.lives=r.lifetime,r.size=s,this._db.set(t,r))}else--r.lives,this._db.set(t,r)}},Rwe=0,Lwe=class{constructor(t,r,i){this.entry=t,this.size=r,this.lifetime=i,this.lives=i}},U6=class{constructor(t,r){this._storage=new Pwe,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}destroy(){this._storage.deregister(this),this._storage.destroy()}put(t,r,i=1){this._storage.put(this,t,r,i,1)}pop(t){return this._storage.pop(this,t)}get(t){return this._storage.get(this,t)}clear(){this._storage.clearAll()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}resetHitRate(){}},bQ=class dR{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}since(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new K(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new dR(this.major,this.minor,this._context)}static parse(t,r=""){const[i,s]=t.split("."),n=/^\s*\d+\s*$/;if(!i?.match||!n.test(i))throw new K((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!s?.match||!n.test(s))throw new K((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),a=parseInt(s,10);return new dR(o,a,r)}},RA=class{};function kwe(e){return e instanceof d1?e===RA.instance:e?.toString().toLowerCase()==="unknown"}function Lst(e){return kwe(e)?RA.instance:e}RA.instance=new na("Etc/UTC");function Nwe(e){return"timeZone"in e}function Dwe(e){return"timeZone"in e}function Fwe(e){return"dateFieldsTimeZone"in e}const jwe=new Map;let LA=class _T{static fromJSON(t){return new _T(t.fields,t.timeZoneByFieldName)}static fromLayer(t){return new _T(t.fields??[],EV(t))}static fromLayerJSON(t){return new _T(t.fields??[],EV(t))}constructor(t=[],r){this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this._requiredFields=null,this.dateFields=[],this.numericFields=[],this.fields=t||[],this._timeZoneByFieldName=r?new Map(r):null;const i=[];for(const s of this.fields){const n=s?.name,o=IV(n);if(n&&o){const a=Om(n);this._fieldsMap.set(n,s),this._fieldsMap.set(a,s),this._normalizedFieldsMap.set(o,s),i.push(`${a}:${s.type}:${this._timeZoneByFieldName?.get(n)}`),b1e(s)?(this.dateFields.push(s),this._dateFieldsSet.add(s)):mX(s)&&(this._numericFieldsSet.add(s),this.numericFields.push(s)),oV(s)||aV(s)||(s.editable=s.editable==null||!!s.editable,s.nullable=s.nullable==null||!!s.nullable)}}i.sort(),this.uid=i.join()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)oV(t)||aV(t)||t.nullable||o1e(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}equals(t){return this.uid===t?.uid}has(t){return this.get(t)!=null}get(t){if(!t)return;let r=this._fieldsMap.get(t);return r||(r=this._fieldsMap.get(Om(t))??this._normalizedFieldsMap.get(IV(t)),r&&this._fieldsMap.set(t,r),r)}getTimeZone(t){const r=this.get(t&&typeof t!="string"?t.name:t);return r?this._timeZoneByFieldName?this._timeZoneByFieldName.get(r.name):r.type==="date"||r.type==="esriFieldTypeDate"?(be.getLogger("esri.layers.support.FieldsIndex").error(new K("getTimeZone:no-timezone-information",`no time zone information for field '${r.name}'`)),Cd):wQ.has(r.type)?Ty:null:null}getLuxonTimeZone(t){const r=this.getTimeZone(t);return r?r===Ty?RA.instance:r===Cd?ys.utcInstance:KE(jwe,r,()=>na.create(r)):null}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isTimeOnlyField(t){return w1e(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){return this.get(t)?.name??void 0}toJSON(){return{fields:this.fields.map(t=>D_(t)?t.toJSON():t),timeZoneByFieldName:this._timeZoneByFieldName?Array.from(this._timeZoneByFieldName.entries()):null}}};function Om(e){return e.trim().toLowerCase()}function IV(e){return Bve(e)?.toLowerCase()??""}const wQ=new Set(["time-only","date-only","timestamp-offset","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]);function EV(e){const t=new Map;if(!e.fields)return t;const r=e.datesInUnknownTimezone===!0,{timeInfo:i,editFieldsInfo:s}=e,n=(i?"startField"in i?i.startField:i.startTimeField:"")??"",o=(i?"endField"in i?i.endField:i.endTimeField:"")??"",a=Fwe(e)?e.dateFieldsTimeZone??null:e.dateFieldsTimeReference?HM(e.dateFieldsTimeReference):null,l=s?Nwe(s)?s.timeZone??a:s.dateFieldsTimeReference?HM(s.dateFieldsTimeReference):a??Cd:null,u=i?Dwe(i)?i.timeZone??a:i.timeReference?HM(i.timeReference):a:null,c=new Map([[Om(s?.creationDateField??""),l],[Om(s?.editDateField??""),l],[Om(n),u],[Om(o),u]]);for(const{name:p,type:f}of e.fields)if(wQ.has(f))t.set(p,Ty);else if(f!=="date"&&f!=="esriFieldTypeDate")t.set(p,null);else if(r)t.set(p,Ty);else{const m=c.get(Om(p??""))??a;t.set(p,m)}return t}function Vwe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Uwe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function zwe(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}function Gwe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function _Q(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function SQ(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function xQ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function Bwe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function qwe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Hwe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function Wwe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function Jwe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Zwe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Ywe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function MQ(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return Math.sqrt(r*r+i*i+s*s+n*n)}function TQ(e,t){const r=t[0]-e[0],i=t[1]-e[1],s=t[2]-e[2],n=t[3]-e[3];return r*r+i*i+s*s+n*n}function IQ(e){const t=e[0],r=e[1],i=e[2],s=e[3];return Math.sqrt(t*t+r*r+i*i+s*s)}function EQ(e){const t=e[0],r=e[1],i=e[2],s=e[3];return t*t+r*r+i*i+s*s}function Kwe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Xwe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Qwe(e,t){const r=t[0],i=t[1],s=t[2],n=t[3];let o=r*r+i*i+s*s+n*n;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=s*o,e[3]=n*o),e}function e_e(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function AQ(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=t[3];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e[2]=o+i*(r[2]-o),e[3]=a+i*(r[3]-a),e}function t_e(e,t){const r=dA;let i,s,n,o,a,l;t=t||1;do i=2*r()-1,s=2*r()-1,a=i*i+s*s;while(a>=1);do n=2*r()-1,o=2*r()-1,l=n*n+o*o;while(l>=1);const u=Math.sqrt((1-a)/l);return e[0]=t*i,e[1]=t*s,e[2]=t*n*u,e[3]=t*o*u,e}function r_e(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3];return e[0]=r[0]*i+r[4]*s+r[8]*n+r[12]*o,e[1]=r[1]*i+r[5]*s+r[9]*n+r[13]*o,e[2]=r[2]*i+r[6]*s+r[10]*n+r[14]*o,e[3]=r[3]*i+r[7]*s+r[11]*n+r[15]*o,e}function i_e(e,t,r){const i=t[0],s=t[1],n=t[2],o=r[0],a=r[1],l=r[2],u=r[3],c=u*i+a*n-l*s,p=u*s+l*i-o*n,f=u*n+o*s-a*i,m=-o*i-a*s-l*n;return e[0]=c*u+m*-o+p*-l-f*-a,e[1]=p*u+m*-a+f*-o-c*-l,e[2]=f*u+m*-l+c*-a-p*-o,e[3]=t[3],e}function s_e(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function n_e(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function o_e(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=t[0],a=t[1],l=t[2],u=t[3],c=zn();return Math.abs(r-o)<=c*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=c*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(s-l)<=c*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(n-u)<=c*Math.max(1,Math.abs(n),Math.abs(u))}const a_e=_Q,l_e=SQ,u_e=xQ,c_e=MQ,h_e=TQ,p_e=IQ,d_e=EQ;Object.freeze(Object.defineProperty({__proto__:null,add:Gwe,ceil:Bwe,copy:Vwe,copyVec3:Uwe,dist:c_e,distance:MQ,div:u_e,divide:xQ,dot:e_e,equals:o_e,exactEquals:n_e,floor:qwe,inverse:Xwe,len:p_e,length:IQ,lerp:AQ,max:Wwe,min:Hwe,mul:l_e,multiply:SQ,negate:Kwe,normalize:Qwe,random:t_e,round:Jwe,scale:Zwe,scaleAndAdd:Ywe,set:zwe,sqrDist:h_e,sqrLen:d_e,squaredDistance:TQ,squaredLength:EQ,str:s_e,sub:a_e,subtract:_Q,transformMat4:r_e,transformQuat:i_e},Symbol.toStringTag,{value:"Module"}));function kA(){return[0,0,0,0]}function f_e(e){return[e[0],e[1],e[2],e[3]]}function x1(e,t,r,i){return[e,t,r,i]}function m_e(e,t=kA()){const r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function y_e(e,t){return new Float64Array(e,t,4)}function $Q(){return kA()}function CQ(){return x1(1,1,1,1)}function OQ(){return x1(1,0,0,0)}function PQ(){return x1(0,1,0,0)}function RQ(){return x1(0,0,1,0)}function LQ(){return x1(0,0,0,1)}const g_e=$Q(),v_e=CQ(),b_e=OQ(),w_e=PQ(),__e=RQ(),S_e=LQ();Object.freeze(Object.defineProperty({__proto__:null,ONES:v_e,UNIT_W:S_e,UNIT_X:b_e,UNIT_Y:w_e,UNIT_Z:__e,ZEROS:g_e,clone:f_e,create:kA,createView:y_e,fromArray:m_e,fromValues:x1,ones:CQ,unitW:LQ,unitX:OQ,unitY:PQ,unitZ:RQ,zeros:$Q},Symbol.toStringTag,{value:"Module"}));function kQ(e){return"r"in e&&"g"in e&&"b"in e}function NQ(e){return"h"in e&&"s"in e&&"v"in e}function DQ(e){return"l"in e&&"a"in e&&"b"in e}function FQ(e){return"l"in e&&"c"in e&&"h"in e}function x_e(e){return"x"in e&&"y"in e&&"z"in e}const M_e=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],T_e=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function jQ(e,t){const r=[];let i,s;if(e[0].length!==t.length)throw new Error("dimensions do not match");const n=e.length,o=e[0].length;let a=0;for(i=0;i<n;i++){for(a=0,s=0;s<o;s++)a+=e[i][s]*t[s];r.push(a)}return r}function VQ(e){const t=[e.r/255,e.g/255,e.b/255].map(i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4),r=jQ(M_e,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function z6(e){const t=jQ(T_e,[e.x/100,e.y/100,e.z/100]).map(r=>{const i=r<=.0031308?12.92*r:1.055*r**.4166666666666667-.055;return Math.min(1,Math.max(i,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function UQ(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(r=>r>.008856451679035631?r**.3333333333333333:7.787037037037035*r+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function zQ(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(i=>i>6/29?i**3:3*(6/29)**2*(i-4/29));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function I_e(e){const t=e.l,r=e.a,i=e.b,s=Math.sqrt(r*r+i*i);let n=Math.atan2(i,r);return n=n>0?n:n+2*Math.PI,{l:t,c:s,h:n}}function E_e(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}function A_e(e){return UQ(VQ(e))}function $_e(e){return z6(zQ(e))}function C_e(e){return I_e(UQ(VQ(e)))}function O_e(e){return z6(zQ(E_e(e)))}function P_e(e){const t=e.r,r=e.g,i=e.b,s=Math.max(t,r,i),n=s-Math.min(t,r,i);let o=s,a=n===0?0:s===t?(r-i)/n%6:s===r?(i-t)/n+2:(t-r)/n+4,l=n===0?0:n/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function R_e(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,s=i*r,n=s*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:s,g:n,b:0};break;case 1:o={r:n,g:s,b:0};break;case 2:o={r:0,g:s,b:n};break;case 3:o={r:0,g:n,b:s};break;case 4:o={r:n,g:0,b:s};break;case 5:case 6:o={r:s,g:0,b:n};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-s),o.g=Math.round(o.g+i-s),o.b=Math.round(o.b+i-s),o}function NA(e){return kQ(e)?e:FQ(e)?O_e(e):DQ(e)?$_e(e):x_e(e)?z6(e):NQ(e)?R_e(e):e}function gI(e){return NQ(e)?e:P_e(NA(e))}function AV(e){return DQ(e)?e:A_e(NA(e))}function $V(e){return FQ(e)?e:C_e(NA(e))}var CV;(function(e){e[e.Low=160]="Low",e[e.High=225]="High"})(CV||(CV={}));const L_e={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},fR={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0}};function kst(e){return[e.r,e.g,e.b,e.a]}const k_e=` /-,
`;function OV(e){let t=e.length;for(;t--;)if(!k_e.includes(e.charAt(t)))return!1;return!0}function N_e(e,t){const r=[];let i=0,s=-1;do if(s=e.indexOf("[",i),s>=i){if(s>i){const n=e.substr(i,s-i);r.push([n,null,OV(n)])}if(i=s+1,s=e.indexOf("]",i),s>=i){if(s>i){const n=t[e.substr(i,s-i)];n&&r.push([null,n,!1])}i=s+1}}while(s!==-1);if(i<e.length-1){const n=e.substr(i);r.push([n,null,OV(n)])}return r}function D_e(e,t,r,i){let s="",n=null;for(const o of t){const[a,l,u]=o;if(a)u?n=a:(n&&(s+=n,n=null),s+=a);else{let c=l;r!=null&&(c=qQ(l,r));const p=e.attributes[c];p&&(n&&(s+=n,n=null),s+=p)}}return F_e(s,i)}function F_e(e,t){switch(typeof e!="string"&&(e=String(e)),t){case"LowerCase":return e.toLowerCase();case"Allcaps":return e.toUpperCase();default:return e}}function Nst(e,t,r,i,s,n,o=!0){const a=t/s,l=r/n,u=Math.ceil(a/2),c=Math.ceil(l/2);for(let p=0;p<n;p++)for(let f=0;f<s;f++){const m=4*(f+(o?n-p-1:p)*s);let g=0,b=0,w=0,S=0,M=0,x=0,_=0;const I=(p+.5)*l;for(let E=Math.floor(p*l);E<(p+1)*l;E++){const A=Math.abs(I-(E+.5))/c,C=(f+.5)*a,O=A*A;for(let R=Math.floor(f*a);R<(f+1)*a;R++){let D=Math.abs(C-(R+.5))/u;const N=Math.sqrt(O+D*D);N>=-1&&N<=1&&(g=2*N*N*N-3*N*N+1,g>0&&(D=4*(R+E*t),_+=g*e[D+3],w+=g,e[D+3]<255&&(g=g*e[D+3]/250),S+=g*e[D],M+=g*e[D+1],x+=g*e[D+2],b+=g))}}i[m]=S/b,i[m+1]=M/b,i[m+2]=x/b,i[m+3]=_/w}}function GQ(e){return e?[e[0],e[1],e[2],e[3]/255]:[0,0,0,0]}function j_e(e){return e.data?.symbol??null}function V_e(e){return e.type==="CIMVectorMarker"||e.type==="CIMPictureMarker"||e.type==="CIMBarChartMarker"||e.type==="CIMCharacterMarker"||e.type==="CIMPieChartMarker"||e.type==="CIMStackedBarChartMarker"}function U_e(e){return e.type==="CIMGradientStroke"||e.type==="CIMPictureStroke"||e.type==="CIMSolidStroke"}function Dst(e){return e!=null&&(e.type==="CIMGradientFill"||e.type==="CIMHatchFill"||e.type==="CIMPictureFill"||e.type==="CIMSolidFill"||e.type==="CIMWaterFill")}function BQ(e){return e!=null&&(e.type==="CIMMarkerPlacementAlongLineRandomSize"||e.type==="CIMMarkerPlacementAlongLineSameSize"||e.type==="CIMMarkerPlacementAlongLineVariableSize"||e.type==="CIMMarkerPlacementAtExtremities"||e.type==="CIMMarkerPlacementAtMeasuredUnits"||e.type==="CIMMarkerPlacementAtRatioPositions"||e.type==="CIMMarkerPlacementOnLine"||e.type==="CIMMarkerPlacementOnVertices")}const Fst=(e,t=0)=>e==null||isNaN(e)?t:e,jst=(e,t)=>e??t,Vst=e=>e.tintColor?GQ(e.tintColor):[255,255,255,1],Ust=e=>{if(!e)return!1;for(const t of e)switch(t.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function zst(){return fe(()=>import("./geometryEngineJSON-Dtfpmcvj.js").then(e=>e.g),__vite__mapDeps([18,19,1,20]),import.meta.url)}function Gst(e){if(!e)return"normal";switch(e.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Bst(e){if(!e)return"normal";switch(e.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function qst(e){let t="normal",r="normal";if(e){const i=e.toLowerCase();i.includes("italic")?t="italic":i.includes("oblique")&&(t="oblique"),i.includes("bold")?r="bold":i.includes("light")&&(r="lighter")}return{style:t,weight:r}}function Hst(e){return e.underline?"underline":e.strikethrough?"line-through":"none"}function PV(e){if(!e)return null;switch(e.type){case"CIMPolygonSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=PV(t);if(r!=null)return r}break;case"CIMTextSymbol":return PV(e.symbol);case"CIMSolidFill":return e.color}return null}function RV(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const t=e.symbolLayers;if(t)for(const r of t){const i=RV(r);if(i!=null)return i}break}case"CIMTextSymbol":return RV(e.symbol);case"CIMSolidStroke":return e.color}}function LV(e){if(e)switch(e.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(e.symbolLayers)for(const t of e.symbolLayers){const r=LV(t);if(r!==void 0)return r}break;case"CIMTextSymbol":return LV(e.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return e.width}}function Wst(e){switch(e){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function Jst(e){switch(e){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function z_e(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:typeof e[t]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Zst=e=>e.includes("data:image/svg+xml");function G6(e){return e&&e.charAt(0).toLowerCase()+e.substring(1)}function Yst(e,t,r,i,s,n){const{infos:o}=n;let a=1,l=0,u=0,c=0;for(const{offsetX:m,offsetY:g,rotation:b,size:w,frameHeight:S,rotateClockWise:M}of o)u=DV(m,g,l,a,u),c=NV(m,g,l,a,c),S&&(a*=w/S),l=FV(b,M,l);const p=DV(i,s,l,a,u),f=NV(i,s,l,a,c);return{size:e*a,rotation:FV(t,r,l),offsetX:p,offsetY:f}}function G_e(e){if(e==null)return!1;if(Array.isArray(e))return e.every(t=>G_e(t));switch(typeof e){case"string":return!!e;case"number":return!isNaN(e)}}function Kst(e,t){if(t==="color"||t==="outlinecolor"||t==="backgroundcolor"||t==="borderlinecolor"||t==="tintcolor")return[...L_e[t]];const r=fR[e];if(!r)throw new Error(`InternalError: default value for type ${e}.`);return r[t]}function B_e(e){return e?.dashTemplate&&typeof e.dashTemplate=="string"&&(e.dashTemplate=e.dashTemplate.split(" ").map(Number)),e}function mR(e){if(e==null)return"Normal";switch(e.type){case"CIMTextSymbol":return e.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const t=e.symbolLayers;if(!t)return"Normal";for(const r of t)if(r.type==="CIMVectorMarker")return mR(r)}break;case"CIMVectorMarker":{const t=e.markerGraphics;if(!t)return"Normal";for(const r of t)if(r.symbol)return mR(r.symbol)}}return"Normal"}function Xst(e){if(e)switch(e.type){case"CIMTextSymbol":return e.height;case"CIMPointSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const i=r.size??fR.CIMVectorMarker.size;i>t&&(t=i);break}}}return t}case"CIMLineSymbol":case"CIMPolygonSymbol":{let t=0;if(e.symbolLayers){for(const r of e.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const i=r.width;i!=null&&i>t&&(t=i);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&BQ(r.markerPlacement)){const i=r.size??fR.CIMVectorMarker.size;i>t&&(t=i)}break;case"CIMPictureFill":{const i=r.height;i!=null&&i>t&&(t=i)}}}return t}}}function qQ(e,t){if(t!==null){const r=t.get(e);return r?r.name:e}return e}function q_e(e){return e.map(t=>({...t,propertyName:G6(t.propertyName)}))}function kV(e){const t={};for(const r in e){const i=e[r];t[G6(r)]=i}return t}function NV(e,t,r,i,s){const n=r*Math.PI/180;if(n){const o=Math.cos(n);return(Math.sin(n)*e+o*t)*i+s}return t*i+s}function DV(e,t,r,i,s){const n=r*Math.PI/180;return n?(Math.cos(n)*e-Math.sin(n)*t)*i+s:e*i+s}function FV(e,t,r){return t?r-e:r+e}function Qst(e){return e?{originPosition:e.originPosition==="upper-left"?"upperLeft":e.originPosition==="lower-left"?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance,1,1]:[1,1,1,1],translate:e.extent!=null?[e.extent.xmin,e.extent.ymax,e.extent.zmin??0,e.extent.mmin??0]:[0,0,0,0]}:null}function H_e(e){return e.originPosition==="lowerLeft"&&e.scale.length===4&&e.translate.length===4}function eS(e){if(H_e(e))return e;const{originPosition:t,scale:r,translate:i}=e,s=r[0]??1,n=r[1]??1;return{originPosition:"lowerLeft",scale:[s,t==="lowerLeft"?n:-n,r[2]??1,r[3]??1],translate:[i[0]??0,i[1]??0,i[2]??0,i[3]??0]}}function W_e({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function J_e({scale:e,translate:t},r){return Math.round((r-t[1])/e[1])}function Z_e({scale:e,translate:t},r){return Math.round(((r??0)-t[2])/e[2])}function Y_e({scale:e,translate:t},r){return r?Math.round((r-t[3])/e[3]):0}function tS({scale:e,translate:t},r){return r*e[0]+t[0]}function rS({scale:e,translate:t},r){return r*e[1]+t[1]}function W_({scale:e,translate:t},r){return(r??0)*e[2]+t[2]}function J_({scale:e,translate:t},r){return r?r*e[3]+t[3]:0}function B6(e,t){return e&&t?e2e:e&&!t?X_e:!e&&t?Q_e:K_e}const K_e=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=tS(e,i[0]),n=rS(e,i[1]);r[0]=[s,n];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let c=1;c<t.length;c++){const[p,f]=t[c];s+=l*p,n+=u*f,r[c]=[s,n]}return r},X_e=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=tS(e,i[0]),n=rS(e,i[1]);r[0]=[s,n,W_(e,i[2])];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let c=1;c<t.length;c++){const[p,f,m]=t[c];s+=l*p,n+=u*f,r[c]=[s,n,W_(e,m)]}return r},Q_e=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=tS(e,i[0]),n=rS(e,i[1]);r[0]=[s,n,J_(e,i[2])];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let c=1;c<t.length;c++){const[p,f,m]=t[c];s+=l*p,n+=u*f,r[c]=[s,n,J_(e,m)]}return r},e2e=(e,t)=>{const r=new Array(t.length);if(!t.length)return r;const i=t[0];let s=tS(e,i[0]),n=rS(e,i[1]);r[0]=[s,n,W_(e,i[2]),J_(e,i[3])];const{scale:o,originPosition:a}=e,l=o[0],u=a==="lowerLeft"?o[1]:-o[1];for(let c=1;c<t.length;c++){const[p,f,m,g]=t[c];s+=l*p,n+=u*f,r[c]=[s,n,W_(e,m),J_(e,g)]}return r};function HQ(e,t,r){const i=new Array(r.length);for(let s=0;s<r.length;s++)i[s]=t(e,r[s]);return i}function ent(e,t,r){const i=eS(e);return t.x=W_e(i,r.x),t.y=J_e(i,r.y),r.z!=null&&(t.z=Z_e(i,r.z)),r.m!=null&&(t.m=Y_e(i,r.m)),t}function t2e(e,t,r,i=r?.hasZ??!1,s=r?.hasM??!1){if(r!=null){const n=eS(e);t.points=B6(i,s)(n,r.points),t.hasZ=i,t.hasM=s}return t}function r2e(e,t,r,i=r?.z!=null,s=r?.m!=null){if(r==null)return t;const n=eS(e);return t.x=tS(n,r.x),t.y=rS(n,r.y),i&&(t.z=W_(n,r.z)),s&&(t.m=J_(n,r.m)),t}function i2e(e,t,r,i=r?.hasZ??!1,s=r?.hasM??!1){if(r!=null){const n=eS(e);t.rings=HQ(n,B6(i,s),r.rings),t.hasZ=i,t.hasM=s}return t}function s2e(e,t,r,i=r?.hasZ??!1,s=r?.hasM??!1){if(r!=null){const n=eS(e);t.paths=HQ(n,B6(i,s),r.paths),t.hasZ=i,t.hasM=s}return t}function n2e(e,t,r,i,s){if(e==null)return null;const n=e.referencesGeometry()&&s?o2e(t,i,s):t,o=e.repurposeFeature(n);try{return e.evaluate({...r,$feature:o},e.services)}catch(a){return be.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",a),null}}const z4=new Map;function o2e(e,t,r){const{transform:i,hasZ:s,hasM:n}=r;z4.has(t)||z4.set(t,a2e(t));const o=z4.get(t)(e.geometry,i,s,n);return{...e,geometry:o}}function a2e(e){const t={};switch(e){case"esriGeometryPoint":return(r,i,s,n)=>r2e(i,t,r,s,n);case"esriGeometryPolygon":return(r,i,s,n)=>i2e(i,t,r,s,n);case"esriGeometryPolyline":return(r,i,s,n)=>s2e(i,t,r,s,n);case"esriGeometryMultipoint":return(r,i,s,n)=>t2e(i,t,r,s,n);default:return be.getLogger("esri.views.2d.support.arcadeOnDemand").error(new K("mapview-arcade",`Unable to handle geometryType: ${e}`)),r=>r}}const l2e=e=>{if(!e)return[0,0,0,0];const{r:t,g:r,b:i,a:s}=e;return[t,r,i,255*s]};let WQ=class Br{static findApplicableOverrides(t,r,i){if(t&&r){if(t.primitiveName){let s=!1;for(const n of i)if(n.primitiveName===t.primitiveName){s=!0;break}if(!s)for(const n of r)n.primitiveName===t.primitiveName&&i.push(n)}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const s of t.effects)Br.findApplicableOverrides(s,r,i);if(t.symbolLayers)for(const s of t.symbolLayers)Br.findApplicableOverrides(s,r,i);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMSolidFill":case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMVectorMarker":case"CIMCharacterMarker":case"CIMPictureMarker":if(t.effects)for(const s of t.effects)Br.findApplicableOverrides(s,r,i);if(t.markerPlacement&&Br.findApplicableOverrides(t.markerPlacement,r,i),t.type==="CIMVectorMarker"){if(t.markerGraphics)for(const s of t.markerGraphics)Br.findApplicableOverrides(s,r,i),Br.findApplicableOverrides(s.symbol,r,i)}else t.type==="CIMCharacterMarker"?Br.findApplicableOverrides(t.symbol,r,i):t.type==="CIMHatchFill"?Br.findApplicableOverrides(t.lineSymbol,r,i):t.type==="CIMPictureMarker"&&Br.findApplicableOverrides(t.animatedSymbolProperties,r,i)}}}static findEffectOverrides(t,r){if(!t)return null;if(t.type==="CIMGeometricEffectDashes"&&B_e(t),!r||!t.primitiveName)return{type:"cim-effect-param",effect:t,overrides:[]};const i=kV(t),s=t.primitiveName,n=[];for(const o of r)o.primitiveName===s&&n.push(kV(o));return{type:"cim-effect-param",effect:i,overrides:q_e(n)}}static async resolveSymbolOverrides(t,r,i,s,n,o,a){if(!t?.symbol)return null;let{symbol:l,primitiveOverrides:u}=t;const c=!!u;if(!c&&!s)return l;l=Z(l),u=Z(u);let p=!0;if(r||(r={attributes:{}},p=!1),c){if(p||(u=u.filter(f=>!f.valueExpressionInfo?.expression.includes("$feature"))),a||(u=u.filter(f=>!f.valueExpressionInfo?.expression.includes("$view"))),u.length>0){const f={spatialReference:i,fields:z_e(r.attributes),geometryType:n};await Br.createRenderExpressions(u,f),Br.evaluateOverrides(u,r,n??"esriGeometryPoint",o,a)}Br.applyOverrides(l,u)}return s&&Br.applyDictionaryTextOverrides(l,r,s,null),l}static async createRenderExpressions(t,r){const i=[];for(const s of t){const n=s.valueExpressionInfo;if(!n||Br._expressionToRenderExpression.has(n.expression))continue;const o=Vve(n.expression,r.spatialReference,r.fields);i.push(o),o.then(a=>Br._expressionToRenderExpression.set(n.expression,a))}i.length>0&&await Promise.all(i)}static evaluateOverrides(t,r,i,s,n){const o={$view:{scale:n?.scale}};for(const a of t){a.value&&typeof a.value=="object"&&kQ(a.value)&&(a.propertyName==="Color"||a.propertyName==="StrokeColor")&&(a.value=l2e(a.value));const l=a.valueExpressionInfo;if(!l)continue;const u=Br._expressionToRenderExpression.get(l.expression);u&&(a.value=n2e(u,r,o,i,s))}}static applyDictionaryTextOverrides(t,r,i,s,n="Normal"){if(t?.type)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":case"CIMTextSymbol":{const o=t.symbolLayers;if(!o)return;for(const a of o)a&&a.type==="CIMVectorMarker"&&Br.applyDictionaryTextOverrides(a,r,i,s,t.type==="CIMTextSymbol"?t.textCase:n)}break;case"CIMVectorMarker":{const o=t.markerGraphics;if(!o)return;for(const a of o)a&&Br.applyDictionaryTextOverrides(a,r,i,s)}break;case"CIMMarkerGraphic":{const o=t.textString;if(o&&o.includes("[")){const a=N_e(o,i);t.textString=D_e(r,a,s,n)}}}}static applyOverrides(t,r,i,s){if(t.primitiveName){for(const n of r)if(n.primitiveName===t.primitiveName){const o=G6(n.propertyName);if(s&&s.push({cim:t,nocapPropertyName:o,value:t[o]}),i){let a=!1;for(const l of i)l.primitiveName===t.primitiveName&&(a=!0);a||i.push(n)}n.value!=null&&(t[o]=n.value)}}switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":if(t.effects)for(const n of t.effects)Br.applyOverrides(n,r,i,s);if(t.symbolLayers)for(const n of t.symbolLayers)Br.applyOverrides(n,r,i,s);break;case"CIMTextSymbol":break;case"CIMSolidStroke":case"CIMSolidFill":case"CIMVectorMarker":if(t.effects)for(const n of t.effects)Br.applyOverrides(n,r,i,s);if(t.type==="CIMVectorMarker"&&t.markerGraphics)for(const n of t.markerGraphics)Br.applyOverrides(n,r,i,s),Br.applyOverrides(n.symbol,r,i,s)}}static restoreOverrides(t){for(const r of t)r.cim[r.nocapPropertyName]=r.value}static buildOverrideKey(t){let r="";for(const i of t)i.value!==void 0&&(r+=`${i.primitiveName}${i.propertyName}${JSON.stringify(i.value)}`);return r}static toValue(t,r){if(t==="DashTemplate")return r.split(" ").map(i=>Number(i));if(t==="Color"){const i=new Le(r).toRgba();return i[3]*=255,i}return r}};WQ._expressionToRenderExpression=new Map;const jV="esri.renderers.support.DictionaryLoader",u2e={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let JQ=class{constructor(t,r,i){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new U6(100),this._dictionaryVersion=null,this._fieldIndex=null,this._dictionaryPromise=null,this.url=t,this.config=r,this.fieldMap=i}getSymbolFields(){return this._symbolFields}async getSymbolAsync(t,r){let i;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(r));try{i=await this._dictionaryPromise}catch(p){if(ws(p))return this._dictionaryPromise=null,null}const s=this._dictionaryVersion?.since(4,0),n={};if(this.fieldMap)for(const p of this._symbolFields){const f=qQ(this.fieldMap[p],this._fieldIndex);if(f){const m=t.attributes[f];n[p]=s?m:m!=null?""+t.attributes[f]:""}else n[p]=""}let o=null;try{o=i?.(n,r)}catch{return null}if(!o||typeof o!="string"||o==="invalid")return null;const a=o.split(";"),l=[],u=[];for(const p of a)if(p)if(p.includes("po:")){const f=p.substr(3).split("|");if(f.length===3){const m=f[0],g=f[1];let b=f[2];if(g==="DashTemplate")b=b.split(" ").map(w=>Number(w));else if(g==="Color"){const w=new Le(b).toRgba();b=[w[0],w[1],w[2],255*w[3]]}else b=Number(b);u.push({primitiveName:m,propertyName:g,value:b,defaultValue:null})}}else if(p.includes("|")){for(const f of p.split("|"))if(this._itemNames.has(f)){l.push(f);break}}else this._itemNames.has(p)&&l.push(p);const c=t.geometry==null||!t.geometry.hasZ&&t.geometry.type==="point";return this._cimPartsToCIMSymbol(t,l,u,c,r)}async fetchResources(t){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void be.getLogger(jV).error("no valid URL!");const r=Re(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:t!=null?t.signal:null}),[{data:i}]=await Promise.all([r,Iy()]);if(!i)throw this._dictionaryPromise=null,new K("esri.renderers.DictionaryRenderer","Bad dictionary data!");const{authoringInfo:s,dictionary_version:n,expression:o,itemsNames:a}=i,l=o;let u=!1;n&&(this._dictionaryVersion=bQ.parse(n),u=this._dictionaryVersion.since(4,0)),this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(a),this._symbolFields=s.symbol;const c={};if(this.config){const m=this.config;for(const g in m)c[g]=m[g]}if(s.configuration)for(const m of s.configuration)c.hasOwnProperty(m.name)||(c[m.name]=m.value);const p=[];if(t?.fields&&this.fieldMap)for(const m in this.fieldMap){const g=this.fieldMap[m],b=t.fields.filter(w=>w.name.toLowerCase()===g?.toLowerCase());b.length>0&&p.push({...b[0],type:u?b[0].type:"esriFieldTypeString"})}p.length>0&&(this._fieldIndex=new LA(p));const f=Uve(l,t!=null?t.spatialReference:null,p,c).then(m=>{const g={scale:0};return(b,w)=>{if(m==null)return null;const S=m.repurposeFeature({geometry:null,attributes:b});return g.scale=w!=null?w.scale??void 0:void 0,m.evaluate({$feature:S,$view:g},m.services)}}).catch(m=>(be.getLogger(jV).error("Creating dictionary expression failed:",m),null));return this._dictionaryPromise=f,f}async _cimPartsToCIMSymbol(t,r,i,s,n){const o=new Array(r.length);for(let u=0;u<r.length;u++)o[u]=this._getSymbolPart(r[u],n);let a=await Promise.all(o);const l=this.fieldMap;if(l){a=Z(a);for(const u of a)WQ.applyDictionaryTextOverrides(u,t,l,this._fieldIndex,mR(u))}return new qd({data:c2e(a,i,s)})}async _getSymbolPart(t,r){const i=this._symbolCache.get(t);if(i)return i;if(this._ongoingRequests.has(t))return this._ongoingRequests.get(t).then(o=>o.data);const s=this._refSymbolUrlTemplate.replaceAll(/\{itemName\}/gi,t),n=Re(s,{responseType:"json",query:{f:"json"},...r});this._ongoingRequests.set(t,n),n.finally(()=>this._ongoingRequests.delete(t));try{const o=await n;return this._symbolCache.put(t,o.data),o.data}catch(o){throw o}}};function c2e(e,t,r){if(!e||e.length===0)return null;const i={...e[0]};if(e.length>1){i.symbolLayers=[];for(const s of e){const n=s;i.symbolLayers.unshift(...n.symbolLayers)}}return r&&(i.callout=u2e),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}var yR;let ul=yR=class extends Jd(Uh){constructor(e){super(e),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new JQ(this.url,this.config,this.fieldMap)}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i?.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new yR({config:Z(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:Z(this.fieldMap),url:Z(this.url),visualVariables:Z(this.visualVariables)})}async getSymbolAsync(e,t){return this._loader.getSymbolAsync(e,t)}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await yn(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};h([d({type:JQ})],ul.prototype,"_loader",null),h([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],ul.prototype,"config",void 0),h([d({type:Object,json:{write:!0}})],ul.prototype,"fieldMap",void 0),h([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],ul.prototype,"scaleExpression",void 0),h([ge("scaleExpression")],ul.prototype,"writeData",null),h([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],ul.prototype,"scaleExpressionTitle",void 0),h([d({type:String,json:{write:!0}})],ul.prototype,"url",void 0),h([ge("visualVariables")],ul.prototype,"writeVisualVariables",null),ul=yR=h([j("esri.renderers.DictionaryRenderer")],ul);const h2e=ul;var gR;let Nc=gR=class extends ue{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(be.getLogger(this).error(".field: field must be a string value"),null):V2(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new gR({color:this.color?.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};h([d({type:Le,json:{type:[Number],write:!0}})],Nc.prototype,"color",void 0),h([d({type:String,json:{write:!0}})],Nc.prototype,"field",void 0),h([Zt("field")],Nc.prototype,"castField",null),h([d({type:String,json:{write:!0}})],Nc.prototype,"label",void 0),h([d({type:String,json:{write:!0}})],Nc.prototype,"valueExpression",void 0),h([d({type:String,json:{write:!0}})],Nc.prototype,"valueExpressionTitle",void 0),Nc=gR=h([j("esri.renderers.support.AttributeColorInfo")],Nc);const ZQ=Nc;var vR;let ST=vR=class extends ue{constructor(){super(...arguments),this.unit=null}clone(){return new vR({unit:this.unit})}};h([d({type:String,json:{write:!0}})],ST.prototype,"unit",void 0),ST=vR=h([j("esri.renderers.support.DotDensityLegendOptions")],ST);const p2e=ST;var bR;let Qn=bR=class extends Jd(Uh){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Le([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new qn,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Hl({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes?.reduce((e,t)=>e+t.getAttributeHash(),"")??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new bR({attributes:Z(this.attributes),backgroundColor:Z(this.backgroundColor),dotBlendingEnabled:Z(this.dotBlendingEnabled),dotShape:Z(this.dotShape),dotSize:Z(this.dotSize),dotValue:Z(this.dotValue),legendOptions:Z(this.legendOptions),outline:Z(this.outline),referenceScale:Z(this.referenceScale),seed:Z(this.seed),visualVariables:Z(this.visualVariables),authoringInfo:Z(this.authoringInfo)})}getControllerHash(){return`${this.attributes?.map(t=>t.field||t.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes??[])r.valueExpression&&await yn(e,t,r.valueExpression),r.field&&e.add(r.field)}};h([d({type:[ZQ],json:{write:!0}})],Qn.prototype,"attributes",void 0),h([d({type:Le,json:{write:!0}})],Qn.prototype,"backgroundColor",void 0),h([d({type:Boolean,json:{write:!0}})],Qn.prototype,"dotBlendingEnabled",void 0),h([d({type:String,json:{write:!1}})],Qn.prototype,"dotShape",void 0),h([d({type:Number,json:{write:!0}})],Qn.prototype,"dotSize",void 0),h([d({type:p2e,json:{write:!0}})],Qn.prototype,"legendOptions",void 0),h([d({type:qn,json:{default:null,write:!0}})],Qn.prototype,"outline",void 0),h([d({type:Number,json:{write:!0}})],Qn.prototype,"dotValue",void 0),h([d({type:Number,json:{write:!0}})],Qn.prototype,"referenceScale",void 0),h([d({type:Number,json:{write:!0}})],Qn.prototype,"seed",void 0),h([We({dotDensity:"dot-density"})],Qn.prototype,"type",void 0),Qn=bR=h([j("esri.renderers.DotDensityRenderer")],Qn);const d2e=Qn;var wR;let Qb=wR=class extends ue{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new wR({color:this.color&&this.color.clone(),ratio:this.ratio})}};h([d({type:Le,json:{type:[St],default:null,write:!0}})],Qb.prototype,"color",void 0),h([d({type:Number,json:{write:!0}})],Qb.prototype,"ratio",void 0),Qb=wR=h([j("esri.renderers.support.HeatmapColorStop")],Qb);const xT=Qb;let Fg=class extends Yt(ue){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};h([d({type:String,json:{write:!0}})],Fg.prototype,"minLabel",void 0),h([d({type:String,json:{write:!0}})],Fg.prototype,"maxLabel",void 0),h([d({type:String,json:{write:!0}})],Fg.prototype,"title",void 0),Fg=h([j("esri.renderers.support.HeatmapLegendOptions")],Fg);const q6=2.4;function f2e(e){return za(e*q6)}function m2e(e){return W1e(e)/q6}function y2e(e,t,r,i){let{color:s,ratio:n}=t,{color:o,ratio:a}=r;a===n&&(a===1?n-=1e-6:a+=1e-6);const l=Gl((i-n)/(a-n),0,1);AQ(e,s.toArray(),o.toArray(),l)}function int(e){const r=new Uint8ClampedArray(2048);if(e=e.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),e.length<1)return r;let i=e[0],s=e[0],n=1;const o=kA();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>s.ratio&&n<e.length;)i=s,s=e[n++];y2e(o,i,s,l),r.set(o,4*a)}return r}function snt(e,t,r){const i=Math.sqrt(e**2+t**2)/r;return i>1?0:3/(Math.PI*r**2)*(1-i**2)**2}function nnt(e){return typeof e=="function"?e:e?t=>+t[e]:()=>1}var _R;function VV(e){if(e!=null){const{maxDensity:t,minDensity:r,radius:i}=e;if(t!=null||r!=null||i!=null){const{blurRadius:s,maxPixelIntensity:n,minPixelIntensity:o,...a}=e;return a}}return e}let us=_R=class extends Uh{constructor(e){super(e),this.authoringInfo=null,this.colorStops=[new xT({ratio:0,color:new Le("rgba(255, 140, 0, 0)")}),new xT({ratio:.75,color:new Le("rgba(255, 140, 0, 1)")}),new xT({ratio:.9,color:new Le("rgba(255, 0,   0, 1)")})],this.field=null,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(e){return VV(e)}get blurRadius(){return m2e(this.radius)}set blurRadius(e){const t=this.maxPixelIntensity,r=this.minPixelIntensity;this._set("radius",f2e(e)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",t*this._pixelIntensityToDensity),this._set("minDensity",r*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(e){this._set("maxDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(e){this._set("minDensity",e*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(q6**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(e,t){this._warnedProps[e]||es(this).getDefaultOrigin()==="user"&&(this._warnedProps[e]=!0,l1(()=>{Al(be.getLogger(this),e,{replacement:`${String(t)} (suggested value: ${this._get(t)})`,version:"4.24"})}))}read(e,t){e=VV(e),super.read(e,t)}getSymbol(){return new Mo}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(e,t){const r=this.field,i=this.valueExpression;r&&typeof r=="string"&&Gn(e,t,r),i&&typeof i=="string"&&await yn(e,t,i)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new _R({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:Z(this.colorStops),field:this.field,legendOptions:Z(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};h([d({type:X2,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],us.prototype,"authoringInfo",void 0),h([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],us.prototype,"blurRadius",null),h([d({type:[xT],json:{write:!0}})],us.prototype,"colorStops",void 0),h([d({type:String,json:{write:!0}})],us.prototype,"field",void 0),h([d({type:Fg,json:{write:!0}})],us.prototype,"legendOptions",void 0),h([d({type:Number,json:{write:!0}})],us.prototype,"maxDensity",void 0),h([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],us.prototype,"maxPixelIntensity",null),h([d({type:Number,json:{write:!0}})],us.prototype,"minDensity",void 0),h([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],us.prototype,"minPixelIntensity",null),h([d({type:Number,cast:Ut,json:{write:!0}})],us.prototype,"radius",void 0),h([d({type:Number,range:{min:0},json:{default:0,write:!0}})],us.prototype,"referenceScale",void 0),h([We({heatmap:"heatmap"})],us.prototype,"type",void 0),h([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],us.prototype,"valueExpression",void 0),h([d({type:String})],us.prototype,"valueExpressionTitle",void 0),h([d({readOnly:!0})],us.prototype,"_pixelIntensityToDensity",null),us=_R=h([j("esri.renderers.HeatmapRenderer")],us);const YQ=us;let Pm=class extends Yt(ue){constructor(){super(...arguments),this.color=new Le([0,0,0,0]),this.label=null,this.threshold=0}};h([d({type:Le,json:{write:!0}})],Pm.prototype,"color",void 0),h([d({type:String,json:{write:!0}})],Pm.prototype,"label",void 0),h([d({type:Number,range:{min:0,max:1},json:{write:!0}})],Pm.prototype,"threshold",void 0),Pm=h([j("esri.renderers.support.OthersCategory")],Pm);let MT=class extends Yt(ue){constructor(){super(...arguments),this.title=null}};h([d({type:String,json:{write:!0}})],MT.prototype,"title",void 0),MT=h([j("esri.renderers.support.PieChartLegendOptions")],MT);let Po=class extends Jd(Yt(Uh)){constructor(t){super(t),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Le([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new Pm,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){return new Mo({size:this.size?this.size/2+(this.outline?.width||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(ra)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,r)=>t+r.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,r)=>t+JSON.stringify(r),"")}async collectRequiredFields(t,r){await this.collectVVRequiredFields(t,r);for(const i of this.attributes)i.valueExpression&&await yn(t,r,i.valueExpression),i.field&&t.add(i.field)}};h([d({type:[ZQ],json:{write:!0}})],Po.prototype,"attributes",void 0),h([d({type:Hl,json:{default:null,write:!0}})],Po.prototype,"backgroundFillSymbol",void 0),h([d({type:Le,json:{write:!0}})],Po.prototype,"defaultColor",void 0),h([d({type:String,json:{write:!0}})],Po.prototype,"defaultLabel",void 0),h([d({type:Number,range:{min:0,max:1},json:{write:!0}})],Po.prototype,"holePercentage",void 0),h([d({type:Pm,json:{write:!0}})],Po.prototype,"othersCategory",void 0),h([d({type:MT,json:{write:!0}})],Po.prototype,"legendOptions",void 0),h([d({type:qn,json:{default:null,write:!0}})],Po.prototype,"outline",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],Po.prototype,"size",void 0),h([We({pieChart:"pie-chart"})],Po.prototype,"type",void 0),Po=h([j("esri.renderers.PieChartRenderer")],Po);const g2e=Po;var SR;let sm=SR=class extends Jd(Uh){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new SR({description:this.description,label:this.label,symbol:Z(this.symbol),visualVariables:Z(this.visualVariables),authoringInfo:Z(this.authoringInfo)})}};h([d({type:String,json:{write:!0}})],sm.prototype,"description",void 0),h([d({type:String,json:{write:!0}})],sm.prototype,"label",void 0),h([d(V6)],sm.prototype,"symbol",void 0),h([We({simple:"simple"})],sm.prototype,"type",void 0),sm=SR=h([j("esri.renderers.SimpleRenderer")],sm);const Zy=sm,v2e=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function xR(e){return e instanceof et}function UV(e){return e instanceof qe?Object.keys(e.items):xR(e)?es(e).keys():e?Object.keys(e):[]}function mx(e,t){return e instanceof qe?e.items[t]:e[t]}function b2e(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function Ww(e){return e?e.declaredClass:null}function KQ(e,t){const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=UV(e),s=UV(t);if(i.length===0&&s.length===0)return;if(!i.length||!s.length||b2e(e,t))return{type:"complete",oldValue:e,newValue:t};const n=s.filter(p=>!i.includes(p)),o=i.filter(p=>!s.includes(p)),a=i.filter(p=>s.includes(p)&&mx(e,p)!==mx(t,p)).concat(n,o).sort(),l=Ww(e);if(l&&v2e.has(l)&&a.length)return{type:"complete",oldValue:e,newValue:t};let u;const c=xR(e)&&xR(t);for(const p of a){const f=mx(e,p),m=mx(t,p);let g;if((c||typeof f!="function"&&typeof m!="function")&&f!==m&&(f!=null||m!=null)){if(r&&r[p]&&typeof r[p]=="function")g=r[p]?.(f,m);else if(f instanceof Date&&m instanceof Date){if(f.getTime()===m.getTime())continue;g={type:"complete",oldValue:f,newValue:m}}else g=typeof f=="object"&&typeof m=="object"&&Ww(f)===Ww(m)?KQ(f,m):{type:"complete",oldValue:f,newValue:m};g!=null&&(u!=null?u.diff[p]=g:u={type:"partial",diff:{[p]:g}})}}return u}function unt(e,t){return w2e(e,t)}function w2e(e,t){if(e==null)return!1;const r=t.split(".");let i=e;for(const s of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const n=i.diff[s];if(!n)return!1;i=n}}return!0}function cnt(e,t){if(!e)return!1;if(e.type==="partial"){const r=Object.keys(e.diff);return r.length===1&&r[0]===t}return!1}function _2e(e,t){if(typeof e!="function"&&typeof t!="function"&&(e!=null||t!=null))return e==null||t==null||typeof e=="object"&&typeof t=="object"&&Ww(e)!==Ww(t)?{type:"complete",oldValue:e,newValue:t}:KQ(e,t)}let jg=class extends Yt(ue){constructor(t){super(t),this.value=null,this.value2=null,this.value3=null}};h([d(vT)],jg.prototype,"value",void 0),h([d(vT)],jg.prototype,"value2",void 0),h([d(vT)],jg.prototype,"value3",void 0),jg=h([j("esri.renderers.support.UniqueValue")],jg);const Q0=jg;let Tp=class extends Yt(ue){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(t){if(t==null)return null;const r=typeof(t=Array.isArray(t)?t:[t])[0];return r==="string"||r==="number"?t.map(i=>new Q0({value:i})):r==="object"?t[0]instanceof Q0?t:t.map(i=>new Q0(i)):null}};h([d({type:String,json:{write:!0}})],Tp.prototype,"description",void 0),h([d({type:String,json:{write:!0}})],Tp.prototype,"label",void 0),h([d(PA)],Tp.prototype,"symbol",void 0),h([d({type:[Q0],json:{type:[[String]],read:{reader:e=>e?e.map(t=>new Q0({value:t[0],value2:t[1],value3:t[2]})):null},write:{writer:(e,t)=>{const r=[];for(const i of e){const s=[i.value,i.value2,i.value3].filter(ra).map(n=>n.toString());r.push(s)}t.values=r}}}})],Tp.prototype,"values",void 0),h([Zt("values")],Tp.prototype,"castValues",null),Tp=h([j("esri.renderers.support.UniqueValueClass")],Tp);const XQ=Tp;let ew=class extends Yt(ue){constructor(t){super(t),this.heading=null,this.classes=null}};h([d({type:String,json:{write:!0}})],ew.prototype,"heading",void 0),h([d({type:[XQ],json:{write:!0}})],ew.prototype,"classes",void 0),ew=h([j("esri.renderers.support.UniqueValueGroup")],ew);const MR=ew;var TR;let nm=TR=class extends ue{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new TR({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol?.toJSON());return`${this.value}.${e}`}};h([d({type:String,json:{write:!0}})],nm.prototype,"description",void 0),h([d({type:String,json:{write:!0}})],nm.prototype,"label",void 0),h([d(V6)],nm.prototype,"symbol",void 0),h([d(vT)],nm.prototype,"value",void 0),nm=TR=h([j("esri.renderers.support.UniqueValueInfo")],nm);const Qm=nm,S2e=()=>!!ce("enable-feature:force-wosr"),x2e=()=>ce.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),M2e=()=>ce.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0),T2e=()=>ce.add("enable-i3s-patching",!0,!0,!0),I2e=()=>ce.add("enable-i3s-patching",!1,!0,!0),fnt=()=>!!ce("enable-feature:SceneLayer-editing"),E2e=(e="i3s-patching")=>{switch(I2e(),M2e(),ce.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":x2e();break;case"i3s-patching":T2e()}};E2e("i3s-patching");let G4={};async function A2e(e,t){try{return{data:(await P2e(e,t)).data,baseUrl:Ide(e),styleUrl:e}}catch(r){return lo(r),null}}function $2e(e,t,r){const i=t.portal!=null?t.portal:xo.getDefault();let s;const n=`${i.url} - ${i.user?.username} - ${e}`;return G4[n]||(G4[n]=C2e(e,i,r).then(o=>(s=o,o.fetchData())).then(o=>({data:o,baseUrl:s.itemUrl??"",styleName:e}))),G4[n]}function C2e(e,t,r){return t.load(r).then(()=>{const i=new Pu({disableExtraQuery:!0,query:`owner:${zV} AND type:${GV} AND typekeywords:"${e}"`});return t.queryItems(i,r)}).then(({results:i})=>{let s=null;const n=e.toLowerCase();if(i&&Array.isArray(i)){for(const o of i)if(o.typeKeywords?.some(l=>l.toLowerCase()===n)&&o.type===GV&&o.owner===zV){s=o;break}}if(!s)throw new K("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(r)})}function O2e(e,t,r){return e?.styleUrl!=null?A2e(e.styleUrl,r):e?.styleName!=null?$2e(e.styleName,t,r):Promise.reject(new K("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function mnt(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function ynt(e,t,r=["gltf"]){if(t==="cimRef")return encodeURI(e.cimRef);if(e.formatInfos&&!S2e())for(const i of r){const s=e.formatInfos.find(n=>n.type===i);if(s)return s.href}return encodeURI(e.webRef)}function P2e(e,t){const r={responseType:"json",query:{f:"json"},...t};return Re(La(e),r)}const zV="esri_en",GV="Style",gnt="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var tw;const QQ="esri.renderers.UniqueValueRenderer",rp=()=>be.getLogger(QQ),BV="uvInfos-watcher",qV="uvGroups-watcher",R2e=",",L2e=ni(Qm);function k2e(e){const{field1:t,field2:r,field3:i,fieldDelimiter:s,uniqueValueInfos:n,valueExpression:o}=e,a=!(!t||!r);return[{classes:(n??[]).map(l=>{const{symbol:u,label:c,value:p,description:f}=l,[m,g,b]=a?p?.toString()?.split(s||"")||[]:[p],w=[];return(t||o)&&w.push(m),r&&w.push(g),i&&w.push(b),{symbol:u,label:c,values:[w],description:f}})}]}let Nr=tw=class extends Jd(Uh){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const s={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let n=0;n<r.length;n++){const o=t.find(a=>a.value===r[n].value);o?_2e(o,r[n])?(s.changed.push({type:"complete",oldValue:o,newValue:r[n]}),i=!0):s.unchanged.push({oldValue:o,newValue:r[n]}):(s.added.push(r[n]),i=!0)}for(let n=0;n<t.length;n++)r.find(o=>o.value===t[n].value)||(s.removed.push(t[n]),i=!0);return i?s:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(e){return e==null||typeof e=="function"?e:V2(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i?.messages?i.messages.push(new K("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):rp().error(".field: cannot write field to JSON since it's not a string value")}set field2(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(e){this._set("field3",e),this._updateUniqueValues()}set valueExpression(e){this._set("valueExpression",e),this._updateUniqueValues()}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}set fieldDelimiter(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}readPortal(e,t,r){return r.portal||xo.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=h1(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=B2(e.styleUrl,i))}set uniqueValueGroups(e){this.styleOrigin?rp().error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(e){this.styleOrigin?rp().error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void rp().error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?L2e(e):new Qm({value:e,symbol:sQ(t)}),this.uniqueValueInfos?.push(r),this._valueInfoMap[r.value]=r,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(e){if(this.styleOrigin)return void rp().error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const t=this.uniqueValueInfos;if(t)for(let r=0;r<t.length;r++){const i=t[r];if(String(i.value)===String(e)){delete this._valueInfoMap[e],t.splice(r,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&t?.arcade==null&&(r={...r,arcade:await Iy()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){return this.valueExpression&&t?.arcade==null?void rp().error("#getSymbol()","Please use getSymbolAsync if valueExpression is used"):this._getUniqueValueInfo(e,t)?.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&r?.arcade==null){const s=await Iy(),{arcadeUtils:n}=s;n.hasGeometryOperations(this.valueExpression)&&await n.enableGeometryOperations(),r={...r,arcade:s}}return this._getUniqueValueInfo(e,r)?.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos??[])t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=this.uniqueValueInfos?.reduce((i,s)=>i+s.getMeshHash(),"");return`${e}.${t}.${r}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new tw({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:Z(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:Z(this.visualVariables),legendOptions:Z(this.legendOptions),authoringInfo:Z(this.authoringInfo),backgroundFillSymbol:Z(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=Z(this.uniqueValueInfos),r=Z(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(Z(this.styleOrigin))),Object.freeze(t),Object.freeze(r)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",r),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),yn(e,t,this.valueExpression)];Gn(e,t,this.field),Gn(e,t,this.field2),Gn(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return O2e(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e?.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const i=new Wy({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const s=new Qm({value:r.name,symbol:i});t.push(s),this._valueInfoMap[r.name]=s}),this._set("uniqueValueInfos",Object.freeze(t)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&this.uniqueValueInfos?.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",R2e)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:e}=this;if(e)for(const t of e)this._valueInfoMap[t.value+""]=t}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(BV);const{uniqueValueInfos:e}=this;if(e){const t=[];for(const r of e)t.push(ht(()=>({symbol:r.symbol,value:r.value,label:r.label,description:r.description}),(i,s)=>{i!==s&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(t,BV)}}_watchUniqueValueGroups(){this.removeHandles(qV);const{uniqueValueGroups:e}=this;if(e){const t=[];for(const r of e){t.push(ht(()=>({classes:r.classes}),(i,s)=>{i!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const i of r.classes??[])t.push(ht(()=>({symbol:i.symbol,values:i.values,label:i.label,description:i.description}),(s,n)=>{s!==n&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(t,qV)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const e=[],{field:t,field2:r,field3:i,fieldDelimiter:s,uniqueValueGroups:n,valueExpression:o}=this;if(!t&&!o)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!t||!r);for(const l of n)for(const u of l.classes??[]){const{symbol:c,label:p,values:f,description:m}=u;for(const g of f??[]){const{value:b,value2:w,value3:S}=g,M=[b];r&&M.push(w),i&&M.push(S);const x=a?M.join(s||""):M[0]??void 0;e.push(new Qm({symbol:c,label:p,value:x,description:m}))}}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(e=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:t,field2:r,valueExpression:i,fieldDelimiter:s,uniqueValueInfos:n}=this;if(!t&&!i||!n.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!t||!r),a=n.map(u=>{const{symbol:c,label:p,value:f,description:m}=u,[g,b,w]=o?f?.toString()?.split(s||"")||[]:[f];return new XQ({symbol:c,label:p,description:m,values:[new Q0({value:g,value2:b,value3:w})]})}),l=[new MR({classes:a})];e&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:s,arcade:n,timeZone:o}=t??{};let a=this._cache.compiledFunc;const l=n.arcadeUtils;if(!a){const c=l.createSyntaxTree(this.valueExpression);a=l.createFunction(c),this._cache.compiledFunc=a}const u=l.executeFunction(a,l.createExecContext(e,l.getViewInfo({viewingMode:r,scale:i,spatialReference:s}),o));return this._valueInfoMap[u+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(this.field2){const s=this.field2,n=this.field3,o=[];t&&o.push(r[t]),s&&o.push(r[s]),n&&o.push(r[n]),i=o.join(this.fieldDelimiter||"")}else t&&(i=r[t]);return this._valueInfoMap[i+""]}static fromPortalStyle(e,t){const r=new tw(t?.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t?.portal||xo.getDefault());const i=r.populateFromStyle();return i.catch(s=>{rp().error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",s)}),i}static fromStyleUrl(e,t){const r=new tw(t?.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch(s=>{rp().error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",s)}),i}};h([d({readOnly:!0})],Nr.prototype,"_cache",null),h([We({uniqueValue:"unique-value"})],Nr.prototype,"type",void 0),h([d(gQ)],Nr.prototype,"backgroundFillSymbol",void 0),h([d({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Nr.prototype,"field",null),h([Zt("field")],Nr.prototype,"castField",null),h([ge("field")],Nr.prototype,"writeField",null),h([d({type:String,value:null,json:{write:!0}})],Nr.prototype,"field2",null),h([d({type:String,value:null,json:{write:!0}})],Nr.prototype,"field3",null),h([d({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Nr.prototype,"orderByClassesEnabled",void 0),h([d({type:String,value:null,json:{write:!0}})],Nr.prototype,"valueExpression",null),h([d({type:String,json:{write:!0}})],Nr.prototype,"valueExpressionTitle",void 0),h([d({type:Xm,json:{write:!0}})],Nr.prototype,"legendOptions",void 0),h([d({type:String,json:{write:!0}})],Nr.prototype,"defaultLabel",void 0),h([d(pD({...PA},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Nr.prototype,"defaultSymbol",null),h([d({type:String,value:null,json:{write:!0}})],Nr.prototype,"fieldDelimiter",null),h([d({type:xo,readOnly:!0})],Nr.prototype,"portal",void 0),h([pe("portal",["styleName"])],Nr.prototype,"readPortal",null),h([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Nr.prototype,"styleOrigin",void 0),h([pe("styleOrigin",["styleName","styleUrl"])],Nr.prototype,"readStyleOrigin",null),h([ge("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Nr.prototype,"writeStyleOrigin",null),h([d({type:[MR],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(e,t,r)=>(t.uniqueValueGroups||k2e(t)).map(i=>MR.fromJSON(i,r))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Nr.prototype,"uniqueValueGroups",null),h([d({type:[Qm],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Nr.prototype,"uniqueValueInfos",null),Nr=tw=h([j(QQ)],Nr);const M1=Nr,iS={key:"type",base:Uh,typeMap:{heatmap:YQ,simple:Zy,"unique-value":M1,"class-breaks":S1,"dot-density":d2e,dictionary:h2e,"pie-chart":g2e},errorContext:"renderer"},eee={key:"type",base:Uh,typeMap:{simple:Zy,"unique-value":M1,"class-breaks":S1,heatmap:YQ},errorContext:"renderer",validate:N2e};function N2e(e){switch(e.type){case"simple":return D2e(e);case"unique-value":return F2e(e);case"class-breaks":return j2e(e);case"heatmap":return e}}function D2e(e){if(e.symbol)return e;be.getLogger("esri.renderers.support.types").error("Removed invalid 'simple' renderer without a symbol from web scene.")}function F2e(e){const t=e.uniqueValueInfos,r=t?.filter(({symbol:i,label:s},n)=>(i||be.getLogger("esri.renderers.support.types").error(`Removed invalid unique value info ([${n}] ${s}) without a symbol from web scene.`),!!i));return r?.length!==t?.length&&(e.uniqueValueInfos=r),e}function j2e(e){const t=e.classBreakInfos,r=t?.filter(({symbol:i,label:s},n)=>(i||be.getLogger("esri.renderers.support.types").error(`Removed invalid class break info ([${n}] ${s}) without a symbol from web scene.`),!!i));return r?.length!==t?.length&&(e.classBreakInfos=r),e}function Pv(e,t){return Z_(e,null,t)}const V2e=u1({types:iS});function Z_(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r?.messages&&r.messages.push(new sa("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):V2e(e,t,r):null}let U2e=class tee{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(BC),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const r=new tee,i=this._originStores[Ne.DEFAULTS];i&&i.forEach((s,n)=>{r.set(n,Z(s),Ne.DEFAULTS)});for(let s=Ne.SERVICE;s<BC;s++){const n=this._originStores[s];n&&n.forEach((o,a)=>{t&&t.has(a)||r.set(a,Z(o),s)})}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=Ne.USER){let s=this._originStores[i];if(s||(s=new Map,this._originStores[i]=s),s.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const n=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),n!==r}return!1}delete(t,r=Ne.USER){const i=this._originStores[r];if(!i)return;const s=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let n=r-1;n>=0;n--){const o=this._originStores[n];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,n);break}}}return s}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],s=i?.get(t),n=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,r),n!==s}originOf(t){return this._propertyOriginMap.get(t)||Ne.DEFAULTS}forEach(t){this._values.forEach(t)}};const ree=e=>{let t=class extends e{constructor(...r){super(...r);const i=es(this),s=i.store,n=new U2e;i.store=n,aZ(i,s,n)}read(r,i){uZ(this,r,i)}getAtOrigin(r,i){const s=B4(this),n=Fn(i);if(typeof r=="string")return s.get(r,n);const o={};return r.forEach(a=>{o[a]=s.get(a,n)}),o}originOf(r){return P_(this.originIdOf(r))}originIdOf(r){return B4(this).originOf(r)}revert(r,i){const s=B4(this),n=Fn(i),o=es(this);let a;a=typeof r=="string"?r==="*"?s.keys(n):[r]:r,a.forEach(l=>{o.invalidate(l),s.revert(l,n),o.commit(l)})}};return t=h([j("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function B4(e){return es(e).store}let HV=class extends ree(et){};HV=h([j("esri.core.ReadOnlyMultiOriginJSONSupport")],HV);const z2e=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){return q4(this).delete(r,Fn(i))}write(r,i){return pZ(this,r=r||{},i),r}setAtOrigin(r,i,s){es(this).setAtOrigin(r,i,Fn(s))}removeOrigin(r){const i=q4(this),s=Fn(r),n=i.keys(s);for(const o of n)i.originOf(o)===s&&i.set(o,i.get(o,s),Ne.USER)}updateOrigin(r,i){const s=q4(this),n=Fn(i),o=Ll(this,r);for(let a=n+1;a<BC;++a)s.delete(r,a);s.set(r,o,n)}toJSON(r){return this.write({},r)}};return t=h([j("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function q4(e){return es(e).store}const Zd=e=>{let t=class extends z2e(ree(e)){constructor(...r){super(...r)}};return t=h([j("esri.core.MultiOriginJSONSupport")],t),t};let IR=class extends Zd(et){};IR=h([j("esri.core.MultiOriginJSONSupport")],IR);const gs=(e=>e)(["operational-layers","basemap","ground"]);var ER;let om=ER=class extends ue{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new ER({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};h([d({type:String,json:{write:!0}})],om.prototype,"expression",void 0),h([d({type:String,json:{write:!0}})],om.prototype,"name",void 0),h([d({type:["boolean","date","number","string"],json:{write:!0}})],om.prototype,"returnType",void 0),h([d({type:String,json:{write:!0}})],om.prototype,"title",void 0),om=ER=h([j("esri.form.ExpressionInfo")],om);const G2e=om;let am=class extends ue{constructor(t){super(t),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};h([d({type:String,json:{write:!0}})],am.prototype,"description",void 0),h([d({type:String,json:{write:!0}})],am.prototype,"label",void 0),h([d()],am.prototype,"type",void 0),h([d({type:String,json:{write:!0}})],am.prototype,"visibilityExpression",void 0),am=h([j("esri.form.elements.Element")],am);const $y=am;var AR;let TT=AR=class extends ue{constructor(e){super(e),this.type=null}clone(){return new AR({type:this.type})}};h([d({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],TT.prototype,"type",void 0),TT=AR=h([j("esri.form.elements.inputs.AttachmentInput")],TT);const B2e=TT;var $R;let lm=$R=class extends $y{constructor(e){super(e),this.attachmentKeyword=null,this.editableExpression=null,this.input=null,this.type="attachment"}clone(){return new $R({attachmentKeyword:this.attachmentKeyword,description:this.description,editableExpression:this.editableExpression,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};h([d({type:String,json:{write:!0}})],lm.prototype,"attachmentKeyword",void 0),h([d({type:String,json:{write:!0}})],lm.prototype,"editableExpression",void 0),h([d({type:B2e,json:{read:{source:"inputType"},write:{target:"inputType"}}})],lm.prototype,"input",void 0),h([d({type:["attachment"],json:{read:!1,write:!0}})],lm.prototype,"type",void 0),lm=$R=h([j("esri.form.elements.AttachmentElement")],lm);const WV=lm;let IT=class extends ue{constructor(t){super(t),this.type=null}};h([d()],IT.prototype,"type",void 0),IT=h([j("esri.form.elements.inputs.Input")],IT);const zh=IT;let rw=class extends zh{constructor(t){super(t),this.maxLength=null,this.minLength=0}};h([d({type:Number,json:{write:!0}})],rw.prototype,"maxLength",void 0),h([d({type:Number,json:{write:!0}})],rw.prototype,"minLength",void 0),rw=h([j("esri.form.elements.inputs.TextInput")],rw);const H6=rw;var CR;let ET=CR=class extends H6{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new CR({maxLength:this.maxLength,minLength:this.minLength})}};h([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],ET.prototype,"type",void 0),ET=CR=h([j("esri.form.elements.inputs.BarcodeScannerInput")],ET);const q2e=ET;var OR;let Vg=OR=class extends zh{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new OR({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};h([d({type:String,json:{write:!0}})],Vg.prototype,"noValueOptionLabel",void 0),h([d({type:Boolean,json:{write:!0}})],Vg.prototype,"showNoValueOption",void 0),h([d({type:["combo-box"],json:{read:!1,write:!0}})],Vg.prototype,"type",void 0),Vg=OR=h([j("esri.form.elements.inputs.ComboBoxInput")],Vg);const H2e=Vg;var PR;function JV(e){return e??null}function ZV(e){return e??null}let hu=PR=class extends zh{constructor(e){super(e),this.max=null,this.min=null,this.type="date-picker"}readMax(e,t){return JV(t.max)}writeMax(e,t){t.max=ZV(e)}readMin(e,t){return JV(t.min)}writeMin(e,t){t.min=ZV(e)}clone(){return new PR({max:this.max,min:this.min})}};h([d({type:String,json:{type:String,write:!0}})],hu.prototype,"max",void 0),h([pe("max")],hu.prototype,"readMax",null),h([ge("max")],hu.prototype,"writeMax",null),h([d({type:String,json:{type:String,write:!0}})],hu.prototype,"min",void 0),h([pe("min")],hu.prototype,"readMin",null),h([ge("min")],hu.prototype,"writeMin",null),h([d({type:["date-picker"],json:{read:!1,write:!0}})],hu.prototype,"type",void 0),hu=PR=h([j("esri.form.elements.inputs.DatePickerInput")],hu);const W2e=hu;var RR;function H4(e){return e??null}function W4(e){return e??null}let eo=RR=class extends zh{constructor(e){super(e),this.includeTimeOffset=!0,this.max=null,this.min=null,this.timeResolution="minutes",this.type="datetimeoffset-picker"}readMax(e,t){return H4(t.max)}writeMax(e,t){t.max=W4(e)}readMin(e,t){return H4(t.min)}writeMin(e,t){t.min=W4(e)}readTimeResolution(e,t){return H4(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=W4(e)}clone(){return new RR({includeTimeOffset:this.includeTimeOffset,max:this.max,min:this.min,timeResolution:this.timeResolution})}};h([d({type:Boolean,json:{write:!0}})],eo.prototype,"includeTimeOffset",void 0),h([d({type:String,json:{type:String,write:!0}})],eo.prototype,"max",void 0),h([pe("max")],eo.prototype,"readMax",null),h([ge("max")],eo.prototype,"writeMax",null),h([d({type:String,json:{type:String,write:!0}})],eo.prototype,"min",void 0),h([pe("min")],eo.prototype,"readMin",null),h([ge("min")],eo.prototype,"writeMin",null),h([d({type:String,json:{type:String,write:!0}})],eo.prototype,"timeResolution",void 0),h([pe("timeResolution")],eo.prototype,"readTimeResolution",null),h([ge("timeResolution")],eo.prototype,"writeTimeResolution",null),h([d({type:["datetimeoffset-picker"],json:{read:!1,write:!0}})],eo.prototype,"type",void 0),eo=RR=h([j("esri.form.elements.inputs.DateTimeOffsetPickerInput")],eo);const J2e=eo;var LR;function YV(e){return e!=null?new Date(e):null}function KV(e){return e?e.getTime():null}let cl=LR=class extends zh{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return YV(t.max)}writeMax(e,t){t.max=KV(e)}readMin(e,t){return YV(t.min)}writeMin(e,t){t.min=KV(e)}clone(){return new LR({includeTime:this.includeTime,max:this.max,min:this.min})}};h([d({type:Boolean,json:{write:!0}})],cl.prototype,"includeTime",void 0),h([d({type:Date,json:{type:Number,write:!0}})],cl.prototype,"max",void 0),h([pe("max")],cl.prototype,"readMax",null),h([ge("max")],cl.prototype,"writeMax",null),h([d({type:Date,json:{type:Number,write:!0}})],cl.prototype,"min",void 0),h([pe("min")],cl.prototype,"readMin",null),h([ge("min")],cl.prototype,"writeMin",null),h([d({type:["datetime-picker"],json:{read:!1,write:!0}})],cl.prototype,"type",void 0),cl=LR=h([j("esri.form.elements.inputs.DateTimePickerInput")],cl);const Z2e=cl;var kR;let Ug=kR=class extends zh{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new kR({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};h([d({type:String,json:{write:!0}})],Ug.prototype,"noValueOptionLabel",void 0),h([d({type:Boolean,json:{write:!0}})],Ug.prototype,"showNoValueOption",void 0),h([d({type:["radio-buttons"],json:{read:!1,write:!0}})],Ug.prototype,"type",void 0),Ug=kR=h([j("esri.form.elements.inputs.RadioButtonsInput")],Ug);const Y2e=Ug;var NR;let zg=NR=class extends zh{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new NR({offValue:this.offValue,onValue:this.onValue})}};h([d({type:[String,Number],json:{write:!0}})],zg.prototype,"offValue",void 0),h([d({type:[String,Number],json:{write:!0}})],zg.prototype,"onValue",void 0),h([d({type:["switch"],json:{read:!1,write:!0}})],zg.prototype,"type",void 0),zg=NR=h([j("esri.form.elements.inputs.SwitchInput")],zg);const K2e=zg;var DR;let AT=DR=class extends H6{constructor(e){super(e),this.type="text-area"}clone(){return new DR({maxLength:this.maxLength,minLength:this.minLength})}};h([d({type:["text-area"],json:{read:!1,write:!0}})],AT.prototype,"type",void 0),AT=DR=h([j("esri.form.elements.inputs.TextAreaInput")],AT);const X2e=AT;var FR;let $T=FR=class extends H6{constructor(e){super(e),this.type="text-box"}clone(){return new FR({maxLength:this.maxLength,minLength:this.minLength})}};h([d({type:["text-box"],json:{read:!1,write:!0}})],$T.prototype,"type",void 0),$T=FR=h([j("esri.form.elements.inputs.TextBoxInput")],$T);const Q2e=$T;var jR;function J4(e){return e??null}function Z4(e){return e??null}let Ro=jR=class extends zh{constructor(e){super(e),this.max=null,this.min=null,this.timeResolution="minutes",this.type="time-picker"}readMax(e,t){return J4(t.max)}writeMax(e,t){t.max=Z4(e)}readMin(e,t){return J4(t.min)}writeMin(e,t){t.min=Z4(e)}readTimeResolution(e,t){return J4(t.timeResolution)}writeTimeResolution(e,t){t.timeResolution=Z4(e)}clone(){return new jR({max:this.max,min:this.min,timeResolution:this.timeResolution})}};h([d({type:String,json:{type:String,write:!0}})],Ro.prototype,"max",void 0),h([pe("max")],Ro.prototype,"readMax",null),h([ge("max")],Ro.prototype,"writeMax",null),h([d({type:String,json:{type:String,write:!0}})],Ro.prototype,"min",void 0),h([pe("min")],Ro.prototype,"readMin",null),h([ge("min")],Ro.prototype,"writeMin",null),h([d({type:String,json:{type:String,write:!0}})],Ro.prototype,"timeResolution",void 0),h([pe("timeResolution")],Ro.prototype,"readTimeResolution",null),h([ge("timeResolution")],Ro.prototype,"writeTimeResolution",null),h([d({type:["time-picker"],json:{read:!1,write:!0}})],Ro.prototype,"type",void 0),Ro=jR=h([j("esri.form.elements.inputs.TimePickerInput")],Ro);const eSe=Ro,tSe={base:zh,key:"type",typeMap:{"barcode-scanner":q2e,"combo-box":H2e,"date-picker":W2e,"datetime-picker":Z2e,"datetimeoffset-picker":J2e,"radio-buttons":Y2e,switch:K2e,"text-area":X2e,"text-box":Q2e,"time-picker":eSe}};var VR;let iw=VR=class extends ue{constructor(e){super(e),this.name=null,this.code=null}clone(){return new VR({name:this.name,code:this.code})}};h([d({type:String,json:{write:!0}})],iw.prototype,"name",void 0),h([d({type:[String,Number],json:{write:!0}})],iw.prototype,"code",void 0),iw=VR=h([j("esri.layers.support.CodedValue")],iw);const rSe=new wt({inherited:"inherited",codedValue:"coded-value",range:"range"});let sw=class extends ue{constructor(t){super(t),this.name=null,this.type=null}};h([d({type:String,json:{write:!0}})],sw.prototype,"name",void 0),h([We(rSe)],sw.prototype,"type",void 0),sw=h([j("esri.layers.support.Domain")],sw);const DA=sw;var UR;let nw=UR=class extends DA{constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new UR({codedValues:Z(this.codedValues),name:this.name})}};h([d({type:[iw],json:{write:!0}})],nw.prototype,"codedValues",void 0),h([We({codedValue:"coded-value"})],nw.prototype,"type",void 0),nw=UR=h([j("esri.layers.support.CodedValueDomain")],nw);const iee=nw;var zR;let CT=zR=class extends DA{constructor(e){super(e),this.type="inherited"}clone(){return new zR}};h([We({inherited:"inherited"})],CT.prototype,"type",void 0),CT=zR=h([j("esri.layers.support.InheritedDomain")],CT);const see=CT;var GR;let Gg=GR=class extends DA{constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new GR({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};h([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],Gg.prototype,"maxValue",void 0),h([d({json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range?.[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],Gg.prototype,"minValue",void 0),h([We({range:"range"})],Gg.prototype,"type",void 0),Gg=GR=h([j("esri.layers.support.RangeDomain")],Gg);const nee=Gg,oee={key:"type",base:DA,typeMap:{range:nee,"coded-value":iee,inherited:see}};function FA(e){if(!e?.type)return null;switch(e.type){case"range":return nee.fromJSON(e);case"codedValue":return iee.fromJSON(e);case"inherited":return see.fromJSON(e)}return null}var BR;let ba=BR=class extends $y{constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return this._get("editable")??!0}set editable(e){this._set("editable",e)}clone(){return new BR({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};h([d({types:oee,json:{read:{reader:FA},write:!0}})],ba.prototype,"domain",void 0),h([d({type:Boolean,json:{write:!0}})],ba.prototype,"editable",null),h([d({type:String,json:{write:!0}})],ba.prototype,"editableExpression",void 0),h([d({type:String,json:{write:!0}})],ba.prototype,"fieldName",void 0),h([d({type:String,json:{write:!0}})],ba.prototype,"hint",void 0),h([d({types:tSe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ba.prototype,"input",void 0),h([d({type:String,json:{write:!0}})],ba.prototype,"requiredExpression",void 0),h([d({type:String,json:{read:!1,write:!0}})],ba.prototype,"type",void 0),h([d({type:String,json:{write:!0}})],ba.prototype,"valueExpression",void 0),ba=BR=h([j("esri.form.elements.FieldElement")],ba);const XV=ba;var qR;let Dc=qR=class extends $y{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editableExpression=null,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new qR({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editableExpression:this.editableExpression,label:this.label,orderByFields:Z(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};h([d({type:Number,json:{write:!0}})],Dc.prototype,"displayCount",void 0),h([d({type:["list"],json:{write:!0}})],Dc.prototype,"displayType",void 0),h([d({type:String,json:{write:!0}})],Dc.prototype,"editableExpression",void 0),h([d({type:[y6],json:{write:!0}})],Dc.prototype,"orderByFields",void 0),h([d({type:Number,json:{write:!0}})],Dc.prototype,"relationshipId",void 0),h([d({type:["relationship"],json:{read:!1,write:!0}})],Dc.prototype,"type",void 0),Dc=qR=h([j("esri.form.elements.RelationshipElement")],Dc);const QV=Dc;var HR;let Bg=HR=class extends $y{constructor(e){super(e),this.text=null,this.textFormat="plain-text",this.type="text"}clone(){return new HR({text:this.text,textFormat:this.textFormat,visibilityExpression:this.visibilityExpression})}};h([d({type:String,json:{write:!0}})],Bg.prototype,"text",void 0),h([d({type:String,json:{write:!0}})],Bg.prototype,"textFormat",void 0),h([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Bg.prototype,"type",void 0),Bg=HR=h([j("esri.form.elements.TextElement")],Bg);const eU=Bg;function aee(e){return{typesWithGroup:{base:$y,key:"type",typeMap:{attachment:WV,field:XV,group:e,relationship:QV,text:eU}},typesWithoutGroup:{base:$y,key:"type",typeMap:{attachment:WV,field:XV,relationship:QV,text:eU}}}}function lee(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>i[s.type]).map(s=>i[s.type].fromJSON(s))}function uee(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(s=>i[s.type]).map(s=>s.toJSON())}function cee(e,t,r=!0){return e?e.map(i=>Zu(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var WR;let _u=WR=class extends $y{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return cee(e,Y4,!1)}readElements(e,t){return lee(t.formElements,Y4,!1)}writeElements(e,t){t.formElements=uee(e,Y4,!1)}clone(){return new WR({description:this.description,elements:Z(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};h([d({json:{write:!0}})],_u.prototype,"elements",void 0),h([Zt("elements")],_u.prototype,"castElements",null),h([pe("elements",["formElements"])],_u.prototype,"readElements",null),h([ge("elements")],_u.prototype,"writeElements",null),h([d({type:["collapsed","expanded"],json:{write:!0}})],_u.prototype,"initialState",void 0),h([d({type:String,json:{read:!1,write:!0}})],_u.prototype,"type",void 0),_u=WR=h([j("esri.form.elements.GroupElement")],_u);const Y4=aee(_u),iSe=_u,sSe=e=>e.type==="field",nSe=e=>e.type==="group",oSe=e=>e.type==="text";var JR;const K4=aee(iSe);let hl=JR=class extends ue{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(e){return cee(e,K4)}readElements(e,t){return lee(t.formElements,K4)}writeElements(e,t){t.formElements=uee(e,K4)}clone(){return new JR({description:this.description,expressionInfos:Z(this.expressionInfos),elements:Z(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}async getFieldsUsed(e,t){const r=new Set,{description:i,elements:s,expressionInfos:n,title:o}=this;if(Jw(r,e,i),Jw(r,e,o),!s)return[];const a=aSe(s,n).map(l=>yn(r,e,l));await Promise.all(a);for(const l of s)hee(r,{fieldsIndex:e,relationships:t},l);return Array.from(r).sort()}};function hee(e,t,r){const{fieldsIndex:i}=t;if(!i||i.fields.length!==e.size)switch(Jw(e,i,r.label),Jw(e,i,r.description),r.type){case"field":Gn(e,i,r.fieldName);break;case"group":r.elements.forEach(s=>hee(e,t,s));break;case"relationship":if(t.relationships){const s=t.relationships.find(n=>n.id===r.relationshipId);s&&Gn(e,i,s.keyField)}Ey(e,i,r.orderByFields?.map(s=>s.field));break;case"text":Jw(e,i,r.text)}}function aSe(e,t){if(!t||t.length===0)return[];const r=pee(e),i=[];for(const s of t)r.has(s.name)&&i.push(s.expression);return i}function pee(e){const t=new Set;for(const r of e)if(O7(t,r.visibilityExpression),!oSe(r)){if(nSe(r))D3(t,pee(r.elements));else if(O7(t,r.editableExpression),sSe(r)){const{requiredExpression:i,valueExpression:s}=r;D3(t,[i,s])}}return t}function Jw(e,t,r){Ey(e,t,gX(r))}h([d({type:String,json:{write:!0}})],hl.prototype,"description",void 0),h([d({json:{write:!0}})],hl.prototype,"elements",void 0),h([Zt("elements")],hl.prototype,"castElements",null),h([pe("elements",["formElements"])],hl.prototype,"readElements",null),h([ge("elements")],hl.prototype,"writeElements",null),h([d({type:[G2e],json:{write:!0}})],hl.prototype,"expressionInfos",void 0),h([d({type:Boolean,json:{default:!1,write:!0}})],hl.prototype,"preserveFieldValuesWhenHidden",void 0),h([d({type:String,json:{write:!0}})],hl.prototype,"title",void 0),hl=JR=h([j("esri.form.FormTemplate")],hl);const lSe=hl,tU={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8};function X4(e,t,r,i=Xu){const s=new na(h6(i)),n=Mt.fromJSDate(e,{zone:s}),o=r==="decades"||r==="centuries"?"year":fee(r);return r==="decades"&&(t*=10),r==="centuries"&&(t*=100),n.plus({[o]:t}).toJSDate()}function Mnt(e,t,r="milliseconds"){const i=e.getTime(),s=dee(t,r,"milliseconds");return new Date(i+s)}function rU(e,t,r=Xu){const i=new na(h6(r)),s=Mt.fromJSDate(e,{zone:i});if(t==="decades"||t==="centuries"){const o=s.startOf("year"),{year:a}=o,l=a-a%(t==="decades"?10:100);return o.set({year:l}).toJSDate()}const n=fee(t);return s.startOf(n).toJSDate()}function dee(e,t,r){return e===0?0:e*tU[t]/tU[r]}function fee(e){switch(e){case"milliseconds":return"millisecond";case"seconds":return"second";case"minutes":return"minute";case"hours":return"hour";case"days":return"day";case"weeks":return"week";case"months":return"month";case"years":return"year"}}var wa;let jo=wa=class extends ue{static get allTime(){return iU}static get empty(){return uSe}static fromArray(e){return new wa({start:e[0]!=null?new Date(e[0]):e[0],end:e[1]!=null?new Date(e[1]):e[1]})}constructor(e){super(e),this.end=null,this.start=null}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?.getTime()??null}get isAllTime(){return this.equals(wa.allTime)}get isEmpty(){return this.equals(wa.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?.getTime()??null}clone(){return new wa({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=this.start?.getTime()??this.start,r=this.end?.getTime()??this.end,i=e.start?.getTime()??e.start,s=e.end?.getTime()??e.end;return t===i&&r===s}expandTo(e,t=Xu){if(this.isEmpty||this.isAllTime)return this.clone();let r=this.start;r&&(r=rU(r,e,t));let i=this.end;if(i){const s=rU(i,e,t);i=i.getTime()===s.getTime()?s:X4(s,1,e,t)}return new wa({start:r,end:i})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return wa.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=this.start?.getTime()??-1/0,r=this.end?.getTime()??1/0,i=e.start?.getTime()??-1/0,s=e.end?.getTime()??1/0;let n,o;return i>=t&&i<=r?n=i:t>=i&&t<=s&&(n=t),r>=i&&r<=s?o=r:s>=t&&s<=r&&(o=s),n==null||o==null||isNaN(n)||isNaN(o)?wa.empty:new wa({start:n===-1/0?null:new Date(n),end:o===1/0?null:new Date(o)})}offset(e,t,r=Xu){if(this.isEmpty||this.isAllTime)return this.clone();const i=new wa,{start:s,end:n}=this;return s!=null&&(i.start=X4(s,e,t,r)),n!=null&&(i.end=X4(n,e,t,r)),i}toArray(){return this.isEmpty?[void 0,void 0]:[this.start?.getTime()??null,this.end?.getTime()??null]}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return iU.clone();const t=this.start!=null&&e.start!=null?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=this.end!=null&&e.end!=null?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new wa({start:t,end:r})}};h([d({type:Date,json:{write:{allowNull:!0}}})],jo.prototype,"end",void 0),h([pe("end")],jo.prototype,"readEnd",null),h([ge("end")],jo.prototype,"writeEnd",null),h([d({readOnly:!0,json:{read:!1}})],jo.prototype,"isAllTime",null),h([d({readOnly:!0,json:{read:!1}})],jo.prototype,"isEmpty",null),h([d({type:Date,json:{write:{allowNull:!0}}})],jo.prototype,"start",void 0),h([pe("start")],jo.prototype,"readStart",null),h([ge("start")],jo.prototype,"writeStart",null),jo=wa=h([j("esri.TimeExtent")],jo);const iU=new jo,uSe=new jo({start:void 0,end:void 0}),Bn=jo;async function cSe(e){const t="portalItem"in e?e:{portalItem:e},{fromItem:r}=await fe(async()=>{const{fromItem:i}=await import("./portalLayers-FR8acVJI.js").then(s=>s.p);return{fromItem:i}},__vite__mapDeps([8,9,10,1]),import.meta.url);try{return await r(t)}catch(i){const s=t?.portalItem,n=s?.id||"unset",o=s?.portal?.url||Vt.portalUrl;throw be.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+n+"')",i),i}}let hSe=0,xi=class extends jh.EventedMixin(Y2(Yu)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new yt(-180,-90,180,90,Fe.WGS84),this.id=Date.now().toString(16)+"-layer-"+hSe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Fe.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(t){const r=typeof t=="string"?{url:t}:t;return(await fe(async()=>{const{fromUrl:i}=await import("./arcgisLayers-B3jOf8de.js");return{fromUrl:i}},__vite__mapDeps([21,1,9,10]),import.meta.url)).fromUrl(r)}static fromPortalItem(t){return cSe(t)}initialize(){this.when().catch(t=>{ws(t)||be.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:t})})}destroy(){const t=this.parent;if(t){const r=this;"layers"in t&&t.layers.includes(r)?t.layers.remove(r):"tables"in t&&t.tables.includes(r)?t.tables.remove(r):"baseLayers"in t&&t.baseLayers.includes(r)?t.baseLayers.remove(r):"referenceLayers"in t&&t.referenceLayers.includes(r)&&t.referenceLayers.remove(r),this._set("parent",null)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return gi(this.url)}async fetchAttributionData(){const t=this.attributionDataUrl;if(this.hasAttributionData&&t)return(await Re(t,{query:{f:"json"},responseType:"json"})).data;throw new K("layer:no-attribution-data","Layer does not have attribution data")}};h([d({type:String})],xi.prototype,"attributionDataUrl",void 0),h([d({type:yt})],xi.prototype,"fullExtent",void 0),h([d({readOnly:!0})],xi.prototype,"hasAttributionData",null),h([d({type:String,clonable:!1})],xi.prototype,"id",void 0),h([d({type:Boolean,nonNullable:!0})],xi.prototype,"legendEnabled",void 0),h([d({type:["show","hide","hide-children"]})],xi.prototype,"listMode",void 0),h([d({type:Number,range:{min:0,max:1},nonNullable:!0})],xi.prototype,"opacity",void 0),h([d({clonable:!1})],xi.prototype,"parent",void 0),h([d({readOnly:!0})],xi.prototype,"parsedUrl",null),h([d({type:Boolean,readOnly:!0})],xi.prototype,"persistenceEnabled",void 0),h([d({type:Boolean})],xi.prototype,"popupEnabled",void 0),h([d({type:Boolean})],xi.prototype,"attributionVisible",void 0),h([d({type:Fe})],xi.prototype,"spatialReference",void 0),h([d({type:String})],xi.prototype,"title",void 0),h([d({readOnly:!0,json:{read:!1}})],xi.prototype,"type",void 0),h([d()],xi.prototype,"url",void 0),h([d({type:Bn})],xi.prototype,"visibilityTimeExtent",void 0),h([d({type:Boolean,nonNullable:!0})],xi.prototype,"visible",void 0),xi=h([j("esri.layers.Layer")],xi);const Yd=xi;let vI=class{constructor(t=r=>r.values().next().value){this._peeker=t,this._observable=new z2,this._items=new Set}get length(){return ot(this._observable),this._items.size}clear(){this.length!==0&&(this._items.clear(),this._observable.notify())}last(){if(this.length===0)return;let t;for(t of this._items);return t}peek(){if(this.length!==0)return this._peeker(this._items)}push(t){this.contains(t)||(this._items.add(t),this._observable.notify())}contains(t){return ot(this._observable),this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),this._observable.notify(),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),this._observable.notify(),t}remove(t){this.contains(t)&&(this._items.delete(t),this._observable.notify())}filter(t){const r=this.length;return this._items.forEach(i=>{t(i)||this._items.delete(i)}),r!==this._items.size&&this._observable.notify(),this}*[Symbol.iterator](){ot(this._observable),yield*this._items}};const mee=new FinalizationRegistry(e=>{e.close()});function pSe(e,t){mee.register(e,t,t)}function dSe(e){mee.unregister(e)}function yee(e,t){return new Proxy({},{get:(r,i,s)=>(...n)=>{let o,a;const l=n[n.length-1];return fSe(l)&&(o=l.signal,a=l.transferList,n.pop()),e.apply(t?`${t}.${i.toString()}`:i.toString(),n,{transferList:a,signal:o})}})}function fSe(e){return typeof e=="object"&&!Array.isArray(e)&&e!=null&&("signal"in e||"transferList"in e||Object.keys(e).length===0)}const mSe={statsWorker:()=>fe(()=>import("./statsWorker-RN93Ljxi.js"),__vite__mapDeps([22,23,24,25,1]),import.meta.url),geometryEngineWorker:()=>fe(()=>import("./geometryEngineWorker-DsJUIPpe.js"),__vite__mapDeps([26,18,19,1,20]),import.meta.url),CSVSourceWorker:()=>fe(()=>import("./CSVSourceWorker-CH-uf4GH.js"),__vite__mapDeps([27,28,20,29,30,31,32,1,33,11,12,34,23,24,25,15,35]),import.meta.url),EdgeProcessingWorker:()=>fe(()=>import("./EdgeProcessingWorker-CKbQ5ewk.js"),__vite__mapDeps([36,37,38,39,40,41,42,43,44,45,46,1]),import.meta.url),ElevationSamplerWorker:()=>fe(()=>import("./ElevationSamplerWorker-DvrDR7X1.js"),__vite__mapDeps([47,31,48,49,50,51,52,53,54,55,56,57,38,58,1]),import.meta.url),FeatureServiceSnappingSourceWorker:()=>fe(()=>import("./FeatureServiceSnappingSourceWorker-DjzplnA3.js"),__vite__mapDeps([59,29,30,31,32,1,20,33,11,12,34,23,24,25]),import.meta.url),GeoJSONSourceWorker:()=>fe(()=>import("./GeoJSONSourceWorker-ClJVcTJd.js"),__vite__mapDeps([60,29,30,31,32,1,20,33,11,12,34,23,24,25,61,28,35,62]),import.meta.url),LercWorker:()=>fe(()=>import("./LercWorker-CRcAB_Y3.js"),__vite__mapDeps([63,1]),import.meta.url),MemorySourceWorker:()=>fe(()=>import("./MemorySourceWorker-CN85jZ_C.js"),__vite__mapDeps([64,65,29,30,31,32,1,20,33,11,12,34,23,24,25,35,62,28]),import.meta.url),PBFDecoderWorker:()=>fe(()=>import("./PBFDecoderWorker-YwPaoE2G.js"),__vite__mapDeps([66,1]),import.meta.url),FeaturePipelineWorker:()=>fe(()=>import("./FeaturePipelineWorker-x3pDisar.js"),__vite__mapDeps([67,68,69,70,71,72,45,73,46,74,75,76,77,78,40,79,12,32,1,20,80,81,82,83,84,85,86,33,11,34,23,24,25,87,61,28,35,62,88,89]),import.meta.url),PointCloudWorker:()=>fe(()=>import("./PointCloudWorker-6oSLKj02.js"),__vite__mapDeps([90,91,50,92,93,94,95,44,96,51,52,53,97,1]),import.meta.url),RasterWorker:()=>fe(()=>import("./RasterWorker-C9A23FMv.js"),__vite__mapDeps([98,99,100,1]),import.meta.url),SceneLayerSnappingSourceWorker:()=>fe(()=>import("./SceneLayerSnappingSourceWorker-CdJthQkm.js"),__vite__mapDeps([101,102,103,97,50,51,92,40,41,42,43,37,38,39,44,45,46,1]),import.meta.url),SceneLayerWorker:()=>fe(()=>import("./SceneLayerWorker-DkC2p5lT.js"),__vite__mapDeps([104,1,57,48,55,103,97,50,51,92,105,52,95,44,106,107,108,78,96,91,53]),import.meta.url),WFSSourceWorker:()=>fe(()=>import("./WFSSourceWorker-BGbNNL9y.js"),__vite__mapDeps([109,29,30,31,32,1,20,33,11,12,34,23,24,25,61,28,62,110,111]),import.meta.url),WorkerTileHandler:()=>fe(()=>import("./WorkerTileHandler-CLgQz1-i.js"),__vite__mapDeps([112,113,76,77,114,115,71,83,1,68,116,117,45,46,84,75]),import.meta.url),Lyr3DWorker:()=>fe(()=>import("./Lyr3DWorker-DZXoIO71.js"),__vite__mapDeps([118,1]),import.meta.url)},gee="worker:port-closed";var ms;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(ms||(ms={}));let ySe=0;function vee(){return ySe++}function gSe(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function Y_(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function W6(e,t,r,i){if(t.type===ms.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==ms.INVOKE&&t.type!==ms.RESPONSE)return void e.postMessage(t);let s;if(gSe(r)?(s=sU(r.transferList),t.data=r.result):(s=sU(i),t.data=r),s){if(ce("ff")){for(const n of s)if("byteLength"in n&&n.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(t.type){case ms.INVOKE:throw o;case ms.RESPONSE:return void W6(e,{type:ms.RESPONSE,jobId:t.jobId,error:Y_(o)})}}}e.postMessage(t,s)}else e.postMessage(t)}function K_(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function sU(e){if(!e?.length)return null;if(ce("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!vSe(r));return t.length?t:null}function vSe(e){return e instanceof ArrayBuffer||e?.constructor?.name==="ArrayBuffer"}async function Ent(e){try{return await e}catch(t){const r=t?.name===gee;if(!(ws(t)||r))throw t;return}}const{CLOSE:nU,ABORT:oU,INVOKE:aU,RESPONSE:eb,OPEN_PORT:lU,ON:bSe}=ms,wSe=2;let _Se=class{constructor(t){this._invoke=t,this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._timer=null,this._process=this._process.bind(this)}push(t){t.type===ms.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},Od=class qg{static connect(t,r){const i=new MessageChannel;let s;s=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new qg(i.port1,{channel:i,client:s,schedule:r});return typeof s=="object"&&"remoteClient"in s&&(s.remoteClient=n),qg.clients.set(n,s),i.port2}static loadWorker(t){const r=mSe[t];return r?r():Promise.resolve(null)}constructor(t,r,i){this._port=t,this._jobQueue=i,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new _Se(s=>this._onInvokeMessage(s)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:nU}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=i?.signal,n=i?.transferList;if(!this._port)return Promise.reject(new K(gee,`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=vee();return new Promise((a,l)=>{if(Ul(s))return this._processWork(),void l(ii());const u=Zo(s,()=>{const p=this._outJobs.get(o);p&&(this._outJobs.delete(o),this._processWork(),Kr(p.abortHandle),this._post({type:oU,jobId:o}),l(ii()))}),c={resolve:a,reject:l,abortHandle:u,debugInfo:t};this._outJobs.set(o,c),this._post({type:aU,jobId:o,methodName:t,abortable:s!=null},r,n)})}createInvokeProxy(t){return yee(this,t)}on(t,r){const i=new MessageChannel;function s(n){r(n.data)}return this._port.postMessage({type:ms.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",s),i.port1.start(),or(()=>{i.port1.postMessage({type:ms.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",s)})}jobAdded(){this._processWork()}openPort(){const t=new MessageChannel;return this._post({type:lU,port:t.port2}),t.port1}_processWork(){if(this._outJobs.size>=wSe)return;const t=this._jobQueue?.pop();if(!t)return;const{methodName:r,data:i,invokeOptions:s,resolver:n}=t;this.apply(r,i,s).then(o=>n.resolve(o)).catch(o=>n.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{Kr(t.abortHandle),t.reject(ii(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=null,this._client=null,this._schedule=null}_onMessage(t){this._schedule!=null?this._schedule(()=>this._processMessage(t,!0)):this._processMessage(t,!1)}_processMessage(t,r){const i=K_(t);if(i)switch(i.type){case eb:this._onResponseMessage(i);break;case aU:r?this._onInvokeMessage(i):this._invokeQueue.push(i);break;case oU:this._onAbortMessage(i);break;case nU:this._onCloseMessage();break;case lU:this._onOpenPortMessage(i);break;case bSe:this._onOnMessage(i)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);this._invokeQueue.push(t),s&&(s.controller&&s.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&qg.clients.get(this)===t&&t.destroy(),qg.clients.delete(this),t?.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s=[],abortable:n}=t,o=n?new AbortController:null,a=this._inJobs;let l,u=this._client,c=u[r];try{if(!c&&r&&r.includes(".")){const p=r.split(".");for(let f=0;f<p.length-1;f++)u=u[p[f]],c=u[p[f+1]]}if(typeof c!="function")throw new TypeError(`${r} is not a function`);s.push({client:this,signal:o?o.signal:null}),l=c.apply(u,s)}catch(p){return void this._post({type:eb,jobId:i,error:Y_(p)})}Ud(l)?(a.set(i,{controller:o,promise:l}),l.then(p=>{a.has(i)&&(a.delete(i),this._post({type:eb,jobId:i},p))},p=>{a.has(i)&&(a.delete(i),ws(p)||this._post({type:eb,jobId:i,error:Y_(p||{message:`Error encountered at method ${r}`})}))})):this._post({type:eb,jobId:i},l)}_onOpenPortMessage(t){new qg(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,n=>{r.postMessage(n)}),s=j2(t.port,"message",n=>{K_(n)?.type===ms.CLOSE&&(s.remove(),i.remove(),r.close())})}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs;if(!n.has(r))return;const o=n.get(r);n.delete(r),this._processWork(),Kr(o.abortHandle),i?o.reject(K.fromJSON(JSON.parse(i))):o.resolve(s)}_post(t,r,i){return W6(this._port,t,r,i)}};Od.kernelInfo={buildDate:xZ,fullVersion:AD,revision:MZ},Od.clients=new Map;let SSe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new vI}destroy(){this.close()}get closed(){return!this._clients?.length}open(t,r){return new Promise((i,s)=>{let n=!0;const o=a=>{dr(r.signal),n&&(n=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length,this._inUseClients.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];Ud(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new Od(u,r,this._ongoingJobsQueue),o(i),this._clients[a]),()=>(o(s),null)):(this._clients[a]=new Od(l,r,this._ongoingJobsQueue),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i))}})}broadcast(t,r,i){const s=new Array(this._clientPromises.length);for(let n=0;n<this._clientPromises.length;++n){const o=this._clientPromises[n];s[n]=o.then(a=>a?.invoke(t,r,i))}return s}close(){let t;for(;t=this._ongoingJobsQueue.pop();)t.resolver.reject(ii(`Worker closing, aborting job calling '${t.methodName}'`));for(const r of this._clientPromises)r.then(i=>i?.close());this._clients.length=0,this._clientPromises.length=0,this._inUseClients.length=0,dSe(this)}invoke(t,r,i){return this.apply(t,[r],i)}apply(t,r,i){const s=ia();this._ongoingJobsQueue.push({methodName:t,data:r,invokeOptions:i,resolver:s});for(let n=0;n<this._clientPromises.length;n++){const o=this._clients[n];o?o.jobAdded():this._clientPromises[n].then(a=>a?.jobAdded())}return s.promise}createInvokeProxy(t){return yee(this,t)}on(t,r){return Promise.all(this._clientPromises).then(()=>N2(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let s=0;s<this._clientPromises.length;++s)this._clientPromises[s].then(n=>{n&&(r[s]=n.openPort()),--i==0&&t(r)})})}get test(){}};const xSe={async request(e,t){const r=e.options,i=r.responseType;r.signal=t?.signal,r.responseType=i==="native"||i==="native-request-init"?"native-request-init":i&&["blob","json","text"].includes(i)&&nO(e.url)?.after?i:"array-buffer";const s=await Re(e.url,r),n={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch(s.requestOptions?.responseType){case"native-request-init":return delete n.data.signal,n;case"blob":n.data=await n.data.arrayBuffer();break;case"json":n.data=new TextEncoder().encode(JSON.stringify(n.data)).buffer;break;case"text":n.data=new TextEncoder().encode(n.data).buffer}return{result:n,transferList:[n.data]}}},uU={};function MSe(e){const t={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages?.concat()||[],paths:{...uU.paths,...e.paths}};return e.hasOwnProperty("async")||(t.async=!0),e.hasOwnProperty("isDebug")||(t.isDebug=!1),e.baseUrl||(t.baseUrl=uU.baseUrl),t}let TSe=class{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}},OT=class{constructor(){this._dispatcher=new TSe,this._workerPostMessage({type:ms.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){L3(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){L3(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=K_(t);if(r&&r.type===ms.OPEN){const{modulePath:i,jobId:s}=r;let n=await Od.loadWorker(i);n||(n=await import(i));const o=Od.connect(n);this._workerPostMessage({type:ms.OPENED,jobId:s,data:o})}}};const ZR=()=>be.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:ISe}=ms,ESe='let globalId=0;const outgoing=new Map,configuration={CONFIGURATION};self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;let s=null;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());s=()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))},t.addEventListener("abort",s)}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})})).finally((()=>{t&&t.removeEventListener("abort",s)}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,fullVersion:r}=configuration.kernelInfo,{revision:t,fullVersion:n,version:s}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS Maps SDK for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\nModules version: ${r}\nAssets version: ${n??s}\nAssets path: ${esriConfig.assetsPath}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const s=outgoing.get(r);outgoing.delete(r),o.error?s.reject(JSON.parse(o.error)):s.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let yx,gx;const cU="Failed to create Worker. Fallback to execute module in main thread";async function ASe(){if(!ce("esri-workers"))return hU(new OT);if(!yx&&!gx)try{const t=ESe.split("{CONFIGURATION}").join($Se());yx=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){gx=t||{}}let e;if(yx)try{e=new Worker(yx,{name:"esri-worker-"+CSe++})}catch{ZR().warn(cU,gx),e=new OT}else ZR().warn(cU,gx),e=new OT;return hU(e)}async function hU(e){return new Promise(t=>{function r(s){const n=K_(s);n&&n.type===ISe&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(s){s.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),ZR().warn("Failed to create Worker. Fallback to execute module in main thread",s),(e=new OT).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function $Se(){let e;if(Vt.default!=null){const s={...Vt};delete s.default,e=JSON.parse(JSON.stringify(s))}else e=JSON.parse(JSON.stringify(Vt));e.assetsPath=Ho(e.assetsPath),e.defaultAssetsPath=e.defaultAssetsPath?Ho(e.defaultAssetsPath):void 0,e.request.interceptors=[],e.log.interceptors=[],e.locale=Ko(),e.has={"esri-csp-restrictions":ce("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ce("esri-2d-update-debug"),"esri-2d-log-updating":ce("esri-2d-log-updating"),"featurelayer-pbf":ce("featurelayer-pbf"),"featurelayer-fast-triangulation-enabled":ce("featurelayer-fast-triangulation-enabled"),"featurelayer-simplify-thresholds":ce("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ce("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ce("featurelayer-simplify-mobile-factor"),"featurelayer-query-max-depth":ce("featurelayer-query-max-depth"),"featurelayer-query-pausing-enabled":ce("featurelayer-query-pausing-enabled"),"featurelayer-snapshot-enabled":ce("featurelayer-snapshot-enabled"),"esri-atomics":ce("esri-atomics"),"esri-shared-array-buffer":ce("esri-shared-array-buffer"),"esri-tiles-debug":ce("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ce("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ce("feature-polyline-generalization-factor"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=Ho(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=Ho(e.workers.workerPath):e.workers.workerPath=Ho(Xt("esri/core/workers/RemoteClient.js")),e.workers.useDynamicImport=!1;const t=Vt.workers.loaderConfig,r=MSe({baseUrl:t?.baseUrl,locale:Ko(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]});return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:{buildDate:xZ,fullVersion:AD,revision:MZ}})}let CSe=0;const{ABORT:pU,INVOKE:OSe,OPEN:PSe,OPENED:RSe,RESPONSE:tb}=ms;let LSe=class bee{static async create(t){const r=await ASe();return new bee(r,t)}constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),be.getLogger("esri.core.workers.WorkerOwner").error(i)})}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,s=vee();return new Promise((n,o)=>{const a={resolve:n,reject:o,abortHandle:fD(i,()=>{this._outJobs.delete(s),this._post({type:pU,jobId:s})})};this._outJobs.set(s,a),this._post({type:PSe,jobId:s,modulePath:t})})}_onMessage(t){const r=K_(t);if(r)switch(r.type){case RSe:this._onOpenedMessage(r);break;case tb:this._onResponseMessage(r);break;case pU:this._onAbortMessage(r);break;case OSe:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,s=r.get(i);s&&(s.controller&&s.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:s,abortable:n}=t,o=n?new AbortController:null,a=this._inJobs,l=xSe[r];let u;try{if(typeof l!="function")throw new TypeError(`${r} is not a function`);u=l.call(null,s,{signal:o?o.signal:null})}catch(c){return void this._post({type:tb,jobId:i,error:Y_(c)})}Ud(u)?(a.set(i,{controller:o,promise:u}),u.then(c=>{a.has(i)&&(a.delete(i),this._post({type:tb,jobId:i},c))},c=>{a.has(i)&&(a.delete(i),c||(c={message:"Error encountered at method"+r}),ws(c)||this._post({type:tb,jobId:i,error:Y_(c||{message:`Error encountered at method ${r}`})}))})):this._post({type:tb,jobId:i},u)}_onOpenedMessage(t){const{jobId:r,data:i}=t,s=this._outJobs.get(r);s&&(this._outJobs.delete(r),Kr(s.abortHandle),s.resolve(i))}_onResponseMessage(t){const{jobId:r,error:i,data:s}=t,n=this._outJobs.get(r);n&&(this._outJobs.delete(r),Kr(n.abortHandle),i?n.reject(K.fromJSON(JSON.parse(i))):n.resolve(s))}_post(t,r,i){return W6(this.worker,t,r,i)}};const dU=ce("host-browser")?Math.min(navigator.hardwareConcurrency-1,ce("workers-pool-size")):0;let zm=ce("esri-mobile")?Math.min(dU,3):dU;zm||(zm=ce("safari")&&ce("mac")?7:2);let fU=0;const PT=[];function kSe(){_ee()}async function vx(e,t){const r=new SSe,{registryTarget:i,...s}=t;return await r.open(e,s),i&&pSe(i,r),r}async function wee(e,t={}){if(typeof e!="string")throw new K("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(ce("host-webworker")&&!ce("esri-workers")&&(r="local"),r==="local"){let i=await Od.loadWorker(e);i||(i=await import(e)),dr(t.signal);const s=t.client||i;return vx([Od.connect(i,t.schedule)],{...t,client:s})}if(await _ee(),dr(t.signal),r==="dedicated"){const i=fU++%zm;return vx([await PT[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,zm);if(i<zm){const s=new Array(i);for(let n=0;n<i;++n){const o=fU++%zm;s[n]=PT[o].open(e,t)}return vx(s,t)}}return vx(PT.map(i=>i.open(e,t)),t)}let bx=null;async function _ee(){if(bx)return bx;new AbortController;const e=[];for(let t=0;t<zm;t++){const r=LSe.create(t).then(i=>(PT[t]=i,i));e.push(r)}return bx=Promise.all(e),bx}function mU(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const s of i)s.length>2&&(s[2]*=r)}function NSe(e,t,r){if(!e&&!t||!r)return;const i=Mv(r);yU(e,r,i),yU(t,r,i)}function yU(e,t,r){if(e)for(const i of e)DSe(i.geometry,t,r)}function DSe(e,t,r){if(!e?.spatialReference||vi(e.spatialReference,t))return;const i=Mv(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)mU(e,e.rings,i);else if("paths"in e)mU(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const s of e.points)s.length>2&&(s[2]*=i)}}function J6(e,t,r){if(t==null||r==null||r.vcsWkid||vi(t,r)||$d(t)||$d(r))return null;const i=Mv(t)/Mv(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return s=>FSe(s,i);case"polyline":case"esriGeometryPolyline":return s=>VSe(s,i);case"polygon":case"esriGeometryPolygon":return s=>jSe(s,i);case"multipoint":case"esriGeometryMultipoint":return s=>USe(s,i);case"extent":case"esriGeometryEnvelope":return s=>zSe(s,i);default:return null}}function FSe(e,t){e?.z!=null&&(e.z*=t)}function jSe(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function VSe(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function USe(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function zSe(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function YR(e,t,r){if(!r?.features||!r.hasZ)return;const i=J6(r.geometryType,t,e.outSpatialReference);if(i!=null)for(const s of r.features)i(s.geometry)}const GSe=new wt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"});var KR;const BSe=new wt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Ws=KR=class extends ue{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=void 0,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?.value??null}readValueType(e,{description:t}){let r=null;try{r=t?JSON.parse(t):null}catch{}return r?BSe.fromJSON(r.fieldValueType):null}clone(){return new KR({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain?.clone()??null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};h([d({type:String,json:{write:!0}})],Ws.prototype,"alias",void 0),h([d({type:[String,Number],json:{write:{allowNull:!0}}})],Ws.prototype,"defaultValue",void 0),h([d()],Ws.prototype,"description",void 0),h([pe("description")],Ws.prototype,"readDescription",null),h([d({types:oee,json:{read:{reader:FA},write:!0}})],Ws.prototype,"domain",void 0),h([d({type:Boolean,json:{write:!0}})],Ws.prototype,"editable",void 0),h([d({type:St,json:{write:{overridePolicy:e=>({enabled:Number.isFinite(e)})}}})],Ws.prototype,"length",void 0),h([d({type:String,json:{write:!0}})],Ws.prototype,"name",void 0),h([d({type:Boolean,json:{write:!0}})],Ws.prototype,"nullable",void 0),h([We(GSe)],Ws.prototype,"type",void 0),h([d()],Ws.prototype,"valueType",void 0),h([pe("valueType",["description"])],Ws.prototype,"readValueType",null),h([d({type:Boolean,json:{read:!1}})],Ws.prototype,"visible",void 0),Ws=KR=h([j("esri.layers.support.Field")],Ws);const Uo=Ws;var XR;const QR=new wt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let cs=XR=class extends ue{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=Fe.fromJSON(t.spatialReference),i=[];for(let s=0;s<e.length;s++){const n=e[s],o=Ga.fromJSON(n),a=n.geometry?.spatialReference;o.geometry==null||a||(o.geometry.spatialReference=r);const l=n.aggregateGeometries,u=o.aggregateGeometries;if(l&&u!=null)for(const c in u){const p=u[c],f=l[c],m=f?.spatialReference;p==null||m||(p.spatialReference=r)}i.push(o)}return i}writeGeometryType(e,t,r,i){if(e)return void QR.write(e,t,r,i);const{features:s}=this;if(s){for(const n of s)if(n?.geometry!=null)return void QR.write(n.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=bi(e);return i&&!r&&t.spatialReference&&(i.spatialReference=Fe.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&i.geometry!=null&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}clone(){return new XR(this.cloneProperties())}cloneProperties(){return Z({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const s=e?.[r];i.geometry=s?.toJSON()||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,s]}=e,n=u=>Math.round((u-i)/t),o=u=>Math.round((s-u)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,n,o);for(let u=0,c=a.length;u<c;u++)l?.(a[u].geometry)||(a.splice(u,1),u--,c--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,s],scale:[n,o]}=r,a=f=>f*n+i,l=f=>s-f*o;let u=null,c=null;if(this.hasZ&&r?.scale?.[2]!=null){const{translate:[,,f],scale:[,,m]}=r;u=g=>g*m+f}if(this.hasM&&r?.scale?.[3]!=null){const{translate:[,,,f],scale:[,,,m]}=r;c=g=>g==null?g:g*m+f}const p=this._getHydrationFunction(e,a,l,u,c);for(const{geometry:f}of t)f!=null&&p&&p(f);return this.transform=null,this}_quantizePoints(e,t,r){let i,s;const n=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const u=t(l[0]),c=r(l[1]);u===i&&c===s||(n.push([u-i,c-s]),i=u,s=c)}else i=t(l[0]),s=r(l[1]),n.push([i,s])}return n.length>0?n:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const s=Zm(i)?i.rings:i.paths,n=[];for(let o=0,a=s.length;o<a;o++){const l=s[o],u=this._quantizePoints(l,t,r);u&&n.push(u)}return n.length>0?(Zm(i)?i.rings=n:i.paths=n,i):null}:e==="multipoint"?i=>{const s=this._quantizePoints(i.points,t,r);return s&&s.length>0?(i.points=s,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r,i,s){return e==="point"?n=>{n.x=t(n.x),n.y=r(n.y),i&&(n.z=i(n.z))}:e==="polyline"||e==="polygon"?n=>{const o=Zm(n)?n.rings:n.paths;let a,l;for(let u=0,c=o.length;u<c;u++){const p=o[u];for(let f=0,m=p.length;f<m;f++){const g=p[f];f>0?(a+=g[0],l+=g[1]):(a=g[0],l=g[1]),g[0]=t(a),g[1]=r(l)}}if(i&&s)for(let u=0,c=o.length;u<c;u++){const p=o[u];for(let f=0,m=p.length;f<m;f++){const g=p[f];g[2]=i(g[2]),g[3]=s(g[3])}}else if(i)for(let u=0,c=o.length;u<c;u++){const p=o[u];for(let f=0,m=p.length;f<m;f++){const g=p[f];g[2]=i(g[2])}}else if(s)for(let u=0,c=o.length;u<c;u++){const p=o[u];for(let f=0,m=p.length;f<m;f++){const g=p[f];g[2]=s(g[2])}}}:e==="extent"?n=>{n.xmin=t(n.xmin),n.ymin=r(n.ymin),n.xmax=t(n.xmax),n.ymax=r(n.ymax),i&&n.zmax!=null&&n.zmin!=null&&(n.zmax=i(n.zmax),n.zmin=i(n.zmin)),s&&n.mmax!=null&&n.mmin!=null&&(n.mmax=s(n.mmax),n.mmin=s(n.mmin))}:e==="multipoint"?n=>{const o=n.points;let a,l;for(let u=0,c=o.length;u<c;u++){const p=o[u];u>0?(a+=p[0],l+=p[1]):(a=p[0],l=p[1]),p[0]=t(a),p[1]=r(l)}if(i&&s)for(let u=0,c=o.length;u<c;u++){const p=o[u];p[2]=i(p[2]),p[3]=s(p[3])}else if(i)for(let u=0,c=o.length;u<c;u++){const p=o[u];p[2]=i(p[2])}else if(s)for(let u=0,c=o.length;u<c;u++){const p=o[u];p[2]=s(p[2])}}:null}};h([d({type:String,json:{write:!0}})],cs.prototype,"displayFieldName",void 0),h([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],cs.prototype,"exceededTransferLimit",void 0),h([d({type:[Ga],json:{write:!0}})],cs.prototype,"features",void 0),h([pe("features")],cs.prototype,"readFeatures",null),h([d({type:[Uo],json:{write:!0}})],cs.prototype,"fields",void 0),h([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:QR.read}}})],cs.prototype,"geometryType",void 0),h([ge("geometryType")],cs.prototype,"writeGeometryType",null),h([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],cs.prototype,"hasM",void 0),h([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],cs.prototype,"hasZ",void 0),h([d({types:Ss,json:{write:!0}})],cs.prototype,"queryGeometry",void 0),h([pe("queryGeometry")],cs.prototype,"readQueryGeometry",null),h([d({type:Fe,json:{write:!0}})],cs.prototype,"spatialReference",void 0),h([ge("spatialReference")],cs.prototype,"writeSpatialReference",null),h([d({json:{write:!0}})],cs.prototype,"transform",void 0),cs=XR=h([j("esri.rest.support.FeatureSet")],cs),cs.prototype.toJSON.isDefaultToJSON=!0;const Yy=cs;let qSe=0,oh=class extends Yu.LoadableMixin(iA(qe)){constructor(t){super(t),this._idToClientGraphic=null,this.type="memory"}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this._startWorker(r)),Promise.resolve(this)}destroy(){this._connection?.close(),this._connection=null}get _workerGeometryType(){const t=this.layer?.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(t){return this.load().then(()=>this._applyEdits(t))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(t,r={}){await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);YR(t,this.layer.spatialReference,i);const s=Yy.fromJSON(i);if(!this._requiresClientGraphicMapping())return s;const n=this.layer.objectIdField;for(const o of s.features){const a=o.attributes[n],l=this._idToClientGraphic.get(a);l&&(o.geometry=l.geometry)}return s.geometryType=this.layer.geometryType,s}async queryFeaturesJSON(t,r={}){if(this._requiresClientGraphicMapping())throw new K("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(r);const i=await this._connection.invoke("queryFeatures",t?t.toJSON():null,r);return YR(t,this.layer.spatialReference,i),i}queryFeatureCount(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryFeatureCount",t?t.toJSON():null,r))}queryObjectIds(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryObjectIds",t?t.toJSON():null,r))}queryExtent(t,r={}){return this.load(r).then(()=>this._connection.invoke("queryExtent",t?t.toJSON():null,r)).then(i=>({count:i.count,extent:yt.fromJSON(i.extent)}))}querySnapping(t,r={}){return this.load(r).then(()=>this._connection.invoke("querySnapping",t,r))}async _applyEdits(t){if(!this._connection)throw new K("feature-layer-source:edit-failure","Memory source not loaded");const r=this.layer.objectIdField;let i=null;const s=[],n=[];await Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);const o=c=>"objectId"in c&&c.objectId!=null?c.objectId:"attributes"in c&&c.attributes[r]!=null?c.attributes[r]:null;if(t.addFeatures&&(i=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures)for(const c of t.deleteFeatures){const p=o(c);p!=null&&s.push(p)}const a=t.updateFeatures&&this._idToClientGraphic?new Map:null;if(t.updateFeatures){for(const c of t.updateFeatures)if(n.push(this._serializeFeature(c)),a){const p=o(c);p!=null&&a.set(p,c)}}NSe(i?i.features:null,n,this.layer.spatialReference);const{fullExtent:l,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:i?i.features:[],updates:n,deletes:s});return this.fullExtent=l,i&&i.finish(u.uidToObjectId),this._updateClientGraphicIds(a,u),this._createEditsResult(u)}async _prepareClientMapping(t,r){if(this._layerOrSourceGeometryType!=="mesh"||t==null)return;const i=[];for(const{geometry:s}of t)s==null||s.type!=="mesh"||s.hasExtent||s.loaded||i.push(s.load({signal:r}));i.length&&await Promise.all(i)}_updateClientGraphicIds(t,r){if(this._idToClientGraphic){if(t)for(const i of r.updateResults){if(!i.success)continue;const s=t.get(i.objectId);s!=null&&this._addIdToClientGraphic(s)}for(const i of r.deleteResults)i.success&&this._idToClientGraphic.delete(i.objectId)}}_createEditsResult(t){return{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(t){const r=t.success===!0?null:t.error||{code:void 0,description:void 0};return{objectId:t.objectId,globalId:t.globalId,error:r?new K("feature-layer-source:edit-failure",r.description,{code:r.code}):null}}_prepareAddFeatures(t){const r=new Map,i=new Array(t.length);let s=null;for(let o=0;o<t.length;o++){const a=t[o],l=this._serializeFeature(a);s||a.geometry==null||(s=a.geometry.type),i[o]=l,r.set(`${l.uid}`,a)}const n=this;return{features:i,inferredGeometryType:s,finish(o){const a=n.sourceJSON.objectIdField;for(const l in o){const u=o[l],c=r.get(l);c&&(c.attributes||(c.attributes={}),u===-1?delete c.attributes[a]:c.attributes[a]=u,n._addIdToClientGraphic(c))}}}}_addIdToClientGraphic(t){if(!this._idToClientGraphic)return;const r=this.sourceJSON.objectIdField,i=t.attributes?.[r];i!=null&&this._idToClientGraphic.set(i,t)}get _layerOrSourceGeometryType(){return this.layer?.geometryType??this.sourceJSON?.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(t){return this._geometryTypeRequiresClientGraphicMapping(t.type)}_geometryTypeRequiresClientGraphicMapping(t){return t==="mesh"||t==="multipatch"||t==="extent"}_serializeFeature(t){const{attributes:r}=t,i=this._geometryForSerialization(t),s=(qSe++).toString();return i?{uid:s,geometry:i.toJSON(),attributes:r}:{uid:s,attributes:r}}_geometryForSerialization(t){const{geometry:r}=t;return r==null?null:this._geometryRequiresClientGraphicMapping(r)?r.extent?Rs.fromExtent(r.extent):null:r}async _startWorker(t){this._connection=await wee("MemorySourceWorker",{strategy:ce("feature-layers-workers")?"dedicated":"local",signal:t,registryTarget:this});const{fields:r,spatialReference:i,objectIdField:s,hasM:n,hasZ:o,timeInfo:a,dateFieldsTimeZone:l}=this.layer,u=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,t);const c=this._prepareAddFeatures(this.items);this.addHandles(this.on("before-changes",g=>{be.getLogger(this).error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const p={features:c.features,fields:r?.map(g=>g.toJSON()),geometryType:Sj.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&n,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:s,spatialReference:u?null:i&&i.toJSON(),timeInfo:a?.toJSON()??null,dateFieldsTimeZone:l},f=await this._connection.invoke("load",p,{signal:t});for(const g of f.warnings)be.getLogger(this.layer).warn("#load()",`${g.message} (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{warning:g});f.featureErrors.length&&be.getLogger(this.layer).warn("#load()",`Encountered ${f.featureErrors.length} validation errors while loading features. (title: '${this.layer.title||"no title"}', id: '${this.layer.id??"no id"}')`,{errors:f.featureErrors});const m=f.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(c.inferredGeometryType)&&(m.geometryType=Sj.toJSON(c.inferredGeometryType)),this.sourceJSON=m,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),c.finish(f.assignedObjectIds)}};h([$D({Type:Ga,ensureType:ni(Ga)})],oh.prototype,"itemType",void 0),h([d()],oh.prototype,"type",void 0),h([d({constructOnly:!0})],oh.prototype,"layer",void 0),h([d({readOnly:!0})],oh.prototype,"_workerGeometryType",null),h([d()],oh.prototype,"sourceJSON",void 0),oh=h([j("esri.layers.graphics.sources.MemorySource")],oh);function HSe(e){return"portalItem"in e}const Z6=e=>{let t=class extends e{get apiKey(){return this._isOverridden("apiKey")?this._get("apiKey"):HSe(this)?this.portalItem?.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return h([d({type:String})],t.prototype,"apiKey",null),t=h([j("esri.layers.mixins.APIKeyMixin")],t),t},See={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},xee=Object.values(See),Mee=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${xee.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),WSe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${xee.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),JSe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function ZSe(e){return Mee.test(e)}function Lh(e){if(e==null)return null;const t=gi(e),r=t?.path.match(Mee)||t?.path.match(WSe);if(!r)return null;const[,i,s,n,o]=r,a=s.indexOf("/");return{title:Y6(a!==-1?s.slice(a+1):s),serverType:See[n.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function YSe(e){const t=gi(e).path.match(JSe);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function Y6(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function KSe(e,t){const r=[];if(e){const i=Lh(e);i!=null&&i.title&&r.push(i.title)}if(t){const i=Y6(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().includes(r[1].toLowerCase()))return r[0];if(r[1].toLowerCase().includes(r[0].toLowerCase()))return r[1]}return r.join(" - ")}function K6(e){let t=ka(e,!0);return!!t&&(t=t.toLowerCase(),t.endsWith(".arcgis.com")&&(t.startsWith("services")||t.startsWith("tiles")||t.startsWith("features")))}function XSe(e,t){return e&&wZ(_Z(e,t))}function QSe(e){let{url:t}=e;if(!t)return{url:t};t=_Z(t,e.logger);const r=gi(t),i=Lh(r.path);let s;if(i!=null)i.sublayer!=null&&e.layer.layerId==null&&(s=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const n=YSe(r.path);n!=null&&(t=n.serviceUrl,s=n.sublayerId)}return{url:wZ(t),layerId:s}}function exe(e,t,r,i,s){My(t,i,"url",s),i.url&&e.layerId!=null&&(i.url=Oh(i.url,r,e.layerId.toString()))}function txe(e){if(!e)return!1;const t=e.toLowerCase(),r=t.includes("/services/"),i=t.includes("/mapserver/wmsserver"),s=t.includes("/imageserver/wmsserver"),n=t.includes("/wmsserver");return r&&(i||s||n)}const jA=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=Lh(this.url);if(r!=null&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",XSe(r,be.getLogger(this)))}};return h([d()],t.prototype,"title",null),h([d({type:String})],t.prototype,"url",null),t=h([j("esri.layers.mixins.ArcGISService")],t),t};function VA(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function rxe(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ixe(e,t,r,i,s,n,o,a,l,u,c,p,f,m,g,b){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=r,w[3]=i,w[4]=s,w[5]=n,w[6]=o,w[7]=a,w[8]=l,w[9]=u,w[10]=c,w[11]=p,w[12]=f,w[13]=m,w[14]=g,w[15]=b,w}function sxe(e,t){return new Float32Array(e,t,16)}const nxe=VA();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:nxe,clone:rxe,create:VA,createView:sxe,fromValues:ixe},Symbol.toStringTag,{value:"Module"}));function oxe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Kd(e,t,r,i,s,n,o,a,l,u,c,p,f,m,g,b,w){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=c,e[10]=p,e[11]=f,e[12]=m,e[13]=g,e[14]=b,e[15]=w,e}function UA(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Xd(e,t){if(e===t){const r=t[1],i=t[2],s=t[3],n=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=n,e[11]=t[14],e[12]=s,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function axe(e,t){return Tee(e,t)||UA(e),e}function Tee(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],p=t[9],f=t[10],m=t[11],g=t[12],b=t[13],w=t[14],S=t[15],M=r*a-i*o,x=r*l-s*o,_=r*u-n*o,I=i*l-s*a,E=i*u-n*a,A=s*u-n*l,C=c*b-p*g,O=c*w-f*g,R=c*S-m*g,D=p*w-f*b,N=p*S-m*b,U=f*S-m*w;let J=M*U-x*N+_*D+I*R-E*O+A*C;return J?(J=1/J,e[0]=(a*U-l*N+u*D)*J,e[1]=(s*N-i*U-n*D)*J,e[2]=(b*A-w*E+S*I)*J,e[3]=(f*E-p*A-m*I)*J,e[4]=(l*R-o*U-u*O)*J,e[5]=(r*U-s*R+n*O)*J,e[6]=(w*_-g*A-S*x)*J,e[7]=(c*A-f*_+m*x)*J,e[8]=(o*N-a*R+u*C)*J,e[9]=(i*R-r*N-n*C)*J,e[10]=(g*E-b*_+S*M)*J,e[11]=(p*_-c*E-m*M)*J,e[12]=(a*O-o*D-l*C)*J,e[13]=(r*D-i*O+s*C)*J,e[14]=(b*x-g*I-w*M)*J,e[15]=(c*I-p*x+f*M)*J,e):null}function lxe(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],p=t[9],f=t[10],m=t[11],g=t[12],b=t[13],w=t[14],S=t[15];return e[0]=a*(f*S-m*w)-p*(l*S-u*w)+b*(l*m-u*f),e[1]=-(i*(f*S-m*w)-p*(s*S-n*w)+b*(s*m-n*f)),e[2]=i*(l*S-u*w)-a*(s*S-n*w)+b*(s*u-n*l),e[3]=-(i*(l*m-u*f)-a*(s*m-n*f)+p*(s*u-n*l)),e[4]=-(o*(f*S-m*w)-c*(l*S-u*w)+g*(l*m-u*f)),e[5]=r*(f*S-m*w)-c*(s*S-n*w)+g*(s*m-n*f),e[6]=-(r*(l*S-u*w)-o*(s*S-n*w)+g*(s*u-n*l)),e[7]=r*(l*m-u*f)-o*(s*m-n*f)+c*(s*u-n*l),e[8]=o*(p*S-m*b)-c*(a*S-u*b)+g*(a*m-u*p),e[9]=-(r*(p*S-m*b)-c*(i*S-n*b)+g*(i*m-n*p)),e[10]=r*(a*S-u*b)-o*(i*S-n*b)+g*(i*u-n*a),e[11]=-(r*(a*m-u*p)-o*(i*m-n*p)+c*(i*u-n*a)),e[12]=-(o*(p*w-f*b)-c*(a*w-l*b)+g*(a*f-l*p)),e[13]=r*(p*w-f*b)-c*(i*w-s*b)+g*(i*f-s*p),e[14]=-(r*(a*w-l*b)-o*(i*w-s*b)+g*(i*l-s*a)),e[15]=r*(a*f-l*p)-o*(i*f-s*p)+c*(i*l-s*a),e}function uxe(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],u=e[8],c=e[9],p=e[10],f=e[11],m=e[12],g=e[13],b=e[14],w=e[15];return(t*o-r*n)*(p*w-f*b)-(t*a-i*n)*(c*w-f*g)+(t*l-s*n)*(c*b-p*g)+(r*a-i*o)*(u*w-f*m)-(r*l-s*o)*(u*b-p*m)+(i*l-s*a)*(u*g-c*m)}function Iee(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=t[9],m=t[10],g=t[11],b=t[12],w=t[13],S=t[14],M=t[15];let x=r[0],_=r[1],I=r[2],E=r[3];return e[0]=x*i+_*a+I*p+E*b,e[1]=x*s+_*l+I*f+E*w,e[2]=x*n+_*u+I*m+E*S,e[3]=x*o+_*c+I*g+E*M,x=r[4],_=r[5],I=r[6],E=r[7],e[4]=x*i+_*a+I*p+E*b,e[5]=x*s+_*l+I*f+E*w,e[6]=x*n+_*u+I*m+E*S,e[7]=x*o+_*c+I*g+E*M,x=r[8],_=r[9],I=r[10],E=r[11],e[8]=x*i+_*a+I*p+E*b,e[9]=x*s+_*l+I*f+E*w,e[10]=x*n+_*u+I*m+E*S,e[11]=x*o+_*c+I*g+E*M,x=r[12],_=r[13],I=r[14],E=r[15],e[12]=x*i+_*a+I*p+E*b,e[13]=x*s+_*l+I*f+E*w,e[14]=x*n+_*u+I*m+E*S,e[15]=x*o+_*c+I*g+E*M,e}function cxe(e,t,r){const i=r[0],s=r[1],n=r[2];if(t===e)e[12]=t[0]*i+t[4]*s+t[8]*n+t[12],e[13]=t[1]*i+t[5]*s+t[9]*n+t[13],e[14]=t[2]*i+t[6]*s+t[10]*n+t[14],e[15]=t[3]*i+t[7]*s+t[11]*n+t[15];else{const o=t[0],a=t[1],l=t[2],u=t[3],c=t[4],p=t[5],f=t[6],m=t[7],g=t[8],b=t[9],w=t[10],S=t[11];e[0]=o,e[1]=a,e[2]=l,e[3]=u,e[4]=c,e[5]=p,e[6]=f,e[7]=m,e[8]=g,e[9]=b,e[10]=w,e[11]=S,e[12]=o*i+c*s+g*n+t[12],e[13]=a*i+p*s+b*n+t[13],e[14]=l*i+f*s+w*n+t[14],e[15]=u*i+m*s+S*n+t[15]}return e}function hxe(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function pxe(e,t,r,i){let s,n,o,a,l,u,c,p,f,m,g,b,w,S,M,x,_,I,E,A,C,O,R,D,N=i[0],U=i[1],J=i[2],y=Math.sqrt(N*N+U*U+J*J);return y<zn()?null:(y=1/y,N*=y,U*=y,J*=y,s=Math.sin(r),n=Math.cos(r),o=1-n,a=t[0],l=t[1],u=t[2],c=t[3],p=t[4],f=t[5],m=t[6],g=t[7],b=t[8],w=t[9],S=t[10],M=t[11],x=N*N*o+n,_=U*N*o+J*s,I=J*N*o-U*s,E=N*U*o-J*s,A=U*U*o+n,C=J*U*o+N*s,O=N*J*o+U*s,R=U*J*o-N*s,D=J*J*o+n,e[0]=a*x+p*_+b*I,e[1]=l*x+f*_+w*I,e[2]=u*x+m*_+S*I,e[3]=c*x+g*_+M*I,e[4]=a*E+p*A+b*C,e[5]=l*E+f*A+w*C,e[6]=u*E+m*A+S*C,e[7]=c*E+g*A+M*C,e[8]=a*O+p*R+b*D,e[9]=l*O+f*R+w*D,e[10]=u*O+m*R+S*D,e[11]=c*O+g*R+M*D,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function dxe(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],p=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+u*i,e[5]=o*s+c*i,e[6]=a*s+p*i,e[7]=l*s+f*i,e[8]=u*s-n*i,e[9]=c*s-o*i,e[10]=p*s-a*i,e[11]=f*s-l*i,e}function fxe(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],a=t[2],l=t[3],u=t[8],c=t[9],p=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-u*i,e[1]=o*s-c*i,e[2]=a*s-p*i,e[3]=l*s-f*i,e[8]=n*i+u*s,e[9]=o*i+c*s,e[10]=a*i+p*s,e[11]=l*i+f*s,e}function mxe(e,t,r){const i=Math.sin(r),s=Math.cos(r),n=t[0],o=t[1],a=t[2],l=t[3],u=t[4],c=t[5],p=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s+u*i,e[1]=o*s+c*i,e[2]=a*s+p*i,e[3]=l*s+f*i,e[4]=u*s-n*i,e[5]=c*s-o*i,e[6]=p*s-a*i,e[7]=f*s-l*i,e}function yxe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function gxe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vxe(e,t,r){if(t===0)return UA(e);let i,s,n,o=r[0],a=r[1],l=r[2],u=Math.sqrt(o*o+a*a+l*l);return u<zn()?null:(u=1/u,o*=u,a*=u,l*=u,i=Math.sin(t),s=Math.cos(t),n=1-s,e[0]=o*o*n+s,e[1]=a*o*n+l*i,e[2]=l*o*n-a*i,e[3]=0,e[4]=o*a*n-l*i,e[5]=a*a*n+s,e[6]=l*a*n+o*i,e[7]=0,e[8]=o*l*n+a*i,e[9]=a*l*n-o*i,e[10]=l*l*n+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function bxe(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function wxe(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function _xe(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Eee(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=i+i,l=s+s,u=n+n,c=i*a,p=i*l,f=i*u,m=s*l,g=s*u,b=n*u,w=o*a,S=o*l,M=o*u;return e[0]=1-(m+b),e[1]=p+M,e[2]=f-S,e[3]=0,e[4]=p-M,e[5]=1-(c+b),e[6]=g+w,e[7]=0,e[8]=f+S,e[9]=g-w,e[10]=1-(c+m),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Sxe(e,t){const r=xxe,i=-t[0],s=-t[1],n=-t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=i*i+s*s+n*n+o*o;return p>0?(r[0]=2*(a*o+c*i+l*n-u*s)/p,r[1]=2*(l*o+c*s+u*i-a*n)/p,r[2]=2*(u*o+c*n+a*s-l*i)/p):(r[0]=2*(a*o+c*i+l*n-u*s),r[1]=2*(l*o+c*s+u*i-a*n),r[2]=2*(u*o+c*n+a*s-l*i)),Eee(e,t,r),e}const xxe=zd();function Mxe(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Txe(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.sqrt(r*r+i*i+s*s),e[1]=Math.sqrt(n*n+o*o+a*a),e[2]=Math.sqrt(l*l+u*u+c*c),e}function Ixe(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function Exe(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=t[3],l=s+s,u=n+n,c=o+o,p=s*l,f=s*u,m=s*c,g=n*u,b=n*c,w=o*c,S=a*l,M=a*u,x=a*c,_=i[0],I=i[1],E=i[2];return e[0]=(1-(g+w))*_,e[1]=(f+x)*_,e[2]=(m-M)*_,e[3]=0,e[4]=(f-x)*I,e[5]=(1-(p+w))*I,e[6]=(b+S)*I,e[7]=0,e[8]=(m+M)*E,e[9]=(b-S)*E,e[10]=(1-(p+g))*E,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Axe(e,t,r,i,s){const n=t[0],o=t[1],a=t[2],l=t[3],u=n+n,c=o+o,p=a+a,f=n*u,m=n*c,g=n*p,b=o*c,w=o*p,S=a*p,M=l*u,x=l*c,_=l*p,I=i[0],E=i[1],A=i[2],C=s[0],O=s[1],R=s[2],D=(1-(b+S))*I,N=(m+_)*I,U=(g-x)*I,J=(m-_)*E,y=(1-(f+S))*E,T=(w+M)*E,$=(g+x)*A,P=(w-M)*A,z=(1-(f+b))*A;return e[0]=D,e[1]=N,e[2]=U,e[3]=0,e[4]=J,e[5]=y,e[6]=T,e[7]=0,e[8]=$,e[9]=P,e[10]=z,e[11]=0,e[12]=r[0]+C-(D*C+J*O+$*R),e[13]=r[1]+O-(N*C+y*O+P*R),e[14]=r[2]+R-(U*C+T*O+z*R),e[15]=1,e}function $xe(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,a=i+i,l=s+s,u=r*o,c=i*o,p=i*a,f=s*o,m=s*a,g=s*l,b=n*o,w=n*a,S=n*l;return e[0]=1-p-g,e[1]=c+S,e[2]=f-w,e[3]=0,e[4]=c-S,e[5]=1-u-g,e[6]=m+b,e[7]=0,e[8]=f+w,e[9]=m-b,e[10]=1-u-p,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Cxe(e,t,r,i,s,n,o){const a=1/(r-t),l=1/(s-i),u=1/(n-o);return e[0]=2*n*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*n*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(s+i)*l,e[10]=(o+n)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n*2*u,e[15]=0,e}function Oxe(e,t,r,i,s){const n=1/Math.tan(t/2);let o;return e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,s!=null&&s!==1/0?(o=1/(i-s),e[10]=(s+i)*o,e[14]=2*s*i*o):(e[10]=-1,e[14]=-2*i),e}function Pxe(e,t,r,i){const s=Math.tan(t.upDegrees*Math.PI/180),n=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(s+n);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(s-n)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function Rxe(e,t,r,i,s,n,o){const a=1/(t-r),l=1/(i-s),u=1/(n-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*a,e[13]=(s+i)*l,e[14]=(o+n)*u,e[15]=1,e}function Lxe(e,t,r,i){const s=t[0],n=t[1],o=t[2];let a=s-r[0],l=n-r[1],u=o-r[2];const c=zn();if(Math.abs(a)<c&&Math.abs(l)<c&&Math.abs(u)<c)return void UA(e);let p=1/Math.sqrt(a*a+l*l+u*u);a*=p,l*=p,u*=p;const f=i[0],m=i[1],g=i[2];let b=m*u-g*l,w=g*a-f*u,S=f*l-m*a;p=Math.sqrt(b*b+w*w+S*S),p?(p=1/p,b*=p,w*=p,S*=p):(b=0,w=0,S=0);let M=l*S-u*w,x=u*b-a*S,_=a*w-l*b;p=Math.sqrt(M*M+x*x+_*_),p?(p=1/p,M*=p,x*=p,_*=p):(M=0,x=0,_=0),e[0]=b,e[1]=M,e[2]=a,e[3]=0,e[4]=w,e[5]=x,e[6]=l,e[7]=0,e[8]=S,e[9]=_,e[10]=u,e[11]=0,e[12]=-(b*s+w*n+S*o),e[13]=-(M*s+x*n+_*o),e[14]=-(a*s+l*n+u*o),e[15]=1}function kxe(e,t,r,i){const s=t[0],n=t[1],o=t[2],a=i[0],l=i[1],u=i[2];let c=s-r[0],p=n-r[1],f=o-r[2],m=c*c+p*p+f*f;m>0&&(m=1/Math.sqrt(m),c*=m,p*=m,f*=m);let g=l*f-u*p,b=u*c-a*f,w=a*p-l*c;return m=g*g+b*b+w*w,m>0&&(m=1/Math.sqrt(m),g*=m,b*=m,w*=m),e[0]=g,e[1]=b,e[2]=w,e[3]=0,e[4]=p*w-f*b,e[5]=f*g-c*w,e[6]=c*b-p*g,e[7]=0,e[8]=c,e[9]=p,e[10]=f,e[11]=0,e[12]=s,e[13]=n,e[14]=o,e[15]=1,e}function Nxe(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Dxe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Fxe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function Aee(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function jxe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function Vxe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function Uxe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function zxe(e,t){if(e===t)return!0;const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],p=e[9],f=e[10],m=e[11],g=e[12],b=e[13],w=e[14],S=e[15],M=t[0],x=t[1],_=t[2],I=t[3],E=t[4],A=t[5],C=t[6],O=t[7],R=t[8],D=t[9],N=t[10],U=t[11],J=t[12],y=t[13],T=t[14],$=t[15],P=zn();return Math.abs(r-M)<=P*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(i-x)<=P*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(s-_)<=P*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(n-I)<=P*Math.max(1,Math.abs(n),Math.abs(I))&&Math.abs(o-E)<=P*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(a-A)<=P*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(l-C)<=P*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(u-O)<=P*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(c-R)<=P*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(p-D)<=P*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(f-N)<=P*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(m-U)<=P*Math.max(1,Math.abs(m),Math.abs(U))&&Math.abs(g-J)<=P*Math.max(1,Math.abs(g),Math.abs(J))&&Math.abs(b-y)<=P*Math.max(1,Math.abs(b),Math.abs(y))&&Math.abs(w-T)<=P*Math.max(1,Math.abs(w),Math.abs(T))&&Math.abs(S-$)<=P*Math.max(1,Math.abs(S),Math.abs($))}function Gxe(e){const t=zn(),r=e[0],i=e[1],s=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],c=e[10];return Math.abs(1-(r*r+n*n+l*l))<=t&&Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(s*s+a*a+c*c))<=t}function Bxe(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[4]===0&&e[5]===1&&e[6]===0&&e[8]===0&&e[9]===0&&e[10]===1}const qxe=Iee,Hxe=Aee;Object.freeze(Object.defineProperty({__proto__:null,add:Fxe,adjoint:lxe,copy:oxe,determinant:uxe,equals:zxe,exactEquals:Uxe,frob:Dxe,fromQuat:$xe,fromQuat2:Sxe,fromRotation:vxe,fromRotationTranslation:Eee,fromRotationTranslationScale:Exe,fromRotationTranslationScaleOrigin:Axe,fromScaling:gxe,fromTranslation:yxe,fromXRotation:bxe,fromYRotation:wxe,fromZRotation:_xe,frustum:Cxe,getRotation:Ixe,getScaling:Txe,getTranslation:Mxe,hasIdentityRotation:Bxe,identity:UA,invert:Tee,invertOrIdentity:axe,isOrthoNormal:Gxe,lookAt:Lxe,mul:qxe,multiply:Iee,multiplyScalar:jxe,multiplyScalarAndAdd:Vxe,ortho:Rxe,perspective:Oxe,perspectiveFromFieldOfView:Pxe,rotate:pxe,rotateX:dxe,rotateY:fxe,rotateZ:mxe,scale:hxe,set:Kd,str:Nxe,sub:Hxe,subtract:Aee,targetTo:kxe,translate:cxe,transpose:Xd},Symbol.toStringTag,{value:"Module"}));const Wxe=(e,t)=>{const r=Kd(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Xd(r,r)},Jxe=(e,t)=>{const r=Kd(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Xd(r,r)},Zxe=(e,t)=>{const r=1-t,i=Kd(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return Xd(i,i)},Yxe=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),s=Kd(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return Xd(s,s)},Kxe=(e,t)=>{const r=1-2*t,i=Kd(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return Xd(i,i)},Xxe=(e,t)=>{const r=Kd(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Xd(r,r)},Qxe=(e,t)=>{const r=1-t,i=Kd(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return Xd(i,i)};let $ee=class Cee{constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=oo(t.strength,r.strength,i),this.radius=oo(t.radius,r.radius,i),this.threshold=oo(t.threshold,r.threshold,i)}clone(){return new Cee(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:Zw(this.radius),strength:this.strength,threshold:this.threshold}}},Oee=class Pee{constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(oo(t.radius,r.radius,i))}clone(){return new Pee(this.radius)}toJSON(){return{type:"blur",radius:Zw(this.radius)}}},eL=class Ree{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=oo(t.amount,r.amount,i),this._updateMatrix()}clone(){return new Ree(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||VA();switch(this.type){case"brightness":this._colorMatrix=Wxe(t,this.amount);break;case"contrast":this._colorMatrix=Jxe(t,this.amount);break;case"grayscale":this._colorMatrix=Zxe(t,this.amount);break;case"invert":this._colorMatrix=Kxe(t,this.amount);break;case"saturate":this._colorMatrix=Xxe(t,this.amount);break;case"sepia":this._colorMatrix=Qxe(t,this.amount)}}},Lee=class kee{constructor(t,r,i,s){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=s,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=oo(t.offsetX,r.offsetX,i),this.offsetY=oo(t.offsetY,r.offsetY,i),this.blurRadius=oo(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(oo(t.color[0],r.color[0],i)),this.color[1]=Math.round(oo(t.color[1],r.color[1],i)),this.color[2]=Math.round(oo(t.color[2],r.color[2],i)),this.color[3]=oo(t.color[3],r.color[3],i)}clone(){return new kee(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:Zw(this.offsetX),yoffset:Zw(this.offsetY),blurRadius:Zw(this.blurRadius),color:t}}},Nee=class Dee{constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=oo(t.angle,r.angle,i),this._updateMatrix()}clone(){return new Dee(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||VA();this._colorMatrix=Yxe(t,this.angle)}},Fee=class jee{constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=oo(t.amount,r.amount,i)}clone(){return new jee(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function oo(e,t,r){return e+(t-e)*r}function Zw(e){return Math.round(1e3*za(e))/1e3}function eMe(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new eL(e.type,0);case"saturate":case"brightness":case"contrast":return new eL(e.type,1);case"opacity":return new Fee(1);case"hue-rotate":return new Nee(0);case"blur":return new Oee(0);case"drop-shadow":return new Lee(0,0,0,[...BD("transparent")]);case"bloom":return new $ee(0,0,1)}}var Rnt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function tMe(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((i,s)=>i.type===r[s].type)}function rMe(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let s=i.length;s<r.length;s++)i.push(eMe(r[s]))}function iMe(e){const t=e[0];return!!t&&"type"in t}var gU,vU,Vee={exports:{}};vU=function(){function e(s,n){function o(){this.constructor=s}o.prototype=n.prototype,s.prototype=new o}function t(s,n,o,a){var l=Error.call(this,s);return Object.setPrototypeOf&&Object.setPrototypeOf(l,t.prototype),l.expected=n,l.found=o,l.location=a,l.name="SyntaxError",l}function r(s,n,o){return o=o||" ",s.length>n?s:(n-=s.length,s+(o+=o.repeat(n)).slice(0,n))}function i(s,n){var o,a={},l=(n=n!==void 0?n:{}).grammarSource,u={start:yc},c=yc,p="none",f=")",m=",",g="(",b="%",w="px",S="cm",M="mm",x="in",_="pt",I="pc",E="deg",A="rad",C="grad",O="turn",R="#",D=".",N="e",U=/^[ \t\n\r]/,J=/^[a-z\-]/,y=/^[0-9a-fA-F]/,T=/^[+\-]/,$=/^[0-9]/,P=Ya("none"),z=Ri("none",!1),X=Ri(")",!1),ae=Ri(",",!1),te=Ya("whitespace"),ye=mf([" ","	",`
`,"\r"],!1,!1),Me=Ya("function"),De=Ri("(",!1),$e=Ya("identifier"),gt=mf([["a","z"],"-"],!1,!1),dt=Ya("percentage"),Je=Ri("%",!1),He=Ya("length"),mt=Ri("px",!1),zt=Ri("cm",!1),H=Ri("mm",!1),G=Ri("in",!1),re=Ri("pt",!1),we=Ri("pc",!1),me=Ya("angle"),k=Ri("deg",!1),q=Ri("rad",!1),L=Ri("grad",!1),V=Ri("turn",!1),W=Ya("number"),Q=Ya("color"),se=Ri("#",!1),le=mf([["0","9"],["a","f"],["A","F"]],!1,!1),ee=mf(["+","-"],!1,!1),ne=mf([["0","9"]],!1,!1),Oe=Ri(".",!1),ke=Ri("e",!1),_t=function(){return[]},hr=function(Y,_e){return{type:"function",name:Y,parameters:_e||[]}},Gr=function(Y,_e){return _e.length>0?l4(Y,_e,3):[Y]},_i=function(Y){return{type:"quantity",value:Y.value,unit:Y.unit}},ve=function(Y){return{type:"color",colorType:Y.type,value:Y.value}},Ze=function(Y){return Y},Ke=function(){return lg()},Ct=function(Y){return{value:Y,unit:"%"}},kt=function(Y){return{value:Y,unit:"px"}},Si=function(Y){return{value:Y,unit:"cm"}},ns=function(Y){return{value:Y,unit:"mm"}},la=function(Y){return{value:Y,unit:"in"}},Yl=function(Y){return{value:Y,unit:"pt"}},Za=function(Y){return{value:Y,unit:"pc"}},ff=function(Y){return{value:Y,unit:"deg"}},Hh=function(Y){return{value:Y,unit:"rad"}},Kl=function(Y){return{value:Y,unit:"grad"}},F1=function(Y){return{value:Y,unit:"turn"}},Wh=function(Y){return{value:Y,unit:null}},fc=function(){return{type:"hex",value:lg()}},mc=function(Y){return{type:"function",value:Y}},K$=function(){return{type:"named",value:lg()}},X$=function(){return parseFloat(lg())},he=0,Ir=0,ag=[{line:1,column:1}],Pi=0,j1=[],Xe=0;if("startRule"in n){if(!(n.startRule in u))throw new Error(`Can't start parsing from rule "`+n.startRule+'".');c=u[n.startRule]}function lg(){return s.substring(Ir,he)}function Ri(Y,_e){return{type:"literal",text:Y,ignoreCase:_e}}function mf(Y,_e,Ie){return{type:"class",parts:Y,inverted:_e,ignoreCase:Ie}}function Jh(){return{type:"end"}}function Ya(Y){return{type:"other",description:Y}}function FS(Y){var _e,Ie=ag[Y];if(Ie)return Ie;for(_e=Y-1;!ag[_e];)_e--;for(Ie={line:(Ie=ag[_e]).line,column:Ie.column};_e<Y;)s.charCodeAt(_e)===10?(Ie.line++,Ie.column=1):Ie.column++,_e++;return ag[Y]=Ie,Ie}function jS(Y,_e,Ie){var Dt=FS(Y),ci=FS(_e);return{source:l,start:{offset:Y,line:Dt.line,column:Dt.column},end:{offset:_e,line:ci.line,column:ci.column}}}function Et(Y){he<Pi||(he>Pi&&(Pi=he,j1=[]),j1.push(Y))}function Q$(Y,_e,Ie){return new t(t.buildMessage(Y,_e),Y,_e,Ie)}function yc(){var Y;return(Y=e4())===a&&(Y=t4()),Y}function e4(){var Y,_e;return Xe++,Y=he,Li(),s.substr(he,4)===p?(_e=p,he+=4):(_e=a,Xe===0&&Et(z)),_e!==a?(Li(),Ir=Y,Y=_t()):(he=Y,Y=a),Xe--,Y===a&&Xe===0&&Et(P),Y}function t4(){var Y,_e;if(Y=[],(_e=V1())!==a)for(;_e!==a;)Y.push(_e),_e=V1();else Y=a;return Y}function V1(){var Y,_e,Ie,Dt;return Y=he,Li(),(_e=VS())!==a?(Li(),(Ie=r4())===a&&(Ie=null),Li(),s.charCodeAt(he)===41?(Dt=f,he++):(Dt=a,Xe===0&&Et(X)),Dt!==a?(Li(),Ir=Y,Y=hr(_e,Ie)):(he=Y,Y=a)):(he=Y,Y=a),Y}function r4(){var Y,_e,Ie,Dt,ci,Rr,Wn,ug;if(Y=he,(_e=U1())!==a){for(Ie=[],Dt=he,ci=Li(),s.charCodeAt(he)===44?(Rr=m,he++):(Rr=a,Xe===0&&Et(ae)),Rr===a&&(Rr=null),Wn=Li(),(ug=U1())!==a?Dt=ci=[ci,Rr,Wn,ug]:(he=Dt,Dt=a);Dt!==a;)Ie.push(Dt),Dt=he,ci=Li(),s.charCodeAt(he)===44?(Rr=m,he++):(Rr=a,Xe===0&&Et(ae)),Rr===a&&(Rr=null),Wn=Li(),(ug=U1())!==a?Dt=ci=[ci,Rr,Wn,ug]:(he=Dt,Dt=a);Ir=Y,Y=Gr(_e,Ie)}else he=Y,Y=a;return Y}function U1(){var Y,_e;return Y=he,(_e=i4())===a&&(_e=z1())===a&&(_e=s4())===a&&(_e=n4()),_e!==a&&(Ir=Y,_e=_i(_e)),(Y=_e)===a&&(Y=he,(_e=o4())!==a&&(Ir=Y,_e=ve(_e)),Y=_e),Y}function Li(){var Y,_e;for(Xe++,Y=[],U.test(s.charAt(he))?(_e=s.charAt(he),he++):(_e=a,Xe===0&&Et(ye));_e!==a;)Y.push(_e),U.test(s.charAt(he))?(_e=s.charAt(he),he++):(_e=a,Xe===0&&Et(ye));return Xe--,_e=a,Xe===0&&Et(te),Y}function VS(){var Y,_e,Ie;return Xe++,Y=he,(_e=yf())!==a?(s.charCodeAt(he)===40?(Ie=g,he++):(Ie=a,Xe===0&&Et(De)),Ie!==a?(Ir=Y,Y=Ze(_e)):(he=Y,Y=a)):(he=Y,Y=a),Xe--,Y===a&&(_e=a,Xe===0&&Et(Me)),Y}function yf(){var Y,_e,Ie;if(Xe++,Y=he,_e=[],J.test(s.charAt(he))?(Ie=s.charAt(he),he++):(Ie=a,Xe===0&&Et(gt)),Ie!==a)for(;Ie!==a;)_e.push(Ie),J.test(s.charAt(he))?(Ie=s.charAt(he),he++):(Ie=a,Xe===0&&Et(gt));else _e=a;return _e!==a&&(Ir=Y,_e=Ke()),Xe--,(Y=_e)===a&&(_e=a,Xe===0&&Et($e)),Y}function i4(){var Y,_e,Ie;return Xe++,Y=he,Li(),(_e=Hn())!==a?(s.charCodeAt(he)===37?(Ie=b,he++):(Ie=a,Xe===0&&Et(Je)),Ie!==a?(Ir=Y,Y=Ct(_e)):(he=Y,Y=a)):(he=Y,Y=a),Xe--,Y===a&&Xe===0&&Et(dt),Y}function z1(){var Y,_e,Ie;return Xe++,Y=he,Li(),(_e=Hn())!==a?(s.substr(he,2)===w?(Ie=w,he+=2):(Ie=a,Xe===0&&Et(mt)),Ie!==a?(Ir=Y,Y=kt(_e)):(he=Y,Y=a)):(he=Y,Y=a),Y===a&&(Y=he,Li(),(_e=Hn())!==a?(s.substr(he,2)===S?(Ie=S,he+=2):(Ie=a,Xe===0&&Et(zt)),Ie!==a?(Ir=Y,Y=Si(_e)):(he=Y,Y=a)):(he=Y,Y=a),Y===a&&(Y=he,Li(),(_e=Hn())!==a?(s.substr(he,2)===M?(Ie=M,he+=2):(Ie=a,Xe===0&&Et(H)),Ie!==a?(Ir=Y,Y=ns(_e)):(he=Y,Y=a)):(he=Y,Y=a),Y===a&&(Y=he,Li(),(_e=Hn())!==a?(s.substr(he,2)===x?(Ie=x,he+=2):(Ie=a,Xe===0&&Et(G)),Ie!==a?(Ir=Y,Y=la(_e)):(he=Y,Y=a)):(he=Y,Y=a),Y===a&&(Y=he,Li(),(_e=Hn())!==a?(s.substr(he,2)===_?(Ie=_,he+=2):(Ie=a,Xe===0&&Et(re)),Ie!==a?(Ir=Y,Y=Yl(_e)):(he=Y,Y=a)):(he=Y,Y=a),Y===a&&(Y=he,Li(),(_e=Hn())!==a?(s.substr(he,2)===I?(Ie=I,he+=2):(Ie=a,Xe===0&&Et(we)),Ie!==a?(Ir=Y,Y=Za(_e)):(he=Y,Y=a)):(he=Y,Y=a)))))),Xe--,Y===a&&Xe===0&&Et(He),Y}function s4(){var Y,_e,Ie;return Xe++,Y=he,(_e=Hn())!==a?(s.substr(he,3)===E?(Ie=E,he+=3):(Ie=a,Xe===0&&Et(k)),Ie!==a?(Ir=Y,Y=ff(_e)):(he=Y,Y=a)):(he=Y,Y=a),Y===a&&(Y=he,(_e=Hn())!==a?(s.substr(he,3)===A?(Ie=A,he+=3):(Ie=a,Xe===0&&Et(q)),Ie!==a?(Ir=Y,Y=Hh(_e)):(he=Y,Y=a)):(he=Y,Y=a),Y===a&&(Y=he,(_e=Hn())!==a?(s.substr(he,4)===C?(Ie=C,he+=4):(Ie=a,Xe===0&&Et(L)),Ie!==a?(Ir=Y,Y=Kl(_e)):(he=Y,Y=a)):(he=Y,Y=a),Y===a&&(Y=he,(_e=Hn())!==a?(s.substr(he,4)===O?(Ie=O,he+=4):(Ie=a,Xe===0&&Et(V)),Ie!==a?(Ir=Y,Y=F1(_e)):(he=Y,Y=a)):(he=Y,Y=a)))),Xe--,Y===a&&(_e=a,Xe===0&&Et(me)),Y}function n4(){var Y,_e;return Xe++,Y=he,Li(),(_e=Hn())!==a?(Ir=Y,Y=Wh(_e)):(he=Y,Y=a),Xe--,Y===a&&Xe===0&&Et(W),Y}function o4(){var Y,_e,Ie,Dt;if(Xe++,Y=he,s.charCodeAt(he)===35?(_e=R,he++):(_e=a,Xe===0&&Et(se)),_e!==a){if(Ie=[],y.test(s.charAt(he))?(Dt=s.charAt(he),he++):(Dt=a,Xe===0&&Et(le)),Dt!==a)for(;Dt!==a;)Ie.push(Dt),y.test(s.charAt(he))?(Dt=s.charAt(he),he++):(Dt=a,Xe===0&&Et(le));else Ie=a;Ie!==a?(Ir=Y,Y=fc()):(he=Y,Y=a)}else he=Y,Y=a;return Y===a&&(Y=he,(_e=V1())!==a&&(Ir=Y,_e=mc(_e)),(Y=_e)===a&&(Y=he,(_e=yf())!==a&&(Ir=Y,_e=K$()),Y=_e)),Xe--,Y===a&&(_e=a,Xe===0&&Et(Q)),Y}function Hn(){var Y,_e,Ie,Dt,ci,Rr,Wn;for(Y=he,T.test(s.charAt(he))?(s.charAt(he),he++):Xe===0&&Et(ee),_e=he,Ie=[],$.test(s.charAt(he))?(Dt=s.charAt(he),he++):(Dt=a,Xe===0&&Et(ne));Dt!==a;)Ie.push(Dt),$.test(s.charAt(he))?(Dt=s.charAt(he),he++):(Dt=a,Xe===0&&Et(ne));if(s.charCodeAt(he)===46?(Dt=D,he++):(Dt=a,Xe===0&&Et(Oe)),Dt!==a){if(ci=[],$.test(s.charAt(he))?(Rr=s.charAt(he),he++):(Rr=a,Xe===0&&Et(ne)),Rr!==a)for(;Rr!==a;)ci.push(Rr),$.test(s.charAt(he))?(Rr=s.charAt(he),he++):(Rr=a,Xe===0&&Et(ne));else ci=a;ci!==a?_e=Ie=[Ie,Dt,ci]:(he=_e,_e=a)}else he=_e,_e=a;if(_e===a)if(_e=[],$.test(s.charAt(he))?(Ie=s.charAt(he),he++):(Ie=a,Xe===0&&Et(ne)),Ie!==a)for(;Ie!==a;)_e.push(Ie),$.test(s.charAt(he))?(Ie=s.charAt(he),he++):(Ie=a,Xe===0&&Et(ne));else _e=a;if(_e!==a){if(Ie=he,s.charCodeAt(he)===101?(Dt=N,he++):(Dt=a,Xe===0&&Et(ke)),Dt!==a){if(T.test(s.charAt(he))?(ci=s.charAt(he),he++):(ci=a,Xe===0&&Et(ee)),ci===a&&(ci=null),Rr=[],$.test(s.charAt(he))?(Wn=s.charAt(he),he++):(Wn=a,Xe===0&&Et(ne)),Wn!==a)for(;Wn!==a;)Rr.push(Wn),$.test(s.charAt(he))?(Wn=s.charAt(he),he++):(Wn=a,Xe===0&&Et(ne));else Rr=a;Rr!==a?Ie=Dt=[Dt,ci,Rr]:(he=Ie,Ie=a)}else he=Ie,Ie=a;Ie===a&&(Ie=null),Ir=Y,Y=X$()}else he=Y,Y=a;return Y}function a4(Y,_e){return Y.map(function(Ie){return Ie[_e]})}function l4(Y,_e,Ie){return[Y].concat(a4(_e,Ie))}if((o=c())!==a&&he===s.length)return o;throw o!==a&&he<s.length&&Et(Jh()),Q$(j1,Pi<s.length?s.charAt(Pi):null,Pi<s.length?jS(Pi,Pi+1):jS(Pi,Pi))}return e(t,Error),t.prototype.format=function(s){var n="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<s.length;o++)if(s[o].source===this.location.source){a=s[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,u=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(l):l,c=this.location.source+":"+u.line+":"+u.column;if(a){var p=this.location.end,f=r("",u.line.toString().length," "),m=a[l.line-1],g=(l.line===p.line?p.column:m.length+1)-l.column||1;n+=`
 --> `+c+`
`+f+` |
`+u.line+" | "+m+`
`+f+" | "+r("",l.column-1," ")+r("",g,"^")}else n+=`
 at `+c}return n},t.buildMessage=function(s,n){var o={literal:function(m){return'"'+l(m.text)+'"'},class:function(m){var g=m.parts.map(function(b){return Array.isArray(b)?u(b[0])+"-"+u(b[1]):u(b)});return"["+(m.inverted?"^":"")+g.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function a(m){return m.charCodeAt(0).toString(16).toUpperCase()}function l(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function u(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function c(m){return o[m.type](m)}function p(m){var g,b,w=m.map(c);if(w.sort(),w.length>0){for(g=1,b=1;g<w.length;g++)w[g-1]!==w[g]&&(w[b]=w[g],b++);w.length=b}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}function f(m){return m?'"'+l(m)+'"':"end of input"}return"Expected "+p(s)+" but "+f(n)+" found."},{SyntaxError:t,parse:i}},(gU=Vee).exports&&(gU.exports=vU());var sMe=Vee.exports;function Uee(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=bU(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new K("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:bU(r.value)}});t.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!tMe(t[r].effects,t[r+1].effects))throw new K("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});rMe(t[r].effects,t[r+1].effects)}return t.sort((r,i)=>i.scale-r.scale),t}function bU(e){let t;if(!e)return[];try{t=sMe.parse(e)}catch(r){throw new K("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>nMe(r))}function nMe(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return oMe(e);case"opacity":return aMe(e);case"hue-rotate":return lMe(e);case"blur":return uMe(e);case"drop-shadow":return cMe(e);case"bloom":return hMe(e)}}catch(t){throw t.details.filter=e,t}throw new K("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function oMe(e){let t=1;return T1(e.parameters,1),e.parameters.length===1&&(t=Sl(e.parameters[0])),new eL(e.name,t)}function aMe(e){let t=1;return T1(e.parameters,1),e.parameters.length===1&&(t=Sl(e.parameters[0])),new Fee(t)}function lMe(e){let t=0;return T1(e.parameters,1),e.parameters.length===1&&(t=gMe(e.parameters[0])),new Nee(t)}function uMe(e){let t=0;return T1(e.parameters,1),e.parameters.length===1&&(t=t8(e.parameters[0]),sS(t,e.parameters[0])),new Oee(t)}function cMe(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new K("effect:type-error","Accepts only one color",{});r=vMe(i)}else{const s=t8(i);if(Object.isFrozen(t))throw new K("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(s),t.length===3&&sS(s,i)}if(t.length<2||t.length>3)throw new K("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new Lee(t[0],t[1],t[2]||0,r||zee("black"))}function hMe(e){let t=1,r=0,i=0;return T1(e.parameters,3),e.parameters[0]&&(t=Sl(e.parameters[0])),e.parameters[1]&&(r=t8(e.parameters[1]),sS(r,e.parameters[1])),e.parameters[2]&&(i=Sl(e.parameters[2])),new $ee(t,r,i)}function T1(e,t){if(e.length>t)throw new K("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function zA(e){if(e.type==="color")return"<color>";if(e.unit){if(e.unit in e8)return"<length>";if(e.unit in Q6)return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function sS(e,t){if(e<0)throw new K("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function pMe(e){if(e.type!=="quantity"||e.unit!==null)throw new K("effect:type-error",`Expected <double>, Actual: ${zA(e)}`,{term:e})}function dMe(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new K("effect:type-error",`Expected <double> or <percentage>, Actual: ${zA(e)}`,{term:e})}const Q6={deg:1,grad:.9,rad:180/Math.PI,turn:360};function fMe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&Q6[e.unit]!=null))throw new K("effect:type-error",`Expected <angle>, Actual: ${zA(e)}`,{term:e})}const e8={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function mMe(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&e8[e.unit]!=null))throw new K("effect:type-error",`Expected <length>, Actual: ${zA(e)}`,{term:e})}function Sl(e){dMe(e);const t=e.value;return sS(t,e),e.unit==="%"?.01*t:t}function yMe(e){return pMe(e),sS(e.value,e),e.value}function gMe(e){return fMe(e),e.value*Q6[e.unit]||0}function t8(e){return mMe(e),e.value*e8[e.unit]||0}function vMe(e){switch(e.colorType){case"hex":return qme(e.value);case"named":return zee(e.value);case"function":return _Me(e.value)}}function zee(e){if(!cY(e))throw new K("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Bme(e)}const bMe=/^rgba?/i,wMe=/^hsla?/i;function _Me(e){if(T1(e.parameters,4),bMe.test(e.name))return[Sl(e.parameters[0]),Sl(e.parameters[1]),Sl(e.parameters[2]),e.parameters[3]?Sl(e.parameters[3]):1];if(wMe.test(e.name))return hY(yMe(e.parameters[0]),Sl(e.parameters[1]),Sl(e.parameters[2]),e.parameters[3]?Sl(e.parameters[3]):1);throw new K("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function X_(e,t,r){try{return xMe(e)}catch(i){r?.messages?.push(i)}return null}function Q_(e,t,r,i){try{const s=SMe(e);mn(r,s,t)}catch(s){i.messages&&i.messages.push(s)}}function SMe(e){const t=Uee(e);return t?iMe(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:i})=>({scale:r,value:i.map(s=>s.toJSON())})):null}function xMe(e){if(!e||e.length===0)return null;if(MMe(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:wU(r.value)});return t}return wU(e)}function MMe(e){const t=e[0];return!!t&&"scale"in t}function wU(e){if(!e?.length)return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[bc(r,"amount")];break;case"blur":i=[bc(r,"radius","pt")];break;case"hue-rotate":i=[bc(r,"angle","deg")];break;case"drop-shadow":i=[bc(r,"xoffset","pt"),bc(r,"yoffset","pt"),bc(r,"blurRadius","pt"),TMe(r,"color")];break;case"bloom":i=[bc(r,"strength"),bc(r,"radius","pt"),bc(r,"threshold")]}const s=`${r.type}(${i.filter(Boolean).join(" ")})`;Uee(s),t.push(s)}return t.join(" ")}function bc(e,t,r){if(e[t]==null)throw new K("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function TMe(e,t){if(e[t]==null)throw new K("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const IMe={type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}},_U={read:{reader:X_},write:{allowNull:!0,writer:Q_}},EMe={json:{read:!1,write:!1,origins:{"web-map":_U,"portal-item":_U}}},Ky=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return h([d(IMe)],t.prototype,"blendMode",void 0),h([d(EMe)],t.prototype,"effect",void 0),t=h([j("esri.layers.mixins.BlendLayer")],t),t},GA=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return h([d({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=h([j("esri.layers.mixins.CustomParametersMixin")],t),t},AMe="randomUUID"in crypto;function r8(){if(AMe)return crypto.randomUUID();const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16).padStart(4,"0");return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}function Lnt(){return`{${r8().toUpperCase()}}`}function $Me(){return`{${r8()}}`}const CMe=$Me(),Gee=new Map,Bee=new Map;async function knt(e,t,r){if(!e||!r)return!1;if(!t)return!0;const i=new URL(e).host;let s=Gee.get(i);if(!s){const n=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");s=(await Re(n,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return s===t}async function Nnt(e,t,r=!1){if(!e||!t)return!0;const i=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),s=Bee.get(i)?.entries();if(s){for(const[n,o]of s)if(o.name===t){const a=!o.stack?.hasForwardEdits();if(!a&&r){const[{deleteForwardEdits:l},{default:u}]=await Promise.all([fe(()=>import("./deleteForwardEdits-D71bJFCM.js"),__vite__mapDeps([119,1]),import.meta.url),fe(()=>import("./DeleteForwardEditsParameters-COvNhdhP.js"),__vite__mapDeps([120,1]),import.meta.url)]),c=await l(i,n,new u({sessionId:CMe,moment:o.moment}));return c.success&&o.stack?.clearForwardEdits(),c.success}return a}}return!0}function OMe(e,t){if(!e)return!1;const r=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),i=Bee.get(r)?.entries();if(i){for(const[s,n]of i)if(n.name===t)return n.lockType==="edit"}return!1}const i8=new jh.EventEmitter;function PMe(e){return i8.on("apply-edits",new WeakRef(e))}function RMe(e){return i8.on("update-moment",new WeakRef(e))}function Dnt(e,t,r=null,i=!1){const s=ia();return i=t==null||i,i8.emit("apply-edits",{serviceUrl:e,layerId:t,gdbVersion:r,mayReceiveServiceEdits:i,result:s.promise}),s}const qee=Symbol();function Fnt(e){return e!=null&&typeof e=="object"&&qee in e}function rb(e){return e!=null&&typeof e=="object"&&"gdbVersion"in e}function Q4(e,t,r){const i=new URL(e).host,s=Gee.get(i),n=o=>!o||o===s;return n(t)&&n(r)||t===r}const LMe=e=>{var t;let r=class extends e{constructor(...i){super(...i),this[t]=!0,this._applyEditsHandler=s=>{const{serviceUrl:n,layerId:o,gdbVersion:a,mayReceiveServiceEdits:l,result:u}=s,c=n===this.url,p=o!=null&&this.layerId!=null&&o===this.layerId,f=rb(this),m=rb(this)&&Q4(n,a,this.gdbVersion);if(!c||f&&!m||!p&&!l)return;const g=u.then(b=>{if(this.lastEditsEventDate=new Date,p&&(b.addedFeatures.length||b.updatedFeatures.length||b.deletedFeatures.length||b.addedAttachments.length||b.updatedAttachments.length||b.deletedAttachments.length))return this.emit("edits",Z(b)),b;const w=b.editedFeatures?.find(({layerId:M})=>M===this.layerId);if(w){const{adds:M,updates:x,deletes:_}=w.editedFeatures,I={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:M?M.map(({attributes:E})=>({objectId:this.objectIdField&&E[this.objectIdField],globalId:this.globalIdField&&E[this.globalIdField]})):[],deletedFeatures:_?_.map(({attributes:E})=>({objectId:this.objectIdField&&E[this.objectIdField],globalId:this.globalIdField&&E[this.globalIdField]})):[],updatedFeatures:x?x.map(({current:{attributes:E}})=>({objectId:this.objectIdField&&E[this.objectIdField],globalId:this.globalIdField&&E[this.globalIdField]})):[],editedFeatures:Z(b.editedFeatures),exceededTransferLimit:!1,historicMoment:Z(b.historicMoment)};return this.emit("edits",I),I}const S={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:Z(b.editedFeatures),exceededTransferLimit:!1,historicMoment:Z(b.historicMoment)};return"historicMoment"in this&&this._shouldUpdateHistoricMoment(n,a,S.historicMoment)&&this.emit("edits",S),S}).then(b=>("historicMoment"in this&&this._shouldUpdateHistoricMoment(n,a,b.historicMoment)&&(this.historicMoment=b.historicMoment),b));this.emit("apply-edits",{result:g})},this._updateMomentHandler=s=>{const{serviceUrl:n,gdbVersion:o,moment:a}=s,l=n===this.url,u=rb(this),c=rb(this)&&Q4(n,o,this.gdbVersion),p=rb(this)&&!Q4(n,this.gdbVersion,null);l&&u&&c&&p&&"historicMoment"in this&&this.historicMoment!==a&&(this.historicMoment=a)},this.when().then(()=>{this.addHandles(PMe(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(RMe(this._updateMomentHandler))},()=>{})}_shouldUpdateHistoricMoment(i,s,n){return"historicMoment"in this&&this.historicMoment!==n&&OMe(i,s)}};return t=qee,h([d()],r.prototype,"lastEditsEventDate",void 0),r=h([j("esri.layers.mixins.EditBusLayer")],r),r};var tL;let yh=tL=class extends ue{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new tL({mapLayerId:e,gdbVersion:t})}};h([We({mapLayer:"map-layer"})],yh.prototype,"type",void 0),h([d({type:St,json:{write:!0}})],yh.prototype,"mapLayerId",void 0),h([d({type:String,json:{write:!0}})],yh.prototype,"gdbVersion",void 0),yh=tL=h([j("esri.layers.support.source.MapLayerSource")],yh);var rL;let Fc=rL=class extends ue{constructor(e){super(e),this.type="query-table"}clone(){const{workspaceId:e,query:t,oidFields:r,spatialReference:i,geometryType:s}=this,n={workspaceId:e,query:t,oidFields:r,spatialReference:i?.clone()??void 0,geometryType:s};return new rL(n)}};h([We({queryTable:"query-table"})],Fc.prototype,"type",void 0),h([d({type:String,json:{write:!0}})],Fc.prototype,"workspaceId",void 0),h([d({type:String,json:{write:!0}})],Fc.prototype,"query",void 0),h([d({type:String,json:{write:!0}})],Fc.prototype,"oidFields",void 0),h([d({type:Fe,json:{write:!0}})],Fc.prototype,"spatialReference",void 0),h([We(oI)],Fc.prototype,"geometryType",void 0),Fc=rL=h([j("esri.layers.support.source.QueryTableDataSource")],Fc);var iL;let Hg=iL=class extends ue{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new iL({workspaceId:e,dataSourceName:t})}};h([We({raster:"raster"})],Hg.prototype,"type",void 0),h([d({type:String,json:{write:!0}})],Hg.prototype,"dataSourceName",void 0),h([d({type:String,json:{write:!0}})],Hg.prototype,"workspaceId",void 0),Hg=iL=h([j("esri.layers.support.source.RasterDataSource")],Hg);var sL;let um=sL=class extends ue{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new sL({workspaceId:e,gdbVersion:t,dataSourceName:r})}};h([We({table:"table"})],um.prototype,"type",void 0),h([d({type:String,json:{write:!0}})],um.prototype,"workspaceId",void 0),h([d({type:String,json:{write:!0}})],um.prototype,"gdbVersion",void 0),h([d({type:String,json:{write:!0}})],um.prototype,"dataSourceName",void 0),um=sL=h([j("esri.layers.support.source.TableDataSource")],um);var nL,oL;const kMe=Oi()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Lo=nL=class extends ue{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return SU()(e,t,r)}castLeftTableSource(e){return Zu(aL(),e)}readRightTableSource(e,t,r){return SU()(e,t,r)}castRightTableSource(e){return Zu(aL(),e)}clone(){const{leftTableKey:e,rightTableKey:t,leftTableSource:r,rightTableSource:i,joinType:s}=this,n={leftTableKey:e,rightTableKey:t,leftTableSource:r?.clone()??void 0,rightTableSource:i?.clone()??void 0,joinType:s};return new nL(n)}};h([We({joinTable:"join-table"})],Lo.prototype,"type",void 0),h([d({type:String,json:{write:!0}})],Lo.prototype,"leftTableKey",void 0),h([d({type:String,json:{write:!0}})],Lo.prototype,"rightTableKey",void 0),h([d({json:{write:!0}})],Lo.prototype,"leftTableSource",void 0),h([pe("leftTableSource")],Lo.prototype,"readLeftTableSource",null),h([Zt("leftTableSource")],Lo.prototype,"castLeftTableSource",null),h([d({json:{write:!0}})],Lo.prototype,"rightTableSource",void 0),h([pe("rightTableSource")],Lo.prototype,"readRightTableSource",null),h([Zt("rightTableSource")],Lo.prototype,"castRightTableSource",null),h([We(kMe)],Lo.prototype,"joinType",void 0),Lo=nL=h([j("esri.layers.support.source.JoinTableDataSource")],Lo);let e5=null;function SU(){return e5||(e5=u1({types:aL()})),e5}let t5=null;function aL(){return t5||(t5={key:"type",base:null,typeMap:{"data-layer":kn,"map-layer":yh}}),t5}const NMe={key:"type",base:null,typeMap:{"join-table":Lo,"query-table":Fc,raster:Hg,table:um}};let kn=oL=class extends ue{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new oL({fields:e,dataSource:t})}};h([We({dataLayer:"data-layer"})],kn.prototype,"type",void 0),h([d({type:[Uo],json:{write:!0}})],kn.prototype,"fields",void 0),h([d({types:NMe,json:{write:!0}})],kn.prototype,"dataSource",void 0),kn=oL=h([j("esri.layers.support.source.DataLayerSource")],kn),kn.from=ni(kn);let cm=class extends Yt(ue){constructor(t){super(t),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};h([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.onFields!=null&&this.onFields.length>0}}}}})],cm.prototype,"onFields",void 0),h([d({type:String,json:{write:!0}})],cm.prototype,"operator",void 0),h([d({type:String,json:{write:!0}})],cm.prototype,"searchTerm",void 0),h([d({type:String,json:{write:!0}})],cm.prototype,"searchType",void 0),cm=h([j("esri.rest.support.FullTextSearch")],cm);const DMe=cm;var lL;const xU=new wt({upperLeft:"upper-left",lowerLeft:"lower-left"});let hm=lL=class extends ue{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new lL(Z({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};h([d({type:yt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],hm.prototype,"extent",void 0),h([d({type:["view","edit"],json:{write:!0}})],hm.prototype,"mode",void 0),h([d({type:String,json:{read:xU.read,write:xU.write}})],hm.prototype,"originPosition",void 0),h([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],hm.prototype,"tolerance",void 0),hm=lL=h([j("esri.rest.support.QuantizationParameters")],hm);const Hee=hm,Wee=new wt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"});var uL;const MU=new wt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let pl=uL=class extends ue{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=Z(e))}clone(){return new uL({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:Z(this.statisticParameters)})}};h([d({type:Number,json:{write:!0}})],pl.prototype,"maxPointCount",void 0),h([d({type:Number,json:{write:!0}})],pl.prototype,"maxRecordCount",void 0),h([d({type:Number,json:{write:!0}})],pl.prototype,"maxVertexCount",void 0),h([d({type:String,json:{write:!0}})],pl.prototype,"onStatisticField",void 0),h([d({type:String,json:{write:!0}})],pl.prototype,"outStatisticFieldName",void 0),h([d({type:String,json:{read:{source:"statisticType",reader:MU.read},write:{target:"statisticType",writer:MU.write}}})],pl.prototype,"statisticType",void 0),h([d({type:Object})],pl.prototype,"statisticParameters",void 0),h([ge("statisticParameters")],pl.prototype,"writeStatisticParameters",null),pl=uL=h([j("esri.rest.support.StatisticDefinition")],pl);const FMe=pl;var RT;const jMe=new wt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let lt=RT=class extends ue{static from(e){return zr(RT,e)}constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const s=e[i];Array.isArray(s)?r[i]=s.map(n=>n instanceof Date?n.getTime():n):s instanceof Date?r[i]=s.getTime():r[i]=s}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new RT(Z({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,formatOf3DObjects:this.formatOf3DObjects,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment!=null?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};lt.MAX_MAX_RECORD_COUNT_FACTOR=5,h([d({json:{write:!0}})],lt.prototype,"aggregateIds",void 0),h([d({type:Boolean,json:{write:!0}})],lt.prototype,"cacheHint",void 0),h([d({type:Boolean,json:{default:!1,write:!0}})],lt.prototype,"compactGeometryEnabled",void 0),h([d({json:{write:!0}})],lt.prototype,"datumTransformation",void 0),h([Zt("datumTransformation")],lt.prototype,"castDatumTransformation",null),h([d({type:Boolean,json:{default:!1,write:!0}})],lt.prototype,"defaultSpatialReferenceEnabled",void 0),h([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],lt.prototype,"distance",void 0),h([d({type:kn,json:{write:!0}})],lt.prototype,"dynamicDataSource",void 0),h([d({type:String,json:{write:!0}})],lt.prototype,"formatOf3DObjects",void 0),h([d({type:[DMe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.fullText!=null&&this.fullText.length>0}}}}})],lt.prototype,"fullText",void 0),h([d({type:String,json:{write:!0}})],lt.prototype,"gdbVersion",void 0),h([d({types:Ss,json:{read:bi,write:!0}})],lt.prototype,"geometry",void 0),h([d({type:Number,json:{write:!0}})],lt.prototype,"geometryPrecision",void 0),h([d({type:[String],json:{write:!0}})],lt.prototype,"groupByFieldsForStatistics",void 0),h([d({type:String,json:{write:!0}})],lt.prototype,"having",void 0),h([d({type:Date})],lt.prototype,"historicMoment",void 0),h([ge("historicMoment")],lt.prototype,"writeHistoricMoment",null),h([d({type:Number,json:{write:!0}})],lt.prototype,"maxAllowableOffset",void 0),h([d({type:Number,cast:e=>e<1?1:e>lt.MAX_MAX_RECORD_COUNT_FACTOR?lt.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],lt.prototype,"maxRecordCountFactor",void 0),h([d({type:["xyFootprint"],json:{write:!0}})],lt.prototype,"multipatchOption",void 0),h([d({type:Number,json:{read:{source:"resultRecordCount"}}})],lt.prototype,"num",void 0),h([d({json:{write:!0}})],lt.prototype,"objectIds",void 0),h([d({type:[String],json:{write:!0}})],lt.prototype,"orderByFields",void 0),h([d({type:[String],json:{write:!0}})],lt.prototype,"outFields",void 0),h([d({type:Fe,json:{name:"outSR",write:!0}})],lt.prototype,"outSpatialReference",void 0),h([d({type:[FMe],json:{write:{enabled:!0,overridePolicy(){return{enabled:this.outStatistics!=null&&this.outStatistics.length>0}}}}})],lt.prototype,"outStatistics",void 0),h([d({json:{write:!0}})],lt.prototype,"parameterValues",void 0),h([ge("parameterValues")],lt.prototype,"writeParameterValues",null),h([d({type:je,json:{write:!0}})],lt.prototype,"pixelSize",void 0),h([d({type:Hee,json:{write:!0}})],lt.prototype,"quantizationParameters",void 0),h([d({type:[Object],json:{write:!0}})],lt.prototype,"rangeValues",void 0),h([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],lt.prototype,"relationParameter",void 0),h([d({type:String,json:{write:!0}})],lt.prototype,"resultType",void 0),h([d({type:Boolean,json:{default:!1,write:!0}})],lt.prototype,"returnCentroid",void 0),h([d({type:Boolean,json:{default:!1,write:!0}})],lt.prototype,"returnDistinctValues",void 0),h([d({type:Boolean,json:{default:!0,write:!0}})],lt.prototype,"returnExceededLimitFeatures",void 0),h([d({type:Boolean,json:{write:!0}})],lt.prototype,"returnGeometry",void 0),h([d({type:Boolean,json:{default:!1,write:!0}})],lt.prototype,"returnQueryGeometry",void 0),h([d({type:Boolean,json:{default:!1,write:!0}})],lt.prototype,"returnM",void 0),h([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],lt.prototype,"returnZ",void 0),h([d({type:Fe,json:{write:!0}})],lt.prototype,"sourceSpatialReference",void 0),h([We(Wee,{ignoreUnknown:!1,name:"spatialRel"})],lt.prototype,"spatialRelationship",void 0),h([d({type:Number,json:{read:{source:"resultOffset"}}})],lt.prototype,"start",void 0),h([ge("start"),ge("num")],lt.prototype,"writeStart",null),h([d({type:String,json:{write:!0}})],lt.prototype,"sqlFormat",void 0),h([d({type:String,json:{write:!0}})],lt.prototype,"text",void 0),h([d({type:Bn,json:{write:!0}})],lt.prototype,"timeExtent",void 0),h([d({type:Boolean,json:{default:!1,write:!0}})],lt.prototype,"timeReferenceUnknownClient",void 0),h([We(jMe,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(e){return{enabled:!!e&&this.distance!=null&&this.distance>0}}}}})],lt.prototype,"units",void 0),h([d({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start!=null&&this.start>0}}}}})],lt.prototype,"where",void 0),h([ge("where")],lt.prototype,"writeWhere",null),lt=RT=h([j("esri.rest.support.Query")],lt);const Ci=lt;var cL;const r5=new wt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),i5=new wt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let pu=cL=class extends ue{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:s,objectIds:n,units:o,distance:a}=this;return new Ci({geometry:Z(r),objectIds:Z(n),spatialRelationship:i,timeExtent:Z(s),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:s,units:n,distance:o}=this;return new cL({geometry:Z(t),objectIds:Z(s),spatialRelationship:r,timeExtent:Z(i),where:e,units:n,distance:o})}};h([d({type:String,json:{write:!0}})],pu.prototype,"where",void 0),h([d({types:Ss,json:{write:!0}})],pu.prototype,"geometry",void 0),h([d({type:r5.apiValues,json:{name:"spatialRel",read:{reader:r5.read},write:{allowNull:!1,writer:r5.write,overridePolicy(){return{enabled:this.geometry!=null}}}}})],pu.prototype,"spatialRelationship",void 0),h([d({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],pu.prototype,"distance",void 0),h([d({type:[Number],json:{write:!0}})],pu.prototype,"objectIds",void 0),h([d({type:i5.apiValues,json:{read:i5.read,write:{writer:i5.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],pu.prototype,"units",void 0),h([d({type:Bn,json:{write:!0}})],pu.prototype,"timeExtent",void 0),pu=cL=h([j("esri.layers.support.FeatureFilter")],pu);const Jee=pu;var hL;const TU={read:{reader:X_},write:{writer:Q_,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},IU={read:{reader:X_},write:{writer:Q_,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},EU={name:"showExcludedLabels",default:!0};let pm=hL=class extends ue{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const r=super.write(e,t);if(t?.origin){if(r.filter){const i=Object.keys(r.filter);if(i.length>1||i[0]!=="where")return t.messages?.push(new K("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}if("showExcludedLabels"in r)return t.messages?.push(new K("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new hL({filter:this.filter!=null?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};h([d({type:Jee,json:{write:{allowNull:!0,writer(e,t,r,i){const s=e?.write({},i);s&&Object.keys(s).length!==0?mn(r,s,t):mn(r,null,t)}}}})],pm.prototype,"filter",void 0),h([d({json:{read:X_,write:{writer:Q_,allowNull:!0},origins:{"web-map":TU,"portal-item":TU}}})],pm.prototype,"includedEffect",void 0),h([d({json:{read:X_,write:{writer:Q_,allowNull:!0},origins:{"web-map":IU,"portal-item":IU}}})],pm.prototype,"excludedEffect",void 0),h([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":EU,"portal-item":EU}}})],pm.prototype,"excludedLabelsVisible",void 0),pm=hL=h([j("esri.layers.support.FeatureEffect")],pm);const VMe=pm,AU={write:{allowNull:!0}},UMe={type:VMe,json:{origins:{"web-map":AU,"portal-item":AU}}},zMe=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return h([d(UMe)],t.prototype,"featureEffect",void 0),t=h([j("esri.layers.mixins.FeatureEffectLayer")],t),t};var ow;const bI=Oi()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Zee=bI.jsonValues.slice();Vce(Zee,"orthometric");const Yw=Oi()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let dl=ow=class extends ue{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return bI.write(e,t,r)}readHeightModel(e,t,r){return bI.read(e)||(r?.messages&&r.messages.push(GMe(e,{context:r})),null)}readHeightUnit(e,t,r){return Yw.read(e)||(r?.messages&&r.messages.push($U(e,{context:r})),null)}readHeightUnitService(e,t,r){return qZ(e)||Yw.read(e)||(r?.messages&&r.messages.push($U(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new ow({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=Pfe(t);return new ow({heightModel:e.heightModel,heightUnit:r??void 0,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new ow;return t.read(e,{origin:"web-scene"}),t}};function $U(e,t){return new sa("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function GMe(e,t){return new sa("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}h([d({type:bI.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Zee,default:"ellipsoidal"}}}})],dl.prototype,"heightModel",void 0),h([ge("web-scene","heightModel")],dl.prototype,"writeHeightModel",null),h([pe(["web-scene","service"],"heightModel")],dl.prototype,"readHeightModel",null),h([d({type:Yw.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Yw.jsonValues,write:Yw.write}}}})],dl.prototype,"heightUnit",void 0),h([pe("web-scene","heightUnit")],dl.prototype,"readHeightUnit",null),h([pe("service","heightUnit")],dl.prototype,"readHeightUnitService",null),h([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],dl.prototype,"vertCRS",void 0),h([pe("service","vertCRS",["vertCRS","ellipsoid","geoid"])],dl.prototype,"readVertCRS",null),dl=ow=h([j("esri.geometry.HeightModelInfo")],dl);const BA=dl;var pL;let aw=pL=class extends ue{constructor(e){super(e)}async collectRequiredFields(e,t){return yn(e,t,this.expression)}clone(){return new pL({expression:this.expression,title:this.title})}equals(e){return this.expression===e.expression&&this.title===e.title}};h([d({type:String,json:{write:!0}})],aw.prototype,"expression",void 0),h([d({type:String,json:{write:!0}})],aw.prototype,"title",void 0),aw=pL=h([j("esri.symbols.support.FeatureExpressionInfo")],aw);const CU=aw;function Vnt(e){return 1/(k6[e]||1)}function BMe(){const e=Object.keys(k6);return e.sort(),e}const qMe=BMe();var dL;const wx=Oi()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),OU=new wt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let jc=dL=class extends ue{constructor(e){super(e),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):e!=null||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new dL({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(e){return this.mode===e.mode&&this.offset===e.offset&&this.unit===e.unit&&ahe(this.featureExpressionInfo,e.featureExpressionInfo)}};h([d({type:CU,json:{write:!0}})],jc.prototype,"featureExpressionInfo",void 0),h([pe("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],jc.prototype,"readFeatureExpressionInfo",null),h([ge("featureExpressionInfo",{featureExpressionInfo:{type:CU},"featureExpression.value":{type:[0]}})],jc.prototype,"writeFeatureExpressionInfo",null),h([d({type:wx.apiValues,nonNullable:!0,json:{type:wx.jsonValues,read:wx.read,write:{writer:wx.write,isRequired:!0}}})],jc.prototype,"mode",null),h([d({type:Number,json:{write:!0}})],jc.prototype,"offset",void 0),h([d({type:qMe,json:{type:String,read:OU.read,write:OU.write}})],jc.prototype,"unit",null),jc=dL=h([j("esri.symbols.support.ElevationInfo")],jc);const Yee=jc,HMe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:{enabled:!0,layerContainerTypes:gs}}},nS={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},s8={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:{enabled:!0,layerContainerTypes:gs}}},oS={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:My}}},n8={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:{enabled:!0,layerContainerTypes:gs}}},WMe={value:null,type:Yee,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:{enabled:!0,layerContainerTypes:gs}}};function Unt(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Kee={write:{enabled:!0,layerContainerTypes:gs},read:!0},wI={type:Number,json:{origins:{"web-document":Kee,"portal-item":{write:!0}}}},JMe={...wI,json:{...wI.json,origins:{"web-document":{...Kee,write:{enabled:!0,layerContainerTypes:gs,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition?.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?q_(t.layerDefinition.drawingInfo.transparency):void 0:q_(t.drawingInfo.transparency)}}},znt={type:yt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=yt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=Fe.fromJSON(t.spatialReference)),r}}}},read:!1}},Xee={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},ZMe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.minScale",write:{enabled:!0,layerContainerTypes:gs}}},name:"layerDefinition.minScale",write:!0}},YMe={type:Number,json:{origins:{service:{write:{enabled:!1}},"web-scene":{name:"layerDefinition.maxScale",write:{enabled:!0,layerContainerTypes:gs}}},name:"layerDefinition.maxScale",write:!0}},Qee={json:{write:{ignoreOrigin:!0,layerContainerTypes:gs},origins:{"web-map":{read:!1,write:!1}}}};let Vc=class extends Yt(ue){constructor(t){super(t),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};h([d()],Vc.prototype,"creatorField",void 0),h([d()],Vc.prototype,"creationDateField",void 0),h([d()],Vc.prototype,"editorField",void 0),h([d()],Vc.prototype,"editDateField",void 0),h([d()],Vc.prototype,"realm",void 0),h([d($v("dateFieldsTimeReference",!0))],Vc.prototype,"timeZone",void 0),Vc=h([j("esri.layers.support.EditFieldsInfo")],Vc);const KMe=Vc;let Su=class extends Yt(ue){constructor(t){super(t)}};h([d({constructOnly:!0,json:{write:!0}})],Su.prototype,"name",void 0),h([d({constructOnly:!0,json:{write:!0}})],Su.prototype,"fields",void 0),h([d({constructOnly:!0,json:{write:!0}})],Su.prototype,"isAscending",void 0),h([d({constructOnly:!0,json:{write:!0}})],Su.prototype,"indexType",void 0),h([d({constructOnly:!0,json:{write:!0}})],Su.prototype,"isUnique",void 0),h([d({constructOnly:!0,json:{write:!0}})],Su.prototype,"description",void 0),Su=h([j("esri.layers.support.FeatureIndex")],Su);async function XMe(e,t,r){t=t.clone(),e.capabilities.query.supportsMaxRecordCountFactor&&(t.maxRecordCountFactor=ete(e));const i=QMe(e),s=e.capabilities.query.supportsPagination;t.start=0,t.num=i;let n=null;for(;;){const o=await e.source.queryFeaturesJSON(t,r);if(n==null?n=o:n.features=n.features.concat(o.features),n.exceededTransferLimit=o.exceededTransferLimit,!s||!o.exceededTransferLimit)break;t.start+=i}return n}function QMe(e){return ete(e)*eTe(e)}function eTe(e){return e.capabilities.query.maxRecordCount||2e3}function ete(e){return e.capabilities.query.supportsMaxRecordCountFactor?Ci.MAX_MAX_RECORD_COUNT_FACTOR:1}var fL;let hs=fL=class extends ue{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new fL(Z({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};h([d({type:[String],json:{write:!0}})],hs.prototype,"attachmentTypes",void 0),h([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],hs.prototype,"attachmentsWhere",void 0),h([d({type:Boolean,json:{write:!0}})],hs.prototype,"cacheHint",void 0),h([d({type:[String],json:{write:!0}})],hs.prototype,"keywords",void 0),h([d({type:[Number],json:{write:!0}})],hs.prototype,"globalIds",void 0),h([d({json:{write:!0}})],hs.prototype,"name",void 0),h([d({type:Number,json:{read:{source:"resultRecordCount"}}})],hs.prototype,"num",void 0),h([d({type:[Number],json:{write:!0}})],hs.prototype,"objectIds",void 0),h([d({type:Boolean,json:{default:!1,write:!0}})],hs.prototype,"returnMetadata",void 0),h([d({type:[Number],json:{write:!0}})],hs.prototype,"size",void 0),h([d({type:Number,json:{read:{source:"resultOffset"}}})],hs.prototype,"start",void 0),h([ge("start"),ge("num")],hs.prototype,"writeStart",null),h([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],hs.prototype,"where",void 0),hs=fL=h([j("esri.rest.support.AttachmentQuery")],hs),hs.from=ni(hs);const tte=hs;var mL;let qr=mL=class extends ue{constructor(e){super(e),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new mL(Z({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};h([d({type:Boolean,json:{write:!0}})],qr.prototype,"cacheHint",void 0),h([d({type:kn,json:{write:!0}})],qr.prototype,"dynamicDataSource",void 0),h([d({type:String,json:{write:!0}})],qr.prototype,"gdbVersion",void 0),h([d({type:Number,json:{write:!0}})],qr.prototype,"geometryPrecision",void 0),h([d({type:Date})],qr.prototype,"historicMoment",void 0),h([ge("historicMoment")],qr.prototype,"_writeHistoricMoment",null),h([d({type:Number,json:{write:!0}})],qr.prototype,"maxAllowableOffset",void 0),h([d({json:{write:!0}})],qr.prototype,"objectIds",void 0),h([d({type:[String],json:{write:!0}})],qr.prototype,"orderByFields",void 0),h([d({type:[String],json:{write:!0}})],qr.prototype,"outFields",void 0),h([d({type:Fe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],qr.prototype,"outSpatialReference",void 0),h([d({json:{write:!0}})],qr.prototype,"relationshipId",void 0),h([d({type:Number,json:{read:{source:"resultOffset"}}})],qr.prototype,"start",void 0),h([ge("start"),ge("num")],qr.prototype,"writeStart",null),h([d({type:Number,json:{read:{source:"resultRecordCount"}}})],qr.prototype,"num",void 0),h([d({json:{write:!0}})],qr.prototype,"returnGeometry",void 0),h([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],qr.prototype,"returnM",void 0),h([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],qr.prototype,"returnZ",void 0),h([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],qr.prototype,"where",void 0),qr=mL=h([j("esri.rest.support.RelationshipQuery")],qr),qr.from=ni(qr);const o8=qr,PU=Object.freeze(Object.defineProperty({__proto__:null,default:o8},Symbol.toStringTag,{value:"Module"})),yL=new wt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function tTe(e,t,r,i){const s=await Qd(e);if(await a8(e,t,i),!s.addAttachment)throw new K(i,"Layer source does not support addAttachment capability");return s.addAttachment(t,r)}function a8(e,t,r){const{attributes:i}=t,{objectIdField:s}=e;return e.capabilities?.data?.supportsAttachment?t?i?s&&i[s]?Promise.resolve():Promise.reject(new K(r,`feature is missing the identifying attribute ${s}`)):Promise.reject(new K(r,"'attributes' are required on a feature to query attachments")):Promise.reject(new K(r,"A feature is required to add/delete/update attachments")):Promise.reject(new K(r,"this layer doesn't support attachments"))}async function rTe(e,t,r,i,s){const n=await Qd(e);if(await a8(e,t,s),!n.updateAttachment)throw new K(s,"Layer source does not support updateAttachment capability");return n.updateAttachment(t,r,i)}async function iTe(e,t,r){const{applyEdits:i}=await fe(()=>import("./editingSupport-D8aB9y34.js"),__vite__mapDeps([121,1]),import.meta.url),s=await e.load();let n=r;return s.type==="feature"&&s.infoFor3D&&t.deleteFeatures!=null&&s.globalIdField!=null&&(n={...n,globalIdToObjectId:await _Te(s,t.deleteFeatures,s.globalIdField)}),i(s,s.source,t,r)}async function sTe(e,t,r){const{uploadAssets:i}=await fe(()=>import("./editingSupport-D8aB9y34.js"),__vite__mapDeps([121,1]),import.meta.url),s=await e.load();return i(s,s.source,t,r)}async function nTe(e,t,r,i){const s=await Qd(e);if(await a8(e,t,i),!s.deleteAttachments)throw new K(i,"Layer source does not support deleteAttachments capability");return s.deleteAttachments(t,r)}async function oTe(e,t,r){const i=(await e.load({signal:t?.signal})).source;if(!i.fetchRecomputedExtents)throw new K(r,"Layer source does not support fetchUpdates capability");return i.fetchRecomputedExtents(t)}async function aTe(e,t,r,i){t=tte.from(t),await e.load();const s=e.source,n=e.capabilities;if(!n?.data?.supportsAttachment)throw new K(i,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:u,size:c,start:p,where:f}=t;if(!n?.operations?.supportsQueryAttachments&&(o?.length>0||l?.length>0||c?.length>0||u||p||f))throw new K(i,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);if(!(a?.length||l?.length||f))throw new K(i,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);if(!s.queryAttachments)throw new K(i,"Layer source does not support queryAttachments capability",t);return s.queryAttachments(t)}async function lTe(e,t,r,i){const s=await Qd(e);if(!s.queryObjectIds)throw new K(i,"Layer source does not support queryObjectIds capability");return s.queryObjectIds(Ci.from(t)??e.createQuery(),r)}async function uTe(e,t,r,i){const s=await Qd(e);if(!s.queryFeatureCount)throw new K(i,"Layer source does not support queryFeatureCount capability");return s.queryFeatureCount(Ci.from(t)??e.createQuery(),r)}async function cTe(e,t,r,i){const s=await Qd(e);if(!s.queryExtent)throw new K(i,"Layer source does not support queryExtent capability");return s.queryExtent(Ci.from(t)??e.createQuery(),r)}async function hTe(e,t,r,i){const s=await Qd(e);if(!s.queryRelatedFeatures)throw new K(i,"Layer source does not support queryRelatedFeatures capability");return s.queryRelatedFeatures(o8.from(t),r)}async function pTe(e,t,r,i){const s=await Qd(e);if(!s.queryRelatedFeaturesCount)throw new K(i,"Layer source does not support queryRelatedFeaturesCount capability");return s.queryRelatedFeaturesCount(o8.from(t),r)}async function dTe(e){const t=e.source;if(t?.refresh)try{const{dataChanged:r,updates:i}=await t.refresh();if(i!=null&&(e.sourceJSON={...e.sourceJSON,...i},e.read(i,{origin:"service",url:e.parsedUrl})),r)return!0}catch{}if(e.definitionExpression)try{return(await XY(e.definitionExpression,e.fieldsIndex)).hasDateFunctions}catch{}return!1}function fTe(e){const t=new Ci,r=e.capabilities?.data,i=e.capabilities?.query;t.historicMoment=e.historicMoment,t.gdbVersion=e.gdbVersion,t.returnGeometry=!0,i&&(t.compactGeometryEnabled=i.supportsCompactGeometry,t.defaultSpatialReferenceEnabled=i.supportsDefaultSpatialReference),r&&(r.supportsZ&&e.returnZ!=null&&(t.returnZ=e.returnZ),r.supportsM&&e.returnM!=null&&(t.returnM=e.returnM)),t.outFields=["*"];const{timeOffset:s,timeExtent:n}=e;return t.timeExtent=s!=null&&n!=null?n.offset(-s.value,s.unit):n||null,t.multipatchOption=e.geometryType==="multipatch"?"xyFootprint":null,t}function rte(e){const{globalIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeGlobalID")return i.name}}function ite(e){const{objectIdField:t,fields:r}=e;if(t)return t;if(r){for(const i of r)if(i.type==="esriFieldTypeOID")return i.name}}function mTe(e){return e.currentVersion?e.currentVersion:e.hasOwnProperty("capabilities")||e.hasOwnProperty("drawingInfo")||e.hasOwnProperty("hasAttachments")||e.hasOwnProperty("htmlPopupType")||e.hasOwnProperty("relationships")||e.hasOwnProperty("timeInfo")||e.hasOwnProperty("typeIdField")||e.hasOwnProperty("types")?10:9.3}function yTe(e,t){const{subtypes:r,subtypeField:i}=e;if(!t||!r?.length||!i)return null;const s=t.attributes[i];return s==null?null:r.find(n=>n.code===s)}async function Qd(e){return(await e.load()).source}async function gTe(e,t){if(!sr||sr.findCredential(e))return;let r;try{const i=await uY(e,t);i&&(r=await sr.checkSignInStatus(`${i}/sharing`))}catch{}if(r)try{const i=t!=null?t.signal:null;await sr.getCredential(e,{signal:i})}catch{}}async function vTe(e,t,r){const i=e.parsedUrl?.path;i&&e.authenticationTriggerEvent===t&&await gTe(i,r)}function bTe(e){return!LT(e)&&(e.userHasUpdateItemPrivileges||e.editingEnabled)}const s5=u1({types:iQ});function l8(e,t){if(e.defaultSymbol)return e.types?.length?new M1({defaultSymbol:s5(e.defaultSymbol,e,t),field:e.typeIdField,uniqueValueInfos:e.types.map(r=>({id:r.id,symbol:s5(r.symbol,r,t)}))}):new Zy({symbol:s5(e.defaultSymbol,e,t)})}function wTe(e){let t=e.sourceJSON?.cacheMaxAge;if(!t)return!1;const r=e.editingInfo?.lastEditDate?.getTime();return r==null||(t*=1e3,Date.now()-r<t)}async function _Te(e,t,r){if(t==null)return null;const i=[],{objectIdField:s}=e;if(t.forEach(u=>{let c=null;if("attributes"in u){const{attributes:p}=u;c={globalId:p[r],objectId:p[s]!=null&&p[s]!==-1?p[s]:null}}else c={globalId:u.globalId,objectId:u.objectId!=null&&u.objectId!==-1?u.objectId:null};c.globalId!=null&&(c.objectId!=null&&c.objectId!==-1||i.push(c.globalId))}),i.length===0)return null;const n=e.createQuery();n.where=i.map(u=>`${r}='${u}'`).join(" OR "),n.returnGeometry=!1,n.outFields=[s,r],n.cacheHint=!1;const o=await lfe(XMe(e,n));if(!o.ok)return null;const a=new Map,l=o.value.features;for(const u of l){const c=u.attributes[r],p=u.attributes[s];c!=null&&p!=null&&p!==-1&&a.set(c,p)}return a}function ste(e,t,r){if(!t||!r||!e)return null;const i=r.getAttribute(t);return i==null?null:e.find(s=>{const{id:n}=s;return n!=null&&n.toString()===i.toString()})??null}function LT(e){return e.sourceJSON?.isMultiServicesView||STe(e)}function STe(e){return!!e.sourceJSON?.capabilities?.toLowerCase().split(",").map(t=>t.trim()).includes("map")}let Wg=class extends Yt(ue){constructor(t){super(t),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};h([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],Wg.prototype,"shapeAreaField",void 0),h([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],Wg.prototype,"shapeLengthField",void 0),h([d({type:String,json:{read:e=>V_.read(e)||Ph.read(e)}})],Wg.prototype,"units",void 0),Wg=h([j("esri.layers.support.GeometryFieldsInfo")],Wg);const xTe=Wg;var gL;let Jg=gL=class extends ue{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new qe}clone(){return new gL({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};h([d({type:String,json:{write:!0}})],Jg.prototype,"floorField",void 0),h([d({json:{read:!1,write:!1}})],Jg.prototype,"viewAllMode",void 0),h([d({json:{read:!1,write:!1}})],Jg.prototype,"viewAllLevelIds",void 0),Jg=gL=h([j("esri.layers.support.LayerFloorInfo")],Jg);const nte=Jg,RU=new wt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),LU=new wt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let _a=class extends Yt(ue){constructor(t){super(t),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};h([d({json:{read:RU.read,write:RU.write}})],_a.prototype,"cardinality",void 0),h([d({json:{read:!0,write:!0}})],_a.prototype,"composite",void 0),h([d({json:{read:!0,write:!0}})],_a.prototype,"id",void 0),h([d({json:{read:!0,write:!0}})],_a.prototype,"keyField",void 0),h([d({json:{read:!0,write:!0}})],_a.prototype,"keyFieldInRelationshipTable",void 0),h([d({json:{read:!0,write:!0}})],_a.prototype,"name",void 0),h([d({json:{read:!0,write:!0}})],_a.prototype,"relatedTableId",void 0),h([d({json:{read:!0,write:!0}})],_a.prototype,"relationshipTableId",void 0),h([d({json:{read:LU.read,write:LU.write}})],_a.prototype,"role",void 0),_a=h([j("esri.layers.support.Relationship")],_a);const ote=_a;function it(e,t,r){return!!ate(e,t,r)}function lw(e,t,r){return ate(e,t,r)}function ate(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const MTe={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function TTe(e){const t=e?.supportedSpatialAggregationStatistics?.map(r=>r.toLowerCase());return{envelope:!!t?.includes("envelopeaggregate"),centroid:!!t?.includes("centroidaggregate"),convexHull:!!t?.includes("convexhullaggregate")}}function aS(e,t){return!!e?.supportedOperationsWithCacheHint?.map(i=>i.toLowerCase())?.includes(t.toLowerCase())}function u8(e,t){return{analytics:ITe(e),attachment:ETe(e),data:ATe(e),metadata:$Te(e),operations:CTe(e.capabilities,e,t),query:OTe(e,t),queryRelated:PTe(e),queryTopFeatures:RTe(e),editing:LTe(e)}}function ITe(e){return{supportsCacheHint:aS(e.advancedQueryCapabilities,"queryAnalytics")}}function ETe(e){const t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:aS(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:it(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach(i=>{const s=MTe[i.name];s&&(r[s]=!!i.isEnabled)}),r}function ATe(e){return{isVersioned:it(e,"isDataVersioned",!1),supportsAttachment:it(e,"hasAttachments",!1),supportsM:it(e,"hasM",!1),supportsZ:it(e,"hasZ",!1)}}function $Te(e){return{supportsAdvancedFieldProperties:it(e,"supportsFieldDescriptionProperty",!1)}}function CTe(e,t,r){const i=e?e.toLowerCase().split(",").map(f=>f.trim()):[],s=r?Lh(r):null,n=i.includes(s!=null&&s.serverType==="MapServer"?"data":"query"),o=i.includes("editing")&&!t.datesInUnknownTimezone;let a=o&&i.includes("create"),l=o&&i.includes("delete"),u=o&&i.includes("update");const c=i.includes("changetracking"),p=t.advancedQueryCapabilities;return o&&!(a||l||u)&&(a=l=u=!0),{supportsCalculate:it(t,"supportsCalculate",!1),supportsTruncate:it(t,"supportsTruncate",!1),supportsValidateSql:it(t,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:c,supportsQuery:n,supportsQueryAnalytics:it(p,"supportsQueryAnalytic",!1),supportsQueryAttachments:it(p,"supportsQueryAttachments",!1),supportsQueryTopFeatures:it(p,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:it(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:it(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:it(t,"supportsAsyncConvert3D",!1)}}function OTe(e,t){const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,s=e.archivingInfo,n=e.currentVersion,o=t?.includes("MapServer"),a=!o||n>=ce("mapserver-pbf-version-support"),l=K6(t),u=new Set((e.supportedQueryFormats??"").split(",").map(c=>c.toLowerCase().trim()));return{maxRecordCount:lw(e,"maxRecordCount",void 0),maxRecordCountFactor:lw(e,"maxRecordCountFactor",void 0),standardMaxRecordCount:lw(e,"standardMaxRecordCount",void 0),supportedSpatialAggregationStatistics:TTe(r),supportsCacheHint:it(r,"supportsQueryWithCacheHint",!1)||aS(r,"query"),supportsCentroid:it(r,"supportsReturningGeometryCentroid",!1),supportsCompactGeometry:l,supportsDefaultSpatialReference:it(r,"supportsDefaultSR",!1),supportsDisjointSpatialRelationship:it(r,"supportsDisjointSpatialRel",!1),supportsDistance:it(r,"supportsQueryWithDistance",!1),supportsDistinct:it(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:it(r,"supportsReturningQueryExtent",!1),supportsFormatPBF:a&&u.has("pbf"),supportsFullTextSearch:it(r,"supportsFullTextSearch",!1),supportsGeometryProperties:it(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:it(r,"supportsHavingClause",!1),supportsHistoricMoment:it(s,"supportsQueryWithHistoricMoment",!1),supportsMaxRecordCountFactor:it(r,"supportsMaxRecordCountFactor",!1),supportsOrderBy:it(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:it(r,"supportsPagination",!1),supportsPercentileStatistics:it(r,"supportsPercentileStatistics",!1),supportsQuantization:it(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:it(e,"supportsQuantizationEditMode",!1),supportsQueryByAnonymous:it(i,"allowAnonymousToQuery",!0),supportsQueryByOthers:it(i,"allowOthersToQuery",!0),supportsQueryGeometry:it(e,"supportsReturningQueryGeometry",!1),supportsResultType:it(r,"supportsQueryWithResultType",!1),supportsSpatialAggregationStatistics:it(r,"supportsSpatialAggregationStatistics",!1),supportsSqlExpression:it(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:it(e,"useStandardizedQueries",!1),supportsStatistics:it(r,"supportsStatistics",e.supportsStatistics),supportsTopFeaturesQuery:it(r,"supportsTopFeaturesQuery",!1),tileMaxRecordCount:lw(e,"tileMaxRecordCount",void 0)}}function PTe(e){const t=e.advancedQueryCapabilities,r=it(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:it(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:aS(t,"queryRelated")}}function RTe(e){return{supportsCacheHint:aS(e.advancedQueryCapabilities,"queryTopFilter")}}function LTe(e){const t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:it(e,"allowGeometryUpdates",!0),supportsGlobalId:it(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:it(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:it(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:it(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:it(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:it(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:it(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:it(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:it(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:it(r,"supportsAsyncApplyEdits",!1),zDefault:lw(e,"zDefault",void 0)}}function Wnt(e){return{operations:{supportsAppend:it(e,"supportsAppend",!1),supportsExportClip:it(e,"supportsExportClip",!1),supportsExportFrameset:it(e,"supportsExportFrameset",!1),supportsMensuration:it(e,"supportsMensuration",!1),supportsUpdate:it(e,"supportsUpdate",!1)},query:{supportsCoverageQuery:e?.playbackInfo?.klv["0601"]??!1}}}let Uc=class extends Yt(ue){constructor(t){super(t),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(t){if(!t)return null;const r={};for(const i of Object.keys(t))r[i]=FA(t[i]);return r}writeDomains(t,r){if(!t)return;const i={};for(const s of Object.keys(t))t[s]&&(i[s]=t[s]?.toJSON());r.domains=i}};h([d({type:Number,json:{write:!0}})],Uc.prototype,"code",void 0),h([d({type:Object,json:{write:!0}})],Uc.prototype,"defaultValues",void 0),h([d({json:{write:!0}})],Uc.prototype,"domains",void 0),h([pe("domains")],Uc.prototype,"readDomains",null),h([ge("domains")],Uc.prototype,"writeDomains",null),h([d({type:String,json:{write:!0}})],Uc.prototype,"name",void 0),Uc=h([j("esri.layers.support.Subtype")],Uc);const kTe=Uc,NTe=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(qe.ofType(Su)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=Fe.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;const{capabilities:r}=this;if(r){const{query:s,operations:n,editing:o}=r;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||n.supportsEditing&&!(o.supportsUpdateByOthers&&o.supportsUpdateByAnonymous&&o.supportsDeleteByOthers&&o.supportsDeleteByAnonymous))return"load"}if(this.userHasUpdateItemPrivileges){if(wTe(this))return"load";if(this.hasUpdateItemRestrictions)return r.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";const i=this.editFieldsInfo;return(i?.creatorField||i?.editorField)&&r?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(r,i){return u8(i,this.url)}readEditingInfo(r,i){const{editingInfo:s}=i;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){const r=this.capabilities;if(!r)return null;const i=Z(r),{operations:s,editing:n}=i;return LT(this)?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),i):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=n.supportsDeleteByOthers=n.supportsGeometryUpdate=n.supportsUpdateByOthers=!0,i):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=n.supportsGeometryUpdate=!0),i)}readGlobalIdFieldFromService(r,i){return rte(i)}get hasFullEditingRestrictions(){const r=this.capabilities;if(!r||LT(this))return!1;const{operations:i,editing:s}=r;return i.supportsEditing&&!(i.supportsAdd&&i.supportsDelete&&i.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){const r=this.capabilities;if(!r)return!1;const{operations:i,editing:s}=r;return LT(this)?!i.supportsQuery:!(i.supportsAdd&&i.supportsDelete&&i.supportsEditing&&i.supportsQuery&&i.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(r,i){return i.type==="Table"}readMaxScale(r,i){return i.effectiveMaxScale||r||0}readMinScale(r,i){return i.effectiveMinScale||r||0}readObjectIdFieldFromService(r,i){return ite(i)}readServiceDefinitionExpression(r,i){return i.definitionQuery||i.definitionExpression}set url(r){if(r==null)return void this._set("url",r);const i=QSe({layer:this,url:r,nonStandardUrlAllowed:!0,logger:be.getLogger(this)});this._set("url",i.url),i.layerId!=null&&this._set("layerId",i.layerId)}writeUrl(r,i,s,n){exe(this,r,null,i,n)}readVersion(r,i){return mTe(i)}};return h([d({readOnly:!0})],t.prototype,"authenticationTriggerEvent",null),h([d({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],t.prototype,"copyright",void 0),h([d({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],t.prototype,"capabilities",void 0),h([pe("service","capabilities")],t.prototype,"readCapabilitiesFromService",null),h([d($v("dateFieldsTimeReference"))],t.prototype,"dateFieldsTimeZone",void 0),h([d({type:Boolean})],t.prototype,"datesInUnknownTimezone",void 0),h([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),h([d({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],t.prototype,"displayField",void 0),h([d({readOnly:!0,type:KMe})],t.prototype,"editFieldsInfo",void 0),h([d({readOnly:!0})],t.prototype,"editingInfo",void 0),h([pe("editingInfo")],t.prototype,"readEditingInfo",null),h([d({readOnly:!0})],t.prototype,"effectiveCapabilities",null),h([d((()=>{const r=Z(WMe),i=r.json.origins;return i["web-map"]={read:!1,write:!1},i["portal-item"]={read:!1,write:!1},r})())],t.prototype,"elevationInfo",void 0),h([d({type:nte,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:gs}}}}})],t.prototype,"floorInfo",void 0),h([d({type:yt,json:{origins:{service:{read:{source:"extent"}}}}})],t.prototype,"fullExtent",void 0),h([d()],t.prototype,"gdbVersion",void 0),h([d({readOnly:!0,type:xTe,json:{read:{source:"geometryProperties"}}})],t.prototype,"geometryFieldsInfo",void 0),h([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:yL.read}}}})],t.prototype,"geometryType",void 0),h([d({type:String})],t.prototype,"globalIdField",void 0),h([pe("service","globalIdField",["globalIdField","fields"])],t.prototype,"readGlobalIdFieldFromService",null),h([d({readOnly:!0})],t.prototype,"hasFullEditingRestrictions",null),h([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasM",void 0),h([d({readOnly:!0})],t.prototype,"hasUpdateItemRestrictions",null),h([d({type:Boolean,json:{origins:{service:{read:!0}}}})],t.prototype,"hasZ",void 0),h([d({readOnly:!0,type:BA})],t.prototype,"heightModelInfo",void 0),h([d({type:Date})],t.prototype,"historicMoment",void 0),h([d({type:qe.ofType(Su),readOnly:!0})],t.prototype,"indexes",void 0),h([d({readOnly:!0})],t.prototype,"isTable",void 0),h([pe("service","isTable",["type"])],t.prototype,"readIsTableFromService",null),h([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],t.prototype,"layerId",void 0),h([d(YMe)],t.prototype,"maxScale",void 0),h([pe("service","maxScale",["maxScale","effectiveMaxScale"])],t.prototype,"readMaxScale",null),h([d(ZMe)],t.prototype,"minScale",void 0),h([pe("service","minScale",["minScale","effectiveMinScale"])],t.prototype,"readMinScale",null),h([d({type:String})],t.prototype,"objectIdField",void 0),h([pe("service","objectIdField",["objectIdField","fields"])],t.prototype,"readObjectIdFieldFromService",null),h([d($v("preferredTimeReference"))],t.prototype,"preferredTimeZone",void 0),h([d({type:[ote],readOnly:!0})],t.prototype,"relationships",void 0),h([d({type:Boolean})],t.prototype,"returnM",void 0),h([d({type:Boolean})],t.prototype,"returnZ",void 0),h([d({readOnly:!0,json:{write:!1}})],t.prototype,"serverGens",void 0),h([d({readOnly:!0})],t.prototype,"serviceDefinitionExpression",void 0),h([pe("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],t.prototype,"readServiceDefinitionExpression",null),h([d({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"serviceItemId",void 0),h([d()],t.prototype,"sourceJSON",void 0),h([d({type:Fe,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],t.prototype,"spatialReference",void 0),h([d({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],t.prototype,"subtypeField",void 0),h([d({type:[kTe],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],t.prototype,"subtypes",void 0),h([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],t.prototype,"trackIdField",void 0),h([d(oS)],t.prototype,"url",null),h([ge("url")],t.prototype,"writeUrl",null),h([d({json:{origins:{service:{read:!0}},read:!1}})],t.prototype,"version",void 0),h([pe("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],t.prototype,"readVersion",null),t=h([j("esri.layers.mixins.FeatureLayerBase")],t),t};let Zg=class extends Yt(ue){constructor(t){super(t),this.expression=null,this.title=null,this.returnType=null}};h([d({type:String,json:{write:!0}})],Zg.prototype,"expression",void 0),h([d({type:String,json:{write:!0}})],Zg.prototype,"title",void 0),h([d({type:String,json:{write:!0}})],Zg.prototype,"returnType",void 0),Zg=h([j("esri.layers.support.ExpressionInfo")],Zg);const c8=Zg;var vL;let zc=vL=class extends ue{constructor(e){super(e),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new vL({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:Z(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};h([d({type:Boolean,json:{write:!0}})],zc.prototype,"isAutoGenerated",void 0),h([d({type:String,json:{write:!0}})],zc.prototype,"name",void 0),h([d({type:String,json:{write:!0}})],zc.prototype,"alias",void 0),h([d({type:String,json:{write:!0}})],zc.prototype,"onStatisticField",void 0),h([d({type:c8,json:{write:!0}})],zc.prototype,"onStatisticExpression",void 0),h([d({type:String,json:{write:!0}})],zc.prototype,"statisticType",void 0),zc=vL=h([j("esri.layers.support.AggregateField")],zc);const Cy=zc;let vd=class extends ue{constructor(){super(...arguments),this.type=null}};h([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],vd.prototype,"type",void 0),vd=h([j("esri.layers.support.FeatureReduction")],vd);const h8="__begin__",p8="__end__",DTe=new RegExp(h8,"ig"),FTe=new RegExp(p8,"ig"),kU=new RegExp("^"+h8,"i"),NU=new RegExp(p8+"$","i"),_I='"',jTe=_I+" + ",VTe=" + "+_I;function UTe(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function zTe(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function d8(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=UTe(e.labelExpression),t.type="conventional"),t}function GTe(e){const t=d8(e);if(!t)return null;switch(t.type){case"conventional":return bL(t.expression);case"arcade":return t.expression}return null}function BTe(e){const t=d8(e);if(!t)return null;switch(t.type){case"conventional":return HTe(t.expression);case"arcade":return lte(t.expression)}return null}function bL(e){let t;return e?(t=BE(e,r=>h8+'$feature["'+r+'"]'+p8),t=kU.test(t)?t.replace(kU,""):_I+t,t=NU.test(t)?t.replace(NU,""):t+_I,t=t.replaceAll(DTe,jTe).replaceAll(FTe,VTe)):t='""',t}const qTe=/^\s*\{([^}]+)\}\s*$/i;function HTe(e){return e?.match(qTe)?.[1].trim()||null}const WTe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,JTe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,ZTe=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function lte(e){if(!e)return null;let t=WTe.exec(e)||JTe.exec(e);return t?t[1]||t[3]:(t=ZTe.exec(e),t?t[2]:null)}var wL;let Ip=wL=class extends ue{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?bL(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=bL(this.value)),e!=null&&(t[r]=e)}clone(){return new wL({expression:this.expression,title:this.title,value:this.value})}};h([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Ip.prototype,"expression",void 0),h([pe("expression",["expression","value"])],Ip.prototype,"readExpression",null),h([ge("expression")],Ip.prototype,"writeExpression",null),h([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Ip.prototype,"title",void 0),h([d({json:{read:!1,write:!1}})],Ip.prototype,"value",void 0),Ip=wL=h([j("esri.layers.support.LabelExpressionInfo")],Ip);const ute=Ip;var _L;const _x=new wt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function Sx(e,t,r){return{enabled:!lY(r?.layer)}}function cte(e){return!e||e.origin!=="service"&&e.layer?.type!=="map-image"}function YTe(e){return e?.type==="map-image"}function hte(e){return!!YTe(e)&&!!e.capabilities?.exportMap?.supportsArcadeExpressionForLabeling}function KTe(e){return cte(e)||hte(e?.layer)}let hi=_L=class extends ue{static evaluateWhere(e,t){const r=(i,s,n)=>{switch(s){case"=":return i==n;case"<>":return i!=n;case">":return i>n;case">=":return i>=n;case"<":return i<n;case"<=":return i<=n}return!1};try{if(e==null)return!0;const i=e.split(" ");if(i.length===3)return r(t[i[0]],i[1],i[2]);if(i.length===7){const s=r(t[i[0]],i[1],i[2]),n=i[3],o=r(t[i[4]],i[5],i[6]);switch(n){case"AND":return s&&o;case"OR":return s||o}}return!1}catch{}}constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Iwe,this.useCodedValues=void 0,this.where=null}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=zTe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const i=lte(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(e==null&&this.labelExpression!=null&&cte(i))e=new ute({expression:this.getLabelExpressionArcade()});else if(!e)return;const s=e.toJSON(i);s.expression&&(t[r]=s)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return d8(this)}getLabelExpressionArcade(){return GTe(this)}getLabelExpressionSingleField(){return BTe(this)}hash(){return JSON.stringify(this)}clone(){return new _L({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:Z(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:Z(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};h([d({type:String,json:{write:!0}})],hi.prototype,"name",void 0),h([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:Sx}}}}})],hi.prototype,"allowOverrun",void 0),h([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:Sx}}}}})],hi.prototype,"deconflictionStrategy",void 0),h([d({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&r?.origin==="service"&&hte(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],hi.prototype,"labelExpression",void 0),h([pe("labelExpression")],hi.prototype,"readLabelExpression",null),h([ge("labelExpression")],hi.prototype,"writeLabelExpression",null),h([d({type:ute,json:{write:{overridePolicy:(e,t,r)=>KTe(r)?{allowNull:!0}:{enabled:!1}}}})],hi.prototype,"labelExpressionInfo",void 0),h([ge("labelExpressionInfo")],hi.prototype,"writeLabelExpressionInfo",null),h([d({type:_x.apiValues,json:{type:_x.jsonValues,read:_x.read,write:_x.write}})],hi.prototype,"labelPlacement",void 0),h([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],hi.prototype,"labelPosition",void 0),h([d({type:Number})],hi.prototype,"maxScale",void 0),h([ge("maxScale")],hi.prototype,"writeMaxScale",null),h([d({type:Number})],hi.prototype,"minScale",void 0),h([ge("minScale")],hi.prototype,"writeMinScale",null),h([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Sx}}}}})],hi.prototype,"repeatLabel",void 0),h([d({type:Number,cast:Ut,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:Sx}}}}})],hi.prototype,"repeatLabelDistance",void 0),h([d({types:kbe,json:{origins:{"web-scene":{types:Nbe,write:MV,default:null}},write:MV,default:null}})],hi.prototype,"symbol",void 0),h([d({type:Boolean,json:{write:!0}})],hi.prototype,"useCodedValues",void 0),h([d({type:String,json:{write:!0}})],hi.prototype,"where",void 0),hi=_L=h([j("esri.layers.support.LabelClass")],hi);const lS=hi;var SL;let Js=SL=class extends vd{constructor(e){super(e),this.type="binning",this.binType="geohash",this.fixedBinLevel=null,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.size=Ut("12px"),this.fields=[],this.renderer=null}writeFields(e,t,r){const i=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());mn(r,i,t)}readRenderer(e,t,r){const i=t.drawingInfo?.renderer;return i?Z_(i,t,r)??void 0:l8(t,r)}clone(){return new SL({fields:Z(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:Z(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:Z(this.popupTemplate),renderer:Z(this.renderer),binType:Z(this.binType),size:this.size})}};h([We({binning:"binning"})],Js.prototype,"type",void 0),h([We({geohash:"geohash",square:"square"}),d({type:["geohash","square"]})],Js.prototype,"binType",void 0),h([d({type:Number,json:{write:!0}})],Js.prototype,"fixedBinLevel",void 0),h([d({type:[lS],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Js.prototype,"labelingInfo",void 0),h([d(s8)],Js.prototype,"labelsVisible",void 0),h([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Js.prototype,"maxScale",void 0),h([d(nS)],Js.prototype,"popupEnabled",void 0),h([d({type:Bd,json:{name:"popupInfo",write:!0}})],Js.prototype,"popupTemplate",void 0),h([d({type:Number,cast:e=>e==="auto"?e:Ut(e)})],Js.prototype,"size",void 0),h([d({type:[Cy],json:{write:!0}})],Js.prototype,"fields",void 0),h([ge("fields")],Js.prototype,"writeFields",null),h([d({types:iS,json:{write:{target:"drawingInfo.renderer"}}})],Js.prototype,"renderer",void 0),h([pe("renderer",["drawingInfo.renderer"])],Js.prototype,"readRenderer",null),Js=SL=h([j("esri.layers.support.FeatureReductionBinning")],Js);const pte=Js;var xL;function DU(e){return e.type==="simple"&&!e.visualVariables?.length}let Di=xL=class extends ue{constructor(e){super(e),this.type="cluster",this.clusterRadius=Ut("80px"),this.clusterMinSize=Ut("12px"),this.clusterMaxSize=Ut("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=[]}readRenderer(e,t,r){const i=t.drawingInfo?.renderer;return i?.authoringInfo?.isAutoGenerated?null:i?DU(i)?null:Z_(i,t,r)??void 0:l8(t,r)}readSymbol(e,t,r){const i=t.drawingInfo?.renderer;return i?.authoringInfo?.isAutoGenerated?null:i&&DU(i)?Z_(i,t,r)?.symbol:null}writeSymbol(e,t,r,i){const s=this.renderer?.authoringInfo?.isAutoGenerated;if(!this.renderer||s){const n=new Zy({symbol:e});t.drawingInfo={renderer:n.write({},i)}}}writeFields(e,t,r){const i=e.filter(s=>s.statisticType!=="avg_angle").map(s=>s.toJSON());mn(r,i,t)}readFields(e,t,r){return e.filter(i=>!i.isAutoGenerated).map(i=>Cy.fromJSON(i))}clone(){return new xL({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:Z(this.labelingInfo),labelsVisible:this.labelsVisible,fields:Z(this.fields),maxScale:this.maxScale,renderer:Z(this.renderer),symbol:Z(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:Z(this.popupTemplate)})}};h([d({type:["cluster"],readOnly:!0,json:{write:!0}})],Di.prototype,"type",void 0),h([d({type:Number,cast:e=>e==="auto"?e:Ut(e),json:{write:!0}})],Di.prototype,"clusterRadius",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],Di.prototype,"clusterMinSize",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],Di.prototype,"clusterMaxSize",void 0),h([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Di.prototype,"maxScale",void 0),h([d(nS)],Di.prototype,"popupEnabled",void 0),h([d({type:Bd,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Di.prototype,"popupTemplate",void 0),h([d({types:iS,json:{write:{target:"drawingInfo.renderer"}}})],Di.prototype,"renderer",void 0),h([pe("renderer",["drawingInfo.renderer"])],Di.prototype,"readRenderer",null),h([d({types:Rbe})],Di.prototype,"symbol",void 0),h([pe("symbol",["drawingInfo.renderer"])],Di.prototype,"readSymbol",null),h([ge("symbol")],Di.prototype,"writeSymbol",null),h([d({type:[lS],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Di.prototype,"labelingInfo",void 0),h([d(s8)],Di.prototype,"labelsVisible",void 0),h([d({type:[Cy],json:{write:!0}})],Di.prototype,"fields",void 0),h([ge("fields")],Di.prototype,"writeFields",null),h([pe("fields")],Di.prototype,"readFields",null),Di=xL=h([j("esri.layers.support.FeatureReductionCluster")],Di);const dte=Di;var ML;let kT=ML=class extends vd{constructor(e){super(e),this.type="selection"}clone(){return new ML}};h([d({type:["selection"]})],kT.prototype,"type",void 0),kT=ML=h([j("esri.layers.support.FeatureReductionSelection")],kT);const FU=kT,jU={key:"type",base:vd,typeMap:{cluster:dte,binning:pte}},XTe={types:{key:"type",base:vd,typeMap:{selection:FU,cluster:dte,binning:pte}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:jU},"portal-item":{types:jU},"web-scene":{types:{key:"type",base:vd,typeMap:{selection:FU}},name:"layerDefinition.featureReduction",write:{layerContainerTypes:gs}}}}},mg={Base64:0,Hex:1,String:2,Raw:3},ev=8,fte=(1<<ev)-1;function hd(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function QTe(e){const t=[];for(let r=0,i=e.length*ev;r<i;r+=ev)t[r>>5]|=(e.charCodeAt(r/ev)&fte)<<r%32;return t}function e3e(e){const t=[];for(let r=0,i=32*e.length;r<i;r+=ev)t.push(String.fromCharCode(e[r>>5]>>>r%32&fte));return t.join("")}function t3e(e){const t="0123456789abcdef",r=[];for(let i=0,s=4*e.length;i<s;i++)r.push(t.charAt(e[i>>2]>>i%4*8+4&15)+t.charAt(e[i>>2]>>i%4*8&15));return r.join("")}function r3e(e){const t="=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=[];for(let s=0,n=4*e.length;s<n;s+=3){const o=(e[s>>2]>>s%4*8&255)<<16|(e[s+1>>2]>>(s+1)%4*8&255)<<8|e[s+2>>2]>>(s+2)%4*8&255;for(let a=0;a<4;a++)8*s+6*a>32*e.length?i.push(t):i.push(r.charAt(o>>6*(3-a)&63))}return i.join("")}function i3e(e,t){return e<<t|e>>>32-t}function qA(e,t,r,i,s,n){return hd(i3e(hd(hd(t,e),hd(i,n)),s),r)}function Us(e,t,r,i,s,n,o){return qA(t&r|~t&i,e,t,s,n,o)}function zs(e,t,r,i,s,n,o){return qA(t&i|r&~i,e,t,s,n,o)}function Gs(e,t,r,i,s,n,o){return qA(t^r^i,e,t,s,n,o)}function Bs(e,t,r,i,s,n,o){return qA(r^(t|~i),e,t,s,n,o)}function s3e(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;let r=1732584193,i=-271733879,s=-1732584194,n=271733878;for(let o=0;o<e.length;o+=16){const a=r,l=i,u=s,c=n;r=Us(r,i,s,n,e[o],7,-680876936),n=Us(n,r,i,s,e[o+1],12,-389564586),s=Us(s,n,r,i,e[o+2],17,606105819),i=Us(i,s,n,r,e[o+3],22,-1044525330),r=Us(r,i,s,n,e[o+4],7,-176418897),n=Us(n,r,i,s,e[o+5],12,1200080426),s=Us(s,n,r,i,e[o+6],17,-1473231341),i=Us(i,s,n,r,e[o+7],22,-45705983),r=Us(r,i,s,n,e[o+8],7,1770035416),n=Us(n,r,i,s,e[o+9],12,-1958414417),s=Us(s,n,r,i,e[o+10],17,-42063),i=Us(i,s,n,r,e[o+11],22,-1990404162),r=Us(r,i,s,n,e[o+12],7,1804603682),n=Us(n,r,i,s,e[o+13],12,-40341101),s=Us(s,n,r,i,e[o+14],17,-1502002290),i=Us(i,s,n,r,e[o+15],22,1236535329),r=zs(r,i,s,n,e[o+1],5,-165796510),n=zs(n,r,i,s,e[o+6],9,-1069501632),s=zs(s,n,r,i,e[o+11],14,643717713),i=zs(i,s,n,r,e[o],20,-373897302),r=zs(r,i,s,n,e[o+5],5,-701558691),n=zs(n,r,i,s,e[o+10],9,38016083),s=zs(s,n,r,i,e[o+15],14,-660478335),i=zs(i,s,n,r,e[o+4],20,-405537848),r=zs(r,i,s,n,e[o+9],5,568446438),n=zs(n,r,i,s,e[o+14],9,-1019803690),s=zs(s,n,r,i,e[o+3],14,-187363961),i=zs(i,s,n,r,e[o+8],20,1163531501),r=zs(r,i,s,n,e[o+13],5,-1444681467),n=zs(n,r,i,s,e[o+2],9,-51403784),s=zs(s,n,r,i,e[o+7],14,1735328473),i=zs(i,s,n,r,e[o+12],20,-1926607734),r=Gs(r,i,s,n,e[o+5],4,-378558),n=Gs(n,r,i,s,e[o+8],11,-2022574463),s=Gs(s,n,r,i,e[o+11],16,1839030562),i=Gs(i,s,n,r,e[o+14],23,-35309556),r=Gs(r,i,s,n,e[o+1],4,-1530992060),n=Gs(n,r,i,s,e[o+4],11,1272893353),s=Gs(s,n,r,i,e[o+7],16,-155497632),i=Gs(i,s,n,r,e[o+10],23,-1094730640),r=Gs(r,i,s,n,e[o+13],4,681279174),n=Gs(n,r,i,s,e[o],11,-358537222),s=Gs(s,n,r,i,e[o+3],16,-722521979),i=Gs(i,s,n,r,e[o+6],23,76029189),r=Gs(r,i,s,n,e[o+9],4,-640364487),n=Gs(n,r,i,s,e[o+12],11,-421815835),s=Gs(s,n,r,i,e[o+15],16,530742520),i=Gs(i,s,n,r,e[o+2],23,-995338651),r=Bs(r,i,s,n,e[o],6,-198630844),n=Bs(n,r,i,s,e[o+7],10,1126891415),s=Bs(s,n,r,i,e[o+14],15,-1416354905),i=Bs(i,s,n,r,e[o+5],21,-57434055),r=Bs(r,i,s,n,e[o+12],6,1700485571),n=Bs(n,r,i,s,e[o+3],10,-1894986606),s=Bs(s,n,r,i,e[o+10],15,-1051523),i=Bs(i,s,n,r,e[o+1],21,-2054922799),r=Bs(r,i,s,n,e[o+8],6,1873313359),n=Bs(n,r,i,s,e[o+15],10,-30611744),s=Bs(s,n,r,i,e[o+6],15,-1560198380),i=Bs(i,s,n,r,e[o+13],21,1309151649),r=Bs(r,i,s,n,e[o+4],6,-145523070),n=Bs(n,r,i,s,e[o+11],10,-1120210379),s=Bs(s,n,r,i,e[o+2],15,718787259),i=Bs(i,s,n,r,e[o+9],21,-343485551),r=hd(r,a),i=hd(i,l),s=hd(s,u),n=hd(n,c)}return[r,i,s,n]}function mte(e,t=mg.Hex){const r=t||mg.Base64,i=s3e(QTe(e),e.length*ev);switch(r){case mg.Raw:return i;case mg.Hex:return t3e(i);case mg.String:return e3e(i);case mg.Base64:return r3e(i)}}const n3e=()=>be.getLogger("esri.views.2d.layers.support.clusterUtils");ce.add("esri-cluster-arcade-enabled",!0);const o3e=ce("esri-cluster-arcade-enabled"),a3e=new Set(["simple-line","simple-fill","picture-fill"]);function VU(e,t){let r=t.clone();if(!l3e(r))return r;if(t.getSymbols().some(i=>a3e.has(i.type))&&(r=new Zy({symbol:new Mo})),r.authoringInfo||(r.authoringInfo=new X2),r.authoringInfo.isAutoGenerated=!0,"visualVariables"in r){const i=(r.visualVariables||[]).filter(s=>s.valueExpression!=="$view.scale");i.forEach(s=>{s.type==="rotation"?s.field?s.field=Sf(e,s.field,"avg_angle","number"):s.valueExpression&&(s.field=ib(e,s.valueExpression,"avg_angle","number"),s.valueExpression=null):s.normalizationField?(s.field=Sf(e,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=Sf(e,s.field,"avg","number"):s.valueExpression&&(s.field=ib(e,s.valueExpression,"avg","number"),s.valueExpression=null)}),r.visualVariables=i}switch(r.type){case"simple":break;case"pie-chart":for(const i of r.attributes)i.field?i.field=Sf(e,i.field,"sum","number"):i.valueExpression&&(i.field=ib(e,i.valueExpression,"sum","number"),i.valueExpression=null);break;case"unique-value":r.field?r.field=Sf(e,r.field,"mode","string"):r.valueExpression&&(r.field=ib(e,r.valueExpression,"mode","string"),r.valueExpression=null);break;case"class-breaks":r.normalizationField?(r.field=Sf(e,r.field,"avg_norm","number",r.normalizationField),r.normalizationField=null):r.field?r.field=Sf(e,r.field,"avg","number"):r.valueExpression&&(r.field=ib(e,r.valueExpression,"avg","number"),r.valueExpression=null)}return r}const l3e=e=>{const t=r=>n3e().error(new K("Unsupported-renderer",r,{renderer:e}));if(!e)return!1;switch(e.type){case"unique-value":if(e.field2||e.field3)return t("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(e.normalizationField){const r=e.normalizationType;if(r!=="field")return t(`FeatureReductionCluster does not support a normalizationType of ${r}`),!1}break;case"simple":case"pie-chart":break;default:return t(`FeatureReductionCluster does not support renderers of type ${e.type}`),!1}if(!o3e){if("valueExpression"in e&&e.valueExpression)return t("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in e&&e.visualVariables||[]).some(r=>!(!("valueExpression"in r)||!r.valueExpression)))return t("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function u3e(e,t,r){switch(e){case"sum":return`cluster_sum_${t}`;case"avg":case"avg_angle":return`cluster_avg_${t}`;case"mode":return`cluster_type_${t}`;case"avg_norm":{const i=r,s="field",n=t.toLowerCase()+",norm:"+s+","+i.toLowerCase();return"cluster_avg_"+mte(n)}}}function ib(e,t,r,i){const s=mte(t),n=r==="mode"?`cluster_type_${s}`:r==="sum"?`cluster_sum_${s}`:`cluster_avg_${s}`;return e.some(o=>o.name===n)||e.push(new Cy({name:n,isAutoGenerated:!0,onStatisticExpression:new c8({expression:t,returnType:i}),statisticType:r})),n}function Sf(e,t,r,i,s){if(t==="cluster_count"||e.some(o=>o.name===t))return t;const n=u3e(r,t,s);return e.some(o=>o.name===n)||(r==="avg_norm"?e.push(new Cy({name:n,isAutoGenerated:!0,onStatisticExpression:new c8({expression:`$feature.${t} / $feature.${s}`,returnType:i}),statisticType:"avg"})):e.push(new Cy({name:n,isAutoGenerated:!0,onStatisticField:t,statisticType:r}))),n}const c3e=e=>{let t=class extends e{constructor(...r){super(...r),this.addHandles(ht(()=>this.renderer,()=>{if(this.featureReduction){const i=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",i)}},Os))}set featureReduction(r){const i=this._normalizeFeatureReduction(r);this._set("featureReduction",i)}set renderer(r){}_withClusterVariable(r,i,s){const n=r.clone();return"visualVariables"in n&&(n.visualVariables||(n.visualVariables=[]),n.visualVariables.some(o=>o.type==="size")||n.visualVariables.push(new Jy({field:"cluster_count",stops:[new fT({value:1}),new fT({useMinValue:!0,size:i}),new fT({useMaxValue:!0,size:s})]}))),n}_normalizeFeatureReduction(r){if(r?.type!=="cluster")return r;const i=r.clone(),s=[new Cy({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],n=(i.fields??[]).filter(p=>!p.isAutoGenerated),o=r.renderer&&!r.renderer.authoringInfo?.isAutoGenerated,{clusterMinSize:a,clusterMaxSize:l}=i;if(o){i.fields=[...s,...n];const p=this._withClusterVariable(i.renderer,a,l);return i.effectiveFeatureRenderer=p,i.effectiveClusterRenderer=p,i}if(r.symbol){if(i.fields=[...s,...n],i.renderer=null,!this.renderer)return i.effectiveFeatureRenderer=null,i.effectiveClusterRenderer=null,i;const p=VU(s,this.renderer),f=this._withClusterVariable(p,a,l),m="visualVariables"in f&&f.visualVariables?f.visualVariables:[],g=new Zy({symbol:r.symbol,visualVariables:m});return i.fields=[...s,...n],i.effectiveFeatureRenderer=f,i.effectiveClusterRenderer=g,i}if(!this.renderer)return r;const u=VU(s,this.renderer);i.fields=[...s,...n],i.renderer=u;const c=this._withClusterVariable(u,a,l);return i.effectiveFeatureRenderer=c,i.effectiveClusterRenderer=c,i}};return h([d(XTe)],t.prototype,"featureReduction",null),t=h([j("esri.layers.mixins.FeatureReductionLayer")],t),t},UU={ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GeoRSS:!0,GroupLayer:!0,KML:!0,KnowledgeGraphLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},zU={ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},GU={ArcGISFeatureLayer:!0,SubtypeGroupTable:!0},h3e={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,CatalogLayer:!0,CSV:!0,GeoJSON:!0,GroupLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,KML:!0,LineOfSightLayer:!0,MediaLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,RasterDataLayer:!0,VectorTileLayer:!0,Voxel:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-scene/tables":{ArcGISFeatureLayer:!0},"web-map/operational-layers":UU,"web-map/basemap":zU,"web-map/tables":GU,"link-chart/operational-layers":{...UU,LinkChartLayer:!0},"link-chart/basemap":zU,"link-chart/tables":GU,"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,BuildingSceneLayer:!0,IntegratedMesh3DTilesLayer:!0,IntegratedMeshLayer:!0,MediaLayer:!0,OrientedImageryLayer:!0,PointCloudLayer:!0,SubtypeGroupLayer:!0}},I1=e=>{let t=class extends e{constructor(){super(...arguments),this.persistenceEnabled=!0,this.title=null}readId(r,i,s){return s?.portalItem?.type==="Group Layer"?void 0:r}writeListMode(r,i,s,n){(n&&n.layerContainerType==="ground"||r&&hZ(this,s,{},n))&&(i[s]=r)}writeOperationalLayerType(r,i,s,n){r&&n?.layerContainerType!=="tables"&&(i.layerType=r)}writeTitle(r,i){i.title=r??"Layer"}readTimeExtent(r){return r?Bn.fromArray(r):null}writeTimeExtent(r,i,s,n){r&&n.layerContainerType!=="tables"&&(r.isEmpty?n?.messages&&n.messages.push(new K("layer:invalid-visibilityTimeExtent","visibilityTimeExtent cannot be empty")):i[s]=r.toArray())}read(r,i){i&&(i.layer=this),Zpe(this,r,s=>super.read(r,s),i)}write(r,i){if(!this.persistenceEnabled&&!i?.ignorePersistenceEnabled)return null;if(i?.origin){const o=`${i.origin}/${i.layerContainerType||"operational-layers"}`;let l=!!h3e[o]?.[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&o==="web-scene/operational-layers"&&(l=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&o==="web-map/operational-layers"&&(l=!1),!l)return i.messages?.push(new K("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${o}'`,{layer:this})),null}const s=super.write(r,{...i,layer:this}),n=!!i&&!!i.messages&&!!i.messages.filter(o=>o instanceof K&&o.name==="web-document-write:property-required").length;return rA(s?.url)?(i?.messages?.push(new K("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&n?null:s}beforeSave(){}};return h([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),h([pe("id",["id"])],t.prototype,"readId",null),h([d(Qee)],t.prototype,"listMode",void 0),h([ge("listMode")],t.prototype,"writeListMode",null),h([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1},"web-scene":{name:"layerType",read:!1,write:{enabled:!0,ignoreOrigin:!0,layerContainerTypes:gs}}}}})],t.prototype,"operationalLayerType",void 0),h([ge("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),h([d(wI)],t.prototype,"opacity",void 0),h([d({type:Boolean,readOnly:!1})],t.prototype,"persistenceEnabled",void 0),h([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),h([ge("title"),ge(["web-scene"],"title")],t.prototype,"writeTitle",null),h([d({type:Bn,json:{origins:{"web-scene":{write:{layerContainerTypes:gs}}}}})],t.prototype,"visibilityTimeExtent",void 0),h([pe("visibilityTimeExtent")],t.prototype,"readTimeExtent",null),h([ge(["portal-item","web-map","web-scene"],"visibilityTimeExtent",{visibilityTimeExtent:{type:[[St,eA]]}})],t.prototype,"writeTimeExtent",null),h([d({type:Boolean,json:{origins:{"web-scene":{name:"visibility",write:{enabled:!0,layerContainerTypes:gs}}},name:"visibility",write:!0}})],t.prototype,"visible",void 0),t=h([j("esri.layers.mixins.OperationalLayer")],t),t};var TL;const xx=new wt({asc:"ascending",desc:"descending"});let Yg=TL=class extends ue{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new TL({field:this.field,valueExpression:this.valueExpression,order:this.order})}};h([d({type:String,json:{write:!0}})],Yg.prototype,"field",void 0),h([d({type:String,json:{write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Yg.prototype,"valueExpression",void 0),h([d({type:xx.apiValues,json:{type:xx.jsonValues,read:xx.read,write:xx.write}})],Yg.prototype,"order",void 0),Yg=TL=h([j("esri.layers.support.OrderByInfo")],Yg);const yte=Yg;function p3e(e,t,r){if(!e)return null;const i=e.find(n=>!!n.field);if(!i)return null;const s=new yte;return s.read(i,r),[s]}function d3e(e,t,r,i){const s=e.find(n=>!!n.field);s&&mn(r,[s.toJSON()],t)}const f3e={type:[yte],json:{origins:{"web-scene":{write:!1,read:!1}},name:"layerDefinition.orderBy",read:{reader:p3e},write:{writer:d3e}}},m3e=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return h([d(f3e)],t.prototype,"orderBy",void 0),t=h([j("esri.layers.mixins.OrderedLayer")],t),t},ip=oi.radius,el=oi.eccentricitySquared,y3e={a1:ip*el,a2:ip*el*ip*el,a3:ip*el*el/2,a4:ip*el*ip*el*2.5,a5:ip*el+ip*el*el/2,a6:1-el};1/294.9786982,1/298.257222101,oi.radius,oi.flattening,1/298.257222101,Ed.radius,Ed.flattening,1/192.0430107526882,zu.radius,zu.flattening,1/10.2079945799458,1/43.61604095563141,zu.radius;var oe;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",e[e.WGS84=2]="WGS84",e[e.WEB_MERCATOR=3]="WEB_MERCATOR",e[e.WGS84_ECEF=4]="WGS84_ECEF",e[e.CGCS2000=5]="CGCS2000",e[e.SPHERICAL_MARS_PCPF=6]="SPHERICAL_MARS_PCPF",e[e.GCSMARS2000=7]="GCSMARS2000",e[e.SPHERICAL_MOON_PCPF=8]="SPHERICAL_MOON_PCPF",e[e.GCSMOON2000=9]="GCSMOON2000",e[e.LON_LAT=10]="LON_LAT",e[e.PLATE_CARREE=11]="PLATE_CARREE"})(oe||(oe={}));const g3e={[oe.WGS84]:{[oe.CGCS2000]:Dr,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:Dr,[oe.SPHERICAL_ECEF]:Xw,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:tv,[oe.PLATE_CARREE]:rv,[oe.WGS84]:Dr,[oe.WGS84_ECEF]:nv},[oe.CGCS2000]:{[oe.CGCS2000]:Dr,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:Dr,[oe.SPHERICAL_ECEF]:Xw,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:tv,[oe.PLATE_CARREE]:rv,[oe.WGS84]:Dr,[oe.WGS84_ECEF]:nv},[oe.GCSMARS2000]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:Dr,[oe.GCSMOON2000]:null,[oe.LON_LAT]:Dr,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:HU,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.GCSMOON2000]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:Dr,[oe.LON_LAT]:Dr,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:qU,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.WEB_MERCATOR]:{[oe.CGCS2000]:Kw,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:Kw,[oe.SPHERICAL_ECEF]:v3e,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:Dr,[oe.PLATE_CARREE]:_3e,[oe.WGS84]:Kw,[oe.WGS84_ECEF]:b3e},[oe.WGS84_ECEF]:{[oe.CGCS2000]:ov,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:ov,[oe.SPHERICAL_ECEF]:C3e,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:O3e,[oe.PLATE_CARREE]:S3e,[oe.WGS84]:ov,[oe.WGS84_ECEF]:Dr},[oe.SPHERICAL_ECEF]:{[oe.CGCS2000]:sv,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:sv,[oe.SPHERICAL_ECEF]:Dr,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:E3e,[oe.PLATE_CARREE]:x3e,[oe.WGS84]:sv,[oe.WGS84_ECEF]:A3e},[oe.SPHERICAL_MARS_PCPF]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:JU,[oe.GCSMOON2000]:null,[oe.LON_LAT]:JU,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:Dr,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.SPHERICAL_MOON_PCPF]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:WU,[oe.LON_LAT]:WU,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:Dr,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.UNKNOWN]:{[oe.CGCS2000]:null,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:null,[oe.SPHERICAL_ECEF]:null,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:Dr,[oe.WEB_MERCATOR]:null,[oe.PLATE_CARREE]:null,[oe.WGS84]:null,[oe.WGS84_ECEF]:null},[oe.LON_LAT]:{[oe.CGCS2000]:Dr,[oe.GCSMARS2000]:Dr,[oe.GCSMOON2000]:Dr,[oe.LON_LAT]:Dr,[oe.SPHERICAL_ECEF]:Xw,[oe.SPHERICAL_MARS_PCPF]:HU,[oe.SPHERICAL_MOON_PCPF]:qU,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:tv,[oe.PLATE_CARREE]:rv,[oe.WGS84]:Dr,[oe.WGS84_ECEF]:nv},[oe.PLATE_CARREE]:{[oe.CGCS2000]:iv,[oe.GCSMARS2000]:null,[oe.GCSMOON2000]:null,[oe.LON_LAT]:iv,[oe.SPHERICAL_ECEF]:M3e,[oe.SPHERICAL_MARS_PCPF]:null,[oe.SPHERICAL_MOON_PCPF]:null,[oe.UNKNOWN]:null,[oe.WEB_MERCATOR]:T3e,[oe.PLATE_CARREE]:Dr,[oe.WGS84]:iv,[oe.WGS84_ECEF]:I3e}};function gte(e,t,r=vte()){return e==null||t==null?null:P3e(e,t,r).projector}function BU(e,t){return e?t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=Vh(e,1)),eI(e)?t.spatialReferenceId=oe.SPHERICAL_ECEF:by(e)?t.spatialReferenceId=oe.WGS84:Ku(e)?t.spatialReferenceId=oe.WEB_MERCATOR:gfe(e)?t.spatialReferenceId=oe.PLATE_CARREE:e.wkt===_fe.wkt?t.spatialReferenceId=oe.WGS84_ECEF:e.wkid===vy.CGCS2000?t.spatialReferenceId=oe.CGCS2000:e.wkt===ND.wkt?t.spatialReferenceId=oe.SPHERICAL_MARS_PCPF:e.wkt===DD.wkt?t.spatialReferenceId=oe.SPHERICAL_MOON_PCPF:FZ(e)?t.spatialReferenceId=oe.GCSMARS2000:jZ(e)?t.spatialReferenceId=oe.GCSMOON2000:t.spatialReferenceId=oe.UNKNOWN):oe.UNKNOWN}function Dr(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function Kw(e,t,r,i){r[i]=Lv*(e[t]/ey),r[i+1]=Lv*(wte-2*Math.atan(Math.exp(-e[t+1]/ey))),r[i+2]=e[t+2]}function v3e(e,t,r,i){const s=e[t]/ey,n=wte-2*Math.atan(Math.exp(-e[t+1]/ey)),o=ey+e[t+2],a=Math.cos(n)*o;r[i]=Math.cos(s)*a,r[i+1]=Math.sin(s)*a,r[i+2]=Math.sin(n)*o}function b3e(e,t,r,i){Kw(e,t,r,i),nv(r,i,r,i)}function w3e(e,t,r,i,s){const n=.4999999*HA,o=Gl(Rv*e[t+1],-n,n),a=Math.sin(o);r[i++]=Rv*e[t]*s.radius,r[i++]=s.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=e[t+2]}function tv(e,t,r,i){w3e(e,t,r,i,oi)}function rv(e,t,r,i){r[i]=e[t]*ZU,r[i+1]=e[t+1]*ZU,r[i+2]=e[t+2]}function iv(e,t,r,i){r[i]=e[t]*YU,r[i+1]=e[t+1]*YU,r[i+2]=e[t+2]}function _3e(e,t,r,i){Kw(e,t,r,i),rv(r,i,r,i)}function S3e(e,t,r,i){ov(e,t,r,i),rv(r,i,r,i)}function x3e(e,t,r,i){sv(e,t,r,i),rv(r,i,r,i)}function M3e(e,t,r,i){iv(e,t,r,i),Xw(r,i,r,i)}function T3e(e,t,r,i){iv(e,t,r,i),tv(r,i,r,i)}function I3e(e,t,r,i){iv(e,t,r,i),nv(r,i,r,i)}function f8(e,t,r,i,s){const n=s+e[t+2],o=Rv*e[t+1],a=Rv*e[t],l=Math.cos(o)*n;r[i]=Math.cos(a)*l,r[i+1]=Math.sin(a)*l,r[i+2]=Math.sin(o)*n}function qU(e,t,r,i){f8(e,t,r,i,Ed.radius)}function HU(e,t,r,i){f8(e,t,r,i,zu.radius)}function Xw(e,t,r,i){f8(e,t,r,i,oi.radius)}function m8(e,t,r,i,s){const n=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(n*n+o*o+a*a),u=AY(a/(l===0?1:l)),c=Math.atan2(o,n);r[i++]=Lv*c,r[i++]=Lv*u,r[i]=l-s}function WU(e,t,r,i){m8(e,t,r,i,Ed.radius)}function JU(e,t,r,i){m8(e,t,r,i,zu.radius)}function sv(e,t,r,i){m8(e,t,r,i,oi.radius)}function E3e(e,t,r,i){sv(e,t,r,i),tv(r,i,r,i)}function A3e(e,t,r,i){sv(e,t,r,i),nv(r,i,r,i)}function $3e(e,t,r,i,s){const n=Rv*e[t],o=Rv*e[t+1],a=e[t+2],l=Math.sin(o),u=Math.cos(o),c=s.radius/Math.sqrt(1-s.eccentricitySquared*l*l);r[i++]=(c+a)*u*Math.cos(n),r[i++]=(c+a)*u*Math.sin(n),r[i++]=(c*(1-s.eccentricitySquared)+a)*l}function nv(e,t,r,i){$3e(e,t,r,i,oi)}function ov(e,t,r,i){const s=y3e,n=e[t],o=e[t+1],a=e[t+2];let l,u,c,p,f,m,g,b,w,S,M,x,_,I,E,A,C,O,R,D,N;l=Math.abs(a),u=n*n+o*o,c=Math.sqrt(u),p=u+a*a,f=Math.sqrt(p),D=Math.atan2(o,n),m=a*a/p,g=u/p,I=s.a2/f,E=s.a3-s.a4/f,g>.3?(b=l/f*(1+g*(s.a1+I+m*E)/f),R=Math.asin(b),S=b*b,w=Math.sqrt(1-S)):(w=c/f*(1-m*(s.a5-I-g*E)/f),R=Math.acos(w),S=1-w*w,b=Math.sqrt(S)),M=1-oi.eccentricitySquared*S,x=oi.radius/Math.sqrt(M),_=s.a6*x,I=c-x*w,E=l-_*b,C=w*I+b*E,A=w*E-b*I,O=A/(_/M+C),R+=O,N=C+A*O/2,a<0&&(R=-R),r[i++]=Lv*D,r[i++]=Lv*R,r[i]=N}function C3e(e,t,r,i){ov(e,t,r,i),Xw(r,i,r,i)}function O3e(e,t,r,i){ov(e,t,r,i),tv(r,i,r,i)}function P3e(e,t,r){if(e==null||t==null||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const i=BU(e,r.source),s=BU(t,r.dest);return i===oe.UNKNOWN&&s===oe.UNKNOWN?vi(e,t)?r.projector=Dr:r.projector=null:r.projector=g3e[i][s],r}function vte(){return{source:{spatialReference:null,spatialReferenceId:oe.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:oe.UNKNOWN,metersPerUnit:1},projector:Dr}}const Knt={spatialReference:null,spatialReferenceId:oe.UNKNOWN},Xnt={spatialReference:null,spatialReferenceId:oe.UNKNOWN},bte=vte(),Rv=H2(1),Lv=EY(1),HA=Math.PI,wte=.5*HA,ey=oi.radius,ZU=ey*HA/180,YU=180/(ey*HA);function uS(e,t,r,i,s,n,o=1){const a=gte(t,s,bte);if(a==null)return!1;if(a===Dr){if(e===i&&r===n)return!0;const u=r+3*o;for(let c=r,p=n;c<u;c++,p++)i[p]=e[c];return!0}const l=r+3*o;for(let u=r,c=n;u<l;u+=3,c+=3)a(e,u,i,c);return!0}const Qnt=Object.freeze(Object.defineProperty({__proto__:null,projectBuffer:uS},Symbol.toStringTag,{value:"Module"}));function KU(e,t,r,i,s,n){return Mx[0]=e,Mx[1]=t,Mx[2]=r,uS(Mx,i,0,s,n,0,1)}const Mx=zd();let Tx=0,n5=class IL{static fromGE(t){const r=new IL;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}constructor(t){this.uid=Tx++,t?(this._wkt=t.wkt!=null?t.wkt:null,this._wkid=t.wkid!=null?t.wkid:-1,this._isInverse=t.isInverse!=null&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=Tx++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=Tx++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=Tx++}getInverse(){const t=new IL;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}},SI=class uw{static cacheKey(t,r){return[t.wkid?.toString()??"-1",t.wkt?.toString()??"",t.wkt2?.toString()??"",r.wkid?.toString()??"-1",r.wkt?.toString()??"",r.wkt2?.toString()??""].join()}static fromGE(t){const r=new uw;let i="";for(const s of t.steps){const n=n5.fromGE(s);r.steps.push(n),i+=n.uid.toString()+","}return r._cachedProjection={},r._gtlistentry=null,r._chain=i,r}constructor(t){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,t?.steps)for(const r of t.steps)r instanceof n5?this.steps.push(r):this.steps.push(new n5({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}getInverse(){const t=new uw;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cachedProjection[uw.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const n of this.steps)i+=n.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=i);const s=this._cachedProjection[uw.cacheKey(t,r)];return s===void 0?null:s}},kl=null,Pd=null,Qw=null,NT={};const y8=new z2;function ef(){return!!kl&&LD()}function _te(){return!!ef()||(ot(y8),Rd(),!1)}function Ste(e,t){return!e||!t||ec(e,t)||_te()}function R3e(e,t){return!ec(e,t)&&!ef()}function Rd(e){return Qw==null&&(Qw=Promise.all([RZ(),fe(()=>import("./geometryEngineBase-tPRu0UqQ.js"),__vite__mapDeps([19,1]),import.meta.url).then(t=>t.g),fe(()=>import("./hydrated-DEIkVKN7.js"),__vite__mapDeps([122,1]),import.meta.url)])),Qw.then(([,t,{hydratedAdapter:r}])=>{dr(e),Pd=r,kl=t.default,kl._enableProjection(dfe),y8.notify()})}function tf(e,t,r=null,i=null){return Array.isArray(e)?e.length===0?[]:EL(Pd,e,e[0].spatialReference,t,r,i):EL(Pd,[e],e.spatialReference,t,r,i)[0]}function EL(e,t,r,i,s=null,n=null){if(r==null||i==null)return t;if(ec(r,i,s))return t.map(o=>DT(o,r,i));if(s==null&&eI(r))return t.map(o=>DT(o,r,Fe.WGS84)).map(o=>e2(o,i));if(s==null&&eI(i))return t.map(o=>e2(o,Fe.WGS84)).map(o=>DT(o,Fe.WGS84,i));if(s==null){const o=SI.cacheKey(r,i);NT[o]!==void 0?s=NT[o]:((s=Mte(r,i,void 0))==null&&(s=new SI),NT[o]=s)}if(kl==null||e==null)throw new WA;return n!=null?kl._project(e,t,r,i,s,n):kl._project(e,t,r,i,s)}function L3e(e,t){const r=xte([e],t);return r.pending!=null?{pending:r.pending,geometry:null}:r.geometries!=null?{pending:null,geometry:r.geometries[0]}:{pending:null,geometry:null}}function xte(e,t){if(!ef()){for(const r of e)if(r!=null&&!vi(r.spatialReference,t)&&Wo(r.spatialReference)&&Wo(t)&&!ec(r.spatialReference,t))return ot(y8),{pending:Rd(),geometries:null}}return{pending:null,geometries:e.map(r=>r==null?null:vi(r.spatialReference,t)?r:Wo(r.spatialReference)&&Wo(t)?e2(r,t):null)}}function Mte(e,t,r=null){if(e==null||t==null)return null;if(kl==null||Pd==null)throw new WA;const i=kl._getTransformation(Pd,e,t,r,r?.spatialReference);return i!==null?SI.fromGE(i):null}function k3e(e,t,r=null){if(kl==null||Pd==null)throw new WA;const i=kl._getTransformationBySuitability(Pd,e,t,r,r?.spatialReference);if(i!==null){const s=[];for(const n of i)s.push(SI.fromGE(n));return s}return[]}let WA=class extends K{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};function N3e(){kl=null,Pd=null,Qw=null,NT={}}const D3e={get loadPromise(){return Qw}};function e2(e,t){try{const r=tf(e,t);if(r==null)return null;"xmin"in e&&"xmin"in r&&(r.zmin=e.zmin,r.zmax=e.zmax);const i=J6(r.type,e.spatialReference,t);return i?.(r),r}catch(r){if(!(r instanceof WA))throw r;return null}}async function F3e(e,t,r){const i=e.spatialReference;return i!=null&&t!=null&&await g8(i,t,null,r),e2(e,t)}function ec(e,t,r){return!r&&(!!vi(e,t)||Wo(e)&&Wo(t)&&!!gte(e,t,bte))}function j3e(e,t){if(vi(e,t))return!0;if(!Wo(e)||!Wo(t))return!1;const r=by(e)||Ku(e)||ej(e),i=by(t)||Ku(t)||ej(t);return r&&i}async function g8(e,t,r,i){if(ef())return k3(i);if(Array.isArray(e)){for(const{source:s,dest:n,geographicTransformation:o}of e)if(s&&n&&!ec(s,n,o))return Rd(i)}else if(e&&t&&!ec(e,t,r))return Rd(i);return k3(i)}function DT(e,t,r){return e?"x"in e?Tte(e,t,new je,r,0):"xmin"in e?$te(e,t,new yt,r,0):"rings"in e?Ate(e,t,new Rs,r,0):"paths"in e?Ete(e,t,new Jo,r,0):"points"in e?Ite(e,t,new p1,r,0):null:null}function V3e(e,t,r=t.spatialReference,i=0){return r!=null&&e.spatialReference!=null&&Tte(e,e.spatialReference,t,r,i)!=null}function Tte(e,t,r,i,s){tn[0]=e.x,tn[1]=e.y;const n=e.z;return tn[2]=n!==void 0?n:s,uS(tn,t,0,tn,i,0,1)?(r.x=tn[0],r.y=tn[1],r.spatialReference=i,n!==void 0||$d(i)?(r.z=tn[2],r.hasZ=!0):(r.z=void 0,r.hasZ=!1),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function U3e(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Ite(e,e.spatialReference,t,r,i)!=null}function Ite(e,t,r,i,s){const{points:n,hasZ:o,hasM:a}=e,l=[],u=n.length,c=[];for(const f of n)c.push(f[0],f[1],o?f[2]:s);if(!uS(c,t,0,c,i,0,u))return null;const p=o||$d(i);for(let f=0;f<u;++f){const m=3*f,g=c[m],b=c[m+1];p&&a?l.push([g,b,c[m+2],n[f][3]]):p?l.push([g,b,c[m+2]]):a?l.push([g,b,n[f][2]]):l.push([g,b])}return r.points=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function z3e(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Ete(e,e.spatialReference,t,r,i)!=null}function Ete(e,t,r,i,s){const{paths:n,hasZ:o,hasM:a}=e,l=[];if(!Cte(n,o??!1,a??!1,t,l,i,s))return null;const u=o||$d(i);return r.paths=l,r.spatialReference=i,r.hasZ=u,r.hasM=a,r}function G3e(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&Ate(e,e.spatialReference,t,r,i)!=null}function Ate(e,t,r,i,s){const{rings:n,hasZ:o,hasM:a}=e,l=[];if(!Cte(n,o??!1,a??!1,t,l,i,s))return null;const u=o||$d(i);return r.rings=l,r.spatialReference=i,r.hasZ=u,r.hasM=a,r}function B3e(e,t,r=t.spatialReference,i=0){return e.spatialReference!=null&&r!=null&&$te(e,e.spatialReference,t,r,i)!=null}function $te(e,t,r,i,s){const{xmin:n,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:c}=e,p=u?e.zmin:s;if(!KU(n,o,p,t,tn,i))return null;const f=u||$d(i);r.xmin=tn[0],r.ymin=tn[1],f&&(r.zmin=tn[2]);const m=u?e.zmax:s;return KU(a,l,m,t,tn,i)?(r.xmax=tn[0],r.ymax=tn[1],f&&(r.zmax=tn[2]),c&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null}function Cte(e,t,r,i,s,n,o=0){const a=new Array;for(const c of e)for(const p of c)a.push(p[0],p[1],t?p[2]:o);if(!uS(a,i,0,a,n,0,a.length/3))return!1;let l=0;s.length=0;const u=t||$d(n);for(const c of e){const p=new Array;for(const f of c)u&&r?p.push([a[l++],a[l++],a[l++],f[3]]):u?p.push([a[l++],a[l++],a[l++]]):r?(p.push([a[l++],a[l++],f[2]]),l++):(p.push([a[l++],a[l++]]),l++);s.push(p)}return!0}const tn=zd(),tot=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:ec,getTransformation:Mte,getTransformations:k3e,initializeProjection:g8,isEqualBaseGCS:j3e,isLoaded:ef,isLoadedOrLoad:_te,isLoadedOrLoadFor:Ste,load:Rd,project:tf,projectExtent:B3e,projectMany:EL,projectMultipoint:U3e,projectOrLoad:L3e,projectOrLoadMany:xte,projectPoint:V3e,projectPolygon:G3e,projectPolyline:z3e,projectWithZConversion:F3e,projectWithoutEngine:DT,requiresLoad:R3e,test:D3e,tryProjectWithZConversion:e2,unload:N3e},Symbol.toStringTag,{value:"Module"}));async function q3e(e){const t=e.spatialReference;if(t.isWGS84)return e.clone();if(t.isWebMercator)return I0(e);const r=Fe.WGS84;return await g8(t,r),tf(e,r)}function H3e(e,t){if(!Ote(e,t)){const r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function Ote(e,t){return!!e.typeKeywords?.includes(t)}function XU(e){return Ote(e,J3e.HOSTED_SERVICE)}function W3e(e,t){const r=e.typeKeywords;if(r){const i=r.indexOf(t);i>-1&&r.splice(i,1)}}function rot(e,t,r){r?H3e(e,t):W3e(e,t)}async function iot(e){const t=e.clone().normalize();let r;if(t.length>1)for(const i of t)r?i.width>r.width&&(r=i):r=i;else r=t[0];return q3e(r)}const J3e={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table",HOSTED_SERVICE:"Hosted Service",LOCAL_SCENE:"ViewingMode-Local",TILED_IMAGERY:"Tiled Imagery",GROUP_LAYER_MAP:"Map"};function QU(e){const{portal:t,isOrgItem:r,itemControl:i}=e,s=t.user?.privileges;let n=!s||s.includes("features:user:edit"),o=!!r&&!!s?.includes("features:user:fullEdit");const a=i==="update"||i==="admin";return a?o=n=!0:o&&(n=!0),{features:{edit:n,fullEdit:o},content:{updateItem:a}}}const E1=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=jr(this.portalItem),this.resourceReferences.portalItem=null,this.resourceReferences.paths.length=0}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,s){if(i.itemId)return new J0({id:i.itemId,portal:s?.portal})}writePortalItem(r,i){r?.id&&(i.itemId=r.id)}async loadFromPortal(r,i){if(this.portalItem?.id)try{const{load:s}=await fe(()=>import("./layersLoader-C9LinuhP.js"),__vite__mapDeps([123,10,1,8,9,7,124]),import.meta.url);return dr(i),await s({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData,layerModuleTypeMap:r.layerModuleTypeMap},i)}catch(s){throw ws(s)||be.getLogger(this).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${s}`),s}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(r).catch(i=>(lo(i),!0)))}async setUserPrivileges(r,i){if(!Vt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(i);if(this.url)try{const{features:{edit:s,fullEdit:n},content:{updateItem:o}}=await this._fetchUserPrivileges(r,i);this._set("userHasEditingPrivileges",s),this._set("userHasFullEditingPrivileges",n),this._set("userHasUpdateItemPrivileges",o)}catch(s){lo(s)}}async _fetchUserPrivileges(r,i){let s=this.portalItem;if(!r||!s||!s.loaded||s.sourceUrl)return this._fetchFallbackUserPrivileges(i);const n=r===s.id;if(n&&s.portal.user)return QU(s);let o,a;if(n)o=s.portal.url;else try{o=await uY(this.url,i)}catch(p){lo(p)}if(!o||!gde(o,s.portal.url))return this._fetchFallbackUserPrivileges(i);try{const p=i!=null?i.signal:null;a=await sr?.getCredential(`${o}/sharing`,{prompt:!1,signal:p})}catch(p){lo(p)}const l=!0,u=!1,c=!1;if(!a)return{features:{edit:l,fullEdit:u},content:{updateItem:c}};try{if(n?await s.reload():(s=new J0({id:r,portal:{url:o}}),await s.load(i)),s.portal.user)return QU(s)}catch(p){lo(p)}return{features:{edit:l,fullEdit:u},content:{updateItem:c}}}async _fetchFallbackUserPrivileges(r){let i=!0;try{i=await this._fetchUserHasEditingPrivileges(r)}catch(s){lo(s)}return{features:{edit:i,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(r){const i=this.url?sr?.findCredential(this.url):null;if(!i)return!0;const s=Ix.credential===i?Ix.user:await this._fetchEditingUser(r);return Ix.credential=i,Ix.user=s,s?.privileges==null||s.privileges.includes("features:user:edit")}async _fetchEditingUser(r){const i=this.portalItem?.portal?.user;if(i)return i;const s=sr?.findServerInfo(this.url??"");if(!s?.owningSystemUrl)return null;const n=`${s.owningSystemUrl}/sharing/rest`,o=xo.getDefault();if(o&&o.loaded&&La(o.restUrl)===La(n))return o.user;const a=`${n}/community/self`,l=r!=null?r.signal:null,u=await sA(Re(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return u.ok?UD.fromJSON(u.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){const s=i?.portal,n=this.portalItem?.id&&(this.portalItem.portal||xo.getDefault());return s&&n&&!gZ(n.restUrl,s.restUrl)?(i.messages&&i.messages.push(new K("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return h([d({type:J0})],t.prototype,"portalItem",null),h([pe("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),h([ge("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),h([d({clonable:!1})],t.prototype,"resourceReferences",void 0),h([d({type:Boolean,readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),h([d({type:Boolean,readOnly:!0})],t.prototype,"userHasFullEditingPrivileges",void 0),h([d({type:Boolean,readOnly:!0})],t.prototype,"userHasUpdateItemPrivileges",void 0),t=h([j("esri.layers.mixins.PortalLayer")],t),t},Ix={credential:null,user:null};let cw=class extends et{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};h([d()],cw.prototype,"updating",void 0),h([d()],cw.prototype,"status",void 0),cw=h([j("esri.layers.support.PublishingInfo")],cw);const Z3e=cw,Y3e=Symbol(),K3e=e=>{var t;let r=class extends e{constructor(){super(...arguments),this[t]=!0}get publishingInfo(){if(this.destroyed)return null;const i=this._get("publishingInfo");if(i)return i;const s=new Z3e;return this._checkPublishingStatus(s),s}_checkPublishingStatus(i){let o=0;const a=async u=>{let c;i.updating=!0;try{c=await this.fetchPublishingStatus()}catch{c="unavailable"}c!=="published"&&c!=="unavailable"||(i.status==="publishing"&&this.refresh(),l.remove()),i.status=c,i.updating=!1,l.removed||(o=setTimeout(a,u,u+125))},l={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>l.remove()),a(250),this.addHandles(l)}};return t=Y3e,h([d({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=h([j("esri.layers.mixins.PublishableLayer")],r),r},pd=new qe,e_=new WeakMap;function X3e(e){eIe(e)&&pd.push(new WeakRef(e))}function Q3e(e){const t=pd.find(r=>r.deref()===e);t&&pd.remove(t)}function eIe(e){return e!=null&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function Pte(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Pte(t,e%t):0}let o5=0,Ex=0;function tIe(){const e=Date.now();let t=!1;for(const r of pd){const i=r.deref();i?i.refreshInterval&&e-(e_.get(i)??0)+5>=6e4*i.refreshInterval&&(e_.set(i,e),i.refresh(e)):t=!0}if(t)for(let r=pd.length-1;r>=0;r--)pd.at(r).deref()||pd.removeAt(r)}jJ(()=>{const e=Date.now();let t=0;for(const r of pd){const i=r.deref();i&&(t=Pte(Math.round(6e4*i.refreshInterval),t),i.refreshInterval?e_.get(i)||e_.set(i,e):e_.delete(i))}if(t!==Ex){if(Ex=t,clearInterval(o5),Ex===0)return void(o5=0);o5=setInterval(tIe,Ex)}});const ez=.1,A1=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=JE(()=>this.hasDataChanged()),this.when().then(()=>{this.destroyed||X3e(this)},()=>{})}destroy(){Q3e(this)}castRefreshInterval(r){return r>=ez?r:r<=0?0:ez}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){HC(this._debounceHasDataChanged()).then(i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})},i=>{be.getLogger(this).error(i),this.emit("refresh",{dataChanged:!1,error:i})})}async hasDataChanged(){return!0}get test(){}};return h([d({type:Number,json:{write:!0,origins:{"web-scene":{write:{enabled:!0,layerContainerTypes:gs}}}}})],t.prototype,"refreshInterval",void 0),h([Zt("refreshInterval")],t.prototype,"castRefreshInterval",null),h([d({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),h([d({readOnly:!0})],t.prototype,"refreshParameters",null),t=h([j("esri.layers.mixins.RefreshableLayer")],t),t},Xy=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const r={minScale:this.minScale,maxScale:this.maxScale},i=this.parent;i&&"effectiveScaleRange"in i&&rIe(r,i.effectiveScaleRange);const s=this._get("effectiveScaleRange");return s&&s.minScale===r.minScale&&s.maxScale===r.maxScale?s:r}};return h([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),h([d({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),h([d({readOnly:!0})],t.prototype,"effectiveScaleRange",null),t=h([j("esri.layers.mixins.ScaleRangeLayer")],t),t};function rIe(e,t){return e.minScale=e.minScale>0?t.minScale>0?Math.min(e.minScale,t.minScale):e.minScale:t.minScale,e.maxScale=e.maxScale>0?t.maxScale>0?Math.max(e.maxScale,t.maxScale):e.maxScale:t.maxScale,e}const Rte=Oi()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let hw=class extends Yt(ue){constructor(t){super(t),this.unit="milliseconds",this.value=0}toMilliseconds(){return dee(this.value,this.unit,"milliseconds")}};h([We(Rte,{nonNullable:!0})],hw.prototype,"unit",void 0),h([d({type:Number,json:{write:!0},nonNullable:!0})],hw.prototype,"value",void 0),hw=h([j("esri.TimeInterval")],hw);const xI=hw;function tz(e,t){return xI.fromJSON({value:e,unit:t})}let Ms=class extends Yt(ue){constructor(t){super(t),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeZone=null,this.trackIdField=null,this.useTime=!0,this.stops=null}readFullTimeExtent(t,r){return r.timeExtent&&Array.isArray(r.timeExtent)&&r.timeExtent.length===2?Bn.fromArray(r.timeExtent):null}writeFullTimeExtent(t,r){t?.start!=null&&t.end!=null?r.timeExtent=t.toArray():r.timeExtent=null}readInterval(t,r){return r.timeInterval&&r.timeIntervalUnits?tz(r.timeInterval,r.timeIntervalUnits):r.defaultTimeInterval&&r.defaultTimeIntervalUnits?tz(r.defaultTimeInterval,r.defaultTimeIntervalUnits):null}writeInterval(t,r){r.timeInterval=t?.toJSON().value??null,r.timeIntervalUnits=t?.toJSON().unit??null}};h([d({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],Ms.prototype,"cumulative",void 0),h([d({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],Ms.prototype,"endField",void 0),h([d({type:Bn,json:{write:{enabled:!0,allowNull:!0}}})],Ms.prototype,"fullTimeExtent",void 0),h([pe("fullTimeExtent",["timeExtent"])],Ms.prototype,"readFullTimeExtent",null),h([ge("fullTimeExtent")],Ms.prototype,"writeFullTimeExtent",null),h([d({type:Boolean,json:{write:!0}})],Ms.prototype,"hasLiveData",void 0),h([d({type:xI,json:{write:{enabled:!0,allowNull:!0}}})],Ms.prototype,"interval",void 0),h([pe("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Ms.prototype,"readInterval",null),h([ge("interval")],Ms.prototype,"writeInterval",null),h([d({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],Ms.prototype,"startField",void 0),h([d($v("timeReference",!0))],Ms.prototype,"timeZone",void 0),h([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Ms.prototype,"trackIdField",void 0),h([d({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],Ms.prototype,"useTime",void 0),h([d({type:[Date],json:{read:!1}})],Ms.prototype,"stops",void 0),Ms=h([j("esri.layers.support.TimeInfo")],Ms);const Lte=Ms,iIe={type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation",layerContainerTypes:gs}}},JA=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const s=i.timeInfo.exportOptions;if(!s)return null;const n=s.timeOffset,o=Rte.fromJSON(s.timeOffsetUnits);return n&&o?new xI({value:n,unit:o}):null}set timeInfo(r){lX(r,this.fieldsIndex),this._set("timeInfo",r)}};return h([d({type:Bn,json:{write:!1}})],t.prototype,"timeExtent",void 0),h([d({type:xI})],t.prototype,"timeOffset",void 0),h([pe("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),h([d({value:null,type:Lte,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),h([d(iIe)],t.prototype,"useViewTime",void 0),t=h([j("esri.layers.mixins.TemporalLayer")],t),t},rz=new wt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Ep=class extends Yt(ue){constructor(t){super(t),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};h([d({json:{write:!0}})],Ep.prototype,"name",void 0),h([d({json:{write:!0}})],Ep.prototype,"description",void 0),h([d({json:{read:rz.read,write:rz.write}})],Ep.prototype,"drawingTool",void 0),h([d({json:{write:!0}})],Ep.prototype,"prototype",void 0),h([d({json:{write:!0}})],Ep.prototype,"thumbnail",void 0),Ep=h([j("esri.layers.support.FeatureTemplate")],Ep);const v8=Ep;let Gc=class extends Yt(ue){constructor(t){super(t),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(t){const r={};for(const i of Object.keys(t))r[i]=FA(t[i]);return r}writeDomains(t,r){const i={};for(const s of Object.keys(t))t[s]&&(i[s]=t[s]?.toJSON());r.domains=i}};h([d({json:{write:!0}})],Gc.prototype,"id",void 0),h([d({json:{write:!0}})],Gc.prototype,"name",void 0),h([d({json:{write:!0}})],Gc.prototype,"domains",void 0),h([pe("domains")],Gc.prototype,"readDomains",null),h([ge("domains")],Gc.prototype,"writeDomains",null),h([d({type:[v8],json:{write:!0}})],Gc.prototype,"templates",void 0),Gc=h([j("esri.layers.support.FeatureType")],Gc);const b8=Gc;function sIe(){return{fields:{type:[Uo],value:null,set:function(e){if(e&&ce("big-integer-warning-enabled")){const t=e.filter(r=>r.type==="big-integer"||r.type==="oid"&&(r.length||0)>=8);if(t.length){const r=t.map(i=>`'${i.name}'`).join(", ");be.getLogger(this).warn("#fields",`Layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}') references big-integer field(s): ${r}, support for which is experimental. Only integers less than ${Number.MAX_SAFE_INTEGER} (Number.MAX_SAFE_INTEGER) are supported.`)}}this._set("fields",e)}},fieldsIndex:{readOnly:!0,get(){return LA.fromLayer(this)}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e?.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex?.has(t)||be.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return wA(this.fieldsIndex,e)}}}}const a5=()=>be.getLogger("esri.layers.support.labelingInfo"),nIe=/\[([^[\]]+)\]/gi;function l5(e,t,r){return e?e.map(i=>{const s=new lS;if(s.read(i,r),s.labelExpression){const n=t.fields||t.layerDefinition?.fields||this.fields;s.labelExpression=s.labelExpression.replaceAll(nIe,(o,a)=>`[${oIe(a,n)}]`)}return s}):null}function oIe(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const s=t[i].name;if(s.toLowerCase()===r)return s}return e}const aIe={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along","above-along","below-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function lIe(e,t){const r=[];for(const i of e){const s=i.labelPlacement,n=aIe[t];if(!i.symbol)return a5().warn("No ILabelClass symbol specified."),[];if(!n)return a5().error(new K("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),[];if(n.includes(s))r.push(i);else{const o=n[0];s&&a5().warn(`Found invalid label placement type ${s} for ${t}. Defaulting to ${o}`);const a=i.clone();a.labelPlacement=o,r.push(a)}}return r}const Kg=[];function w8(e,t){if(K6(e.url??""))return!0;const{wkid:r}=t;for(const i of Kg){if((e.version??0)>=i[0])return!0;if(typeof i[1]=="function"&&(i[1]=i[1]()),i[1].has(r))return!1}return!0}Kg.push([10.91,()=>{const e=new Set([9709,9716,9741,9761,9766]);for(let t=9712;t<=9713;t++)e.add(t);for(let t=9748;t<=9749;t++)e.add(t);for(let t=20904;t<=20932;t++)e.add(t);for(let t=21004;t<=21032;t++)e.add(t);for(let t=21207;t<=21264;t++)e.add(t);for(let t=21307;t<=21364;t++)e.add(t);for(let t=23301;t<=23333;t++)e.add(t);for(let t=102759;t<=102760;t++)e.add(t);for(let t=102934;t<=102955;t++)e.add(t);return e}]),Kg.push([10.9,()=>{const e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let t=9356;t<=9360;t++)e.add(t);for(let t=9404;t<=9407;t++)e.add(t);for(let t=9476;t<=9482;t++)e.add(t);for(let t=9487;t<=9494;t++)e.add(t);for(let t=9697;t<=9699;t++)e.add(t);return e}]),Kg.push([10.81,()=>{const e=new Set([9265,9333,103598,103699]);for(let t=9248;t<=9254;t++)e.add(t);for(let t=9271;t<=9273;t++)e.add(t);for(let t=9284;t<=9285;t++)e.add(t);for(let t=21453;t<=21463;t++)e.add(t);return e}]),Kg.push([10.8,()=>{const e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let t=8035;t<=8036;t++)e.add(t);for(let t=8455;t<=8456;t++)e.add(t);for(let t=8518;t<=8529;t++)e.add(t);for(let t=8533;t<=8536;t++)e.add(t);for(let t=8538;t<=8540;t++)e.add(t);for(let t=8677;t<=8679;t++)e.add(t);for(let t=8902;t<=8903;t++)e.add(t);for(let t=8907;t<=8910;t++)e.add(t);for(let t=8949;t<=8951;t++)e.add(t);for(let t=8972;t<=8987;t++)e.add(t);for(let t=9039;t<=9040;t++)e.add(t);for(let t=9068;t<=9069;t++)e.add(t);for(let t=9140;t<=9141;t++)e.add(t);for(let t=9148;t<=9150;t++)e.add(t);for(let t=9153;t<=9159;t++)e.add(t);for(let t=9205;t<=9218;t++)e.add(t);for(let t=9221;t<=9222;t++)e.add(t);for(let t=54098;t<=54101;t++)e.add(t);return e}]),Kg.push([10.71,()=>{const e=new Set([6316]);for(let t=8351;t<=8353;t++)e.add(t);for(let t=9294;t<=9297;t++)e.add(t);for(let t=22619;t<=22621;t++)e.add(t);for(let t=103586;t<=103594;t++)e.add(t);return e}]);async function uIe(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const s=await sA(i.populateFromStyle());if(dr(r),s.ok===!1){const n=s.error;t?.messages&&t.messages.push(new sa("renderer:style-reference",`Failed to create unique value renderer from style reference: ${n.message}`,{error:n,context:t})),e.clear("renderer",t?.origin)}}}var AL;let Xg=AL=class extends ue{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new AL({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};h([d({type:[String],json:{write:!0}})],Xg.prototype,"groupByFields",void 0),h([d({type:Number,json:{write:!0}})],Xg.prototype,"topCount",void 0),h([d({type:[String],json:{write:!0}})],Xg.prototype,"orderByFields",void 0),Xg=AL=h([j("esri.rest.support.TopFilter")],Xg);const cIe=Xg;var $L;const iz=new wt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),sz=new wt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Er=$L=class extends ue{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new $L(Z({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};h([d({type:Boolean,json:{write:!0}})],Er.prototype,"cacheHint",void 0),h([d({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Er.prototype,"distance",void 0),h([d({types:Ss,json:{read:bi,write:!0}})],Er.prototype,"geometry",void 0),h([d({type:Number,json:{write:!0}})],Er.prototype,"geometryPrecision",void 0),h([d({type:Number,json:{write:!0}})],Er.prototype,"maxAllowableOffset",void 0),h([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Er.prototype,"num",void 0),h([d({json:{write:!0}})],Er.prototype,"objectIds",void 0),h([d({type:[String],json:{write:!0}})],Er.prototype,"orderByFields",void 0),h([d({type:[String],json:{write:!0}})],Er.prototype,"outFields",void 0),h([d({type:Fe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Er.prototype,"outSpatialReference",void 0),h([d({type:String,json:{write:!0}})],Er.prototype,"resultType",void 0),h([d({json:{write:!0}})],Er.prototype,"returnGeometry",void 0),h([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Er.prototype,"returnM",void 0),h([d({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Er.prototype,"returnZ",void 0),h([d({type:Number,json:{read:{source:"resultOffset"}}})],Er.prototype,"start",void 0),h([ge("start"),ge("num")],Er.prototype,"writeStart",null),h([d({type:String,json:{read:{source:"spatialRel",reader:iz.read},write:{target:"spatialRel",writer:iz.write}}})],Er.prototype,"spatialRelationship",void 0),h([d({type:Bn,json:{write:!0}})],Er.prototype,"timeExtent",void 0),h([d({type:cIe,json:{write:!0}})],Er.prototype,"topFilter",void 0),h([d({type:String,json:{read:sz.read,write:{writer:sz.write,overridePolicy(e){return{enabled:e!=null&&this.distance!=null&&this.distance>0}}}}})],Er.prototype,"units",void 0),h([d({type:String,json:{write:!0}})],Er.prototype,"where",void 0),Er=$L=h([j("esri.rest.support.TopFeaturesQuery")],Er),Er.from=ni(Er);const Ax=Er;function _8({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:s},n){if(!r)return null;const o=fIe({editFieldsInfo:t,fields:r,objectIdField:i},n);if(!o.length)return null;const a=gIe({titleBase:s,fields:r,displayField:e}),l=yIe();return new Bd({title:a,content:l,fieldInfos:o})}const hIe=(e,t)=>t.visibleFieldNames?t.visibleFieldNames.has(e.name):s1e(e,t);function pIe(e,t){const r=e;return t&&(e=e.filter(i=>!t.includes(i.type))),e===r&&(e=e.slice()),e.sort(dIe),e}function dIe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:nz(e)?-1:nz(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function fIe(e,t){const r=t?.visibleFieldNames;return pIe(e.fields??[],t?.ignoreFieldTypes||vIe).map(i=>new f6({fieldName:i.name,isEditable:i1e(i,e),label:i.alias,format:mIe(i),visible:hIe(i,{...e,visibleFieldNames:r})}))}function mIe(e){switch(e.type){case"small-integer":case"integer":case"single":return new ZM({digitSeparator:!0,places:0});case"double":return new ZM({digitSeparator:!0,places:2});case"string":return $1e(e.name)?new ZM({digitSeparator:!0,places:0}):void 0;default:return}}function yIe(){return[new B_,new G_]}function gIe(e){const t=Wve(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r??""}function nz(e){return(e.name&&e.name.toLowerCase())==="name"?!0:e.alias?.toLowerCase()==="name"}const vIe=["geometry","blob","raster","guid","xml"];var Ru;(function(e){e[e.SAVE=0]="SAVE",e[e.SAVE_AS=1]="SAVE_AS"})(Ru||(Ru={}));const _n="FeatureLayer";function $x(e,t){return new K("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}function oz(e){return e&&e instanceof qe}const u5=sIe();function c5(e,t,r){const i=!!r?.writeLayerSchema;return{enabled:i,ignoreOrigin:i}}let Ye=class extends NTe(c3e(zMe(K3e(LMe(Ky(m3e(JA(Xy(A1(jA(I1(E1(Zd(GA(Z6(Yt(Yd))))))))))))))))){constructor(...e){super(...e),this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.resourceInfo=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Fe.WGS84,this.subtypeCode=null,this.supportedSourceTypes=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0,this._debouncedSaveOperations=JE(async(t,r,i)=>{const{save:s,saveAs:n}=await fe(()=>import("./featureLayerUtils-Cc6X0ju_.js"),__vite__mapDeps([125,126,127,128,124,129,130,10,1]),import.meta.url);switch(t){case Ru.SAVE:return s(this,r);case Ru.SAVE_AS:return n(this,i,r)}})}destroy(){this.source?.destroy()}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=e!=null?e.signal:null;if(this.portalItem?.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(t).then(i=>this.initLayerProperties(i))),Promise.resolve(this);const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e).catch(lo).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const i=await this._fetchFirstValidLayerId(t);i!=null&&(this.layerId=i)}if(!this.url&&!this._hasMemorySource())throw new K("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(t))}).then(()=>vTe(this,"load",e));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,u8(t,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities?.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}get effectiveEditingEnabled(){return bTe(this)}readIsTable(e,t){return(t=t?.layerDefinition??t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i?.writeLayerSchema&&mn(r,e?"Table":"Feature Layer",t)}readGlobalIdField(e,t){return rte(t.layerDefinition||t)}readObjectIdField(e,t){return ite(t.layerDefinition||t)}get parsedUrl(){const e=gi(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=Oh(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=Oh(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){jO(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){t=t.layerDefinition||t;const i=t.drawingInfo?.renderer;if(i){const s=Z_(i,t,r)??void 0;return s||be.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),s}return l8(t,r)}set source(e){const t=this._get("source");t!==e&&(oz(t)&&this._resetMemorySource(t),oz(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof qe?new oh({layer:this,items:e}):e:null}readSource(e,t){const r=Yy.fromJSON(t.featureSet);return new oh({layer:this,items:r?.features??[]})}readTemplates(e,t){const r=t.editFieldsInfo,i=r?.creatorField,s=r?.editorField;return e=e?.map(n=>v8.fromJSON(n)),this._fixTemplates(e,i),this._fixTemplates(e,s),e}readTitle(e,t){const r=t.layerDefinition?.name??t.name,i=t.title||t.layerDefinition?.title;if(r){const s=this.portalItem?.title;if(this.sublayerTitleMode==="item-title")return this.url?KSe(this.url,r):r;let n=r;if(!n&&this.url){const o=Lh(this.url);o!=null&&(n=o.title)}return n?(this.sublayerTitleMode==="item-title-and-service-name"&&s&&s!==n&&(n=s+" - "+n),Y6(n)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){return t.title||t.layerDefinition?.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(s=>s.name.toLowerCase()===r);i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r?.creatorField,s=r?.editorField;return e?.map(n=>(n=b8.fromJSON(n),this._fixTemplates(n.templates,i),this._fixTemplates(n.templates,s),n))}readVisible(e,t){return t.layerDefinition?.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}async addAttachment(e,t){return tTe(this,e,t,_n)}async updateAttachment(e,t,r){return rTe(this,e,t,r,_n)}async applyEdits(e,t){return iTe(this,e,t)}async uploadAssets(e,t){return sTe(this,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return _8(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:t}=await wu(fe(()=>import("./FeatureLayerSource-CeL7i0Ih.js"),__vite__mapDeps([131,1,48,54,132,51,91,50,92,121,35,34]),import.meta.url),e);return new t({layer:this,supportedSourceTypes:this.supportedSourceTypes}).load({signal:e})}createQuery(){const e=fTe(this);e.dynamicDataSource=this.dynamicDataSource;const t=this.subtypeCode!=null?`${this.subtypeField} = ${this.subtypeCode}`:null,r=t6(this.definitionExpression,t);return e.where=r||"1=1",e}async deleteAttachments(e,t){return nTe(this,e,t,_n)}async fetchRecomputedExtents(e){return oTe(this,e,_n)}getFeatureType(e){return ste(this.types,this.typeIdField,e)}getFieldDomain(e,t){const r=t?.feature,i=yTe(this,r);if(i){const n=i.domains?.[e];return n?.type==="inherited"?this._getLayerDomain(e):n}const s=this.getFeatureType(r);if(s){const n=s.domains&&s.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,t){return aTe(this,e,t,_n)}async queryFeatures(e,t){const r=await this.load(),i=await r.source.queryFeatures(Ci.from(e)??r.createQuery(),t);if(i?.features)for(const s of i.features)s.layer=s.sourceLayer=r;return i}async queryObjectIds(e,t){return lTe(this,e,t,_n)}async queryFeatureCount(e,t){return uTe(this,e,t,_n)}async queryExtent(e,t){return cTe(this,e,t,_n)}async queryRelatedFeatures(e,t){return hTe(this,e,t,_n)}async queryRelatedFeaturesCount(e,t){return pTe(this,e,t,_n)}async queryTopFeatures(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopFeatures||!i?.query?.supportsTopFeaturesQuery)throw new K(_n,"Layer source does not support queryTopFeatures capability");const s=await r.queryTopFeatures(Ax.from(e),t);if(s?.features)for(const n of s.features)n.layer=n.sourceLayer=this;return s}async queryTopObjectIds(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopObjectIds||!i?.query.supportsTopFeaturesQuery)throw new K(_n,"Layer source does not support queryTopObjectIds capability");return r.queryTopObjectIds(Ax.from(e),t)}async queryTopFeaturesExtent(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopExtents||!i?.query?.supportsTopFeaturesQuery)throw new K(_n,"Layer source does not support queryTopExtents capability");return r.queryTopExtents(Ax.from(e),t)}async queryTopFeatureCount(e,t){const{source:r,capabilities:i}=await this.load();if(!r.queryTopCount||!i?.query?.supportsTopFeaturesQuery)throw new K(_n,"Layer source does not support queryFeatureCount capability");return r.queryTopCount(Ax.from(e),t)}read(e,t){const r=e.featureCollection;if((r||e.type==="Feature Collection")&&(this.resourceInfo=e),r){const i=r.layers;i&&i.length===1&&(super.read(i[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo","dateFieldsTimeZone"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,t){t={...t,origin:t?.origin??void 0,writeLayerSchema:t?.writeLayerSchema??this._hasMemorySource()};const{origin:r,layerContainerType:i,messages:s}=t;if(this.dynamicDataSource)return s?.push($x(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if((r==="web-map"||r==="web-scene")&&i!=="tables")return s?.push($x(this,`a table source can only be written to tables, not ${i}`)),null;if(this._hasMemorySource())return s?.push($x(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&(r==="web-map"||r==="web-scene")&&i==="tables")return s?.push($x(this,"using a non-table source cannot be written to tables in web maps or web scenes")),null;return super.write(e,t)}clone(){if(this._hasMemorySource())throw new K(_n,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){return!!this.loaded&&(this.source?.type==="memory"||w8(this,e))}async save(e){return this._debouncedSaveOperations(Ru.SAVE,e)}async saveAs(e,t){return this._debouncedSaveOperations(Ru.SAVE_AS,t,e)}_readEditingEnabled(e,t,r){let i=e.layerDefinition?.capabilities;return i?this._hasEditingCapability(i):(i=e.capabilities,t&&r?.origin==="web-map"&&!this._hasMemorySource()&&i?this._hasEditingCapability(i):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,i){if(!e){const s=this.capabilities?.operations?.supportsSync?"Query,Sync":"Query";mn("layerDefinition.capabilities",s,t),r&&!i?.writeLayerSchema&&(t.capabilities=s)}}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstValidLayerId(e){return Re(this.url??"",{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return this.findFirstValidLayerId(r)})}async initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:this.portalItem?.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),jO(this.renderer,this.fieldsIndex),lX(this.timeInfo,this.fieldsIndex),uIe(this,{origin:"service"})}async hasDataChanged(){return dTe(this)}async fetchPublishingStatus(){const e=this.source;return e?.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){const e=this.parsedUrl?.path??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields?.some(t=>t.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{const i=r.prototype?.attributes;i&&t&&delete i[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new K("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new K("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this.addHandles([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this.removeHandles("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}findFirstValidLayerId(e){return Array.isArray(e.layers)&&e.layers.length>0?e.layers[0].id:Array.isArray(e.tables)&&e.tables.length>0?e.tables[0].id:void 0}};h([pe("service","capabilities")],Ye.prototype,"readCapabilities",null),h([d({json:{origins:{"web-scene":{write:!1}},write:!0}})],Ye.prototype,"charts",void 0),h([d({readOnly:!0})],Ye.prototype,"createQueryVersion",null),h([d({json:{read:{source:"layerDefinition.copyrightText"}}})],Ye.prototype,"copyright",void 0),h([d({json:{read:{source:"layerDefinition.displayField"}}})],Ye.prototype,"displayField",void 0),h([d({types:Km,readOnly:!0})],Ye.prototype,"defaultSymbol",void 0),h([d({type:kn})],Ye.prototype,"dynamicDataSource",void 0),h([d({type:Boolean})],Ye.prototype,"editingEnabled",null),h([pe(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ye.prototype,"readEditingEnabled",null),h([pe("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ye.prototype,"readEditingEnabledFromWebMap",null),h([ge(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ye.prototype,"writeEditingEnabled",null),h([ge("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ye.prototype,"writeEditingEnabledToWebMap",null),h([d({readOnly:!0})],Ye.prototype,"effectiveEditingEnabled",null),h([d({...u5.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:c5}}}}})],Ye.prototype,"fields",void 0),h([d(u5.fieldsIndex)],Ye.prototype,"fieldsIndex",void 0),h([d({type:lSe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ye.prototype,"formTemplate",void 0),h([d({json:{read:{source:"layerDefinition.extent"}}})],Ye.prototype,"fullExtent",void 0),h([d({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:c5,writer(e,t,r){const i=e?yL.toJSON(e):null;i&&mn(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:yL.read}}})],Ye.prototype,"geometryType",void 0),h([d({json:{read:{source:"layerDefinition.hasM"}}})],Ye.prototype,"hasM",void 0),h([d({json:{read:{source:"layerDefinition.hasZ"}}})],Ye.prototype,"hasZ",void 0),h([d(Xee)],Ye.prototype,"id",void 0),h([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ye.prototype,"infoFor3D",void 0),h([d({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ye.prototype,"isTable",void 0),h([pe("service","isTable",["type","geometryType"]),pe("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ye.prototype,"readIsTable",null),h([ge("web-map","isTable")],Ye.prototype,"writeIsTable",null),h([d(s8)],Ye.prototype,"labelsVisible",void 0),h([d({type:[lS],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:l5,write:!1},"web-scene":{name:"layerDefinition.drawingInfo.labelingInfo",read:l5,write:{enabled:!0,layerContainerTypes:gs}}},name:"layerDefinition.drawingInfo.labelingInfo",read:l5,write:!0}})],Ye.prototype,"labelingInfo",void 0),h([d((()=>{const e=Z(JMe);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(t,r,i){mn(i,xA(t),r)}}},e})())],Ye.prototype,"opacity",void 0),h([d(n8)],Ye.prototype,"legendEnabled",void 0),h([d({type:["show","hide"],json:(()=>{const e=Z(Qee.json);return e.origins["portal-item"]={read:!1,write:!1},e})()})],Ye.prototype,"listMode",void 0),h([pe("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Ye.prototype,"readGlobalIdField",null),h([d({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:c5}}}}})],Ye.prototype,"objectIdField",void 0),h([pe("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Ye.prototype,"readObjectIdField",null),h([d({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ye.prototype,"operationalLayerType",void 0),h([d(u5.outFields)],Ye.prototype,"outFields",void 0),h([d({readOnly:!0})],Ye.prototype,"parsedUrl",null),h([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ye.prototype,"path",void 0),h([d(nS)],Ye.prototype,"popupEnabled",void 0),h([d({type:Bd,json:{name:"popupInfo",write:!0}})],Ye.prototype,"popupTemplate",void 0),h([d({readOnly:!0})],Ye.prototype,"defaultPopupTemplate",null),h([d({types:iS,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:eee,name:"layerDefinition.drawingInfo.renderer",write:{layerContainerTypes:gs,overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema})}}})],Ye.prototype,"renderer",null),h([pe("service","renderer",["drawingInfo.renderer","defaultSymbol"]),pe("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ye.prototype,"readRenderer",null),h([d()],Ye.prototype,"resourceInfo",void 0),h([d((()=>{const e=Z(HMe);return e.json.origins["portal-item"]={read:!1,write:!1},e})())],Ye.prototype,"screenSizePerspectiveEnabled",void 0),h([d({clonable:!1})],Ye.prototype,"source",null),h([Zt("source")],Ye.prototype,"castSource",null),h([pe("portal-item","source",["featureSet"]),pe("web-map","source",["featureSet"])],Ye.prototype,"readSource",null),h([d({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Ye.prototype,"spatialReference",void 0),h([d({type:Number})],Ye.prototype,"subtypeCode",void 0),h([d({type:[v8]})],Ye.prototype,"templates",void 0),h([pe("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ye.prototype,"readTemplates",null),h([d({type:Lte})],Ye.prototype,"timeInfo",void 0),h([d()],Ye.prototype,"title",void 0),h([pe("service","title",["name"]),pe("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ye.prototype,"readTitle",null),h([pe("web-map","title",["layerDefinition.name","title"])],Ye.prototype,"readTitleFromWebMap",null),h([d({type:String})],Ye.prototype,"sublayerTitleMode",void 0),h([d({json:{read:!1}})],Ye.prototype,"type",void 0),h([d({type:String})],Ye.prototype,"typeIdField",void 0),h([pe("service","typeIdField"),pe("typeIdField",["layerDefinition.typeIdField"])],Ye.prototype,"readTypeIdField",null),h([d({type:[b8]})],Ye.prototype,"types",void 0),h([pe("service","types",["types"]),pe("types",["layerDefinition.types"])],Ye.prototype,"readTypes",null),h([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ye.prototype,"visible",void 0),h([pe("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ye.prototype,"readVisible",null),Ye=h([j("esri.layers.FeatureLayer")],Ye);const S8=Ye,bIe=Object.freeze(Object.defineProperty({__proto__:null,default:S8},Symbol.toStringTag,{value:"Module"}));let t_=class extends qe{constructor(t){super(t),this.addHandles([this.on("before-add",r=>{r.item==null&&r.preventDefault()}),this.on("after-add",r=>this._own(r.item)),this.on("after-remove",r=>this._release(r.item))])}get owner(){return this._get("owner")}set owner(t){t!==this._get("owner")&&(this._releaseAll(),this._set("owner",t),this._ownAll())}_ownAll(){for(const t of this.items)this._own(t)}_releaseAll(){for(const t of this.items)this._release(t)}_createNewInstance(t){return this.itemType?new(qe.ofType(this.itemType.Type))(t):new qe(t)}};function CL(e,t){return{type:e,cast:OZ,set(r){const i=Id(r,this._get(t),e);i.owner=this,this._set(t,i)}}}h([d()],t_.prototype,"owner",null),t_=h([j("esri.core.support.OwningCollection")],t_);let ty=class extends t_{_own(t){t.layer&&"remove"in t.layer&&t.layer!==this.owner&&t.layer.remove(t),t.layer=this.owner}_release(t){t.layer===this.owner&&(t.layer=null)}};h([$D({Type:Ga,ensureType:ni(Ga)})],ty.prototype,"itemType",void 0),ty=h([j("esri.support.GraphicsCollection")],ty);let Bc=class extends Ky(Xy(Yd)){constructor(t){super(t),this.elevationInfo=null,this.graphics=new ty,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(t){return this.graphics.add(t),this}addMany(t){return this.graphics.addMany(t),this}removeAll(){return this.graphics.removeAll(),this}remove(t){this.graphics.remove(t)}removeMany(t){this.graphics.removeMany(t)}on(t,r){return super.on(t,r)}graphicChanged(t){this.emit("graphic-update",t)}};h([d({type:Yee})],Bc.prototype,"elevationInfo",void 0),h([d(CL(ty,"graphics"))],Bc.prototype,"graphics",void 0),h([d({type:["show","hide"]})],Bc.prototype,"listMode",void 0),h([d()],Bc.prototype,"screenSizePerspectiveEnabled",void 0),h([d({readOnly:!0})],Bc.prototype,"type",void 0),h([d({constructOnly:!0})],Bc.prototype,"internal",void 0),Bc=h([j("esri.layers.GraphicsLayer")],Bc);const wIe=Bc;var OL;const Cx=new wt({flow_from:"flow-from",flow_to:"flow-to"});let Zs=OL=class extends Jd(ue){constructor(e){super(e),this.density=.8,this.color=new Le([255,255,255,1]),this.maxPathLength=200,this.trailWidth=1.5,this.flowSpeed=10,this.trailLength=100,this.smoothing=0,this.flowRepresentation="flow-from",this.type="flow",this.authoringInfo=null,this.legendOptions=null,this.trailCap="butt",this.background="none"}clone(){const{density:e,maxPathLength:t,trailWidth:r,flowSpeed:i,trailLength:s,smoothing:n,flowRepresentation:o,trailCap:a,background:l}=this,u=this.color.clone(),c=(this.visualVariables||[]).map(m=>m.clone()),p=this.authoringInfo?.clone(),f=this.legendOptions?.clone();return new OL({density:e,color:u,maxPathLength:t,trailWidth:r,flowSpeed:i,trailLength:s,trailCap:a,background:l,smoothing:n,flowRepresentation:o,visualVariables:c,authoringInfo:p,legendOptions:f})}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}};h([d({type:Number,json:{write:!0}})],Zs.prototype,"density",void 0),h([d({type:Le,json:{write:{allowNull:!0}}})],Zs.prototype,"color",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],Zs.prototype,"maxPathLength",void 0),h([d({type:Number,cast:Ut,json:{write:!0}})],Zs.prototype,"trailWidth",void 0),h([d({type:Number,json:{write:!0}})],Zs.prototype,"flowSpeed",void 0),h([d({type:Number,json:{write:!0}})],Zs.prototype,"trailLength",void 0),h([d({type:Number,cast:Ut,json:{write:!1}})],Zs.prototype,"smoothing",void 0),h([d({type:Cx.apiValues,json:{type:Cx.jsonValues,read:{reader:Cx.read},write:{writer:Cx.write}}})],Zs.prototype,"flowRepresentation",void 0),h([We({flowRenderer:"flow"})],Zs.prototype,"type",void 0),h([d({type:X2,json:{write:!0}})],Zs.prototype,"authoringInfo",void 0),h([d({type:Xm,json:{write:!0}})],Zs.prototype,"legendOptions",void 0),h([d({type:String,json:{write:!0}})],Zs.prototype,"trailCap",void 0),h([d({type:String,json:{write:!0}})],Zs.prototype,"background",void 0),Zs=OL=h([j("esri.renderers.FlowRenderer")],Zs);const kte=Zs;let Qg=class extends ue{constructor(){super(...arguments),this.value=null,this.label=null,this.color=null}};h([d({type:Number,json:{write:!0}})],Qg.prototype,"value",void 0),h([d({type:String,json:{write:!0}})],Qg.prototype,"label",void 0),h([d({type:Le,json:{type:[St],write:!0}})],Qg.prototype,"color",void 0),Qg=h([j("esri.renderers.support.ColormapInfo")],Qg);const Nte=Qg,dot=["random","ndvi","ndvi2","ndvi3","elevation","gray","hillshade"],x8=[{id:"aspect",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"black-to-white",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blue-bright",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blue-light-to-dark",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blue-green-bright",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blue-green-light-to-dark",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brown-light-to-dark",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brown-to-blue-green-diverging-right",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brown-to-blue-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficient-bias",fromColor:[214,214,255],toColor:[0,57,148]},{id:"cold-to-hot-diverging",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"condition-number",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyan-to-purple",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyan-light-to-blue-dark",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors",fromColor:[255,235,214],toColor:[196,10,10]},{id:"gray-light-to-dark",fromColor:[219,219,219],toColor:[69,69,69]},{id:"green-bright",fromColor:[204,255,204],toColor:[14,204,14]},{id:"green-light-to-dark",fromColor:[220,245,233],toColor:[34,102,51]},{id:"green-to-blue",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orange-bright",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orange-light-to-dark",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partial-spectrum",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partial-spectrum-1-diverging",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partial-spectrum-2-diverging",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pink-to-yellow-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pink-to-yellow-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purple-bright",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purple-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purple-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purple-blue-bright",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purple-blue-light-to-dark",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purple-red-bright",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purple-red-light-to-dark",fromColor:[250,215,246],toColor:[143,17,57]},{id:"red-bright",fromColor:[255,204,204],toColor:[219,0,0]},{id:"red-light-to-dark",fromColor:[255,224,224],toColor:[143,10,10]},{id:"red-to-blue-diverging-bright",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"red-to-blue-diverging-dark",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"red-to-green",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"red-to-green-diverging-bright",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"red-to-green-diverging-dark",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrum-full-bright",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrum-full-dark",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrum-full-light",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"white-to-black",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellow-to-dark-red",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellow-to-green-to-dark-blue",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellow-to-red",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellow-green-bright",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellow-green-light-to-dark",fromColor:[215,240,175],toColor:[96,107,45]}],_Ie=new wt({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function Ox(e,t){if(!e||!t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]>t[r]+2||e[r]<t[r]-2)return!1;return!0}function az(e){const t=e.clone();return t.fromColor=e.toColor,t.toColor=e.fromColor,t.algorithm=e.algorithm,t}function SIe(e){if(e.type==="multipart"){const t=e.clone();return t.colorRamps?.length&&(t.colorRamps=t.colorRamps.reverse().map(r=>az(r))),t}return az(e)}function lz(e,t){if(!e)return;const r=x8;let i=null;return e.type==="algorithmic"?r.some(s=>{if(Ox(e.fromColor.toRgb(),s.fromColor)&&Ox(e.toColor.toRgb(),s.toColor))return i=s.id,!0}):e.type==="multipart"&&r.some(s=>{const n=e.colorRamps,o=s.colorRamps;if(n&&o&&n.length===o.length&&!o.some((a,l)=>{if(!Ox(n[l].fromColor.toRgb(),new Le(a.fromColor).toRgb())||!Ox(n[l].toColor.toRgb(),new Le(a.toColor).toRgb()))return!0})){if(i)return!0;i=s.id}}),i}function xIe(e,t,r=!1){if(!e)return;let i=!1,s=lz(e);return s!=null||r||(i=!0,s=lz(e=SIe(e))),s?{id:s,inverted:i}:void 0}function Dte(e,t=!1){const r=typeof e=="string"?e:xIe(e,void 0,t)?.id;return r?_Ie.toJSON(r):null}function fot(e,t="esriCIELabAlgorithm"){const r=x8.find(({id:i})=>i===e);return r?r.colorRamps?{type:"multipart",colorRamps:r.colorRamps.map(i=>({type:"algorithmic",algorithm:t,fromColor:[...i.fromColor],toColor:[...i.toColor]}))}:{type:"algorithmic",algorithm:t,fromColor:[...r.fromColor],toColor:[...r.toColor]}:null}function Fte(e){const t=(e=e||{}).numColors||256,r=e.distanceOffset||0,i=e.isCustomInterval!=null?e.isCustomInterval:e.distanceInterval!==null&&e.distanceInterval!==1/(t-1),s=e.distanceInterval||1/(t-1);return{...e,numColors:t,distanceOffset:r,interpolateAlpha:!!e.interpolateAlpha,distanceInterval:s,isCustomInterval:i,weights:e.weights}}function MIe(e,t,r){const{numColors:i,distanceOffset:s,distanceInterval:n,isCustomInterval:o}=r,a=e.s===0,l=t.s===0;let u=e.h,c=t.h;a&&!l?u=c:l&&!a&&(t={...t,h:u},c=u);let p,f=Math.abs(c-u);const m=360;f<m/2?p=(c-u)*n:(f=m-f,p=u>c?f*n:-f*n);const g=(t.s-e.s)*n,b=(t.v-e.v)*n;let{s:w,v:S}=e,M=u;if(s){const _=s/n;M=(M+_*p+m)%m,w+=_*g,S+=_*b}const x=[];for(let _=0;_<i-1;_++)x.push({h:M,s:w,v:S}),M=(M+p+m)%m,w+=g,S+=b;return x.push(o?{h:M,s:w,v:S}:t),x}function TIe(e,t,r){const{numColors:i,distanceOffset:s,distanceInterval:n,isCustomInterval:o}=r;let{l:a,a:l,b:u}=e;const c=(t.l-a)*n,p=(t.a-l)*n,f=(t.b-u)*n,m=[];if(s){const g=s/n;a+=g*c,l+=g*p,u+=g*f}for(let g=0;g<i-1;g++)m.push({l:a,a:l,b:u}),a+=c,l+=p,u+=f;return m.push(o?{l:a,a:l,b:u}:t),m}function IIe(e,t,r){const{numColors:i,distanceOffset:s,distanceInterval:n,isCustomInterval:o}=r,a=e.h,l=t.h,u=2*Math.PI;let c;if(a<=l){const M=l-a,x=l-a-u;c=Math.abs(x)<Math.abs(M)?x:M}else{const M=l+u-a,x=l-a;c=Math.abs(x)<Math.abs(M)?x:M}const p=c*n,f=(t.l-e.l)*n,m=(t.c-e.c)*n;let{l:g,c:b,h:w}=e;if(s){const M=s/n;g+=M*f,b+=M*m,w=(w+M*p+u)%u}const S=[];for(let M=0;M<i-1;M++)S.push({l:g,c:b,h:w}),g+=f,b+=m,w=(w+p+u)%u;return S.push(o?{l:g,c:b,h:w}:t),S}function jte(e,t){let{fromColor:r,toColor:i}=e;r=[...r],i=[...i],r.length===3&&(r=r.concat([255])),i.length===3&&(i=i.concat([255]));const s=e.algorithm||"esriCIELabAlgorithm",n=Fte(t),{numColors:o,distanceOffset:a,isCustomInterval:l,interpolateAlpha:u}=n;if(o===1&&a===0)return[r];if(o===2&&a===0&&!l)return[r,i];const c={r:r[0],g:r[1],b:r[2]},p={r:i[0],g:i[1],b:i[2]},f=s==="esriCIELabAlgorithm"?TIe(AV(c),AV(p),n):s==="esriHSVAlgorithm"?MIe(gI(c),gI(p),n):IIe($V(c),$V(p),n),m=[],g=r[3]??255,b=((i[3]??255)-g)/(o-1);for(let w=0;w<o;w++){const{r:S,g:M,b:x}=NA(f[w]),_=u?Math.round(g+b*w):255;m.push([S,M,x,_])}return m}function EIe(e,t){const{numColors:r,interpolateAlpha:i}=Fte(t);let s=t?.weights;const{colorRamps:n}=e;if(s){const p=s.reduce((f,m)=>f+m);s=s.map(f=>f/p)}else{s=[];for(let p=0;p<n.length;p++)s[p]=1/n.length}const o=[],a=1/(r-1);let l=0,u=!1;for(let p=0;p<n.length;p++){const f=o.length,m=u?0:f*a-l;l+=s[p];let g=p===n.length-1?r-1-f:(s[p]-m)/a;if(u=Math.ceil(g)===g,g=Math.ceil(g),g===0)continue;const b=jte(n[p],{numColors:g,interpolateAlpha:i,distanceOffset:m/s[p],distanceInterval:a/s[p]});o.push(...b)}const c=[...n[n.length-1].toColor];return c.length===3&&c.push(255),o.push(c),o}function AIe(e,t){const r=D_(e)?e.toJSON():e;return r.type==="multipart"?EIe(r,t):jte(r,t)}function kv(e,t){const r=AIe(e,t),i=t?.interpolateAlpha;return r.forEach((s,n)=>{s.unshift(n),i||s.pop()}),r}function uz(e){const t=gI(e);return{type:"HsvColor",Hue:t.h,Saturation:t.s,Value:t.v,AlphaValue:255}}function cz(e){return{Algorithm:e.toJSON()?.Algorithm||"esriHSVAlgorithm",type:"AlgorithmicColorRamp",FromColor:uz(e.fromColor),ToColor:uz(e.toColor)}}function Vte(e){const t=Dte(e);if(!t)return null;if(e.type==="algorithmic")return{...cz(e),Name:t};if(e.colorRamps){const r=e.colorRamps.map(cz);return{type:"MultiPartColorRamp",NumColorRamps:r.length,ArrayOfColorRamp:r,Name:t}}return null}function $Ie(e){const t=e.reverse().map(r=>{const i=r.toString(16);return i.length<2?"0"+i:i});return 4294967295&Number.parseInt(t.join(""),16)}var pw;let dw=pw=class extends ue{constructor(e){super(e),this.colormapInfos=null,this.type="raster-colormap"}static createFromColormap(e,t){if(!e)return null;const r=e[0].length===5,i=[...e].sort((s,n)=>s[0]-n[0]).map(s=>Nte.fromJSON({value:s[0],color:r?s.slice(1,5):s.slice(1,4).concat([255]),label:t?t[s[0]]??"":s[0]}));return new pw({colormapInfos:i})}static createFromColorramp(e){const t=kv(e);return pw.createFromColormap(t)}clone(){return new pw({colormapInfos:this.colormapInfos.map(e=>e.toJSON())})}extractColormap(){return this.colormapInfos.map(({value:e,color:t})=>[e,t.r,t.g,t.b,t.a>1?t.a:255*t.a&255]).sort((e,t)=>e[0]-t[0])}};h([d({type:[Nte],json:{write:!0}})],dw.prototype,"colormapInfos",void 0),h([We({rasterColormap:"raster-colormap"})],dw.prototype,"type",void 0),dw=pw=h([j("esri.renderers.RasterColormapRenderer")],dw);const M8=dw;var PL;let ko=PL=class extends ue{constructor(e){super(e),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType="traditional",this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType="none",this.type="raster-shaded-relief",this.zFactor=1}readColorRamp(e){return L6(e)}clone(){return new PL({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:Z(this.colorRamp)})}};h([d({type:Number,json:{write:!0}})],ko.prototype,"altitude",void 0),h([d({type:Number,json:{write:!0}})],ko.prototype,"azimuth",void 0),h([d({types:R6,json:{write:!0}})],ko.prototype,"colorRamp",void 0),h([pe("colorRamp")],ko.prototype,"readColorRamp",null),h([d({type:["traditional","multi-directional"],json:{write:!0}})],ko.prototype,"hillshadeType",void 0),h([d({type:Number,json:{write:!0}})],ko.prototype,"pixelSizePower",void 0),h([d({type:Number,json:{write:!0}})],ko.prototype,"pixelSizeFactor",void 0),h([d({type:["none","adjusted"],json:{write:!0}})],ko.prototype,"scalingType",void 0),h([We({rasterShadedRelief:"raster-shaded-relief"})],ko.prototype,"type",void 0),h([d({type:Number,json:{write:!0}})],ko.prototype,"zFactor",void 0),ko=PL=h([j("esri.renderers.RasterShadedReliefRenderer")],ko);const Ute=ko,r_=new wt({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),zte={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};var RL;let Mi=RL=class extends ue{constructor(e){super(e),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.statistics=[],this.histograms=null,this.useGamma=!1,this.stretchType="none",this.type="raster-stretch"}readColorRamp(e){if(e)return L6(e)}writeStatistics(e,t,r){e?.length&&(Array.isArray(e[0])||(e=e.map(i=>[i.min,i.max,i.avg,i.stddev])),t[r]=e)}readStretchType(e,t){let r=t.stretchType;return typeof r=="number"&&(r=zte[r]),r_.read(r)}clone(){return new RL({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:Z(this.statistics),gamma:Z(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:Z(this.colorRamp),histograms:Z(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};h([d({types:R6,json:{write:!0}})],Mi.prototype,"colorRamp",void 0),h([pe("colorRamp")],Mi.prototype,"readColorRamp",null),h([d({type:Boolean,json:{write:!0}})],Mi.prototype,"computeGamma",void 0),h([d({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],Mi.prototype,"dynamicRangeAdjustment",void 0),h([d({type:[Number],json:{write:!0}})],Mi.prototype,"gamma",void 0),h([d({type:Number,json:{write:!0}})],Mi.prototype,"maxPercent",void 0),h([d({type:Number,json:{write:!0}})],Mi.prototype,"minPercent",void 0),h([d({type:Number,json:{write:!0}})],Mi.prototype,"numberOfStandardDeviations",void 0),h([d({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],Mi.prototype,"outputMax",void 0),h([d({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],Mi.prototype,"outputMin",void 0),h([d({type:Number,json:{write:!0}})],Mi.prototype,"sigmoidStrengthLevel",void 0),h([d({json:{type:[[Number]],write:!0}})],Mi.prototype,"statistics",void 0),h([d()],Mi.prototype,"histograms",void 0),h([ge("statistics")],Mi.prototype,"writeStatistics",null),h([d({type:Boolean,json:{write:!0}})],Mi.prototype,"useGamma",void 0),h([d({type:r_.apiValues,json:{type:r_.jsonValues,write:r_.write}})],Mi.prototype,"stretchType",void 0),h([pe("stretchType",["stretchType"])],Mi.prototype,"readStretchType",null),h([We({rasterStretch:"raster-stretch"})],Mi.prototype,"type",void 0),Mi=RL=h([j("esri.renderers.RasterStretchRenderer")],Mi);const T8=Mi,Px={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Jo({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Fe.WebMercator}),minus180Line:new Jo({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Fe.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Jo({paths:[[[180,-180],[180,180]]],spatialReference:Fe.WGS84}),minus180Line:new Jo({paths:[[[-180,-180],[-180,180]]],spatialReference:Fe.WGS84})}};function Gm(e,t){return Math.ceil((e-t)/(2*t))}function Gte(e,t){const r=i_(e);for(const i of r)for(const s of i)s[0]+=t;return e}function i_(e){return Zm(e)?e.rings:e.paths}function bn(e,t){return t?{...t,query:{...e??{},...t.query}}:{query:e}}function Pr(e){return typeof e=="string"?gi(e):Z(e)}function Vs(e,t,r){const i={};for(const s in e){if(s==="declaredClass")continue;const n=e[s];if(n!=null&&typeof n!="function")if(Array.isArray(n))i[s]=n.map(o=>Vs(o));else if(typeof n=="object")if(n.toJSON){const o=n.toJSON(r?.[s]);i[s]=JSON.stringify(o)}else i[s]=JSON.stringify(n);else i[s]=n}return i}async function CIe(e,t,r,i){const s=Pr(e),n=t[0].spatialReference,o={...i,responseType:"json",query:{...s.query,f:"json",sr:Ad(n),target:JSON.stringify({geometryType:vn(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await Re(s.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(c=>{const p=bi(c);return p.spatialReference=n,p})}}function OIe(e){return{geometryType:vn(e[0]),geometries:e.map(t=>t.toJSON())}}function PIe(e,t,r){const i=mge(t);return e.map(s=>{const n=i.fromJSON(s);return n.spatialReference=r,n})}async function RIe(e,t,r){const i=typeof e=="string"?gi(e):e,s=t[0].spatialReference,n=vn(t[0]),o={...r,query:{...i.query,f:"json",sr:Ad(s),geometries:JSON.stringify(OIe(t))}},{data:a}=await Re(i.path+"/simplify",o);return PIe(a.geometries,n,s)}const Bte=()=>be.getLogger("esri.geometry.support.normalizeUtils");function LIe(e){return e.type==="polygon"}function kIe(e){return e[0].type==="polygon"}function NIe(e){return e[0].type==="polyline"}function hz(e){const t=[];let r=0,i=0;for(let s=0;s<e.length;s++){const n=e[s];let o=null;for(let a=0;a<n.length;a++)o=n[a],t.push(o),a===0?(r=o[0],i=r):(r=Math.min(r,o[0]),i=Math.max(i,o[0]));o&&t.push([(r+i)/2,0])}return t}function DIe(e,t){if(!(e instanceof Jo||e instanceof Rs)){const s="straightLineDensify: the input geometry is neither polyline nor polygon";throw Bte().error(s),new K(s)}const r=i_(e),i=[];for(const s of r){const n=[];i.push(n),n.push([s[0][0],s[0][1]]);for(let o=0;o<s.length-1;o++){const a=s[o][0],l=s[o][1],u=s[o+1][0],c=s[o+1][1],p=Math.sqrt((u-a)*(u-a)+(c-l)*(c-l)),f=(c-l)/p,m=(u-a)/p,g=p/t;if(g>1){for(let M=1;M<=g-1;M++){const x=M*t,_=m*x+a,I=f*x+l;n.push([_,I])}const b=(p+Math.floor(g-1)*t)/2,w=m*b+a,S=f*b+l;n.push([w,S])}n.push([u,c])}}return LIe(e)?new Rs({rings:i,spatialReference:e.spatialReference}):new Jo({paths:i,spatialReference:e.spatialReference})}function pz(e,t,r){if(t){const i=DIe(e,1e6);e=I0(i,!0)}return r&&(e=Gte(e,r)),e}function dz(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const s=Gm(i,t);e[0]=i+s*(-2*t)}else if(i<r){const s=Gm(i,r);e[0]=i+s*(-2*r)}}else{const i=e.x;if(i>t){const s=Gm(i,t);e=e.clone().offset(s*(-2*t),0)}else if(i<r){const s=Gm(i,r);e=e.clone().offset(s*(-2*r),0)}}return e}function FIe(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const s=t.cutIndexes[i],n=t.geometries[i],o=i_(n);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let c=0;for(let f=0;f<l.length;f++){const m=l[f][0];c=m>c?m:c}c=Number(c.toFixed(9));const p=-360*Gm(c,180);for(let f=0;f<l.length;f++){const m=n.getPoint(a,f);n.setPoint(a,f,m.clone().offset(p,0))}return!0}})}if(s===r){if(kIe(e))for(const a of i_(n))e[s]=e[s].addRing(a);else if(NIe(e))for(const a of i_(n))e[s]=e[s].addPath(a)}else r=s,e[s]=n}return e}async function hc(e,t,r){if(!Array.isArray(e))return hc([e],t);t&&typeof t!="string"&&Bte().warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const i=typeof t=="string"?t:t?.url??Vt.geometryServiceUrl;let s,n,o,a,l,u,c,p,f=0;const m=[],g=[];for(const _ of e)if(_!=null)if(s||(s=_.spatialReference,n=Un(s),o=s.isWebMercator,u=o?102100:4326,a=Px[u].maxX,l=Px[u].minX,c=Px[u].plus180Line,p=Px[u].minus180Line),n)if(_.type==="mesh")g.push(_);else if(_.type==="point")g.push(dz(_.clone(),a,l));else if(_.type==="multipoint"){const I=_.clone();I.points=I.points.map(E=>dz(E,a,l)),g.push(I)}else if(_.type==="extent"){const I=_.clone()._normalize(!1,!1,n);g.push(I.rings?new Rs(I):I)}else if(_.extent){const I=_.extent,E=Gm(I.xmin,l)*(2*a);let A=E===0?_.clone():Gte(_.clone(),E);I.offset(E,0);let{xmin:C,xmax:O}=I;C=Number(C.toFixed(9)),O=Number(O.toFixed(9)),I.intersects(c)&&O!==a?(f=O>f?O:f,A=pz(A,o),m.push(A),g.push("cut")):I.intersects(p)&&C!==l?(f=O*(2*a)>f?O*(2*a):f,A=pz(A,o,360),m.push(A),g.push("cut")):g.push(A)}else g.push(_.clone());else g.push(_);else g.push(_);let b=Gm(f,a),w=-90;const S=b,M=new Jo;for(;b>0;){const _=360*b-180;M.addPath([[_,w],[_,-1*w]]),w*=-1,b--}if(m.length>0&&S>0){const _=FIe(m,await CIe(i,m,M,r)),I=[],E=[];for(let O=0;O<g.length;O++){const R=g[O];if(R!=="cut")E.push(R);else{const D=_.shift(),N=e[O];N!=null&&N.type==="polygon"&&N.rings&&N.rings.length>1&&D.rings.length>=N.rings.length?(I.push(D),E.push("simplify")):E.push(o?Jm(D):D)}}if(!I.length)return E;const A=await RIe(i,I,r),C=[];for(let O=0;O<E.length;O++){const R=E[O];R!=="simplify"?C.push(R):C.push(o?Jm(A.shift()):A.shift())}return C}const x=[];for(let _=0;_<g.length;_++){const I=g[_];if(I!=="cut")x.push(I);else{const E=m.shift();x.push(o===!0?Jm(E):E)}}return x}function jIe(e){if(!e)return null;const t=e.extent;if(!t)return null;const r=e.spatialReference&&Un(e.spatialReference);if(!r)return t;const[i,s]=r.valid,n=2*s,{width:o}=t;let a,{xmin:l,xmax:u}=t;if([l,u]=[u,l],e.type==="extent"||o===0||o<=s||o>n||l<i||u>s)return t;switch(e.type){case"polygon":if(!(e.rings.length>1))return t;a=hz(e.rings);break;case"polyline":if(!(e.paths.length>1))return t;a=hz(e.paths);break;case"multipoint":a=e.points}const c=t.clone();for(let p=0;p<a.length;p++){let f=a[p][0];f<0?(f+=s,u=Math.max(f,u)):(f-=s,l=Math.min(f,l))}return c.xmin=l,c.xmax=u,c.width<o?(c.xmin-=s,c.xmax-=s,c):t}function I8(e,t,r){const i=Un(r);if(i==null)return e;const[s,n]=i.valid,o=2*n;let a=0,l=0;t>n?a=Math.ceil(Math.abs(t-n)/o):t<s&&(a=-Math.ceil(Math.abs(t-s)/o)),e>n?l=Math.ceil(Math.abs(e-n)/o):e<s&&(l=-Math.ceil(Math.abs(e-s)/o));let u=e+(a-l)*o;const c=u-t;return c>n?u-=o:c<s&&(u+=o),u}function mot(e,t){const r=Un(t);if(r){const[i,s]=r.valid,n=s-i;if(e<i)for(;e<i;)e+=n;if(e>s)for(;e>s;)e-=n}return e}let cS=class{constructor(t=null,r=null,i=null){this.minValue=t,this.maxValue=r,this.noDataValue=i}};const VIe=9999999e31,UIe=2e-7,zIe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34028234663852886e22,34028234663852886e22],f64:[-Number.MAX_VALUE,Number.MAX_VALUE],unknown:void 0,c64:void 0,c128:void 0};function $1(e){return zIe[e]??[-34028234663852886e22,34028234663852886e22]}function got(e,t){return e==null||t==null?"s32":e<0?e>=-128&&t<128?"s8":e>=-32768&&t<32768?"s16":"s32":t<256?"u8":t<65536?"u16":"u32"}function vot(e){return(e?.startsWith("s")||e?.startsWith("u"))??!1}function E8(e,t,r){if(e.depthCount&&e.depthCount>1)return;const{pixels:i,statistics:s,pixelType:n}=e,o=i[0].length,a=e.bandMasks??[],l=e.mask??new Uint8Array(o).fill(255),u=n==="f32"||n==="f64",c=$1(n);let p=!1;for(let f=0;f<i.length;f++){const m=typeof t=="number"?t:t[f];if(m==null)continue;const g=s?.[f]?.minValue??c[0],b=s?.[f]?.maxValue??c[1];if(g>m+Number.EPSILON||b<m-Number.EPSILON)continue;const w=a[f]||l.slice(),S=i[f],M=r?.customFloatTolerance;if(u&&M!==0){let x=M;x||(x=Math.abs(m)>=VIe?UIe*Math.abs(m):n==="f32"?2**-23:Number.EPSILON);for(let _=0;_<S.length;_++)w[_]&&Math.abs(S[_]-m)<x&&(S[_]=0,w[_]=0,l[_]=0,p=!0)}else for(let x=0;x<S.length;x++)w[x]&&S[x]===m&&(S[x]=0,w[x]=0,l[x]=0,p=!0);a[f]=w}p&&(e.bandMasks=e.bandMasks||e.pixels.length>1?a:null,e.mask=l),p&&"updateStatistics"in e&&e.updateStatistics()}var Ap;let Ys=Ap=class extends ue{static createEmptyBand(e,t){return new(Ap.getPixelArrayConstructor(e))(t)}static combineBandMasks(e){if(e.length<2)return e[0];const t=e[0].length,r=new Uint8Array(t).fill(255);for(let i=0;i<e.length;i++){const s=e[i];for(let n=0;n<t;n++)s[n]||(r[n]=0)}return r}static getPixelArrayConstructor(e){let t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":t=Float32Array;break;case"f64":t=Float64Array}return t}constructor(e){super(e),this.width=null,this.height=null,this.pixelType="f32",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.premultiplyAlpha=!1,this.statistics=null,this.depthCount=1}castPixelType(e){if(!e)return"f32";let t=e.toLowerCase();return["u1","u2","u4"].includes(t)?t="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].includes(t)||(t="f32"),t}getPlaneCount(){return this.pixels?.length}addData(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new K("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics??new cS)}getAsRGBA(){const e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}getAsRGBAFloat(){const e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}updateStatistics(){if(!this.pixels)return;this.statistics=this.pixels.map(r=>GIe(r,this.mask));const e=this.mask;let t=0;if(e!=null)for(let r=0;r<e.length;r++)e[r]&&t++;else t=this.width*this.height;this.validPixelCount=t}clamp(e){if(!e||e==="f64"||e==="f32"||!this.pixels)return;const[t,r]=$1(e),i=this.pixels,s=this.width*this.height,n=i.length;let o,a,l;const u=[];for(let c=0;c<n;c++){l=Ap.createEmptyBand(e,s),o=i[c];for(let p=0;p<s;p++)a=o[p],l[p]=a>r?r:a<t?t:a;u.push(l)}this.pixels=u,this.pixelType=e}extractBands(e){const{pixels:t,statistics:r}=this;if(e==null||e.length===0||!t||t.length===0)return this;const i=t.length,s=e.some(p=>p>=t.length),n=i===e.length&&!e.some((p,f)=>p!==f);if(s||n)return this;const o=this.bandMasks?.length===i?e.map(p=>this.bandMasks[p]):void 0;let{mask:a,validPixelCount:l}=this;const{width:u,height:c}=this;return o?.length&&(a=Ap.combineBandMasks(o),l=a.filter(p=>!!p).length),new Ap({pixelType:this.pixelType,width:u,height:c,mask:a,bandMasks:o,validPixelCount:l,maskIsAlpha:this.maskIsAlpha,pixels:e.map(p=>t[p]),statistics:r&&e.map(p=>r[p])})}clone(){const e=new Ap({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let t;this.mask!=null&&(e.mask=new Uint8Array(this.mask)),this.bandMasks&&(e.bandMasks=this.bandMasks.map(i=>new Uint8Array(i)));const r=Ap.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];const i=!!this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=i?this.pixels[t].slice(0,this.pixels[t].length):new r(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=Z(this.statistics[t]);return e.premultiplyAlpha=this.premultiplyAlpha,e}_fillFrom8Bit(e){const{mask:t,maskIsAlpha:r,premultiplyAlpha:i,pixels:s}=this;if(!e||!s?.length)return void be.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");let n,o,a,l;n=o=a=s[0],s.length>=3?(o=s[1],a=s[2]):s.length===2&&(o=s[1]);const u=new Uint32Array(e),c=this.width*this.height;if(n.length===c)if(t!=null&&t.length===c)if(r)for(l=0;l<c;l++){const p=t[l];if(p){const f=p/255;u[l]=i?p<<24|a[l]*f<<16|o[l]*f<<8|n[l]*f:p<<24|a[l]<<16|o[l]<<8|n[l]}}else for(l=0;l<c;l++)t[l]&&(u[l]=255<<24|a[l]<<16|o[l]<<8|n[l]);else for(l=0;l<c;l++)u[l]=255<<24|a[l]<<16|o[l]<<8|n[l];else be.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}_fillFromNon8Bit(e){const{pixels:t,mask:r,statistics:i}=this;if(!e||!t?.length)return void be.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");const s=this.pixelType;let n=1,o=0,a=1;if(i&&i.length>0){for(const b of i)if(b.minValue!=null&&(o=Math.min(o,b.minValue)),b.maxValue!=null&&b.minValue!=null){const w=b.maxValue-b.minValue;a=Math.max(a,w)}n=255/a}else{let b=255;s==="s8"?(o=-128,b=127):s==="u16"?b=65535:s==="s16"?(o=-32768,b=32767):s==="u32"?b=4294967295:s==="s32"?(o=-2147483648,b=2147483647):s==="f32"?(o=-34e38,b=34e38):s==="f64"&&(o=-Number.MAX_VALUE,b=Number.MAX_VALUE),n=255/(b-o)}const l=new Uint32Array(e),u=this.width*this.height;let c,p,f,m,g;if(c=p=f=t[0],c.length!==u)return be.getLogger(this).error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(p=t[1],t.length>=3&&(f=t[2]),r!=null&&r.length===u)for(m=0;m<u;m++)r[m]&&(l[m]=255<<24|(f[m]-o)*n<<16|(p[m]-o)*n<<8|(c[m]-o)*n);else for(m=0;m<u;m++)l[m]=255<<24|(f[m]-o)*n<<16|(p[m]-o)*n<<8|(c[m]-o)*n;else if(r!=null&&r.length===u)for(m=0;m<u;m++)g=(c[m]-o)*n,r[m]&&(l[m]=255<<24|g<<16|g<<8|g);else for(m=0;m<u;m++)g=(c[m]-o)*n,l[m]=255<<24|g<<16|g<<8|g}_fillFrom32Bit(e){const{pixels:t,mask:r}=this;if(!e||!t?.length)return be.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let i,s,n,o;i=s=n=t[0],t.length>=3?(s=t[1],n=t[2]):t.length===2&&(s=t[1]);const a=this.width*this.height;if(i.length!==a)return be.getLogger(this).error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let l=0;if(r!=null&&r.length===a)for(o=0;o<a;o++)e[l++]=i[o],e[l++]=s[o],e[l++]=n[o],e[l++]=1&r[o];else for(o=0;o<a;o++)e[l++]=i[o],e[l++]=s[o],e[l++]=n[o],e[l++]=1}};function GIe(e,t){let r=1/0,i=-1/0;const s=e.length;let n,o=0;if(t!=null)for(n=0;n<s;n++)t[n]&&(o=e[n],r=o<r?o:r,i=o>i?o:i);else for(n=0;n<s;n++)o=e[n],r=o<r?o:r,i=o>i?o:i;return new cS(r,i)}h([d({json:{write:!0}})],Ys.prototype,"width",void 0),h([d({json:{write:!0}})],Ys.prototype,"height",void 0),h([d({json:{write:!0}})],Ys.prototype,"pixelType",void 0),h([Zt("pixelType")],Ys.prototype,"castPixelType",null),h([d({json:{write:!0}})],Ys.prototype,"validPixelCount",void 0),h([d({json:{write:!0}})],Ys.prototype,"mask",void 0),h([d({json:{write:!0}})],Ys.prototype,"maskIsAlpha",void 0),h([d({json:{write:!0}})],Ys.prototype,"pixels",void 0),h([d()],Ys.prototype,"premultiplyAlpha",void 0),h([d({json:{write:!0}})],Ys.prototype,"statistics",void 0),h([d({json:{write:!0}})],Ys.prototype,"depthCount",void 0),h([d({json:{write:!0}})],Ys.prototype,"noDataValues",void 0),h([d({json:{write:!0}})],Ys.prototype,"bandMasks",void 0),Ys=Ap=h([j("esri.layers.support.PixelBlock")],Ys);const It=Ys;var fz,mz;(function(e){e[e.matchAny=0]="matchAny",e[e.matchAll=1]="matchAll"})(fz||(fz={})),function(e){e[e.bestMatch=0]="bestMatch",e[e.fail=1]="fail"}(mz||(mz={}));const bot=6;function Mr(e){return e!=null&&e.declaredClass==="esri.layers.support.PixelBlock"&&e.pixels&&e.pixels.length>0}function wot(e){if(!e?.length||e.some(c=>!Mr(c)))return null;if(e.length===1)return e[0]?.clone()??null;const t=e,{width:r,height:i,pixelType:s}=t[0];if(t.some(c=>c.width!==r||c.height!==i))return null;const n=t.map(({mask:c})=>c).filter(c=>c!=null);let o=null;n.length&&(o=new Uint8Array(r*i),o.set(n[0]),n.length>1&&Hte(n.slice(1),o));const a=[];t.forEach(({pixels:c})=>a.push(...c));const l=t.map(({statistics:c})=>c).filter(c=>c?.length),u=[];return l.forEach(c=>u.push(...c)),new It({pixelType:s,width:r,height:i,mask:o,pixels:a,statistics:u.length?u:null})}function sb(e){if(!e)return;const t=e.colormap;if(!t||t.length===0)return;const r=t.sort((p,f)=>p[0]-f[0]);let i=0;r[0][0]<0&&(i=r[0][0]);const s=Math.max(256,r[r.length-1][0]-i+1),n=new Uint8Array(4*s),o=[];let a,l=0,u=0;const c=r[0].length===5;if(s>65536)return r.forEach(p=>{o[p[0]-i]=c?p.slice(1):p.slice(1).concat([255])}),{indexed2DColormap:o,offset:i,alphaSpecified:c};if(e.fillUnspecified)for(a=r[u],l=a[0]-i;l<s;l++)n[4*l]=a[1],n[4*l+1]=a[2],n[4*l+2]=a[3],n[4*l+3]=c?a[4]:255,l===a[0]-i&&(a=u===r.length-1?a:r[++u]);else for(l=0;l<r.length;l++)a=r[l],u=4*(a[0]-i),n[u]=a[1],n[u+1]=a[2],n[u+2]=a[3],n[u+3]=c?a[4]:255;return{indexedColormap:n,offset:i,alphaSpecified:c}}function h5(e,t){if(!Mr(e)||!t||!t.indexedColormap&&!t.indexed2DColormap)return e;const r=e.clone(),i=r.pixels;let s=r.mask;const n=r.width*r.height;if(i.length!==1)return e;const{indexedColormap:o,indexed2DColormap:a,offset:l,alphaSpecified:u}=t;let c=0;const p=i[0],f=new Uint8Array(p.length),m=new Uint8Array(p.length),g=new Uint8Array(p.length);let b,w=0;if(o){const S=o.length-1;if(s!=null)for(c=0;c<n;c++)s[c]&&(w=4*(p[c]-l),w<l||w>S?s[c]=0:(f[c]=o[w],m[c]=o[w+1],g[c]=o[w+2],s[c]=o[w+3]));else{for(s=new Uint8Array(n),c=0;c<n;c++)w=4*(p[c]-l),w<l||w>S?s[c]=0:(f[c]=o[w],m[c]=o[w+1],g[c]=o[w+2],s[c]=o[w+3]);r.mask=s}}else if(a)if(s!=null)for(c=0;c<n;c++)s[c]&&(b=a[p[c]],f[c]=b[0],m[c]=b[1],g[c]=b[2],s[c]=b[3]);else{for(s=new Uint8Array(n),c=0;c<n;c++)b=a[p[c]],f[c]=b[0],m[c]=b[1],g[c]=b[2],s[c]=b[3];r.mask=s}return r.pixels=[f,m,g],r.statistics=null,r.pixelType="u8",r.maskIsAlpha=u,r}function yz(e,t){if(!Mr(e))return null;const{pixels:r,mask:i}=e,s=r.length;let n=t.lut;const{offset:o}=t;n&&n[0].length===1&&(n=r.map(()=>n));const a=[],l=t.outputPixelType||"u8";for(let c=0;c<s;c++){const p=qte(r[c],i,n[c],o||0,l);a.push(p)}const u=new It({width:e.width,height:e.height,pixels:a,mask:i,pixelType:l});return u.updateStatistics(),u}function qte(e,t,r,i,s){const n=e.length,o=It.createEmptyBand(s,n);if(t)for(let a=0;a<n;a++)t[a]&&(o[a]=r[e[a]-i]);else for(let a=0;a<n;a++)o[a]=r[e[a]-i];return o}function BIe(e,t){if(!Mr(e))return null;const r=e.clone(),{pixels:i}=r,s=r.width*r.height,n=t.length,o=Math.floor(n/2),a=t[Math.floor(o)],l=i[0];let u,c,p,f,m,g,b=!1;const w=new Uint8Array(s),S=new Uint8Array(s),M=new Uint8Array(s);let x=r.mask;const _=t[0].mappedColor.length===4;for(x||(x=new Uint8Array(s),x.fill(_?255:1),r.mask=x),m=0;m<s;m++)if(x[m]){for(u=l[m],b=!1,g=o,c=a,p=0,f=n-1;f-p>1;){if(u===c.value){b=!0;break}u>c.value?p=g:f=g,g=Math.floor((p+f)/2),c=t[Math.floor(g)]}b||(u===t[p].value?(c=t[p],b=!0):u===t[f].value?(c=t[f],b=!0):u<t[p].value?(b=!1,c=null):u>t[p].value&&(u<t[f].value?(c=t[p],b=!0):f===n-1?(b=!1,c=null):(c=t[f],b=!0))),b?(w[m]=c.mappedColor[0],S[m]=c.mappedColor[1],M[m]=c.mappedColor[2],x[m]=c.mappedColor[3]):w[m]=S[m]=M[m]=x[m]=0}return r.pixels=[w,S,M],r.mask=x,r.pixelType="u8",r.maskIsAlpha=_,r}function _ot(e,t){if(!Mr(e))return null;const{width:r,height:i}=e,{inputRanges:s,outputValues:n,outputPixelType:o,noDataRanges:a,allowUnmatched:l,isLastInputRangeInclusive:u}=t,c=e.pixels[0],p=It.createEmptyBand(o,c.length),f=e.mask,m=new Uint8Array(r*i);f?m.set(f):m.fill(255);const g=e.pixelType.startsWith("f")?1e-6:0,b=s.map(_=>_-g);b[0]=s[0],b[b.length-1]=s[s.length-1]+(u?1e-6:0);const w=s.length/2,[S,M]=$1(o);for(let _=0;_<i;_++)for(let I=0;I<r;I++){const E=_*r+I;if(m[E]){const A=c[E];let C=!1;for(let O=w-1;O>=0;O--)if(A===b[2*O]||A>b[2*O]&&A<b[2*O+1]){p[E]=n[O],C=!0;break}C||(l?p[E]=A>M?M:A<S?S:A:m[E]=0)}}const x=a?.length;if(x)for(let _=0;_<i;_++)for(let I=0;I<r;I++){const E=_*r+I;if(!f||f[E]){const A=c[E];for(let C=0;C<x;C+=2)if(A>=a[C]&&A<=a[C+1]){p[E]=0,m[E]=0;break}}}return new It({width:r,height:i,pixelType:o,pixels:[p],mask:m})}function gz(e,t,r,i){const s=r!=null&&r.length>=2?new Set(r):null,n=r?.length===1?r[0]:null,o=!!t?.length;for(let a=0;a<e.length;a++)if(i[a]){const l=e[a];if(o){let u=!1;for(let c=0;c<t.length;c+=2)if(l>=t[c]&&l<=t[c+1]){u=!0;break}u||(i[a]=0)}i[a]&&(l===n||s?.has(l))&&(i[a]=0)}}function vz(e,t){const r=e[0].length;for(let i=0;i<r;i++)if(t[i]){let s=!1;for(let n=0;n<e.length;n++)if(e[n][i]){s=!0;break}s||(t[i]=0)}}function Hte(e,t){const r=e[0].length;for(let i=0;i<r;i++)if(t[i]){let s=!1;for(let n=0;n<e.length;n++)if(e[n][i]===0){s=!0;break}s&&(t[i]=0)}}function Sot(e,t){if(!Mr(e))return null;const{width:r,height:i,pixels:s}=e,n=r*i,o=new Uint8Array(n);e.mask?o.set(e.mask):o.fill(255);const a=s.length,{includedRanges:l,noDataValues:u,outputPixelType:c,matchAll:p,lookups:f}=t;if(f){const m=[];for(let g=0;g<a;g++){const b=f[g],w=qte(s[g],o,b.lut,b.offset||0,"u8");m.push(w)}m.length===1?o.set(m[0]):p?vz(m,o):Hte(m,o)}else if(p){const m=[];for(let g=0;g<a;g++){const b=new Uint8Array(n);b.set(o),gz(s[g],l?.slice(2*g,2*g+2),u?.[g],b),m.push(b)}m.length===1?o.set(m[0]):vz(m,o)}else for(let m=0;m<a;m++)gz(s[m],l?.slice(2*m,2*m+2),u?.[m],o);return new It({width:r,height:i,pixelType:c,pixels:s,mask:o})}function xot(e){const{srcPixelType:t,inputRanges:r,outputValues:i,allowUnmatched:s,noDataRanges:n,isLastInputRangeInclusive:o,outputPixelType:a}=e;if(t!=="u8"&&t!=="s8"&&t!=="u16"&&t!=="s16")return null;const l=t.includes("16")?65536:256,u=t.includes("s")?-l/2:0,c=It.createEmptyBand(a,l),p=new Uint8Array(l);s&&p.fill(255);const[f,m]=$1(a);if(r?.length&&i?.length){const b=r.map(w=>w-1e-6);b[0]=r[0],o&&(b[b.length-1]=r[r.length-1]);for(let w=0;w<b.length;w++){const S=i[w]>m?m:i[w]<f?f:i[w],M=Math.ceil(b[2*w]-u),x=Math.floor(b[2*w+1]-u);for(let _=M;_<=x;_++)c[_]=S,p[_]=255}}if(n?.length)for(let g=0;g<n.length;g++){const b=Math.ceil(n[2*g]-u),w=Math.floor(n[2*g+1]-u);for(let S=b;S<=w;S++)p[S]=0}return{lut:c,offset:u,mask:p}}function Mot(e,t,r){if(e!=="u8"&&e!=="s8"&&e!=="u16"&&e!=="s16")return null;const i=e.includes("16")?65536:256,s=e.includes("s")?-i/2:0,n=new Uint8Array(i);if(t)for(let o=0;o<t.length;o++){const a=Math.ceil(t[2*o]-s),l=Math.floor(t[2*o+1]-s);for(let u=a;u<=l;u++)n[u]=255}else n.fill(255);if(r)for(let o=0;o<r.length;o++)n[r[o]-s]=0;return{lut:n,offset:s}}function qIe(e,t,r,i,s,n,o,a){return{xmin:s<=r*e?0:s<r*e+e?s-r*e:e,ymin:n<=i*t?0:n<i*t+t?n-i*t:t,xmax:s+o<=r*e?0:s+o<r*e+e?s+o-r*e:e,ymax:n+a<=i*t?0:n+a<i*t+t?n+a-i*t:t}}function Tot(e,t){if(!e||e.length===0)return null;const r=e.find(g=>g.pixelBlock);if(r?.pixelBlock==null)return null;const i=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width,s=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,n=.01*Math.min(i,s),o=e.sort((g,b)=>Math.abs(g.extent.ymax-b.extent.ymax)>n?b.extent.ymax-g.extent.ymax:Math.abs(g.extent.xmin-b.extent.xmin)>n?g.extent.xmin-b.extent.xmin:0),a=Math.min.apply(null,o.map(g=>g.extent.xmin)),l=Math.min.apply(null,o.map(g=>g.extent.ymin)),u=Math.max.apply(null,o.map(g=>g.extent.xmax)),c=Math.max.apply(null,o.map(g=>g.extent.ymax)),p={x:Math.round((t.xmin-a)/i),y:Math.round((c-t.ymax)/s)},f={width:Math.round((u-a)/i),height:Math.round((c-l)/s)},m={width:Math.round((t.xmax-t.xmin)/i),height:Math.round((t.ymax-t.ymin)/s)};return Math.round(f.width/r.pixelBlock.width)*Math.round(f.height/r.pixelBlock.height)!==o.length||p.x<0||p.y<0||f.width<m.width||f.height<m.height?null:{extent:t,pixelBlock:HIe(o.map(g=>g.pixelBlock),f,{clipOffset:p,clipSize:m})}}function p5(e,t,r,i,s,n){const{width:o,height:a}=r.block,{x:l,y:u}=r.offset,{width:c,height:p}=r.mosaic,f=qIe(o,a,i,s,l,u,c,p);let m=0,g=0;if(n){const b=n.hasGCSSShiftTransform?360:n.halfWorldWidth??0,w=o*n.resolutionX,S=n.startX+i*w;S<b&&S+w>b?g=n.rightPadding:S>=b&&(m=n.leftMargin-n.rightPadding,g=0)}if(f.xmax-=g,typeof t!="number")for(let b=f.ymin;b<f.ymax;b++){const w=(s*a+b-u)*c+(i*o-l)+m,S=b*o;for(let M=f.xmin;M<f.xmax;M++)e[w+M]=t[S+M]}else for(let b=f.ymin;b<f.ymax;b++){const w=(s*a+b-u)*c+(i*o-l)+m;for(let S=f.xmin;S<f.xmax;S++)e[w+S]=t}}function HIe(e,t,r={}){const{clipOffset:i,clipSize:s,alignmentInfo:n,blockWidths:o}=r;if(o)return WIe(e,t,{blockWidths:o});const a=e.find(R=>Mr(R));if(a==null)return null;const l=s?s.width:t.width,u=s?s.height:t.height,c=a.width,p=a.height,f=t.width/c,m=t.height/p,g={offset:i||{x:0,y:0},mosaic:s||t,block:{width:c,height:p}},b=a.pixelType,w=It.getPixelArrayConstructor(b),S=a.pixels.length,M=[];let x,_;for(let R=0;R<S;R++){_=new w(l*u);for(let D=0;D<m;D++)for(let N=0;N<f;N++){const U=e[D*f+N];Mr(U)&&(x=U.pixels[R],p5(_,x,g,N,D,n))}M.push(_)}const I=e.some(R=>R==null||R.mask!=null&&R.mask.length>0),E=e.some(R=>R?.bandMasks&&R.bandMasks.length>1),A=I?new Uint8Array(l*u):void 0,C=E?[]:void 0;if(A){for(let R=0;R<m;R++)for(let D=0;D<f;D++){const N=e[R*f+D],U=N!=null?N.mask:null;p5(A,U??(N?255:0),g,D,R,n)}if(C)for(let R=0;R<S;R++){const D=new Uint8Array(l*u);for(let N=0;N<m;N++)for(let U=0;U<f;U++){const J=e[N*f+U],y=J?.bandMasks?.[R]??J?.mask;p5(D,y??(J?255:0),g,U,N,n)}C.push(D)}}const O=new It({width:l,height:u,pixels:M,pixelType:b,bandMasks:C,mask:A});return O.updateStatistics(),O}function WIe(e,t,r){const i=e.find(w=>w!=null);if(i==null)return null;const s=e.some(w=>w==null||!!w.mask),{width:n,height:o}=t,a=s?new Uint8Array(n*o):null,{blockWidths:l}=r,u=[],c=i.getPlaneCount(),p=It.getPixelArrayConstructor(i.pixelType);if(s)for(let w=0,S=0;w<e.length;S+=l[w],w++){const M=e[w];if(!Mr(M))continue;const x=M.mask;for(let _=0;_<o;_++)for(let I=0;I<l[w];I++)a[_*n+I+S]=x==null?255:x[_*M.width+I]}const f=e.some(w=>w?.bandMasks&&w.bandMasks.length>1),m=f?[]:void 0,g=n*o;for(let w=0;w<c;w++){const S=new p(g),M=f?new Uint8Array(g):void 0;for(let x=0,_=0;x<e.length;_+=l[x],x++){const I=e[x];if(!Mr(I))continue;const E=I.pixels[w];if(E!=null){for(let A=0;A<o;A++)for(let C=0;C<l[x];C++)S[A*n+C+_]=E[A*I.width+C];if(M){const A=I.bandMasks?.[w]??I.mask;for(let C=0;C<o;C++)for(let O=0;O<l[x];O++)M[C*n+O+_]=A?A[C*I.width+O]:255}}}u.push(S),m&&M&&m.push(M)}const b=new It({width:n,height:o,mask:a,bandMasks:m,pixels:u,pixelType:i.pixelType});return b.updateStatistics(),b}function Iot(e,t,r){if(!Mr(e))return null;const{width:i,height:s}=e,n=t.x,o=t.y,a=r.width+n,l=r.height+o;if(n<0||o<0||a>i||l>s||n===0&&o===0&&a===i&&l===s)return e;e.mask||(e.mask=new Uint8Array(i*s));const u=e.mask;for(let c=0;c<s;c++){const p=c*i;for(let f=0;f<i;f++)u[p+f]=c<o||c>=l||f<n||f>=a?0:1}return e.updateStatistics(),e}function JIe(e){if(!Mr(e))return null;const t=e.clone(),{width:r,height:i,pixels:s}=e,n=s[0],o=t.pixels[0],a=e.mask;for(let l=2;l<i-1;l++){const u=new Map;for(let p=l-2;p<l+2;p++)for(let f=0;f<4;f++){const m=p*r+f;nb(u,n[m],a?a[m]:1)}o[l*r]=bz(u),o[l*r+1]=o[l*r+2]=o[l*r];let c=3;for(;c<r-1;c++){let p=(l-2)*r+c+1;nb(u,n[p],a?a[p]:1),p=(l-1)*r+c+1,nb(u,n[p],a?a[p]:1),p=l*r+c+1,nb(u,n[p],a?a[p]:1),p=(l+1)*r+c+1,nb(u,n[p],a?a[p]:1),p=(l-2)*r+c-3,Rx(u,n[p],a?a[p]:1),p=(l-1)*r+c-3,Rx(u,n[p],a?a[p]:1),p=l*r+c-3,Rx(u,n[p],a?a[p]:1),p=(l+1)*r+c-3,Rx(u,n[p],a?a[p]:1),o[l*r+c]=bz(u)}o[l*r+c+1]=o[l*r+c]}for(let l=0;l<r;l++)o[l]=o[r+l]=o[2*r+l],o[(i-1)*r+l]=o[(i-2)*r+l];return t.updateStatistics(),t}function bz(e){if(e.size===0)return 0;let t=0,r=-1,i=0;const s=e.keys();let n=s.next();for(;!n.done;)i=e.get(n.value),i>t&&(r=n.value,t=i),n=s.next();return r}function Rx(e,t,r){if(r===0)return;const i=e.get(t);i===1?e.delete(t):e.set(t,i-1)}function nb(e,t,r){r!==0&&e.set(t,e.has(t)?e.get(t)+1:1)}function Wte(e,t,r){let{x:i,y:s}=t;const{width:n,height:o}=r;if(i===0&&s===0&&o===e.height&&n===e.width)return e;const{width:a,height:l}=e,u=Math.max(0,s),c=Math.max(0,i),p=Math.min(i+n,a),f=Math.min(s+o,l);if(p<0||f<0||!Mr(e))return null;i=Math.max(0,-i),s=Math.max(0,-s);const{pixels:m}=e,g=n*o,b=m.length,w=[];for(let _=0;_<b;_++){const I=m[_],E=It.createEmptyBand(e.pixelType,g);for(let A=u;A<f;A++){const C=A*a;let O=(A+s-u)*n+i;for(let R=c;R<p;R++)E[O++]=I[C+R]}w.push(E)}const S=new Uint8Array(g),M=e.mask;for(let _=u;_<f;_++){const I=_*a;let E=(_+s-u)*n+i;for(let A=c;A<p;A++)S[E++]=M?M[I+A]:1}const x=new It({width:r.width,height:r.height,pixelType:e.pixelType,pixels:w,mask:S});return x.updateStatistics(),x}function Jte(e,t=!0){if(!Mr(e))return null;const{pixels:r,width:i,height:s,mask:n,pixelType:o}=e,a=[],l=Math.round(i/2),u=Math.round(s/2),c=s-1,p=i-1;for(let m=0;m<r.length;m++){const g=r[m],b=It.createEmptyBand(o,l*u);let w=0;for(let S=0;S<s;S+=2)for(let M=0;M<i;M+=2){const x=g[S*i+M];if(t){const _=M===p?x:g[S*i+M+1],I=S===c?x:g[S*i+M+i],E=M===p?I:S===c?_:g[S*i+M+i+1];b[w++]=(x+_+I+E)/4}else b[w++]=x}a.push(b)}let f=null;if(n!=null){f=new Uint8Array(l*u);let m=0;for(let g=0;g<s;g+=2)for(let b=0;b<i;b+=2){const w=n[g*i+b];if(t){const S=b===p?w:n[g*i+b+1],M=g===c?w:n[g*i+b+i],x=b===p?M:g===c?S:n[g*i+b+i+1];f[m++]=w*S*M*x?1:0}else f[m++]=w}}return new It({width:l,height:u,pixelType:o,pixels:a,mask:f})}function Eot(e,t,r=0,i=!0){if(!Mr(e))return null;const{width:s,height:n}=t;let{width:o,height:a}=e;const l=new Map,u={x:0,y:0},c=1+r;let p=e;for(let f=0;f<c;f++){const m=Math.ceil(o/s),g=Math.ceil(a/n);for(let b=0;b<g;b++){u.y=b*n;for(let w=0;w<m;w++){u.x=w*s;const S=Wte(p,u,t);l.set(`${f}/${b}/${w}`,S)}}f<c-1&&(p=Jte(p,i)),o=Math.round(o/2),a=Math.round(a/2)}return l}function Aot(e){const{pixelBlock:t,tileSize:r,level:i,row:s,col:n,useBilinear:o}=e;if(!Mr(t))return null;const{width:a,height:l}=r,u=2**i,c=u*a,p=u*l;let f=Wte(t,{y:s*p,x:n*c},{width:c,height:p});if(!f)return null;for(let m=i;m>0;m--)f=Jte(f,o);return f}function Zte(e,t,r,i,s=0){const{width:n,height:o}=e,{width:a,height:l}=t,u=i.cols,c=i.rows,p=Math.ceil(a/u-.1/u),f=Math.ceil(l/c-.1/c);let m,g,b,w,S,M,x;const _=p*u,I=_*f*c,E=new Float32Array(I),A=new Float32Array(I),C=new Uint32Array(I),O=new Uint32Array(I);let R,D,N=0;for(let U=0;U<f;U++)for(let J=0;J<p;J++){m=12*(U*p+J),g=r[m],b=r[m+1],w=r[m+2],S=r[m+3],M=r[m+4],x=r[m+5];for(let y=0;y<c;y++){N=(U*c+y)*_+J*u,D=(y+.5)/c;for(let T=0;T<y;T++)R=(T+.5)/u,E[N+T]=(g*R+b*D+w)*n+s,A[N+T]=(S*R+M*D+x)*o+s,C[N+T]=Math.floor(E[N+T]),O[N+T]=Math.floor(A[N+T])}m+=6,g=r[m],b=r[m+1],w=r[m+2],S=r[m+3],M=r[m+4],x=r[m+5];for(let y=0;y<c;y++){N=(U*c+y)*_+J*u,D=(y+.5)/c;for(let T=y;T<u;T++)R=(T+.5)/u,E[N+T]=(g*R+b*D+w)*n+s,A[N+T]=(S*R+M*D+x)*o+s,C[N+T]=Math.floor(E[N+T]),O[N+T]=Math.floor(A[N+T])}}return{offsets_x:E,offsets_y:A,offsets_xi:C,offsets_yi:O,gridWidth:_}}function $ot(e,t){const{coefficients:r,spacing:i}=t,{offsets_x:s,offsets_y:n,gridWidth:o}=Zte(e,e,r,{rows:i[0],cols:i[1]}),{width:a,height:l}=e,u=new Float32Array(a*l),c=180/Math.PI;for(let p=0;p<l;p++)for(let f=0;f<a;f++){const m=p*o+f,g=p===0?m:m-o,b=p===l-1?m:m+o,w=s[g]-s[b],S=n[b]-n[g];if(isNaN(w)||isNaN(S))u[p*a+f]=90;else{let M=Math.atan2(S,w)*c;M=(360+M)%360,u[p*a+f]=M}}return u}function Cot(e,t,r,i,s="nearest"){if(!Mr(e))return null;s==="majority"&&(e=JIe(e));const{pixels:n,mask:o,bandMasks:a,pixelType:l}=e,u=e.width,c=e.height,p=It.getPixelArrayConstructor(l),f=n.length,{width:m,height:g}=t;let b=!1;for(let N=0;N<r.length;N+=3)r[N]===-1&&r[N+1]===-1&&r[N+2]===-1&&(b=!0);const{offsets_x:w,offsets_y:S,offsets_xi:M,offsets_yi:x,gridWidth:_}=Zte({width:u,height:c},t,r,i,s==="majority"?.5:0);let I;const E=(N,U,J,y)=>{const T=N instanceof Float32Array||N instanceof Float64Array?0:.5;for(let $=0;$<g;$++){I=$*_;for(let P=0;P<m;P++){if(w[I]<0||S[I]<0)N[$*m+P]=0;else if(y)N[$*m+P]=U[M[I]+x[I]*u];else{const z=Math.floor(w[I]),X=Math.floor(S[I]),ae=Math.ceil(w[I]),te=Math.ceil(S[I]),ye=w[I]-z,Me=S[I]-X;if(!J||J[z+X*u]&&J[ae+X*u]&&J[z+te*u]&&J[ae+te*u]){const De=(1-ye)*U[z+X*u]+ye*U[ae+X*u],$e=(1-ye)*U[z+te*u]+ye*U[ae+te*u];N[$*m+P]=(1-Me)*De+Me*$e+T}else N[$*m+P]=U[M[I]+x[I]*u]}I++}}},A=[];let C;const O=a?.length===f,R=[];for(let N=0;N<f;N++){if(O){const U=new Uint8Array(m*g);E(U,a[N],a[N],!0),R.push(U)}C=new p(m*g),E(C,n[N],O?a[N]:o,s==="nearest"||s==="majority"),A.push(C)}const D=new It({width:m,height:g,pixelType:l,pixels:A,bandMasks:O?R:void 0});if(o!=null)D.mask=new Uint8Array(m*g),E(D.mask,o,o,!0);else if(b){D.mask=new Uint8Array(m*g);for(let N=0;N<m*g;N++)D.mask[N]=w[N]<0||S[N]<0?0:1}return D.updateStatistics(),D}const Rm=new Map;Rm.set("meter-per-second",1),Rm.set("kilometer-per-hour",.277778),Rm.set("knots",.514444),Rm.set("feet-per-second",.3048),Rm.set("mile-per-hour",.44704);const LL=180/Math.PI,A8=5,zo=new wt({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function ZA(e,t){return Rm.get(e)/Rm.get(t)||1}function Yte(e){return(450-e)%360}function $8(e,t="geographic"){const[r,i]=e,s=Math.sqrt(r*r+i*i);let n=Math.atan2(i,r)*LL;return n=(360+n)%360,t==="geographic"&&(n=Yte(n)),[s,n]}function ZIe(e,t="geographic"){let r=e[1];t==="geographic"&&(r=Yte(r)),r%=360;const i=e[0];return[i*Math.cos(r/LL),i*Math.sin(r/LL)]}function Oot(e,t,r,i="geographic"){if(!Mr(e)||r==null)return e;const s=t==="vector-magdir"?e.clone():kL(e,t),n=s.pixels[1];for(let o=0;o<n.length;o++)n[o]=i==="geographic"?(n[o]+r[o]+270)%360:(n[o]+360-r[o])%360;return t==="vector-magdir"?s:kL(s,"vector-magdir")}function kL(e,t,r="geographic",i=1){if(!Mr(e))return e;const{pixels:s,width:n,height:o}=e,a=n*o,l=s[0],u=s[1],c=e.pixelType.startsWith("f")?e.pixelType:"f32",p=It.createEmptyBand(c,a),f=It.createEmptyBand(c,a);let m=0;for(let b=0;b<o;b++)for(let w=0;w<n;w++)t==="vector-uv"?([p[m],f[m]]=$8([l[m],u[m]],r),p[m]*=i):([p[m],f[m]]=ZIe([l[m],u[m]],r),p[m]*=i,f[m]*=i),m++;const g=new It({pixelType:c,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[p,f]});return g.updateStatistics(),g}function YIe(e,t,r=1){if(r===1||!Mr(e))return e;const i=e.clone(),{pixels:s,width:n,height:o}=i,a=s[0];s[1];let l=0;for(let u=0;u<o;u++)for(let c=0;c<n;c++)a[l]*=r,l++;return i.updateStatistics(),i}function Pot(e,t,r,i,s){if(s==null||!s.spatialReference.equals(e.spatialReference))return{extent:e,width:Math.round(t/i),height:Math.round(r/i),resolution:e.width/t};const n=s.xmin,o=s.ymax,a=(e.xmax-e.xmin)/t*i,l=(e.ymax-e.ymin)/r*i,u=(a+l)/2;return e.xmin=n+Math.floor((e.xmin-n)/a)*a,e.xmax=n+Math.ceil((e.xmax-n)/a)*a,e.ymin=o+Math.floor((e.ymin-o)/l)*l,e.ymax=o+Math.ceil((e.ymax-o)/l)*l,{extent:e,width:Math.round(e.width/a),height:Math.round(e.height/l),resolution:u}}const KIe=Kte(0,0,0);function Kte(e=0,t=0,r=Math.PI,i=!0){i&&(r=(2*Math.PI-r)%(2*Math.PI));const s=i?-1:1,n=13*s,o=-7*s,a=-2*s,l=-16*s,u=21.75,[c,p]=As(0,t+n,r,u),[f,m]=As(e-5.5,t+o,r,u),[g,b]=As(e+5.5,t+o,r,u),[w,S]=As(e-1.5,t+a,r,u),[M,x]=As(e+1.5,t+a,r,u),[_,I]=As(e-1.5,t+l,r,u),[E,A]=As(e+1.5,t+l,r,u);return[c,p,f,m,w,S,M,x,g,b,_,I,E,A]}function XIe(e=0,t=Math.PI,r=!0){r&&(t=(2*Math.PI-t)%(2*Math.PI));const i=10,s=r?-1:1,n=5*s,o=20*s,a=25*s,l=45,u=0,c=0,p=2,f=0,m=p*s,g=r?1:-1,b=i/2*g;let[w,S]=[u+b,c-o],[M,x]=[w+p*g,S],[_,I]=[M-f*g,x+m],[E,A]=[u-b,c-a],[C,O]=[E+f*g,A-m],R=Math.ceil(e/A8),D=Math.floor(R/10);R-=8*D;const N=[],U=[];for(let ye=0;ye<R/2;ye++,D--){D<=0&&R%2==1&&ye===(R-1)/2&&(E=u,C=E+f*g,A=(A+S)/2,O=A-m);const[Me,De]=As(E,A,t,l);if(D>0){const[$e,gt]=As(M,A,t,l),[dt,Je]=As(w,S,t,l);N.push($e),N.push(gt),N.push(Me),N.push(De),N.push(dt),N.push(Je)}else{const[$e,gt]=As(M,x,t,l),[dt,Je]=As(_,I,t,l),[He,mt]=As(C,O,t,l);U.push(Me),U.push(De),U.push(He),U.push(mt),U.push(dt),U.push(Je),U.push($e),U.push(gt)}A+=n,S+=n,x+=n,I+=n,O+=n}const[J,y]=As(u+b,c+o,t,l),T=(i/2+p)*g,[$,P]=As(u+T,c+o,t,l),[z,X]=As(u+b,c-a,t,l),[ae,te]=As(u+T,c-a,t,l);return{pennants:N,barbs:U,shaft:[J,y,$,P,z,X,ae,te]}}function As(e,t,r,i=1){const s=Math.sqrt(e*e+t*t)/i,n=(2*Math.PI+Math.atan2(t,e))%(2*Math.PI);return[s,(2*Math.PI+n-r)%(2*Math.PI)]}const Lx=[0,1,3,6,10,16,21,27,33,40,47,55,63],QIe=[0,.5,1,1.5,2],eEe=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function xf(e,t,r,i){const s=ZA(i||"knots",r);let n;for(n=1;n<t.length;n++)if(n===t.length-1){if(e<t[n]*s)break}else if(e<=t[n]*s)break;return Math.min(n-1,t.length-2)}function tEe(e,t,r,i,s){let n=0;switch(t){case"beaufort_kn":n=xf(e,Lx,"knots",r);break;case"beaufort_km":n=xf(e,Lx,"kilometer-per-hour",r);break;case"beaufort_ft":n=xf(e,Lx,"feet-per-second",r);break;case"beaufort_m":n=xf(e,Lx,"meter-per-second",r);break;case"classified_arrow":n=xf(e,s??[],i,r);break;case"ocean_current_m":n=xf(e,QIe,"meter-per-second",r);break;case"ocean_current_kn":n=xf(e,eEe,"knots",r)}return n}function rEe(e,t){const{style:r,inputUnit:i,outputUnit:s,breakValues:n}=t,o=zo.fromJSON(i),a=zo.fromJSON(s),l=7*6,u=15;let c=0,p=0;const{width:f,height:m,mask:g}=e,b=e.pixels[0],w=e.pixels[1],S=g!=null?g.filter(I=>I>0).length:f*m,M=new Float32Array(S*l),x=new Uint32Array(u*S),_=t.invertDirection?Kte(0,0,0,!1):KIe;for(let I=0;I<m;I++)for(let E=0;E<f;E++){const A=I*f+E;if(!g||g[I*f+E]){const C=(w[A]+360)%360/180*Math.PI,O=tEe(b[A],r,o,a,n);for(let D=0;D<_.length;D+=2)M[c++]=(E+.5)/f,M[c++]=(I+.5)/m,M[c++]=_[D],M[c++]=_[D+1]+C,M[c++]=O,M[c++]=b[A];const R=7*(c/l-1);x[p++]=R,x[p++]=R+1,x[p++]=R+2,x[p++]=R+0,x[p++]=R+4,x[p++]=R+3,x[p++]=R+0,x[p++]=R+2,x[p++]=R+3,x[p++]=R+2,x[p++]=R+5,x[p++]=R+3,x[p++]=R+5,x[p++]=R+6,x[p++]=R+3}}return{vertexData:M,indexData:x}}const d5=[];function iEe(e,t){if(d5.length===0)for(let m=0;m<30;m++)d5.push(XIe(5*m,0,!t.invertDirection));const r=ZA(zo.fromJSON(t.inputUnit),"knots"),{width:i,height:s,mask:n}=e,o=e.pixels[0],a=e.pixels[1],l=6,u=[],c=[];let p=0,f=0;for(let m=0;m<s;m++)for(let g=0;g<i;g++){const b=m*i+g,w=o[b]*r;if((!n||n[m*i+g])&&w>=A8){const S=(a[b]+360)%360/180*Math.PI,{pennants:M,barbs:x,shaft:_}=d5[Math.min(Math.floor(w/5),29)];if(M.length+x.length===0)continue;let I=u.length/l;const E=(g+.5)/i,A=(m+.5)/s;for(let C=0;C<M.length;C+=2)u[p++]=E,u[p++]=A,u[p++]=M[C],u[p++]=M[C+1]+S,u[p++]=0,u[p++]=w;for(let C=0;C<x.length;C+=2)u[p++]=E,u[p++]=A,u[p++]=x[C],u[p++]=x[C+1]+S,u[p++]=0,u[p++]=w;for(let C=0;C<_.length;C+=2)u[p++]=E,u[p++]=A,u[p++]=_[C],u[p++]=_[C+1]+S,u[p++]=0,u[p++]=w;for(let C=0;C<M.length/6;C++)c[f++]=I,c[f++]=I+1,c[f++]=I+2,I+=3;for(let C=0;C<x.length/8;C++)c[f++]=I,c[f++]=I+1,c[f++]=I+2,c[f++]=I+1,c[f++]=I+2,c[f++]=I+3,I+=4;c[f++]=I+0,c[f++]=I+1,c[f++]=I+2,c[f++]=I+1,c[f++]=I+3,c[f++]=I+2,I+=4}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(c)}}function sEe(e,t){let i=0,s=0;const{width:n,height:o,mask:a}=e,l=e.pixels[0],u=[],c=[],p=ZA(zo.fromJSON(t.inputUnit),"knots"),f=t.style==="wind_speed"?A8:Number.MAX_VALUE;for(let m=0;m<o;m++)for(let g=0;g<n;g++){const b=l[m*n+g]*p;if((!a||a[m*n+g])&&b<f){for(let S=0;S<4;S++)u[i++]=(g+.5)/n,u[i++]=(m+.5)/o,u[i++]=S<2?-.5:.5,u[i++]=S%2==0?-.5:.5,u[i++]=0,u[i++]=b;const w=4*(i/24-1);c[s++]=w,c[s++]=w+1,c[s++]=w+2,c[s++]=w+1,c[s++]=w+2,c[s++]=w+3}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(c)}}function Rot(e,t){return t.style==="simple_scalar"?sEe(e,t):t.style==="wind_speed"?iEe(e,t):rEe(e,t)}function Lot(e,t,r,i=[0,0],s=.5){const{width:n,height:o,mask:a}=e,[l,u]=e.pixels,[c,p]=i,f=Math.round((n-c)/r),m=Math.round((o-p)/r),g=f*m,b=new Float32Array(g),w=new Float32Array(g),S=new Uint8Array(g);for(let x=0;x<m;x++)for(let _=0;_<f;_++){let I=0;const E=x*f+_,A=Math.max(0,x*r+p),C=Math.max(0,_*r+c),O=Math.min(o,A+r),R=Math.min(n,C+r);for(let D=A;D<O;D++)for(let N=C;N<R;N++){const U=D*n+N;if(!a||a[U]){I++;const J=[l[U],u[U]],[y,T]=J;b[E]+=y,w[E]+=T}}if(I>=(O-A)*(R-C)*(1-s)){S[E]=1;const[D,N]=$8([b[E]/I,w[E]/I]);b[E]=D,w[E]=N}else S[E]=0,b[E]=0,w[E]=0}const M=new It({width:f,height:m,pixels:[b,w],mask:S});return M.updateStatistics(),M}function nEe(e){const t=[];return NL(j_e(e),t),t.length?new Le(GQ(t[0])):null}function NL(e,t){if(!e)return;let r;r=e.type==="CIMTextSymbol"?e.symbol:e;const i=e.type==="CIMPolygonSymbol";if(r?.symbolLayers){for(const s of r.symbolLayers)if(!(s.colorLocked||i&&(U_e(s)||V_e(s)&&s.markerPlacement&&BQ(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&wz(t,s.tintColor);break;case"CIMVectorMarker":s.markerGraphics?.forEach(n=>{NL(n.symbol,t)});break;case"CIMSolidStroke":case"CIMSolidFill":wz(t,s.color);break;case"CIMHatchFill":NL(s.lineSymbol,t)}}}function wz(e,t){for(const r of e)if(r.join(".")===t.join("."))return;e.push(t)}new U6(1e3);new Le([128,128,128]);const oEe=new Le("white");function kot(e,t){if(!e)return null;let r=null;return Ay(e)?r=aEe(e):IA(e)&&(r=e.type==="cim"?nEe(e):e.color?new Le(e.color):null),r?t2(r,t):null}function aEe(e){const t=e.symbolLayers;if(!t)return null;let r=null;return t.forEach(i=>{i.type==="object"&&i.resource?.href||(r=i.type==="water"?i.color:i.material?i.material.color:null)}),r?new Le(r):null}function t2(e,t){if(t==null||e==null)return e;const r=e.toRgba();return r[3]=r[3]*t,new Le(r)}function lEe(e,t,r){const i=e.symbolLayers;if(!i)return;const s=n=>t2(t=t??n??(r!=null?oEe:null),r);i.forEach(n=>{if(n.type!=="object"||!n.resource?.href||t)if(n.type==="water")n.color=s(n.color);else{const o=n.material!=null?n.material.color:null,a=s(o);n.material==null?n.material=new Qo({color:a}):n.material.color=a,r!=null&&"outline"in n&&n.outline?.color!=null&&(n.outline.color=t2(n.outline.color,r))}})}function uEe(e,t,r){(t=t??e.color)&&(e.color=t2(t,r)),r!=null&&"outline"in e&&e.outline?.color&&(e.outline.color=t2(e.outline.color,r))}function Not(e,t,r){e&&(t||r!=null)&&(t&&(t=new Le(t)),Ay(e)?lEe(e,t,r):IA(e)&&uEe(e,t,r))}async function cEe(e,t){const r=e.symbolLayers;r&&await sfe(r,async i=>hEe(i,t))}async function hEe(e,t){switch(e.type){case"extrude":dEe(e,t);break;case"icon":case"line":case"text":pEe(e,t);break;case"path":mEe(e,t);break;case"object":await fEe(e,t)}}function pEe(e,t){const r=Xte(t);r!=null&&(e.size=r)}function Xte(e){for(const t of e)if(typeof t=="number")return t;return null}function dEe(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function fEe(e,t){const{resourceSize:r,symbolSize:i}=await yEe(e),s=Qte(t,r,i);e.width=s_(t[0],i[0],r[0],s),e.depth=s_(t[1],i[1],r[1],s),e.height=s_(t[2],i[2],r[2],s)}function mEe(e,t){const r=Qte(t,gY,[e.width,void 0,e.height]);e.width=s_(t[0],e.width,1,r),e.height=s_(t[2],e.height,1,r)}function Qte(e,t,r){for(let i=0;i<3;i++){const s=e[i];switch(s){case"symbol-value":{const n=r[i];return n!=null?n/t[i]:1}case"proportional":break;default:if(s&&t[i])return s/t[i]}}return 1}async function yEe(e){const{computeObjectLayerResourceSize:t}=await fe(()=>import("./symbolLayerUtils-DmAXyJ4F.js"),__vite__mapDeps([133,1]),import.meta.url),r=await t(e,10),{width:i,height:s,depth:n}=e,o=[i,n,s];let a=1;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/r[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=r[l]*a);return{resourceSize:r,symbolSize:o}}function s_(e,t,r,i){switch(e){case"proportional":return r*i;case"symbol-value":return t??r;default:return e}}function gEe(e,t){const r=Xte(t);if(r!=null)switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const i=e.width/e.height;i>1?(e.width=r,e.height=r*i):(e.width=r*i,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r}}async function vEe(e,t){if(e&&t)return Ay(e)?cEe(e,t):void(IA(e)&&gEe(e,t))}function bEe(e,t,r){if(e&&t!=null)if(Ay(e)){const i=e.symbolLayers;i&&i.forEach(s=>{if(s&&s.type==="object")switch(r){case"tilt":s.tilt=(s.tilt??0)+t;break;case"roll":s.roll=(s.roll??0)+t;break;default:s.heading=(s.heading??0)+t}})}else IA(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle+=t))}async function Dot(e,t){return await e.fetchSymbol(t)||e.fetchCIMSymbol(t)}var DL;const _z=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),kx=new wt({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),Nx=new wt({flow_from:"flow-from",flow_to:"flow-to"});let Ks=DL=class extends Jd(ue){constructor(e){super(e),this.attributeField="Magnitude",this.flowRepresentation="flow-from",this.rotationType="arithmetic",this.style="single-arrow",this.symbolTileSize=50,this.type="vector-field"}readInputUnit(e,t){return _z.has(e)?zo.fromJSON(e):null}readOutputUnit(e,t){return _z.has(e)?zo.fromJSON(e):null}get styleRenderer(){const e=this.style,t=this.attributeField,r=this._createStyleRenderer(e);return r.field=t,r}get sizeVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="size"&&e.push(t);if(e.length===0){const t=new Jy({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}get rotationVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="rotation"&&e.push(t);if(e.length===0){const t=new AA({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}clone(){return new DL({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:Z(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(e,t=!1,r=[]){const i=new Array,s=ZA(this.inputUnit,this.outputUnit),n=this.rotationVariables[0]?.rotationType||this.rotationType,o=t?kL(e.pixelBlock,"vector-uv",n,s):YIe(e.pixelBlock,"vector-magdir",s);if(o==null)return i;const a=e.extent,l=o.mask!=null&&o.mask.length>0;let u=0;const c=(a.xmax-a.xmin)/o.width,p=(a.ymax-a.ymin)/o.height;for(let f=0;f<o.height;f++)for(let m=0;m<o.width;m++,u++){let g=new je({x:a.xmin+m*c+c/2,y:a.ymax-f*p-p/2,spatialReference:a.spatialReference});g=(await hc(g))[0];const b=r.some(w=>w.intersects(g));if((!l||o.mask[u])&&!b){const w={Magnitude:o.pixels[0][u],Direction:o.pixels[1][u]},S=new Ga({geometry:new je({x:g.x,y:g.y,spatialReference:a.spatialReference}),attributes:w});S.symbol=this._getVisualVariablesAppliedSymbol(S),i.push(S)}}return i}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getClassBreakInfos(){return this.styleRenderer?.classBreakInfos}getDefaultSymbol(){return this.styleRenderer?.defaultSymbol}_getDefaultSymbol(e){return new Mo({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new qn({width:0}),size:20,color:e||new Le([0,92,230])})}_getVisualVariablesAppliedSymbol(e){if(!e)return;const t=this.styleRenderer?.getSymbol(e)?.clone(),r=this.sizeVariables,i=this.rotationVariables;if(r&&r.length&&this.sizeVariables.forEach(s=>vEe(t,mQ([s],e))),i&&i.length){const s=this.flowRepresentation==="flow-to"==(this.style==="ocean-current-kn"||this.style==="ocean-current-m")?0:180;e.attributes.Direction=e.attributes.Direction+s,this.rotationVariables.forEach(n=>bEe(t,N6(n,e),n.axis))}return t}_createStyleRenderer(e){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new S1(t)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){const e=[0,1,3,6,10,16,21,27,33,40,47,55,63],t=[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]];return{defaultSymbol:this._getDefaultSymbol(new Le([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortMeterRenderer(){const e=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],t=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]];return{defaultSymbol:this._getDefaultSymbol(new Le([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortFeetRenderer(){const e=this._getDefaultSymbol(new Le([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],i=3.28084;return t=t.map(s=>s*i),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createBeaufortMilesRenderer(){const e=this._getDefaultSymbol(new Le([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],i=2.23694;return t=t.map(s=>s*i),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createBeaufortKilometersRenderer(){const e=this._getDefaultSymbol(new Le([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],i=3.6;return t=t.map(s=>s*i),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createCurrentMeterRenderer(){const e=[0,.5,1,1.5,2],t=[[78,26,153],[179,27,26],[202,128,26],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new Le([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createCurrentKnotsRenderer(){const e=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],t=[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new Le([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createClassifiedArrowRenderer(){const e=this._getDefaultSymbol(new Le([56,168,0]));let t=[0,1e-6,3.5,7,10.5,14];if(this.sizeVariables?.length){const i=this.sizeVariables[0].minDataValue,s=this.sizeVariables[0].maxDataValue;if(i&&s){const n=(s-i)/5;t=Array.from(Array(6).keys()).map(o=>i+n*o)}}const r=[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]];return{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createSimpleScalarRenderer(){return{defaultSymbol:Sh.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}_createWindBarbsRenderer(){const e=Array.from(Array(31).keys()).map(s=>5*s),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],r=Sh.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),i=e.map((s,n)=>{let o;if(n!==e.length-1)if(n===0)o={minValue:s,maxValue:e[n+1],symbol:r};else{const a=Sh.fromJSON({type:"esriPMS",imageData:t[n].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});o={minValue:s,maxValue:e[n+1],symbol:a}}return new Ov(o)});return{defaultSymbol:r,classBreakInfos:i}}_getClassBreaks(e,t){return t.map((r,i)=>new Ov({minValue:e[i],maxValue:e[i+1],symbol:this._getDefaultSymbol(new Le(r))}))}};h([d({type:["Magnitude"],json:{write:!0}})],Ks.prototype,"attributeField",void 0),h([d({type:Nx.apiValues,json:{type:Nx.jsonValues,read:{reader:Nx.read},write:{writer:Nx.write}}})],Ks.prototype,"flowRepresentation",void 0),h([d({type:["geographic","arithmetic"],json:{write:!0}})],Ks.prototype,"rotationType",void 0),h([d({type:kx.apiValues,json:{type:kx.jsonValues,read:{reader:kx.read},write:{writer:kx.write}}})],Ks.prototype,"style",void 0),h([d({json:{write:!0}})],Ks.prototype,"symbolTileSize",void 0),h([d({type:zo.apiValues,json:{type:zo.jsonValues,write:{writer:zo.write}}})],Ks.prototype,"inputUnit",void 0),h([pe("inputUnit")],Ks.prototype,"readInputUnit",null),h([d({type:zo.apiValues,json:{type:zo.jsonValues,read:{reader:zo.read},write:{writer:zo.write}}})],Ks.prototype,"outputUnit",void 0),h([pe("outputUnit")],Ks.prototype,"readOutputUnit",null),h([We({vectorField:"vector-field"})],Ks.prototype,"type",void 0),h([d({type:S1})],Ks.prototype,"styleRenderer",null),h([d({type:Jy})],Ks.prototype,"sizeVariables",null),h([d({type:AA})],Ks.prototype,"rotationVariables",null),Ks=DL=h([j("esri.renderers.VectorFieldRenderer")],Ks);const C8=Ks,FL={key:"type",base:null,typeMap:{"unique-value":M1,"class-breaks":S1,"raster-colormap":M8,"raster-stretch":T8,"vector-field":C8,"raster-shaded-relief":Ute,flow:kte}},jL={...FL,typeMap:{...FL.typeMap}};delete jL.typeMap["vector-field"],delete jL.typeMap.flow;const wEe={uniqueValue:M1,classBreaks:S1,rasterStretch:T8,rasterColormap:M8,vectorField:C8,rasterShadedRelief:Ute,flowRenderer:kte};function _Ee(e){return e&&wEe[e.type]||null}function SEe(e,t){if(!e)return null;if(e.type==="classBreaks"&&e.classificationMethod){const i=e.authoringInfo||{classificationMethod:""};i.classificationMethod=e.classificationMethod,e.authoringInfo=i}e.type==="vectorField"&&e.visualVariables&&!Array.isArray(e.visualVariables)&&(e.visualVariables=[e.visualVariables]);const r=_Ee(e);if(r){const i=new r;return i.read(e,t),i}return t?.messages&&e&&t.messages.push(new sa("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}var VL;let dm=VL=class extends ue{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new VL({variableName:this.variableName,dimensionName:this.dimensionName,values:Z(this.values),isSlice:this.isSlice})}};h([d({type:String,json:{write:!0}})],dm.prototype,"variableName",void 0),h([d({type:String,json:{write:!0}})],dm.prototype,"dimensionName",void 0),h([d({type:B1.array(B1.oneOf([B1.native(Number),B1.array(B1.native(Number))])),json:{write:!0}})],dm.prototype,"values",void 0),h([d({type:Boolean,json:{write:!0}})],dm.prototype,"isSlice",void 0),dm=VL=h([j("esri.layers.support.DimensionalDefinition")],dm);const Nv=dm,bd=Oi()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),n_=Oi()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"}),av=Oi()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"});let $p=class extends ue{constructor(){super(...arguments),this.pixelType="unknown"}};h([d({type:String,json:{write:!0}})],$p.prototype,"name",void 0),h([d({type:String,json:{write:!0}})],$p.prototype,"description",void 0),h([d({type:St,json:{type:St,write:!0,name:"_object_id"}})],$p.prototype,"id",void 0),h([d({type:String,json:{type:av.jsonValues,read:av.read,write:av.write}})],$p.prototype,"pixelType",void 0),h([d({type:String,json:{write:!0}})],$p.prototype,"type",void 0),$p=h([j("esri.layers.support.RasterFunctionInfo")],$p);const xEe=$p;let qc=class extends ue{constructor(){super(...arguments),this.isDataset=!1,this.isPublic=!1,this.type="RasterFunctionVariable"}};h([d({type:String,json:{write:!0}})],qc.prototype,"name",void 0),h([d({type:Number,json:{type:St,write:!0,name:"_object_id"}})],qc.prototype,"id",void 0),h([d({type:Boolean,json:{write:!0}})],qc.prototype,"isDataset",void 0),h([d({type:Boolean,json:{write:!0}})],qc.prototype,"isPublic",void 0),h([d({json:{write:!0}})],qc.prototype,"value",void 0),h([d({type:String,json:{write:!0}})],qc.prototype,"type",void 0),qc=h([j("esri.layers.support.RasterFunctionVariable")],qc);const MEe=qc,Dx={key:"type",base:null,typeMap:{RasterFunctionVariable:MEe}};let fm=class extends ue{};h([d({types:Dx,json:{types:Dx,name:"MatchVariable"}})],fm.prototype,"matchVariable",void 0),h([d({types:Dx,json:{types:Dx,name:"UnionDimension"}})],fm.prototype,"unionDimension",void 0),h([d({type:Number,json:{type:St,write:!0,name:"_object_id"}})],fm.prototype,"id",void 0),h([d({type:String,json:{write:!0}})],fm.prototype,"type",void 0),fm=h([j("esri.layers.support.RasterFunctionProperties")],fm);const TEe=fm,f5=new wt({0:"mosaic",1:"item",2:"item-group"},{useNumericKeys:!0});let ps=class extends ue{constructor(){super(...arguments),this.functionType="mosaic",this.type="RasterFunctionTemplate"}};h([d({type:[String],json:{write:!0}})],ps.prototype,"aliases",void 0),h([d({type:Object,json:{write:!0}})],ps.prototype,"arguments",void 0),h([d({type:String,json:{write:!0}})],ps.prototype,"description",void 0),h([d({type:xEe,json:{write:!0,name:"function"}})],ps.prototype,"functionInfo",void 0),h([d({type:f5.apiValues,json:{type:[0,1,2],read:f5.read,write:f5.write}})],ps.prototype,"functionType",void 0),h([d({type:String,json:{write:!0}})],ps.prototype,"group",void 0),h([d({type:String,json:{write:!0}})],ps.prototype,"help",void 0),h([d({type:Number,json:{type:St,write:!0,name:"_object_id"}})],ps.prototype,"id",void 0),h([d({type:String,json:{write:!0}})],ps.prototype,"name",void 0),h([d({type:String,json:{write:!0,name:"definition"}})],ps.prototype,"queryDefinition",void 0),h([d({type:String,json:{write:!0}})],ps.prototype,"tag",void 0),h([d({type:TEe,json:{write:!0}})],ps.prototype,"properties",void 0),h([d({type:String,json:{write:!0}})],ps.prototype,"thumbnail",void 0),h([d({type:String,json:{write:!0}})],ps.prototype,"thumbnailEx",void 0),h([d({json:{type:["RasterFunctionTemplate"],write:!0}})],ps.prototype,"type",void 0),ps=h([j("esri.layers.support.RasterFunctionTemplate")],ps);const ere=ps;var UL;const FT=new Set(["raster","raster2","dem","fillraster"]),jT=new Set(["rasters"]),Sz=e=>e?.rasterFunction?en.fromJSON(e):e,m5=e=>e&&e instanceof en?e.toJSON():e,zL=e=>e?.functionName&&!e.declaredClass,xz=e=>zL(e)?new en(e):e,IEe=e=>{if(e==null)return null;e=Z(e);const t={};for(const r of Object.keys(e))FT.has(r.toLowerCase())?t[r]=Sz(e[r]):jT.has(r.toLowerCase())&&Array.isArray(e[r])?t[r]=e[r].map(Sz):t[r]=e[r];return t},EEe={types:{key:"type",base:null,typeMap:{RasterFunctionTemplate:ere}},json:{write:!0,name:"rasterFunctionDefinition"}};let en=UL=class extends ue{constructor(e){super(e),this.functionName=null,this.outputPixelType="unknown",this.variableName=null,this.functionDefinition=null}set functionArguments(e){if(e){const t=Object.keys(e);if(t.some(r=>FT.has(r.toLowerCase())&&zL(e[r]))||t.some(r=>jT.has(r.toLowerCase())&&Array.isArray(e[r])&&e[r].some(i=>zL(i)))){e=Z(e);for(const r of t)FT.has(r.toLowerCase())?e[r]=xz(e[r]):jT.has(r.toLowerCase())&&Array.isArray(e[r])&&(e[r]=e[r].map(i=>xz(i)))}}this._set("functionArguments",e)}readFunctionArguments(e){return IEe(e)}writeFunctionArguments(e,t,r){const i={};for(const s of Object.keys(e))FT.has(s.toLowerCase())?i[s]=m5(e[s]):jT.has(s.toLowerCase())&&Array.isArray(e[s])?i[s]=e[s].map(m5):i[s]=m5(e[s]);t[r]=i}readFunctionName(e,t){const r=t.rasterFunctionInfos;return t.name||(r?.length&&r[0].name!=="None"?r[0].name:t.rasterFunctionDefinition?t.rasterFunctionDefinition.name:t.rasterFunction)}get rasterFunctionDefinition(){return this.functionDefinition?.toJSON()}set rasterFunctionDefinition(e){this.functionDefinition=e?ere.fromJSON(e):null}get hasClipFunction(){return this.rasterFunctionDefinition?JSON.stringify(this.rasterFunctionDefinition).includes('"type":"ClipFunction"'):JSON.stringify(this).includes('"rasterFunction":"Clip"')}clone(){return new UL({functionName:this.functionName,functionArguments:Z(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,rasterFunctionDefinition:Z(this.rasterFunctionDefinition)})}};h([d({json:{type:Object,name:"rasterFunctionArguments"}})],en.prototype,"functionArguments",null),h([pe("functionArguments")],en.prototype,"readFunctionArguments",null),h([ge("functionArguments")],en.prototype,"writeFunctionArguments",null),h([d({json:{type:String,write:{target:"rasterFunction"}}})],en.prototype,"functionName",void 0),h([pe("functionName",["rasterFunction","rasterFunctionInfos","rasterFunctionDefinition"])],en.prototype,"readFunctionName",null),h([We({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),d({json:{default:"unknown"}})],en.prototype,"outputPixelType",void 0),h([d({type:String,json:{read:!0,write:!0}})],en.prototype,"variableName",void 0),h([d()],en.prototype,"rasterFunctionDefinition",null),h([d(EEe)],en.prototype,"functionDefinition",void 0),h([d()],en.prototype,"hasClipFunction",null),en=UL=h([j("esri.layers.support.RasterFunction")],en);const qt=en,AEe={StretchFunction:{arguments:{ComputeGamma:{isDataset:!1,isPublic:!1,name:"ComputeGamma",type:"RasterFunctionVariable",value:!1},DRA:{isDataset:!1,isPublic:!1,name:"DRA",type:"RasterFunctionVariable",value:!1},EstimateStatsHistogram:{isDataset:!1,isPublic:!1,name:"EstimateStatsHistogram",type:"RasterFunctionVariable",value:!1},Gamma:{displayName:"Gamma",isDataset:!1,isPublic:!1,name:"Gamma",type:"RasterFunctionVariable"},Histograms:{isDataset:!1,isPublic:!1,name:"Histograms",type:"RasterFunctionVariable"},Max:{isDataset:!1,isPublic:!1,name:"Max",type:"RasterFunctionVariable",value:255},MaxPercent:{isDataset:!1,isPublic:!1,name:"MaxPercent",type:"RasterFunctionVariable",value:.5},Min:{isDataset:!1,isPublic:!1,name:"Min",type:"RasterFunctionVariable",value:0},MinPercent:{isDataset:!1,isPublic:!1,name:"MinPercent",type:"RasterFunctionVariable",value:.25},NumberOfStandardDeviations:{isDataset:!1,isPublic:!1,name:"NumberOfStandardDeviation",type:"RasterFunctionVariable",value:2},Raster:{isDataset:!0,isPublic:!1,name:"Raster",type:"RasterFunctionVariable"},SigmoidStrengthLevel:{isDataset:!1,isPublic:!1,name:"SigmoidStrengthLevel",type:"RasterFunctionVariable",value:2},Statistics:{isDataset:!1,isPublic:!1,name:"Statistics",type:"RasterFunctionVariable"},StretchType:{isDataset:!1,isPublic:!1,name:"StretchType",type:"RasterFunctionVariable",value:0},type:"StretchFunctionArguments",UseGamma:{isDataset:!1,isPublic:!1,name:"UseGamma",type:"RasterFunctionVariable",value:!1}},description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",function:{description:"Enhances an image by adjusting the range of values displayed. This does not alter the underlying pixel values. If a pixel has a value outside of the specified range, it will appear as either the minimum or maximum value.",name:"Stretch",pixelType:"UNKNOWN",type:"StretchFunction"},functionType:0,name:"Stretch",thumbnail:""},RemapFunction:{name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table.",function:{type:"RemapFunction",pixelType:"UNKNOWN",name:"Remap",description:"Changes pixel values by assigning new values to ranges of pixel values or using an external table."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},UseTable:{name:"UseTable",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},InputRanges:{name:"InputRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Input Ranges"},OutputValues:{name:"OutputValues",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"Output Values"},NoDataRanges:{name:"NoDataRanges",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable",displayName:"NoData Ranges"},Table:{name:"Table",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputField:{name:"InputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},OutputField:{name:"OutputField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},InputMaxField:{name:"InputMaxField",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},RemapTableType:{name:"RemapTableType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},AllowUnmatched:{name:"AllowUnmatched",isPublic:!1,isDataset:!1,value:!0,type:"RasterFunctionVariable"},type:"RemapFunctionArguments"},functionType:0,thumbnail:""},ColormapFunction:{name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp.",function:{type:"ColormapFunction",pixelType:"UNKNOWN",name:"Colormap",description:"Changes pixel values to display the raster data as either a grayscale or a red, green, blue (RGB) image, based on a colormap or a color ramp."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},ColormapName:{name:"ColormapName",isPublic:!1,isDataset:!1,value:"Gray",type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},type:"ColormapFunctionArguments"},functionType:0,thumbnail:""},ShadedReliefFunction:{name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image.",function:{type:"ShadedReliefFunction",pixelType:"UNKNOWN",name:"Shaded Relief",description:"Creates a multiband, color coded, 3D representation of the surface, with the sun's relative position taken into account for shading the image."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ColorSchemeType:{name:"ColorSchemeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ColorRamp:{name:"ColorRamp",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Colormap:{name:"Colormap",isPublic:!1,isDataset:!1,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"ShadedReliefFunctionArguments"},functionType:0,thumbnail:""},HillshadeFunction:{name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image",function:{type:"HillshadeFunction",pixelType:"UNKNOWN",name:"Hillshade",description:"Creates a 3D representation of the surface, with the sun's relative position taken into account for shading the image"},arguments:{DEM:{name:"DEM",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},HillshadeType:{name:"HillshadeType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},Azimuth:{name:"Azimuth",isPublic:!1,isDataset:!1,value:315,type:"RasterFunctionVariable"},Altitude:{name:"Altitude",isPublic:!1,isDataset:!1,value:45,type:"RasterFunctionVariable"},SlopeType:{name:"SlopeType",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},ZFactor:{name:"ZFactor",isPublic:!1,isDataset:!1,value:1,type:"RasterFunctionVariable"},PSPower:{name:"PSPower",isPublic:!1,isDataset:!1,value:.664,type:"RasterFunctionVariable"},PSZFactor:{name:"PSZFactor",isPublic:!1,isDataset:!1,value:.024,type:"RasterFunctionVariable"},RemoveEdgeEffect:{name:"RemoveEdgeEffect",isPublic:!1,isDataset:!1,value:!1,type:"RasterFunctionVariable"},type:"HillshadeFunctionArguments"},functionType:0,thumbnail:""},ResampleFunction:{name:"Resample",description:"Changes the cell size of a raster.",function:{type:"ResampleFunction",pixelType:"UNKNOWN",name:"Resample",description:"Changes the cell size of a raster."},arguments:{Raster:{name:"Raster",isPublic:!1,isDataset:!0,type:"RasterFunctionVariable"},ResamplingType:{name:"ResamplingType",isPublic:!1,isDataset:!1,value:0,type:"RasterFunctionVariable"},InputCellSize:{name:"InputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},OutputCellSize:{name:"OutputCellsize",isPublic:!1,isDataset:!1,value:{x:0,y:0},type:"RasterFunctionVariable"},type:"ResampleFunctionArguments"},functionType:0,thumbnail:""}},$Ee=new Set(["u1","u2","u4","u8","s8","u16","s16"]),CEe={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},OEe=new Set(["raster-stretch","unique-value","class-breaks","raster-shaded-relief","vector-field","raster-colormap"]);function tre(e){return OEe.has(e.type)}function GL(e,t){if(!e||!t)return Z(e||t);const r=Z(e);if(r.functionDefinition&&t.rasterFunctionDefinition){const i=t.rasterFunctionDefinition;(i.thumbnail||i.thumbnailEx)&&(i.thumbnail=i.thumbnailEx=void 0),rre(r.functionDefinition.arguments,t),r.rasterFunctionDefinition=r.functionDefinition.toJSON()}else t.functionName?.toLowerCase()!=="none"&&(ire(r.functionArguments).Raster=t);return r}function rre(e,t){for(const r in e)r.toLowerCase()==="raster"&&(e[r].type==="RasterFunctionVariable"?(e[r]=t.rasterFunctionDefinition,e[r].type="RasterFunctionTemplate"):e[r].type==="RasterFunctionTemplate"&&rre(e[r].arguments,t))}function tc(e){const t=Z(AEe[e.functionName+"Function"]),r=e.functionArguments;for(const i in r)i.toLowerCase()==="raster"?(t.arguments[i]=tc(r[i]),t.arguments[i].type="RasterFunctionTemplate"):i.toLowerCase()==="colormap"?(t.arguments[i].value=VEe(r[i]),t.arguments.ColorSchemeType.value=0):t.arguments[i].value=r[i];return t}function PEe(e,t){switch(t=t||{},e.type){case"raster-stretch":return kEe(e,t);case"class-breaks":return NEe(e,t);case"unique-value":return DEe(e,t);case"raster-colormap":return FEe(e,t);case"vector-field":return REe(e,t);case"raster-shaded-relief":return LEe(e,t);case"flow":throw new Error("Unsupported rendering rule.")}}function ire(e){const t=e?.Raster??e?.raster;return t&&t.declaredClass==="esri.layers.support.RasterFunction"?ire(t.functionArguments):e}const ob={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function REe(e,t){const r=new qt;r.functionName="VectorFieldRenderer";const{dataType:i,bandNames:s}=t,n=i==="vector-uv";let o,a;if(s&&s.length===2){const m=s.map(g=>g.toLowerCase());o=m.indexOf("magnitude"),a=m.indexOf("direction")}o!==-1&&o!==null||(o=0,a=1);const l=e.rotationType==="arithmetic"?1:2,u=e.flowRepresentation==="flow-from"?0:1,c=e.visualVariables?e.visualVariables.find(m=>m.field==="Magnitude"):new Jy,p={magnitudeBandID:o,directionBandID:a,isUVComponents:n,referenceSystem:l,massFlowAngleRepresentation:u,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:CEe[e.style.toLowerCase().replace("-","_")],minimumMagnitude:c.minDataValue,maximumMagnitude:c.maxDataValue,minimumSymbolSize:c.minSize,maximumSymbolSize:c.maxSize};r.functionArguments=p;const f=tc(r);return t.convertToRFT?qt.fromJSON({rasterFunctionDefinition:f}):r}function LEe(e,t){const r=t.convertToRFT;if(t.dataType!=="elevation"&&(t.dataType!=="generic"||t.bandCount!==1||t.pixelType!=="s16"&&t.pixelType!=="s32"&&t.pixelType!=="f32"&&t.pixelType!=="f64"))return new qt;const i=new qt;i.functionName="Hillshade";const s=e.hillshadeType==="traditional"?0:1,n=e.scalingType==="none"?1:3,o={HillshadeType:s,SlopeType:n,ZFactor:e.zFactor};return s===0&&(o.Azimuth=e.azimuth,o.Altitude=e.altitude),n===3&&(o.PSPower=e.pixelSizePower,o.PSZFactor=e.pixelSizeFactor),i.functionArguments=o,i.variableName="Raster",e.colorRamp&&(i.functionName="ShadedRelief",r?o.ColorRamp=Vte(e.colorRamp):o.Colormap=kv(e.colorRamp)),r?new qt({rasterFunctionDefinition:tc(i)}):i}function kEe(e,t){const r=t.convertToRFT,i=new qt;i.functionName="Stretch";const s=ob[r_.toJSON(e.stretchType)],n="u8",o={StretchType:s,Statistics:jEe(e.statistics??[]),DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(e.outputMin!=null&&(o.Min=e.outputMin),e.outputMax!=null&&(o.Max=e.outputMax),s===ob.standardDeviation?(o.NumberOfStandardDeviations=e.numberOfStandardDeviations,i.outputPixelType=n):s===ob.percentClip?(o.MinPercent=e.minPercent,o.MaxPercent=e.maxPercent,i.outputPixelType=n):s===ob.minMax?i.outputPixelType=n:s===ob.sigmoid&&(o.SigmoidStrengthLevel=e.sigmoidStrengthLevel),i.functionArguments=o,i.variableName="Raster",e.colorRamp){const a=e.colorRamp,l=new qt;if(r)l.functionArguments={ColorRamp:Vte(a)};else{const u=Dte(a,!0);if(u)l.functionArguments={colorRampName:u};else if(!t.convertColorRampToColormap||a.type!=="algorithmic"&&a.type!=="multipart"){const c=e.colorRamp.toJSON();c.type==="algorithmic"?c.algorithm=c.algorithm||"esriCIELabAlgorithm":c.type==="multipart"&&c.colorRamps?.length&&c.colorRamps.forEach(p=>p.algorithm=p.algorithm||"esriCIELabAlgorithm"),l.functionArguments={colorRamp:c}}else l.functionArguments={Colormap:kv(a)}}return l.variableName="Raster",l.functionName="Colormap",l.functionArguments.Raster=i,r?new qt({rasterFunctionDefinition:tc(l)}):l}return r?new qt({rasterFunctionDefinition:tc(i)}):i}function NEe(e,t){const r=[],i=[],s=[],n=[],{pixelType:a,rasterAttributeTable:l}=t,u=l==null?null:l.features,c=sre(l);if(c&&u&&Array.isArray(u)&&e.classBreakInfos){e.classBreakInfos.forEach((w,S)=>{const M=w.symbol?.color;let x;M?.a&&w.minValue!=null&&w.maxValue!=null&&u.forEach(_=>{w.minValue!=null&&w.maxValue!=null&&(x=_.attributes[e.field],(x>=w.minValue&&x<w.maxValue||S===e.classBreakInfos.length-1&&x>=w.minValue)&&n.push([_.attributes[c],M.r,M.g,M.b]))})});const g=a?MI(n,a):n,b=new qt;return b.functionName="Colormap",b.functionArguments={},b.functionArguments.Colormap=g,b.variableName="Raster",t.convertToRFT?new qt({rasterFunctionDefinition:tc(b)}):b}e.classBreakInfos.forEach((g,b)=>{if(g.minValue==null||g.maxValue==null)return;const w=g.symbol&&g.symbol.color;w?.a?(b===0?r.push(g.minValue,g.maxValue+1e-4):r.push(g.minValue+1e-4,g.maxValue+1e-4),i.push(b),n.push([b,w.r,w.g,w.b])):s.push(g.minValue,g.maxValue)});const p=a?MI(n,a):n,f=new qt;f.functionName="Remap",f.functionArguments={InputRanges:r,OutputValues:i,NoDataRanges:s},f.variableName="Raster";const m=new qt;return m.functionName="Colormap",m.functionArguments={Colormap:p,Raster:f},t.convertToRFT?new qt({rasterFunctionDefinition:tc(m)}):m}function MI(e,t){const r=$Ee.has(t)?$1(t):null;return r&&e.push([Math.floor(r[0]-1),0,0,0],[Math.ceil(r[1]+1),0,0,0]),e}function sre(e){if(e==null)return;const{fields:t}=e;return t?.find(i=>i?.name&&i.name.toLowerCase()==="value")?.name}function DEe(e,t){const r=[],{pixelType:i,rasterAttributeTable:s}=t,n=s==null?null:s.features,o=sre(s),a=e.defaultSymbol?.color?.toRgb(),l=e.uniqueValueInfos;if(l)if(n){if(o){const p=new Map;l.forEach(m=>{const g=m.value,b=Mz(m);g!=null&&b?.a&&p.set(String(g),b.toRgb())});const f=e.field;f&&n.forEach(({attributes:m})=>{const g=String(m[f]),b=m[o],w=p.get(g);w?r.push([b,...w]):a&&r.push([b,...a])})}}else for(let p=0;p<l.length;p++){const f=l[p],m=Mz(f),g=+f.value;if(m?.a){if(isNaN(g))return null;r.push([g,m.r,m.g,m.b])}}const u=i?MI(r,i):r,c=new qt;return c.functionName="Colormap",c.functionArguments={},c.functionArguments.Colormap=u,c.variableName="Raster",t.convertToRFT?new qt({rasterFunctionDefinition:tc(c)}):c}function Mz(e){return e.symbol?.type==="polygon-3d"?e.symbol.symbolLayers?.find(t=>t.type==="fill")?.material?.color:e.symbol?.color}function FEe(e,t){const r=e.extractColormap();if(!r||r.length===0)return null;const{pixelType:i}=t,s=i?MI(r,i):r,n=new qt;return n.functionName="Colormap",n.functionArguments={},n.functionArguments.Colormap=s,t.convertToRFT?new qt({rasterFunctionDefinition:tc(n)}):n}function jEe(e){const t=[];return e?.forEach(r=>{const i=r;if(Array.isArray(i))t.push(i);else{if(i.min==null||i.max==null)return;const s=[i.min,i.max,i.avg||0,i.stddev||0];t.push(s)}}),t}function VEe(e){const t=[],r=[];return e.forEach(i=>{t.push(i[0]),r.push($Ie([...i.slice(1),255]))}),{type:"RasterColormap",values:t,colors:r}}var BL;const o_=Oi()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),qL=Oi()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});function UEe(e){let t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;default:t="esriMosaicNone"}return qL.fromJSON(t)}let Fi=BL=class extends ue{constructor(e){super(e),this.ascending=!0,this.itemRasterFunction=null,this.lockRasterIds=null,this.method=null,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=null,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return t.ascending!=null?t.ascending:t.sortAscending==null||t.sortAscending}get itemRenderingRule(){return Al(be.getLogger(this),"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",warnOnce:!0}),this._get("itemRasterFunction")}set itemRenderingRule(e){Al(be.getLogger(this),"itemRenderingRule",{replacement:"itemRasterFunction",version:"4.27",warnOnce:!0}),this._set("itemRasterFunction",e)}readMethod(e,t){return UEe(t.mosaicMethod||t.defaultMosaicMethod)}writeMultidimensionalDefinition(e,t,r){e!=null&&(e=e.filter(({variableName:i,dimensionName:s})=>i&&i!=="*"||s)).length&&(t[r]=e.map(i=>i.toJSON()))}readOperation(e,t){const r=t.mosaicOperation,i=t.mosaicOperator?.toLowerCase(),s=r||(i?o_.toJSON(i):null);return o_.fromJSON(s)||"first"}castSortValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new BL({ascending:this.ascending,itemRasterFunction:Z(this.itemRasterFunction),lockRasterIds:Z(this.lockRasterIds),method:this.method,multidimensionalDefinition:Z(this.multidimensionalDefinition),objectIds:Z(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:Z(this.viewpoint),where:this.where})}};h([d({type:Boolean,json:{write:!0}})],Fi.prototype,"ascending",void 0),h([pe("ascending",["ascending","sortAscending"])],Fi.prototype,"readAscending",null),h([d({type:qt,json:{name:"itemRenderingRule",write:!0}})],Fi.prototype,"itemRasterFunction",void 0),h([d({type:qt})],Fi.prototype,"itemRenderingRule",null),h([d({type:[St],json:{write:{overridePolicy(){return{enabled:this.method==="lock-raster"}}}}})],Fi.prototype,"lockRasterIds",void 0),h([d({type:String,json:{type:qL.jsonValues,write:{target:"mosaicMethod",writer:qL.write}}})],Fi.prototype,"method",void 0),h([pe("method",["mosaicMethod","defaultMosaicMethod"])],Fi.prototype,"readMethod",null),h([d({type:[Nv],json:{write:!0}})],Fi.prototype,"multidimensionalDefinition",void 0),h([ge("multidimensionalDefinition")],Fi.prototype,"writeMultidimensionalDefinition",null),h([d({type:[St],json:{name:"fids",write:!0}})],Fi.prototype,"objectIds",void 0),h([d({json:{type:o_.jsonValues,read:{reader:o_.read},write:{target:"mosaicOperation",writer:o_.write}}})],Fi.prototype,"operation",void 0),h([pe("operation",["mosaicOperation","mosaicOperator"])],Fi.prototype,"readOperation",null),h([d({type:String,json:{write:{overridePolicy(){return{enabled:this.method==="attribute"}}}}})],Fi.prototype,"sortField",void 0),h([d({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:this.method==="attribute",allowNull:!0}}}}})],Fi.prototype,"sortValue",void 0),h([Zt("sortValue")],Fi.prototype,"castSortValue",null),h([d({type:je,json:{write:!0}})],Fi.prototype,"viewpoint",void 0),h([d({type:String,json:{write:!0}})],Fi.prototype,"where",void 0),Fi=BL=h([j("esri.layers.support.MosaicRule")],Fi);const Go=Fi;let pi=class extends ue{constructor(){super(...arguments),this.layer=null,this.compression=void 0,this.pixelType=void 0,this.lercVersion=2}get adjustAspectRatio(){return this.layer.adjustAspectRatio}writeAdjustAspectRatio(t,r,i){this.layer.version<10.3||(r[i]=t)}get bandIds(){return this.layer.bandIds}get compressionQuality(){return this.layer.compressionQuality}writeCompressionQuality(t,r,i){this.format&&this.format.toLowerCase().includes("jpg")&&t!=null&&(r[i]=t)}get compressionTolerance(){return this.layer.compressionTolerance}writeCompressionTolerance(t,r,i){this.format==="lerc"&&t!=null&&(r[i]=t)}get format(){return this.layer.renderer?.type==="vector-field"?"lerc":this.layer.format}get interpolation(){return this.layer.interpolation}get noData(){return this.layer.noData}get noDataInterpretation(){return this.layer.noDataInterpretation}writeLercVersion(t,r,i){this.format==="lerc"&&this.layer.version>=10.5&&(r[i]=t)}get version(){const t=this.layer;return t.commitProperty("bandIds"),t.commitProperty("format"),t.commitProperty("compressionQuality"),t.commitProperty("compressionTolerance"),t.commitProperty("interpolation"),t.commitProperty("noData"),t.commitProperty("noDataInterpretation"),t.commitProperty("mosaicRule"),t.commitProperty("rasterFunction"),t.commitProperty("adjustAspectRatio"),t.commitProperty("pixelFilter"),t.commitProperty("definitionExpression"),t.commitProperty("multidimensionalSubset"),(this._get("version")||0)+1}set version(t){this._set("version",t)}get mosaicRule(){const t=this.layer;let r=t.mosaicRule;const i=t.definitionExpression;return r?i&&i!==r.where&&(r=r.clone(),r.where=i):i&&(r=new Go({where:i})),r}get rasterFunction(){const t=this.layer;let{rasterFunction:r}=t;const i=t.pixelFilter,s=!t.format||t.format.includes("jpg")||t.format.includes("png");r=this._addResampleRasterFunction(r);const n=t.multidimensionalSubset?.areaOfInterest;return n&&(r=zEe(r,n)),s&&!i&&t.renderer?.type!=="vector-field"&&(r=this.combineRendererWithRenderingRule(r)),r}combineRendererWithRenderingRule(t){const r=this.layer,{rasterInfo:i,renderer:s}=r;return t=t||r.rasterFunction,!s||!tre(s)?t:GL(PEe(s,{rasterAttributeTable:i.attributeTable,pixelType:i.pixelType,dataType:i.dataType,bandNames:i.bandInfos.map(({name:n})=>n),convertColorRampToColormap:r.version<10.6,convertToRFT:!!t?.rasterFunctionDefinition,bandCount:i.bandCount}),t)}_addResampleRasterFunction(t){if(this.layer.renderer?.type!=="vector-field"||t?.functionName==="Resample")return t;const r=this.layer.serviceDataType==="esriImageServiceDataTypeVector-UV"?7:10,i=this.layer.serviceRasterInfo.pixelSize;let s=new qt({functionName:"Resample",functionArguments:{ResamplingType:r,InputCellSize:i}});return s=t?.rasterFunctionDefinition?new qt({rasterFunctionDefinition:tc(s)}):s,GL(s,t)}};function zEe(e,t){const r=new qt({functionName:"Clip",functionArguments:{ClippingGeometry:t.toJSON(),ClippingType:1}});return GL(r,e)}h([d()],pi.prototype,"layer",void 0),h([d({json:{write:!0}})],pi.prototype,"adjustAspectRatio",null),h([ge("adjustAspectRatio")],pi.prototype,"writeAdjustAspectRatio",null),h([d({json:{write:!0}})],pi.prototype,"bandIds",null),h([d({json:{write:!0}})],pi.prototype,"compression",void 0),h([d({json:{write:!0}})],pi.prototype,"compressionQuality",null),h([ge("compressionQuality")],pi.prototype,"writeCompressionQuality",null),h([d({json:{write:!0}})],pi.prototype,"compressionTolerance",null),h([ge("compressionTolerance")],pi.prototype,"writeCompressionTolerance",null),h([d({json:{write:!0}})],pi.prototype,"format",null),h([d({type:String,json:{read:{reader:bd.read},write:{writer:bd.write}}})],pi.prototype,"interpolation",null),h([d({json:{write:!0}})],pi.prototype,"noData",null),h([d({type:String,json:{read:{reader:n_.read},write:{writer:n_.write}}})],pi.prototype,"noDataInterpretation",null),h([d({json:{write:!0}})],pi.prototype,"pixelType",void 0),h([d({json:{write:!0}})],pi.prototype,"lercVersion",void 0),h([ge("lercVersion")],pi.prototype,"writeLercVersion",null),h([d({type:Number})],pi.prototype,"version",null),h([d({json:{write:!0}})],pi.prototype,"mosaicRule",null),h([d({json:{write:!0,name:"renderingRule"}})],pi.prototype,"rasterFunction",null),pi=h([j("esri.layers.support.ExportImageServiceParameters")],pi);async function TI(e,t,r){let i;try{i=await createImageBitmap(e)}catch(s){throw new K("request:server",`Unable to load ${t}`,{url:t,error:s})}return dr(r),i}async function II(e,t,r,i,s){let n;try{n=await createImageBitmap(e)}catch(o){throw new K("request:server",`Unable to load tile ${t}/${r}/${i}`,{error:o,level:t,row:r,col:i})}return dr(s),n}var HL;const GEe={base:uc,key:"type",typeMap:{extent:yt,polygon:Rs}};let mm=HL=class extends ue{constructor(e){super(e),this.areaOfInterest=null,this.subsetDefinitions=null}get dimensions(){const{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];const t=new Map;e.forEach(i=>{if(!i.dimensionName)return;let s,n;if(Array.isArray(i.values[0])){const o=i.values;s=o[0][0],n=o[i.values.length-1][1]}else{const o=i.values;s=o[0],n=o[i.values.length-1]}if(t.has(i.dimensionName)){const o=t.get(i.dimensionName);o[0]=Math.min(s,o[0]),o[1]=Math.max(n,o[1])}else t.set(i.dimensionName,[s,n])});const r=[];for(const i of t)r.push({name:i[0],extent:i[1]});return r}get variables(){const{subsetDefinitions:e}=this;if(e==null||e.length===0)return[];const t=new Set;return e.forEach(r=>{r.variableName&&t.add(r.variableName)}),[...t]}clone(){const e=this.subsetDefinitions?.map(r=>r.clone()),t=this.areaOfInterest?this.areaOfInterest.clone():this.areaOfInterest;return new HL({areaOfInterest:t,subsetDefinitions:e})}};h([d({types:GEe,json:{read:bi,write:!0}})],mm.prototype,"areaOfInterest",void 0),h([d({readOnly:!0})],mm.prototype,"dimensions",null),h([d({readOnly:!0})],mm.prototype,"variables",null),h([d({type:[Nv],json:{write:!0}})],mm.prototype,"subsetDefinitions",void 0),mm=HL=h([j("esri.layers.support.MultidimensionalSubset")],mm);const BEe=mm;var WL;function Mf(e){return e=Number(e),isNaN(e)?void 0:e}let fl=WL=class extends ue{constructor(){super(...arguments),this.name=null,this.minWavelength=void 0,this.maxWavelength=void 0,this.radianceBias=void 0,this.radianceGain=void 0,this.reflectanceBias=void 0,this.reflectanceGain=void 0,this.solarIrradiance=void 0}clone(){return new WL({name:this.name,minWavelength:this.minWavelength,maxWavelength:this.maxWavelength,radianceBias:this.radianceBias,radianceGain:this.radianceGain,reflectanceBias:this.reflectanceBias,reflectanceGain:this.reflectanceGain,solarIrradiance:this.solarIrradiance})}};h([d({json:{name:"BandName",write:!0}})],fl.prototype,"name",void 0),h([d({json:{name:"WavelengthMin",read:{reader:Mf},write:!0}})],fl.prototype,"minWavelength",void 0),h([d({json:{name:"WavelengthMax",read:{reader:Mf},write:!0}})],fl.prototype,"maxWavelength",void 0),h([d({json:{name:"RadianceBias",read:{reader:Mf},write:!0}})],fl.prototype,"radianceBias",void 0),h([d({json:{name:"RadianceGain",read:{reader:Mf},write:!0}})],fl.prototype,"radianceGain",void 0),h([d({json:{name:"ReflectanceBias",read:{reader:Mf},write:!0}})],fl.prototype,"reflectanceBias",void 0),h([d({json:{name:"ReflectanceGain",read:{reader:Mf},write:!0}})],fl.prototype,"reflectanceGain",void 0),h([d({json:{name:"SolarIrradiance",read:{reader:Mf},write:!0}})],fl.prototype,"solarIrradiance",void 0),fl=WL=h([j("esri.layers.support.RasterBandInfo")],fl);const Tz=fl;var JL;function ab(e){return e=Number(e),isNaN(e)?void 0:e}let No=JL=class extends ue{constructor(){super(...arguments),this.acquisitionDate=void 0,this.cloudCover=void 0,this.productName=void 0,this.sensorName=null,this.sensorAzimuth=void 0,this.sensorElevation=void 0,this.sunAzimuth=void 0,this.sunElevation=void 0}readAcquisitionDate(e){return new Date(e)}writeAcquisitionDate(e,t){t.AcquisitionDate=e.getTime()}clone(){return new JL({acquisitionDate:this.acquisitionDate,cloudCover:this.cloudCover,productName:this.productName,sensorName:this.sensorName,sensorAzimuth:this.sensorAzimuth,sensorElevation:this.sensorElevation,sunAzimuth:this.sunAzimuth,sunElevation:this.sunElevation})}};h([d({json:{name:"AcquisitionDate",write:!0}})],No.prototype,"acquisitionDate",void 0),h([pe("acquisitionDate")],No.prototype,"readAcquisitionDate",null),h([ge("acquisitionDate")],No.prototype,"writeAcquisitionDate",null),h([d({json:{name:"CloudCover",read:{reader:ab},write:!0}})],No.prototype,"cloudCover",void 0),h([d({json:{name:"ProductName",write:!0}})],No.prototype,"productName",void 0),h([d({json:{name:"SensorName",write:!0}})],No.prototype,"sensorName",void 0),h([d({json:{name:"SensorAzimuth",read:{reader:ab},write:!0}})],No.prototype,"sensorAzimuth",void 0),h([d({json:{name:"SensorElevation",read:{reader:ab},write:!0}})],No.prototype,"sensorElevation",void 0),h([d({json:{name:"SunAzimuth",read:{reader:ab},write:!0}})],No.prototype,"sunAzimuth",void 0),h([d({json:{name:"SunElevation",read:{reader:ab},write:!0}})],No.prototype,"sunElevation",void 0),No=JL=h([j("esri.layers.support.RasterSensorInfo")],No);const qEe=No;var ZL;let Ts=ZL=class extends ue{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.transposeInfo=null,this.blockBoundary=null}clone(){return new ZL({blockWidth:this.blockWidth,blockHeight:this.blockHeight,compression:this.compression,origin:Z(this.origin),firstPyramidLevel:this.firstPyramidLevel,maximumPyramidLevel:this.maximumPyramidLevel,pyramidResolutions:Z(this.pyramidResolutions),pyramidScalingFactor:this.pyramidScalingFactor,pyramidBlockWidth:this.pyramidBlockWidth,pyramidBlockHeight:this.pyramidBlockHeight,isVirtualTileInfo:this.isVirtualTileInfo,tileInfo:Z(this.tileInfo),transposeInfo:Z(this.transposeInfo),blockBoundary:Z(this.blockBoundary)})}};h([d({type:Number,json:{write:!0}})],Ts.prototype,"blockWidth",void 0),h([d({type:Number,json:{write:!0}})],Ts.prototype,"blockHeight",void 0),h([d({type:String,json:{write:!0}})],Ts.prototype,"compression",void 0),h([d({type:je,json:{write:!0}})],Ts.prototype,"origin",void 0),h([d({type:Number,json:{write:!0}})],Ts.prototype,"firstPyramidLevel",void 0),h([d({type:Number,json:{write:!0}})],Ts.prototype,"maximumPyramidLevel",void 0),h([d({json:{write:!0}})],Ts.prototype,"pyramidResolutions",void 0),h([d({type:Number,json:{write:!0}})],Ts.prototype,"pyramidScalingFactor",void 0),h([d({type:Number,json:{write:!0}})],Ts.prototype,"pyramidBlockWidth",void 0),h([d({type:Number,json:{write:!0}})],Ts.prototype,"pyramidBlockHeight",void 0),h([d({type:Boolean,json:{write:!0}})],Ts.prototype,"isVirtualTileInfo",void 0),h([d({json:{write:!0}})],Ts.prototype,"tileInfo",void 0),h([d()],Ts.prototype,"transposeInfo",void 0),h([d()],Ts.prototype,"blockBoundary",void 0),Ts=ZL=h([j("esri.layers.support.RasterStorageInfo")],Ts);const O8=Ts;var YL;let _r=YL=class extends ue{constructor(e){super(e),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get bandInfos(){const e=this.keyProperties.BandProperties,{bandCount:t}=this;if(!e?.length||e.length<t){const i=[];for(let s=1;s<=t;s++)i.push(new Tz({name:"band_"+s}));return i}const r=e.map(i=>Tz.fromJSON(i));for(let i=0;i<r.length;i++)r[i].name=r[i].name||"band_"+(i+1);return r}get dataType(){const e=this.keyProperties?.DataType?.toLowerCase()??"generic";return e==="stdtime"?"standard-time":e}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(e){e&&this._set("nativeExtent",e)}get nativePixelSize(){if(this.transform==null||!this.transform.affectsPixelSize)return this.pixelSize;const e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}get hasMultidimensionalTranspose(){return!!this.storageInfo?.transposeInfo}get sensorInfo(){if(this.keyProperties?.SensorName)return qEe.fromJSON(this.keyProperties)}clone(){return new YL({attributeTable:Z(this.attributeTable),bandCount:this.bandCount,colormap:Z(this.colormap),extent:Z(this.extent),format:this.format,height:this.height,width:this.width,histograms:Z(this.histograms),keyProperties:Z(this.keyProperties),multidimensionalInfo:Z(this.multidimensionalInfo),noDataValue:this.noDataValue,pixelSize:Z(this.pixelSize),pixelType:this.pixelType,isPseudoSpatialReference:this.isPseudoSpatialReference,spatialReference:Z(this.spatialReference),statistics:Z(this.statistics),storageInfo:Z(this.storageInfo),transform:Z(this.transform)})}};h([d({json:{write:!0}})],_r.prototype,"attributeTable",void 0),h([d({json:{write:!0}})],_r.prototype,"bandCount",void 0),h([d({readOnly:!0})],_r.prototype,"bandInfos",null),h([d({json:{write:!0}})],_r.prototype,"colormap",void 0),h([d({type:String,readOnly:!0})],_r.prototype,"dataType",null),h([d({type:yt,json:{write:!0}})],_r.prototype,"extent",void 0),h([d({type:yt,json:{write:!0}})],_r.prototype,"nativeExtent",null),h([d({json:{write:!0}})],_r.prototype,"nativePixelSize",null),h([d({json:{write:!0}})],_r.prototype,"format",void 0),h([d({json:{write:!0}})],_r.prototype,"height",void 0),h([d({json:{write:!0}})],_r.prototype,"width",void 0),h([d({json:{write:!0}})],_r.prototype,"hasMultidimensionalTranspose",null),h([d({json:{write:!0}})],_r.prototype,"histograms",void 0),h([d({json:{write:!0}})],_r.prototype,"keyProperties",void 0),h([d({json:{write:!0}})],_r.prototype,"multidimensionalInfo",void 0),h([d({json:{write:!0}})],_r.prototype,"noDataValue",void 0),h([d({json:{write:!0}})],_r.prototype,"pixelSize",void 0),h([d({json:{write:!0}})],_r.prototype,"pixelType",void 0),h([d()],_r.prototype,"isPseudoSpatialReference",void 0),h([d({readOnly:!0})],_r.prototype,"sensorInfo",null),h([d({type:Fe,json:{write:!0}})],_r.prototype,"spatialReference",void 0),h([d({json:{write:!0}})],_r.prototype,"statistics",void 0),h([d({type:O8,json:{write:!0}})],_r.prototype,"storageInfo",void 0),h([d({json:{write:!0}})],_r.prototype,"transform",void 0),_r=YL=h([j("esri.layers.support.RasterInfo")],_r);const YA=_r;let HEe=class{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){const t=await wee("RasterWorker");this._destroyed?t.close():this._workerThread=t}destroy(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}async convertVectorFieldData(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");const i=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:t.pixelBlock.toJSON(),type:t.dataType},r);return i?new It(i):null}computeStatisticsHistograms(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");return this._workerThread.invoke("computeStatisticsHistograms",{pixelBlock:t.pixelBlock.toJSON()},r)}async decode(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");const i=await this._workerThread.invoke("decode",t,r);return i?new It(i):null}async symbolize(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");const i={extent:t.extent?.toJSON(),pixelBlock:t.pixelBlock?.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds},s=await this._workerThread.invoke("symbolize",i,r);return s?new It(s):null}async updateSymbolizer(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");const i=t?.rendererJSON?.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:i},r))}async updateRasterFunction(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");await Promise.all(this._workerThread.broadcast("updateRasterFunction",{rasterFunctionJSON:t.toJSON()},r))}async process(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");const i=await this._workerThread.invoke("process",{extent:t.extent?.toJSON(),primaryPixelSizes:t.primaryPixelSizes?.map(s=>s!=null?s.toJSON():null),primaryPixelBlocks:t.primaryPixelBlocks.map(s=>s!=null?s.toJSON():null),primaryRasterIds:t.primaryRasterIds},r);return i?new It(i):null}async stretch(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const i={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams},s=await this._workerThread.invoke("stretch",i,r);return s?new It(s):null}async split(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const i={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel,useBilinear:t.useBilinear},s=await this._workerThread.invoke("split",i,r);return s&&s.forEach((n,o)=>{s.set(o,n?It.fromJSON(n):null)}),s}async clipTile(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const i={...t,pixelBlock:t.pixelBlock.toJSON()},s=await this._workerThread.invoke("clipTile",i,r);return s?It.fromJSON(s):null}async estimateStatisticsHistograms(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");if(!t?.pixelBlock)return null;const i={srcPixelBlock:t.pixelBlock.toJSON()};return await this._workerThread.invoke("estimateStatisticsHistograms",i,r)}async mosaicAndTransform(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");if(!t?.srcPixelBlocks?.length)return{pixelBlock:null};const i={...t,srcPixelBlocks:t.srcPixelBlocks.map(n=>n!=null?n.toJSON():null)},s=await this._workerThread.invoke("mosaicAndTransform",i,r);return{pixelBlock:s.pixelBlock?new It(s.pixelBlock):null,localNorthDirections:s.localNorthDirections}}async createFlowMesh(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");const i={buffer:t.flowData.data.buffer,maskBuffer:t.flowData.mask.buffer,width:t.flowData.width,height:t.flowData.height},{meshType:s,simulationSettings:n}=t,o=await this._workerThread.invoke("createFlowMesh",{meshType:s,flowData:i,simulationSettings:n},{...r,transferList:[i.buffer,i.maskBuffer]});return{vertexData:new Float32Array(o.vertexBuffer),indexData:new Uint32Array(o.indexBuffer)}}getProjectionOffsetGrid(t,r){if(!this._workerThread)throw new K("raster-jobhandler:no-connection","no available worker connection");const i=t.datumTransformation!=null?t.datumTransformation.steps.map(o=>({wkid:o.wkid,wkt:o.wkt,isInverse:o.isInverse})):null,s=t.rasterTransform!=null?t.rasterTransform.toJSON():null,n={projectedExtent:t.projectedExtent.toJSON(),srcBufferExtent:t.srcBufferExtent.toJSON(),pixelSize:t.pixelSize,hasWrapAround:t.hasWrapAround,spacing:t.spacing,datumTransformationSteps:i,rasterTransform:s,isAdaptive:t.isAdaptive,includeGCSGrid:t.includeGCSGrid};return this._workerThread.invoke("getProjectionOffsetGrid",n,r)}};function nre(e,t,r){const i=t.shift();if(r.length===0){const n=[];r.push({sliceId:-1,multidimensionalDefinition:n})}const s=r.length;for(let n=0;n<s;n++){const o=r.shift().multidimensionalDefinition;i.values?.forEach(a=>{r.push({sliceId:-1,multidimensionalDefinition:[...o,{variableName:e,dimensionName:i.name,values:[a]}]})})}t.length&&nre(e,t,r)}function Bot(e,t){const r=[];let i=0;return(t?e.variables.filter(s=>s.name.toLowerCase()===t.toLowerCase()):[...e.variables].sort((s,n)=>s.name>n.name?1:-1)).forEach(s=>{const n=[],o=[...s.dimensions].sort((a,l)=>a.name>l.name?-1:1);nre(s.name,o,n),n.forEach(a=>{r.push({...a,sliceId:i++})})}),r}function qot(e,t,r){let i=e;if(t&&(t=[...t].sort((s,n)=>s.dimensionName<n.dimensionName?-1:1)).forEach(({dimensionName:s,values:n,isSlice:o})=>{n.length&&(i=i.filter(a=>{const l=a.multidimensionalDefinition.find(c=>c.dimensionName===s);if(l==null)return!1;const u=l.values[0];return typeof u=="number"?typeof n[0]=="number"?n.includes(u):n.some(c=>c[0]<=u&&c[1]>=u):typeof n[0]=="number"?n.some(c=>u[0]<=c&&u[1]>=c):o?n.some(c=>c[0]===u[0]&&c[0]===u[1]):n.some(c=>c[0]>=u[0]&&c[0]<=u[1]||c[1]>=u[0]&&c[1]<=u[1]||c[0]<u[0]&&c[1]>u[1])}))}),i.length&&r?.start!=null&&r.end!=null){const s=r.start.getTime(),n=r.end.getTime(),o=i[0].multidimensionalDefinition.findIndex(a=>a.dimensionName==="StdTime");o>-1&&(i=i.filter(a=>{const l=a.multidimensionalDefinition[o].values[0];return s<=l&&n>=l}))}return i.map(s=>s.sliceId)}function ore(e,t){return Array.isArray(e)?t[0]===t[1]?e[0]===t[0]||e[1]===t[0]:e[0]>=t[0]&&e[0]<=t[1]&&e[1]>=t[0]&&e[1]<=t[1]:e>=t[0]&&e<=t[1]}function WEe(e,t){return e[0]<=t[0]&&e[1]>=t[0]||e[0]<=t[1]&&e[1]>=t[1]||e[0]>=t[0]&&e[1]<=t[1]}function are(e){return e.length===1?[e[0],e[0]]:[e[0],e[e.length-1]]}function lre(e,t,r){if(!t?.subsetDefinitions?.length)return e;let i;if(r){const{variables:o}=t;if(o.length&&!o.includes(r))return null;const a=t.subsetDefinitions.find(l=>l.dimensionName===e.name&&l.variableName===r);if(!a?.values?.length)return e;i=are(a.values)}else i=t.dimensions.find(({name:a})=>a===e.name)?.extent;const s=i;if(!s?.length)return e;const n=e.values.filter(o=>ore(o,s));return{...e,extent:[...s],values:n}}function ure(e,t,r){if(!t?.subsetDefinitions?.length)return!1;const{variables:i}=t;if(i.length&&e.some(({variableName:s})=>s&&!i.includes(s)))return!0;for(let s=0;s<e.length;s++){const n=e[s],o=t.subsetDefinitions.find(a=>(n.variableName===""||a.variableName===n.variableName)&&a.dimensionName===n.dimensionName);if(o?.values.length){const a=are(o.values);if(!n.isSlice&&n.values.length===2&&!Array.isArray(n.values[0])&&n.values[0]!==n.values[1]&&r){if(!WEe(n.values,a))return!0}else if(n.values.some(l=>!ore(l,a)))return!0}}return!1}function y5(e,t){if(e==null)return{isOutside:!1};const{geometry:r,timeExtent:i,multidimensionalDefinition:s}=t;let n=null;if(i!=null&&(n=JEe(e,i),n==null))return{isOutside:!0};const{areaOfInterest:o}=e;if(o&&r){const a=r.type==="point"?r:r.type==="extent"?r.center:r.type==="polygon"?r.centroid:null;if(a&&!o.contains(a))return{isOutside:!0}}return s!=null&&s.length&&ure(s,e,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:r,timeExtent:n,multidimensionalDefinition:s}}}function JEe(e,t){const r=e.dimensions.find(({name:o})=>o==="StdTime");if(r==null||t.start==null&&t.end==null)return t;t=t.clone();const{start:i,end:s}=t.toJSON(),n=i===s?[i]:i!=null&&s!=null?[i,s]:[i??s];return n.length===2&&r?.extent.length&&(n[0]=Math.max(n[0],r.extent[0]),n[1]=Math.min(n[1],r.extent[1]??r.extent[0]),n[1]<n[0])||ure([new Nv({variableName:"",dimensionName:"StdTime",isSlice:n.length===1,values:n})],e,!0)?null:(t.start=new Date(n[0]),t.end=new Date(n[1]??n[0]),t)}function ZEe(e,t={}){const{multidimensionalInfo:r,keyProperties:i}=e;if(r==null)return null;const{variableName:s,multidimensionalSubset:n,multidimensionalDefinition:o}=t,a=o!=null?o[0]?.variableName:null,l=s||a||i?.DefaultVariable;let{variables:u}=r;return n?.variables?.length&&(u=u.filter(({name:c})=>n.variables.includes(c))),l?u.find(({name:c})=>c===l)??u[0]:u[0]}function YEe(e,t={}){const r=ZEe(e,t);if(!r)return null;const i=[],{dimensions:s,name:n}=r;if(s.length===0)return[new Nv({variableName:n,dimensionName:"",values:[],isSlice:!0})];for(let o=0;o<s.length;o++){const a=lre(s[o],t.multidimensionalSubset,n);if(!a)return null;const{values:l,extent:u}=a;let c=l?.[0]??u?.[0];a.name.toLowerCase()==="stdz"&&!a.hasRanges&&u&&Math.abs(u[1])<=Math.abs(u[0])&&(c=l?.length?l[l.length-1]:u[1]),i.push(new Nv({variableName:n,dimensionName:a.name,values:[c],isSlice:!t.useRangeForRangedDimensionInfo||!!a.hasRanges}))}return i}function Hot(e){return!!e?.length&&e.some(t=>{if(t.values==null)return!0;const r=t.values.length;return r===0||r>1||!t.isSlice&&Array.isArray(t.values[0])})}function KEe(e,t){if(t==null||e==null)return null;let r=t.variables.map(i=>({...i}));return e?.variables?.length&&(r=r.filter(({name:i})=>e.variables.includes(i)),r.forEach(i=>{i.dimensions=i.dimensions.map(s=>lre(s,e,i.name)).filter(ra)})),r}function XEe(e,t){const{values:r}=t;if(r?.length){const a=Array.isArray(r[0]),l=Array.isArray(e);return a!==l?-1:a&&l?r.findIndex(u=>u[0]===e[0]&&u[1]===e[1]):r.indexOf(e)}const{extent:i}=t;if(Array.isArray(e)||!i||e<i[0]||e>i[1])return-1;const s=t.interval||1;if(t.unit!=="ISO8601")return Math.round((e-i[0])/s);const n=i[0];let o=-1;switch(t.intervalUnit?.toLowerCase()||"seconds"){case"seconds":o=Math.round((e-n)/1e3/s);break;case"minutes":o=Math.round((e-n)/6e4/s);break;case"hours":o=Math.round((e-n)/36e5/s);break;case"days":o=Math.round((e-n)/864e5/s);break;case"months":{const a=new Date(e).getUTCFullYear()-new Date(n).getUTCFullYear(),l=new Date(n).getUTCMonth(),u=new Date(e).getUTCMonth();o=a===0?u-l:u+11-l+12*(a-1)}break;case"years":o=Math.round((new Date(e).getUTCFullYear()-new Date(n).getUTCFullYear())/s);break;case"decades":o=Math.round((new Date(e).getUTCFullYear()-new Date(n).getUTCFullYear())/10/s)}return o}function Iz(e){let t=e.values?.length;if(t)return t;const{extent:r,unit:i}=e,s=e.interval||1,n=r?r[1]-r[0]:0;if(i!=="ISO8601")return Math.round(n/s);switch(e.intervalUnit?.toLowerCase()??"seconds"){case"seconds":t=Math.round(n/1e3/s);break;case"minutes":t=Math.round(n/6e4/s);break;case"hours":t=Math.round(n/36e5/s);break;case"days":t=Math.round(n/864e5/s);break;case"months":if(r){const o=new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear(),a=new Date(r[0]).getUTCMonth(),l=new Date(r[1]).getUTCMonth();t=o===0?l-a+1:l+11-a+12*(o-1)+1}else t=0;break;case"years":t=r?Math.round((new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear())/s):0;break;case"decades":t=r?Math.round((new Date(r[1]).getUTCFullYear()-new Date(r[0]).getUTCFullYear())/10/s):0;break;default:t=0}return t}function Wot(e,t){let r=0;const i=e[0].variableName,s=[...t.variables].sort((n,o)=>n.name>o.name?1:-1);for(let n=0;n<s.length;n++){const o=s[n],a=[...o.dimensions].sort((c,p)=>c.name>p.name?-1:1);if(o.name!==i){r+=a.map(c=>Iz(c)).reduce((c,p)=>c*p);continue}const l=a.map(c=>Iz(c)),u=a.length;for(let c=0;c<u;c++){const p=e.find(m=>m.dimensionName===a[c].name);if(p==null)return null;const f=XEe(p.values[0],a[c]);if(f===-1)return null;l.shift(),r+=c===u-1?f:f*l.reduce((m,g)=>m*g)}break}return r}var g5,Ez,Az,cre={exports:{}};Ez=cre,g5=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(t){var r=this.buffer,i=r?r.byteLength:0;if(t<i)return r;for(var s=512;s<t;)s<<=1;for(var n=new Uint8Array(s),o=0;o<i;++o)n[o]=r[o];return this.buffer=n},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var r=this.pos;if(t){this.ensureBuffer(r+t);for(var i=r+t;!this.eof&&this.bufferLength<i;)this.readBlock();var s=this.bufferLength;i>s&&(i=s)}else{for(;!this.eof;)this.readBlock();i=this.bufferLength}return this.pos=i,this.buffer.subarray(r,i)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,r,i){for(var s=t+r;this.bufferLength<=s&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,r,i)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},e}(),(Az=function(){if(!self||!self.Uint32Array)return null;var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),r=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),i=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],s=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function n(a){throw new Error(a)}function o(a){var l=0,u=a[l++],c=a[l++];u!=-1&&c!=-1||n("Invalid header in flate stream"),(15&u)!=8&&n("Unknown compression method in flate stream"),((u<<8)+c)%31!=0&&n("Bad FCHECK in flate stream"),32&c&&n("FDICT bit set in flate stream"),this.bytes=a,this.bytesPos=l,this.codeSize=0,this.codeBuf=0,g5.call(this)}return o.prototype=Object.create(g5.prototype),o.prototype.getBits=function(a){for(var l,u=this.codeSize,c=this.codeBuf,p=this.bytes,f=this.bytesPos;u<a;)(l=p[f++])===void 0&&n("Bad encoding in flate stream"),c|=l<<u,u+=8;return l=c&(1<<a)-1,this.codeBuf=c>>a,this.codeSize=u-=a,this.bytesPos=f,l},o.prototype.getCode=function(a){for(var l=a[0],u=a[1],c=this.codeSize,p=this.codeBuf,f=this.bytes,m=this.bytesPos;c<u;){var g;(g=f[m++])===void 0&&n("Bad encoding in flate stream"),p|=g<<c,c+=8}var b=l[p&(1<<u)-1],w=b>>16,S=65535&b;return(c==0||c<w||w==0)&&n("Bad encoding in flate stream"),this.codeBuf=p>>w,this.codeSize=c-w,this.bytesPos=m,S},o.prototype.generateHuffmanTable=function(a){for(var l=a.length,u=0,c=0;c<l;++c)a[c]>u&&(u=a[c]);for(var p=1<<u,f=new Uint32Array(p),m=1,g=0,b=2;m<=u;++m,g<<=1,b<<=1)for(var w=0;w<l;++w)if(a[w]==m){var S=0,M=g;for(c=0;c<m;++c)S=S<<1|1&M,M>>=1;for(c=S;c<p;c+=b)f[c]=m<<16|w;++g}return[f,u]},o.prototype.readBlock=function(){function a(X,ae,te,ye,Me){for(var De=X.getBits(te)+ye;De-- >0;)ae[b++]=Me}var l=this.getBits(3);if(1&l&&(this.eof=!0),(l>>=1)!=0){var u,c;if(l==1)u=i,c=s;else if(l==2){for(var p=this.getBits(5)+257,f=this.getBits(5)+1,m=this.getBits(4)+4,g=Array(e.length),b=0;b<m;)g[e[b++]]=this.getBits(3);for(var w=this.generateHuffmanTable(g),S=0,M=(b=0,p+f),x=new Array(M);b<M;){var _=this.getCode(w);_==16?a(this,x,2,3,S):_==17?a(this,x,3,3,S=0):_==18?a(this,x,7,11,S=0):x[b++]=S=_}u=this.generateHuffmanTable(x.slice(0,p)),c=this.generateHuffmanTable(x.slice(p,M))}else n("Unknown block type in flate stream");for(var I=($=this.buffer)?$.length:0,E=this.bufferLength;;){var A=this.getCode(u);if(A<256)E+1>=I&&(I=($=this.ensureBuffer(E+1)).length),$[E++]=A;else{if(A==256)return void(this.bufferLength=E);var C=(A=t[A-=257])>>16;C>0&&(C=this.getBits(C)),S=(65535&A)+C,A=this.getCode(c),(C=(A=r[A])>>16)>0&&(C=this.getBits(C));var O=(65535&A)+C;E+S>=I&&(I=($=this.ensureBuffer(E+S)).length);for(var R=0;R<S;++R,++E)$[E]=$[E-O]}}}else{var D,N=this.bytes,U=this.bytesPos;(D=N[U++])===void 0&&n("Bad block header in flate stream");var J=D;(D=N[U++])===void 0&&n("Bad block header in flate stream"),J|=D<<8,(D=N[U++])===void 0&&n("Bad block header in flate stream");var y=D;(D=N[U++])===void 0&&n("Bad block header in flate stream"),(y|=D<<8)!=(65535&~J)&&n("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var T=this.bufferLength,$=this.ensureBuffer(T+J),P=T+J;this.bufferLength=P;for(var z=T;z<P;++z){if((D=N[U++])===void 0){this.eof=!0;break}$[z]=D}this.bytesPos=U}},o}())!==void 0&&(Ez.exports=Az);const hS=X6(cre.exports);let QEe=class hre{constructor(t){this._canvas=null,this._ctx=null,t&&(this._canvas=t.canvas,this._ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}decode(t,r,i){if(!t||t.byteLength<10)throw new K("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:s=0,height:n=0,format:o}=r;const{applyJpegMask:a}=r;if(a&&(!s||!n))throw new K("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((l,u)=>{let c=null;o==="jpg"&&a&&(c=hre._getMask(t,{width:s,height:n}));const p=new Blob([new Uint8Array(t)],{type:"image/"+o=="jpg"?"jpeg":o}),f=URL.createObjectURL(p),m=new Image;let g;m.src=f,m.onload=()=>{if(URL.revokeObjectURL(f),Ul(i))return void u(ii());s=m.width,n=m.height,this._canvas&&this._ctx?(this._canvas.width===s&&this._canvas.height===n||(this._canvas.width=s,this._canvas.height=n),this._ctx.clearRect(0,0,s,n)):(this._canvas=document.createElement("canvas"),this._canvas.width=s,this._canvas.height=n,this._ctx=this._canvas.getContext("2d")),this._ctx.drawImage(m,0,0);const b=this._ctx.getImageData(0,0,s,n);let w;if(g=b.data,r.renderOnCanvas){if(c)for(w=0;w<c.length;w++)c[w]?g[4*w+3]=255:g[4*w+3]=0;return this._ctx.putImageData(b,0,0),void l(null)}const S=s*n,M=new Uint8Array(S),x=new Uint8Array(S),_=new Uint8Array(S);if(c)for(w=0;w<S;w++)M[w]=g[4*w],x[w]=g[4*w+1],_[w]=g[4*w+2];else for(c=new Uint8Array(S),w=0;w<S;w++)M[w]=g[4*w],x[w]=g[4*w+1],_[w]=g[4*w+2],c[w]=g[4*w+3];l({width:s,height:n,pixels:[M,x,_],mask:c,pixelType:"u8"})},m.onerror=()=>{URL.revokeObjectURL(f),u("cannot load image")}})}static _getMask(t,r){let i=null;try{const s=new Uint8Array(t),n=Math.ceil(s.length/2);let o=0;const a=s.length-2;for(o=n;o<a&&(s[o]!==255||s[o+1]!==217);o++);if(o+=2,o<s.length-1){const l=new hS(s.subarray(o)).getBytes();i=new Uint8Array(r.width*r.height);let u=0;for(let c=0;c<l.length;c++)for(let p=7;p>=0;p--)i[u++]=l[c]>>p&1}}catch{}return i}};var $z,Cz,Oz,pre={exports:{}};$z=pre,Cz=function(){var e=function(){function t(r){this.message="JPEG error: "+r}return t.prototype=new Error,t.prototype.name="JpegError",t.constructor=t,t}();return function(){if(!self||!self.Uint8ClampedArray)return null;var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,i=799,s=3406,n=2276,o=1567,a=3784,l=5793,u=2896;function c(){this.decodeTransform=null,this.colorTransform=-1}function p(S,M){for(var x,_,I=0,E=[],A=16;A>0&&!S[A-1];)A--;E.push({children:[],index:0});var C,O=E[0];for(x=0;x<A;x++){for(_=0;_<S[x];_++){for((O=E.pop()).children[O.index]=M[I];O.index>0;)O=E.pop();for(O.index++,E.push(O);E.length<=x;)E.push(C={children:[],index:0}),O.children[O.index]=C.children,O=C;I++}x+1<A&&(E.push(C={children:[],index:0}),O.children[O.index]=C.children,O=C)}return E[0].children}function f(S,M,x){return 64*((S.blocksPerLine+1)*M+x)}function m(S,M,x,_,I,E,A,C,O){var R=x.mcusPerLine,D=x.progressive,N=M,U=0,J=0;function y(){if(J>0)return J--,U>>J&1;if((U=S[M++])===255){var Q=S[M++];if(Q)throw new e("unexpected marker "+(U<<8|Q).toString(16))}return J=7,U>>>7}function T(Q){for(var se=Q;;){if(typeof(se=se[y()])=="number")return se;if(typeof se!="object")throw new e("invalid huffman sequence")}}function $(Q){for(var se=0;Q>0;)se=se<<1|y(),Q--;return se}function P(Q){if(Q===1)return y()===1?1:-1;var se=$(Q);return se>=1<<Q-1?se:se+(-1<<Q)+1}function z(Q,se){var le=T(Q.huffmanTableDC),ee=le===0?0:P(le);Q.blockData[se]=Q.pred+=ee;for(var ne=1;ne<64;){var Oe=T(Q.huffmanTableAC),ke=15&Oe,_t=Oe>>4;if(ke!==0){var hr=t[ne+=_t];Q.blockData[se+hr]=P(ke),ne++}else{if(_t<15)break;ne+=16}}}function X(Q,se){var le=T(Q.huffmanTableDC),ee=le===0?0:P(le)<<O;Q.blockData[se]=Q.pred+=ee}function ae(Q,se){Q.blockData[se]|=y()<<O}var te=0;function ye(Q,se){if(te>0)te--;else for(var le=E,ee=A;le<=ee;){var ne=T(Q.huffmanTableAC),Oe=15&ne,ke=ne>>4;if(Oe!==0){var _t=t[le+=ke];Q.blockData[se+_t]=P(Oe)*(1<<O),le++}else{if(ke<15){te=$(ke)+(1<<ke)-1;break}le+=16}}}var Me,De=0;function $e(Q,se){for(var le,ee,ne=E,Oe=A,ke=0;ne<=Oe;){var _t=t[ne];switch(De){case 0:if(ke=(ee=T(Q.huffmanTableAC))>>4,(le=15&ee)==0)ke<15?(te=$(ke)+(1<<ke),De=4):(ke=16,De=1);else{if(le!==1)throw new e("invalid ACn encoding");Me=P(le),De=ke?2:3}continue;case 1:case 2:Q.blockData[se+_t]?Q.blockData[se+_t]+=y()<<O:--ke==0&&(De=De===2?3:0);break;case 3:Q.blockData[se+_t]?Q.blockData[se+_t]+=y()<<O:(Q.blockData[se+_t]=Me<<O,De=0);break;case 4:Q.blockData[se+_t]&&(Q.blockData[se+_t]+=y()<<O)}ne++}De===4&&--te==0&&(De=0)}function gt(Q,se,le,ee,ne){var Oe=le%R;se(Q,f(Q,(le/R|0)*Q.v+ee,Oe*Q.h+ne))}function dt(Q,se,le){se(Q,f(Q,le/Q.blocksPerLine|0,le%Q.blocksPerLine))}var Je,He,mt,zt,H,G,re=_.length;G=D?E===0?C===0?X:ae:C===0?ye:$e:z;var we,me,k,q,L=0;for(me=re===1?_[0].blocksPerLine*_[0].blocksPerColumn:R*x.mcusPerColumn;L<me;){var V=I?Math.min(me-L,I):me;for(He=0;He<re;He++)_[He].pred=0;if(te=0,re===1)for(Je=_[0],H=0;H<V;H++)dt(Je,G,L),L++;else for(H=0;H<V;H++){for(He=0;He<re;He++)for(k=(Je=_[He]).h,q=Je.v,mt=0;mt<q;mt++)for(zt=0;zt<k;zt++)gt(Je,G,L,mt,zt);L++}J=0,(we=w(S,M))&&we.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+we.invalid),M=we.offset);var W=we&&we.marker;if(!W||W<=65280)throw new e("marker was not found");if(!(W>=65488&&W<=65495))break;M+=2}return(we=w(S,M))&&we.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+we.invalid),M=we.offset),M-N}function g(S,M,x){var _,I,E,A,C,O,R,D,N,U,J,y,T,$,P,z,X,ae=S.quantizationTable,te=S.blockData;if(!ae)throw new e("missing required Quantization Table.");for(var ye=0;ye<64;ye+=8)N=te[M+ye],U=te[M+ye+1],J=te[M+ye+2],y=te[M+ye+3],T=te[M+ye+4],$=te[M+ye+5],P=te[M+ye+6],z=te[M+ye+7],N*=ae[ye],U|J|y|T|$|P|z?(U*=ae[ye+1],J*=ae[ye+2],y*=ae[ye+3],T*=ae[ye+4],$*=ae[ye+5],P*=ae[ye+6],z*=ae[ye+7],I=(_=(_=l*N+128>>8)+(I=l*T+128>>8)+1>>1)-I,X=(E=J)*a+(A=P)*o+128>>8,E=E*o-A*a+128>>8,R=(C=(C=u*(U-z)+128>>8)+(R=$<<4)+1>>1)-R,O=(D=(D=u*(U+z)+128>>8)+(O=y<<4)+1>>1)-O,A=(_=_+(A=X)+1>>1)-A,E=(I=I+E+1>>1)-E,X=C*n+D*s+2048>>12,C=C*s-D*n+2048>>12,D=X,X=O*i+R*r+2048>>12,O=O*r-R*i+2048>>12,R=X,x[ye]=_+D,x[ye+7]=_-D,x[ye+1]=I+R,x[ye+6]=I-R,x[ye+2]=E+O,x[ye+5]=E-O,x[ye+3]=A+C,x[ye+4]=A-C):(X=l*N+512>>10,x[ye]=X,x[ye+1]=X,x[ye+2]=X,x[ye+3]=X,x[ye+4]=X,x[ye+5]=X,x[ye+6]=X,x[ye+7]=X);for(var Me=0;Me<8;++Me)N=x[Me],(U=x[Me+8])|(J=x[Me+16])|(y=x[Me+24])|(T=x[Me+32])|($=x[Me+40])|(P=x[Me+48])|(z=x[Me+56])?(I=(_=4112+((_=l*N+2048>>12)+(I=l*T+2048>>12)+1>>1))-I,X=(E=J)*a+(A=P)*o+2048>>12,E=E*o-A*a+2048>>12,A=X,R=(C=(C=u*(U-z)+2048>>12)+(R=$)+1>>1)-R,O=(D=(D=u*(U+z)+2048>>12)+(O=y)+1>>1)-O,X=C*n+D*s+2048>>12,C=C*s-D*n+2048>>12,D=X,X=O*i+R*r+2048>>12,O=O*r-R*i+2048>>12,N=(N=(_=_+A+1>>1)+D)<16?0:N>=4080?255:N>>4,U=(U=(I=I+E+1>>1)+(R=X))<16?0:U>=4080?255:U>>4,J=(J=(E=I-E)+O)<16?0:J>=4080?255:J>>4,y=(y=(A=_-A)+C)<16?0:y>=4080?255:y>>4,T=(T=A-C)<16?0:T>=4080?255:T>>4,$=($=E-O)<16?0:$>=4080?255:$>>4,P=(P=I-R)<16?0:P>=4080?255:P>>4,z=(z=_-D)<16?0:z>=4080?255:z>>4,te[M+Me]=N,te[M+Me+8]=U,te[M+Me+16]=J,te[M+Me+24]=y,te[M+Me+32]=T,te[M+Me+40]=$,te[M+Me+48]=P,te[M+Me+56]=z):(X=(X=l*N+8192>>14)<-2040?0:X>=2024?255:X+2056>>4,te[M+Me]=X,te[M+Me+8]=X,te[M+Me+16]=X,te[M+Me+24]=X,te[M+Me+32]=X,te[M+Me+40]=X,te[M+Me+48]=X,te[M+Me+56]=X)}function b(S,M){for(var x=M.blocksPerLine,_=M.blocksPerColumn,I=new Int16Array(64),E=0;E<_;E++)for(var A=0;A<x;A++)g(M,f(M,E,A),I);return M.blockData}function w(S,M,x){function _(O){return S[O]<<8|S[O+1]}var I=S.length-1,E=x<M?x:M;if(M>=I)return null;var A=_(M);if(A>=65472&&A<=65534)return{invalid:null,marker:A,offset:M};for(var C=_(E);!(C>=65472&&C<=65534);){if(++E>=I)return null;C=_(E)}return{invalid:A.toString(16),marker:C,offset:E}}return c.prototype={parse:function(S){function M(){var Q=S[A]<<8|S[A+1];return A+=2,Q}function x(){var Q=M(),se=A+Q-2,le=w(S,se,A);le&&le.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+le.invalid),se=le.offset);var ee=S.subarray(A,se);return A+=ee.length,ee}function _(Q){for(var se=Math.ceil(Q.samplesPerLine/8/Q.maxH),le=Math.ceil(Q.scanLines/8/Q.maxV),ee=0;ee<Q.components.length;ee++){H=Q.components[ee];var ne=Math.ceil(Math.ceil(Q.samplesPerLine/8)*H.h/Q.maxH),Oe=Math.ceil(Math.ceil(Q.scanLines/8)*H.v/Q.maxV),ke=se*H.h,_t=le*H.v*64*(ke+1);H.blockData=new Int16Array(_t),H.blocksPerLine=ne,H.blocksPerColumn=Oe}Q.mcusPerLine=se,Q.mcusPerColumn=le}var I,E,A=0,C=null,O=null,R=[],D=[],N=[],U=M();if(U!==65496)throw new e("SOI not found");for(U=M();U!==65497;){var J,y,T;switch(U){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var $=x();U===65504&&$[0]===74&&$[1]===70&&$[2]===73&&$[3]===70&&$[4]===0&&(C={version:{major:$[5],minor:$[6]},densityUnits:$[7],xDensity:$[8]<<8|$[9],yDensity:$[10]<<8|$[11],thumbWidth:$[12],thumbHeight:$[13],thumbData:$.subarray(14,14+3*$[12]*$[13])}),U===65518&&$[0]===65&&$[1]===100&&$[2]===111&&$[3]===98&&$[4]===101&&(O={version:$[5]<<8|$[6],flags0:$[7]<<8|$[8],flags1:$[9]<<8|$[10],transformCode:$[11]});break;case 65499:for(var P=M()+A-2;A<P;){var z=S[A++],X=new Uint16Array(64);if(z>>4){if(z>>4!=1)throw new e("DQT - invalid table spec");for(y=0;y<64;y++)X[t[y]]=M()}else for(y=0;y<64;y++)X[t[y]]=S[A++];R[15&z]=X}break;case 65472:case 65473:case 65474:if(I)throw new e("Only single frame JPEGs supported");M(),(I={}).extended=U===65473,I.progressive=U===65474,I.precision=S[A++],I.scanLines=M(),I.samplesPerLine=M(),I.components=[],I.componentIds={};var ae,te=S[A++],ye=0,Me=0;for(J=0;J<te;J++){ae=S[A];var De=S[A+1]>>4,$e=15&S[A+1];ye<De&&(ye=De),Me<$e&&(Me=$e);var gt=S[A+2];T=I.components.push({h:De,v:$e,quantizationId:gt,quantizationTable:null}),I.componentIds[ae]=T-1,A+=3}I.maxH=ye,I.maxV=Me,_(I);break;case 65476:var dt=M();for(J=2;J<dt;){var Je=S[A++],He=new Uint8Array(16),mt=0;for(y=0;y<16;y++,A++)mt+=He[y]=S[A];var zt=new Uint8Array(mt);for(y=0;y<mt;y++,A++)zt[y]=S[A];J+=17+mt,(Je>>4?D:N)[15&Je]=p(He,zt)}break;case 65501:M(),E=M();break;case 65498:M();var H,G=S[A++],re=[];for(J=0;J<G;J++){var we=I.componentIds[S[A++]];H=I.components[we];var me=S[A++];H.huffmanTableDC=N[me>>4],H.huffmanTableAC=D[15&me],re.push(H)}var k=S[A++],q=S[A++],L=S[A++],V=m(S,A,I,re,E,k,q,L>>4,15&L);A+=V;break;case 65535:S[A]!==255&&A--;break;default:if(S[A-3]===255&&S[A-2]>=192&&S[A-2]<=254){A-=3;break}throw new e("unknown marker "+U.toString(16))}U=M()}for(this.width=I.samplesPerLine,this.height=I.scanLines,this.jfif=C,this.eof=A,this.adobe=O,this.components=[],J=0;J<I.components.length;J++){var W=R[(H=I.components[J]).quantizationId];W&&(H.quantizationTable=W),this.components.push({output:b(I,H),scaleX:H.h/I.maxH,scaleY:H.v/I.maxV,blocksPerLine:H.blocksPerLine,blocksPerColumn:H.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(S,M){var x,_,I,E,A,C,O,R,D,N,U,J=this.width/S,y=this.height/M,T=0,$=this.components.length,P=S*M*$,z=new Uint8ClampedArray(P),X=new Uint32Array(S),ae=4294967288;for(O=0;O<$;O++){for(_=(x=this.components[O]).scaleX*J,I=x.scaleY*y,T=O,U=x.output,E=x.blocksPerLine+1<<3,A=0;A<S;A++)R=0|A*_,X[A]=(R&ae)<<3|7&R;for(C=0;C<M;C++)for(N=E*((R=0|C*I)&ae)|(7&R)<<3,A=0;A<S;A++)z[T]=U[N+X[A]],T+=$}var te=this.decodeTransform;if(te)for(O=0;O<P;)for(R=0,D=0;R<$;R++,O++,D+=2)z[O]=(z[O]*te[D]>>8)+te[D+1];return z},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this.colorTransform!==0:this.colorTransform===1},_convertYccToRgb:function(S){for(var M,x,_,I=0,E=S.length;I<E;I+=3)M=S[I],x=S[I+1],_=S[I+2],S[I]=M-179.456+1.402*_,S[I+1]=M+135.459-.344*x-.714*_,S[I+2]=M-226.816+1.772*x;return S},_convertYcckToRgb:function(S){for(var M,x,_,I,E=0,A=0,C=S.length;A<C;A+=4)M=S[A],x=S[A+1],_=S[A+2],I=S[A+3],S[E++]=x*(-660635669420364e-19*x+.000437130475926232*_-54080610064599e-18*M+.00048449797120281*I-.154362151871126)-122.67195406894+_*(-.000957964378445773*_+.000817076911346625*M-.00477271405408747*I+1.53380253221734)+M*(.000961250184130688*M-.00266257332283933*I+.48357088451265)+I*(-.000336197177618394*I+.484791561490776),S[E++]=107.268039397724+x*(219927104525741e-19*x-.000640992018297945*_+.000659397001245577*M+.000426105652938837*I-.176491792462875)+_*(-.000778269941513683*_+.00130872261408275*M+.000770482631801132*I-.151051492775562)+M*(.00126935368114843*M-.00265090189010898*I+.25802910206845)+I*(-.000318913117588328*I-.213742400323665),S[E++]=x*(-.000570115196973677*x-263409051004589e-19*_+.0020741088115012*M-.00288260236853442*I+.814272968359295)-20.810012546947+_*(-153496057440975e-19*_-.000132689043961446*M+.000560833691242812*I-.195152027534049)+M*(.00174418132927582*M-.00255243321439347*I+.116935020465145)+I*(-.000343531996510555*I+.24165260232407);return S},_convertYcckToCmyk:function(S){for(var M,x,_,I=0,E=S.length;I<E;I+=4)M=S[I],x=S[I+1],_=S[I+2],S[I]=434.456-M-1.402*_,S[I+1]=119.541-M+.344*x+.714*_,S[I+2]=481.816-M-1.772*x;return S},_convertCmykToRgb:function(S){for(var M,x,_,I,E=0,A=1/255,C=0,O=S.length;C<O;C+=4)M=S[C]*A,x=S[C+1]*A,_=S[C+2]*A,I=S[C+3]*A,S[E++]=255+M*(-4.387332384609988*M+54.48615194189176*x+18.82290502165302*_+212.25662451639585*I-285.2331026137004)+x*(1.7149763477362134*x-5.6096736904047315*_-17.873870861415444*I-5.497006427196366)+_*(-2.5217340131683033*_-21.248923337353073*I+17.5119270841813)-I*(21.86122147463605*I+189.48180835922747),S[E++]=255+M*(8.841041422036149*M+60.118027045597366*x+6.871425592049007*_+31.159100130055922*I-79.2970844816548)+x*(-15.310361306967817*x+17.575251261109482*_+131.35250912493976*I-190.9453302588951)+_*(4.444339102852739*_+9.8632861493405*I-24.86741582555878)-I*(20.737325471181034*I+187.80453709719578),S[E++]=255+M*(.8842522430003296*M+8.078677503112928*x+30.89978309703729*_-.23883238689178934*I-14.183576799673286)+x*(10.49593273432072*x+63.02378494754052*_+50.606957656360734*I-112.23884253719248)+_*(.03296041114873217*_+115.60384449646641*I-193.58209356861505)-I*(22.33816807309886*I+180.12613974708367);return S},getData:function(S,M,x){if(this.numComponents>4)throw new e("Unsupported color mode");var _=this._getLinearizedBlockData(S,M);if(this.numComponents===1&&x){for(var I=_.length,E=new Uint8ClampedArray(3*I),A=0,C=0;C<I;C++){var O=_[C];E[A++]=O,E[A++]=O,E[A++]=O}return E}if(this.numComponents===3&&this._isColorConversionNeeded())return this._convertYccToRgb(_);if(this.numComponents===4){if(this._isColorConversionNeeded())return x?this._convertYcckToRgb(_):this._convertYcckToCmyk(_);if(x)return this._convertCmykToRgb(_)}return _}},c}()},(Oz=Cz())!==void 0&&($z.exports=Oz);const dre=X6(pre.exports);let eAe=class{static decode(t,r=!1){const i=new Uint8Array(t),s=new dre;s.parse(i);const{width:n,height:o,numComponents:a,eof:l}=s,u=s.getData(n,o,!0),c=n*o;let p,f=null,m=0,g=0,b=0;if(!r&&l<i.length-1)try{const w=new hS(i.subarray(l)).getBytes();f=new Uint8Array(c);let S=0;for(m=0;m<w.length;m++)for(b=7;b>=0;b--)f[S++]=w[m]>>b&1}catch{}if(a===1&&u.length===n*o){const w=new Uint8Array(u.buffer);p=[w,w,w]}else{for(p=[],m=0;m<3;m++)p.push(new Uint8Array(c));for(b=0,g=0;g<c;g++)for(m=0;m<3;m++)p[m][g]=u[b++]}return{width:n,height:o,pixels:p,mask:f}}};const fre=[{pixelType:"S8",size:1,ctor:Int8Array,range:[-128,127]},{pixelType:"U8",size:1,ctor:Uint8Array,range:[0,255]},{pixelType:"S16",size:2,ctor:Int16Array,range:[-32768,32767]},{pixelType:"U16",size:2,ctor:Uint16Array,range:[0,65536]},{pixelType:"S32",size:4,ctor:Int32Array,range:[-2147483648,2147483647]},{pixelType:"U32",size:4,ctor:Uint32Array,range:[0,4294967296]},{pixelType:"F32",size:4,ctor:Float32Array,range:[-34027999387901484e22,34027999387901484e22]},{pixelType:"F64",size:8,ctor:Float64Array,range:[-17976931348623157e292,17976931348623157e292]}];let v5=null;function mre(){return v5||(v5=fe(()=>import("./lerc-wasm-DKLPZUaK.js"),__vite__mapDeps([134,1]),import.meta.url).then(e=>e.l).then(({default:e})=>e({locateFile:t=>Xt(`esri/layers/support/rasterFormats/${t}`)})).then(e=>{rAe(e)}),v5)}const EI={getBlobInfo:null,decode:null};function tAe(e){return 16+(e>>3<<3)}function sp(e,t,r){r.set(e.slice(t,t+r.length))}function rAe(e){const{_malloc:t,_free:r,_lerc_getBlobInfo:i,_lerc_getDataRanges:s,_lerc_decode_4D:n,asm:o}=e;let a;const l=Object.values(o).find(c=>c&&"buffer"in c&&c.buffer===e.HEAPU8.buffer),u=c=>{const p=c.map(b=>tAe(b)),f=p.reduce((b,w)=>b+w),m=t(f);a=new Uint8Array(l.buffer);let g=p[0];p[0]=m;for(let b=1;b<p.length;b++){const w=p[b];p[b]=p[b-1]+g,g=w}return p};EI.getBlobInfo=c=>{const m=new Uint8Array(48),g=new Uint8Array(8*3),[b,w,S]=u([c.length,m.length,g.length]);a.set(c,b),a.set(m,w),a.set(g,S);let M=i(b,c.length,w,S,12,3);if(M)throw r(b),new Error(`lerc-getBlobInfo: error code is ${M}`);a=new Uint8Array(l.buffer),sp(a,w,m),sp(a,S,g);const x=new Uint32Array(m.buffer),_=new Float64Array(g.buffer),[I,E,,A,C,O,R,D,N,U,J]=x,y={version:I,depthCount:U,width:A,height:C,validPixelCount:R,bandCount:O,blobSize:D,maskCount:N,dataType:E,minValue:_[0],maxValue:_[1],maxZerror:_[2],statistics:[],bandCountWithNoData:J};if(J&&U>1)return r(b),y;if(U===1&&O===1)return r(b),y.statistics.push({minValue:_[0],maxValue:_[1]}),y;const T=U*O*8,$=new Uint8Array(T),P=new Uint8Array(T);let z=b,X=0,ae=0,te=!1;if(a.byteLength<b+2*T?(r(b),te=!0,[z,X,ae]=u([c.length,T,T]),a.set(c,z)):[X,ae]=u([T,T]),a.set($,X),a.set(P,ae),M=s(z,c.length,U,O,X,ae),M)throw r(z),te||r(X),new Error(`lerc-getDataRanges: error code is ${M}`);a=new Uint8Array(l.buffer),sp(a,X,$),sp(a,ae,P);const ye=new Float64Array($.buffer),Me=new Float64Array(P.buffer),De=y.statistics;for(let $e=0;$e<O;$e++)if(U>1){const gt=ye.slice($e*U,($e+1)*U),dt=Me.slice($e*U,($e+1)*U),Je=Math.min.apply(null,gt),He=Math.max.apply(null,dt);De.push({minValue:Je,maxValue:He,depthStats:{minValues:gt,maxValues:dt}})}else De.push({minValue:ye[$e],maxValue:Me[$e]});return r(z),te||r(X),y},EI.decode=(c,p)=>{const{maskCount:f,depthCount:m,bandCount:g,width:b,height:w,dataType:S,bandCountWithNoData:M}=p,x=fre[S],_=b*w,I=new Uint8Array(_*g),E=_*m*g*x.size,A=new Uint8Array(E),C=new Uint8Array(g),O=new Uint8Array(8*g),[R,D,N,U,J]=u([c.length,I.length,A.length,C.length,O.length]);a.set(c,R),a.set(I,D),a.set(A,N),a.set(C,U),a.set(O,J);const y=n(R,c.length,f,D,m,b,w,g,S,N,U,J);if(y)throw r(R),new Error(`lerc-decode: error code is ${y}`);a=new Uint8Array(l.buffer),sp(a,N,A),sp(a,D,I);let T=null;if(M){sp(a,U,C),sp(a,J,O),T=[];const $=new Float64Array(O.buffer);for(let P=0;P<C.length;P++)T.push(C[P]?$[P]:null)}return r(R),{data:A,maskData:I,noDataValues:T}}}function iAe(e,t,r,i,s){if(r<2)return e;const n=new i(t*r);for(let o=0,a=0;o<t;o++)for(let l=0,u=o;l<r;l++,u+=t)n[u]=e[a++];return n}function yre(e,t={}){const r=t.inputOffset??0,i=e instanceof Uint8Array?e.subarray(r):new Uint8Array(e,r),s=EI.getBlobInfo(i),{data:n,maskData:o,noDataValues:a}=EI.decode(i,s),{width:l,height:u,bandCount:c,depthCount:p,dataType:f,maskCount:m,statistics:g}=s,b=fre[f],w=new b.ctor(n.buffer),S=[],M=[],x=l*u,_=x*p;for(let R=0;R<c;R++){const D=w.subarray(R*_,(R+1)*_);if(t.returnInterleaved)S.push(D);else{const N=iAe(D,x,p,b.ctor);S.push(N)}M.push(o.subarray(R*_,(R+1)*_))}const I=m===0?null:m===1?M[0]:new Uint8Array(x);if(m>1){I.set(M[0]);for(let R=1;R<M.length;R++){const D=M[R];for(let N=0;N<x;N++)I[N]=I[N]&D[N]}}const{noDataValue:E}=t,A=E!=null&&b.range[0]<=E&&b.range[1]>=E;if(m>0&&A)for(let R=0;R<c;R++){const D=S[R],N=M[R]||I;for(let U=0;U<x;U++)N[U]===0&&(D[U]=E)}const C=m===c&&c>1?M:null,{pixelType:O}=b;return{width:l,height:u,bandCount:c,pixelType:O,depthCount:p,statistics:g,pixels:S,mask:I,bandMasks:C,noDataValues:a}}function sAe(e,t,r,i=!0){if(t%4!=0||r%4!=0){const s=new ArrayBuffer(4*Math.ceil(r/4)),n=new Uint8Array(s),o=new Uint8Array(e,t,r);if(i)for(let a=0;a<n.length;a+=4)n[a]=o[a+3],n[a+1]=o[a+2],n[a+2]=o[a+1],n[a+3]=o[a];else n.set(o);return new Uint32Array(n.buffer)}if(i){const s=new Uint8Array(e,t,r),n=new Uint8Array(s.length);for(let o=0;o<n.length;o+=4)n[o]=s[o+3],n[o+1]=s[o+2],n[o+2]=s[o+1],n[o+3]=s[o];return new Uint32Array(n.buffer)}return new Uint32Array(e,t,r/4)}function Pz(){const e=[];for(let t=0;t<=257;t++)e[t]=[t];return e}function Rz(e,t){for(let r=0;r<t.length;r++)e.push(t[r])}const e0=new Set;function P8(e,t,r,i=!0){const s=sAe(e,t,r,i);let n=9,o=Pz(),a=32,l=o.length,u=[],c=1,p=s[0],f=0;const m=s.length,g=8*(4*m-r),b=[];for(;p!=null;){if(a>=n)a-=n,f=p>>>32-n,p<<=n;else{f=p>>>32-a,p=s[c++];const S=n-a;a=32-S,f=(f<<S)+(p>>>a),p<<=S}if(f===257)break;if(f===256){n=9,o=Pz(),l=o.length,u=[];continue}const w=o[f];if(w==null){if(f>o.length)throw new Error("data integrity issue: code does not exist on code page");u.push(u[0]),o[l++]=u.slice(),Rz(b,u)}else Rz(b,w),u.push(w[0]),u.length>1&&(o[l++]=u.slice()),u=w.slice();if(e0.has(l)&&n++,a===0&&(p=s[c++],a=32),c>m||c===m&&a<=g)break}return new Uint8Array(b)}e0.add(511),e0.add(1023),e0.add(2047),e0.add(4095),e0.add(8191);const Lz=(e,t)=>{const r=t.width*t.height,i=t.pixelType;return Math.floor(e.byteLength/(r*gre(i)))},gre=e=>{let t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},nAe=(e,t)=>{if(8*e.byteLength<t)return null;const r=new Uint8Array(e,0,Math.ceil(t/8)),i=new Uint8Array(t);let s=0,n=0,o=0,a=0;for(o=0;o<r.length-1;o++)for(n=r[o],a=7;a>=0;a--)i[s++]=n>>a&1;for(a=7;s<t-1;)n=r[r.length-1],i[s++]=n>>a&1,a--;return i};let oAe=class{static decode(t,r){const i=r.pixelType,s=[],n=r.width*r.height,o=Lz(t,r),{bandIds:a,format:l}=r,u=a?.length||Lz(t,r),c=t.byteLength-t.byteLength%(n*gre(i)),p=new i(t,0,n*o);let f,m,g,b,w=null;if(l==="bip")for(f=0;f<u;f++){for(g=new i(n),b=a?a[f]:f,m=0;m<n;m++)g[m]=p[m*o+b];s.push(g)}else if(l==="bsq")for(f=0;f<u;f++)b=a?a[f]:f,s.push(p.subarray(b*n,(b+1)*n));return c<t.byteLength-1&&(w=nAe(t.slice(c),n)),{pixels:s,mask:w}}};function aAe(e,t){let r=0,i="",s=0,n=0;const o=e.length;for(;r<o;)n=e[r++],s=n>>4,s<8?s=1:s===15?(s=4,n=(7&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]):s===14?(s=3,n=(15&n)<<12|(63&e[r++])<<6|63&e[r++]):(s=2,n=(31&n)<<6|63&e[r++]),(n!==0||t)&&(i+=String.fromCharCode(n));return i}const R8=(()=>{const e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e})(),lAe=(()=>{const e=R8.slice();return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e})(),uAe=["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"],cAe=(()=>{const e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e})(),hAe=(e,t)=>{let r=(t||R8)[e];return r===void 0&&(r="unknown"+String(e)),r},KL=new Map;KL.set("EXIFIFD",lAe),KL.set("GPSIFD",uAe);const lv={tiffTags:R8,ifdTags:KL,geoKeys:cAe,getTagName:hAe},L8=(()=>{const e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,t[0]===1})(),kz=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],Dv=4294967296,pAe=new Set([1,5,6,7,8,34712,34887]);function k8(e,t){let r="unknown";return e===3?r=t===64?"f64":"f32":e===1?t===1?r="u1":t===2?r="u2":t===4?r="u4":t<=8?r="u8":t<=16?r="u16":t<=32&&(r="u32"):e===2&&(t<=8?r="s8":t<=16?r="s16":t<=32&&(r="s32")),r}function KA(e){let t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f64":t=Float64Array;break;default:t=Float32Array}return t}function dAe(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function vre(e,t){return e.get(t)?.values}function ry(e,t){return e.get(t)?.values}function Nz(e,t){return e.get(t)?.values?.[0]}function At(e,t){return e.get(t)?.values?.[0]}function b5(e,t,r,i=0,s=lv.tiffTags,n=4){const o=n===8,a=o?D8(new DataView(e,r,8),0,t):new DataView(e,r,2).getUint16(0,t),l=4+2*n,u=o?8:2,c=u+a*l;if(r+c>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:c};const p=r+c+4<=e.byteLength?VT(new DataView(e,r+c,n===8?8:4),0,t,n===8):null,f=r+u,m=new Map;let g,b,w,S,M,x=0,_=0;for(let I=0;I<a;I++){b=new DataView(e,f+l*I,l),w=b.getUint16(0,t),M=b.getUint16(2,t),S=lv.getTagName(w,s);const E=[];n===2?(x=b.getUint16(4,t),_=b.getUint16(6,t)):n===4?(x=b.getUint32(4,t),_=b.getUint32(8,t)):n===8&&(x=VT(b,4,t,!0),_=VT(b,12,t,!0),E.push(b.getUint32(12,t)),E.push(b.getUint32(16,t))),g={id:w,type:M,valueCount:x,valueOffset:_,valueOffsets:E,values:null},bAe(e,t,g,i,!1,n),m.set(S,g)}return{success:!0,ifd:m,nextIFD:p,requiredBufferSize:c}}const fAe=(e,t)=>yre(e,{inputOffset:t}).pixels[0];function XL(e,t){if(t!==1&&t!==2&&t!==4)return e;const r=new Uint8Array(e),i=8/t,s=new Uint8Array(e.byteLength*i);let n=0;const o=2**t-1;for(let a=0;a<r.length;a++){const l=r[a];for(let u=0;u<i;u++)s[n++]=l<<t*u>>>8-t&o}return s.buffer}function QL(e,t,r){const i=new dre;i.parse(e),i.colorTransform=r===6?-1:0;const s=i.getData(i.width,i.height,t!==1&&t!==4);return new Uint8Array(s.buffer)}function ek(e){const t=new hS(e).getBytes(),r=new ArrayBuffer(t.length),i=new Uint8Array(r);return i.set(t),i}async function tk(e,t,r,i,s){const n=L8===t,o=At(r,"BITSPERSAMPLE"),a=At(r,"SAMPLESPERPIXEL")??1,l=At(r,"PHOTOMETRICINTERPRETATION"),u=At(r,"SAMPLEFORMAT")??1,c=k8(u,o),p=At(r,"COMPRESSION")??1,f=KA(c);let m,g,b;if(p===34887)return await mre(),fAe(e,i);if(p===1)m=e.slice(i,i+s),g=new Uint8Array(m);else if(p===8||p===32946)g=new Uint8Array(e,i,s),g=ek(g),m=g.buffer;else if(p===6)g=new Uint8Array(e,i,s),g=QL(g,a,l),m=g.buffer;else if(p===7){const x=r.get("JPEGTABLES").values,_=x.length-2;g=new Uint8Array(_+s-2);for(let E=0;E<_;E++)g[E]=x[E];const I=new Uint8Array(e,i+2,s-2);for(let E=0;E<I.length;E++)g[_+E]=I[E];g=QL(g,a,l),m=g.buffer}else{if(p!==5)throw new Error("tiff-decode: unsupport compression "+p);g=P8(e,i,s,t),m=g.buffer}if(m=XL(m,o),c==="u8"||c==="s8"||n)b=new f(m);else{m=new ArrayBuffer(g.length);const x=new Uint8Array(m);switch(c){case"u16":case"s16":for(let _=0;_<g.length;_+=2)x[_]=g[_+1],x[_+1]=g[_];break;case"u32":case"s32":case"f32":for(let _=0;_<g.length;_+=4)x[_]=g[_+3],x[_+1]=g[_+2],x[_+2]=g[_+1],x[_+3]=g[_]}b=new f(m)}const w=At(r,"PREDICTOR")??1,S=At(r,"TILEWIDTH"),M=At(r,"TILELENGTH");if(w>1&&(p===5||p===8||p===32946)&&S&&M){const x=XA(r),_=new f(b.length);_.set(b),b=MAe(_,M,S,u===3&&w===3,x?1:a)}return b}async function mAe(e,t,r){const i=ry(r,"TILEOFFSETS");if(i===void 0)return null;const s=ry(r,"TILEBYTECOUNTS"),{width:n,height:o,pixelType:a,tileWidth:l,tileHeight:u}=N8([r]),c=XA(r,t),p=At(r,"SAMPLESPERPIXEL")||t.planes,f=n*o,m=At(r,"BITSPERSAMPLE"),g=(At(r,"COMPRESSION")??1)===34887,b=KA(a),w=[];for(let $=0;$<p;$++)w.push(new b(f));let S,M,x,_,I,E,A,C,O,R,D,N,U;const J=Math.ceil(n/l),y=new Uint8Array(f).fill(255);let T=!1;if(m%8==0)if(g&&c&&p>1){const $=Math.round(i.length/p);for(S=0;S<$;S++){E=Math.floor(S/J)*u,A=S%J*l,C=E*n+A;for(let P=0;P<p;P++){const z=S*p+P;for(s[z]===0?(x=null,T=!0):x=await tk(e,t.littleEndian,r,i[z],s[z]),R=0,O=C,N=Math.min(l,n-A),D=Math.min(u,o-E),U=w[P],_=0;_<D;_++)for(O=C+_*n,R=_*l,I=0;I<N;I++,O++,R++)x?U[O]=x[R]:y[O]=0}}}else for(S=0;S<i.length;S++)for(E=Math.floor(S/J)*u,A=S%J*l,C=E*n+A,s[S]===0?(x=null,T=!0):x=await tk(e,t.littleEndian,r,i[S],s[S]),R=0,O=C,N=Math.min(l,n-A),D=Math.min(u,o-E),M=0;M<p;M++)if(U=w[M],c||g)for(_=0;_<D;_++)for(O=C+_*n,R=l*u*M+_*l,I=0;I<N;I++,O++,R++)x?U[O]=x[R]:y[O]=0;else for(_=0;_<D;_++)for(O=C+_*n,R=_*l*p+M,I=0;I<N;I++,O++,R+=p)x?U[O]=x[R]:y[O]=0;return{width:n,height:o,pixelType:a,pixels:w,mask:T?y:void 0}}const yAe=(e,t,r)=>{const i=L8===t.littleEndian,s=ry(r,"STRIPOFFSETS");if(s===void 0)return null;const{width:n,height:o,pixelType:a}=N8([r]),l=At(r,"SAMPLESPERPIXEL")||t.planes,u=At(r,"PHOTOMETRICINTERPRETATION"),c=n*o,p=At(r,"BITSPERSAMPLE"),f=KA(a),m=new f(c*l),g=ry(r,"STRIPBYTECOUNTS"),b=At(r,"ROWSPERSTRIP"),w=At(r,"COMPRESSION")??1;let S,M,x,_,I,E,A,C,O;if(p%8==0)for(S=0;S<s.length;S++){if(I=S*(b*n)*l,a==="u8"||a==="s8"||i)w===8||w===32946?(A=new Uint8Array(e,s[S],g[S]),A=ek(A),E=A.buffer):w===6?(A=new Uint8Array(e,s[S],g[S]),A=QL(A,l,u),E=A.buffer):w===5?(A=P8(e,s[S],g[S],t.littleEndian),E=A.buffer):E=e.slice(s[S],s[S]+g[S]),E=XL(E,p),_=new f(E);else{switch(w===6||w===8||w===32946?(A=new Uint8Array(e,s[S],g[S]),C=ek(A),E=C.buffer):(E=new ArrayBuffer(g[S]),A=new Uint8Array(e,s[S],g[S]),C=new Uint8Array(E)),a){case"u16":case"s16":for(x=0;x<A.length;x+=2)C[x]=A[x+1],C[x+1]=A[x];break;case"u32":case"s32":case"f32":for(x=0;x<A.length;x+=4)C[x]=A[x+3],C[x+1]=A[x+2],C[x+2]=A[x+1],C[x+3]=A[x]}E=XL(E,p),_=new f(E)}m.set(_,I)}const R=[];if(l===1)R.push(m);else for(S=0;S<l;S++){for(O=new f(c),M=0;M<c;M++)O[M]=m[M*l+S];R.push(O)}return{width:n,height:o,pixelType:a,pixels:R}},gAe=(e,t,r)=>{if(!(e&&e.length>0&&t&&r))return null;let i,s,n;const o=e[0].length,a=e.length,l=new Uint8Array(o);for(let u=0;u<a;u++)if(i=e[u],s=t[u],n=r[u],u===0)for(let c=0;c<o;c++)l[c]=i[c]<s||i[c]>n?0:1;else for(let c=0;c<o;c++)l[c]&&(l[c]=i[c]<s||i[c]>n?0:1);return l},vAe=e=>{if(!e)return null;const t=e.match(/<Item(.*?)Item>/gi);if(!t||t.length===0)return null;const r=new Map;let i,s,n,o,a;for(let S=0;S<t.length;S++)i=t[S],s=i.slice(6,i.indexOf(">")),o=i.indexOf("sample="),o>-1&&(a=i.slice(o+8,i.indexOf('"',o+8))),o=i.indexOf("name="),o>-1&&(s=i.slice(o+6,i.indexOf('"',o+6))),s&&(n=i.slice(i.indexOf(">")+1,i.indexOf("</Item>")).trim(),a!=null?r.has(s)?r.get(s)[a]=n:r.set(s,[n]):r.set(s,n)),a=null;const l=r.get("STATISTICS_MINIMUM"),u=r.get("STATISTICS_MAXIMUM"),c=r.get("STATISTICS_MEAN"),p=r.get("STATISTICS_STDDEV");let f=null;if(l&&u){f=[];for(let S=0;S<l.length;S++)f.push({min:parseFloat(l[S]),max:parseFloat(u[S]),avg:c&&parseFloat(c[S]),stddev:p&&parseFloat(p[S])})}const m=r.get("BandName"),g=r.get("WavelengthMin"),b=r.get("WavelengthMax");let w=null;if(m){w=[];for(let S=0;S<m.length;S++)w.push({BandName:m[S],WavelengthMin:g&&parseFloat(g[S]),WavelengthMax:b&&parseFloat(b[S])})}return{statistics:f,bandProperties:w,dataType:r.get("DataType"),rawMetadata:r}};function bAe(e,t,r,i=0,s=!1,n=4){if(r.values)return!0;const o=r.type,a=r.valueCount;let l=r.valueOffset,u=[];const c=kz[o],p=8*c,f=a*c,m=a*kz[o]*8;let g,b;const w=n===8?64:32,S=r.valueOffsets;if(m>w&&f>(s?e.byteLength:e?e.byteLength-l+i:0))return r.offlineOffsetSize=[l,f],r.values=null,!1;if(m<=w){if(!t)if(w<=32)l>>>=32-m;else{const M=S?.length?S[0]:l>>>0,x=S?.length?S[1]:Math.round((l-M)/Dv);m<=32?(l=M>>>32-m,S[0]=l):(l=M*2**(32-m)+(x>>>32-m),S[0]=M,S[1]=x>>>32-m)}if(a===1&&p===w)u=[l];else if(w===64){const M=S?.length?S[0]:l>>>0,x=S?.length?S[1]:Math.round((l-M)/Dv);let _=M,I=32;for(b=1;b<=a;b++){const E=32-p*b%32;if(I<p){const A=_<<E>>>32-I,C=x<<32-I>>>32-I;_=x,u.push(A+C*2**(p-I)),I-=32-(p-I)}else u.push(_<<E>>>32-p),I-=p;I===0&&(I=32,_=x)}}else for(b=1;b<=a;b++){const M=32-p*b;u.push(l<<M>>>32-p)}}else{l-=i,s&&(l=0);for(let M=l;M<l+f;M+=c){switch(o){case 1:case 2:case 7:g=new DataView(e,M,1).getUint8(0);break;case 3:g=new DataView(e,M,2).getUint16(0,t);break;case 4:case 13:g=new DataView(e,M,4).getUint32(0,t);break;case 5:g=new DataView(e,M,4).getUint32(0,t)/new DataView(e,M+4,4).getUint32(0,t);break;case 6:g=new DataView(e,M,1).getInt8(0);break;case 8:g=new DataView(e,M,2).getInt16(0,t);break;case 9:g=new DataView(e,M,4).getInt32(0,t);break;case 10:g=new DataView(e,M,4).getInt32(0,t)/new DataView(e,M+4,4).getInt32(0,t);break;case 11:g=new DataView(e,M,4).getFloat32(0,t);break;case 12:g=new DataView(e,M,8).getFloat64(0,t);break;case 16:case 18:g=D8(new DataView(e,M,8),0,t);break;case 17:g=_Ae(new DataView(e,M,8),0,t);break;default:g=null}u.push(g)}}if(o===2){let M="";const x=u;for(u=[],b=0;b<x.length;b++)x[b]===0&&M!==""?(u.push(M),M=""):M+=String.fromCharCode(x[b]);M===""&&u.length!==0||u.push(M)}return r.values=u,!0}function N8(e){const t=e[0],r=At(t,"TILEWIDTH"),i=At(t,"TILELENGTH"),s=At(t,"IMAGEWIDTH"),n=At(t,"IMAGELENGTH"),o=At(t,"BITSPERSAMPLE"),a=At(t,"SAMPLESPERPIXEL"),l=At(t,"SAMPLEFORMAT")??1,u=k8(l,o),c=XA(t),p=vre(t,"GDAL_NODATA");let f=null;p?.length&&(f=p.map(ae=>parseFloat(ae)),f.some(ae=>isNaN(ae))&&(f=null));const m=At(t,"COMPRESSION")??1;let g;switch(m){case 1:g="NONE";break;case 2:case 3:case 4:case 32771:g="CCITT";break;case 5:g="LZW";break;case 6:case 7:g="JPEG";break;case 32773:g="PACKBITS";break;case 8:case 32946:g="DEFLATE";break;case 34712:g="JPEG2000";break;case 34887:g="LERC";break;default:g=String(m)}let b=!0,w="";pAe.has(m)||(b=!1,w+="unsupported tag compression "+m),l>3&&(b=!1,w+="unsupported tag sampleFormat "+l),o!==1&&o!==2&&o!==4&&o%8!=0&&(b=!1,w+="unsupported tag bitsPerSample "+o);const S=Nz(t,"GEOASCIIPARAMS");let M;if(S){const ae=S.split("|").find(ye=>ye.includes("ESRI PE String = ")),te=ae?ae.replace("ESRI PE String = ",""):"";M=te.startsWith("COMPD_CS")||te.startsWith("PROJCS")||te.startsWith("GEOGCS")?{wkid:null,wkt:te}:null}const x=ry(t,"GEOTIEPOINTS"),_=ry(t,"GEOPIXELSCALE"),I=ry(t,"GEOTRANSMATRIX"),E=t.has("GEOKEYDIRECTORY")?t.get("GEOKEYDIRECTORY").data:null;let A,C,O=!1,R=!1;if(E){O=At(E,"GTRasterTypeGeoKey")===2;const ae=At(E,"GTModelTypeGeoKey");if(ae===2){const te=At(E,"GeographicTypeGeoKey");te>=1024&&te<=32766&&(M={wkid:te}),M||te!==32767||(R=!0,M={wkid:4326})}else if(ae===1){const te=At(E,"ProjectedCSTypeGeoKey");te>=1024&&te<=32766&&(M={wkid:te})}}if(_&&x&&x.length>=6?(A=[_[0],0,x[3]-x[0]*_[0],0,-Math.abs(_[1]),x[4]-x[1]*_[1]],O&&(A[2]-=.5*A[0]+.5*A[1],A[5]-=.5*A[3]+.5*A[4])):I&&I.length===16&&(A=O?[I[0],I[1],I[3]-.5*I[0],I[4],I[5],I[7]-.5*I[5]]:[I[0],I[1],I[3],I[4],I[5],I[7]]),A){const ae=[{x:0,y:n},{x:0,y:0},{x:s,y:n},{x:s,y:0}];let te,ye=Number.POSITIVE_INFINITY,Me=Number.POSITIVE_INFINITY,De=Number.NEGATIVE_INFINITY,$e=Number.NEGATIVE_INFINITY;for(let gt=0;gt<ae.length;gt++)te=dAe(ae[gt],A),ye=te.x>ye?ye:te.x,De=te.x<De?De:te.x,Me=te.y>Me?Me:te.y,$e=te.y<$e?$e:te.y;C={xmin:ye,xmax:De,ymin:Me,ymax:$e,spatialReference:M}}else C={xmin:-.5,ymin:.5-n,xmax:s-.5,ymax:.5,spatialReference:M};R&&(C.xmax-C.xmin>400||Math.max(Math.abs(C.xmin),Math.abs(C.xmax))>361)&&(M=null,C.spatialReference=null);const D=bre(e);let N,U,J,y,T;if(D.length>0){J=Math.round(Math.log(s/At(D[0],"IMAGEWIDTH"))/Math.LN2);const ae=D[D.length-1];y=D.length,N=At(ae,"TILEWIDTH"),U=At(ae,"TILELENGTH")}N=y!=null&&y>0?N||r:null,U=y!=null&&y>0?U||i:null,r&&(T=[{maxCol:Math.ceil(s/r)-1,maxRow:Math.ceil(n/i)-1,minRow:0,minCol:0}],D.forEach(ae=>{T.push({maxCol:Math.ceil(At(ae,"IMAGEWIDTH")/At(ae,"TILEWIDTH"))-1,maxRow:Math.ceil(At(ae,"IMAGELENGTH")/At(ae,"TILELENGTH"))-1,minRow:0,minCol:0})}));const $=Nz(e[0],"GDAL_METADATA"),P=vAe($);w+=" "+_re({width:s,height:n,tileWidth:r,tileHeight:i,planes:a,ifds:e});const z=wre(e).length===D.length+1,X=D?.length?D.map(ae=>({x:s/At(ae,"IMAGEWIDTH"),y:n/At(ae,"IMAGELENGTH")})):void 0;return{width:s,height:n,tileWidth:r,tileHeight:i,planes:a,isBSQ:c,pixelType:u,compression:g,noData:f,hasMaskBand:z,isSupported:b,pyramidResolutions:X,message:w,extent:C,isPseudoGeographic:R,affine:_?null:A,firstPyramidLevel:J,maximumPyramidLevel:y,pyramidBlockWidth:N,pyramidBlockHeight:U,tileBoundary:T,metadata:P}}function XA(e,t){const r=vre(e,"PLANARCONFIGURATION");return r?r[0]===2:!!t&&t.isBSQ}function bre(e){return e.filter(t=>At(t,"NEWSUBFILETYPE")===1)}function wre(e){return e.filter(t=>{const r=!(4&~(At(t,"NEWSUBFILETYPE")??0)),i=At(t,"PHOTOMETRICINTERPRETATION")===4;return r&&i})}function wAe(e){const{littleEndian:t,isBigTiff:r,firstIFDPos:i}=SAe(e);let s=i;const n=[];do{const o=xAe(e,t,s,0,lv.tiffTags,r?8:4);if(!o.success)break;n.push(o.ifd),s=o.nextIFD}while(s>0);return{...N8(n),littleEndian:t,isBigTiff:r,ifds:n,pyramidIFDs:bre(n),maskIFDs:wre(n)}}function D8(e,t,r){const i=e.getUint32(t,r),s=e.getUint32(t+4,r);return r?s*Dv+i:i*Dv+s}function _Ae(e,t,r){let i=r?e.getInt32(t,r):e.getUint32(t,r),s=r?e.getUint32(t+4,r):e.getInt32(t+4,r);const n=(r?i:s)>=0?1:-1;return r?i*=n:s*=n,n*(r?s*Dv+i:i*Dv+s)}function VT(e,t,r,i){return i?D8(e,t,r):e.getUint32(t,r)}function SAe(e){const t=new DataView(e,0,16),r=t.getUint16(0,!1);let i=null;if(r===18761)i=!0;else{if(r!==19789)throw new Error("unexpected endianess byte");i=!1}const s=t.getUint16(2,i);if(s!==42&&s!==43)throw new Error("unexpected tiff identifier");let n=4;const o=s===43;if(o){const a=t.getUint16(n,i);if(n+=2,a!==8)throw new Error("unsupported bigtiff version");if(t.getUint16(n,i)!==0)throw new Error("unsupported bigtiff version");n+=2}return{littleEndian:i,isBigTiff:o,firstIFDPos:VT(t,n,i,o)}}function xAe(e,t,r,i=0,s=lv.tiffTags,n=4){const o=b5(e,t,r,i,s,n);let a;const l=o.ifd;if(l){if(lv.ifdTags.forEach((u,c)=>{l.has(c)&&(a=l.get(c),a.data=b5(e,t,a.valueOffset-i,i,u).ifd)}),l.has("GEOKEYDIRECTORY")){a=l.get("GEOKEYDIRECTORY");const u=a.values;if(u&&u.length>4){const c=u[0]+"."+u[1]+"."+u[2];a.data=b5(e,t,a.valueOffset+6-i,i,lv.geoKeys,2).ifd,a.data&&a.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[c]})}}if(l.has("XMP")){a=l.get("XMP");const u=a.values;typeof u[0]=="number"&&a.type===7&&(a.values=[aAe(new Uint8Array(u))])}}return o}function _re(e){const{width:t,height:r,tileHeight:i,tileWidth:s}=e,n=e.planes,o=s?s*i:t*r,a=At(e.ifds[0],"BITSPERSAMPLE");let l="";return o*n>2**30/(a>8?a/8:1)&&(l=s?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),l}function MAe(e,t,r,i,s){const n=i?4:1,o=r*n*s;i&&(e=new Uint8Array(e.buffer));for(let u=0;u<t;u++){const c=u*o;for(let p=s;p<o;p++)e[c+p]+=e[c+p-s]}if(!i)return e;const a=new Uint8Array(e.length),l=r*s;for(let u=0;u<t;u++){const c=u*o;for(let p=0;p<l;p++)for(let f=0;f<n;f++)a[c+p*n+f]=e[c+p+(n-f-1)*l]}return new Float32Array(a.buffer)}async function TAe(e,t){const{headerInfo:r,ifd:i,offsets:s,sizes:n}=t,o=[];for(let O=0;O<s.length;O++){n[O];const R=await tk(e,r.littleEndian,i,s[O],n[O]||e.byteLength);o.push(R)}const a=XA(i,r),l=At(i,"BITSPERSAMPLE"),u=k8(At(i,"SAMPLEFORMAT")??1,l),c=At(i,"SAMPLESPERPIXEL")||r.planes,p=KA(u),f=At(i,"TILEWIDTH"),m=At(i,"TILELENGTH"),g=At(i,"COMPRESSION")??1,b=f*m;let w;const S=[];let M=o[0];const x=g===34887;for(let O=0;O<c;O++){if(w=new p(b),o.length===c)M=o[O],M.length===b&&(w=M);else if(M.length)if(a||x)w=M.length===b?M:M.slice(b*O,b*(O+1));else for(let R=0;R<b;R++)w[R]=M[R*c+O];S.push(w)}const _=r.noData?r.noData[0]:t.noDataValue,I=r.metadata?r.metadata.statistics:null,E=I?I.map(O=>O.min):null,A=I?I.map(O=>O.max):null,C={pixelType:u,width:f,height:m,pixels:S,noDataValue:_};return _!=null?E8(C,_):E&&A&&t.applyMinMaxConstraint&&(C.mask=gAe(S,E,A)),C}async function IAe(e,t={}){const r=t.pyramidLevel||0,i=t.headerInfo||wAe(e),{ifds:s,noData:n}=i;if(s.length===0)throw new Error("no valid image file directory");const o=_re(i);if(o)throw o;let a=null;const l=r===-1?s[s.length-1]:s[r],u=n??t.noDataValue;return a=i.tileWidth?await mAe(e,i,l):yAe(e,i,l),a&&(u!=null&&E8(a,u),a)}var EAe=function(e){var t,r,i,s,n,o;function a(l){var u,c,p,f,m,g,b,w,S,M,x,_,I;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(u=this.readUInt32(),w=function(){var E,A;for(A=[],E=0;E<4;++E)A.push(String.fromCharCode(this.data[this.pos++]));return A}.call(this).join(""),w){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),p=this.readUInt16()||100,m.delay=1e3*f/p,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,u-=4),l=m?.data||this.imgData,x=0;0<=u?x<u:x>u;0<=u?++x:--x)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(u),(S=255-this.transparency.indexed.length)>0)for(_=0;0<=S?_<S:_>S;0<=S?++_:--_)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":g=(M=this.read(u)).indexOf(0),b=String.fromCharCode.apply(String,M.slice(0,g)),this.text[b]=String.fromCharCode.apply(String,M.slice(g+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(I=this.colorType)===4||I===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return a.load=function(l,u,c){var p;return typeof u=="function"&&(c=u),(p=new XMLHttpRequest).open("GET",l,!0),p.responseType="arraybuffer",p.onload=function(){var f;return f=new a(new Uint8Array(p.response||p.mozResponseArrayBuffer)),typeof u?.getContext=="function"&&f.render(u),typeof c=="function"?c(f):void 0},p.send(null)},r=1,i=2,t=0,a.prototype.read=function(l){var u,c;for(c=[],u=0;0<=l?u<l:u>l;0<=l?++u:--u)c.push(this.data[this.pos++]);return c},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(l){var u,c,p,f,m,g,b,w,S,M,x,_,I,E,A,C,O,R,D,N,U,J,y;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);for(l=(l=new hS(l)).getBytes(),C=(_=this.pixelBitlength/8)*this.width,I=new Uint8Array(C*this.height),g=l.length,A=0,E=0,c=0;E<g;){switch(l[E++]){case 0:for(f=D=0;D<C;f=D+=1)I[c++]=l[E++];break;case 1:for(f=N=0;N<C;f=N+=1)u=l[E++],m=f<_?0:I[c-_],I[c++]=(u+m)%256;break;case 2:for(f=U=0;U<C;f=U+=1)u=l[E++],p=(f-f%_)/_,O=A&&I[(A-1)*C+p*_+f%_],I[c++]=(O+u)%256;break;case 3:for(f=J=0;J<C;f=J+=1)u=l[E++],p=(f-f%_)/_,m=f<_?0:I[c-_],O=A&&I[(A-1)*C+p*_+f%_],I[c++]=(u+Math.floor((m+O)/2))%256;break;case 4:for(f=y=0;y<C;f=y+=1)u=l[E++],p=(f-f%_)/_,m=f<_?0:I[c-_],A===0?O=R=0:(O=I[(A-1)*C+p*_+f%_],R=p&&I[(A-1)*C+(p-1)*_+f%_]),b=m+O-R,w=Math.abs(b-m),M=Math.abs(b-O),x=Math.abs(b-R),S=w<=M&&w<=x?m:M<=x?O:R,I[c++]=(u+S)%256;break;default:throw new Error("Invalid filter algorithm: "+l[E-1])}A++}return I},a.prototype.decodePalette=function(){var l,u,c,p,f,m,g,b,w;for(c=this.palette,m=this.transparency.indexed||[],f=new Uint8Array((m.length||0)+c.length),p=0,c.length,l=0,u=g=0,b=c.length;g<b;u=g+=3)f[p++]=c[u],f[p++]=c[u+1],f[p++]=c[u+2],f[p++]=(w=m[l++])!=null?w:255;return f},a.prototype.copyToImageData=function(l,u){var c,p,f,m,g,b,w,S,M,x,_;if(p=this.colors,M=null,c=this.hasAlphaChannel,this.palette.length&&(M=(_=this._decodedPalette)!=null?_:this._decodedPalette=this.decodePalette(),p=4,c=!0),S=(f=l.data||l).length,g=M||u,m=b=0,p===1)for(;m<S;)w=M?4*u[m/4]:b,x=g[w++],f[m++]=x,f[m++]=x,f[m++]=x,f[m++]=c?g[w++]:this.transparency.grayscale&&this.transparency.grayscale===x?0:255,b=w;else for(;m<S;)w=M?4*u[m/4]:b,f[m++]=g[w++],f[m++]=g[w++],f[m++]=g[w++],f[m++]=c?g[w++]:this.transparency.rgb&&this.transparency.rgb[1]===g[w-3]&&this.transparency.rgb[3]===g[w-2]&&this.transparency.rgb[5]===g[w-1]?0:255,b=w},a.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l},n=e.document&&e.document.createElement("canvas"),o=n&&n.getContext("2d"),s=function(l){var u;return o.width=l.width,o.height=l.height,o.clearRect(0,0,l.width,l.height),o.putImageData(l,0,0),(u=new Image).src=n.toDataURL(),u},a.prototype.decodeFrames=function(l){var u,c,p,f,m,g,b,w;if(this.animation){for(w=[],c=m=0,g=(b=this.animation.frames).length;m<g;c=++m)u=b[c],p=l.createImageData(u.width,u.height),f=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(p,f),u.imageData=p,w.push(u.image=s(p));return w}},a.prototype.renderFrame=function(l,u){var c,p,f;return c=(p=this.animation.frames)[u],f=p[u-1],u===0&&l.clearRect(0,0,this.width,this.height),f?.disposeOp===r?l.clearRect(f.xOffset,f.yOffset,f.width,f.height):f?.disposeOp===i&&l.putImageData(f.imageData,f.xOffset,f.yOffset),c.blendOp===t&&l.clearRect(c.xOffset,c.yOffset,c.width,c.height),l.drawImage(c.image,c.xOffset,c.yOffset)},a.prototype.animate=function(l){var u,c,p,f,m,g,b=this;return c=0,g=this.animation,f=g.numFrames,p=g.frames,m=g.numPlays,(u=function(){var w,S;if(w=c++%f,S=p[w],b.renderFrame(l,w),f>1&&c/f<m)return b.animation._timeout=setTimeout(u,S.delay)})()},a.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},a.prototype.render=function(l){var u,c;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,u=l.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(c=u.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),u.putImageData(c,0,0))},a}(self);const AAe=new Set(["jpg","png","bmp","gif"]);async function $Ae(e,t){if(!L8)throw new K("rasterCoded:decode","lerc decoder is not supported on big endian platform");await mre();const{offset:r}=t,{width:i,height:s,pixelType:n,statistics:o,depthCount:a,noDataValues:l,bandMasks:u,pixels:c,mask:p}=yre(e,{inputOffset:r,returnInterleaved:t.returnInterleaved}),f=new It({width:i,height:s,pixelType:n.toLowerCase(),pixels:c,mask:p,statistics:o.map(({minValue:m,maxValue:g})=>new cS(m,g)),bandMasks:u,depthCount:a,noDataValues:l});return o?.length||f.updateStatistics(),f}async function CAe(e,t){const r=await IAe(e,{...t,noDataValue:null});gd(r);const i=new It({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,bandMasks:r.bandMasks,statistics:null});return i.updateStatistics(),i}async function OAe(e,t){const r=await TAe(e,t.customOptions),i=new It({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return i.updateStatistics(),i}function Sre(e,t){const r=t.pixelType||"u8",i=It.getPixelArrayConstructor(r),s=r==="u8"?e:new i(e.buffer),n=[],o=t.planes||1;if(o===1)n.push(s);else for(let l=0;l<o;l++){const u=(t.width||1)*(t.height||e.length),c=new i(u);for(let p=0;p<u;p++)c[p]=s[p*o+l];n.push(c)}const a=new It({width:t.width||1,height:t.height||e.length,pixels:n,pixelType:r,statistics:null});return a.updateStatistics(),a}function PAe(e,t){return Sre(new hS(new Uint8Array(e)).getBytes(),t)}function RAe(e,t){return Sre(P8(e,t.offset,t.eof,!t.isInputBigEndian),t)}function LAe(e,t,r){const{pixelTypeCtor:i}=jAe(t.pixelType),s=(0,oAe.decode)(e,{width:t.width,height:t.height,pixelType:i,format:r}),n=new It({width:t.width,height:t.height,pixels:s.pixels,pixelType:t.pixelType,mask:s.mask,statistics:null});return n.updateStatistics(),n}function kAe(e,t){const r=eAe.decode(e,t.hasNoZlibMask??void 0),i=new It({width:r.width,height:r.height,pixels:r.pixels,pixelType:"u8",mask:r.mask,statistics:null});return i.updateStatistics(),i}function NAe(e,t){const r=new Uint8Array(e),i=new EAe(r),{width:s,height:n}=t,o=s*n,a=i.decode();let l,u=0,c=0;const p=new Uint8Array(o);for(u=0;u<o;u++)p[u]=a[4*u+3];const f=new It({width:s,height:n,pixels:[],pixelType:"u8",mask:p,statistics:[]});for(u=0;u<3;u++){for(l=new Uint8Array(o),c=0;c<o;c++)l[c]=a[4*c+u];f.addData({pixels:l})}return f.updateStatistics(),f}async function DAe(e,t,r,i){const s=new QEe,n={applyJpegMask:!1,format:t,...r},o=await s.decode(e,n,i),a=new It(o);return a.updateStatistics(),a}function xre(e){if(e==null)throw new K("rasterCodec:decode","parameter encodeddata is required.");const t=new Uint8Array(e,0,10);let r="";return t[0]===255&&t[1]===216?r="jpg":t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71?r="png":t[0]===67&&t[1]===110&&t[2]===116&&t[3]===90&&t[4]===73&&t[5]===109&&t[6]===97&&t[7]===103&&t[8]===101&&t[9]===32?r="lerc":t[0]===76&&t[1]===101&&t[2]===114&&t[3]===99&&t[4]===50&&t[5]===32?r="lerc2":t[0]===73&&t[1]===73&&t[2]===42&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===42||t[0]===73&&t[1]===73&&t[2]===43&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===43?r="tiff":t[0]===71&&t[1]===73&&t[2]===70?r="gif":t[0]===66&&t[1]===77?r="bmp":String.fromCharCode.apply(null,t).toLowerCase().includes("error")&&(r="error"),r}function FAe(e){let t=null;switch(e){case"lerc":case"lerc2":t=$Ae;break;case"jpg":t=kAe;break;case"png":t=NAe;break;case"bsq":case"bip":t=(r,i)=>LAe(r,i,e);break;case"tiff":t=CAe;break;case"deflate":t=PAe;break;case"lzw":t=RAe;break;case"error":t=()=>{throw new K("rasterCodec:decode","input data contains error")};break;default:t=()=>{throw new K("rasterCodec:decode","unsupported raster format")}}return t}function jAe(e){let t=null,r=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":r=255,t=Uint8Array;break;case"u16":r=r||65535,t=Uint16Array;break;case"u32":r=r||2**32-1,t=Uint32Array;break;case"s8":r=r||-128,t=Int8Array;break;case"s16":r=r||-32768,t=Int16Array;break;case"s32":r=r||0-2**31,t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:r}}function VAe(e,t=1){if(!e)return;const{pixels:r,width:i,height:s,mask:n}=e;if(!r||r.length===0)return;const o=r.length,a=i-1,l=s-1,u=[];let c,p,f,m,g,b,w=null;const S=It.getPixelArrayConstructor(e.pixelType);if(t===0){for(c=0;c<o;c++){for(g=r[c],b=new S(a*l),p=0;p<l;p++)for(m=p*i,f=0;f<a;f++)b[p*a+f]=g[m+f];u.push(b)}if(n!=null)for(w=new Uint8Array(a*l),p=0;p<l;p++)for(m=p*i,f=0;f<a;f++)w[p*a+f]=n[m+f]}else{for(c=0;c<o;c++){for(g=r[c],b=new S(a*l),p=0;p<l;p++)for(m=p*i,f=0;f<a;f++)b[p*a+f]=(g[m+f]+g[m+f+1]+g[m+i+f]+g[m+i+f+1])/4;u.push(b)}if(n)for(w=new Uint8Array(a*l),p=0;p<l;p++)for(m=p*i,f=0;f<a;f++)w[p*a+f]=Math.min.apply(null,[n[m+f],n[m+f+1],n[m+i+f],n[m+i+f+1]])}e.width=a,e.height=l,e.mask=w,e.pixels=u}function UAe(e){let t=xre(e);return t==="lerc2"?t="lerc":t==="error"&&(t=""),t}async function Dz(e,t={},r){if(e==null)throw new K("rasterCodec:decode","missing encodeddata parameter.");let i=t.format?.toLowerCase();if(!(i!=="bsq"&&i!=="bip"||t.width!=null&&t.height!=null))throw new K("rasterCodec:decode","requires width and height in options parameter.");if(i==="tiff"&&t.customOptions)return OAe(e,t);if((!i||i!=="bsq"&&i!=="bip"&&i!=="deflate"&&i!=="lzw")&&(i=xre(e)),t.useCanvas&&AAe.has(i))return DAe(e,i,t,r);const s=FAe(i);let n;t.isPoint&&((t={...t}).width!=null&&t.width++,t.height!=null&&t.height++);const{offsets:o}=t;if(o&&o.length>1){const a=o.map((c,p)=>s(e.slice(c,o[p+1]),t)),l=await Promise.all(a);n=l[0],n.pixels=l.map(c=>c.pixels[0]);const u=l.map(c=>c.mask);l.some(c=>c!=null)&&(u.forEach((c,p)=>{c==null&&(u[p]=new Uint8Array(n.width*n.height).fill(255))}),n.bandMasks=u,n.mask=It.combineBandMasks(u)),n.updateStatistics()}else n=await s(e,{...t,offset:o?.[0]??t.offset});return i!=="jpg"&&t.noDataValue!=null&&n.depthCount===1&&E8(n,t.noDataValue,{customFloatTolerance:t.tolerance}),t.isPoint&&VAe(n),n}function zAe(e){return["u8","s8"].includes(e.pixelType)&&e.statistics?.[0]?.min!=null&&e.statistics[0]?.max!=null&&e.bandCount===1}function F8(e,t){const{attributeTable:r,bandCount:i}=e;return r==null&&zAe(e)?!0:!(r==null||i>1||t&&r.fields.find(s=>s.name.toLowerCase()===t.toLowerCase())==null)}function Mre(e){const{bandCount:t,dataType:r,pixelType:i}=e;return r==="elevation"||r==="generic"&&t===1&&(i==="s16"||i==="s32"||i==="f32"||i==="f64")}function j8(e,t=!1){const{bandCount:r,colormap:i,pixelType:s}=e;return r===1&&(!!i?.length||!t&&s==="u8")}function GAe(e,t=!1){const{attributeTable:r,bandCount:i}=e;return i===1&&(!t||r!=null||e.histograms!=null)}function V8(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}function BAe(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}const Fz=new wt({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),jz=new wt({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let ml=class extends ue{constructor(t){super(t),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(t){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",t)}set definedInterval(t){this.classificationMethod==="defined-interval"&&this._set("definedInterval",t)}};h([We({classBreaksDef:"class-breaks-definition"})],ml.prototype,"type",void 0),h([d({json:{write:!0}})],ml.prototype,"breakCount",void 0),h([d({json:{write:!0}})],ml.prototype,"classificationField",void 0),h([d({type:String,json:{read:Fz.read,write:Fz.write}})],ml.prototype,"classificationMethod",void 0),h([d({json:{write:!0}})],ml.prototype,"normalizationField",void 0),h([d({json:{read:jz.read,write:jz.write}})],ml.prototype,"normalizationType",void 0),h([d({value:null,json:{write:!0}})],ml.prototype,"standardDeviationInterval",null),h([d({value:null,json:{write:!0}})],ml.prototype,"definedInterval",null),ml=h([j("esri.rest.support.ClassBreaksDefinition")],ml);const Kot=ml,qAe=.25,HAe=EA.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),Vz=EA.fromJSON(x8[0]),Tre=new Set(["scientific","standard-time","vector-uv","vector-magdir","vector-u","vector-v","vector-magnitude","vector-direction"]);function WAe(e,t){const{attributeTable:r,colormap:i}=e;if(V8(e)){const s=r$e(e);if(s!=null)return s}if(t?.rasterFunctionColorRamp){const s=Uz(e,t);return s.colorRamp=t.rasterFunctionColorRamp,s}if(i!=null){const s=e$e(e);if(s!=null)return s}if(r!=null){const s=XAe(e);if(s!=null)return s}return Uz(e,t)}function JAe(e,t=!1){const r=["raster-stretch"];return j8(e,t)&&r.push("raster-colormap"),F8(e)&&r.push("unique-value"),GAe(e,t)&&r.push("class-breaks"),Mre(e)&&r.push("raster-shaded-relief"),V8(e)&&r.push("vector-field"),BAe(e)&&r.push("flow"),r}function Xot(e){return e.datasetFormat==="Function"&&e.rasterFunction.functionName==="Colormap"?e.rasterFunction.colorRamp:void 0}function Qot(e,t,r){const i=["nearest","bilinear","cubic","majority"],s=r?.toLowerCase().replace("bicubic","cubic"),n=i.find(o=>o===s);return t==="Map"?n??"bilinear":e.dataType==="standard-time"?n??"nearest":e.dataType==="thematic"||e.attributeTable||e.colormap?n==="nearest"||n==="majority"?n:"nearest":n??"bilinear"}function Uz(e,t){e=ZAe(e,t?.variableName);const{bandCount:r}=e;let{bandIds:i,stretchType:s}=t||{};i?.some(p=>p>=r)&&(i=null);let n=e.statistics,o=e.histograms;r>1?(i=i?.length?i:Ire(e),n=n==null?null:i?.map(p=>n[p]),o=o==null?null:i?.map(p=>o[p])):i=[0],s==null&&(s=KAe(e));let a=!1;switch(s){case"none":a=!1;break;case"percent-clip":a=!o?.length;break;default:a=!n?.length}const{dataType:l}=e,u=i?.length===1&&Tre.has(l)?HAe:null,c=new T8({stretchType:s,dynamicRangeAdjustment:a,colorRamp:u,outputMin:0,outputMax:255,gamma:i?.length===1?[1]:[1,1,1],useGamma:!1});return s==="percent-clip"?c.maxPercent=c.minPercent=qAe:s==="standard-deviation"&&(c.numberOfStandardDeviations=2),a||e.multidimensionalInfo==null&&!t?.includeStatisticsInStretch||(s==="percent-clip"?c.histograms=o:s!=="min-max"&&s!=="standard-deviation"||(c.statistics=n)),c}function ZAe(e,t){const{multidimensionalInfo:r}=e;if(!t||!r)return e;const i=r.variables.find(s=>s.name===t);if(!i)return e;if(e=e.clone(),i){const{statistics:s,histograms:n}=i;s?.length&&(e.statistics=s.map(o=>({min:o.min,max:o.max,avg:o.avg,stddev:o.stddev}))),n?.length&&(e.histograms=n)}return e}function Ire(e){const t=e.bandCount;if(t===1)return null;if(t===2)return[0];const{bandInfos:r}=e;let i;if(r.length===t){const{red:s,green:n,blue:o,nir:a}=YAe(r);s!=null&&n!=null&&o!=null?i=[s,n,o]:a!=null&&s!=null&&n!=null&&(i=[a,s,n])}return!i&&t>=3&&(i=[0,1,2]),i}function YAe(e){const t={};for(let r=0;r<e.length;r++){const i=e[r],s=i.name.toLowerCase();if(s==="red")t.red=r;else if(s==="green")t.green=r;else if(s==="blue")t.blue=r;else if(s==="nearinfrared"||s==="nearinfrared_1"||s==="nir")t.nir=r;else if(i.maxWavelength&&i.minWavelength){const n=i.minWavelength,o=i.maxWavelength;t.blue==null&&n>=410&&n<=480&&o>=480&&o<=540?t.blue=r:t.green==null&&n>=490&&n<=560&&o>=560&&o<=610?t.green=r:t.red==null&&n>=595&&n<=670&&o>=660&&o<=730?t.red=r:t.nir==null&&n>=700&&n<=860&&o>=800&&o<=950&&(t.nir=r)}}return t}function KAe(e){let t="percent-clip";const{pixelType:r,dataType:i,histograms:s,statistics:n,multidimensionalInfo:o}=e,a=Tre.has(i)||i==="generic"&&o!=null;return r!=="u8"||i!=="processed"&&s!=null&&n!=null?r==="u8"||i==="elevation"||a?t="min-max":s!=null?t="percent-clip":n!=null&&(t="min-max"):t="none",t}function XAe(e,t,r,i){if(!F8(e,t))return null;const{attributeTable:s,statistics:n}=e,o=Ere(s,t),a=a_(s,"red"),l=a_(s,"green"),u=a_(s,"blue"),c=new X2,p=[],f=new Set,m=!!(a&&l&&u);if(s!=null)s.features.forEach(g=>{const b=g.attributes[o.name];if(!f.has(g.attributes[o.name])&&b!=null){f.add(b);const w=m&&(a.type==="single"||a.type==="double")&&(l.type==="single"||l.type==="double")&&(u.type==="single"||u.type==="double")&&!s.features.some(M=>M.attributes[a.name]>1||M.attributes[l.name]>1||M.attributes[u.name]>1),S=w?255:1;p.push(new Qm({value:g.attributes[o.name],label:g.attributes[o.name]+"",symbol:new Hl({style:"solid",outline:null,color:new Le(m?[g.attributes[a.name]*S,g.attributes[l.name]*S,g.attributes[u.name]*S,1]:[0,0,0,0])})}))}});else if(n?.[0])for(let g=n[0].min;g<=n[0].max;g++)p.push(new Qm({value:g,label:g.toString(),symbol:new Hl({style:"solid",outline:null,color:new Le([0,0,0,0])})}));if(p.sort((g,b)=>g.value&&typeof g.value.valueOf()=="string"?0:g.value>b.value?1:-1),!m){const g=kv(Vz,{numColors:p.length});p.forEach((b,w)=>b.symbol.color=new Le(g[w].slice(1,4))),c.colorRamp=Vz}return new M1({field:o.name,uniqueValueInfos:p,authoringInfo:c})}function Ere(e,t,r){let i;return e!=null?(i=t?e.fields.find(s=>t.toLowerCase()===s.name.toLowerCase()):QAe(e.fields),i||(r||(i=e.fields.find(s=>s.type==="string")),i||(i=a_(e,"value")))):i=new Uo({name:"value"}),i}function QAe(e){let t;for(let r=0;r<e.length;r++){const i=e[r].name.toLowerCase();if(e[r].type==="string"){if(i.startsWith("class")){t=e[r];break}t==null&&(i.endsWith("name")||i.endsWith("type"))&&(t=e[r])}}return t}function a_(e,t){return e==null?null:e.fields.find(r=>r.name.toLowerCase()===t)}function e$e(e){if(!j8(e))return null;let t;const{attributeTable:r,colormap:i}=e;if(r!=null){const s=a_(r,"value"),n=Ere(r,null,!0);n.type==="string"&&(t={},r.features.forEach(o=>{const a=o.attributes;t[a[s.name]]=n?a[n.name]:a[s.name]}))}return M8.createFromColormap(i,t)}const t$e=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);function r$e(e){if(!V8(e))return null;let t;if(e.statistics!=null&&e.statistics.length&&(e.dataType==="vector-magdir"||e.dataType==="vector-uv")){const{minMagnitude:s,maxMagnitude:n}=s$e(e.dataType,e.statistics);t=[new Jy({field:"Magnitude",minSize:10,maxSize:40,minDataValue:s,maxDataValue:n})]}const r=e.multidimensionalInfo!=null?t$e.get(e.multidimensionalInfo.variables[0].unit):void 0,i=new C8({visualVariables:t,inputUnit:r,rotationType:"geographic"});return i.visualVariables=[...i.sizeVariables,...i.rotationVariables],i}function zz(e){return{color:e.symbolLayers[0].material?.color,type:"esriSFS",style:"esriSFSSolid"}}function i$e(e){if(e.type==="uniqueValue"){const t=e.uniqueValueInfos;return t?.[0].symbol?.symbolLayers?.length&&(e.uniqueValueInfos=t?.map(i=>({value:i.value,label:i.label,symbol:i.symbol?zz(i.symbol):null}))),e}if(e.type==="classBreaks"){const t=e.classBreakInfos;return t[0].symbol?.symbolLayers?.length&&(e.classBreakInfos=t.map(i=>({classMinValue:i.classMinValue,classMaxValue:i.classMaxValue,label:i.label,symbol:i.symbol?zz(i.symbol):null}))),e}return e}function s$e(e,t){let r,i;if(e==="vector-magdir")r=t[0].min,i=t[0].max;else{const s=t[0].min,n=t[0].max,o=t[1].min,a=t[1].max;r=0,i=Math.max(Math.abs(s),Math.abs(o),Math.abs(n),Math.abs(a))}return{minMagnitude:r,maxMagnitude:i}}const w5=1;function Are(e,t=256){t=Math.min(t,256);const{size:r,counts:i}=e,s=new Uint8Array(r),n=i.reduce((c,p)=>c+p/t,0);let o=0,a=0,l=0,u=n;for(let c=0;c<r;c++)if(l+=i[c],!(c<r-1&&l+i[c+1]<u)){for(;o<t-1&&u<l;)o++,u+=n;for(let p=a;p<=c;p++)s[p]=o;a=c+1}for(let c=a;c<r;c++)s[c]=t-1;return s}function Gz(e){const{minCutOff:t,maxCutOff:r,gamma:i,pixelType:s,rounding:n}=e,o=e.outMin||0,a=e.outMax||255;if(!["u8","u16","s8","s16"].includes(s))return null;const l=t.length;let u,c,p=0;s==="s8"?p=-127:s==="s16"&&(p=-32767);let f=256;["u16","s16"].includes(s)&&(f=65536);const m=[],g=[],b=a-o;for(u=0;u<l;u++)g[u]=r[u]-t[u],m[u]=g[u]===0?0:b/g[u];let w;const S=[];let M,x,_;if(i&&i.length>=l){const I=$re(l,i);for(u=0;u<l;u++){for(_=[],c=0;c<f;c++)if(g[u]!==0)if(M=c+p,w=(M-t[u])/g[u],x=1,i[u]>1&&(x-=(1/b)**(w*I[u])),M<r[u]&&M>t[u]){const E=x*b*w**(1/i[u])+o;_[c]=n==="floor"?Math.floor(E):n==="round"?Math.round(E):E}else M>=r[u]?_[c]=a:_[c]=o;else _[c]=o;S[u]=_}}else for(u=0;u<l;u++){for(_=[],c=0;c<f;c++)if(M=c+p,M<=t[u])_[c]=o;else if(M>=r[u])_[c]=a;else{const I=(M-t[u])*m[u]+o;_[c]=n==="floor"?Math.floor(I):n==="round"?Math.round(I):I}S[u]=_}if(e.contrastOffset!=null){const I=n$e(e.contrastOffset,e.brightnessOffset);for(u=0;u<l;u++)for(_=S[u],c=0;c<f;c++)_[c]=I[_[c]]}return{lut:S,offset:p}}function n$e(e,t){const r=Math.min(Math.max(e,-100),100),i=Math.min(Math.max(t??0,-100),100),s=255,n=128;let o=0,a=0;const l=new Uint8Array(256);for(o=0;o<256;o++)r>0&&r<100?a=(200*o-100*s+2*s*i)/(2*(100-r))+n:r<=0&&r>-100?a=(200*o-100*s+2*s*i)*(100+r)/2e4+n:r===100?(a=200*o-100*s+(s+1)*(100-r)+2*s*i,a=a>0?s:0):r===-100&&(a=n),l[o]=a>s?s:a<0?0:a;return l}function o$e(e,t,r){const i=[];for(let s=0;s<t.length;s++){let n=0,o=0,a=0;"min"in t[s]?{min:n,max:o,avg:a}=t[s]:[n,o,a]=t[s];let l=a??0;e!=="u8"&&(l=255*(l-n)/(o-n)),i.push(a$e(l))}return i}function a$e(e){if(e<=0||e>=255)return w5;let t=0;e!==150&&(t=e<=150?45*Math.cos(.01047*e):17*Math.sin(.021*e));const r=255,i=e+t,s=Math.log(e/r),n=Math.log(i/r);if(n===0)return w5;const o=s/n;return isNaN(o)?w5:Math.min(9.9,Math.max(.01,o))}function l$e(e,t,r,i){let s=1/0,n=-1/0,o=0,a=0,l=0,u=0;const c=e.length,p=new Map,f=[];for(let A=0;A<c;A++){const C=e[A];if(!t||t[A]){f.push(C);const O=(p.get(C)??0)+1;p.set(C,O),O>u&&(u=O,l=C),s=C<s?C:s,n=C>n?C:n,o+=C,a++}}if(a===0)return{statistics:{min:0,max:0,avg:0,stddev:0,mode:0,median:0},histogram:null};const m=o/a;let g=0;for(let A=0;A<c;A++)t&&!t[A]||(g+=(e[A]-m)**2);const b=t?t.filter(A=>A).length:c,w=b<=1?0:Math.sqrt(g/(b-1));f.sort((A,C)=>A-C);const S=a>>>1,M={min:s,max:n,avg:m,stddev:w,mode:l,median:a%2?f[Math.floor(S)]:(f[S-1]+f[S])/2};if(["u8","s8","u4","u2","u1"].includes(r)){const A=n-s+1,C=new Uint32Array(A);for(let O=0;O<c;O++)t&&!t[O]||C[e[O]-s]++;return{statistics:M,histogram:{min:s-.5,max:n+.5,size:A,counts:C}}}const x=256,_=new Uint32Array(x),I=(n-s)/x;if(I===0)return{statistics:M,histogram:{min:s,max:n,size:1,counts:new Uint32Array(1).fill(a)}};const E=new Uint32Array(x+1);for(let A=0;A<c;A++)t&&!t[A]||E[Math.floor((e[A]-s)/I)]++;for(let A=0;A<x-1;A++)_[A]=E[A];return _[x-1]=E[x-1]+E[x],{statistics:M,histogram:{min:s,max:n,size:x,counts:_}}}function eat(e){const{pixels:t,mask:r,pixelType:i,bandMasks:s}=e,n=t.map((o,a)=>l$e(o,s?.[a]??r,i));return{statistics:n.map(({statistics:o})=>o),histograms:n.map(({histogram:o})=>o)}}function u$e(e){if(!e?.pixels?.length)return null;const{pixels:t,mask:r,bandMasks:i,pixelType:s}=e,n=e.width*e.height,o=t.length,a=[],l=[],u=256;let c,p,f,m;for(let g=0;g<o;g++){f=new Uint32Array(u);const b=t[g],w=i?.[g]??r;if(s==="u8"){if(c=255,p=0,w){for(let D=0;D<n;D++)if(w[D]){const N=b[D];c=N<c?N:c,p=N>p?N:p,f[N]++}}else for(let D=0;D<n;D++){const N=b[D];c=N<c?N:c,p=N>p?N:p,f[N]++}f=f.slice(c,p+1)}else{let D=!1;e.statistics||(e.updateStatistics(),D=!0);const N=e.statistics;c=N[g].minValue,p=N[g].maxValue;const U=(p-c)/u;if(U===0){!N||e.validPixelCount||D||e.updateStatistics();const J=(e.validPixelCount||e.width*e.height)/u;for(let y=0;y<u;y++)f[y]=Math.round(J*(y+1))-Math.round(J*y)}else{m=new Uint32Array(u+1);for(let J=0;J<n;J++)w&&!w[J]||m[Math.floor((b[J]-c)/U)]++;for(let J=0;J<u-1;J++)f[J]=m[J];f[u-1]=m[u-1]+m[u]}}const S=s==="u8"?c-.5:c,M=s==="u8"?p+.5:p;a.push({min:S,max:M,size:f.length,counts:f});let x=0,_=0,I=0;for(let D=0;D<f.length;D++)x+=f[D],_+=D*f[D];const E=_/x;for(let D=0;D<f.length;D++)I+=f[D]*(D-E)**2;const A=Math.sqrt(I/(x-1)),C=(M-S)/f.length,O=(E+(s==="u8"?0:.5))*C+c,R=A*C;l.push({min:c,max:p,avg:O,stddev:R})}return{statistics:l,histograms:a}}function tat(e){const t=[];for(let r=0;r<e.length;r++){const{min:i,max:s,size:n,counts:o}=e[r];let a=0,l=0;for(let g=0;g<n;g++)a+=o[g],l+=g*o[g];const u=l/a;let c=0;for(let g=0;g<n;g++)c+=o[g]*(g-u)**2;const p=(s-i)/n,f=(u+.5)*p+i,m=Math.sqrt(c/(a-1))*p;t.push({min:i,max:s,avg:f,stddev:m})}return t}function lb(e,t){const{pixelBlock:r,bandIds:i,returnHistogramLut:s,rasterInfo:n}=t;let o=null,a=null,l=e.stretchType;if(typeof l=="number"&&(l=zte[l]),e.dra)if(l==="minMax"&&r?.statistics)o=r.statistics.map(R=>[R.minValue,R.maxValue,0,0]);else{const R=u$e(r);o=R!=null?R.statistics:null,a=R!=null?R.histograms:null}else o=e.statistics?.length?e.statistics:n.statistics,a="histograms"in e?e.histograms:void 0,a||(a=n.histograms);l!=="percentClip"&&l!=="histogramEqualization"||a?.length||(l="minMax");const u=o?.length||a?.length||n.bandCount,c=[],p=[];let f,m,g,b,w,S,M,x,_;o&&!Array.isArray(o[0])&&(o=o.map(R=>[R.min,R.max,R.avg,R.stddev]));const[I,E]=$1(n.pixelType);if(!o?.length){for(o=[],x=0;x<u;x++)o.push([I,E,1,1]);l==="standardDeviation"&&(l="minMax")}switch(l){case"none":for(x=0;x<u;x++)c[x]=I,p[x]=E;break;case"minMax":for(x=0;x<u;x++){const R=o[x];c[x]=R[0],p[x]=R[1]}break;case"standardDeviation":{const{numberOfStandardDeviations:R=2}=e;for(x=0;x<u;x++){const D=o[x];c[x]=D[2]-R*D[3],p[x]=D[2]+R*D[3],c[x]<D[0]&&(c[x]=D[0]),p[x]>D[1]&&(p[x]=D[1])}}break;case"histogramEqualization":for(gd(a),x=0;x<u;x++)c[x]=a[x].min,p[x]=a[x].max;break;case"percentClip":for(gd(a),x=0;x<a.length;x++){for(f=a[x],w=new Uint32Array(f.size),b=[...f.counts],b.length>=20&&(b[0]=b[1]=b[2]=b[b.length-1]=b[b.length-2]=0),g=0,m=(f.max-f.min)/f.size,M=f.min===-.5&&m===1?.5:0,_=0;_<f.size;_++)g+=b[_],w[_]=g;for(S=(e.minPercent||0)*g/100,c[x]=f.min+M,_=0;_<f.size;_++)if(w[_]>S){c[x]=f.min+m*(_+M);break}for(S=(1-(e.maxPercent||0)/100)*g,p[x]=f.max+M,_=f.size-2;_>=0;_--)if(w[_]<S){p[x]=f.min+m*(_+2-M);break}if(p[x]<c[x]){const R=c[x];c[x]=p[x],p[x]=R}}break;default:for(x=0;x<u;x++){const R=o[x];c[x]=R[0],p[x]=R[1]}}let A,C,O;return l==="histogramEqualization"?(gd(a),C=a[0].size||256,A=0,s&&(O=a.map(R=>Are(R)))):(C=e.max||255,A=e.min||0),c$e({minCutOff:c,maxCutOff:p,outMax:C,outMin:A,histogramLut:O},i)}function c$e(e,t){if(t==null||t.length===0)return e;const r=Math.max.apply(null,t),{minCutOff:i,maxCutOff:s,outMin:n,outMax:o,histogramLut:a}=e;return i.length===t.length||i.length<=r?e:{minCutOff:t.map(l=>i[l]),maxCutOff:t.map(l=>s[l]),histogramLut:a?t.map(l=>a[l]):null,outMin:n,outMax:o}}function $re(e,t){const r=new Float32Array(e);for(let i=0;i<e;i++)t[i]>1?t[i]>2?r[i]=6.5+(t[i]-2)**2.5:r[i]=6.5+100*(2-t[i])**4:r[i]=1;return r}function _5(e,t){if(!e?.pixels?.length)return e;const{mask:r,bandMasks:i,width:s,height:n,pixels:o}=e,{minCutOff:a,maxCutOff:l,gamma:u}=t,c=t.outMin||0,p=t.outMax||255,f=s*n,m=t.outputPixelType||"u8",g=e.pixels.map(()=>It.createEmptyBand(m,f)),b=g.length,w=p-c,S=[],M=[];for(let A=0;A<b;A++)M[A]=l[A]-a[A],S[A]=M[A]===0?0:w/M[A];const x=m.startsWith("u")||m.startsWith("s"),_=u&&u.length>=b,I=!!t.isRenderer;if(_){const A=$re(b,u);for(let C=0;C<b;C++){const O=i?.[C]??r;for(let R=0;R<f;R++)if(O==null||O[R]){if(M[C]===0){g[C][R]=c;continue}const D=o[C][R],N=(D-a[C])/M[C];let U=1;if(u[C]>1&&(U-=(1/w)**(N*A[C])),D<l[C]&&D>a[C]){const J=U*w*N**(1/u[C])+c;g[C][R]=I?Math.floor(J):x?Math.round(J):J}else D>=l[C]?g[C][R]=p:g[C][R]=c}}}else for(let A=0;A<b;A++){const C=i?.[A]??r;for(let O=0;O<f;O++)if(C==null||C[O]){const R=o[A][O];if(R<l[A]&&R>a[A]){const D=(R-a[A])*S[A]+c;g[A][O]=I?Math.floor(D):x?Math.round(D):D}else R>=l[A]?g[A][O]=p:g[A][O]=c}}const E=new It({width:s,height:n,mask:r,bandMasks:i,pixels:g,pixelType:m});return E.updateStatistics(),E}const cn=1,O0=1/111e3;function Cre(e){let{altitude:t,azimuth:r}=e;const{hillshadeType:i,pixelSizePower:s=1,pixelSizeFactor:n=1,scalingType:o,isGCS:a,resolution:l}=e,u=i==="multi-directional"?2*e.zFactor:e.zFactor,{x:c,y:p}=l;let f=u/(8*c),m=u/(8*p);if(a&&u>.001&&(f/=O0,m/=O0),o==="adjusted")if(a){const N=c*O0,U=p*O0;f=(u+N**s*n)/(8*N),m=(u+U**s*n)/(8*U)}else f=(u+c**s*n)/(8*c),m=(u+p**s*n)/(8*p);let g=(90-t)*Math.PI/180,b=Math.cos(g),w=(360-r+90)*Math.PI/180,S=Math.sin(g)*Math.cos(w),M=Math.sin(g)*Math.sin(w);const x=[315,270,225,360,180,0],_=[60,60,60,60,60,90],I=new Float32Array([3,5,3,2,1,4]),E=I.reduce((N,U)=>N+U),A=I.map(N=>N/E),C=i==="multi-directional"?x.length:1,O=new Float32Array(6),R=new Float32Array(6),D=new Float32Array(6);if(i==="multi-directional")for(let N=0;N<C;N++)t=_[N],r=x[N],g=(90-t)*Math.PI/180,b=Math.cos(g),w=(360-r+90)*Math.PI/180,S=Math.sin(g)*Math.cos(w),M=Math.sin(g)*Math.sin(w),O[N]=b,R[N]=S,D[N]=M;else O.fill(b),R.fill(S),D.fill(M);return{resolution:l,factor:[f,m],sinZcosA:S,sinZsinA:M,cosZ:b,sinZcosAs:R,sinZsinAs:D,cosZs:O,weights:A,hillshadeType:["traditional","multi-directional"].indexOf(i)}}function QA(e,t){const{width:r,height:i}=e,s=r*i,n=new Uint8Array(s),o=e.mask!=null;let a;if(o){a=new Uint8Array(e.mask);for(let E=0;E<a.length;E++)a[E]&&(n[E]=1,a[E]=1)}const l=e.pixels[0],u=new Float32Array(s),c=new Float32Array(s);let p,f=0;if(t){const{resolution:E}=t,A=E?(E.x+E.y)/2:1;f=200*t.zFactor/(A*A),p=new Float32Array(s)}const m=t?.curvatureType;let g,b,w,S,M,x,_,I;for(let E=cn;E<i-cn;E++){const A=E*r;for(let C=cn;C<r-cn;C++){const O=A+C;if(!a||a[O]!==0){if(a){if(a[O-r-1]+a[O-r]+a[O-r+1]+a[O-1]+a[O+1]+a[O+r-1]+a[O+r]+a[O+r+1]<7){n[O]=0;continue}g=a[O-r-1]?l[O-r-1]:l[O],b=a[O-r]?l[O-r]:l[O],w=a[O-r+1]?l[O-r+1]:l[O],S=a[O-1]?l[O-1]:l[O],M=a[O+1]?l[O+1]:l[O],x=a[O+r-1]?l[O+r-1]:l[O],_=a[O+r]?l[O+r]:l[O],I=a[O+r+1]?l[O+r+1]:l[O]}else g=l[O-r-1],b=l[O-r],w=l[O-r+1],S=l[O-1],M=l[O+1],x=l[O+r-1],_=l[O+r],I=l[O+r+1];if(u[O]=w+M+M+I-(g+S+S+x),c[O]=x+_+_+I-(g+b+b+w),p!=null){const R=l[O],D=.5*(S+M)-R,N=.5*(b+_)-R;if(m==="standard")p[O]=-f*(D+N);else{const U=(-g+w+x-I)/4,J=(-S+M)/2,y=(b-_)/2,T=J*J,$=y*y,P=T+$;P&&(p[O]=m==="profile"?f*(D*T+N*$+U*J*y)/P:-f*(D*$+N*T-U*J*y)/P)}}}}}return{outMask:o?n:null,dzxs:u,dzys:c,curvatures:p}}function e$(e,t,r){for(let i=0;i<r;i++)e[i*t]=e[i*t+1],e[(i+1)*t-1]=e[(i+1)*t-2];for(let i=1;i<t-1;i++)e[i]=e[i+t],e[i+(r-1)*t]=e[i+(r-2)*t]}function h$e(e,t){if(!Mr(e))return e;const{factor:r,sinZcosA:i,sinZsinA:s,cosZ:n,sinZcosAs:o,sinZsinAs:a,cosZs:l,weights:u}=Cre(t),[c,p]=r,f=t.hillshadeType==="traditional",{width:m,height:g}=e,b=new Uint8Array(m*g),{dzxs:w,dzys:S,outMask:M}=QA(e);for(let x=cn;x<g-cn;x++){const _=x*m;for(let I=cn;I<m-cn;I++){const E=_+I;if(!M||M[E]){const A=w[E]*c,C=S[E]*p,O=Math.sqrt(1+A*A+C*C);let R=0;if(f){let D=255*(n+s*C-i*A)/O;D<0&&(D=0),R=D}else{const D=a.length;for(let N=0;N<D;N++){let U=255*(l[N]+a[N]*C-o[N]*A)/O;U<0&&(U=0),R+=U*u[N]}}b[E]=255&R}}}return e$(b,m,g),new It({width:m,height:g,pixels:[b],mask:M,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[new cS(0,255)]})}function p$e(e,t,r,i){if(!Mr(e)||!Mr(t))return;const{min:s,max:n}=i,o=e.pixels[0],{pixels:a,mask:l}=t,u=a[0],c=255.00001/(n-s),p=new Uint8ClampedArray(u.length),f=new Uint8ClampedArray(u.length),m=new Uint8ClampedArray(u.length),g=r.length-1;for(let b=0;b<u.length;b++){if(l&&l[b]===0)continue;const w=Math.floor((u[b]-s)*c),[S,M]=r[w<0?0:w>g?g:w],x=o[b],_=x*M,I=_*(1-Math.abs(S%2-1)),E=x-_;switch(Math.floor(S)){case 0:p[b]=_+E,f[b]=I+E,m[b]=E;break;case 1:p[b]=I+E,f[b]=_+E,m[b]=E;break;case 2:p[b]=E,f[b]=_+E,m[b]=I+E;break;case 3:p[b]=E,f[b]=I+E,m[b]=_+E;break;case 4:p[b]=I+E,f[b]=E,m[b]=_+E;break;case 5:case 6:p[b]=_+E,f[b]=E,m[b]=I+E}}e.pixels=[p,f,m],e.updateStatistics()}function rat(e,t){if(!Mr(e))return e;const r=t.zFactor,i=t.pixelSizePower??1,s=t.pixelSizeFactor??1,n=t.slopeType,o=t.isGCS,{x:a,y:l}=t.resolution;let u=r/(8*a),c=r/(8*l);o&&Math.abs(r-1)<1e-4&&(u/=O0,c/=O0),n==="adjusted"&&(u=(r+a**i*s)/(8*a),c=(r+l**i*s)/(8*l));const{dzxs:p,dzys:f,outMask:m}=QA(e),{width:g,height:b}=e,w=new Float32Array(g*b);for(let M=cn;M<b-cn;M++){const x=M*g;for(let _=cn;_<g-cn;_++){const I=x+_;if(!m||m[I]){const E=p[I]*u,A=f[I]*c,C=Math.sqrt(E*E+A*A);w[x+_]=n==="percent-rise"?100*C:57.2957795*Math.atan(C)}}}e$(w,g,b);const S=new It({width:g,height:b,pixels:[w],mask:m,pixelType:"f32",validPixelCount:e.validPixelCount});return S.updateStatistics(),S}function iat(e,t={}){if(!Mr(e))return e;const{resolution:r}=t,i=r?1/r.x:1,s=r?1/r.y:1,{dzxs:n,dzys:o,outMask:a}=QA(e),{width:l,height:u}=e,c=new Float32Array(l*u);for(let p=cn;p<u-cn;p++){const f=p*l;for(let m=cn;m<l-cn;m++){const g=f+m;if(!a||a[g]){const b=n[g]*i,w=o[g]*s;let S=-1;b===0&&w===0||(S=90-57.29578*Math.atan2(w,-b),S<0&&(S+=360),S===360?S=0:S>360&&(S%=360)),c[f+m]=S}}}return e$(c,l,u),new It({width:l,height:u,pixels:[c],mask:a,pixelType:"f32",validPixelCount:e.validPixelCount,statistics:[new cS(-1,360)]})}function sat(e,t){if(!Mr(e))return e;const{curvatures:r,outMask:i}=QA(e,t),{width:s,height:n}=e;e$(r,s,n);const o=new It({width:s,height:n,pixels:[r],mask:i,pixelType:"f32",validPixelCount:e.validPixelCount});return o.updateStatistics(),o}let ym=class extends ue{constructor(t){super(t)}bind(){const{rendererJSON:t}=this;if(!t)return{success:!1};let r;switch(this.lookup={rendererJSON:{}},t.type){case"uniqueValue":r=this._updateUVRenderer(t);break;case"rasterColormap":r=this._updateColormapRenderer(t);break;case"rasterStretch":r=this._updateStretchRenderer(t);break;case"classBreaks":r=this._updateClassBreaksRenderer(t);break;case"rasterShadedRelief":r=this._updateShadedReliefRenderer(t);break;case"vectorField":r=this._updateVectorFieldRenderer();break;case"flowRenderer":r=this._updateFlowRenderer()}return r}symbolize(t){let r=t?.pixelBlock;if(!Bz(r))return r;if(t.simpleStretchParams&&this.rendererJSON.type==="rasterStretch")return this.simpleStretch(r,t.simpleStretchParams);try{let i;switch(r.pixels.length>3&&(r=r.extractBands(t.bandIds??[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":i=this._symbolizeColormap(r);break;case"classBreaks":i=this._symbolizeClassBreaks(r);break;case"rasterStretch":i=this._symbolizeStretch(r,t.bandIds);break;case"rasterShadedRelief":{const s=t.extent,n=s.spatialReference.isGeographic,o={x:(s.xmax-s.xmin)/r.width,y:(s.ymax-s.ymin)/r.height};i=this._symbolizeShadedRelief(r,{isGCS:n,resolution:o});break}}return i}catch(i){return be.getLogger(this).error("symbolize",i.message),r}}simpleStretch(t,r){if(!Bz(t))return t;try{return t.pixels.length>3&&(t=t.extractBands([0,1,2])),_5(t,{...r,isRenderer:!0})}catch(i){return be.getLogger(this).error("symbolize",i.message),t}}generateWebGLParameters(t){if(["uniqueValue","rasterColormap","classBreaks"].includes(this.rendererJSON.type)){const{indexedColormap:a,offset:l}=this.lookup.colormapLut||{};return{colormap:a,colormapOffset:l,type:"lut"}}const{pixelBlock:r,isGCS:i,resolution:s,bandIds:n}=t,{rendererJSON:o}=this;return o.type==="rasterStretch"?this._generateStretchWebGLParams(r,o,n):o.type==="rasterShadedRelief"?this._generateShadedReliefWebGLParams(o,i,s??void 0):o.type==="vectorField"?this._generateVectorFieldWebGLParams(o):null}_isLUTChanged(t){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const r=this.rendererJSON.colorRamp;return t?JSON.stringify(r)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolizeColormap(t){return this._isLUTChanged()&&!this.bind().success?t:h5(t,this.lookup.colormapLut)}_symbolizeClassBreaks(t){const{canUseIndexedLUT:r}=this._analyzeClassBreaks(this.rendererJSON);return this._isLUTChanged()&&!this.bind().success?t:r?h5(t,this.lookup.colormapLut):BIe(t,this.lookup.remapLut??[])}_symbolizeStretch(t,r){const{rasterInfo:i}=this,{pixelType:s,bandCount:n}=i,o=this.rendererJSON,a=["u8","u16","s8","s16"].includes(s);let l,u;const{dra:c}=o,{gamma:p}=this.lookup;if(o.stretchType==="histogramEqualization"){const f=c?null:this.lookup?.histogramLut,m=lb(o,{rasterInfo:i,pixelBlock:t,bandIds:r,returnHistogramLut:!f}),g=_5(t,{...m,gamma:p,isRenderer:!0});u=yz(g,{lut:c?m.histogramLut:f,offset:0})}else if(a){if(c){const f=lb(o,{rasterInfo:i,pixelBlock:t,bandIds:r});l=Gz({pixelType:s,...f,gamma:p,rounding:"floor"})}else if(this._isLUTChanged()){if(!this.bind().success)return t;l=this.lookup?this.lookup.stretchLut:null}else l=this.lookup?this.lookup.stretchLut:null;if(!l)return t;n>1&&r!=null&&r.length===t?.pixels.length&&l?.lut.length===n&&(l={lut:r.map(f=>l.lut[f]),offset:l.offset}),u=yz(t,l)}else{const f=lb(o,{rasterInfo:i,pixelBlock:t,bandIds:r});u=_5(t,{...f,gamma:p,isRenderer:!0})}if(o.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return t;u=h5(u,this.lookup?.colormapLut)}return u}_symbolizeShadedRelief(t,r){const i=this.rendererJSON,s={...i,...r},n=h$e(t,s);if(!i.colorRamp)return n;let o;if(this._isLUTChanged(!0)){if(!this.bind().success)return n;o=this.lookup?this.lookup.hsvMap:null}else o=this.lookup?this.lookup.hsvMap:null;if(!o)return n;const a=this.rasterInfo.statistics?.[0]??{min:0,max:8e3};return p$e(n,t,o,a),n}_isVectorFieldData(){const{bandCount:t,dataType:r}=this.rasterInfo;return t===2&&(r==="vector-magdir"||r==="vector-uv")}_updateVectorFieldRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; VectorFieldRenderer only supports "vector-magdir" and "vector-uv".`}}_updateFlowRenderer(){return this._isVectorFieldData()?{success:!0}:{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; FlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(t){const{bandCount:r,attributeTable:i,pixelType:s}=this.rasterInfo,n=t.field1;if(!n)return{success:!1,error:"Unsupported renderer; missing UniqueValueRenderer.field."};const o=t.defaultSymbol,a=r===1&&["u8","s8"].includes(s);if(!F8(this.rasterInfo,n)&&!a)return{success:!1,error:"Unsupported data; UniqueValueRenderer is only supported on single band data with a valid raster attribute table."};const l=[];if(i!=null){const c=i.fields.find(p=>p.name.toLowerCase()==="value");if(!c)return{success:!1,error:"Unsupported data; the data's raster attribute table does not have a value field."};i.features.forEach(p=>{const f=t.uniqueValueInfos?.find(g=>String(g.value)===String(p.attributes[n])),m=f?.symbol?.color;m?l.push([p.attributes[c.name]].concat(m)):o&&l.push([p.attributes[c.name]].concat(o.color))})}else{if(n.toLowerCase()!=="value")return{success:!1,error:'Unsupported renderer; UniqueValueRenderer.field must be "Value" when raster attribute table is not available.'};t.uniqueValueInfos?.forEach(c=>{const p=c?.symbol?.color;p?l.push([parseInt(""+c.value,10)].concat(p)):o&&l.push([parseInt(""+c.value,10)].concat(o?.color))})}if(l.length===0)return{success:!1,error:"Invalid UniqueValueRenderer. Cannot find matching records in the raster attribute table."};const u=sb({colormap:l});return this.lookup={rendererJSON:t,colormapLut:u},this.canRenderInWebGL=S5(u?.indexedColormap),{success:!0}}_updateColormapRenderer(t){if(!j8(this.rasterInfo))return{success:!1,error:"Unsupported data; the data source does not have a colormap."};const r=t.colormapInfos.map(s=>[s.value].concat(s.color)).sort((s,n)=>s[0]-n[0]);if(!r||r.length===0)return{success:!1,error:"Unsupported renderer; ColormapRenderer must have meaningful colormapInfos."};const i=sb({colormap:r});return this.lookup={rendererJSON:t,colormapLut:i},this.canRenderInWebGL=S5(i?.indexedColormap),{success:!0}}_updateShadedReliefRenderer(t){if(!Mre(this.rasterInfo))return{success:!1,error:`Unsupported data type "${this.rasterInfo.dataType}"; ShadedReliefRenderer only supports "elevation", or single band float/s16 data.`};if(t.colorRamp){const r=kv(t.colorRamp,{interpolateAlpha:!0}),i=sb({colormap:r}),s=[],n=i.indexedColormap;for(let o=0;o<n.length;o+=4){const a=gI({r:n[o],g:n[o+1],b:n[o+2]});s.push([a.h/60,a.s/100,255*a.v/100])}this.lookup={rendererJSON:t,colormapLut:i,hsvMap:s}}else this.lookup=null;return this.canRenderInWebGL=!0,{success:!0}}_analyzeClassBreaks(t){const{attributeTable:r,pixelType:i}=this.rasterInfo,s=r!=null?r.fields.find(a=>a.name.toLowerCase()==="value"):null,n=r!=null?r.fields.find(a=>a.name.toLowerCase()===t.field.toLowerCase()):null,o=s!=null&&n!==null;return{canUseIndexedLUT:["u8","u16","s8","s16"].includes(i)||o,tableValueField:s,tableBreakField:n}}_updateClassBreaksRenderer(t){const{attributeTable:r}=this.rasterInfo,{canUseIndexedLUT:i,tableValueField:s,tableBreakField:n}=this._analyzeClassBreaks(t),o=t.classBreakInfos;if(!o?.length)return{success:!1,error:"Unsupported renderer; missing or invalid ClassBreaksRenderer.classBreakInfos."};const a=o.sort((f,m)=>f.classMaxValue-m.classMaxValue),l=a[a.length-1];let u=t.minValue;if(!i){const f=[];for(let m=0;m<a.length;m++)f.push({value:a[m].classMinValue??u,mappedColor:a[m].symbol.color}),u=a[m].classMaxValue;return f.push({value:l.classMaxValue,mappedColor:l.symbol.color}),this.lookup={rendererJSON:t,remapLut:f},this.canRenderInWebGL=!1,{success:!0}}const c=[];if(r!=null&&s!=null&&n!==null&&s!==n){const f=s.name,m=n.name,g=a[a.length-1],{classMaxValue:b}=g;u=t.minValue;for(const w of r.features){const S=w.attributes[f],M=w.attributes[m],x=M===b?g:M<u?null:a.find(({classMaxValue:_})=>_>M);x&&c.push([S].concat(x.symbol.color))}}else{u=Math.floor(t.minValue);for(let f=0;f<a.length;f++){const m=a[f];for(let g=u;g<m.classMaxValue;g++)c.push([g].concat(m.symbol.color));u=Math.ceil(m.classMaxValue)}l.classMaxValue===u&&c.push([l.classMaxValue].concat(l.symbol.color))}const p=sb({colormap:c,fillUnspecified:!1});return this.lookup={rendererJSON:t,colormapLut:p},this.canRenderInWebGL=S5(p?.indexedColormap),{success:!0}}_updateStretchRenderer(t){let{stretchType:r,dra:i}=t;if(!(r==="none"||t.statistics?.length||m$e(this.rasterInfo.statistics)||i))return{success:!1,error:"Unsupported renderer; StretchRenderer.statistics is required when dynamic range adjustment is not used."};const s=t.histograms||this.rasterInfo.histograms;!f$e(t.stretchType)||s?.length||i||(r="minMax");const{computeGamma:n,useGamma:o,colorRamp:a}=t;let{gamma:l}=t;if(o&&n&&!l?.length){const p=t.statistics?.length?t.statistics:this.rasterInfo.statistics;l=o$e(this.rasterInfo.pixelType,p)}const u=this.rasterInfo.pixelType,c=!i&&["u8","u16","s8","s16"].includes(u);if(r==="histogramEqualization"){const p=s.map(f=>Are(f));this.lookup={rendererJSON:t,histogramLut:p}}else if(c){const p=lb(t,{rasterInfo:this.rasterInfo}),f=Gz({pixelType:u,...p,gamma:o?l:null,rounding:"floor"});this.lookup={rendererJSON:t,stretchLut:f}}if(a&&!y$e(a)){const p=kv(a,{interpolateAlpha:!0});this.lookup||(this.lookup={rendererJSON:t}),this.lookup.colormapLut=sb({colormap:p}),this.lookup.rendererJSON=t}return this.lookup.gamma=o&&l?.length?l:null,this.canRenderInWebGL=!0,{success:!0}}_generateStretchWebGLParams(t,r,i){let s=null,n=null;const o=this.lookup?.colormapLut;r.colorRamp&&o&&(s=o.indexedColormap,n=o.offset),r.stretchType==="histogramEqualization"&&(r={...r,stretchType:"minMax"});const{gamma:a}=this.lookup,l=!(!r.useGamma||!a?.some(_=>_!==1)),{minCutOff:u,maxCutOff:c,outMin:p,outMax:f}=lb(r,{rasterInfo:this.rasterInfo,pixelBlock:t,bandIds:i});let m=0;t!=null&&(m=t.getPlaneCount(),m===2&&((t=t.clone()).statistics=[t.statistics[0]],t.pixels=[t.pixels[0]]));const{bandCount:g}=this.rasterInfo,b=Math.min(3,i?.length||m||g,g),w=new Float32Array(b),S=s||l?1:255;let M;for(M=0;M<u.length;M++)w[M]=c[M]===u[M]?0:(f-p)/(c[M]-u[M])/S;const x=new Float32Array(b);if(l&&a)for(M=0;M<b;M++)a[M]>1?a[M]>2?x[M]=6.5+(a[M]-2)**2.5:x[M]=6.5+100*(2-a[M])**4:x[M]=1;return{bandCount:b,outMin:p/S,outMax:f/S,minCutOff:u,maxCutOff:c,factor:w,useGamma:l,gamma:l?a:[1,1,1],gammaCorrection:l?x:[1,1,1],colormap:s,colormapOffset:n,stretchType:r.stretchType,type:"stretch"}}_generateShadedReliefWebGLParams(t,r=!1,i={x:0,y:0}){let s=null,n=null;const o=this.lookup?.colormapLut;t.colorRamp&&o&&(s=o.indexedColormap,n=o.offset);const a={...t,isGCS:r,resolution:i},l=Cre(a),u=this.rasterInfo.statistics?.[0];return{...l,minValue:u?.min??0,maxValue:u?.max??8e3,hillshadeType:t.hillshadeType==="traditional"?0:1,type:"hillshade",colormap:s,colormapOffset:n}}_generateVectorFieldWebGLParams(t){const{style:r,inputUnit:i,outputUnit:s,visualVariables:n,symbolTileSize:o,flowRepresentation:a}=t;let l;const u=this.rasterInfo.statistics?.[0].min??0,c=this.rasterInfo.statistics?.[0].max??50,p=n?.find(M=>M.type==="sizeInfo")??{type:"sizeInfo",field:"Magnitude",maxDataValue:c,maxSize:.8*o,minDataValue:u,minSize:.2*o},f=p.minDataValue??u,m=p.maxDataValue??c,g=p.maxSize!=null&&p.minSize!=null?[p.minSize/o,p.maxSize/o]:[.2,.8];if(r==="wind_speed"){const M=(g[0]+g[1])/2;g[0]=g[1]=M}const b=f!=null&&m!=null?[f,m]:null;if(r==="classified_arrow")if(f!=null&&m!=null&&p!=null){l=[];const M=(p.maxDataValue-p.minDataValue)/5;for(let x=0;x<6;x++)l.push(p.minDataValue+M*x)}else l=[0,1e-6,3.5,7,10.5,14];const w=a==="flow_to"==(r==="ocean_current_kn"||r==="ocean_current_m")?0:Math.PI,S=n?.find(M=>M.type==="rotationInfo");return{breakValues:l,dataRange:b,inputUnit:i,outputUnit:s,symbolTileSize:o,symbolPercentRange:g,style:r||"single_arrow",rotation:w,rotationType:this.rasterInfo.storageInfo?.tileInfo&&this.rasterInfo.dataType==="vector-uv"?"geographic":S?.rotationType||t.rotationType,type:"vectorField"}}};h([d({json:{write:!0}})],ym.prototype,"rendererJSON",void 0),h([d({type:YA,json:{write:!0}})],ym.prototype,"rasterInfo",void 0),h([d({json:{write:!0}})],ym.prototype,"lookup",void 0),h([d()],ym.prototype,"canRenderInWebGL",void 0),ym=h([j("esri.renderers.support.RasterSymbolizer")],ym);const d$e=ym;function S5(e){return!!e?.length&&e.length<=16384}function f$e(e){return e==="percentClip"||e==="histogramEqualization"}function m$e(e){return e!=null&&e.length>0&&e[0].min!=null&&e[0].max!=null}function Bz(e){return Mr(e)&&e.validPixelCount!==0}function y$e(e){return e.type==="algorithmic"&&["0,0,0,255","0,0,0"].includes(e.fromColor.join(","))&&["255,255,255,255","255,255,255"].includes(e.toColor.join(","))}let Cp=class extends Yt(ue){constructor(){super(...arguments),this.fromGeometry=null,this.toGeometry=null,this.objectIds=null,this.where=null,this.maxCount=null}};h([d({type:je,json:{read:!0}})],Cp.prototype,"fromGeometry",void 0),h([d({type:je,json:{read:!0,write:!0}})],Cp.prototype,"toGeometry",void 0),h([d({json:{write:!0}})],Cp.prototype,"objectIds",void 0),h([d({type:String,json:{write:!0}})],Cp.prototype,"where",void 0),h([d({type:Number,json:{write:!0}})],Cp.prototype,"maxCount",void 0),Cp=h([j("esri.rest.support.FindImagesParameters")],Cp);const g$e=Cp,Ore=e=>{let t=class extends e{constructor(){super(...arguments),this.make=null,this.model=null,this.focalLength=null,this.pixelSize=null,this.rows=null,this.cols=null}};return h([d({json:{write:!0}})],t.prototype,"make",void 0),h([d({json:{write:!0}})],t.prototype,"model",void 0),h([d({json:{write:!0}})],t.prototype,"focalLength",void 0),h([d({json:{write:!0}})],t.prototype,"pixelSize",void 0),h([d({json:{write:!0}})],t.prototype,"rows",void 0),h([d({json:{write:!0}})],t.prototype,"cols",void 0),t=h([j("esri.rest.support.CameraInfoMixin")],t),t};let yl=class extends Ore(ue){constructor(){super(...arguments),this.id=null,this.referenceUri=null,this.acquisitionDate=null,this.cameraID=null,this.center=null,this.perspectiveCenter=null,this.orientation=null}writeAcquisitionDate(t,r){r.acquisitionDate=t?.getTime()}};h([d({json:{write:!0}})],yl.prototype,"id",void 0),h([d({json:{name:"uri",write:!0}})],yl.prototype,"referenceUri",void 0),h([d({type:Date,json:{write:!0}})],yl.prototype,"acquisitionDate",void 0),h([ge("acquisitionDate")],yl.prototype,"writeAcquisitionDate",null),h([d({json:{write:!0}})],yl.prototype,"cameraID",void 0),h([d({type:je,json:{write:!0}})],yl.prototype,"center",void 0),h([d({type:je,json:{write:!0}})],yl.prototype,"perspectiveCenter",void 0),h([d({json:{write:!0}})],yl.prototype,"orientation",void 0),yl=h([j("esri.rest.support.ImageInspectionInfo")],yl);const v$e=yl;let UT=class extends ue{constructor(){super(...arguments),this.images=null}};h([d({type:[v$e],json:{write:!0}})],UT.prototype,"images",void 0),UT=h([j("esri.rest.support.FindImagesResult")],UT);const b$e=UT;var rk;let gm=rk=class extends ue{constructor(e){super(e),this.angleNames=null,this.point=null,this.spatialReference=null,this.rasterId=null}clone(){return new rk(Z({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))}};h([d({type:[String],json:{name:"angleName",write:!0}})],gm.prototype,"angleNames",void 0),h([d({type:je,json:{write:!0}})],gm.prototype,"point",void 0),h([d({type:Fe,json:{write:!0}})],gm.prototype,"spatialReference",void 0),h([d({type:St,json:{write:!0}})],gm.prototype,"rasterId",void 0),gm=rk=h([j("esri.rest.support.ImageAngleParameters")],gm);const w$e=gm;let t0=class extends ue{constructor(t){super(t),this.north=null,this.up=null,this.spatialReference=null}};h([d({type:Number,json:{write:!0}})],t0.prototype,"north",void 0),h([d({type:Number,json:{write:!0}})],t0.prototype,"up",void 0),h([d({type:Fe,json:{write:!0}})],t0.prototype,"spatialReference",void 0),t0=h([j("esri.rest.support.ImageAngleResult")],t0);const _$e=t0,Na=new wt({esriMensurationPoint:"point",esriMensurationCentroid:"centroid",esriMensurationDistanceAndAngle:"distance-and-angle",esriMensurationAreaAndPerimeter:"area-and-perimeter",esriMensurationHeightFromBaseAndTop:"base-and-top",esriMensurationHeightFromBaseAndTopShadow:"base-and-top-shadow",esriMensurationHeightFromTopAndTopShadow:"top-and-top-shadow",esriMensurationPoint3D:"point-3D",esriMensurationCentroid3D:"centroid-3D",esriMensurationDistanceAndAngle3D:"distance-and-angle-3D",esriMensurationAreaAndPerimeter3D:"area-and-perimeter-3D"});let xl=class extends ue{constructor(){super(...arguments),this.type=null,this.measureOperation=null,this.mosaicRule=null,this.pixelSize=null,this.raster=void 0}};h([d()],xl.prototype,"type",void 0),h([d({type:Na.apiValues,json:{read:Na.read,write:Na.write}})],xl.prototype,"measureOperation",void 0),h([d({type:Go,json:{write:!0}})],xl.prototype,"mosaicRule",void 0),h([d({type:je,json:{write:!0}})],xl.prototype,"pixelSize",void 0),h([d({json:{write:!0}})],xl.prototype,"raster",void 0),xl=h([j("esri.rest.support.BaseImageMeasureParameters")],xl);var ik;let Hc=ik=class extends xl{constructor(){super(...arguments),this.type="area-perimeter",this.geometry=null,this.is3D=!1,this.linearUnit="meters",this.areaUnit="square-meters"}writeGeometry(e,t,r){e!=null&&(t.geometryType=vn(e),t[r]=e.toJSON())}get measureOperation(){return this.is3D?"area-and-perimeter-3D":"area-and-perimeter"}clone(){return new ik(Z({geometry:this.geometry,is3D:this.is3D,linearUnit:this.linearUnit,areaUnit:this.areaUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([d({types:Ss,json:{name:"fromGeometry",read:!0,write:!0}})],Hc.prototype,"geometry",void 0),h([ge("geometry")],Hc.prototype,"writeGeometry",null),h([d({type:Na.apiValues,json:{write:Na.write}})],Hc.prototype,"measureOperation",null),h([d({json:{read:!0}})],Hc.prototype,"is3D",void 0),h([d({type:String,json:{read:Ph.read,write:Ph.write}})],Hc.prototype,"linearUnit",void 0),h([d({type:String,json:{read:V_.read,write:V_.write}})],Hc.prototype,"areaUnit",void 0),Hc=ik=h([j("esri.rest.support.ImageAreaParameters")],Hc);const S$e=Hc;let od=class extends ue{constructor(){super(...arguments),this.value=null,this.displayValue=null,this.uncertainty=null}};h([d({type:Number,json:{read:!0,write:!0}})],od.prototype,"value",void 0),h([d({type:String,json:{read:!0,write:!0}})],od.prototype,"displayValue",void 0),h([d({type:Number,json:{read:!0,write:!0}})],od.prototype,"uncertainty",void 0),od=h([j("esri.rest.support.BaseImageMeasureResult.BaseImageMeasureResultValue")],od);let uv=class extends od{constructor(){super(...arguments),this.unit=null}};h([d({type:String,json:{read:Ph.read,write:Ph.write}})],uv.prototype,"unit",void 0),uv=h([j("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultLengthValue")],uv);let zT=class extends od{constructor(){super(...arguments),this.unit=null}};h([d({type:String,json:{read:V_.read,write:V_.write}})],zT.prototype,"unit",void 0),zT=h([j("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultAreaValue")],zT);let l_=class extends od{constructor(){super(...arguments),this.unit=null}};h([d({type:String,json:{read:tI.read,write:tI.write}})],l_.prototype,"unit",void 0),l_=h([j("esri.rest.support.BaseImageMeasureResult.ImageMeasureResultAngleValue")],l_);let dd=class extends ue{constructor(){super(...arguments),this.name=null,this.sensorName=null}};h([d({type:String,json:{read:!0,write:!0}})],dd.prototype,"name",void 0),h([d({type:String,json:{read:!0,write:!0}})],dd.prototype,"sensorName",void 0),dd=h([j("esri.rest.support.BaseImageMeasureResult")],dd);let fw=class extends dd{constructor(){super(...arguments),this.area=null,this.perimeter=null}};h([d({type:zT,json:{read:!0,write:!0}})],fw.prototype,"area",void 0),h([d({type:uv,json:{read:!0,write:!0}})],fw.prototype,"perimeter",void 0),fw=h([j("esri.rest.support.ImageAreaResult")],fw);const x$e=fw;let GT=class extends Yt(ue){constructor(){super(...arguments),this.outSpatialReference=null}};h([d({type:Fe,json:{name:"outSR",write:!0}})],GT.prototype,"outSpatialReference",void 0),GT=h([j("esri.rest.support.ImageBoundaryParameters")],GT);const M$e=GT;let r0=class extends ue{constructor(){super(...arguments),this.area=null,this.geometry=null}readGeometry(t,r){return t==null?null:t.rings?Rs.fromJSON(t):yt.fromJSON(t)}};h([d({type:Number,json:{write:!0}})],r0.prototype,"area",void 0),h([d({json:{name:"shape",write:!0}})],r0.prototype,"geometry",void 0),h([pe("geometry")],r0.prototype,"readGeometry",null),r0=h([j("esri.rest.support.ImageBoundaryResult")],r0);const T$e=r0;var sk;let du=sk=class extends xl{constructor(){super(...arguments),this.type="distance-angle",this.fromGeometry=null,this.toGeometry=null,this.is3D=!1,this.linearUnit="meters",this.angularUnit="degrees"}writeFromGeometry(e,t,r){e!=null&&(t.geometryType=vn(e),t[r]=e.toJSON())}get measureOperation(){return this.is3D?"distance-and-angle-3D":"distance-and-angle"}clone(){return new sk(Z({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,is3D:this.is3D,linearUnit:this.linearUnit,angularUnit:this.angularUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([d({type:je,json:{read:!0,write:!0}})],du.prototype,"fromGeometry",void 0),h([ge("fromGeometry")],du.prototype,"writeFromGeometry",null),h([d({type:je,json:{read:!0,write:!0}})],du.prototype,"toGeometry",void 0),h([d({type:Na.apiValues,json:{write:Na.write}})],du.prototype,"measureOperation",null),h([d({json:{read:!0}})],du.prototype,"is3D",void 0),h([d({type:String,json:{read:Ph.read,write:Ph.write}})],du.prototype,"linearUnit",void 0),h([d({type:String,json:{read:tI.read,write:tI.write}})],du.prototype,"angularUnit",void 0),du=sk=h([j("esri.rest.support.ImageDistanceParameters")],du);const I$e=du;let i0=class extends dd{constructor(){super(...arguments),this.distance=null,this.azimuthAngle=null,this.elevationAngle=null}};h([d({type:uv,json:{read:!0,write:!0}})],i0.prototype,"distance",void 0),h([d({type:l_,json:{read:!0,write:!0}})],i0.prototype,"azimuthAngle",void 0),h([d({type:l_,json:{read:!0,write:!0}})],i0.prototype,"elevationAngle",void 0),i0=h([j("esri.rest.support.ImageDistanceResult")],i0);const E$e=i0;let Wc=class extends Yt(ue){constructor(){super(...arguments),this.geometry=null,this.objectIds=null,this.spatialRelationship="intersects",this.timeExtent=null,this.where=null}writeGeometry(t,r,i){t!=null&&(r.geometryType=vn(t),r[i]=JSON.stringify(t.toJSON()))}};h([d({types:Ss,json:{read:bi,write:!0}})],Wc.prototype,"geometry",void 0),h([ge("geometry")],Wc.prototype,"writeGeometry",null),h([d({json:{write:!0}})],Wc.prototype,"objectIds",void 0),h([We(Wee,{ignoreUnknown:!1,name:"spatialRel"})],Wc.prototype,"spatialRelationship",void 0),h([d({type:Bn,json:{name:"time",write:!0}})],Wc.prototype,"timeExtent",void 0),h([d({type:String,json:{write:!0}})],Wc.prototype,"where",void 0),Wc=h([j("esri.rest.support.ImageGPSInfoParameters")],Wc);const A$e=Wc;let BT=class extends Ore(ue){constructor(){super(...arguments),this.id=null}};h([d({json:{write:!0}})],BT.prototype,"id",void 0),BT=h([j("esri.rest.support.CameraInfo")],BT);const $$e=BT;let gl=class extends ue{constructor(){super(...arguments),this.id=null,this.name=null,this.acquisitionDate=null,this.cameraID=null,this.center=null,this.gps=null,this.orientation=null}writeAcquisitionDate(t,r){r.acquisitionDate=t?.getTime()}};h([d({json:{write:!0}})],gl.prototype,"id",void 0),h([d({json:{write:!0}})],gl.prototype,"name",void 0),h([d({type:Date,json:{write:!0}})],gl.prototype,"acquisitionDate",void 0),h([ge("acquisitionDate")],gl.prototype,"writeAcquisitionDate",null),h([d({json:{write:!0}})],gl.prototype,"cameraID",void 0),h([d({type:je,json:{write:!0}})],gl.prototype,"center",void 0),h([d({json:{write:!0}})],gl.prototype,"gps",void 0),h([d({json:{write:!0}})],gl.prototype,"orientation",void 0),gl=h([j("esri.rest.support.ImageGPSInfo")],gl);const C$e=gl;let mw=class extends ue{constructor(){super(...arguments),this.images=null,this.cameras=null}};h([d({type:[C$e],json:{write:!0}})],mw.prototype,"images",void 0),h([d({type:[$$e],json:{write:!0}})],mw.prototype,"cameras",void 0),mw=h([j("esri.rest.support.ImageGPSInfoResult")],mw);const O$e=mw;var nk;let Jc=nk=class extends xl{constructor(){super(...arguments),this.type="height",this.fromGeometry=null,this.toGeometry=null,this.operationType="base-and-top",this.linearUnit="meters"}writeFromGeometry(e,t,r){e!=null&&(t.geometryType=vn(e),t[r]=e.toJSON())}get measureOperation(){return this.operationType}clone(){return new nk(Z({fromGeometry:this.fromGeometry,toGeometry:this.toGeometry,operationType:this.operationType,linearUnit:this.linearUnit,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([d({type:je,json:{read:!0}})],Jc.prototype,"fromGeometry",void 0),h([ge("fromGeometry")],Jc.prototype,"writeFromGeometry",null),h([d({type:je,json:{read:!0,write:!0}})],Jc.prototype,"toGeometry",void 0),h([d({type:Na.apiValues,json:{write:Na.write}})],Jc.prototype,"measureOperation",null),h([d({json:{read:!0}})],Jc.prototype,"operationType",void 0),h([d({type:String,json:{read:Ph.read,write:Ph.write}})],Jc.prototype,"linearUnit",void 0),Jc=nk=h([j("esri.rest.support.ImageHeightParameters")],Jc);const P$e=Jc;let qT=class extends dd{constructor(){super(...arguments),this.height=null}};h([d({type:uv,json:{read:!0,write:!0}})],qT.prototype,"height",void 0),qT=h([j("esri.rest.support.ImageHeightResult")],qT);const R$e=qT;var ok;let vl=ok=class extends ue{constructor(){super(...arguments),this.geometry=null,this.mosaicRule=null,this.rasterFunction=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(e,t,r){e!=null&&(t.geometryType=vn(e),t[r]=e.toJSON())}get renderingRule(){return Al(be.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._get("rasterFunction")}set renderingRule(e){Al(be.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._set("rasterFunction",e)}clone(){return new ok(Z({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};h([d({types:Ss,json:{read:bi}})],vl.prototype,"geometry",void 0),h([ge("geometry")],vl.prototype,"writeGeometry",null),h([d({type:Go,json:{write:!0}})],vl.prototype,"mosaicRule",void 0),h([d({type:qt})],vl.prototype,"renderingRule",null),h([d({type:qt,json:{write:!0,name:"renderingRule"}})],vl.prototype,"rasterFunction",void 0),h([d({type:je,json:{write:!0}})],vl.prototype,"pixelSize",void 0),h([d({json:{write:!0}})],vl.prototype,"raster",void 0),h([d({type:Bn,json:{read:{source:"time"},write:{target:"time"}}})],vl.prototype,"timeExtent",void 0),vl=ok=h([j("esri.rest.support.ImageHistogramParameters")],vl);const L$e=vl;var ak;let Hr=ak=class extends ue{constructor(){super(...arguments),this.geometry=null,this.rasterFunctions=null,this.pixelSize=null,this.returnGeometry=!0,this.returnCatalogItems=!0,this.returnPixelValues=!0,this.maxItemCount=null,this.timeExtent=null,this.raster=void 0,this.viewId=void 0,this.processAsMultidimensional=!1}writeGeometry(e,t,r){e!=null&&(t.geometryType=vn(e),t[r]=JSON.stringify(e.toJSON()))}set mosaicRule(e){let t=e;t?.mosaicMethod&&(t=Go.fromJSON({...t.toJSON(),mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation})),this._set("mosaicRule",t)}writeMosaicRule(e,t,r){e!=null&&(t[r]=JSON.stringify(e.toJSON()))}get renderingRule(){return Al(be.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._get("rasterFunction")}set renderingRule(e){Al(be.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._set("rasterFunction",e)}get renderingRules(){return Al(be.getLogger(this),"renderingRules",{replacement:"rasterFunctions",version:"4.27",warnOnce:!0}),this._get("rasterFunctions")}set renderingRules(e){Al(be.getLogger(this),"renderingRules",{replacement:"rasterFunctions",version:"4.27",warnOnce:!0}),this._set("rasterFunctions",e)}set rasterFunction(e){let t=e;t?.rasterFunction&&(t=qt.fromJSON({...t.toJSON(),rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments})),this._set("rasterFunction",t)}writeRasterFunction(e,t,r){e!=null&&(t[r]=JSON.stringify(e.toJSON())),e.rasterFunctionDefinition&&(t[r]=JSON.stringify(e.rasterFunctionDefinition))}writeRasterFunctions(e,t,r){e!=null&&(t[r]=JSON.stringify(e.map(i=>i.rasterFunctionDefinition||i.toJSON())))}writePixelSize(e,t,r){e!=null&&(t[r]=JSON.stringify(e))}writeTimeExtent(e,t,r){if(e!=null){const i=e.start!=null?e.start.getTime():null,s=e.end!=null?e.end.getTime():null;t[r]=i!=null?s!=null?`${i},${s}`:`${i}`:null}}clone(){return new ak(Z({geometry:this.geometry,mosaicRule:this.mosaicRule,rasterFunction:this.rasterFunction,rasterFunctions:this.rasterFunctions,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,processAsMultidimensional:this.processAsMultidimensional,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}};h([d({json:{write:!0}})],Hr.prototype,"geometry",void 0),h([ge("geometry")],Hr.prototype,"writeGeometry",null),h([d({type:Go,json:{write:!0}})],Hr.prototype,"mosaicRule",null),h([ge("mosaicRule")],Hr.prototype,"writeMosaicRule",null),h([d({type:qt})],Hr.prototype,"renderingRule",null),h([d({type:[qt]})],Hr.prototype,"renderingRules",null),h([d({type:qt,json:{write:!0,name:"renderingRule"}})],Hr.prototype,"rasterFunction",null),h([ge("rasterFunction")],Hr.prototype,"writeRasterFunction",null),h([d({type:[qt],json:{write:!0,name:"renderingRules"}})],Hr.prototype,"rasterFunctions",void 0),h([ge("rasterFunctions")],Hr.prototype,"writeRasterFunctions",null),h([d({type:je,json:{write:!0}})],Hr.prototype,"pixelSize",void 0),h([ge("pixelSize")],Hr.prototype,"writePixelSize",null),h([d({type:Boolean,json:{write:!0}})],Hr.prototype,"returnGeometry",void 0),h([d({type:Boolean,json:{write:!0}})],Hr.prototype,"returnCatalogItems",void 0),h([d({type:Boolean,json:{write:!0}})],Hr.prototype,"returnPixelValues",void 0),h([d({type:Number,json:{write:!0}})],Hr.prototype,"maxItemCount",void 0),h([d({type:Bn,json:{write:{target:"time"}}})],Hr.prototype,"timeExtent",void 0),h([ge("timeExtent")],Hr.prototype,"writeTimeExtent",null),h([d({json:{write:!0}})],Hr.prototype,"raster",void 0),h([d({json:{write:!0}})],Hr.prototype,"viewId",void 0),h([d({type:Boolean,json:{write:!0}})],Hr.prototype,"processAsMultidimensional",void 0),Hr=ak=h([j("esri.rest.support.ImageIdentifyParameters")],Hr);const Pre=Hr;let bl=class extends ue{constructor(){super(...arguments),this.catalogItemVisibilities=null,this.catalogItems=null,this.location=null,this.name=null,this.objectId=null,this.processedValues=null,this.properties=null,this.value=null}};h([d({json:{write:!0}})],bl.prototype,"catalogItemVisibilities",void 0),h([d({type:Yy,json:{write:!0}})],bl.prototype,"catalogItems",void 0),h([d({type:je,json:{write:!0}})],bl.prototype,"location",void 0),h([d({json:{write:!0}})],bl.prototype,"name",void 0),h([d({json:{write:!0}})],bl.prototype,"objectId",void 0),h([d({json:{write:!0}})],bl.prototype,"processedValues",void 0),h([d({json:{write:!0}})],bl.prototype,"properties",void 0),h([d({json:{write:!0}})],bl.prototype,"value",void 0),bl=h([j("esri.rest.support.ImageIdentifyResult")],bl);const k$e=bl;var lk;let s0=lk=class extends ue{constructor(){super(...arguments),this.geometries=null,this.rasterId=null}writeGeometry(e,t,r){t.geometries={geometryType:"esriGeometryPoint",geometries:e.map(i=>i.toJSON())}}clone(){return new lk({geometries:this.geometries?.map(e=>e.clone())??[],rasterId:this.rasterId})}};h([d({type:[je],json:{write:!0}})],s0.prototype,"geometries",void 0),h([ge("geometries")],s0.prototype,"writeGeometry",null),h([d({type:St,json:{write:!0}})],s0.prototype,"rasterId",void 0),s0=lk=h([j("esri.rest.support.ImagePixelLocationParameters")],s0);const N$e=s0;let HT=class extends ue{constructor(){super(...arguments),this.geometries=null}};h([d({json:{write:!0}})],HT.prototype,"geometries",void 0),HT=h([j("esri.rest.support.ImagePixelLocationResult")],HT);const D$e=HT;var uk;let vm=uk=class extends xl{constructor(){super(...arguments),this.type="point",this.geometry=null,this.is3D=!1}writeGeometry(e,t,r){e!=null&&(t.geometryType=vn(e),t[r]=e.toJSON())}get measureOperation(){const{is3D:e,geometry:t}=this;return t.type==="point"?e?"point-3D":"point":e?"centroid-3D":"centroid"}clone(){return new uk(Z({geometry:this.geometry,is3D:this.is3D,mosaicRule:this.mosaicRule,pixelSize:this.pixelSize,raster:this.raster}))}};h([d({types:Ss,json:{name:"fromGeometry",read:bi}})],vm.prototype,"geometry",void 0),h([ge("geometry")],vm.prototype,"writeGeometry",null),h([d({type:Na.apiValues,json:{read:Na.read,write:Na.write}})],vm.prototype,"measureOperation",null),h([d({json:{read:!0}})],vm.prototype,"is3D",void 0),vm=uk=h([j("esri.rest.support.ImagePointParameters")],vm);const F$e=vm;let WT=class extends dd{constructor(){super(...arguments),this.point=null}};h([d({type:je,json:{name:"point.value",read:!0,write:!0}})],WT.prototype,"point",void 0),WT=h([j("esri.rest.support.ImagePointResult")],WT);const j$e=WT;var ck;let Xs=ck=class extends ue{constructor(){super(...arguments),this.geometry=null,this.interpolation="nearest",this.mosaicRule=null,this.outFields=null,this.pixelSize=null,this.returnFirstValueOnly=!0,this.sampleDistance=null,this.sampleCount=null,this.sliceId=null,this.timeExtent=null}writeGeometry(e,t,r){e!=null&&(t.geometryType=vn(e),t[r]=e.toJSON())}set locations(e){if(e?.length){const t=new p1({spatialReference:e[0].spatialReference,points:e.map(({x:r,y:i})=>[r,i])});this._set("locations",e),this.geometry=t}}clone(){return new ck(Z({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};h([d({types:Ss,json:{read:bi}})],Xs.prototype,"geometry",void 0),h([ge("geometry")],Xs.prototype,"writeGeometry",null),h([d()],Xs.prototype,"locations",null),h([d({type:String,json:{type:bd.jsonValues,read:bd.read,write:bd.write}})],Xs.prototype,"interpolation",void 0),h([d({type:Go,json:{write:!0}})],Xs.prototype,"mosaicRule",void 0),h([d({type:[String],json:{write:!0}})],Xs.prototype,"outFields",void 0),h([d({type:je,json:{write:!0}})],Xs.prototype,"pixelSize",void 0),h([d({type:String,json:{write:!0}})],Xs.prototype,"raster",void 0),h([d({type:Boolean,json:{write:!0}})],Xs.prototype,"returnFirstValueOnly",void 0),h([d({type:Number,json:{write:!0}})],Xs.prototype,"sampleDistance",void 0),h([d({type:Number,json:{write:!0}})],Xs.prototype,"sampleCount",void 0),h([d({type:Number,json:{write:!0}})],Xs.prototype,"sliceId",void 0),h([d({type:Bn,json:{read:{source:"time"},write:{target:"time"}}})],Xs.prototype,"timeExtent",void 0),Xs=ck=h([j("esri.rest.support.ImageSampleParameters")],Xs);const V$e=Xs;let Zc=class extends ue{constructor(){super(...arguments),this.attributes=null,this.location=null,this.locationId=null,this.rasterId=null,this.resolution=null,this.pixelValue=null}};h([d({json:{write:!0}})],Zc.prototype,"attributes",void 0),h([d({type:je,json:{write:!0}})],Zc.prototype,"location",void 0),h([d({json:{write:!0}})],Zc.prototype,"locationId",void 0),h([d({json:{write:!0}})],Zc.prototype,"rasterId",void 0),h([d({json:{write:!0}})],Zc.prototype,"resolution",void 0),h([d({json:{write:!0}})],Zc.prototype,"pixelValue",void 0),Zc=h([j("esri.rest.support.ImageSample")],Zc);const U$e=Zc;let JT=class extends ue{constructor(){super(...arguments),this.samples=null}};h([d({type:[U$e],json:{write:!0}})],JT.prototype,"samples",void 0),JT=h([j("esri.rest.support.ImageSampleResult")],JT);const z$e=JT;let bm=class extends Yt(ue){constructor(){super(...arguments),this.geometries=[],this.rasterIds=null,this.outSpatialReference=null}writeGeometries(t,r,i){r.geometries=t?.length?{geometryType:vn(t[0]),geometries:t.map(s=>({...s.toJSON(),spatialReference:void 0}))}:null}};h([d({types:[Ss]})],bm.prototype,"geometries",void 0),h([ge("geometries")],bm.prototype,"writeGeometries",null),h([d({type:[St],json:{write:!0}})],bm.prototype,"rasterIds",void 0),h([d({type:Fe,json:{name:"outSR",write:!0}})],bm.prototype,"outSpatialReference",void 0),bm=h([j("esri.rest.support.ImageToMapMultirayParameters")],bm);const G$e=bm;let Yc=class extends Yt(ue){constructor(){super(...arguments),this.geometry=null,this.rasterId=null,this.outSpatialReference=null,this.depthOffset=0,this.adjust=!1}writeGeometry(t,r,i){t!=null&&(r.geometryType=vn(t),r[i]={...t.toJSON(),spatialReference:void 0})}};h([d({types:Ss,json:{read:bi,write:!0}})],Yc.prototype,"geometry",void 0),h([ge("geometry")],Yc.prototype,"writeGeometry",null),h([d({json:{write:!0}})],Yc.prototype,"rasterId",void 0),h([d({type:Fe,json:{name:"outSR",write:!0}})],Yc.prototype,"outSpatialReference",void 0),h([d({json:{name:"options.DOff",write:!0}})],Yc.prototype,"depthOffset",void 0),h([d({json:{name:"options.Adjust",write:!0}})],Yc.prototype,"adjust",void 0),Yc=h([j("esri.rest.support.ImageToMapParameters")],Yc);const B$e=Yc;let yw=class extends Yt(ue){constructor(){super(...arguments),this.referenceUri=null,this.rasterId=null}};h([d({type:String,json:{name:"uri",write:!0}})],yw.prototype,"referenceUri",void 0),h([d({type:Number,json:{write:!0}})],yw.prototype,"rasterId",void 0),yw=h([j("esri.rest.support.ImageUrlParameters")],yw);const q$e=yw;let ZT=class extends ue{constructor(){super(...arguments),this.url=null}};h([d({json:{name:"imageURL",write:!0}})],ZT.prototype,"url",void 0),ZT=h([j("esri.rest.support.ImageUrlResult")],ZT);const H$e=ZT;let wm=class extends Yt(ue){constructor(){super(...arguments),this.geometry=null,this.rasterId=null,this.visibleOnly=!1}writeGeometry(t,r,i){t!=null&&(r.geometryType=vn(t),r[i]=JSON.stringify(t))}};h([d({types:Ss,json:{read:bi,write:!0}})],wm.prototype,"geometry",void 0),h([ge("geometry")],wm.prototype,"writeGeometry",null),h([d({json:{write:!0}})],wm.prototype,"rasterId",void 0),h([d({json:{name:"options.VisibleOnly",write:!0}})],wm.prototype,"visibleOnly",void 0),wm=h([j("esri.rest.support.MapToImageParameters")],wm);const W$e=wm;let Op=class extends ue{constructor(){super(...arguments),this.geometry=null,this.length=null,this.area=null,this.center=null}readCenter(t,r){return t.spatialReference||(t={...t,spatialReference:r.Shape.spatialReference}),je.fromJSON(t)}};h([d({types:Ss,json:{name:"Shape",read:bi,write:!0}})],Op.prototype,"geometry",void 0),h([d({json:{name:"Length",write:!0}})],Op.prototype,"length",void 0),h([d({json:{name:"Area",write:!0}})],Op.prototype,"area",void 0),h([d({json:{name:"Center",write:!0}})],Op.prototype,"center",void 0),h([pe("center")],Op.prototype,"readCenter",null),Op=h([j("esri.rest.support.MeasureAreaFromImageResult")],Op);const J$e=Op;var hk;let n0=hk=class extends ue{constructor(){super(...arguments),this.geometry=null,this.rasterId=void 0}writeGeometry(e,t,r){e!=null&&(t.geometryType=vn(e),t[r]={...e.toJSON(),spatialReference:void 0})}clone(){const e=Z({geometry:this.geometry,rasterId:this.rasterId});return new hk(e)}};h([d({types:Ss,json:{name:"fromGeometry",read:bi,write:!0}})],n0.prototype,"geometry",void 0),h([ge("geometry")],n0.prototype,"writeGeometry",null),h([d({json:{write:!0}})],n0.prototype,"rasterId",void 0),n0=hk=h([j("esri.rest.support.MeasureFromImageParameters")],n0);const Z$e=n0;let gw=class extends ue{constructor(){super(...arguments),this.geometry=null,this.length=null}};h([d({types:Ss,json:{name:"Shape",read:bi,write:!0}})],gw.prototype,"geometry",void 0),h([d({json:{name:"Length",write:!0}})],gw.prototype,"length",void 0),gw=h([j("esri.rest.support.MeasureLengthFromImageResult")],gw);const Y$e=gw;function U8(e){const t=e?.time;if(t&&(t.start!=null||t.end!=null)){const r=[];t.start!=null&&r.push(t.start),t.end==null||r.includes(t.end)||r.push(t.end),e.time=r.join(",")}}async function Rre(e,t,r){t=zr(L$e,t);const i=Pr(e),s=t.geometry?[t.geometry]:[],n=await hc(s),o=t.toJSON();U8(o);const a=n?.[0];a!=null&&(o.geometry=rc(a));const l=Vs({...i.query,f:"json",...o});return bn(l,r)}async function K$e(e,t,r){const i=(t=zr(w$e,t)).toJSON();i.angleName!=null&&(i.angleName=i.angleName.join(",")),t?.point?.spatialReference?.imageCoordinateSystem&&(i.point.spatialReference=r$(t.point.spatialReference)),t?.spatialReference?.imageCoordinateSystem&&(i.spatialReference=C1(t.spatialReference));const s=Pr(e),n=Vs({...s.query,f:"json",...i}),o=bn(n,r),{data:a}=await Re(`${s.path}/computeAngles`,o);return a.spatialReference=a.spatialReference?a.spatialReference.geodataXform!=null?new Fe({wkid:0,imageCoordinateSystem:a.spatialReference}):Fe.fromJSON(a.spatialReference):null,a.north==="NaN"&&(a.north=null),a.up==="NaN"&&(a.up=null),new _$e(a)}async function X$e(e,t,r){const i=(t=zr(N$e,t)).toJSON(),{geometries:s}=t;if(s)for(let u=0;u<s.length;u++)s[u].spatialReference?.imageCoordinateSystem&&(i.geometries.geometries[u].spatialReference=r$(s[u].spatialReference));const n=Pr(e),o=Vs({...n.query,f:"json",...i}),a=bn(o,r),{data:l}=await Re(`${n.path}/computePixelLocation`,a);return D$e.fromJSON(l)}async function Q$e(e,t,r){const i=await Rre(e,t,r),s=Pr(e),{data:n}=await Re(`${s.path}/computeStatisticsHistograms`,i),{statistics:o}=n;return o?.length&&o.forEach(a=>{a.avg=a.mean,a.stddev=a.standardDeviation}),{statistics:o,histograms:n.histograms}}async function e4e(e,t,r){const i=await Rre(e,t,r),s=Pr(e),{data:n}=await Re(`${s.path}/computeHistograms`,i);return{histograms:n.histograms}}async function t4e(e,t,r){const i=(t=zr(V$e,t)).toJSON();U8(i),i.outFields?.length&&(i.outFields=i.outFields.join(","));const s=await hc(t.geometry),n=s?.[0];n!=null&&(i.geometry=rc(n));const o=Pr(e),a=Vs({...o.query,f:"json",...i}),l=bn(a,r),{data:u}=await Re(`${o.path}/getSamples`,l),c=u?.samples?.map(p=>{const f=p.value==="NaN"||p.value===""?null:p.value.split(" ").map(m=>Number(m));return{...p,pixelValue:f}});return z$e.fromJSON({samples:c})}async function qz(e,t,r){t=zr(Pre,t);const i=Pr(e),s=t.geometry?[t.geometry]:[];return hc(s).then(n=>{const o=t.toJSON(),a=n?.[0];a!=null&&(o.geometry=JSON.stringify(rc(a)));const l=Vs({...i.query,f:"json",...o}),u=bn(l,r);return Re(i.path+"/identify",u)}).then(n=>k$e.fromJSON(n.data))}async function r4e(e,t,r){t=zr(P$e,t);const i=await t$(e,t,[t.fromGeometry,t.toGeometry],r);return R$e.fromJSON(i)}async function i4e(e,t,r){t=zr(S$e,t);const i=await t$(e,t,[t.geometry],r);return x$e.fromJSON(i)}async function s4e(e,t,r){t=zr(F$e,t);const i=await t$(e,t,[t.geometry],r);return j$e.fromJSON(i)}async function n4e(e,t,r){t=zr(I$e,t);const i=await t$(e,t,[t.fromGeometry,t.toGeometry],r);return E$e.fromJSON(i)}async function t$(e,t,r,i){const s=Pr(e),n=await hc(r),o=t.toJSON();n[0]!=null&&(o.fromGeometry=JSON.stringify(rc(n[0]))),n[1]!=null&&(o.toGeometry=JSON.stringify(rc(n[1])));const a=Vs({...s.query,f:"json",...o}),l=bn(a,i),{data:u}=await Re(s.path+"/measure",l);return u}async function o4e(e,t,r){const i=await Lre(e,t,r);return Y$e.fromJSON(i)}async function a4e(e,t,r){const i=await Lre(e,t,r);return J$e.fromJSON(i)}async function Lre(e,t,r){t=zr(Z$e,t);const i=Pr(e),s=t.toJSON(),n=Vs({...i.query,f:"json",...s}),o=bn(n,r),{data:a}=await Re(i.path+"/measureFromImage",o);return a}function rc(e){const t=e.toJSON();return e.spatialReference?.imageCoordinateSystem&&(t.spatialReference=r$(e.spatialReference)),t}function r$(e){const{imageCoordinateSystem:t}=e;if(t){const{id:r,referenceServiceName:i}=t;return r!=null?i?{icsid:r,icsns:i}:{icsid:r}:{ics:t}}return e.toJSON()}function C1(e,t){if(!e.imageCoordinateSystem)return Ad(e);const r=r$(e),{icsid:i,icsns:s}=r;return i==null||s!=null&&!t?.toLowerCase().includes("/"+s.toLowerCase()+"/")?JSON.stringify(r):`0:${i}`}async function l4e(e,t,r){t=zr(M$e,t);const i=Pr(e),s=t.toJSON();t.outSpatialReference&&(s.outSR=C1(t.outSpatialReference));const n=Vs({...i.query,f:"json",...s}),o=bn(n,r),{data:a}=await Re(i.path+"/queryBoundary",o);return T$e.fromJSON(a)}async function u4e(e,t,r){const i=(t=zr(A$e,t)).toJSON();U8(i),i.objectIds?.length&&(i.objectIds=i.objectIds.join(",")),i.geometry||i.objectIds||i.time||i.where||(i.where="1=1");const s=await hc(t.geometry),n=s?.[0];n!=null&&(i.geometry=rc(n));const o=n?.spatialReference??t.geometry?.spatialReference;o&&(i.inSR=C1(o));const a=Pr(e),l=Vs({...a.query,f:"json",...i}),u=bn(l,r),{data:c}=await Re(`${a.path}/queryGPSInfo`,u);return O$e.fromJSON(c)}async function c4e(e,t,r){const i=(t=zr(B$e,t)).toJSON();t.geometry.spatialReference.imageCoordinateSystem&&(i.geometry=rc(t.geometry)),t.depthOffset&&t.adjust||delete i.options;const s=Pr(e),n=Vs({...s.query,f:"json",...i}),o=bn(n,r),{data:a}=await Re(`${s.path}/imageToMap`,o);return bi(a)}async function h4e(e,t,r){const i=(t=zr(G$e,t)).toJSON();t.rasterIds?.length&&(i.rasterIds=t.rasterIds.join(","));const s=Pr(e),n=Vs({...s.query,f:"json",...i}),o=bn(n,r),{data:a}=await Re(`${s.path}/imageToMapMultiray`,o);return bi(a)}async function p4e(e,t,r){const i=(t=zr(W$e,t)).toJSON(),s=await hc(t.geometry),n=s?.[0];n!=null&&(i.geometry=rc(n)),t.visibleOnly||delete i.options;const o=n?.spatialReference??t.geometry?.spatialReference;o&&(i.inSR=C1(o));const a=Pr(e),l=Vs({...a.query,f:"json",...i}),u=bn(l,r),{data:c}=await Re(`${a.path}/mapToImage`,u);return bi(c)}async function d4e(e,t,r){const i=(t=zr(q$e,t)).toJSON(),s=Pr(e),n=Vs({...s.query,f:"json",...i}),o=bn(n,r),{data:a}=await Re(`${s.path}/getImageUrl`,o);return H$e.fromJSON(a)}async function f4e(e,t,r){const i=(t=zr(g$e,t)).toJSON(),s=await hc([t.fromGeometry,t.toGeometry]);s[0]!=null&&(i.fromGeometry=rc(s[0]),s[0].spatialReference&&(i.inSR=C1(s[0].spatialReference))),s[1]!=null&&(i.toGeometry=rc(s[1])),t.objectIds?.length&&(i.objectIds=i.objectIds.join(","));const n=Pr(e),o=Vs({...n.query,f:"json",...i}),a=bn(o,r),{data:l}=await Re(`${n.path}/find`,a);return b$e.fromJSON(l)}function kre(e){const t={};for(const r in e){if(r==="declaredClass")continue;const i=e[r];if(i!=null&&typeof i!="function")if(Array.isArray(i)){t[r]=[];for(let s=0;s<i.length;s++)t[r][s]=kre(i[s])}else typeof i=="object"?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}var Yp;(function(e){e[e.varint=0]="varint",e[e.fixed64=1]="fixed64",e[e.delimited=2]="delimited",e[e.fixed32=5]="fixed32",e[e.unknown=99]="unknown"})(Yp||(Yp={}));const Hz=4294967296,m4e=new TextDecoder("utf-8"),y4e=ce("safari")||ce("ios")?6:ce("ff")?12:32;let pk=class YT{constructor(t,r,i=0,s=t?t.byteLength:0){this._tag=0,this._dataType=Yp.unknown,this._init(t,r,i,s)}_init(t,r,i,s){this._data=t,this._dataView=r,this._pos=i,this._end=s}asUnsafe(){return this}clone(){return new YT(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const r=this._decodeVarint();if(this._tag=r>>3,this._dataType=7&r,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;if(t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128||(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)||(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)||(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128))return t;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+t.getUint32(r+4,!0)*Hz;return this._skip(8),i}getSFixed64(){const t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+t.getInt32(r+4,!0)*Hz;return this._skip(8),i}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),r=this._pos,i=this._toString(this._data,r,r+t);return this._skip(t),i}getBytes(){const t=this._getLength(),r=this._pos,i=this._toBytes(this._data,r,r+t);return this._skip(t),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,r,i,s){const n=this.getMessage(),o=t(n,r,i,s);return n.release(),o}processMessage(t){const r=this.getMessage(),i=t(r);return r.release(),i}getMessage(){const t=this._getLength(),r=YT.pool.acquire();return r._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r}release(){YT.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case Yp.varint:this._decodeVarint();break;case Yp.fixed64:this._skip(8);break;case Yp.delimited:this._skip(this._getLength());break;case Yp.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let r=this._pos,i=0,s=0;if(this._end-r>=10)do{if(s=t[r++],i|=127&s,!(128&s)||(s=t[r++],i|=(127&s)<<7,!(128&s))||(s=t[r++],i|=(127&s)<<14,!(128&s))||(s=t[r++],i|=(127&s)<<21,!(128&s))||(s=t[r++],i+=268435456*(127&s),!(128&s))||(s=t[r++],i+=34359738368*(127&s),!(128&s))||(s=t[r++],i+=4398046511104*(127&s),!(128&s))||(s=t[r++],i+=562949953421312*(127&s),!(128&s))||(s=t[r++],i+=72057594037927940*(127&s),!(128&s))||(s=t[r++],i+=9223372036854776e3*(127&s),!(128&s)))break;throw new Error("Varint too long!")}while(!1);else{let n=1;for(;r!==this._end&&(s=t[r],128&s);)++r,i+=(127&s)*n,n*=128;if(r===this._end)throw new Error("Varint overrun!");++r,i+=s*n}return this._pos=r,i}_decodeSVarint(){const t=this._data;let r,i=0,s=0;const n=1&t[this._pos];if(s=t[this._pos++],i|=127&s,!(128&s)||(s=t[this._pos++],i|=(127&s)<<7,!(128&s))||(s=t[this._pos++],i|=(127&s)<<14,!(128&s))||(s=t[this._pos++],i|=(127&s)<<21,!(128&s))||(s=t[this._pos++],i+=268435456*(127&s),!(128&s))||(s=t[this._pos++],i+=34359738368*(127&s),!(128&s))||(s=t[this._pos++],i+=4398046511104*(127&s),!(128&s)))return n?-(i+1)/2:i/2;if(r=BigInt(i),s=t[this._pos++],r+=0x2000000000000n*BigInt(127&s),!(128&s)||(s=t[this._pos++],r+=0x100000000000000n*BigInt(127&s),!(128&s))||(s=t[this._pos++],r+=0x8000000000000000n*BigInt(127&s),!(128&s)))return Number(n?-(r+1n)/2n:r/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==Yp.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,r,i){if((i=Math.min(this._end,i))-r>y4e){const o=t.subarray(r,i);return m4e.decode(o)}let s="",n="";for(let o=r;o<i;++o){const a=t[o];128&a?n+="%"+a.toString(16):(s+=decodeURIComponent(n)+String.fromCharCode(a),n="")}return n.length&&(s+=decodeURIComponent(n)),s}_toBytes(t,r,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,r,i-r)}};pk.pool=new Vd(pk,void 0,e=>{e._data=null,e._dataView=null});const x5=2;let To=class o0{constructor(t=[],r=[],i=!1){this.lengths=t??[],this.coords=r??[],this.hasIndeterminateRingOrder=i}static fromJSON(t){return new o0(t.lengths,t.coords,t.hasIndeterminateRingOrder)}static fromRect(t){const[r,i,s,n]=t,o=s-r,a=n-i;return new o0([5],[r,i,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,r)=>t+r)}forEachVertex(t){let r=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let i=0;i<this.lengths.length;i++){const s=this.lengths[i];for(let n=0;n<s;n++)t(this.coords[x5*(n+r)],this.coords[x5*(n+r)+1]);r+=s}}deltaDecode(){const t=this.clone(),{coords:r,lengths:i}=t;let s=0;for(const n of i){for(let o=1;o<n;o++)r[2*(s+o)]+=r[2*(s+o)-2],r[2*(s+o)+1]+=r[2*(s+o)-1];s+=n}return t}clone(t){if(this.lengths.length===0)return new o0([],[this.coords[0],this.coords[1]]);const r=(this.lengths.length===0?1:this.lengths.reduce((s,n)=>s+n))*x5,i=this.coords.slice(0,r);return t?(t.set(i),new o0(this.lengths,t,this.hasIndeterminateRingOrder)):new o0(Array.from(this.lengths),Array.from(i),this.hasIndeterminateRingOrder)}},Oy=class KT{constructor(t=null,r={},i,s){this.geometry=t,this.attributes=r,this.centroid=i,this.objectId=s,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(t,r){const i=t.geometry?To.fromJSON(t.geometry):null,s=t.centroid?To.fromJSON(t.centroid):null,n=t.attributes[r];return new KT(i,t.attributes,s,n)}weakClone(){const t=new KT(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}clone(){const t=this.geometry?.clone(),r=new KT(t,{...this.attributes},this.centroid?.clone(),this.objectId);return r.displayId=this.displayId,r.geohashX=this.geohashX,r.geohashY=this.geohashY,r}};function g4e(e){return!!e.geometry?.coords?.length}let Nre=class Dre{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new Dre;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}};const Fre=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let Dat=class{constructor(t){this._options=t,this.geometryTypes=Fre,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new Nre}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t?.features||!t.hasZ||!this._options.sourceSpatialReference||!t.spatialReference||vi(t.spatialReference,this._options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const r=Mv(this._options.sourceSpatialReference)/Mv(t.spatialReference);if(r!==1)for(const i of t.features){if(!g4e(i))continue;const s=i.geometry.coords;for(let n=2;n<s.length;n+=3)s[n]*=r}}addFeature(t,r){t.features.push(r)}createFeature(){return new Oy}createSpatialReference(){return{wkid:0}}createGeometry(){return new To}addField(t,r){t.fields.push(r)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((r,i)=>r+i,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,r){t.coords[this._coordinatePtr++]=r}addCoordinatePoint(t,r){t.coords.push(r)}addLength(t,r){t.lengths.push(r)}addQueryGeometry(t,r){t.queryGeometry=r.queryGeometry,t.queryGeometryType=r.queryGeometryType}createPointGeometry(){return new To}};const Wz=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML","esriFieldTypeBigInteger","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"],Jz=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],Zz=["upperLeft","lowerLeft"];function Yz(e){return e>=Wz.length?null:Wz[e]}function v4e(e){return e>=Jz.length?null:Jz[e]}function Kz(e){return e>=Zz.length?null:Zz[e]}function Xz(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function b4e(e,t,r){const s=e.asUnsafe(),n=t.createPointGeometry(r);for(;s.next();)switch(s.tag()){case 3:{const o=s.getUInt32(),a=s.pos()+o;let l=0;for(;s.pos()<a;)t.addCoordinatePoint(n,s.getSInt64(),l++);break}default:s.skip()}return n}function w4e(e,t,r){const n=e.asUnsafe(),o=t.createGeometry(r),a=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;n.next();)switch(n.tag()){case 2:{const l=n.getUInt32(),u=n.pos()+l;let c=0;for(;n.pos()<u;)t.addLength(o,n.getUInt32(),c++);break}case 3:{const l=n.getUInt32(),u=n.pos()+l;let c=0;for(t.allocateCoordinates(o);n.pos()<u;)t.addCoordinate(o,n.getSInt64(),c),c++,c===a&&(c=0);break}default:n.skip()}return o}function _4e(e){const s=e.asUnsafe(),n=new To;let o="esriGeometryPoint";for(;s.next();)switch(s.tag()){case 2:{const a=s.getUInt32(),l=s.pos()+a;for(;s.pos()<l;)n.lengths.push(s.getUInt32());break}case 3:{const a=s.getUInt32(),l=s.pos()+a;for(;s.pos()<l;)n.coords.push(s.getSInt64());break}case 1:o=Fre[s.getEnum()];break;default:s.skip()}return{queryGeometry:n,queryGeometryType:o}}function S4e(e){const c=e.asUnsafe();for(;c.next();)switch(c.tag()){case 1:return c.getString();case 2:return c.getFloat();case 3:return c.getDouble();case 4:return c.getSInt32();case 5:return c.getUInt32();case 6:return c.getInt64();case 7:return c.getUInt64();case 8:return c.getSInt64();case 9:return c.getBool();default:return c.skip(),null}return null}function x4e(e){const a=e.asUnsafe(),l={type:Yz(0)};for(;a.next();)switch(a.tag()){case 1:l.name=a.getString();break;case 2:l.type=Yz(a.getEnum());break;case 3:l.alias=a.getString();break;case 4:l.sqlType=v4e(a.getEnum());break;case 5:a.skip();break;case 6:l.defaultValue=a.getString();break;default:a.skip()}return l}function M4e(e){const i={},s=e.asUnsafe();for(;s.next();)switch(s.tag()){case 1:i.name=s.getString();break;case 2:i.isSystemMaintained=s.getBool();break;default:s.skip()}return i}function T4e(e,t,r,i){const a=t.createFeature(r);let l=0;for(;e.next();)switch(e.tag()){case 1:{const u=i[l++].name;a.attributes[u]=e.processMessage(S4e);break}case 2:a.geometry=e.processMessageWithArgs(w4e,t,r);break;case 4:a.centroid=e.processMessageWithArgs(b4e,t,r);break;default:e.skip()}return a}function I4e(e){const n=[1,1,1,1],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function E4e(e){const n=[0,0,0,0],o=e.asUnsafe();for(;o.next();)switch(o.tag()){case 1:n[0]=o.getDouble();break;case 2:n[1]=o.getDouble();break;case 4:n[2]=o.getDouble();break;case 3:n[3]=o.getDouble();break;default:o.skip()}return n}function A4e(e){const s={originPosition:Kz(0)},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.originPosition=Kz(n.getEnum());break;case 2:s.scale=n.processMessage(I4e);break;case 3:s.translate=n.processMessage(E4e);break;default:n.skip()}return s}function $4e(e){const s={},n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:s.shapeAreaFieldName=n.getString();break;case 2:s.shapeLengthFieldName=n.getString();break;case 3:s.units=n.getString();break;default:n.skip()}return s}function C4e(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function O4e(e,t){const b=t.createFeatureResult(),w=e.asUnsafe();b.geometryType=Xz(t,0);let S=!1;for(;w.next();)switch(w.tag()){case 1:b.objectIdFieldName=w.getString();break;case 3:b.globalIdFieldName=w.getString();break;case 4:b.geohashFieldName=w.getString();break;case 5:b.geometryProperties=w.processMessage($4e);break;case 7:b.geometryType=Xz(t,w.getEnum());break;case 8:b.spatialReference=w.processMessageWithArgs(C4e,t);break;case 10:b.hasZ=w.getBool();break;case 11:b.hasM=w.getBool();break;case 12:b.transform=w.processMessage(A4e);break;case 9:b.exceededTransferLimit=w.getBool();break;case 13:t.addField(b,w.processMessage(x4e));break;case 15:S||(t.prepareFeatures(b),S=!0),t.addFeature(b,w.processMessageWithArgs(T4e,t,b,b.fields));break;case 2:b.uniqueIdField=w.processMessage(M4e);break;default:w.skip()}return t.finishFeatureResult(b),b}function P4e(e,t){const s={};let n=null;for(;e.next();)switch(e.tag()){case 4:n=e.processMessageWithArgs(_4e);break;case 1:s.featureResult=e.processMessageWithArgs(O4e,t);break;default:e.skip()}return n!=null&&s.featureResult&&t.addQueryGeometry(s,n),s}function R4e(e,t){try{const i=new pk(new Uint8Array(e),new DataView(e)),s={};for(;i.next();)i.tag()===2?s.queryResult=i.processMessageWithArgs(P4e,t):i.skip();return s}catch(r){throw new K("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r})}}function L4e(e,t){const r=R4e(e,t),i=r.queryResult.featureResult,s=r.queryResult.queryGeometry,n=r.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const o=i.objectIdFieldName;for(const a of i.features)a.attributes&&(a.objectId=a.attributes[o])}return i&&(i.queryGeometry=s,i.queryGeometryType=n),i}const Qz="Layer does not support extent calculation.";function k4e(e,t){if(t&&e.type==="extent")return`${e.xmin},${e.ymin},${e.xmax},${e.ymax}`;if(t&&e.type==="point")return`${e.x},${e.y}`;const r=e.toJSON();return delete r.spatialReference,JSON.stringify(r)}function N4e(e,t){const r=e.geometry,i=e.toJSON();delete i.compactGeometryEnabled,delete i.defaultSpatialReferenceEnabled;const s=i;let n,o,a;if(r!=null&&(o=r.spatialReference,a=Ad(o),s.geometryType=vn(r),s.geometry=k4e(r,e.compactGeometryEnabled),s.inSR=a),i.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(s.objectIds=i.objectIds.join(",")),i.orderByFields&&(s.orderByFields=i.orderByFields.join(",")),!i.outFields||!i.returnDistinctValues&&(t?.returnCountOnly||t?.returnExtentOnly||t?.returnIdsOnly)?delete s.outFields:i.outFields.includes("*")?s.outFields="*":s.outFields=i.outFields.join(","),i.outSR?(s.outSR=Ad(i.outSR),n=e.outSpatialReference):r&&(i.returnGeometry||i.returnCentroid)&&(s.outSR=s.inSR,n=o),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(s.outStatistics=JSON.stringify(i.outStatistics)),i.fullText&&(s.fullText=JSON.stringify(i.fullText)),i.pixelSize&&(s.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&o!=null&&e.quantizationParameters?.extent!=null&&o.equals(e.quantizationParameters.extent.spatialReference)&&delete i.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(s.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(s.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(s.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const l=i.timeExtent,{start:u,end:c}=l;u==null&&c==null||(s.time=u===c?u:`${u??"null"},${c??"null"}`),delete i.timeExtent}return e.defaultSpatialReferenceEnabled&&o!=null&&n!=null&&o.equals(n)&&(s.defaultSR=s.inSR,delete s.inSR,delete s.outSR),s}async function D4e(e,t,r,i){const s=t.timeExtent!=null&&t.timeExtent.isEmpty?{data:{features:[]}}:await pS(e,t,"json",i);return YR(t,r,s.data),s}async function F4e(e,t,r,i){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:r.createFeatureResult()};const s=await j4e(e,t,i),n=s;return n.data=L4e(s.data,r),n}function j4e(e,t,r){return pS(e,t,"pbf",r)}function V4e(e,t,r){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):pS(e,t,"json",r,{returnIdsOnly:!0})}function U4e(e,t,r){return t.timeExtent!=null&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):pS(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}async function z4e(e,t,r){if(t.timeExtent!=null&&t.timeExtent.isEmpty)return{data:{count:0,extent:null}};const i=await pS(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}),s=i.data;if(s.hasOwnProperty("extent"))return i;if(s.features)throw new Error(Qz);if(s.hasOwnProperty("count"))throw new Error(Qz);return i}async function pS(e,t,r,i={},s={}){const n=typeof e=="string"?gi(e):e,o=t.geometry?[t.geometry]:[],a=await hc(o,null,{signal:i.signal}),l=a?.[0];l!=null&&((t=t.clone()).geometry=l);const u=kre({...n.query,f:r,...s,...N4e(t,s)});return Re(Oh(n.path,G4e(t,s)?"query3d":"query"),{...i,responseType:r==="pbf"?"array-buffer":"json",query:{...u,...i.query}})}function G4e(e,t){return e.formatOf3DObjects!=null&&!(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)}async function B4e(e,t,r){const i=await jre(e,t,r);return Yy.fromJSON(i)}async function jre(e,t,r){const i=Pr(e),s={...r},n=Ci.from(t),{data:o}=await D4e(i,n,n.sourceSpatialReference,s);return o}function q4e(e){const{exifInfo:t,exifName:r,tagName:i}=e;if(!t||!r||!i)return null;const s=t.find(n=>n.name===r);return s?H4e({tagName:i,tags:s.tags}):null}function H4e(e){const{tagName:t,tags:r}=e;return!r||!t?null:r.find(s=>s.name===t)?.value||null}var dk;const W4e={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let to=dk=class extends ue{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=q4e({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return W4e[t]||null}clone(){return new dk({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};h([d({type:String})],to.prototype,"contentType",void 0),h([d()],to.prototype,"exifInfo",void 0),h([d({readOnly:!0})],to.prototype,"orientationInfo",null),h([d({type:St})],to.prototype,"id",void 0),h([d({type:String})],to.prototype,"globalId",void 0),h([d({type:String})],to.prototype,"keywords",void 0),h([d({type:String})],to.prototype,"name",void 0),h([d({json:{read:!1}})],to.prototype,"parentGlobalId",void 0),h([d({json:{read:!1}})],to.prototype,"parentObjectId",void 0),h([d({type:St})],to.prototype,"size",void 0),h([d({json:{read:!1}})],to.prototype,"url",void 0),to=dk=h([j("esri.rest.query.support.AttachmentInfo")],to);const jat=to;async function Vre(e,t,r){const i=Pr(e),{data:s}=await U4e(i,Ci.from(t),r);return s.count}async function z8(e,t,r){const i=Pr(e),{data:s}=await V4e(i,Ci.from(t),r);return s.objectIds}async function Ure(e,t,r){const i=Pr(e),{rasterFunction:s,sourceJSON:n}=t||{},o=s?JSON.stringify(s.rasterFunctionDefinition||s):null,a=Vs({...i.query,renderingRule:o,f:"json"}),l=bn(a,r);e=i.path;const u=n||await Re(e,l).then(P=>P.data),c=u.hasRasterAttributeTable?Re(`${e}/rasterAttributeTable`,l):null,p=u.hasColormap?Re(`${e}/colormap`,l):null,f=u.hasHistograms?Re(`${e}/histograms`,l):null,m=u.currentVersion>=10.3?Re(`${e}/keyProperties`,l):null,g=u.hasMultidimensions?Re(`${e}/multidimensionalInfo`,l):null,b=await Promise.allSettled([c,p,f,m,g]);let w=null;if(u.minValues&&u.minValues.length===u.bandCount){w=[];for(let P=0;P<u.minValues.length;P++)w.push({min:u.minValues[P],max:u.maxValues[P],avg:u.meanValues[P],stddev:u.stdvValues[P]})}const S=yt.fromJSON(u.extent),M=Math.ceil(S.width/u.pixelSizeX-.1),x=Math.ceil(S.height/u.pixelSizeY-.1),_=Fe.fromJSON(u.spatialReference||u.extent.spatialReference),I=b[0].status==="fulfilled"?b[0].value?.data:null,E=I?.features?.length?Yy.fromJSON(I):null,A=b[1].status==="fulfilled"?b[1].value?.data.colormap:null,C=A?.length?A:null,O=b[2].status==="fulfilled"?b[2].value?.data.histograms:null,R=O?.[0]?.counts?.length?O:null,D=b[3].status==="fulfilled"?b[3].value?.data??{}:{},N=b[4].status==="fulfilled"?b[4].value?.data.multidimensionalInfo:null,U=N?.variables?.length?N:null;U&&U.variables.forEach(P=>{P.statistics?.length&&P.statistics.forEach(z=>{z.avg=z.mean,z.stddev=z.standardDeviation})});const{defaultVariable:J,serviceDataType:y}=u;J&&J!==D.DefaultVariable&&(D.DefaultVariable=J),y?.includes("esriImageServiceDataTypeVector")&&!y.includes(D.DataType)&&(D.DataType=y.replace("esriImageServiceDataType",""));let T=u.noDataValue;u.noDataValues?.length&&u.noDataValues.some(P=>P!==T)&&(T=u.noDataValues);const $=u.transposeInfo?new O8({blockWidth:256,blockHeight:256,pyramidBlockWidth:256,pyramidBlockHeight:256,pyramidScalingFactor:2,compression:"lerc",origin:new je({x:u.extent.xmin,y:u.extent.ymax,spatialReference:_}),firstPyramidLevel:1,maximumPyramidLevel:Math.max(0,Math.round(Math.log(Math.max(M,x))/Math.LN2-8)),transposeInfo:u.transposeInfo}):void 0;return new YA({width:M,height:x,bandCount:u.bandCount,extent:yt.fromJSON(u.extent),spatialReference:_,pixelSize:new je({x:u.pixelSizeX,y:u.pixelSizeY,spatialReference:_}),pixelType:u.pixelType.toLowerCase(),statistics:w,attributeTable:E,colormap:C,histograms:R,keyProperties:D,noDataValue:T,multidimensionalInfo:U,storageInfo:$})}function J4e(e,t,r){return Ure(e,{sourceJSON:t},r)}function Z4e(e,t,r){return Ure(e,{rasterFunction:t},r)}function Y4e(e,t){e.attributeTable||(t.hasRasterAttributeTable=!1),e.histograms||(t.hasHistograms=!1),e.colormap||(t.hasColormap=!1),e.multidimensionalInfo||(t.hasMultidimensions=!1)}async function K4e(e,t,r){const i=Pr(e),s=Vs({...i?.query,f:"json"}),n=bn(s,r),o=`${i?.path}/${t}/info`,a=Re(`${o}`,n),l=Re(`${o}/keyProperties`,n),u=await Promise.allSettled([a,l]),c=u[0].status==="fulfilled"?u[0].value.data:null,p=u[1].status==="fulfilled"?u[1].value.data:null;let f=null;c.statistics?.length&&(f=c.statistics.map(_=>({min:_[0],max:_[1],avg:_[2],stddev:_[3]})));const m=yt.fromJSON(c.extent),g=Math.ceil(m.width/c.pixelSizeX-.1),b=Math.ceil(m.height/c.pixelSizeY-.1),w=m.spatialReference,S=new je({x:c.pixelSizeX,y:c.pixelSizeY,spatialReference:w}),M=c.histograms?.length?c.histograms:null,x=new O8({origin:c.origin,blockWidth:c.blockWidth,blockHeight:c.blockHeight,firstPyramidLevel:c.firstPyramidLevel,maximumPyramidLevel:c.maxPyramidLevel});return new YA({width:g,height:b,bandCount:c.bandCount,extent:m,spatialReference:w,pixelSize:S,pixelType:c.pixelType.toLowerCase(),statistics:f,histograms:M,keyProperties:p,storageInfo:x})}const Ml=()=>be.getLogger("esri.views.2d.engine.flow.dataUtils"),X4e=10;async function Q4e(e,t,r,i){const s=performance.now(),n=e5e(t,r),o=performance.now(),a=r5e(t,n,r.width,r.height),l=performance.now(),u=s5e(a),c=performance.now(),p=e==="Streamlines"?n5e(u,X4e):o5e(u),f=performance.now();return ce("esri-2d-profiler")&&(Ml().info("I.1","_createFlowFieldFromData (ms)",Math.round(o-s)),Ml().info("I.2","_getStreamlines (ms)",Math.round(l-o)),Ml().info("I.3","createAnimatedLinesData (ms)",Math.round(c-l)),Ml().info("I.4","create{Streamlines|Particles}Mesh (ms)",Math.round(f-c)),Ml().info("I.5","createFlowMesh (ms)",Math.round(f-s)),Ml().info("I.6","Mesh size (bytes)",p.vertexData.buffer.byteLength+p.indexData.buffer.byteLength)),await Promise.resolve(),dr(i),p}function e5e(e,t){const r=i5e(t.data,t.width,t.height,e.smoothing);return e.interpolate?(i,s)=>{const n=Math.floor(i),o=Math.floor(s);if(n<0||n>=t.width)return[0,0];if(o<0||o>=t.height)return[0,0];const a=i-n,l=s-o,u=n,c=o,p=n<t.width-1?n+1:n,f=o<t.height-1?o+1:o,m=r[2*(c*t.width+u)],g=r[2*(c*t.width+p)],b=r[2*(f*t.width+u)],w=r[2*(f*t.width+p)],S=r[2*(c*t.width+u)+1],M=r[2*(c*t.width+p)+1];return[(m*(1-l)+b*l)*(1-a)+(g*(1-l)+w*l)*a,(S*(1-l)+r[2*(f*t.width+u)+1]*l)*(1-a)+(M*(1-l)+r[2*(f*t.width+p)+1]*l)*a]}:(i,s)=>{const n=Math.round(i),o=Math.round(s);return n<0||n>=t.width||o<0||o>=t.height?[0,0]:[r[2*(o*t.width+n)],r[2*(o*t.width+n)+1]]}}function t5e(e,t,r,i,s,n,o,a,l){const u=[];let c=r,p=i,f=0,[m,g]=t(c,p);m*=e.velocityScale,g*=e.velocityScale;const b=Math.sqrt(m*m+g*g);let w,S;u.push({x:c,y:p,t:f,speed:b});for(let M=0;M<e.verticesPerLine;M++){let[x,_]=t(c,p);x*=e.velocityScale,_*=e.velocityScale;const I=Math.sqrt(x*x+_*_);if(I<e.minSpeedThreshold)return u;const E=x/I,A=_/I;if(c+=E*e.segmentLength,p+=A*e.segmentLength,f+=e.segmentLength/I,Math.acos(E*w+A*S)>e.maxTurnAngle)return u;if(e.collisions){const C=Math.round(c*l),O=Math.round(p*l);if(C<0||C>o-1||O<0||O>a-1)return u;const R=n[O*o+C];if(R!==-1&&R!==s)return u;n[O*o+C]=s}u.push({x:c,y:p,t:f,speed:I}),w=E,S=A}return u}function r5e(e,t,r,i){const s=[],n=new Lw,o=1/Math.max(e.lineCollisionWidth,1),a=Math.round(r*o),l=Math.round(i*o),u=new Int32Array(a*l);for(let p=0;p<u.length;p++)u[p]=-1;const c=[];for(let p=0;p<i;p+=e.lineSpacing)for(let f=0;f<r;f+=e.lineSpacing)c.push({x:f,y:p,sort:n.getFloat()});c.sort((p,f)=>p.sort-f.sort);for(const{x:p,y:f}of c)if(n.getFloat()<e.density){const m=t5e(e,t,p,f,s.length,u,a,l,o);if(m.length<2)continue;s.push(m)}return s}function i5e(e,t,r,i){if(i===0)return e;const s=Math.round(3*i),n=new Array(2*s+1);let o=0;for(let u=-s;u<=s;u++){const c=Math.exp(-u*u/(i*i));n[u+s]=c,o+=c}for(let u=-s;u<=s;u++)n[u+s]/=o;const a=new Float32Array(e.length);for(let u=0;u<r;u++)for(let c=0;c<t;c++){let p=0,f=0;for(let m=-s;m<=s;m++){if(c+m<0||c+m>=t)continue;const g=n[m+s];p+=g*e[2*(u*t+(c+m))],f+=g*e[2*(u*t+(c+m))+1]}a[2*(u*t+c)]=p,a[2*(u*t+c)+1]=f}const l=new Float32Array(e.length);for(let u=0;u<t;u++)for(let c=0;c<r;c++){let p=0,f=0;for(let m=-s;m<=s;m++){if(c+m<0||c+m>=r)continue;const g=n[m+s];p+=g*a[2*((c+m)*t+u)],f+=g*a[2*((c+m)*t+u)+1]}l[2*(c*t+u)]=p,l[2*(c*t+u)+1]=f}return l}function s5e(e,t){const r=new Lw,i=e.reduce((l,u)=>l+u.length,0),s=new Float32Array(4*i),n=new Array(e.length);let o=0,a=0;for(const l of e){const u=o;for(const c of l)s[4*o]=c.x,s[4*o+1]=c.y,s[4*o+2]=c.t,s[4*o+3]=c.speed,o++;n[a++]={startVertex:u,numberOfVertices:l.length,totalTime:l[l.length-1].t,timeSeed:r.getFloat()}}return{lineVertices:s,lineDescriptors:n}}function n5e(e,t){const{lineVertices:i,lineDescriptors:s}=e;let n=0,o=0;for(const m of s)n+=2*m.numberOfVertices,o+=6*(m.numberOfVertices-1);const a=new Float32Array(n*9),l=new Uint32Array(o);let u=0,c=0;function p(){l[c++]=u-2,l[c++]=u,l[c++]=u-1,l[c++]=u,l[c++]=u+1,l[c++]=u-1}function f(m,g,b,w,S,M,x,_){const I=u*9;let E=0;a[I+E++]=m,a[I+E++]=g,a[I+E++]=1,a[I+E++]=b,a[I+E++]=M,a[I+E++]=x,a[I+E++]=w/2,a[I+E++]=S/2,a[I+E++]=_,u++,a[I+E++]=m,a[I+E++]=g,a[I+E++]=-1,a[I+E++]=b,a[I+E++]=M,a[I+E++]=x,a[I+E++]=-w/2,a[I+E++]=-S/2,a[I+E++]=_,u++}for(const m of s){const{totalTime:g,timeSeed:b}=m;let w=null,S=null,M=null,x=null,_=null,I=null;for(let E=0;E<m.numberOfVertices;E++){const A=i[4*(m.startVertex+E)],C=i[4*(m.startVertex+E)+1],O=i[4*(m.startVertex+E)+2],R=i[4*(m.startVertex+E)+3];let D=null,N=null,U=null,J=null;if(E>0){D=A-w,N=C-S;const y=Math.sqrt(D*D+N*N);if(D/=y,N/=y,E>1){let T=D+_,$=N+I;const P=Math.sqrt(T*T+$*$);T/=P,$/=P;const z=Math.min(1/(T*D+$*N),t);T*=z,$*=z,U=-$,J=T}else U=-N,J=D;U!==null&&J!==null&&(f(w,S,M,U,J,g,b,R),p())}w=A,S=C,M=O,_=D,I=N,x=R}f(w,S,M,-I,_,g,b,x)}return{vertexData:a,indexData:l}}function o5e(e){const{lineVertices:s,lineDescriptors:n}=e;let o=0,a=0;for(const y of n){const T=y.numberOfVertices-1;o+=4*T*2,a+=6*T*2}const l=new Float32Array(o*16),u=new Uint32Array(a);let c,p,f,m,g,b,w,S,M,x,_,I,E,A,C=0,O=0;function R(){u[O++]=C-8,u[O++]=C-7,u[O++]=C-6,u[O++]=C-7,u[O++]=C-5,u[O++]=C-6,u[O++]=C-4,u[O++]=C-3,u[O++]=C-2,u[O++]=C-3,u[O++]=C-1,u[O++]=C-2}function D(y,T,$,P,z,X,ae,te,ye,Me,De,$e,gt,dt){const Je=C*16;let He=0;for(const mt of[1,2])for(const zt of[1,2,3,4])l[Je+He++]=y,l[Je+He++]=T,l[Je+He++]=$,l[Je+He++]=P,l[Je+He++]=ae,l[Je+He++]=te,l[Je+He++]=ye,l[Je+He++]=Me,l[Je+He++]=mt,l[Je+He++]=zt,l[Je+He++]=gt,l[Je+He++]=dt,l[Je+He++]=z/2,l[Je+He++]=X/2,l[Je+He++]=De/2,l[Je+He++]=$e/2,C++}function N(y,T){let $=M+_,P=x+I;const z=Math.sqrt($*$+P*P);$/=z,P/=z;const X=M*$+x*P;$/=X,P/=X;let ae=_+E,te=I+A;const ye=Math.sqrt(ae*ae+te*te);ae/=ye,te/=ye;const Me=_*ae+I*te;ae/=Me,te/=Me,D(c,p,f,m,-P,$,g,b,w,S,-te,ae,y,T),R()}function U(y,T,$,P,z,X){if(M=_,x=I,_=E,I=A,M==null&&x==null&&(M=_,x=I),g!=null&&b!=null){E=y-g,A=T-b;const ae=Math.sqrt(E*E+A*A);E/=ae,A/=ae}M!=null&&x!=null&&N(z,X),c=g,p=b,f=w,m=S,g=y,b=T,w=$,S=P}function J(y,T){M=_,x=I,_=E,I=A,M==null&&x==null&&(M=_,x=I),M!=null&&x!=null&&N(y,T)}for(const y of n){c=null,p=null,f=null,m=null,g=null,b=null,w=null,S=null,M=null,x=null,_=null,I=null,E=null,A=null;const{totalTime:T,timeSeed:$}=y;for(let P=0;P<y.numberOfVertices;P++)U(s[4*(y.startVertex+P)],s[4*(y.startVertex+P)+1],s[4*(y.startVertex+P)+2],s[4*(y.startVertex+P)+3],T,$);J(T,$)}return{vertexData:l,indexData:u}}function eG(e,t){const r=t.pixels,{width:i,height:s}=t,n=new Float32Array(i*s*2),o=t.mask||new Uint8Array(i*s*2);if(t.mask||o.fill(255),e==="vector-uv")for(let a=0;a<i*s;a++)n[2*a]=r[0][a],n[2*a+1]=-r[1][a];else if(e==="vector-magdir")for(let a=0;a<i*s;a++){const l=r[0][a],u=H2(r[1][a]),c=Math.cos(u-Math.PI/2),p=Math.sin(u-Math.PI/2);n[2*a]=c*l,n[2*a+1]=p*l}return{data:n,mask:o,width:i,height:s}}async function Vat(e,t,r,i,s,n){const o=performance.now(),a=Un(t.spatialReference);if(!a){const _=await tG(e,t,r,i,s,n);return ce("esri-2d-profiler")&&Ml().info("I.7","loadImagery, early exit (ms)",Math.round(performance.now()-o)),ce("esri-2d-profiler")&&Ml().info("I.9","Number of parts",1),_}const[l,u]=a.valid,c=u-l,p=Math.ceil(t.width/c),f=t.width/p,m=Math.round(r/p);let g=t.xmin;const b=[],w=performance.now();for(let _=0;_<p;_++){const I=new yt({xmin:g,xmax:g+f,ymin:t.ymin,ymax:t.ymax,spatialReference:t.spatialReference});b.push(tG(e,I,m,i,s,n)),g+=f}const S=await Promise.all(b);ce("esri-2d-profiler")&&Ml().info("I.8","All calls to _fetchPart (ms)",Math.round(performance.now()-w)),ce("esri-2d-profiler")&&Ml().info("I.9","Number of parts",S.length);const M={data:new Float32Array(r*i*2),mask:new Uint8Array(r*i),width:r,height:i};let x=0;for(const _ of S){for(let I=0;I<_.height;I++)for(let E=0;E<_.width;E++)x+E>=r||(M.data[2*(I*r+x+E)]=_.data[2*(I*_.width+E)],M.data[2*(I*r+x+E)+1]=_.data[2*(I*_.width+E)+1],M.mask[I*r+x+E]=_.mask[I*_.width+E]);x+=_.width}return ce("esri-2d-profiler")&&Ml().info("I.10","loadImagery, general exit (ms)",Math.round(performance.now()-o)),M}async function tG(e,t,r,i,s,n){const o={requestProjectedLocalDirections:!0,signal:n};if(s!=null&&(o.timeExtent=s),e.type==="imagery"){await e.load({signal:n});const u=e.rasterInfo.dataType,c=await e.fetchImage(t,r,i,o);return c?.pixelData?.pixelBlock==null?{data:new Float32Array(r*i*2),mask:new Uint8Array(r*i),width:r,height:i}:eG(u,c.pixelData.pixelBlock)}await e.load({signal:n});const a=e.serviceRasterInfo.dataType,l=await e.fetchPixels(t,r,i,o);return l?.pixelBlock==null?{data:new Float32Array(r*i*2),mask:new Uint8Array(r*i),width:r,height:i}:eG(a,l.pixelBlock)}const a5e=new Set(["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"]),l5e=JJ(Bo,{min:0,max:255});function u5e(e){if(!e)return null;const t=JSON.stringify(e).match(/"rasterFunction":"(.*?")/gi),r=t?.map(i=>i.slice(18,-1));return r?r.join("/"):null}const c5e=e=>{let t=class extends e{constructor(){super(...arguments),this._functionRasterInfos={},this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},this._cachedRendererJson=null,this._serviceSupportsMosaicRule=null,this._rasterAttributeTableFieldPrefix="Raster.",this.adjustAspectRatio=null,this.bandIds=void 0,this.capabilities=null,this.compressionQuality=void 0,this.compressionTolerance=.01,this.copyright=null,this.defaultMosaicRule=null,this.definitionExpression=null,this.exportImageServiceParameters=null,this.rasterInfo=null,this.fields=null,this.fullExtent=null,this.hasMultidimensions=!1,this.imageMaxHeight=4100,this.imageMaxWidth=4100,this.interpolation=void 0,this.minScale=0,this.maxScale=0,this.multidimensionalInfo=null,this.multidimensionalSubset=null,this.noData=null,this.noDataInterpretation=void 0,this.objectIdField=null,this.geometryType="polygon",this.typeIdField=null,this.types=[],this.pixelFilter=null,this.raster=void 0,this.sourceType=null,this.viewId=void 0,this.symbolizer=null,this.rasterFunctionInfos=null,this.serviceDataType=null,this.spatialReference=null,this.pixelType=null,this.serviceRasterInfo=null,this.sourceJSON=null,this.url=null,this.version=void 0}initialize(){this._set("exportImageServiceParameters",new pi({layer:this}))}readServiceSupportsMosaicRule(i,s){return this._isMosaicRuleSupported(s)}get _rasterFunctionNamesIndex(){const i=new Map;return!this.rasterFunctionInfos||this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.length<1||this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.forEach(s=>{i.set(s.name.toLowerCase().replaceAll(/ /gi,"_"),s.name)}),i}readBandIds(i,s){if(Array.isArray(i)&&i.length>0&&i.every(n=>typeof n=="number"))return i}readCapabilities(i,s){return this._readCapabilities(s)}writeCompressionQuality(i,s,n){i!=null&&this.format!=="lerc"&&(s[n]=i)}writeCompressionTolerance(i,s,n){this.format==="lerc"&&i!=null&&(s[n]=i)}readDefaultMosaicRule(i,s){return this._serviceSupportsMosaicRule?Go.fromJSON(s):null}get fieldsIndex(){return this.fields?new LA(this.fields):null}set format(i){i&&a5e.has(i.toLowerCase())&&this._set("format",i.toLowerCase())}readFormat(i,s){return s.serviceDataType==="esriImageServiceDataTypeVector-UV"||s.serviceDataType==="esriImageServiceDataTypeVector-MagDir"||this.pixelFilter!=null?"lerc":"jpgpng"}readMinScale(i,s){return s.minLOD!=null&&s.maxLOD!=null?i:0}readMaxScale(i,s){return s.minLOD!=null&&s.maxLOD!=null?i:0}set mosaicRule(i){let s=i;s?.mosaicMethod&&(s=Go.fromJSON({...s.toJSON(),mosaicMethod:s.mosaicMethod,mosaicOperation:s.mosaicOperation})),this._set("mosaicRule",s)}readMosaicRule(i,s){const n=i||s.mosaicRule;return n?Go.fromJSON(n):this._isMosaicRuleSupported(s)?Go.fromJSON(s):null}writeMosaicRule(i,s,n){let o=this.mosaicRule;const a=this.definitionExpression;o?a&&a!==o.where&&(o=o.clone(),o.where=a):a&&(o=new Go({where:a})),this._isValidCustomizedMosaicRule(o)&&(s[n]=o.toJSON())}writeNoData(i,s,n){i!=null&&typeof i=="number"&&(s[n]=l5e(i))}readObjectIdField(i,s){return i||(i=s.fields.find(o=>o.type==="esriFieldTypeOID"||o.type==="oid")?.name),i}get parsedUrl(){return gi(this.url)}readSourceType(i,s){return this._isMosaicDataset(s)?"mosaic-dataset":"raster-dataset"}set renderer(i){this.loaded&&(i=this._configRenderer(i)),this._set("renderer",i)}readRenderer(i,s,n){const o=s?.layerDefinition?.drawingInfo?.renderer,a=SEe(o,n);return a==null?null:(a.type==="vector-field"&&s.symbolTileSize&&!o.symbolTileSize&&(a.symbolTileSize=s.symbolTileSize),tre(a)||be.getLogger(this).warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),a)}writeRenderer(i,s,n){s.layerDefinition=s.layerDefinition||{},s.layerDefinition.drawingInfo=s.layerDefinition.drawingInfo||{},s.layerDefinition.drawingInfo.renderer=i.toJSON(),i.type==="vector-field"&&(s.symbolTileSize=i.symbolTileSize)}get rasterFields(){const i=this._rasterAttributeTableFieldPrefix,s=new Uo({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),n=new Uo({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),o=new Uo({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let a=this.fields?Z(this.fields):[];a.push(n),this.capabilities?.operations.supportsQuery&&this.fields&&this.fields.length>0&&a.push(s),this.version>=10.4&&this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.some(u=>u.name.toLowerCase()==="none")&&a.push(o),this.rasterFunctionInfos!=null&&this.rasterFunctionInfos.filter(u=>u.name.toLowerCase()!=="none").forEach(u=>{a.push(new Uo({name:"Raster.ServicePixelValue."+u.name,alias:u.name,domain:null,editable:!1,length:50,type:"string"}))}),this._isVectorDataSet()&&(a.push(new Uo({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),a.push(new Uo({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));const{attributeTable:l}=this.rasterInfo??{};if(l!=null){const u=l.fields.filter(c=>c.type!=="esriFieldTypeOID"&&c.name.toLowerCase()!=="value").map(c=>{const p=Z(c);return p.name=i+c.name,p});a=a.concat(u)}return a}get renderingRule(){return Al(be.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this.rasterFunction}set renderingRule(i){Al(be.getLogger(this),"renderingRule",{replacement:"rasterFunction",version:"4.27",warnOnce:!0}),this._set("rasterFunction",i)}set rasterFunction(i){let s=i;s?.rasterFunction&&(s=qt.fromJSON({...s.toJSON(),rasterFunction:s.rasterFunction,rasterFunctionArguments:s.rasterFunctionArguments})),this._set("rasterFunction",s)}readRasterFunction(i,s){const n=s.rasterFunctionInfos;return s.renderingRule||n?.length&&n[0].name!=="None"?this._isRFTJson(s.renderingRule)?qt.fromJSON({rasterFunctionDefinition:s.renderingRule}):qt.fromJSON(s.renderingRule||{rasterFunctionInfos:s.rasterFunctionInfos}):null}readSpatialReference(i,s){const n=i||s.extent.spatialReference;return n?Fe.fromJSON(n):null}readPixelType(i){return av.fromJSON(i)||i}writePixelType(i,s,n){this.serviceRasterInfo!=null&&this.pixelType===this.serviceRasterInfo.pixelType||(s[n]=av.toJSON(i))}readVersion(i,s){let n=s.currentVersion;return n||(n=s.hasOwnProperty("fields")||s.hasOwnProperty("timeInfo")?10:9.3),n}applyFilter(i){let s=i;return this.pixelFilter&&(s=this._clonePixelData(i),this.pixelFilter(s)),s}async applyRenderer(i,s){let n=i;const{renderer:o,symbolizer:a,pixelFilter:l,bandIds:u}=this;if(!this._isPicture()&&o&&a&&!l){const c=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(o.toJSON()),p=this._rasterJobHandler.instance;if(p){c&&(a.bind(),await p.updateSymbolizer(a,s),this._cachedRendererJson=o.toJSON());const f=await p.symbolize({bandIds:u,...i},s);n={extent:i.extent,pixelBlock:f}}else n={extent:i.extent,pixelBlock:a.symbolize({bandIds:u,...i})}}return n}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}async computeAngles(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputeAngles)throw new K("imagery-layer:compute-angles","this operation is not supported on the input image service");return K$e(this.url,i,this._getRequestOptions(s))}async computePixelSpaceLocations(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputePixelLocation)throw new K("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");return X$e(this.url,i,this._getRequestOptions(s))}async computeHistograms(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputeHistograms)throw new K("imagery-layer:compute-histograms","this operation is not supported on the input image service");return i=Z(i),this._applyMosaicAndRenderingRules(i),e4e(this.url,i,this._getRequestOptions(s))}async computeStatisticsHistograms(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsComputeStatisticsHistograms)throw new K("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");return i=Z(i),this._applyMosaicAndRenderingRules(i),Q$e(this.url,i,this._getRequestOptions(s))}async measureHeight(i,s){const n=await this._fetchCapabilities(s?.signal);if(!(i.operationType==="base-and-top"?n.mensuration.supportsHeightFromBaseAndTop:i.operationType==="base-and-top-shadow"?n.mensuration.supportsHeightFromBaseAndTopShadow:n.mensuration.supportsHeightFromTopAndTopShadow))throw new K("imagery-layer:measure-height","this operation is not supported on the input image service");return i=Z(i),this._applyMosaicAndRenderingRules(i),r4e(this.url,i,this._getRequestOptions(s))}async measureAreaAndPerimeter(i,s){const n=await this._fetchCapabilities(s?.signal);if(!(n.mensuration.supportsAreaAndPerimeter&&(!i.is3D||n.mensuration.supports3D)))throw new K("imagery-layer:measure-area-and-perimeter","this operation is not supported on the input image service");return i=Z(i),this._applyMosaicAndRenderingRules(i),i4e(this.url,i,this._getRequestOptions(s))}async measureDistanceAndAngle(i,s){const n=await this._fetchCapabilities(s?.signal);if(!(n.mensuration.supportsDistanceAndAngle&&(!i.is3D||n.mensuration.supports3D)))throw new K("imagery-layer:measure-distance-and-angle","this operation is not supported on the input image service");return i=Z(i),this._applyMosaicAndRenderingRules(i),n4e(this.url,i,this._getRequestOptions(s))}async measurePointOrCentroid(i,s){const n=await this._fetchCapabilities(s?.signal);if(!(n.mensuration.supportsPointOrCentroid&&(!i.is3D||n.mensuration.supports3D)))throw new K("imagery-layer:measure-point-or-centroid","this operation is not supported on the input image service");return i=Z(i),this._applyMosaicAndRenderingRules(i),s4e(this.url,i,this._getRequestOptions(s))}async measureLengthFromImage(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsMeasureFromImage)throw new K("imagery-layer:measure-length-from-image","this operation is not supported on the input image service");if(i.geometry.type!=="polyline")throw new K("imagery-layer:measure-length-from-image","this input geometry must be a polyline");return o4e(this.url,i,this._getRequestOptions(s))}async measureAreaFromImage(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsMeasureFromImage)throw new K("imagery-layer:measure-area-from-image","this operation is not supported on the input image service");if(i.geometry.type!=="polygon")throw new K("imagery-layer:measure-area-from-image","this input geometry must be a polygon");return a4e(this.url,i,this._getRequestOptions(s))}getField(i){const{fieldsIndex:s}=this;return s?.get(i)}getFieldDomain(i,s){const n=this.getField(i);return n?n.domain:null}async fetchImage(i,s,n,o={}){if(i==null||s==null||n==null)throw new K("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required.");if(this.renderer||this.symbolizer){const p=await this._generateRasterInfo(this.rasterFunction,{signal:o.signal});p&&(this.rasterInfo=p)}const a=this.getExportImageServiceParameters(i,s,n,o.timeExtent);if(a==null){if(o.requestAsImageElement&&this._canRequestImageElement(this.format)){const S=document.createElement("canvas");return S.width=s,S.height=n,o.returnImageBitmap?{imageBitmap:await TI(S,`${r(this.parsedUrl)}/exportImage`,o.signal)}:{imageOrCanvasElement:S}}const{bandIds:p,rasterInfo:f}=this,m=(p?.length||f.bandCount)??0,g=s*n,b=f.pixelType,w=[];for(let S=0;S<m;S++)w.push(It.createEmptyBand(b,g));return{pixelData:{pixelBlock:new It({width:s,height:n,pixels:w,mask:new Uint8Array(g),pixelType:b}),extent:i}}}const l=!!o.requestAsImageElement&&!this.pixelFilter,u=l&&!!o.returnImageBitmap,c={imageServiceParameters:a,imageProps:{extent:i,width:s,height:n,format:this.format},requestAsImageElement:l,returnImageBitmap:u,signal:o.signal};return this._requestArrayBuffer(c)}fetchKeyProperties(i){return Re(r(this.parsedUrl)+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3?i?.rasterFunction:null})}).then(s=>s.data)}fetchRasterAttributeTable(i){return this.version<10.1?Promise.reject(new K("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):Re(r(this.parsedUrl)+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3?i?.rasterFunction:null})}).then(s=>Yy.fromJSON(s.data))}getCatalogItemRasterInfo(i,s){const n={...s,query:this._getQueryParams()};return K4e(r(this.parsedUrl),i,n)}async getCatalogItemICSInfo(i,s){const{data:n}=await Re(r(this.parsedUrl)+"/"+i+"/info/ics",{query:this._getQueryParams(),...s}),o=n?.ics;if(!o)return;let a=null;try{a=(await Re(r(this.parsedUrl)+"/"+i+"/info",{query:this._getQueryParams(),...s})).data.extent}catch{}if(!a?.spatialReference)return{ics:o,icsToPixelTransform:null,icsExtent:null,northDirection:null};const l=this.version>=10.7?Re(r(this.parsedUrl)+"/"+i+"/info/icstopixel",{query:this._getQueryParams(),...s}).then(T=>T.data).catch(()=>({})):{},u=a.spatialReference,c={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[a]}),inSR:Ad(u),outSR:"0:"+i},p=Re(r(this.parsedUrl)+"/project",{query:this._getQueryParams(c),...s}).then(T=>T.data).catch(()=>({})),f=5,m=(a.xmin+a.xmax)/2,g=(a.ymax-a.ymin)/(f+1),b=a.ymin+g,w=[];for(let T=0;T<f;T++)w.push({x:m,y:b+g*T});const S={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:w}),inSR:Ad(u),outSR:"0:"+i},M=Re(r(this.parsedUrl)+"/project",{query:this._getQueryParams(S),...s}).then(T=>T.data).catch(()=>({})),x=await Promise.all([l,p,M]);let _=x[0].ipxf;if(_==null){const T=o.geodataXform?.xf_0;T?.name?.toLowerCase()==="topup"&&T?.coefficients?.length===6&&(_={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:T.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}const I=yt.fromJSON(x[1]?.geometries?.[0]);I&&(I.spatialReference=new Fe({wkid:0,imageCoordinateSystem:o}));const E=x[2].geometries?x[2].geometries.filter(T=>T?.x!=null&&T.y!=null&&T.x!=="NaN"&&T.y!=="NaN"):[],A=E.length;if(A<3)return{ics:o,icsToPixelTransform:_,icsExtent:I,northDirection:null};let C=0,O=0,R=0,D=0;for(let T=0;T<A;T++)C+=E[T].x,O+=E[T].y,R+=E[T].x*E[T].x,D+=E[T].x*E[T].y;const N=(A*D-C*O)/(A*R-C*C);let U=0;const J=E[f-1].x>E[0].x,y=E[f-1].y>E[0].y;return N===1/0?U=y?90:270:N===0?U=J?0:180:N>0?U=J?180*Math.atan(N)/Math.PI:180*Math.atan(N)/Math.PI+180:N<0&&(U=y?180+180*Math.atan(N)/Math.PI:360+180*Math.atan(N)/Math.PI),{ics:o,icsToPixelTransform:_,icsExtent:I,northDirection:U}}async generateRasterInfo(i,s){if(i=zr(qt,i),this.serviceRasterInfo&&(!i||i.functionName?.toLowerCase()==="none"||this._isVectorFieldResampleFunction(i)))return this.serviceRasterInfo;const n=u5e(i);if(!n)throw new K("imagery-layer:generate-raster-info","the rendering rule is not supported");if(this._functionRasterInfos[n])return this._functionRasterInfos[n];const o={...s,query:this._getQueryParams()},a=Z4e(r(this.parsedUrl),i,o);this._functionRasterInfos[n]=a;try{return await a}catch(l){throw this._functionRasterInfos[n]=null,l}}getExportImageServiceParameters(i,s,n,o){i=i.clone().shiftCentralMeridian();const a=C1(i.spatialReference,r(this.parsedUrl));this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const l=this.exportImageServiceParameters.toJSON(),{bandIds:u,noData:c}=l;let{renderingRule:p}=l;const f=this.rasterFunction?.rasterFunctionDefinition,m=!this.renderer||this.renderer.type==="raster-stretch";if(u?.length&&this._hasRasterFunction(this.rasterFunction)&&!f&&m){const w={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:u}};if(p.rasterFunction==="Stretch")w.rasterFunctionArguments.Raster=p.rasterFunctionArguments.Raster,p.rasterFunctionArguments.Raster=w;else if(p.rasterFunction==="Colormap"){const S=p.rasterFunctionArguments.Raster;S?.rasterFunction==="Stretch"?(w.rasterFunctionArguments.Raster=S.rasterFunctionArguments.Raster,S.rasterFunctionArguments.Raster=w):(w.rasterFunctionArguments.Raster=S,p.rasterFunctionArguments.Raster=w)}else w.rasterFunctionArguments.Raster=p,p=w;l.bandIds=void 0}else l.bandIds=u?.join(",");Array.isArray(c)&&c.length>0&&(l.noData=c.join(","));const g=this._processMultidimensionalIntersection(null,o,this.exportImageServiceParameters.mosaicRule);if(g.isOutSide)return null;l.mosaicRule=g.mosaicRule!=null?JSON.stringify(g.mosaicRule):null,o=g.timeExtent,l.renderingRule=this._getRenderingRuleString(qt.fromJSON(p));const b={};if(o!=null){const{start:w,end:S}=o.toJSON();w&&S&&w===S?b.time=""+w:w==null&&S==null||(b.time=`${w??"null"},${S??"null"}`)}return{bbox:i.xmin+","+i.ymin+","+i.xmax+","+i.ymax,bboxSR:a,imageSR:a,size:s+","+n,...l,...b}}async getSamples(i,s){if(!(await this._fetchCapabilities(s?.signal))?.operations.supportsGetSamples)throw new K("imagery-layer:get-samples","getSamples operation is not supported on the input image service");i=Z(i);const{raster:o}=this;return o&&i.raster==null&&(i.raster=o),t4e(this.url,i,this._getRequestOptions(s))}async identify(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsIdentify)throw new K("imagery-layer:identify","identify operation is not supported on the input image service");i=Z(i),this.version<10.91&&i.geometry?.type==="extent"&&(i.geometry=Rs.fromExtent(i.geometry));const n=this._processMultidimensionalIntersection(i.geometry,i.timeExtent,i.mosaicRule||this.mosaicRule);if(n.isOutSide)throw new K("imagery-layer:identify","the request cannot be fulfilled when falling outside of the multidimensional subset");i.timeExtent=n.timeExtent,i.mosaicRule=n.mosaicRule;const{raster:o,rasterFunction:a}=this;return a&&i.rasterFunction==null&&(i.rasterFunction=a),o&&i.raster==null&&(i.raster=o),qz(this.url,i,this._getRequestOptions(s))}async imageToMap(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsImageToMap)throw new K("imagery-layer:image-to-map","imageToMap operation is not supported on the input image service");return c4e(r(this.parsedUrl),i,this._getRequestOptions(s))}async imageToMapMultiray(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsImageToMapMultiray)throw new K("imagery-layer:image-to-map-multiray","imageToMapMultiray operation is not supported on the input image service");return h4e(r(this.parsedUrl),i,this._getRequestOptions(s))}async mapToImage(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsMapToImage)throw new K("imagery-layer:map-to-image","mapToImage operation is not supported on the input image service");return p4e(r(this.parsedUrl),i,this._getRequestOptions(s))}async findImages(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsFindImages)throw new K("imagery-layer:find-images","findImages operation is not supported on the input image service");return f4e(r(this.parsedUrl),i,this._getRequestOptions(s))}async getImageUrl(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsGetImageUrl)throw new K("imagery-layer:get-image-url","getImageUrl operation is not supported on the input image service");return d4e(r(this.parsedUrl),i,this._getRequestOptions(s))}createQuery(){return new Ci({outFields:["*"],returnGeometry:!0,where:this.definitionExpression||"1=1"})}async queryBoundary(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsQueryBoundary)throw new K("imagery-layer:query-boundary","queryBoundary operation is not supported on the input image service");return i=i??{outSpatialReference:this.spatialReference},l4e(r(this.parsedUrl),i,this._getRequestOptions(s))}async queryRasters(i,s){return{query:i,requestOptions:s}=await this._prepareForQuery(i,s),B4e(this.url,i,s)}async queryObjectIds(i,s){return{query:i,requestOptions:s}=await this._prepareForQuery(i,s),z8(this.url,i,s)}async queryGPSInfo(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsQueryGPSInfo)throw new K("imagery-layer:query-gps-info","queryGPSInfo operation is not supported on the input image service");return i=i??{where:"1=1"},u4e(r(this.parsedUrl),i,this._getRequestOptions(s))}async queryRasterCount(i,s){return{query:i,requestOptions:s}=await this._prepareForQuery(i,s),Vre(this.url,i,s)}async queryVisibleRasters(i,s){if(!i)throw new K("imagery-layer: query-visible-rasters","missing query parameter");await this.load();const{pixelSize:n,returnDomainValues:o,returnTopmostRaster:a,showNoDataRecords:l}=s||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let u=!1,c=null,p=null;const f="raster.servicepixelvalue",m=this._rasterFunctionNamesIndex;if(i.outFields!=null&&(u=i.outFields.some(I=>!I.toLowerCase().includes(f)),this.version>=10.4)){const I=i.outFields.filter(A=>A.toLowerCase().includes(f)&&A.length>f.length).map(A=>{const C=A.slice(f.length+1);return[this._updateRenderingRulesFunctionName(C,m),C]});c=I.map(A=>new qt({functionName:A[0]})),p=I.map(A=>A[1]);const{rasterFunction:E}=this;c.length===0?E?.functionName?(c.push(E),p.push(E.functionName)):c=null:E?.functionName&&!c.some(A=>A.functionName===E.functionName)&&(c.push(E),p.push(E.functionName))}const g=i.outSpatialReference==null||i.outSpatialReference.equals(this.spatialReference),{multidimensionalSubset:b}=this;let w=i.timeExtent||this.timeExtent;if(b){const{isOutside:I,intersection:E}=y5(b,{geometry:i.geometry,timeExtent:i.timeExtent,multidimensionalDefinition:this.exportImageServiceParameters.mosaicRule?.multidimensionalDefinition});if(I)throw new K("imagery-layer:query-visible-rasters","the request cannot be fulfilled when falling outside of the multidimensional subset");E?.timeExtent!=null&&(w=E.timeExtent)}const S=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,w);let M=i.geometry;this.version<10.91&&M?.type==="extent"&&(M=Rs.fromExtent(M));const x=this._getQueryParams({geometry:M,timeExtent:w,mosaicRule:S,rasterFunction:this.version<10.4?this.rasterFunction:null,rasterFunctions:c,pixelSize:n,returnCatalogItems:u,returnGeometry:g,raster:this.raster,maxItemCount:a?1:null});delete x.f;const _=new Pre(x);try{await this._generateRasterInfo(this.rasterFunction);const I=await qz(this.url,_,{signal:s?.signal,query:{...this.customParameters}}),E=i.outFields,A=I.value!=null&&I.value.toLowerCase().includes("nodata");if(!(u&&!g&&I?.catalogItems?.features.length&&(l||!A)))return this._processVisibleRastersResponse(I,{returnDomainValues:o,templateRRFunctionNames:p,showNoDataRecords:l,templateFields:E});const C=this.objectIdField||"ObjectId",O=I.catalogItems?.features??[],R=O.map(U=>U.attributes?.[C]),D=new Ci({objectIds:R,returnGeometry:!0,outSpatialReference:i.outSpatialReference,outFields:[C]}),N=await this.queryRasters(D);return N?.features?.length&&N.features.forEach(U=>{O.forEach(J=>{J.attributes[C]===U.attributes[C]&&(J.geometry=new Rs(U.geometry),i.outSpatialReference!=null&&(J.geometry.spatialReference=i.outSpatialReference))})}),this._processVisibleRastersResponse(I,{returnDomainValues:o,templateRRFunctionNames:p,showNoDataRecords:l,templateFields:E})}catch{throw new K("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")}}async fetchVariableStatisticsHistograms(i,s){const n=Re(r(this.parsedUrl)+"/statistics",{query:this._getQueryParams({variable:i}),signal:s}).then(l=>l.data?.statistics),o=Re(r(this.parsedUrl)+"/histograms",{query:this._getQueryParams({variable:i}),signal:s}).then(l=>l.data?.histograms),a=await Promise.all([n,o]);return a[0]&&a[0].forEach(l=>{l.avg=l.mean,l.stddev=l.standardDeviation}),{statistics:a[0]||null,histograms:a[1]||null}}async createFlowMesh(i,s){const n=this._rasterJobHandler.instance;return n?n.createFlowMesh(i,s):Q4e(i.meshType,i.simulationSettings,i.flowData,s.signal!=null?s.signal:new AbortController().signal)}getMultidimensionalSubsetVariables(i){const s=i??this.serviceRasterInfo.multidimensionalInfo;return KEe(this.multidimensionalSubset,s)}async _fetchService(i){await this._fetchServiceInfo(i),this.rasterInfo||(this.rasterInfo=this.serviceRasterInfo);const s=this.sourceJSON,n=this.serviceRasterInfo!=null?Promise.resolve(this.serviceRasterInfo):J4e(r(this.parsedUrl),s,{signal:i,query:this._getQueryParams()}).then(l=>(this._set("serviceRasterInfo",l),this._set("multidimensionalInfo",l.multidimensionalInfo),Y4e(l,s),l)),o=this._hasRasterFunction(this.rasterFunction)?this._generateRasterInfo(this.rasterFunction,{signal:i}):null,a=this._getRasterFunctionInfos();return Promise.all([n,o,a]).then(l=>{l[1]?this._set("rasterInfo",l[1]):this._set("rasterInfo",l[0]),l[2]&&this._set("rasterFunctionInfos",l[2]),this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this._set("renderer",null),be.getLogger(this).warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer")),this._set("renderer",this._configRenderer(this.renderer)),this.addHandles([ht(()=>this.rasterFunction,c=>{(this.renderer||this.symbolizer||this.popupEnabled&&this.popupTemplate)&&this._generateRasterInfo(c).then(p=>{p&&(this.rasterInfo=p)})})]);const{serviceRasterInfo:u}=this;u.multidimensionalInfo!=null&&this._updateMultidimensionalDefinition(u)})}_combineMosaicRuleWithTimeExtent(i,s){const n=this.timeInfo,{multidimensionalInfo:o}=this.serviceRasterInfo;if(i==null||o==null||s==null||n?.startField==null)return i;const{startField:a}=n,l=o.variables.some(b=>b.dimensions.some(w=>w.name===a))?a:"StdTime";if(i=i.clone(),this.sourceType==="mosaic-dataset")return i.multidimensionalDefinition=i.multidimensionalDefinition?.filter(b=>b.dimensionName!==l),this._cleanupMultidimensionalDefinition(i);i.multidimensionalDefinition=i.multidimensionalDefinition||[];const u=i.multidimensionalDefinition.filter(b=>b.dimensionName===l),c=s.start!=null?s.start.getTime():null,p=s.end!=null?s.end.getTime():null,f=c==null||p==null||c===p,m=f?[c||p]:[[c,p]],g=this.version>=10.8;if(u.length)u.forEach(b=>{b.dimensionName===l&&(g?(b.dimensionName=null,b.isSlice=!1,b.values=[]):(b.isSlice=f,b.values=m))});else if(!g){const b=i.multidimensionalDefinition.filter(w=>w.variableName!=null&&w.dimensionName==null);b.length?b.forEach(w=>{w.dimensionName=l,w.isSlice=f,w.values=m}):i.multidimensionalDefinition.push(new Nv({variableName:"",dimensionName:l,isSlice:f,values:m}))}return this._cleanupMultidimensionalDefinition(i)}_cleanupMultidimensionalDefinition(i){return i==null?null:(i.multidimensionalDefinition&&(i.multidimensionalDefinition=i.multidimensionalDefinition.filter(s=>!(!s.variableName&&!s.dimensionName)),i.multidimensionalDefinition.length===0&&(i.multidimensionalDefinition=null)),this.sourceType!=="mosaic-dataset"&&i.multidimensionalDefinition==null?null:i)}async _prepareForQuery(i,s){if(!(await this._fetchCapabilities(s?.signal)).operations.supportsQuery)throw new K("imagery-layer:query-rasters","query operation is not supported on the input image service");return i=i!=null?zr(Ci,i):this.createQuery(),s=this._getRequestOptions(s),this.raster&&(s.query={...s.query,raster:this.raster}),{query:i,requestOptions:s}}async _initJobHandler(){if(this._rasterJobHandler.connectionPromise!=null)return this._rasterJobHandler.connectionPromise;const i=new HEe;this._rasterJobHandler.connectionPromise=i.initialize().then(()=>{this._rasterJobHandler.instance=i},()=>{}),await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0,this._cachedRendererJson=null}_isSupportedRenderer(i){const{rasterInfo:s,rasterFunction:n}=this;return i.type==="unique-value"&&this._hasRasterFunction(n)&&s?.bandCount===1&&["u8","s8"].includes(s.pixelType)||s!=null&&i!=null&&JAe(s).includes(i.type)}async _fetchCapabilities(i){return this.capabilities||await this._fetchServiceInfo(i),this.capabilities}async _fetchServiceInfo(i){let s=this.sourceJSON;if(!s){const{data:n,ssl:o}=await Re(r(this.parsedUrl),{query:this._getQueryParams(),signal:i});s=n,this.sourceJSON=s,o&&(this.url=this.url.replace(/^http:/i,"https:"))}if(s.capabilities?.toLowerCase().split(",").map(n=>n.trim()).indexOf("tilesonly")>-1)throw new K("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(s,{origin:"service",url:this.parsedUrl})}_isMosaicDataset(i){return i.serviceSourceType?i.serviceSourceType==="esriImageServiceSourceTypeMosaicDataset":i.fields?.length>0}_isMosaicRuleSupported(i){if(!i)return!1;const s=this._isMosaicDataset(i),n=i.currentVersion>=10.71&&i.hasMultidimensions&&!(i.fields?.length>1);return s||n}_isVectorFieldResampleFunction(i){if(i==null)return!1;const{functionName:s,functionArguments:n}=i,o=s?.toLowerCase()==="resample",a=n?.ResampleType||n?.resampleType;return o&&(a===7||a===10)}_isPicture(){return!this.format||this.format.includes("jpg")||this.format.includes("png")}_configRenderer(i){const s=this._isPicture(),{rasterInfo:n}=this;if(!s&&!this.pixelFilter||this._isVectorDataSet()){if(!this.bandIds&&n.bandCount>=3){const a=Ire(n);!a||n.bandCount===3&&a[0]===0&&a[1]===1&&a[2]===2||(this.bandIds=a)}i||(i=WAe(n,{bandIds:this.bandIds,variableName:this.rasterFunction?null:this.mosaicRule?.multidimensionalDefinition?.[0].variableName}));const o=i$e(i.toJSON());this.symbolizer?(this.symbolizer.rendererJSON=o,this.symbolizer.rasterInfo=n):this.symbolizer=new d$e({rendererJSON:o,rasterInfo:n}),this.symbolizer.bind().success||(this.symbolizer=null)}return i}_clonePixelData(i){return i==null?i:{extent:i.extent&&i.extent.clone(),pixelBlock:i.pixelBlock!=null?i.pixelBlock.clone():null}}_getQueryParams(i){i?.renderingRule!=null&&typeof i.renderingRule!="string"&&(i.renderingRule=this._getRenderingRuleString(i.renderingRule));const{raster:s,viewId:n}=this;return{raster:s,viewId:n,f:"json",...i,...this.customParameters}}_getRequestOptions(i){return{...i,query:{...i?.query,...this.customParameters}}}_decodePixelBlock(i,s,n){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:i,options:s}):Dz(i,s,n)}async _getRasterFunctionInfos(i){const s=this.sourceJSON.rasterFunctionInfos;return this.loaded?s:s&&this.version>=10.3?s.length===1&&s[0].name.toLowerCase()==="none"?s:(await Re(r(this.parsedUrl)+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:i})).data?.rasterFunctionInfos:null}_canRequestImageElement(i){return!this.pixelFilter&&(!i||i.includes("png"))}async _requestArrayBuffer(i){const{imageProps:s,requestAsImageElement:n,returnImageBitmap:o,signal:a}=i;if(n&&this._canRequestImageElement(s.format)){const b=`${r(this.parsedUrl)}/exportImage`,{data:w}=await Re(b,{responseType:o?"blob":"image",query:this._getQueryParams({f:"image",...this.refreshParameters,...i.imageServiceParameters}),signal:a});return w instanceof Blob?{imageBitmap:await TI(w,b,a),params:s}:{imageOrCanvasElement:w,params:s}}const l=this._initJobHandler(),u=Re(r(this.parsedUrl)+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...i.imageServiceParameters}),signal:a}),c=(await Promise.all([u,l]))[0].data,p=s.format||"jpgpng";let f=p;if(f!=="bsq"&&f!=="bip"&&(f=UAe(c)),!f)throw new K("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(c)));const m={signal:a};return{pixelData:{pixelBlock:await(p==="gif"||p==="bmp"||p.includes("png")&&(f==="png"||f==="jpg")?Dz(c,{useCanvas:!0,...s},m):this._decodePixelBlock(c,{width:s.width,height:s.height,planes:null,pixelType:null,noDataValue:null,format:p},m)),extent:s.extent},params:s}}_generateRasterInfo(i,s){return this.generateRasterInfo(i,s).catch(()=>null)}_isValidCustomizedMosaicRule(i){return i&&JSON.stringify(i.toJSON())!==JSON.stringify(this.defaultMosaicRule?.toJSON())}_updateMultidimensionalDefinition(i){if(this._isValidCustomizedMosaicRule(this.mosaicRule))return;let s=YEe(i,{multidimensionalSubset:this.multidimensionalSubset});if(s!=null&&s.length>0){this.mosaicRule=this.mosaicRule||new Go;const n=this.mosaicRule.multidimensionalDefinition;!this.sourceJSON.defaultVariableName&&this.rasterFunction&&this.rasterFunction.functionName?.toLowerCase()!=="none"&&s.forEach(o=>o.variableName=""),s=s.filter(({variableName:o,dimensionName:a})=>o&&o!=="*"||a),!n?.length&&s.length&&(this.mosaicRule.multidimensionalDefinition=s)}}_processVisibleRastersResponse(i,s){s=s||{};const n=i.value,{templateRRFunctionNames:o,showNoDataRecords:a,returnDomainValues:l,templateFields:u}=s,c=i.processedValues;let p=i.catalogItems?.features,f=i.properties?.Values?.map(x=>x.replaceAll(/ /gi,", "))||[];const m=this.objectIdField||"ObjectId",g=typeof n=="string"&&n.toLowerCase().includes("nodata"),b=[];if(n&&!p&&!g){const x={};x[m]=0,f=[n],p=[new Ga({geometry:this.fullExtent,attributes:x})]}if(!p)return[];let w,S,M;this._updateResponseFieldNames(p,u),g&&!a&&(p=[]);for(let x=0;x<p.length;x++){if(w=p[x],n!=null){if(S=f[x],M=this.rasterFunction&&c&&c.length>0&&o&&o.length>0&&o.includes(this.rasterFunction.functionName)?c[o.indexOf(this.rasterFunction.functionName)]:n,S.toLowerCase()==="nodata"&&!a)continue;const _="Raster.ItemPixelValue",I="Raster.ServicePixelValue";w.attributes[_]=S,w.attributes[I]=M,this._updateFeatureWithMagDirValues(w,S);const E=this.fields&&this.fields.length>0;let A=this.rasterFunction&&this.serviceRasterInfo.attributeTable!=null?E?S:n:M;this.rasterFunction||(A=E?S:n),this._updateFeatureWithRasterAttributeTableValues(w,A)}if(w.sourceLayer=w.layer=this,l&&this._updateFeatureWithDomainValues(w),o&&c&&o.length===c.length)for(let _=0;_<o.length;_++){const I="Raster.ServicePixelValue."+o[_];w.attributes[I]=c[_]}b.push(p[x])}return b}_processMultidimensionalIntersection(i,s,n){const{multidimensionalSubset:o}=this;if(!o)return{isOutSide:!1,timeExtent:s,mosaicRule:n=this._combineMosaicRuleWithTimeExtent(n,s)};if(o){const{isOutside:a,intersection:l}=y5(o,{geometry:i,timeExtent:s});if(a)return{isOutSide:!0,timeExtent:null,mosaicRule:null};l?.timeExtent!=null&&(s=l.timeExtent)}if(n=this._combineMosaicRuleWithTimeExtent(n,s),n?.multidimensionalDefinition){const{isOutside:a}=y5(o,{multidimensionalDefinition:n.multidimensionalDefinition});if(a)return{isOutSide:!0,timeExtent:null,mosaicRule:null}}return{isOutSide:!1,timeExtent:s,mosaicRule:n}}_updateFeatureWithRasterAttributeTableValues(i,s){const n=this.rasterInfo.attributeTable||this.serviceRasterInfo.attributeTable;if(n==null)return;const{features:o,fields:a}=n,l=a.map(c=>c.name).find(c=>c.toLowerCase()==="value");if(!l)return;const u=o.filter(c=>c.attributes[l]===(s!=null?parseInt(s,10):null));u&&u[0]&&a.forEach(c=>{const p=this._rasterAttributeTableFieldPrefix+c.name;i.attributes[p]=u[0].attributes[c.name]})}_updateFeatureWithMagDirValues(i,s){if(!this._isVectorDataSet())return;const n=s.split(/,\s*/).map(c=>parseFloat(c)),o=n.map(c=>[c]),a=n.map(c=>({minValue:c,maxValue:c,noDataValue:null})),l=new It({height:1,width:1,pixelType:"f32",pixels:o,statistics:a});this.pixelFilter!=null&&this.pixelFilter({pixelBlock:l,extent:new yt(0,0,0,0,this.spatialReference)});const u=this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"?[l.pixels[0][0],l.pixels[1][0]]:$8([l.pixels[0][0],l.pixels[1][0]]);i.attributes["Raster.Magnitude"]=u[0],i.attributes["Raster.Direction"]=u[1]}_updateFeatureWithDomainValues(i){const s=this.fields&&this.fields.filter(n=>n.domain&&n.domain.type==="coded-value");s?.forEach(n=>{const o=i.attributes[n.name];if(o!=null){const a=n.domain.codedValues.find(l=>l.code===o);a&&(i.attributes[n.name]=a.name)}})}_updateResponseFieldNames(i,s){if(!s||s.length<1)return;const n=this.fieldsIndex;n!=null&&i.forEach(o=>{if(o?.attributes)for(const a of s){const l=n.get(a)?.name;l&&l!==a&&(o.attributes[a]=o.attributes[l],delete o.attributes[l])}})}_getRenderingRuleString(i){if(i){let s=i.toJSON();return s=s.rasterFunctionDefinition??s,(s.thumbnail||s.thumbnailEx)&&(s.thumbnail=s.thumbnailEx=null),JSON.stringify(s)}return null}_hasRasterFunction(i){return i?.functionName!=null&&i.functionName.toLowerCase()!=="none"}_updateRenderingRulesFunctionName(i,s){if(!i||i.length<1)return;if(i==="Raw")return i.replace("Raw","None");const n=i.toLowerCase().replaceAll(/ /gi,"_");return s.has(n)?s.get(n):i}_isRFTJson(i){return i?.name&&i.arguments&&i.function&&i.hasOwnProperty("functionType")}_isVectorDataSet(){return this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"}_applyMosaicAndRenderingRules(i){const{raster:s,mosaicRule:n,rasterFunction:o}=this;o&&"rasterFunction"in i&&i.rasterFunction==null&&(i.rasterFunction=o),n&&i.mosaicRule==null&&(i.mosaicRule=n),s&&i.raster==null&&(i.raster=s)}_readCapabilities(i){const s=i.capabilities?i.capabilities.toLowerCase().split(",").map(S=>S.trim()):["image","catalog"],{currentVersion:n,advancedQueryCapabilities:o,maxRecordCount:a}=i,l=s.includes("image"),u=i.serviceDataType==="esriImageServiceDataTypeElevation",c=!(!i.spatialReference&&!i.extent?.spatialReference),p=s.includes("edit"),f=s.includes("mensuration")&&c,m=i.mensurationCapabilities==null?[]:i.mensurationCapabilities.toLowerCase().split(",").map(S=>S.trim()),g=f&&m.includes("basic"),b=this._isMosaicDataset(i)&&s.includes("catalog"),w=s.includes("download");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:l,supportsExportImage:l,supportsIdentify:l,supportsImageToMap:n>=11.2&&b,supportsImageToMapMultiray:n>=11.2&&b,supportsMapToImage:n>=11.2&&b,supportsFindImages:n>=11.2&&b,supportsGetImageUrl:n>=11.3&&w,supportsMeasure:f,supportsMeasureFromImage:n>=11.2,supportsDownload:w,supportsQuery:b&&i.fields&&i.fields.length>0,supportsGetSamples:n>=10.2&&l,supportsProject:n>=10.3&&l,supportsComputeStatisticsHistograms:n>=10.4&&l,supportsQueryBoundary:n>=10.6&&l,supportsCalculateVolume:n>=10.7&&u,supportsComputePixelLocation:n>=10.7&&b,supportsComputeAngles:n>=10.91,supportsQueryGPSInfo:n>=11.2&&b,supportsAdd:p,supportsDelete:p,supportsEditing:p,supportsUpdate:p,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1,supportsQueryAnalytics:!1,supportsQueryTopFeatures:!1,supportsAsyncConvert3D:!1},query:{maxRecordCount:a,maxRecordCountFactor:void 0,supportsStatistics:!!o?.supportsStatistics,supportsOrderBy:!!o?.supportsOrderBy,supportsDistinct:!!o?.supportsDistinct,supportsPagination:!!o?.supportsPagination,supportsStandardizedQueriesOnly:!!o?.useStandardizedQueries,supportsPercentileStatistics:!!o?.supportsPercentileStatistics,supportsCentroid:!!o?.supportsReturningGeometryCentroid,supportsDistance:!!o?.supportsQueryWithDistance,supportsExtent:!!o?.supportsReturningQueryExtent,supportsGeometryProperties:!!o?.supportsReturningGeometryProperties,supportsHavingClause:!!o?.supportsHavingClause,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!!o?.supportsDefaultSR,supportsFullTextSearch:!1,supportsCompactGeometry:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0},mensuration:{supportsDistanceAndAngle:g,supportsAreaAndPerimeter:g,supportsPointOrCentroid:g,supportsHeightFromBaseAndTop:f&&m.includes("base-top height"),supportsHeightFromBaseAndTopShadow:f&&m.includes("base-top shadow height"),supportsHeightFromTopAndTopShadow:f&&m.includes("top-top shadow height"),supports3D:f&&m.includes("3d")}}}};function r(i){return i?.path??""}return h([d({clonable:!1})],t.prototype,"_functionRasterInfos",void 0),h([d({clonable:!1})],t.prototype,"_rasterJobHandler",void 0),h([d({clonable:!1})],t.prototype,"_cachedRendererJson",void 0),h([d({readOnly:!0})],t.prototype,"_serviceSupportsMosaicRule",void 0),h([pe("_serviceSupportsMosaicRule",["currentVersion","fields"])],t.prototype,"readServiceSupportsMosaicRule",null),h([d({readOnly:!0})],t.prototype,"_rasterAttributeTableFieldPrefix",void 0),h([d({readOnly:!0})],t.prototype,"_rasterFunctionNamesIndex",null),h([d()],t.prototype,"adjustAspectRatio",void 0),h([d({type:[St],json:{write:!0}})],t.prototype,"bandIds",void 0),h([pe("bandIds")],t.prototype,"readBandIds",null),h([d({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),h([pe("service","capabilities",["capabilities","currentVersion","serviceDataType"])],t.prototype,"readCapabilities",null),h([d({type:Number})],t.prototype,"compressionQuality",void 0),h([ge("compressionQuality")],t.prototype,"writeCompressionQuality",null),h([d({type:Number})],t.prototype,"compressionTolerance",void 0),h([ge("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),h([d({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),h([d({readOnly:!0,dependsOn:["_serviceSupportsMosaicRule"]})],t.prototype,"defaultMosaicRule",void 0),h([pe("defaultMosaicRule",["defaultMosaicMethod"])],t.prototype,"readDefaultMosaicRule",null),h([d({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),h([d({readOnly:!0,constructOnly:!0})],t.prototype,"exportImageServiceParameters",void 0),h([d()],t.prototype,"rasterInfo",void 0),h([d({readOnly:!0,type:[Uo]})],t.prototype,"fields",void 0),h([d({readOnly:!0})],t.prototype,"fieldsIndex",null),h([d({type:["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff","bip","bsq"],json:{write:!0}})],t.prototype,"format",null),h([pe("service","format",["serviceDataType"])],t.prototype,"readFormat",null),h([d({type:yt})],t.prototype,"fullExtent",void 0),h([d({readOnly:!0})],t.prototype,"hasMultidimensions",void 0),h([d({json:{read:{source:"maxImageHeight"}}})],t.prototype,"imageMaxHeight",void 0),h([d({json:{read:{source:"maxImageWidth"}}})],t.prototype,"imageMaxWidth",void 0),h([d({type:String,json:{type:bd.jsonValues,read:bd.read,write:bd.write}})],t.prototype,"interpolation",void 0),h([d()],t.prototype,"minScale",void 0),h([pe("service","minScale")],t.prototype,"readMinScale",null),h([d()],t.prototype,"maxScale",void 0),h([pe("service","maxScale")],t.prototype,"readMaxScale",null),h([d({type:Go})],t.prototype,"mosaicRule",null),h([pe("mosaicRule",["mosaicRule","defaultMosaicMethod"])],t.prototype,"readMosaicRule",null),h([ge("mosaicRule")],t.prototype,"writeMosaicRule",null),h([d()],t.prototype,"multidimensionalInfo",void 0),h([d({type:BEe,json:{write:!0}})],t.prototype,"multidimensionalSubset",void 0),h([d({json:{type:St}})],t.prototype,"noData",void 0),h([ge("noData")],t.prototype,"writeNoData",null),h([d({type:String,json:{type:n_.jsonValues,read:n_.read,write:n_.write}})],t.prototype,"noDataInterpretation",void 0),h([d({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],t.prototype,"objectIdField",void 0),h([pe("objectIdField")],t.prototype,"readObjectIdField",null),h([d({readOnly:!0})],t.prototype,"geometryType",void 0),h([d({})],t.prototype,"typeIdField",void 0),h([d({})],t.prototype,"types",void 0),h([d({readOnly:!0})],t.prototype,"parsedUrl",null),h([d({type:Function})],t.prototype,"pixelFilter",void 0),h([d()],t.prototype,"raster",void 0),h([d({readOnly:!0})],t.prototype,"sourceType",void 0),h([pe("sourceType",["serviceSourceType","fields"])],t.prototype,"readSourceType",null),h([d()],t.prototype,"viewId",void 0),h([d({types:FL,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:jL,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:i=>({enabled:i&&i.type!=="vector-field"&&i.type!=="flow"})}}}}})],t.prototype,"renderer",null),h([pe("renderer")],t.prototype,"readRenderer",null),h([ge("renderer")],t.prototype,"writeRenderer",null),h([d({clonable:!1})],t.prototype,"symbolizer",void 0),h([d(wI)],t.prototype,"opacity",void 0),h([d({readOnly:!0})],t.prototype,"rasterFields",null),h([d({constructOnly:!0})],t.prototype,"rasterFunctionInfos",void 0),h([d({type:qt})],t.prototype,"renderingRule",null),h([d({type:qt,json:{name:"renderingRule"}})],t.prototype,"rasterFunction",null),h([pe("rasterFunction",["renderingRule","rasterFunctionInfos"])],t.prototype,"readRasterFunction",null),h([d({readOnly:!0})],t.prototype,"serviceDataType",void 0),h([d({readOnly:!0,type:Fe})],t.prototype,"spatialReference",void 0),h([pe("spatialReference",["spatialReference","extent"])],t.prototype,"readSpatialReference",null),h([d({json:{type:av.jsonValues}})],t.prototype,"pixelType",void 0),h([pe("pixelType")],t.prototype,"readPixelType",null),h([ge("pixelType")],t.prototype,"writePixelType",null),h([d({constructOnly:!0,type:YA})],t.prototype,"serviceRasterInfo",void 0),h([d()],t.prototype,"sourceJSON",void 0),h([d(oS)],t.prototype,"url",void 0),h([d({readOnly:!0})],t.prototype,"version",void 0),h([pe("version",["currentVersion","fields","timeInfo"])],t.prototype,"readVersion",null),t=h([j("esri.layers.mixins.ArcGISImageService")],t),t};let Do=class extends Ky(JA(Xy(I1(E1(c5e(A1(GA(jA(Zd(Yt(Yd))))))))))){constructor(...t){super(...t),this.isReference=null,this.operationalLayerType="ArcGISImageServiceLayer",this.popupEnabled=!0,this.popupTemplate=null,this.type="imagery",this._debouncedSaveOperations=JE(async(r,i,s)=>{const{save:n,saveAs:o}=await fe(()=>import("./imageryUtils-BCEbWFcj.js"),__vite__mapDeps([135,128,126,127,124,129,130,1]),import.meta.url);switch(r){case Ru.SAVE:return n(this,i);case Ru.SAVE_AS:return o(this,s,i)}})}normalizeCtorArgs(t,r){return typeof t=="string"?{url:t,...r}:t}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},t).catch(lo).then(()=>this._fetchService(r))),Promise.resolve(this)}get legendEnabled(){return!this._isPreviewLayer&&(this._get("legendEnabled")??!0)}set legendEnabled(t){this._set("legendEnabled",t)}get listMode(){return this._isPreviewLayer?"hide":this._get("listMode")}set listMode(t){this._set("listMode",t)}writeOperationalLayerType(t,r,i){const s=this.renderer?.type==="vector-field";r[i]=s?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}get defaultPopupTemplate(){return this.createPopupTemplate()}get _isPreviewLayer(){return!(!this.raster||!this.url?.toLowerCase().includes("/rasterrendering/imageserver"))}createPopupTemplate(t){const r=this.rasterFields,i=this.title,s=new Set;let n=!1,o=!1;this.capabilities&&(n=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0,o=this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir");const a=new Set;n&&a.add("raster.itempixelvalue");for(const u of r){const c=u.name.toLowerCase();a.has(c)||c.includes("raster.servicepixelvalue.")||s.add(u.name)}o&&s.add("raster.magnitude").add("raster.direction");const l=_8({fields:r,title:i},{...t,visibleFieldNames:s});return l?.fieldInfos&&this.rasterInfo?.pixelType.startsWith("f")&&l.fieldInfos.forEach(({format:u,fieldName:c})=>{u&&c&&/^raster\.(item|service)pixelvalue/i.test(c)&&(u.places=2)}),l}queryFeatures(t,r){return this.queryRasters(t,r).then(i=>{if(i?.features)for(const s of i.features)s.layer=s.sourceLayer=this;return i})}queryFeatureCount(t,r){return this.queryRasterCount(t,r)}redraw(){this.emit("redraw")}async save(t){return this._debouncedSaveOperations(Ru.SAVE,t)}async saveAs(t,r){return this._debouncedSaveOperations(Ru.SAVE_AS,r,t)}serviceSupportsSpatialReference(t){return w8(this,t)}write(t,r){if(!this._isPreviewLayer)return super.write(t,r);if(r?.messages){const i=`${r.origin}/${r.layerContainerType||"operational-layers"}`;r.messages.push(new K("layer:unsupported",`Imagery preview layer (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${i}'`,{layer:this}))}return null}};h([d(n8)],Do.prototype,"legendEnabled",null),h([d({type:["show","hide"]})],Do.prototype,"listMode",null),h([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Do.prototype,"isReference",void 0),h([d({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],Do.prototype,"operationalLayerType",void 0),h([ge("web-map","operationalLayerType")],Do.prototype,"writeOperationalLayerType",null),h([d(nS)],Do.prototype,"popupEnabled",void 0),h([d({type:Bd,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Do.prototype,"popupTemplate",void 0),h([d({readOnly:!0})],Do.prototype,"defaultPopupTemplate",null),h([d({readOnly:!0,json:{read:!1}})],Do.prototype,"type",void 0),h([d({readOnly:!0})],Do.prototype,"_isPreviewLayer",null),Do=h([j("esri.layers.ImageryLayer")],Do);const zre=Do,zat=Object.freeze(Object.defineProperty({__proto__:null,default:zre},Symbol.toStringTag,{value:"Module"})),Gre=96;function fk(e,t){const r=e.extent,i=e.width,s=Vh(r?.spatialReference);return r&&i?r.width/i*s*zZ*Gre:0}function Gat(e,t){return e/(Vh(t)*zZ*Gre)}function h5e(e,t,r){return p5e(e,t)&&d5e(e,r)}function p5e(e,t){return t===0||Vw(e,t)||e<t}function d5e(e,t){return t===0||Vw(e,t)||e>t}const Bre=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=void 0,this._allLayersAndTablesMap=null}readCapabilities(r,i){const s=i.capabilities&&i.capabilities.split(",").map(M=>M.toLowerCase().trim());if(!s)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const n=this.type,o=n!=="tile"&&!!i.supportsDynamicLayers,a=s.includes("query"),l=s.includes("map"),u=!!i.exportTilesAllowed,c=s.includes("tilemap"),p=s.includes("data"),f=n!=="tile"&&(!i.tileInfo||o),m=n!=="tile"&&(!i.tileInfo||o),g=n!=="tile",b=i.cimVersion&&bQ.parse(i.cimVersion),w=b?.since(1,4)??!1,S=b?.since(2,0)??!1;return{operations:{supportsExportMap:l,supportsExportTiles:u,supportsIdentify:a,supportsQuery:p,supportsTileMap:c},exportMap:l?{supportsArcadeExpressionForLabeling:w,supportsSublayersChanges:g,supportsDynamicLayers:o,supportsSublayerVisibility:f,supportsSublayerDefinitionExpression:m,supportsCIMSymbols:S}:null,exportTiles:u?{maxExportTilesCount:+i.maxExportTilesCount}:null}}readVersion(r,i){let s=i.currentVersion;return s||(s=i.hasOwnProperty("capabilities")||i.hasOwnProperty("tables")?10:i.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),s}async fetchRelatedService(r){const i=this.portalItem;if(!i||!XU(i))return null;this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=i.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},r).then(n=>n.find(o=>o.type==="Feature Service")??null,()=>null));const s=await this._relatedFeatureServicePromise;return dr(r),s?{itemId:s.id,url:s.url}:null}async fetchSublayerInfo(r,i){const{source:s}=r;if(this?.portalItem&&this.type==="tile"&&s?.type==="map-layer"&&XU(this.portalItem)&&r.originIdOf("url")<Ne.SERVICE){const a=await this.fetchRelatedService(i);a&&(r.url=Oh(a.url,s.mapLayerId.toString()),r.layerItemId=a.itemId)}const{url:n}=r;let o;if(s.type==="data-layer")o=(await Re(n,{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey},...i})).data;else if(n&&r.originIdOf("url")>Ne.SERVICE)try{const a=await this._fetchAllLayersAndTablesFromService(n),l=Lh(n)?.sublayer??s.mapLayerId;o=a.get(l)}catch{}else{let a=r.id;s?.type==="map-layer"&&(a=s.mapLayerId);try{o=(await this.fetchAllLayersAndTables(i)).get(a)}catch{}}return o}async fetchAllLayersAndTables(r){return this._fetchAllLayersAndTablesFromService(this.parsedUrl?.path,r)}async _fetchAllLayersAndTablesFromService(r,i){await this.load(i),this._allLayersAndTablesMap||=new Map;const s=Lh(r),n=KE(this._allLayersAndTablesMap,s?.url.path,()=>Re(Oh(s?.url.path,"/layers"),{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(a=>{const l=new Map,{layers:u,tables:c}=a.data,p=[...u??[],...c??[]];for(const f of p)l.set(f.id,f);return{result:l}},a=>({error:a}))),o=await n;if(dr(i),"result"in o)return o.result;throw o.error}};return h([d({readOnly:!0})],t.prototype,"capabilities",void 0),h([pe("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),h([d({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),h([d({type:yt})],t.prototype,"fullExtent",void 0),h([d(Xee)],t.prototype,"id",void 0),h([d({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),h([d(nS)],t.prototype,"popupEnabled",void 0),h([d({type:Fe})],t.prototype,"spatialReference",void 0),h([d({readOnly:!0})],t.prototype,"version",void 0),h([pe("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=h([j("esri.layers.mixins.ArcGISMapService")],t),t};let a0=class extends qe{constructor(t){super(t),this.getCollections=null}initialize(){this.addHandles(jJ(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const t=this.getCollections!=null?this.getCollections():null;if(t==null)return void this.removeAll();let r=0;for(const i of t)i!=null&&(r=this._processCollection(r,i));this.splice(r,this.length)}_createNewInstance(t){return new qe(t)}_processCollection(t,r){if(!r)return t;const i=this.itemFilterFunction??(s=>!!s);for(const s of r)if(s){if(i(s)){const n=this.indexOf(s,t);n>=0?n!==t&&this.reorder(s,t):this.add(s,t),++t}if(this.getChildrenFunction){const n=this.getChildrenFunction(s);if(Array.isArray(n))for(const o of n)t=this._processCollection(t,o);else t=this._processCollection(t,n)}}return t}};h([d()],a0.prototype,"getCollections",void 0),h([d()],a0.prototype,"getChildrenFunction",void 0),h([d()],a0.prototype,"itemFilterFunction",void 0),a0=h([j("esri.core.CollectionFlattener")],a0);const Py=a0,f5e=[["binary","application/octet-stream","bin",""]];function qat(e,t){return qre(t.name,e?.supportedFormats??[])!=null}function Hat(e,t){if(!e)return!1;const r=m5e(t,e.supportedFormats??[]);return r!=null&&e.editFormats.includes(r)}function mk(e,t){return B8(g5e(e,t))}function yk(e,t){return B8(qre(e,t))}function Wat(e,t){return Hre(y5e(e,t))}function m5e(e,t){return yk(e.name,t)??mk(e.type,t)}function G8(e){return[...f5e,...e]}function y5e(e,t){return G8(t).find(r=>B8(r)===e)}function g5e(e,t){const r=e.toLowerCase();return G8(t).find(i=>Hre(i)===r)}function qre(e,t){const r=e.toLowerCase();return G8(t).find(i=>v5e(i).some(s=>r.endsWith(s)))}function B8(e){return e?.[0]}function Hre(e){return e?.[1].toLowerCase()}function v5e(e){return e?.[2].split(",").map(t=>t.toLowerCase())??[]}function Jat(e){return e.tables?.find(t=>t.role==="assetMaps")}async function b5e(e,t,r){const i=Pr(e),s=await z4e(i,Ci.from(t),{...r}),n=s.data.extent;return!n||isNaN(n.xmin)||isNaN(n.ymin)||isNaN(n.xmax)||isNaN(n.ymax)?{count:s.data.count,extent:null}:{count:s.data.count,extent:yt.fromJSON(n)}}function Ds(e,t){return e?t?4:3:t?3:2}const dS=()=>be.getLogger("esri.layers.graphics.featureConversionUtils"),Wre={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryEnvelope:0},w5e=(e,t,r,i,s,n)=>{e[r]=s,e[r+1]=n},rG=(e,t,r,i,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[i+2]},_5e=(e,t,r,i,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[i+3]},S5e=(e,t,r,i,s,n)=>{e[r]=s,e[r+1]=n,e[r+2]=t[i+2],e[r+3]=t[i+3]};function q8(e,t,r,i){if(e){if(r)return t&&i?S5e:rG;if(t&&i)return _5e}else if(t&&i)return rG;return w5e}function M5({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function T5({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function I5({scale:e,translate:t},r,i){return r*e[i]+t[i]}function Zat(e,t,r){return e?t?r?J8(e):H8(e):r?W8(e):i$(e):null}function i$(e){const t=e.coords;return{x:t[0],y:t[1]}}function Jre(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function H8(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function x5e(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function W8(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function M5e(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function J8(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function T5e(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function I5e(e,t,r,i){let s=i$;r&&i?s=J8:r?s=H8:i&&(s=W8);for(const n of t){const{geometry:o,attributes:a}=n,l=o!=null?s(o):null;e.push({attributes:a,geometry:l})}return e}function Z8(e,t){return e&&t?T5e:e?x5e:t?M5e:Jre}function E5e(e,t,r,i,s){const n=Z8(r,i);for(const{geometry:o,attributes:a}of t){const l=o!=null?n(new To,o):null;e.push(new Oy(l,a,null,s?a[s]:void 0))}return e}function A5e(e,t,r=Z8(t.z!=null,t.m!=null)){return r(e,t)}function $5e(e,t,r,i){for(const{geometry:s,attributes:n}of t)e.push({attributes:n,geometry:s!=null?Zre(s,r,i):null});return e}function Zre(e,t,r){if(e==null)return null;const i=Ds(t,r),s=[];for(let n=0;n<e.coords.length;n+=i){const o=[];for(let a=0;a<i;a++)o.push(e.coords[n+a]);s.push(o)}return t?r?{points:s,hasZ:t,hasM:r}:{points:s,hasZ:t}:r?{points:s,hasM:r}:{points:s}}function C5e(e,t,r,i,s){const n=Ds(r,i);for(const{geometry:o,attributes:a}of t){const l=o!=null?Yre(new To,o,n):null;e.push(new Oy(l,a,null,s?a[s]:void 0))}return e}function Yre(e,t,r=Ds(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const i=e.coords;let s=0;for(const n of t.points)for(let o=0;o<r;o++)i[s++]=n[o];return e}function O5e(e,t,r,i){for(const{geometry:s,attributes:n}of t)e.push({attributes:n,geometry:s!=null?Kre(s,r,i):null});return e}function Kre(e,t,r){if(!e)return null;const i=Ds(t,r),{coords:s,lengths:n}=e,o=[];let a=0;for(const l of n){const u=[];for(let c=0;c<l;c++){const p=[];for(let f=0;f<i;f++)p.push(s[a++]);u.push(p)}o.push(u)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function P5e(e,t,r,i,s){const n=Ds(r,i);for(const{geometry:o,attributes:a,centroid:l}of t){const u=o!=null?Xre(new To,o,n):null,c=l!=null?A5e(new To,l):null;e.push(new Oy(u,a,c,s?a[s]:void 0))}return e}function Xre(e,t,r=Ds(t.hasZ,t.hasM)){const{lengths:i,coords:s}=e;let n=0;for(const o of t.paths){for(const a of o)for(let l=0;l<r;l++)s[n++]=a[l];i.push(o.length)}return e}function R5e(e,t,r,i){for(const{geometry:s,attributes:n,centroid:o}of t){const a=s!=null?Qre(s,r,i):null;if(o!=null){const l=i$(o);e.push({attributes:n,centroid:l,geometry:a})}else e.push({attributes:n,geometry:a})}return e}function Qre(e,t,r){if(!e)return null;const i=Ds(t,r),{coords:s,lengths:n}=e,o=[];let a=0;for(const l of n){const u=[];for(let c=0;c<l;c++){const p=[];for(let f=0;f<i;f++)p.push(s[a++]);u.push(p)}o.push(u)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function L5e(e,t,r,i,s){for(const{geometry:n,centroid:o,attributes:a}of t){const l=n!=null?eie(new To,n,r,i):null,u=s?a[s]:void 0;o!=null?e.push(new Oy(l,a,Jre(new To,o),u)):e.push(new Oy(l,a,null,u))}return e}function eie(e,t,r=t.hasZ,i=t.hasM){return k5e(e,t.rings,r,i)}function k5e(e,t,r,i){const s=Ds(r,i),{lengths:n,coords:o}=e;let a=0;Mh(e);for(const l of t){for(const u of l)for(let c=0;c<s;c++)o[a++]=u[c];n.push(l.length)}return e}const cv=[],u_=[];function Yat(e,t,r,i,s){cv[0]=e;const[n]=tie(u_,cv,t,r,i,s);return Wl(cv),Wl(u_),n}function tie(e,t,r,i,s,n){if(Wl(e),!r){for(const o of t){const a=n?o.attributes[n]:void 0;e.push(new Oy(null,o.attributes,null,a))}return e}switch(r){case"esriGeometryPoint":return E5e(e,t,i,s,n);case"esriGeometryMultipoint":return C5e(e,t,i,s,n);case"esriGeometryPolyline":return P5e(e,t,i,s,n);case"esriGeometryPolygon":return L5e(e,t,i,s,n);default:dS().error("convertToFeatureSet:unknown-geometry",new K(`Unable to parse unknown geometry type '${r}'`)),Wl(e)}return e}function Kat(e,t,r,i){u_[0]=e,iie(cv,u_,t,r,i);const s=cv[0];return Wl(cv),Wl(u_),s}function Xat(e,t,r){if(e==null)return null;const i=new To;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&r==null&&(r=e.hasM),QD(e)?Z8(t??e.z!=null,r??e.m!=null)(i,e):Zm(e)?eie(i,e,t,r):e6(e)?Xre(i,e,Ds(t,r)):XD(e)?Yre(i,e,Ds(t,r)):void dS().error("convertFromGeometry:unknown-geometry",new K(`Unable to parse unknown geometry type '${e}'`))}function rie(e,t,r,i){const s=e&&("coords"in e?e:e.geometry);if(s==null)return null;switch(t){case"esriGeometryPoint":{let n=i$;return r&&i?n=J8:r?n=H8:i&&(n=W8),n(s)}case"esriGeometryMultipoint":return Zre(s,r,i);case"esriGeometryPolyline":return Kre(s,r,i);case"esriGeometryPolygon":return Qre(s,r,i);default:return dS().error("convertToGeometry:unknown-geometry",new K(`Unable to parse unknown geometry type '${t}'`)),null}}function N5e(e,t){for(const r of t)e.push({attributes:r.attributes});return e}function iie(e,t,r,i,s){if(Wl(e),r==null)return N5e(e,t);switch(r){case"esriGeometryPoint":return I5e(e,t,i,s);case"esriGeometryMultipoint":return $5e(e,t,i,s);case"esriGeometryPolyline":return O5e(e,t,i,s);case"esriGeometryPolygon":return R5e(e,t,i,s);default:dS().error("convertToFeatureSet:unknown-geometry",new K(`Unable to parse unknown geometry type '${r}'`))}return e}function Qat(e){const{objectIdFieldName:t,spatialReference:r,transform:i,fields:s,hasM:n,hasZ:o,features:a,geometryType:l,exceededTransferLimit:u,uniqueIdField:c,queryGeometry:p,queryGeometryType:f}=e,m={features:iie([],a,l,o,n),fields:s,geometryType:l,objectIdFieldName:t,spatialReference:r,uniqueIdField:c,queryGeometry:rie(p,f,!1,!1)};return i&&(m.transform=i),u&&(m.exceededTransferLimit=u),n&&(m.hasM=n),o&&(m.hasZ=o),m}function elt(e,t){const r=new Nre,{hasM:i,hasZ:s,features:n,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:u,transform:c,fields:p}=e;return p&&(r.fields=p),r.geometryType=l??null,r.objectIdFieldName=o??t??null,r.spatialReference=a??null,r.objectIdFieldName?(n&&tie(r.features,n,l,s,i,r.objectIdFieldName),u&&(r.exceededTransferLimit=u),i&&(r.hasM=i),s&&(r.hasZ=s),c&&(r.transform=c),r):(dS().error(new K("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function tlt(e){const{transform:t,features:r,hasM:i,hasZ:s}=e;if(!t)return e;for(const n of r)n.geometry!=null&&vk(n.geometry,n.geometry,i,s,t),n.centroid!=null&&vk(n.centroid,n.centroid,i,s,t);return e.transform=null,e}function rlt(e,t){const{geometryType:r,features:i,hasM:s,hasZ:n}=t;if(!e)return t;for(let o=0;o<i.length;o++){const a=i[o],l=a.weakClone();l.geometry=new To,iG(l.geometry,a.geometry,s,n,r,e),a.centroid&&(l.centroid=new To,iG(l.centroid,a.centroid,s,n,"esriGeometryPoint",e)),i[o]=l}return t.transform=e,t}function iG(e,t,r,i,s,n,o=r,a=i){if(Mh(e),!t?.coords.length)return null;const l=Wre[s],{coords:u,lengths:c}=t,p=Ds(r,i),f=Ds(r&&o,i&&a),m=q8(r,i,o,a);if(!c.length)return m(e.coords,u,0,0,M5(n,u[0]),T5(n,u[1])),Mh(e,p,0),e;let g,b,w,S,M=0,x=0,_=x;for(const I of c){if(I<l)continue;let E=0;x=_,w=g=M5(n,u[M]),S=b=T5(n,u[M+1]),m(e.coords,u,x,M,w,S),E++,M+=p,x+=f;for(let A=1;A<I;A++,M+=p)w=M5(n,u[M]),S=T5(n,u[M+1]),w===g&&S===b||(m(e.coords,u,x,M,w-g,S-b),x+=f,E++,g=w,b=S);E>=l&&(e.lengths.push(E),_=x)}return Wl(e.coords,_),e.coords.length?e:null}function ilt(e,t,r,i,s,n,o=r,a=i){if(Mh(e),!t?.coords.length)return null;const l=Wre[s],{coords:u,lengths:c}=t,p=Ds(r,i),f=Ds(r&&o,i&&a),m=q8(r,i,o,a);if(!c.length)return m(e.coords,u,0,0,u[0],u[1]),Mh(e,p,0),e;let g=0;const b=n*n;for(const w of c){if(w<l){g+=w*p;continue}const S=e.coords.length/f,M=g,x=g+(w-1)*p;m(e.coords,u,e.coords.length,M,u[M],u[M+1]),gk(e.coords,u,p,b,m,M,x),m(e.coords,u,e.coords.length,x,u[x],u[x+1]);const _=e.coords.length/f-S;_>=l?e.lengths.push(_):Wl(e.coords,S*f),g+=w*p}return e.coords.length?e:null}function D5e(e,t,r,i){const s=e[t],n=e[t+1],o=e[r],a=e[r+1],l=e[i],u=e[i+1];let c=o,p=a,f=l-c,m=u-p;if(f!==0||m!==0){const g=((s-c)*f+(n-p)*m)/(f*f+m*m);g>1?(c=l,p=u):g>0&&(c+=f*g,p+=m*g)}return f=s-c,m=n-p,f*f+m*m}function gk(e,t,r,i,s,n,o){let a,l=i,u=0;for(let c=n+r;c<o;c+=r)a=D5e(t,c,n,o),a>l&&(u=c,l=a);l>i&&(u-n>r&&gk(e,t,r,i,s,n,u),s(e,t,e.length,u,t[u],t[u+1]),o-u>r&&gk(e,t,r,i,s,u,o))}function slt(e,t,r,i){if(!t?.coords?.length)return null;const s=Ds(r,i);let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const u=t.coords;for(let c=0;c<u.length;c+=s){const p=u[c],f=u[c+1];n=Math.min(n,p),a=Math.max(a,p),o=Math.min(o,f),l=Math.max(l,f)}}return bP(e)?cbe(e,n,o,a,l):rge(n,o,a,l,e),e}function vk(e,t,r,i,s){const{coords:n,lengths:o}=t,a=Ds(r,i);if(!n.length)return e!==t&&Mh(e),e;gd(s);const{originPosition:l,scale:u,translate:c}=s,p=j5e;p.originPosition=l;const f=p.scale;f[0]=u[0]??1,f[1]=-(u[1]??1),f[2]=u[2]??1,f[3]=u[3]??1;const m=p.translate;if(m[0]=c[0]??0,m[1]=c[1]??0,m[2]=c[2]??0,m[3]=c[3]??0,!o.length){for(let b=0;b<a;++b)e.coords[b]=I5(p,n[b],b);return e!==t&&Mh(e,a,0),e}let g=0;for(let b=0;b<o.length;b++){const w=o[b];e.lengths[b]=w;for(let x=0;x<a;++x)e.coords[g+x]=I5(p,n[g+x],x);let S=e.coords[g],M=e.coords[g+1];g+=a;for(let x=1;x<w;x++,g+=a){S+=n[g]*f[0],M+=n[g+1]*f[1],e.coords[g]=S,e.coords[g+1]=M;for(let _=2;_<a;++_)e.coords[g+_]=I5(p,n[g+_],_)}}return e!==t&&Mh(e,n.length,o.length),e}function nlt(e,t,r,i,s,n){if(Mh(e),e.lengths.push(...t.lengths),r===s&&i===n)for(let o=0;o<t.coords.length;o++)e.coords.push(t.coords[o]);else{const o=Ds(r,i),a=q8(r,i,s,n),l=t.coords;for(let u=0;u<l.length;u+=o)a(e.coords,l,e.coords.length,u,l[u],l[u+1])}return e}function F5e(e,t,r,i){let s=0,n=e[i*t],o=e[i*(t+1)];for(let a=1;a<r;a++){const l=n+e[i*(t+a)],u=o+e[i*(t+a)+1],c=(l-n)*(u+o);n=l,o=u,s+=c}return .5*s}function olt(e,t){const{coords:r,lengths:i}=e;let s=0,n=0;for(let o=0;o<i.length;o++){const a=i[o];n+=F5e(r,s,a,t),s+=a}return Math.abs(n)}function Mh(e,t=0,r=0){Wl(e.lengths,r),Wl(e.coords,t)}function Wl(e,t=0){e.length!==t&&(e.length=t)}const j5e={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};function V5e(e,t){return t}function Y8(e,t,r,i){switch(r){case 0:return r2(e,t+i,0);case 1:return e.originPosition==="lowerLeft"?r2(e,t+i,1):G5e(e,t+i,1)}}function sie(e,t,r,i){return r===2?r2(e,t,2):Y8(e,t,r,i)}function U5e(e,t,r,i){return r===2?t===0?0:r2(e,t,3):Y8(e,t,r,i)}function z5e(e,t,r,i){return r===3?t===0?0:r2(e,t,3):sie(e,t,r,i)}function r2({translate:e,scale:t},r,i){return e[i]+r*t[i]}function G5e({translate:e,scale:t},r,i){return e[i]-r*t[i]}let B5e=class{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=V5e,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const r=J6(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(r!=null)for(const i of t.features)r(i.geometry)}createSpatialReference(){return{}}addField(t,r){const i=t.fields;gd(i),i.push(r);const s=i.map(n=>n.name);this._attributesConstructor=function(){for(const n of s)this[n]=null}}addFeature(t,r){t.features.push(r)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._mValueOffset=null,this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),t.geometryType){case"esriGeometryPoint":this.addCoordinate=(r,i,s)=>this.addCoordinatePoint(r,i,s),this.createGeometry=r=>this.createPointGeometry(r);break;case"esriGeometryPolygon":this.addCoordinate=(r,i,s)=>this._addCoordinatePolygon(r,i,s),this.createGeometry=r=>this._createPolygonGeometry(r);break;case"esriGeometryPolyline":this.addCoordinate=(r,i,s)=>this._addCoordinatePolyline(r,i,s),this.createGeometry=r=>this._createPolylineGeometry(r);break;case"esriGeometryMultipoint":this.addCoordinate=(r,i,s)=>this._addCoordinateMultipoint(r,i,s),this.createGeometry=r=>this._createMultipointGeometry(r)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,r,i){this._lengths.length===0&&(this._toAddInCurrentPath=r),this._lengths.push(r)}addQueryGeometry(t,r){const{queryGeometry:i,queryGeometryType:s}=r,n=vk(i.clone(),i,!1,!1,this._transform),o=rie(n,s,!1,!1);t.queryGeometryType=s,t.queryGeometry={...o}}createPointGeometry(t){const r={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(r.z=0),t.hasM&&(r.m=0),r}addCoordinatePoint(t,r,i){const s=this._transform;switch(r=this._applyTransform(s,r,i,0),i){case 0:t.x=r;break;case 1:t.y=r;break;case 2:"z"in t?t.z=r:t.m=r;break;case 3:t.m=r}}_transformPathLikeValue(t,r){let i=0;r<=1&&(i=this._previousCoordinate[r],this._previousCoordinate[r]+=t);const s=this._transform;return this._mValueOffset!==null&&t===0&&r>0&&!(r%this._mValueOffset)?0:this._applyTransform(s,t,r,i)}_addCoordinatePolyline(t,r,i){this._dehydratedAddPointsCoordinate(t.paths,r,i)}_addCoordinatePolygon(t,r,i){this._dehydratedAddPointsCoordinate(t.rings,r,i)}_addCoordinateMultipoint(t,r,i){i===0&&t.points.push([]);const s=this._transformPathLikeValue(r,i);t.points[t.points.length-1].push(s)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,r,i){i===0&&this._toAddInCurrentPath--==0&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const s=this._transformPathLikeValue(r,i),n=t[t.length-1];i===0&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),n.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=s}_deriveApplyTransform(t){const{hasZ:r,hasM:i}=t;return r&&i?z5e:r?sie:i?U5e:Y8}};async function q5e(e,t,r){const i=Pr(e),s={...r},n=Ci.from(t),o=!n.quantizationParameters,{data:a}=await F4e(i,n,new B5e({sourceSpatialReference:n.sourceSpatialReference,applyTransform:o}),s);return a}let Sa=class extends et{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return gi(this.url)}async execute(t,r){const i=await this.executeJSON(t,r);return this.featureSetFromJSON(t,i,r)}async executeJSON(t,r){const i=this._normalizeQuery(t),s=t.outStatistics?.[0]!=null,n=ce("featurelayer-pbf-statistics"),o=!s||n;let a;if(this.pbfSupported&&o)try{a=await q5e(this.url,i,r)}catch(l){if(l.name!=="query:parsing-pbf")throw l;this.pbfSupported=!1}return this.pbfSupported&&o||(a=await jre(this.url,i,r)),this._normalizeFields(a.fields),a}async featureSetFromJSON(t,r,i){if(!this._queryIs3DObjectFormat(t)||this.infoFor3D==null||!r.features)return Yy.fromJSON(r);const{meshFeatureSetFromJSON:s}=await wu(fe(()=>import("./meshFeatureSet-D6Dlfi8N.js"),__vite__mapDeps([136,137,1,132,51,91,50,92,138,139,48,54,84,57,43,97,42,56,52,53,38,55,58,49]),import.meta.url),i);return s(t,this.infoFor3D,r)}executeForCount(t,r){return Vre(this.url,this._normalizeQuery(t),r)}executeForExtent(t,r){return b5e(this.url,this._normalizeQuery(t),r)}executeForIds(t,r){return z8(this.url,this._normalizeQuery(t),r)}async executeRelationshipQuery(t,r){const[{default:i},{executeRelationshipQuery:s}]=await wu(Promise.all([fe(()=>Promise.resolve().then(()=>PU),void 0,import.meta.url),fe(()=>import("./executeRelationshipQuery-DKVnU5qr.js"),__vite__mapDeps([140,1]),import.meta.url)]),r);return t=i.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),s(this.url,t,r)}async executeRelationshipQueryForCount(t,r){const[{default:i},{executeRelationshipQueryForCount:s}]=await wu(Promise.all([fe(()=>Promise.resolve().then(()=>PU),void 0,import.meta.url),fe(()=>import("./executeRelationshipQuery-DKVnU5qr.js"),__vite__mapDeps([140,1]),import.meta.url)]),r);return t=i.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),s(this.url,t,r)}async executeAttachmentQuery(t,r){const{executeAttachmentQuery:i,fetchAttachments:s,processAttachmentQueryResult:n}=await wu(fe(()=>import("./queryAttachments-C3qrVcq9.js"),__vite__mapDeps([141,1]),import.meta.url),r),o=Pr(this.url);return n(o,await(this.queryAttachmentsSupported?i(o,t,r):s(o,t,r)))}async executeTopFeaturesQuery(t,r){const{executeTopFeaturesQuery:i}=await wu(fe(()=>import("./executeTopFeaturesQuery-D_iQ9hUm.js"),__vite__mapDeps([142,143,1]),import.meta.url),r);return i(this.parsedUrl,t,this.sourceSpatialReference,r)}async executeForTopIds(t,r){const{executeForTopIds:i}=await wu(fe(()=>import("./executeForTopIds-DGq5l7o-.js"),__vite__mapDeps([144,143,1]),import.meta.url),r);return i(this.parsedUrl,t,r)}async executeForTopExtents(t,r){const{executeForTopExtents:i}=await wu(fe(()=>import("./executeForTopExtents-C-9A48V4.js"),__vite__mapDeps([145,143,1]),import.meta.url),r);return i(this.parsedUrl,t,r)}async executeForTopCount(t,r){const{executeForTopCount:i}=await wu(fe(()=>import("./executeForTopCount-BiNmedc9.js"),__vite__mapDeps([146,143,1]),import.meta.url),r);return i(this.parsedUrl,t,r)}_normalizeQuery(t){let r=Ci.from(t);r.sourceSpatialReference=r.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(r=r===t?r.clone():r,r.gdbVersion=t.gdbVersion||this.gdbVersion,r.dynamicDataSource=t.dynamicDataSource?kn.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:i}=this;if(i!=null&&this._queryIs3DObjectFormat(t)){r=r===t?r.clone():r,r.formatOf3DObjects=null;const{supportedFormats:s,queryFormats:n}=i,o=mk("model/gltf-binary",s)??yk("glb",s),a=mk("model/gltf+json",s)??yk("gltf",s);for(const l of n){if(l===o){r.formatOf3DObjects=l;break}l!==a||r.formatOf3DObjects||(r.formatOf3DObjects=l)}if(!r.formatOf3DObjects)throw new K("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(r.outSpatialReference&&!vi(r.outSpatialReference,this.sourceSpatialReference))throw new K("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(r.outFields==null||!r.outFields.includes("*")){r=r===t?r.clone():r,r.outFields==null&&(r.outFields=[]);const{originX:l,originY:u,originZ:c,translationX:p,translationY:f,translationZ:m,scaleX:g,scaleY:b,scaleZ:w,rotationX:S,rotationY:M,rotationZ:x,rotationDeg:_}=i.transformFieldRoles;r.outFields.push(l,u,c,p,f,m,g,b,w,S,M,x,_)}}return r}_normalizeFields(t){if(this.fieldsIndex!=null&&t!=null)for(const r of t){const i=this.fieldsIndex.get(r.name);i&&Object.assign(r,i.toJSON())}}_queryIs3DObjectFormat(t){return this.infoFor3D!=null&&t.returnGeometry===!0&&t.multipatchOption!=="xyFootprint"&&!t.outStatistics}};h([d({type:kn})],Sa.prototype,"dynamicDataSource",void 0),h([d()],Sa.prototype,"fieldsIndex",void 0),h([d()],Sa.prototype,"gdbVersion",void 0),h([d()],Sa.prototype,"infoFor3D",void 0),h([d({readOnly:!0})],Sa.prototype,"parsedUrl",null),h([d()],Sa.prototype,"pbfSupported",void 0),h([d()],Sa.prototype,"queryAttachmentsSupported",void 0),h([d()],Sa.prototype,"sourceSpatialReference",void 0),h([d({type:String})],Sa.prototype,"url",void 0),Sa=h([j("esri.layers.graphics.sources.support.QueryTask")],Sa);const H5e=Sa;var XT;function E5(e){return e?.type==="esriSMS"}function A5(e,t,r){const i=this.originIdOf(t)>=Fn(r.origin);return{ignoreOrigin:!0,allowNull:i,enabled:!!r&&r.layer?.type==="map-image"&&(r.writeSublayerStructure||i)}}function $5(e,t,r){return{enabled:!!r&&r.layer?.type==="tile"&&(r.origin&&this.originIdOf(t)>=Fn(r.origin)||this._isOverridden(t))}}function ha(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function Fx(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=Fn(r.origin))}}let W5e=0;const J5e=new Set(["layer","parent","loaded","loadStatus","loadError","loadWarnings"]);let nt=XT=class extends Zd(Y2(Yu)){constructor(e){super(e),this.capabilities=void 0,this.maxScaleRange={minScale:0,maxScale:0},this.fields=null,this.fullExtent=null,this.geometryType=null,this.globalIdField=null,this.isTable=!1,this.legendEnabled=!0,this.objectIdField=null,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.spatialReference=null,this.title=null,this.typeIdField=null,this.type="sublayer",this.types=null,this._lastParsedUrl=null}async load(e){return this.addResolvingPromise((async()=>{const{layer:t,url:r}=this;if(!t&&!r)throw new K("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});const i=t?await t.fetchSublayerInfo(this,e):(await Re(r,{responseType:"json",query:{f:"json"},...e})).data;i&&(this.sourceJSON=i,this.read({layerDefinition:i},{origin:"service",layer:t,url:Pr(r)}))})()),this}readCapabilities(e,t){t=t.layerDefinition||t;const{operations:{supportsQuery:r,supportsQueryAttachments:i},query:{supportsFormatPBF:s,supportsOrderBy:n,supportsPagination:o},data:{supportsAttachment:a},queryRelated:l}=u8(t,this.url);return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:r,supportsQueryAttachments:i},data:{supportsAttachment:a},query:{supportsFormatPBF:s,supportsOrderBy:n,supportsPagination:o},queryRelated:l}}get defaultPopupTemplate(){return this.createPopupTemplate()}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}readMaxScaleRange(e,t){return{minScale:(t=t.layerDefinition||t).minScale??0,maxScale:t.maxScale??0}}get fieldsIndex(){return new LA(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeGlobalID")return r.name}}get id(){return this._get("id")??W5e++}set id(e){this._get("id")!==e&&(this.layer?.capabilities?.exportMap?.supportsDynamicLayers!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}readIsTable(e,t){return t.type==="Table"}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,r,i){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(s=>s.write({},i))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers?.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition?.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition?.maxScale||0}readObjectIdFieldFromService(e,t){return(t=t.layerDefinition||t).objectIdField?t.objectIdField:t.fields?.find(i=>i.type==="esriFieldTypeOID")?.name}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const{layerDefinition:r}=t;return 1-.01*(r?.transparency??r?.drawingInfo?.transparency??0)}writeOpacity(e,t,r,i){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=XE(this.parent.id):t.parentLayerId=-1}get queryTask(){if(!this.layer)return null;const{capabilities:e,fieldsIndex:t,layer:r,url:i}=this,{spatialReference:s}=r,n="gdbVersion"in r?r.gdbVersion:void 0,o=ce("featurelayer-pbf")&&e?.query.supportsFormatPBF;return new H5e({fieldsIndex:t,gdbVersion:n,pbfSupported:o,queryAttachmentsSupported:e?.operations?.supportsQueryAttachments??!1,sourceSpatialReference:s,url:i})}set renderer(e){if(jO(e,this.fieldsIndex),e){for(const t of e.getSymbols())if(Ay(t)){be.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new yh({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return ni(qe.ofType(XT),e)}writeSublayers(e,t,r){this.sublayers?.length&&(t[r]=this.sublayers.map(i=>i.id).toArray().reverse())}readTitle(e,t){return t.layerDefinition?.name??t.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(s=>s.name.toLowerCase()===r);i&&(r=i.name)}return r}get url(){const e=this.layer?.parsedUrl??this._lastParsedUrl,t=this.source;if(!e)return null;if(this._lastParsedUrl=e,t?.type==="map-layer")return`${e.path}/${t.mapLayerId}`;const r={layer:JSON.stringify({source:this.source})};return`${e.path}/dynamicLayer?${Td(r)}`}set url(e){this._overrideIfSome("url",e)}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,r,i){t[r]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=es(this),t=new XT;return es(t).store=e.clone(J5e),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return _8(this,e)}createQuery(){return new Ci({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){if(this.hasOwnProperty("sublayers"))return null;const e=(await fe(async()=>{const{default:s}=await Promise.resolve().then(()=>bIe);return{default:s}},void 0,import.meta.url)).default,{layer:t,url:r}=this;let i;if(r&&this.originIdOf("url")>Ne.SERVICE)i=new e({url:r});else{if(!t?.parsedUrl)throw new K("createFeatureLayer:missing-information","Cannot create a FeatureLayer without a url or a parent layer");{const s=t.parsedUrl;i=new e({url:s.path}),s&&this.source&&(this.source.type==="map-layer"?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source)}}return t?.refreshInterval!=null&&(i.refreshInterval=t.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.floorInfo&&(i.floorInfo=Z(this.floorInfo)),this.originIdOf("labelingInfo")>Ne.SERVICE&&(i.labelingInfo=Z(this.labelingInfo)),this.originIdOf("labelsVisible")>Ne.DEFAULTS&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>Ne.DEFAULTS&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>Ne.DEFAULTS&&(i.visible=this.visible),this.originIdOf("minScale")>Ne.DEFAULTS&&(i.minScale=this.minScale),this.originIdOf("maxScale")>Ne.DEFAULTS&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>Ne.DEFAULTS&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>Ne.DEFAULTS&&(i.popupTemplate=Z(this.popupTemplate)),this.originIdOf("renderer")>Ne.SERVICE&&(i.renderer=Z(this.renderer)),this.source?.type==="data-layer"&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>Ne.DEFAULTS&&(i.title=this.title),t?.type==="map-image"&&t.originIdOf("customParameters")>Ne.DEFAULTS&&(i.customParameters=t.customParameters),t?.type==="tile"&&t.originIdOf("customParameters")>Ne.DEFAULTS&&(i.customParameters=t.customParameters),i}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){return ste(this.types,this.typeIdField,e)}getFieldDomain(e,t){const r=t?.feature,i=this.getFeatureType(r);if(i){const s=i.domains&&i.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}async queryAttachments(e,t){await this.load(),e=tte.from(e);const r=this.capabilities;if(!r?.data?.supportsAttachment)throw new K("queryAttachments:not-supported","this layer doesn't support attachments");const{attachmentTypes:i,objectIds:s,globalIds:n,num:o,size:a,start:l,where:u}=e;if(!r?.operations?.supportsQueryAttachments&&(i?.length>0||n?.length>0||a?.length>0||o||l||u))throw new K("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(s?.length||n?.length||u))throw new K("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);return this.queryTask.executeAttachmentQuery(e,t)}async queryFeatureCount(e=this.createQuery(),t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new K("queryFeatureCount:not-supported","this layer doesn't support queries.");if(!this.url)throw new K("queryFeatureCount:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeForCount(e,{...t,query:{...this.layer?.customParameters,token:r}})}async queryFeatures(e=this.createQuery(),t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new K("queryFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new K("queryFeatures:not-supported","this layer has no url.");const r=await this.queryTask.execute(e,{...t,query:{...this.layer?.customParameters,token:this.layer?.apiKey}});if(r?.features)for(const i of r.features)i.sourceLayer=this;return r}async queryObjectIds(e=this.createQuery(),t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new K("queryObjectIds:not-supported","this layer doesn't support queries.");if(!this.url)throw new K("queryObjectIds:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeForIds(e,{...t,query:{...this.layer?.customParameters,token:r}})}async queryRelatedFeatures(e,t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new K("queryRelatedFeatures:not-supported","this layer doesn't support queries.");if(!this.url)throw new K("queryRelatedFeatures:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeRelationshipQuery(e,{...t,query:{...this.layer?.customParameters,token:r}})}async queryRelatedFeaturesCount(e,t){if(await this.load(),!this.capabilities.operations.supportsQuery)throw new K("queryRelatedFeaturesCount:not-supported","this layer doesn't support queries.");if(!this.capabilities.queryRelated.supportsCount)throw new K("queryRelatedFeaturesCount:not-supported","this layer doesn't support query related counts.");if(!this.url)throw new K("queryRelatedFeaturesCount:not-supported","this layer has no url.");const r=this.layer?.apiKey;return await this.queryTask.executeRelationshipQueryForCount(e,{...t,query:{...this.layer?.customParameters,token:r}})}toExportImageJSON(e){const t={id:this.id,source:this.source?.toJSON()||{mapLayerId:this.id,type:"mapLayer"}},r=t6(e,this.definitionExpression);r!=null&&(t.definitionExpression=r);const i=["renderer","labelingInfo","opacity","labelsVisible"].reduce((n,o)=>(n[o]=this.originIdOf(o),n),{});if(Object.keys(i).some(n=>i[n]>Ne.SERVICE)){const n=t.drawingInfo={};if(i.renderer>Ne.SERVICE&&(n.renderer=this.renderer?this.renderer.toJSON():null),i.labelsVisible>Ne.SERVICE&&(n.showLabels=this.labelsVisible),this.labelsVisible&&i.labelingInfo>Ne.SERVICE)if(this.labelingInfo){!this.loaded&&this.labelingInfo?.some(a=>!a.labelPlacement)&&be.getLogger(this).warnOnce(`A Sublayer (title: ${this.title}, id: ${this.id}) has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type.`,{sublayer:this});let o=this.labelingInfo;this.geometryType!=null&&(o=lIe(this.labelingInfo,oI.toJSON(this.geometryType))),n.showLabels=!0,n.labelingInfo=o.filter(a=>a.labelPlacement).map(a=>a.toJSON({origin:"service",layer:this.layer}))}else n.showLabels=!1;i.opacity>Ne.SERVICE&&(n.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(n.renderer)}return t}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,t=>{t.color||t.style!=="esriSMSX"&&t.style!=="esriSMSCross"||(t.outline?.color?t.color=t.outline.color:t.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const r=("uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)??[];for(const i of r)E5(i.symbol)&&t(i.symbol);"symbol"in e&&E5(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&E5(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const r=this.layer,i=this._get(e);let s,n;switch(e){case"definitionExpression":case"floorInfo":s="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":s="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":s="supportsDynamicLayers",n="supportsModification"}const o=es(this).getDefaultOrigin();if(o!=="service"){if(s&&this.layer?.capabilities?.exportMap?.[s]===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${s}'`);if(n&&this.capabilities?.exportMap[n]===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${n}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,t),o!=="service"&&i!==t&&r&&r.emit&&r.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(r=>{r.parent=null,r.layer=null}),this.removeAllHandles()),e&&(e.forEach(r=>{r.parent=this,r.layer=this.layer}),this.addHandles([e.on("after-add",({item:r})=>{r.parent=this,r.layer=this.layer}),e.on("after-remove",({item:r})=>{r.parent=null,r.layer=null}),e.on("before-changes",r=>{(this.layer?.capabilities?.exportMap?.supportsSublayersChanges??1)||(be.getLogger(this).error(new K("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),r.preventDefault())})]))}_logLockedError(e,t){const{layer:r,declaredClass:i}=this;be.getLogger(i).error(new K("sublayer:locked",`Property '${String(e)}' can't be changed on Sublayer from the layer '${r?.id}'`,{reason:t,sublayer:this,layer:r}))}_getLayerDomain(e){return this.fieldsIndex.get(e)?.domain??null}};nt.test={isMapImageLayerOverridePolicy:e=>e===ha||e===A5,isTileImageLayerOverridePolicy:e=>e===$5},h([d({readOnly:!0})],nt.prototype,"capabilities",void 0),h([pe("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],nt.prototype,"readCapabilities",null),h([d()],nt.prototype,"defaultPopupTemplate",null),h([d({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:A5}}})],nt.prototype,"definitionExpression",null),h([d({readOnly:!0})],nt.prototype,"effectiveScaleRange",null),h([pe("service","maxScaleRange",["minScale","maxScale"])],nt.prototype,"readMaxScaleRange",null),h([d({type:[Uo],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],nt.prototype,"fields",void 0),h([d({readOnly:!0})],nt.prototype,"fieldsIndex",null),h([d({type:nte,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:A5},origins:{"web-scene":{read:!1,write:!1}}}})],nt.prototype,"floorInfo",null),h([d({type:yt,json:{read:{source:"layerDefinition.extent"}}})],nt.prototype,"fullExtent",void 0),h([d({type:oI.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:oI.read}}}}})],nt.prototype,"geometryType",void 0),h([d({type:String})],nt.prototype,"globalIdField",void 0),h([pe("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],nt.prototype,"readGlobalIdFieldFromService",null),h([d({type:St,json:{write:{ignoreOrigin:!0}}})],nt.prototype,"id",null),h([d({readOnly:!0})],nt.prototype,"isTable",void 0),h([pe("service","isTable",["type"])],nt.prototype,"readIsTable",null),h([d({value:null,type:[lS],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:ha}}})],nt.prototype,"labelingInfo",null),h([ge("labelingInfo")],nt.prototype,"writeLabelingInfo",null),h([d({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:ha}}})],nt.prototype,"labelsVisible",null),h([d({value:null})],nt.prototype,"layer",null),h([d({type:String,json:{write:{overridePolicy:$5}}})],nt.prototype,"layerItemId",void 0),h([d({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Fx}}})],nt.prototype,"legendEnabled",void 0),h([d({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],nt.prototype,"listMode",null),h([d({type:Number,value:0,json:{write:{overridePolicy:ha}}})],nt.prototype,"minScale",null),h([pe("minScale",["minScale","layerDefinition.minScale"])],nt.prototype,"readMinScale",null),h([d({type:Number,value:0,json:{write:{overridePolicy:ha}}})],nt.prototype,"maxScale",null),h([pe("maxScale",["maxScale","layerDefinition.maxScale"])],nt.prototype,"readMaxScale",null),h([d()],nt.prototype,"objectIdField",void 0),h([pe("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],nt.prototype,"readObjectIdFieldFromService",null),h([d({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:ha}}})],nt.prototype,"opacity",null),h([pe("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],nt.prototype,"readOpacity",null),h([ge("opacity")],nt.prototype,"writeOpacity",null),h([d({json:{type:St,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:ha}}})],nt.prototype,"parent",void 0),h([ge("parent")],nt.prototype,"writeParent",null),h([d({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:Fx,writer(e,t,r){t[r]=!e}}}})],nt.prototype,"popupEnabled",void 0),h([d({type:Bd,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Fx}}})],nt.prototype,"popupTemplate",void 0),h([d({readOnly:!0})],nt.prototype,"queryTask",null),h([d({type:[ote],readOnly:!0,json:{origins:{service:{read:{source:"layerDefinition.relationships"}}}}})],nt.prototype,"relationships",void 0),h([d({types:iS,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ha},origins:{"web-scene":{types:eee,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ha}}}}})],nt.prototype,"renderer",null),h([d({types:{key:"type",base:null,typeMap:{"data-layer":kn,"map-layer":yh}},cast(e){if(e){if("mapLayerId"in e)return zr(yh,e);if("dataSource"in e)return zr(kn,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:ha}}})],nt.prototype,"source",null),h([d()],nt.prototype,"sourceJSON",void 0),h([d({type:Fe,json:{origins:{service:{read:{source:"layerDefinition.extent.spatialReference"}}}}})],nt.prototype,"spatialReference",void 0),h([d({value:null,json:{type:[St],write:{target:"subLayerIds",allowNull:!0,overridePolicy:ha}}})],nt.prototype,"sublayers",null),h([Zt("sublayers")],nt.prototype,"castSublayers",null),h([ge("sublayers")],nt.prototype,"writeSublayers",null),h([d({type:String,json:{name:"name",write:{overridePolicy:Fx}}})],nt.prototype,"title",void 0),h([pe("service","title",["name","layerDefinition.name"])],nt.prototype,"readTitle",null),h([d({type:String})],nt.prototype,"typeIdField",void 0),h([d({json:{read:!1},readOnly:!0,value:"sublayer"})],nt.prototype,"type",void 0),h([pe("typeIdField",["layerDefinition.typeIdField"])],nt.prototype,"readTypeIdField",null),h([d({type:[b8],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],nt.prototype,"types",void 0),h([d({type:String,json:{name:"layerUrl",write:{overridePolicy:$5}}})],nt.prototype,"url",null),h([d({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:ha}}})],nt.prototype,"visible",null),h([ge("visible")],nt.prototype,"writeVisible",null),nt=XT=h([j("esri.layers.support.Sublayer")],nt);const fS=nt;function sG(e,t,r){return t.flatten(({sublayers:s})=>s).length!==e.length?!0:!!e.some(s=>s.originIdOf("minScale")>r||s.originIdOf("maxScale")>r||s.originIdOf("renderer")>r||s.originIdOf("labelingInfo")>r||s.originIdOf("opacity")>r||s.originIdOf("labelsVisible")>r||s.originIdOf("source")>r)||!nie(e,t)}function Z5e(e,t,r){return!!e.some(i=>{const s=i.source,n=!s||s.type==="map-layer"&&s.mapLayerId===i.id&&(s.gdbVersion==null||s.gdbVersion===r);return i.commitProperty("renderer"),i.commitProperty("labelingInfo"),i.commitProperty("opacity"),i.commitProperty("labelsVisible"),!n||i.originIdOf("renderer")>Ne.SERVICE||i.originIdOf("labelingInfo")>Ne.SERVICE||i.originIdOf("opacity")>Ne.SERVICE||i.originIdOf("labelsVisible")>Ne.SERVICE})||!nie(e,t)}function nie(e,t){if(!e?.length||t==null)return!0;const r=t.slice().reverse().flatten(({sublayers:n})=>n&&n.toArray().reverse()).map(n=>n.id).toArray();if(e.length>r.length)return!1;let i=0;const s=r.length;for(const{id:n}of e){for(;i<s&&r[i]!==n;)i++;if(i>=s)return!1}return!0}function Y5e(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition?.minScale!=null)}function K5e(e,t){const r=[],i={};return e&&e.forEach(s=>{const n=new fS;if(n.read(s,t),i[n.id]=n,s.parentLayerId!=null&&s.parentLayerId!==-1){const o=i[s.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(n)}else r.unshift(n)}),r}const jx=qe.ofType(fS);function oie(e,t){e&&e.forEach(r=>{t(r),r.sublayers&&r.sublayers.length&&oie(r.sublayers,t)})}const aie=e=>{let t=class extends e{constructor(...r){super(...r),this.allSublayers=new Py({getCollections:()=>[this.sublayers],getChildrenFunction:i=>i.sublayers}),this.sublayersSourceJSON={[Ne.SERVICE]:{},[Ne.PORTAL_ITEM]:{},[Ne.WEB_SCENE]:{},[Ne.WEB_MAP]:{}},this.subtables=null,this.addHandles([ht(()=>this.sublayers,(i,s)=>this._handleSublayersChange(i,s),Os),ht(()=>this.subtables,(i,s)=>this._handleSublayersChange(i,s),Os)])}destroy(){this.allSublayers.destroy()}readSublayers(r,i){if(!i||!r)return;const{sublayersSourceJSON:s}=this,n=Fn(i.origin);if(n<Ne.SERVICE||(s[n]={context:i,visibleLayers:r.visibleLayers||s[n].visibleLayers,layers:r.layers||s[n].layers},n>Ne.SERVICE))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:o,origin:a}=this.createSublayersForOrigin("web-document"),l=es(this);l.setDefaultOrigin(a),this._set("sublayers",new jx(o)),l.setDefaultOrigin("user")}findSublayerById(r){return this.allSublayers.find(i=>i.id===r)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(r){const i=Fn(r==="web-document"?"web-map":r);let s=Ne.SERVICE,n=this.sublayersSourceJSON[Ne.SERVICE].layers,o=this.sublayersSourceJSON[Ne.SERVICE].context,a=null;const l=[Ne.PORTAL_ITEM,Ne.WEB_SCENE,Ne.WEB_MAP].filter(g=>g<=i);for(const g of l){const b=this.sublayersSourceJSON[g];Y5e(b.layers)&&(s=g,n=b.layers,o=b.context,b.visibleLayers&&(a={visibleLayers:b.visibleLayers,context:b.context}))}const u=[Ne.PORTAL_ITEM,Ne.WEB_SCENE,Ne.WEB_MAP].filter(g=>g>s&&g<=i);let c=null;for(const g of u){const{layers:b,visibleLayers:w,context:S}=this.sublayersSourceJSON[g];b&&(c={layers:b,context:S}),w&&(a={visibleLayers:w,context:S})}const p=K5e(n,o),f=new Map,m=new Set;if(c)for(const g of c.layers)f.set(g.id,g);if(a?.visibleLayers)for(const g of a.visibleLayers)m.add(g);return oie(p,g=>{c&&g.read(f.get(g.id),c.context),a&&g.read({defaultVisibility:m.has(g.id)},a.context)}),{origin:P_(s),sublayers:new jx({items:p})}}read(r,i){super.read(r,i),this.readSublayers(r,i)}_handleSublayersChange(r,i){i&&(i.forEach(s=>{s.parent=null,s.layer=null}),this.removeHandles("sublayers-owner")),r&&(r.forEach(s=>{s.parent=this,s.layer=this}),this.addHandles([r.on("after-add",({item:s})=>{s.parent=this,s.layer=this}),r.on("after-remove",({item:s})=>{s.parent=null,s.layer=null})],"sublayers-owner"),this.type==="tile"&&this.addHandles(r.on("before-changes",s=>{be.getLogger("esri.layers.TileLayer").error(new K("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),s.preventDefault()}),"sublayers-owner"))}};return h([d({readOnly:!0})],t.prototype,"allSublayers",void 0),h([d({readOnly:!0,type:qe.ofType(fS)})],t.prototype,"serviceSublayers",void 0),h([d({value:null,type:jx,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),h([d({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),h([d({type:jx,json:{read:{source:"tables"}}})],t.prototype,"subtables",void 0),t=h([j("esri.layers.mixins.SublayersOwner")],t),t};function ult(e){const t=e.layer;return"floorInfo"in t&&t.floorInfo?.floorField&&"floors"in e.view?lie(e.view.floors,t.floorInfo.floorField):null}function nG(e,t){return"floorInfo"in t&&t.floorInfo?.floorField?lie(e,t.floorInfo.floorField):null}function lie(e,t){if(!e?.length)return null;const r=e.filter(i=>i!=="").map(i=>`'${i}'`);return r.push("''"),`${t} IN (${r.join(",")}) OR ${t} IS NULL`}const X5e={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let xa=class extends et{constructor(t){super(t),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const t=this.visibleSublayers.map(r=>{const i=nG(this.floors,r);return r.toExportImageJSON(i)});return t.length?JSON.stringify(t):null}get hasDynamicLayers(){return this.layer&&Z5e(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.removeHandles("layer"),t&&this.addHandles([t.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("sublayer-update",r=>this.notifyChange(X5e[r.propertyName]))],"layer"))}get layers(){const t=this.visibleSublayers;return t?t.length?"show:"+t.map(r=>r.id).join(","):"show:-1":null}get layerDefs(){const t=!!this.floors?.length,r=this.visibleSublayers.filter(i=>i.definitionExpression!=null||t&&i.floorInfo!=null);return r.length?JSON.stringify(r.reduce((i,s)=>{const n=nG(this.floors,s),o=t6(n,s.definitionExpression);return o!=null&&(i[s.id]=o),i},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers");const t=this.layer;return t&&(t.commitProperty("dpi"),t.commitProperty("imageFormat"),t.commitProperty("imageTransparency"),t.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const t=[];if(!this.layer)return t;const r=this.layer.sublayers,i=this.scale,s=o=>{o.visible&&(i===0||h5e(i,o.minScale,o.maxScale))&&(o.sublayers?o.sublayers.forEach(s):t.unshift(o))};r&&r.forEach(s);const n=this._get("visibleSublayers");return!n||n.length!==t.length||n.some((o,a)=>t[a]!==o)?t:n}toJSON(){const t=this.layer;let r={dpi:t.dpi,format:t.imageFormat,transparent:t.imageTransparency,gdbVersion:t.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};h([d({readOnly:!0})],xa.prototype,"dynamicLayers",null),h([d()],xa.prototype,"floors",void 0),h([d({readOnly:!0})],xa.prototype,"hasDynamicLayers",null),h([d()],xa.prototype,"layer",null),h([d({readOnly:!0})],xa.prototype,"layers",null),h([d({readOnly:!0})],xa.prototype,"layerDefs",null),h([d({type:Number})],xa.prototype,"scale",void 0),h([d({readOnly:!0})],xa.prototype,"version",null),h([d({readOnly:!0})],xa.prototype,"visibleSublayers",null),xa=h([j("esri.layers.support.ExportImageParameters")],xa);let ei=class extends Ky(JA(Xy(aie(Bre(jA(I1(E1(Zd(A1(Z6(GA(Yd)))))))))))){constructor(...t){super(...t),this._exportImageParameters=new xa({layer:this}),this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeZone=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(t,r){return typeof t=="string"?{url:t,...r}:t}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},t).catch(lo).then(()=>this._fetchService(r))),Promise.resolve(this)}destroy(){this._exportImageParameters.destroy()}readImageFormat(t,r){const i=r.supportedImageFormatTypes;return i&&i.includes("PNG32")?"png32":"png24"}writeSublayers(t,r,i,s){if(!this.loaded||!t)return;const n=t.slice().reverse().flatten(({sublayers:p})=>p&&p.toArray().reverse()).toArray();let o=!1;const a=Fn(s.origin);if(this.capabilities?.operations.supportsExportMap&&this.capabilities?.exportMap?.supportsDynamicLayers){if(a===Ne.PORTAL_ITEM){const p=this.createSublayersForOrigin("service").sublayers;o=sG(n,p,Ne.SERVICE)}else if(a>Ne.PORTAL_ITEM){const p=this.createSublayersForOrigin("portal-item");o=sG(n,p.sublayers,Fn(p.origin))}}const l=[],u={writeSublayerStructure:o,...s};let c=o||this.hasVisibleLayersForOrigin(a);n.forEach(p=>{const f=p.write({},u);l.push(f),c=c||p.originOf("visible")==="user"}),l.some(p=>Object.keys(p).length>1)&&(r.layers=l),c&&(r.visibleLayers=n.filter(p=>p.visible).map(p=>p.id))}createExportImageParameters(t,r,i,s){const n=s?.pixelRatio||1;t&&this.version>=10&&(t=t.clone().shiftCentralMeridian()),this._exportImageParameters.floors=s?.floors??null,this._exportImageParameters.scale=fk({extent:t,width:r})*n;const o=this._exportImageParameters.toJSON(),a=!s?.rotation||this.version<10.3?{}:{rotation:-s.rotation},l=t?.spatialReference,u=Ad(l);o.dpi*=n;const c={};if(s?.timeExtent){const{start:p,end:f}=s.timeExtent.toJSON();c.time=p&&f&&p===f?""+p:`${p??"null"},${f??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(c.time="null,null");return{bbox:t&&t.xmin+","+t.ymin+","+t.xmax+","+t.ymax,bboxSR:u,imageSR:u,size:r+","+i,...o,...a,...c}}async fetchImage(t,r,i,s){const{data:n}=await this._fetchImage("image",t,r,i,s);return n}async fetchImageBitmap(t,r,i,s){const{data:n,url:o}=await this._fetchImage("blob",t,r,i,s);return TI(n,o,s?.signal)}async fetchRecomputedExtents(t={}){const r={...t,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:i}=await Re(this.url,r),{extent:s,fullExtent:n,timeExtent:o}=i,a=s||n;return{fullExtent:a&&yt.fromJSON(a),timeExtent:o&&Bn.fromJSON({start:o[0],end:o[1]})}}loadAll(){return nA(this,t=>{t(this.allSublayers),t(this.subtables)})}serviceSupportsSpatialReference(t){return w8(this,t)}async _fetchImage(t,r,i,s,n){const o={responseType:t,signal:n?.signal??null,query:{...this.parsedUrl.query,...this.createExportImageParameters(r,i,s,n),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},a=this.parsedUrl.path+"/export";if(o.query?.dynamicLayers!=null&&!this.capabilities?.exportMap?.supportsDynamicLayers)throw new K("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:o.query});try{const{data:l}=await Re(a,o);return{data:l,url:a}}catch(l){throw ws(l)?l:new K("mapimagelayer:image-fetch-error",`Unable to load image: ${a}`,{error:l})}}async _fetchService(t){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:r,ssl:i}=await Re(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:t});i&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=r,this.read(r,{origin:"service",url:this.parsedUrl})}hasVisibleLayersForOrigin(t){return!(t==null||!this.sublayersSourceJSON[t]?.visibleLayers)}};h([d($v("dateFieldsTimeReference"))],ei.prototype,"dateFieldsTimeZone",void 0),h([d({type:Boolean})],ei.prototype,"datesInUnknownTimezone",void 0),h([d()],ei.prototype,"dpi",void 0),h([d()],ei.prototype,"gdbVersion",void 0),h([d()],ei.prototype,"imageFormat",void 0),h([pe("imageFormat",["supportedImageFormatTypes"])],ei.prototype,"readImageFormat",null),h([d({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],ei.prototype,"imageMaxHeight",void 0),h([d({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],ei.prototype,"imageMaxWidth",void 0),h([d()],ei.prototype,"imageTransparency",void 0),h([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],ei.prototype,"isReference",void 0),h([d({json:{read:!1,write:!1}})],ei.prototype,"labelsVisible",void 0),h([d({type:["ArcGISMapServiceLayer"]})],ei.prototype,"operationalLayerType",void 0),h([d({json:{read:!1,write:!1}})],ei.prototype,"popupEnabled",void 0),h([d($v("preferredTimeReference"))],ei.prototype,"preferredTimeZone",void 0),h([d()],ei.prototype,"sourceJSON",void 0),h([d({json:{write:{ignoreOrigin:!0}}})],ei.prototype,"sublayers",void 0),h([ge("sublayers",{layers:{type:[fS]},visibleLayers:{type:[St]}})],ei.prototype,"writeSublayers",null),h([d({type:["show","hide","hide-children"]})],ei.prototype,"listMode",void 0),h([d({json:{read:!1},readOnly:!0,value:"map-image"})],ei.prototype,"type",void 0),h([d(oS)],ei.prototype,"url",void 0),ei=h([j("esri.layers.MapImageLayer")],ei);const K8=ei,plt=Object.freeze(Object.defineProperty({__proto__:null,default:K8},Symbol.toStringTag,{value:"Module"}));var bk;let fu=bk=class extends ue{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new bk({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};h([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],fu.prototype,"cols",void 0),h([d({type:St,json:{write:!0}})],fu.prototype,"level",void 0),h([d({type:String,json:{write:!0}})],fu.prototype,"levelValue",void 0),h([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],fu.prototype,"origin",void 0),h([d({type:Number,json:{write:!0}})],fu.prototype,"resolution",void 0),h([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],fu.prototype,"rows",void 0),h([d({type:Number,json:{write:!0}})],fu.prototype,"scale",void 0),fu=bk=h([j("esri.layers.support.LOD")],fu);const vt=fu;let uie=class{constructor(t,r,i,s,n=void 0){this.id=t,this.level=r,this.row=i,this.col=s,this.extent=n}};var Pp;const oG=new wt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Is=Pp=class extends ue{static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:s=Fe.WebMercator,numLODs:n=24}=e;if(!Wo(s)){const p=[];if(r)for(let f=0;f<r.length;f++){const m=r[f];p.push(new vt({level:f,scale:m,resolution:m}))}else{let f=5e-4;for(let m=n-1;m>=0;m--)p.unshift(new vt({level:m,scale:f,resolution:f})),f*=2}return new Pp({dpi:96,lods:p,origin:new je(0,0,s),size:[i,i],spatialReference:s})}const o=Un(s),a=e.origin?new je({x:e.origin.x,y:e.origin.y,spatialReference:s}):new je(o?{x:o.origin[0],y:o.origin[1],spatialReference:s}:{x:0,y:0,spatialReference:s}),l=96,u=1/(Vh(s)*39.37*l),c=[];if(r)for(let p=0;p<r.length;p++){const f=r[p],m=f*u;c.push(new vt({level:p,scale:f,resolution:m}))}else{let p=oA(s)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const f=Math.ceil(n/t);c.push(new vt({level:0,scale:p,resolution:p*u}));for(let m=1;m<f;m++){const g=p/2**t,b=g*u;c.push(new vt({level:m,scale:g,resolution:b})),p=g}}return new Pp({dpi:l,lods:c,origin:a,size:[i,i],spatialReference:s})}constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=Un(e);return e.isWrappable&&!!r&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return je.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[],s=this._levelToLOD={};e&&(t=-1/0,r=1/0,e.forEach(n=>{i.push(n.scale),t=n.scale>t?n.scale:t,r=n.scale<r?n.scale:r,s[n.level]=n})),this._set("scales",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const s=t[i],n=t[i+1];if(s<=e)return i;if(n===e)return i+1;if(s>e&&n<e)return i+Math.log(s/e)/Math.log(s/n)}return i}tileAt(e,t,r,i){const s=this.lodAt(e);if(!s)return null;let n,o;if(typeof t=="number")n=t,o=r;else if(vi(t.spatialReference,this.spatialReference))n=t.x,o=t.y,i=r;else{const u=uA(t,this.spatialReference);if(u==null)return null;n=u.x,o=u.y,i=r}const a=s.resolution*this.size[0],l=s.resolution*this.size[1];return i||(i=new uie(null,0,0,0,mo())),i.level=e,i.row=Math.floor((this.origin.y-o)/l+.001),i.col=Math.floor((n-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=Pp.ExtrapolateOptions.NONE){let r=this.lodAt(e.level);if(!r&&t===Pp.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,s=r.resolution*this.size[0]/2**i,n=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=mo()),e.extent[0]=this.origin.x+e.col*s,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+s,e.extent[3]=e.extent[1]+n}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const r=this.lodAt(t.level);if(r==null)return null;const{resolution:i}=r,s=i*this.size[0],n=i*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+s,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD?.[e]??null}clone(){return Pp.fromJSON(this.write({}))}getCompatibleForVTL(e){if(this.size[0]!==this.size[1]||this.size[0]===256&&e===512)return null;const t=(this.size[0]===512&&e===256?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===e&&t===0)return this;const r=[],i=this.lods.length-t;for(let s=0;s<i;s++){const n=s+t,{scale:o,resolution:a}=n>=0?this.lods[n]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};r.push(new vt({level:s,scale:o,resolution:a}))}return new Pp({size:[e,e],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:r})}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};h([d({type:Number,json:{write:!0}})],Is.prototype,"compressionQuality",void 0),h([d({type:Number,json:{write:!0}})],Is.prototype,"dpi",void 0),h([d({type:String,json:{read:oG.read,write:oG.write,origins:{"web-scene":{read:!1,write:!1}}}})],Is.prototype,"format",void 0),h([d({readOnly:!0})],Is.prototype,"isWrappable",null),h([d({type:je,json:{write:!0}})],Is.prototype,"origin",void 0),h([pe("origin")],Is.prototype,"readOrigin",null),h([d({type:[vt],value:null,json:{write:!0}})],Is.prototype,"lods",null),h([d({readOnly:!0})],Is.prototype,"scales",void 0),h([d({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],Is.prototype,"size",void 0),h([pe("size",["rows","cols"])],Is.prototype,"readSize",null),h([ge("size",{cols:{type:St},rows:{type:St}})],Is.prototype,"writeSize",null),h([d({type:Fe,json:{write:!0}})],Is.prototype,"spatialReference",void 0),Is=Pp=h([j("esri.layers.support.TileInfo")],Is),function(e){var t;(t=e.ExtrapolateOptions||(e.ExtrapolateOptions={}))[t.NONE=0]="NONE",t[t.POWER_OF_TWO=1]="POWER_OF_TWO"}(Is||(Is={}));const Ry=Is;var wk;let Rp=wk=class extends ue{constructor(e){super(e)}clone(){return new wk({customLayerParameters:Z(this.customLayerParameters),customParameters:Z(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};h([d({json:{type:Object,write:!0}})],Rp.prototype,"customLayerParameters",void 0),h([d({json:{type:Object,write:!0}})],Rp.prototype,"customParameters",void 0),h([d({type:String,json:{write:!0}})],Rp.prototype,"layerIdentifier",void 0),h([d({type:String,json:{write:!0}})],Rp.prototype,"tileMatrixSet",void 0),h([d({type:String,json:{write:!0}})],Rp.prototype,"url",void 0),Rp=wk=h([j("esri.layers.support.WMTSLayerInfo")],Rp);var _k;let ti=_k=class extends Ky(A1(Xy(I1(E1(Zd(Yd)))))){constructor(...e){super(...e),this.copyright="",this.fullExtent=new yt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,Fe.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=Fe.WebMercator,this.subDomains=null,this.tileInfo=new Ry({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new je({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Fe.WebMercator}),spatialReference:Fe.WebMercator,lods:[new vt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new vt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new vt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new vt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new vt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new vt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new vt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new vt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new vt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new vt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new vt({level:10,scale:577790.554289,resolution:152.874056570411}),new vt({level:11,scale:288895.277144,resolution:76.4370282850732}),new vt({level:12,scale:144447.638572,resolution:38.2185141425366}),new vt({level:13,scale:72223.819286,resolution:19.1092570712683}),new vt({level:14,scale:36111.909643,resolution:9.55462853563415}),new vt({level:15,scale:18055.954822,resolution:4.77731426794937}),new vt({level:16,scale:9027.977411,resolution:2.38865713397468}),new vt({level:17,scale:4513.988705,resolution:1.19432856685505}),new vt({level:18,scale:2256.994353,resolution:.597164283559817}),new vt({level:19,scale:1128.497176,resolution:.298582141647617}),new vt({level:20,scale:564.248588,resolution:.14929107082380833}),new vt({level:21,scale:282.124294,resolution:.07464553541190416}),new vt({level:22,scale:141.062147,resolution:.03732276770595208}),new vt({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return typeof e=="string"?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:["WMTS"]},e).then(()=>{let r="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const i=new Vu(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&i.authority?.includes("{subDomain}")&&(r="is missing 'subDomains' property")}else r="spatialReference must match tileInfo.spatialReference";else r="is missing the required 'urlTemplate' property value";if(r)throw new K("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${r}`)});return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||Fe.fromJSON(t.fullExtent?.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:r}=this,i=new Vu(t),s=i.scheme?i.scheme+"://":"//",n=s+i.authority+"/",o=i.authority;if(o?.includes("{subDomain}")){if(r&&r.length>0&&o.split(".").length>1)for(const a of r)e.push(s+o.replaceAll(/\{subDomain\}/gi,a)+"/")}else e.push(n);return e.map(bZ)}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new Vu(e),r=(t.scheme?t.scheme+"://":"//")+t.authority+"/";return e.substring(r.length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){zl(e)&&(e="https:"+e),e&&(e=e.replaceAll(/\{z\}/gi,"{level}").replaceAll(/\{x\}/gi,"{col}").replaceAll(/\{y\}/gi,"{row}"),e=La(e)),t.templateUrl=e}fetchTile(e,t,r,i={}){const{signal:s}=i,n=this.getTileUrl(e,t,r),o={responseType:"image",signal:s,query:{...this.refreshParameters}};return Re(n,o).then(a=>a.data)}async fetchImageBitmapTile(e,t,r,i={}){const{signal:s}=i;if(this.fetchTile!==_k.prototype.fetchTile){const l=await this.fetchTile(e,t,r,i);return II(l,e,t,r,s)}const n=this.getTileUrl(e,t,r),o={responseType:"blob",signal:s,query:{...this.refreshParameters}},{data:a}=await Re(n,o);return II(a,e,t,r,s)}getTileUrl(e,t,r){const{levelValues:i,tileServers:s,urlPath:n}=this;if(!i||!s||!n)return"";const o=i[e];return s[t%s.length]+BE(n,{level:o,z:o,col:r,x:r,row:t,y:t})}};h([d({type:String,value:"",json:{write:!0}})],ti.prototype,"copyright",void 0),h([d({type:yt,json:{write:!0},nonNullable:!0})],ti.prototype,"fullExtent",void 0),h([d({readOnly:!0,json:{read:!1,write:!1}})],ti.prototype,"legendEnabled",void 0),h([d({type:["show","hide"]})],ti.prototype,"listMode",void 0),h([d({json:{read:!0,write:!0}})],ti.prototype,"blendMode",void 0),h([d()],ti.prototype,"levelValues",null),h([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],ti.prototype,"isReference",void 0),h([d({type:["WebTiledLayer"],value:"WebTiledLayer"})],ti.prototype,"operationalLayerType",void 0),h([d({readOnly:!0,json:{read:!1,write:!1}})],ti.prototype,"popupEnabled",void 0),h([d({type:Fe})],ti.prototype,"spatialReference",void 0),h([pe("spatialReference",["spatialReference","fullExtent.spatialReference"])],ti.prototype,"readSpatialReference",null),h([d({type:[String],json:{write:!0}})],ti.prototype,"subDomains",void 0),h([d({type:Ry,json:{write:!0}})],ti.prototype,"tileInfo",void 0),h([d({readOnly:!0})],ti.prototype,"tileServers",null),h([d({json:{read:!1}})],ti.prototype,"type",void 0),h([d()],ti.prototype,"urlPath",null),h([d({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],ti.prototype,"urlTemplate",void 0),h([pe("urlTemplate",["urlTemplate","templateUrl"])],ti.prototype,"readUrlTemplate",null),h([ge("urlTemplate",{templateUrl:{type:String}})],ti.prototype,"writeUrlTemplate",null),h([d({type:Rp,json:{write:!0}})],ti.prototype,"wmtsInfo",void 0),ti=_k=h([j("esri.layers.WebTileLayer")],ti);const cie=ti,flt=Object.freeze(Object.defineProperty({__proto__:null,default:cie},Symbol.toStringTag,{value:"Module"}));let Tn=class extends cie{constructor(...t){super(...t),this.portalItem=null,this.isReference=null,this.tileInfo=new Ry({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new je({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Fe.WebMercator}),spatialReference:Fe.WebMercator,lods:[new vt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new vt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new vt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new vt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new vt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new vt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new vt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new vt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new vt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new vt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new vt({level:10,scale:577790.554289,resolution:152.874056570411}),new vt({level:11,scale:288895.277144,resolution:76.4370282850732}),new vt({level:12,scale:144447.638572,resolution:38.2185141425366}),new vt({level:13,scale:72223.819286,resolution:19.1092570712683}),new vt({level:14,scale:36111.909643,resolution:9.55462853563415}),new vt({level:15,scale:18055.954822,resolution:4.77731426794937}),new vt({level:16,scale:9027.977411,resolution:2.38865713397468}),new vt({level:17,scale:4513.988705,resolution:1.19432856685505}),new vt({level:18,scale:2256.994353,resolution:.597164283559817}),new vt({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.subDomains=["a","b","c"],this.fullExtent=new yt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,Fe.WebMercator),this.urlTemplate="https://{subDomain}.tile.openstreetmap.org/{level}/{col}/{row}.png",this.operationalLayerType="OpenStreetMap",this.type="open-street-map",this.copyright="Map data &copy; OpenStreetMap contributors, CC-BY-SA"}get refreshInterval(){return 0}};h([d({type:J0,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],Tn.prototype,"portalItem",void 0),h([d({type:Boolean,json:{read:!1,write:!1}})],Tn.prototype,"isReference",void 0),h([d({type:Number,readOnly:!0,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],Tn.prototype,"refreshInterval",null),h([d({type:Ry,json:{write:!1}})],Tn.prototype,"tileInfo",void 0),h([d({type:["show","hide"]})],Tn.prototype,"listMode",void 0),h([d({readOnly:!0,json:{read:!1,write:!1}})],Tn.prototype,"subDomains",void 0),h([d({readOnly:!0,json:{read:!1,write:!1},nonNullable:!0})],Tn.prototype,"fullExtent",void 0),h([d({readOnly:!0,json:{read:!1,write:!1}})],Tn.prototype,"urlTemplate",void 0),h([d({type:["OpenStreetMap"]})],Tn.prototype,"operationalLayerType",void 0),h([d({json:{read:!1}})],Tn.prototype,"type",void 0),h([d({json:{read:!1,write:!1}})],Tn.prototype,"copyright",void 0),h([d({json:{read:!1,write:!1}})],Tn.prototype,"wmtsInfo",void 0),Tn=h([j("esri.layers.OpenStreetMapLayer")],Tn);const X8=Tn,ylt=Object.freeze(Object.defineProperty({__proto__:null,default:X8},Symbol.toStringTag,{value:"Module"}));let Q5e=class{constructor(t,r=0,i=t.lods[t.lods.length-1].level){this.tileInfo=t,this.minLOD=r,this.maxLOD=i,t.lodAt(r)||(this.minLOD=t.lods[0].level),t.lodAt(i)||(this.maxLOD=t.lods[t.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(t,r,i){const s=this.tileInfo?.lodAt(t);return!s||t<this.minLOD||t>this.maxLOD?"unavailable":s.cols&&s.rows?i>=s.cols[0]&&i<=s.cols[1]&&r>=s.rows[0]&&r<=s.rows[1]?"unknown":"unavailable":"unknown"}async fetchAvailability(t,r,i,s){await k3(s);const n=this.getAvailability(t,r,i);if(n==="unavailable")throw new K("tile-map:tile-unavailable","Tile is not available",{level:t,row:r,col:i});return n}async fetchAvailabilityUpsample(t,r,i,s,n){await k3(n),s.level=t,s.row=r,s.col=i;const o=this.tileInfo;return o.updateTileInfo(s),this.fetchAvailability(t,r,i,n).catch(a=>{if(ws(a))throw a;if(o.upsampleTile(s))return this.fetchAvailabilityUpsample(s.level,s.row,s.col,s,n);throw a})}};var Sk;(function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"})(Sk||(Sk={}));function eCe(e,t=!1){return e<=Zce?t?new Array(e).fill(0):new Array(e):new Uint32Array(e)}let aG=class xk{constructor(t){rCe(t);const{location:r,data:i}=t;this.location=Object.freeze(Z(r));const s=this.location.width,n=this.location.height;let o=!0,a=!0;const l=Math.ceil(s*n/32),u=eCe(l);let c=0;for(let p=0;p<i.length;p++){const f=p%32;i[p]?(a=!1,u[c]|=1<<f):o=!1,f===31&&++c}a?(this._availability="unavailable",this.byteSize=40):o?(this._availability="available",this.byteSize=40):(this._availability=u,this.byteSize=40+Wce(u))}getAvailability(t,r){if(this._availability==="unavailable"||this._availability==="available")return this._availability;const i=(t-this.location.top)*this.location.width+(r-this.location.left),s=i%32,n=i>>5,o=this._availability;return n<0||n>o.length?"unknown":o[n]&1<<s?"available":"unavailable"}static fromDefinition(t,r){const i=t.service.request||Re,{row:s,col:n,width:o,height:a}=t,l={query:{f:"json"}};return r=r?{...l,...r}:l,i(tCe(t),r).then(u=>u.data).catch(u=>{if(u?.details?.httpStatus===422)return{location:{top:s,left:n,width:o,height:a},valid:!0,data:new Array(o*a).fill(0)};throw u}).then(u=>{if(u.location&&(u.location.top!==s||u.location.left!==n||u.location.width!==o||u.location.height!==a))throw new K("tilemap:location-mismatch","Tilemap response for different location than requested",{response:u,definition:{top:s,left:n,width:o,height:a}});return xk.fromJSON(u)})}static fromJSON(t){return Object.freeze(new xk(t))}};function lG(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function tCe(e){let t;if(e.service.tileServers?.length){const i=e.service.tileServers;t=`${i&&i.length?i[e.row%i.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}else t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;const r=e.service.query;return r&&(t=`${t}?${r}`),t}function rCe(e){if(!e?.location)throw new K("tilemap:missing-location","Location missing from tilemap response");if(e.valid===!1)throw new K("tilemap:invalid","Tilemap response was marked as invalid");if(!e.data)throw new K("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(e.data))throw new K("tilemap:data-mismatch","Data must be an array of numbers");if(e.data.length!==e.location.width*e.location.height)throw new K("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}var Lm;let mu=Lm=class extends et{constructor(e){super(e),this._pendingTilemapRequests={},this.request=Re,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new U6(2*Sk.MEGABYTES),this.addHandles(ht(()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]},()=>this._initializeTilemapDefinition(),fn))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(e,t,r){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return"unavailable";const i=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return i?i.getAvailability(t,r):"unknown"}fetchAvailability(e,t,r,i){return!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD?Promise.reject(new K("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):this._fetchTilemap(e,t,r,i).catch(s=>s).then(s=>{if(s instanceof aG){const n=s.getAvailability(t,r);if(n==="unavailable")throw new K("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r});return n}if(ws(s))throw s;return"unknown"})}fetchAvailabilityUpsample(e,t,r,i,s){i.level=e,i.row=t,i.col=r;const n=this.layer.tileInfo;n.updateTileInfo(i);const o=this.fetchAvailability(e,t,r,s).catch(a=>{if(ws(a))throw a;if(n.upsampleTile(i))return this.fetchAvailabilityUpsample(i.level,i.row,i.col,i,s);throw a});return this._fetchAvailabilityUpsamplePrefetch(i.id,e,t,r,s,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,r,i,s,n){if(!this._prefetchingEnabled||e==null)return;const o=`prefetch-${e}`;if(this.hasHandles(o))return;const a=new AbortController;n.then(()=>a.abort(),()=>a.abort());let l=!1;const u=or(()=>{l||(l=!0,a.abort())});if(this.addHandles(u,o),await Hhe(10,a.signal).catch(()=>{}),l||(l=!0,this.removeHandles(o)),Ul(a))return;const c=new uie(e,t,r,i),p={...s,signal:a.signal},f=this.layer.tileInfo;for(let m=0;Lm._prefetches.length<Lm._maxPrefetch&&f.upsampleTile(c);++m){const g=this.fetchAvailability(c.level,c.row,c.col,p);Lm._prefetches.push(g);const b=()=>{Lm._prefetches.removeUnordered(g)};g.then(b,b)}}_fetchTilemap(e,t,r,i){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return Promise.reject(new K("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const s=this._tmpTilemapDefinition,n=this._tilemapFromCache(e,t,r,s);if(n)return Promise.resolve(n);const o=i?.signal;return i={...i,signal:null},new Promise((a,l)=>{Zo(o,()=>l(ii()));const u=lG(s);let c=this._pendingTilemapRequests[u];if(!c){c=aG.fromDefinition(s,i).then(f=>(this._tilemapCache.put(u,f,f.byteSize),f));const p=()=>{delete this._pendingTilemapRequests[u]};this._pendingTilemapRequests[u]=c,c.then(p,p)}c.then(a,l)})}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:r}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:Td({...e.query,...r,token:t??e.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,r,i){i.level=e,i.row=t-t%this.size,i.col=r-r%this.size;const s=lG(i);return this._tilemapCache.get(s)}get test(){}};mu._maxPrefetch=4,mu._prefetches=new R_({initialSize:Lm._maxPrefetch}),h([d({constructOnly:!0})],mu.prototype,"layer",void 0),h([d({constructOnly:!0})],mu.prototype,"minLOD",void 0),h([d({constructOnly:!0})],mu.prototype,"maxLOD",void 0),h([d({constructOnly:!0})],mu.prototype,"request",void 0),h([d({constructOnly:!0})],mu.prototype,"size",void 0),mu=Lm=h([j("esri.layers.support.TilemapCache")],mu);const iCe=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(r,i){return i.minLOD!=null&&i.maxLOD!=null?r:0}readMaxScale(r,i){return i.minLOD!=null&&i.maxLOD!=null?r:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(r,i,s){const n=i.capabilities?.includes("Tilemap");let{minLOD:o,maxLOD:a,minScale:l,maxScale:u}=i;if(o==null&&a==null&&l!==0&&u!==0){const c=p=>Math.round(1e4*p)/1e4;l=c(l||i.tileInfo.lods[0].scale),u=c(u||i.tileInfo.lods[i.tileInfo.lods.length-1].scale);for(const p of i.tileInfo.lods){const f=c(p.scale);o=f>=l?p.level:o,a=f>=u?p.level:a}}if(n)return new mu({layer:this,minLOD:o,maxLOD:a});if(i.tileInfo){const c=new Ry;return c.read(i.tileInfo,s),new Q5e(c,o,a)}return null}};return h([d({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),h([d()],t.prototype,"minScale",void 0),h([pe("service","minScale")],t.prototype,"readMinScale",null),h([d()],t.prototype,"maxScale",void 0),h([pe("service","maxScale")],t.prototype,"readMaxScale",null),h([d({type:Fe})],t.prototype,"spatialReference",void 0),h([d({readOnly:!0})],t.prototype,"supportsBlankTile",null),h([d({type:Ry})],t.prototype,"tileInfo",void 0),h([d()],t.prototype,"tilemapCache",void 0),h([pe("service","tilemapCache",["capabilities","tileInfo"])],t.prototype,"readTilemapCache",null),h([d()],t.prototype,"version",void 0),t=h([j("esri.layers.mixins.ArcGISCachedService")],t),t};var Mk;const uG=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let Ti=Mk=class extends Ky(Xy(aie(iCe(Bre(I1(E1(jA(Zd(A1(Z6(GA(Yd)))))))))))){constructor(...e){super(...e),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=e!=null?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(lo).then(()=>this._fetchService(t))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e?this._getDefaultAttribution(this._getMapName(e)):null}readSpatialReference(e,t){return(e=e||t.tileInfo?.spatialReference)&&Fe.fromJSON(e)}writeSublayers(e,t,r,i){if(!this.loaded||!e)return;const s=e.slice().reverse().flatten(({sublayers:a})=>a&&a.toArray().reverse()).toArray(),n=[],o={writeSublayerStructure:!1,...i};s.forEach(a=>{const l=a.write({},o);n.push(l)}),n.some(a=>Object.keys(a).length>1)&&(t.layers=n)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(e){return Array.isArray(e)?e.map(t=>gi(t).path):null}fetchTile(e,t,r,i={}){const{signal:s}=i,n=this.getTileUrl(e,t,r),o={responseType:"image",signal:s,query:{...this.refreshParameters}};return Re(n,o).then(a=>a.data)}async fetchImageBitmapTile(e,t,r,i={}){const{signal:s}=i;if(this.fetchTile!==Mk.prototype.fetchTile){const l=await this.fetchTile(e,t,r,i);return II(l,e,t,r,s)}const n=this.getTileUrl(e,t,r),o={responseType:"blob",signal:s,query:{...this.refreshParameters}},{data:a}=await Re(n,o);return II(a,e,t,r,s)}getTileUrl(e,t,r){const i=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,s=Td({...this.parsedUrl?.query,blankTile:!i&&null,...this.customParameters,token:this.apiKey}),n=this.tileServers;return`${n&&n.length?n[t%n.length]:this.parsedUrl?.path}/tile/${e}/${t}/${r}${s?"?"+s:""}`}loadAll(){return nA(this,e=>{e(this.allSublayers)})}_fetchService(e){return new Promise((t,r)=>{if(this.sourceJSON){if(this.sourceJSON.bandCount!=null&&this.sourceJSON.pixelSizeX!=null)throw new K("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void t({data:this.sourceJSON})}if(!this.parsedUrl)throw new K("tile-layer:undefined-url","layer's url is not defined");const i=Lh(this.parsedUrl.path);if(i!=null&&i.serverType==="ImageServer")throw new K("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");Re(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t,r)}).then(t=>{let r=this.url;if(t.ssl&&(r=this.url=r.replace(/^http:/i,"https:")),this.sourceJSON=t.data,this.read(t.data,{origin:"service",url:this.parsedUrl}),this.version===10.1&&!K6(r))return this._fetchServerVersion(r,e).then(i=>{this.read({currentVersion:i})}).catch(()=>{})})}_fetchServerVersion(e,t){if(!ZSe(e))return Promise.reject();const r=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return Re(r,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(i=>{if(i.data&&i.data.currentVersion)return i.data.currentVersion;throw new K("tile-layer:version-not-available")})}_getMapName(e){const t=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^/]+(\/[^/]+)*)\/mapserver/i);return t?t[2]:void 0}_getDefaultAttribution(e){if(e==null)return null;let t;e=e.toLowerCase();for(let r=0,i=uG.length;r<i;r++)if(t=uG[r],t.toLowerCase().includes(e))return Ho("//static.arcgis.com/attribution/"+t);return null}_getDefaultTileServers(e){if(e==null)return[];const t=e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i)!==-1,r=e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i)!==-1;return t||r?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[hie]}};h([d({readOnly:!0})],Ti.prototype,"attributionDataUrl",null),h([d({type:["show","hide","hide-children"]})],Ti.prototype,"listMode",void 0),h([d({json:{read:!0,write:!0}})],Ti.prototype,"blendMode",void 0),h([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Ti.prototype,"isReference",void 0),h([d({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],Ti.prototype,"operationalLayerType",void 0),h([d({type:Boolean})],Ti.prototype,"resampling",void 0),h([d()],Ti.prototype,"sourceJSON",void 0),h([d({type:Fe})],Ti.prototype,"spatialReference",void 0),h([pe("spatialReference",["spatialReference","tileInfo"])],Ti.prototype,"readSpatialReference",null),h([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ti.prototype,"path",void 0),h([d({readOnly:!0})],Ti.prototype,"sublayers",void 0),h([ge("sublayers",{layers:{type:[fS]}})],Ti.prototype,"writeSublayers",null),h([d({json:{read:!1,write:!1}})],Ti.prototype,"popupEnabled",void 0),h([d()],Ti.prototype,"tileServers",null),h([Zt("tileServers")],Ti.prototype,"castTileServers",null),h([d({readOnly:!0,json:{read:!1}})],Ti.prototype,"type",void 0),h([d(oS)],Ti.prototype,"url",void 0),Ti=Mk=h([j("esri.layers.TileLayer")],Ti);const hie=Symbol("default-fetch-tile");Ti.prototype.fetchTile[hie]=!0;const Q8=Ti,vlt=Object.freeze(Object.defineProperty({__proto__:null,default:Q8},Symbol.toStringTag,{value:"Module"})),sCe=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function Tk(e){return e!=null&&sCe.some(([t,r])=>e>=t&&e<=r)}const nCe={visible:"visibleSublayers"};let ah=class extends et{constructor(t){super(t),this.scale=0}set layer(t){this._get("layer")!==t&&(this._set("layer",t),this.removeHandles("layer"),t&&this.addHandles([t.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),t.on("wms-sublayer-update",r=>this.notifyChange(nCe[r.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:t})=>t).map(({name:t})=>t).join()}get version(){this.commitProperty("layers");const t=this.layer;return t&&t.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:t,scale:r}=this,i=t?.sublayers,s=[],n=o=>{const{minScale:a,maxScale:l,sublayers:u,visible:c}=o;c&&(r===0||(a===0||r<=a)&&(l===0||r>=l))&&(u?u.forEach(n):s.push(o))};return i?.forEach(n),s}toJSON(){const{layer:t,layers:r}=this,{imageFormat:i,imageTransparency:s,version:n}=t;return{format:i,request:"GetMap",service:"WMS",styles:"",transparent:s?"TRUE":"FALSE",version:n,layers:r}}};h([d()],ah.prototype,"layer",null),h([d({readOnly:!0})],ah.prototype,"layers",null),h([d({type:Number})],ah.prototype,"scale",void 0),h([d({readOnly:!0})],ah.prototype,"version",null),h([d({readOnly:!0})],ah.prototype,"visibleSublayers",null),ah=h([j("esri.layers.support.ExportWMSImageParameters")],ah);var QT;let oCe=0,Wr=QT=class extends Y2(IR){constructor(e){super(e),this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.legendUrl=null,this.legendEnabled=!0,this.layer=null,this.maxScale=0,this.minScale=0,this.name=null,this.parent=null,this.popupEnabled=!1,this.queryable=!1,this.sublayers=null,this.spatialReferences=null,this.title=null,this.addHandles([ql(()=>this.sublayers,"after-add",({item:t})=>{t.parent=this,t.layer=this.layer},Os),ql(()=>this.sublayers,"after-remove",({item:t})=>{t.layer=t.parent=null},Os),ht(()=>this.sublayers,(t,r)=>{if(r)for(const i of r)i.layer=i.parent=null;if(t)for(const i of t)i.parent=this,i.layer=this.layer},Os),ht(()=>this.layer,t=>{if(this.sublayers)for(const r of this.sublayers)r.layer=t},Os)])}get id(){return this._get("id")??oCe++}set id(e){this._set("id",e)}readLegendUrl(e,t){return t.legendUrl??t.legendURL??null}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}castSublayers(e){return ni(qe.ofType(QT),e)}set visible(e){this._setAndNotifyLayer("visible",e)}clone(){const e=new QT;return this.hasOwnProperty("description")&&(e.description=this.description),this.hasOwnProperty("fullExtent")&&(e.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(e.fullExtents=this.fullExtents?.map(t=>t.clone())??null),this.hasOwnProperty("legendUrl")&&(e.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("name")&&(e.name=this.name),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("queryable")&&(e.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers?.map(t=>t.clone())),this.hasOwnProperty("spatialReferences")&&(e.spatialReferences=this.spatialReferences?.map(t=>t)),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("title")&&(e.title=this.title),e}_setAndNotifyLayer(e,t){const r=this.layer;this._get(e)!==t&&(this._set(e,t),r&&r.emit("wms-sublayer-update",{propertyName:e,id:this.id}))}};h([d()],Wr.prototype,"description",void 0),h([d({readOnly:!0})],Wr.prototype,"dimensions",void 0),h([d({type:yt,json:{name:"extent"}})],Wr.prototype,"fullExtent",void 0),h([d()],Wr.prototype,"fullExtents",void 0),h([d({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],Wr.prototype,"id",null),h([d({type:String,json:{name:"legendUrl",write:{ignoreOrigin:!0}}})],Wr.prototype,"legendUrl",void 0),h([pe("legendUrl",["legendUrl","legendURL"])],Wr.prototype,"readLegendUrl",null),h([d({type:Boolean,json:{name:"showLegend",origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],Wr.prototype,"legendEnabled",void 0),h([d()],Wr.prototype,"layer",void 0),h([d()],Wr.prototype,"maxScale",void 0),h([d()],Wr.prototype,"minScale",void 0),h([d({readOnly:!0})],Wr.prototype,"effectiveScaleRange",null),h([d({type:String,json:{write:{ignoreOrigin:!0}}})],Wr.prototype,"name",void 0),h([d()],Wr.prototype,"parent",void 0),h([d({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],Wr.prototype,"popupEnabled",void 0),h([d({type:Boolean,json:{write:{ignoreOrigin:!0}}})],Wr.prototype,"queryable",void 0),h([d()],Wr.prototype,"sublayers",void 0),h([Zt("sublayers")],Wr.prototype,"castSublayers",null),h([d({type:[Number],json:{read:{source:"spatialReferences"}}})],Wr.prototype,"spatialReferences",void 0),h([d({type:String,json:{write:{ignoreOrigin:!0}}})],Wr.prototype,"title",void 0),h([d({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],Wr.prototype,"visible",null),Wr=QT=h([j("esri.layers.support.WMSSublayer")],Wr);const Ik=Wr,cG={84:4326,83:4269,27:4267};function aCe(e){if(!e)return null;const t={idCounter:-1};typeof e=="string"&&(e=new DOMParser().parseFromString(e,"text/xml"));const r=e.documentElement;if(r.nodeName==="ServiceExceptionReport"){const z=Array.prototype.slice.call(r.childNodes).map(X=>X.textContent).join(`\r
`);throw new K("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",z)}const i=hn("Capability",r),s=hn("Service",r),n=i&&hn("Request",i);if(!i||!s||!n)return null;const o=hn("Layer",i);if(!o)return null;const a=r.nodeName==="WMS_Capabilities"||r.nodeName==="WMT_MS_Capabilities"?r.getAttribute("version"):"1.3.0",l=Au("Title",s,"")||Au("Name",s,""),u=Au("AccessConstraints",s,""),c=/^none$/i.test(u)?"":u,p=Au("Abstract",s,""),f=parseInt(Au("MaxWidth",s,"5000"),10),m=parseInt(Au("MaxHeight",s,"5000"),10),g=pG(n,"GetMap"),b=hG(n,"GetMap"),w=vw(o,a,t);if(!w)return null;let S,M=0;const x=Array.prototype.slice.call(i.childNodes),_=w.sublayers??[],I=z=>{z!=null&&_.push(z)};x.forEach(z=>{z.nodeName==="Layer"&&(M===0?S=z:(M===1&&w.name&&(w.name="",I(vw(S,a,t))),I(vw(z,a,t))),M++)});let E=w.sublayers,A=w.extent;const C=w.fullExtents??[];if(E||(E=[]),E.length===0&&E.push(w),!A){const z=new yt(E[0].extent);w.extent=z.toJSON(),A=w.extent}const O=w.spatialReferences.length>0?w.spatialReferences:pie(w),R=hG(n,"GetFeatureInfo"),D=R?pG(n,"GetFeatureInfo"):null,N=die(E),U=w.minScale||0,J=w.maxScale||0,y=w.dimensions??[],T=N.reduce((z,X)=>z.concat(X.dimensions??[]),[]),$=y.concat(T).filter(mie);let P=null;if($.length){const z=$.map(X=>{const{extent:ae}=X;return cCe(ae)?ae.map(te=>te.getTime()):ae?.map(te=>[te.min.getTime(),te.max.getTime()])}).flat(2).filter(ra);P={startTimeField:null,endTimeField:null,trackIdField:void 0,timeExtent:[Math.min(...z),Math.max(...z)]}}return{copyright:c,description:p,dimensions:y,extent:A,fullExtents:C,featureInfoFormats:D,featureInfoUrl:R,mapUrl:b,maxWidth:f,maxHeight:m,maxScale:J,minScale:U,layers:N,spatialReferences:O,supportedImageFormatTypes:g,timeInfo:P,title:l,version:a}}function lCe(e){const t=e.filter(r=>r.popupEnabled&&r.name&&r.queryable);return t.length?t.map(({name:r})=>r).join():null}function pie(e){if(e.spatialReferences.length>0)return e.spatialReferences;if(e.sublayers)for(const t of e.sublayers){const r=pie(t);if(r.length>0)return r}return[]}function die(e){let t=[];for(const r of e)t.push(r),r.sublayers?.length&&(t=t.concat(die(r.sublayers)),delete r.sublayers);return t}function e3(e,t,r){return t.getAttribute(e)??r}function uCe(e,t,r,i){const s=hn(e,r);return s?e3(t,s,i):i}function hn(e,t){for(let r=0;r<t.childNodes.length;r++){const i=t.childNodes[r];if(fie(i)&&i.nodeName===e)return i}return null}function t3(e,t){if(t==null)return[];const r=[];for(let i=0;i<t.childNodes.length;i++){const s=t.childNodes[i];fie(s)&&s.nodeName===e&&r.push(s)}return r}function Au(e,t,r){return hn(e,t)?.textContent??r}function ub(e,t,r){if(!e)return null;const i=parseFloat(e.getAttribute("minx")),s=parseFloat(e.getAttribute("miny")),n=parseFloat(e.getAttribute("maxx")),o=parseFloat(e.getAttribute("maxy"));let a,l,u,c;r?(a=isNaN(s)?-Number.MAX_VALUE:s,l=isNaN(i)?-Number.MAX_VALUE:i,u=isNaN(o)?Number.MAX_VALUE:o,c=isNaN(n)?Number.MAX_VALUE:n):(a=isNaN(i)?-Number.MAX_VALUE:i,l=isNaN(s)?-Number.MAX_VALUE:s,u=isNaN(n)?Number.MAX_VALUE:n,c=isNaN(o)?Number.MAX_VALUE:o);const p=new Fe({wkid:t});return new yt({xmin:a,ymin:l,xmax:u,ymax:c,spatialReference:p})}function hG(e,t){const r=hn(t,e);if(r){const i=hn("DCPType",r);if(i){const s=hn("HTTP",i);if(s){const n=hn("Get",s);if(n){let o=uCe("OnlineResource","xlink:href",n,null);if(o)return o.indexOf("&")===o.length-1&&(o=o.substring(0,o.length-1)),pCe(o,["service","request"])}}}}return null}function pG(e,t){const r=t3("Operation",e);if(!r.length)return t3("Format",hn(t,e)).map(({textContent:s})=>s).filter(ra);const i=[];for(const s of r)if(s.getAttribute("name")===t){const n=t3("Format",s);for(const{textContent:o}of n)o!=null&&i.push(o)}return i}function dG(e,t,r){const i=hn(t,e);if(!i)return r;const{textContent:s}=i;if(s==null||s==="")return r;const n=Number(s);return isNaN(n)?r:n}function vw(e,t,r){if(!e)return null;const i={id:r.idCounter++,fullExtents:[],parentLayerId:null,queryable:e.getAttribute("queryable")==="1",spatialReferences:[],sublayers:null},s=hn("LatLonBoundingBox",e),n=hn("EX_GeographicBoundingBox",e);let o=null;s&&(o=ub(s,4326)),n&&(o=new yt(0,0,0,0,new Fe({wkid:4326})),o.xmin=parseFloat(Au("westBoundLongitude",n,"0")),o.ymin=parseFloat(Au("southBoundLatitude",n,"0")),o.xmax=parseFloat(Au("eastBoundLongitude",n,"0")),o.ymax=parseFloat(Au("northBoundLatitude",n,"0"))),s||n||(o=new yt(-180,-90,180,90,new Fe({wkid:4326}))),i.minScale=dG(e,"MaxScaleDenominator",0),i.maxScale=dG(e,"MinScaleDenominator",0);const a=["1.0.0","1.1.0","1.1.1"].includes(t)?"SRS":"CRS";return Array.prototype.slice.call(e.childNodes).forEach(l=>{if(l.nodeName==="Name")i.name=l.textContent||"";else if(l.nodeName==="Title")i.title=l.textContent||"";else if(l.nodeName==="Abstract")i.description=l.textContent||"";else if(l.nodeName==="BoundingBox"){const u=l.getAttribute(a);if(u&&u.indexOf("EPSG:")===0){const p=parseInt(u.substring(5),10);p===0||isNaN(p)||o||(o=t==="1.3.0"?ub(l,p,Tk(p)):ub(l,p))}const c=u?.indexOf(":");if(c&&c>-1){let p=parseInt(u.substring(c+1,u.length),10);p===0||isNaN(p)||(p=cG[p]??p);const f=t==="1.3.0"?ub(l,p,Tk(p)):ub(l,p);f&&i.fullExtents&&i.fullExtents.push(f)}}else if(l.nodeName===a)(l.textContent?.split(" ")??[]).forEach(u=>{const c=u.includes(":")?parseInt(u.split(":")[1],10):parseInt(u,10);if(c!==0&&!isNaN(c)){const p=cG[c]??c;i.spatialReferences.includes(p)||i.spatialReferences.push(p)}});else if(l.nodeName!=="Style"||i.legendUrl){if(l.nodeName==="Layer"){const u=vw(l,t,r);u&&(u.parentLayerId=i.id,i.sublayers||(i.sublayers=[]),i.sublayers.push(u))}}else{const u=hn("LegendURL",l);if(u){const c=hn("OnlineResource",u);c&&(i.legendUrl=c.getAttribute("xlink:href"))}}}),i.extent=o?.toJSON(),i.dimensions=t3("Dimension",e).filter(l=>l.getAttribute("name")&&l.getAttribute("units")&&l.textContent).map(l=>{const u=l.getAttribute("name"),c=l.getAttribute("units"),p=l.textContent,f=l.getAttribute("unitSymbol")??void 0,m=l.getAttribute("default")??void 0,g=e3("default",l,"0")!=="0",b=e3("nearestValue",l,"0")!=="0",w=e3("current",l,"0")!=="0";return mie({name:u,units:c})?{name:"time",units:"ISO8601",extent:yG(p),default:yG(m),multipleValues:g,nearestValue:b,current:w}:hCe({name:u,units:c})?{name:"elevation",units:c,extent:fG(p),unitSymbol:f,default:fG(m),multipleValues:g,nearestValue:b}:{name:u,units:c,extent:mG(p),unitSymbol:f,default:mG(m),multipleValues:g,nearestValue:b}}),i}function cCe(e){return Array.isArray(e)&&e.length>0&&e[0]instanceof Date}function fie(e){return e.nodeType===Node.ELEMENT_NODE}function hCe(e){return/^elevation$/i.test(e.name)&&/^(epsg|crs):\d+$/i.test(e.units)}function mie(e){return/^time$/i.test(e.name)&&/^iso8601$/i.test(e.units)}function pCe(e,t){const r=[],i=gi(e);for(const s in i.query)i.query.hasOwnProperty(s)&&(t.includes(s.toLowerCase())||r.push(s+"="+i.query[s]));return i.path+(r.length?"?"+r.join("&"):"")}function fG(e){if(!e)return;const t=e.includes("/"),r=e.split(",");return t?r.map(i=>{const s=i.split("/");return s.length<2?null:{min:parseFloat(s[0]),max:parseFloat(s[1]),resolution:s.length>=3&&s[2]!=="0"?parseFloat(s[2]):void 0}}).filter(ra):r.map(i=>parseFloat(i))}function mG(e){if(!e)return;const t=e.includes("/"),r=e.split(",");return t?r.map(i=>{const s=i.split("/");return s.length<2?null:{min:s[0],max:s[1],resolution:s.length>=3&&s[2]!=="0"?s[2]:void 0}}).filter(ra):r}function yG(e){if(!e)return;const t=e.includes("/"),r=e.split(",");return t?r.map(i=>{const s=i.split("/");return s.length<2?null:{min:C5(s[0]),max:C5(s[1]),resolution:s.length>=3&&s[2]!=="0"?dCe(s[2]):void 0}}).filter(ra):r.map(i=>C5(i))}function C5(e){return Mt.fromISO(e,{zone:ys.utcInstance}).toJSDate()}function dCe(e){const t=/(?:p(\d+y|\d+(?:\.|,)\d+y)?(\d+m|\d+(?:\.|,)\d+m)?(\d+d|\d+(?:\.|,)\d+d)?)?(?:t(\d+h|\d+(?:\.|,)\d+h)?(\d+m|\d+(?:\.|,)\d+m)?(\d+s|\d+(?:\.|,)\d+s)?)?/i,r=e.match(t);return r?{years:yg(r[1]),months:yg(r[2]),days:yg(r[3]),hours:yg(r[4]),minutes:yg(r[5]),seconds:yg(r[6])}:null}function yg(e){if(!e)return 0;const t=/(?:\d+(?:\.|,)\d+|\d+)/,r=e.match(t);if(!r)return 0;const i=r[0].replace(",",".");return Number(i)}function O5(e){return e.toISOString().replace(/\.[0-9]{3}/,"")}const fCe="0000-01-01T00:00:00Z",mCe="9999-12-31T23:59:59Z";function gG(e){if(!e||e.isAllTime||e.isEmpty)return;const{start:t,end:r}=e;return t&&r&&t.getTime()===r.getTime()?`${O5(t)}`:`${t?O5(t):fCe}/${r?O5(r):mCe}`}const vG=new Set([102100,3857,102113,900913]),yCe=new Set([3395,54004]);function gCe(e,t){let r=e.wkid;return t==null?r:(r!=null&&t.includes(r)||!e.latestWkid||(r=e.latestWkid),r!=null&&vG.has(r)?t.find(i=>vG.has(i))||t.find(i=>yCe.has(i))||102100:r)}const P5=new wt({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});function bG(e){return e==="text/html"}function wG(e){return e==="text/plain"}let Gt=class extends Ky(JA(A1(Xy(I1(E1(Zd(Yd))))))){constructor(...t){super(...t),this.allSublayers=new Py({getCollections:()=>[this.sublayers],getChildrenFunction:r=>r.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormats=null,this.featureInfoUrl=null,this.fetchFeatureInfoFunction=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.version=null,this.addHandles([ql(()=>this.sublayers,"after-add",({item:r})=>{r.parent=r.layer=this},Os),ql(()=>this.sublayers,"after-remove",({item:r})=>{r.layer=r.parent=null},Os),ht(()=>this.sublayers,(r,i)=>{if(i)for(const s of i)s.layer=s.parent=null;if(r)for(const s of r)s.parent=s.layer=this},Os)])}normalizeCtorArgs(t,r){return typeof t=="string"?{url:t,...r}:t}destroy(){this.allSublayers.destroy()}load(t){const r=t!=null?t.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},t).catch(lo).then(()=>this._fetchService(r))),Promise.resolve(this)}readFullExtentFromItemOrMap(t,r){const i=r.extent;return i?new yt({xmin:i[0][0],ymin:i[0][1],xmax:i[1][0],ymax:i[1][1]}):null}writeFullExtent(t,r){r.extent=[[t.xmin,t.ymin],[t.xmax,t.ymax]]}get featureInfoFormat(){return this.featureInfoFormats==null?null:this.featureInfoFormats.find(bG)??this.featureInfoFormats.find(wG)??null}set featureInfoFormat(t){t==null?(this.revert("featureInfoFormat","service"),this._clearOverride("featureInfoFormat")):(bG(t)||wG(t))&&this._override("featureInfoFormat",t)}readImageFormat(t,r){const i=r.supportedImageFormatTypes;return i&&i.includes("image/png")?"image/png":i&&i[0]}readSpatialReferenceFromItemOrDocument(t,r){return new Fe(r.spatialReferences[0])}writeSpatialReferences(t,r){const i=this.spatialReference?.wkid;t&&i?(r.spatialReferences=t.filter(s=>s!==i),r.spatialReferences.unshift(i)):r.spatialReferences=t}readSublayersFromItemOrMap(t,r,i){return _G(r.layers,i,r.visibleLayers)}readSublayers(t,r,i){return _G(r.layers,i)}writeSublayers(t,r,i,s){r.layers=[];const n=new Map,o=t.flatten(({sublayers:a})=>a??[]);for(const a of o)if(typeof a.parent?.id=="number"){const l=n.get(a.parent.id);l!=null?l.push(a.id):n.set(a.parent.id,[a.id])}for(const a of o){const l={sublayer:a,...s},u=a.write({parentLayerId:typeof a.parent?.id=="number"?a.parent.id:-1},l);if(n.has(a.id)&&(u.sublayerIds=n.get(a.id)),!a.sublayers&&a.name){const c=a.write({},l);delete c.id,r.layers.push(c)}}r.visibleLayers=o.filter(({visible:a,sublayers:l})=>a&&!l).map(({name:a})=>a).toArray()}set url(t){if(!t)return void this._set("url",t);const{path:r,query:i}=gi(t);for(const n in i)/^(request|service)$/i.test(n)&&delete i[n];const s=Fw(r,i??{});this._set("url",s)}createExportImageParameters(t,r,i,s){const n=s?.pixelRatio??1,o=fk({extent:t,width:r})*n,a=new ah({layer:this,scale:o}),{xmin:l,ymin:u,xmax:c,ymax:p,spatialReference:f}=t,m=gCe(f,this.spatialReferences),g=this.version==="1.3.0"&&Tk(m)?`${u},${l},${p},${c}`:`${l},${u},${c},${p}`,b=a.toJSON(),w=this.version==="1.3.0"?"crs":"srs";return{bbox:g,[w]:m==null||isNaN(m)?void 0:"EPSG:"+m,...b}}async fetchImage(t,r,i,s){const n=this.mapUrl,o=this.createExportImageParameters(t,r,i,s);if(!o.layers){const u=document.createElement("canvas");return u.width=r,u.height=i,u}const a=gG(s?.timeExtent),l={responseType:"image",query:this._mixCustomParameters({width:r,height:i,...o,time:a,...this.refreshParameters}),signal:s?.signal};return Re(n??"",l).then(u=>u.data)}async fetchImageBitmap(t,r,i,s){const n=this.mapUrl??"",o=this.createExportImageParameters(t,r,i,s);if(!o.layers){const c=document.createElement("canvas");return c.width=r,c.height=i,c}const a=gG(s?.timeExtent),l={responseType:"blob",query:this._mixCustomParameters({width:r,height:i,...o,time:a,...this.refreshParameters}),signal:s?.signal},{data:u}=await Re(n,l);return TI(u,n,s?.signal)}fetchFeatureInfo(t,r,i,s,n){const o=fk({extent:t,width:r}),a=new ah({layer:this,scale:o}),l=lCe(a.visibleSublayers);if(this.featureInfoUrl==null||l==null)return Promise.resolve([]);if(this.fetchFeatureInfoFunction==null&&this.featureInfoFormat==null)return Promise.resolve([]);const u=this.version==="1.3.0"?{I:s,J:n}:{x:s,y:n},c={query_layers:l,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:r,height:i,...u},p={...this.createExportImageParameters(t,r,i),...c},f=this._mixCustomParameters(p);return this.fetchFeatureInfoFunction!=null?this.fetchFeatureInfoFunction(f):this._defaultFetchFeatureInfoFunction(Fw(this.featureInfoUrl,f))}findSublayerById(t){return this.allSublayers.find(r=>r.id===t)}findSublayerByName(t){return this.allSublayers.find(r=>r.name===t)}serviceSupportsSpatialReference(t){return txe(this.url)||this.spatialReferences!=null&&this.spatialReferences.some(r=>{const i=r===900913?Fe.WebMercator:new Fe({wkid:r});return vi(i,t)})}_defaultFetchFeatureInfoFunction(t){const r=document.createElement("iframe");r.src=mde(t),r.style.border="none",r.style.margin="0",r.style.width="100%",r.setAttribute("sandbox","");const i=new Bd({title:this.title,content:r}),s=new Ga({sourceLayer:this,popupTemplate:i});return Promise.resolve([s])}async _fetchService(t){if(!this.resourceInfo&&this.parsedUrl?.path){const{path:r,query:i}=this.parsedUrl,{data:s}=await Re(r,{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...i,...this.customParameters},responseType:"xml",signal:t});this.resourceInfo=aCe(s)}if(this.parsedUrl){const r=new Vu(this.parsedUrl.path),{httpsDomains:i}=Vt.request;r.scheme!=="https"||r.port&&r.port!=="443"||!r.host||i.includes(r.host)||i.push(r.host)}this.read(this.resourceInfo,{origin:"service"})}_mixCustomParameters(t){if(!this.customLayerParameters&&!this.customParameters)return t;const r={...this.customParameters,...this.customLayerParameters};for(const i in r)t[i.toLowerCase()]=r[i];return t}};function vCe(e,t){return e.some(r=>{for(const i in r)if(hZ(r,i,null,t))return!0;return!1})}function _G(e,t,r){e=e??[];const i=new Map;e.every(n=>n.id==null)&&(e=Z(e)).forEach((n,o)=>n.id=o);for(const n of e){const o=new Ik;o.read(n,t),r&&!r.includes(o.name)&&(o.visible=!1),i.set(o.id,o)}const s=[];for(const n of e){const o=n.id!=null?i.get(n.id):null;if(o)if(n.parentLayerId!=null&&n.parentLayerId>=0){const a=i.get(n.parentLayerId);if(!a)continue;a.sublayers||(a.sublayers=new qe),a.sublayers.push(o)}else s.push(o)}return s}h([d({readOnly:!0})],Gt.prototype,"allSublayers",void 0),h([d({json:{type:Object,write:!0}})],Gt.prototype,"customParameters",void 0),h([d({json:{type:Object,write:!0}})],Gt.prototype,"customLayerParameters",void 0),h([d({type:String,json:{write:!0}})],Gt.prototype,"copyright",void 0),h([d()],Gt.prototype,"description",void 0),h([d({readOnly:!0})],Gt.prototype,"dimensions",void 0),h([d({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],Gt.prototype,"fullExtent",void 0),h([pe(["web-document","portal-item"],"fullExtent",["extent"])],Gt.prototype,"readFullExtentFromItemOrMap",null),h([ge(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],Gt.prototype,"writeFullExtent",null),h([d()],Gt.prototype,"fullExtents",void 0),h([d({type:String,json:{write:{ignoreOrigin:!0}}})],Gt.prototype,"featureInfoFormat",null),h([d({type:[String],readOnly:!0})],Gt.prototype,"featureInfoFormats",void 0),h([d({type:String,json:{write:{ignoreOrigin:!0}}})],Gt.prototype,"featureInfoUrl",void 0),h([d()],Gt.prototype,"fetchFeatureInfoFunction",void 0),h([d({type:String,json:{origins:{"web-document":{default:"image/png",type:P5.jsonValues,read:{reader:P5.read,source:"format"},write:{writer:P5.write,target:"format"}}}}})],Gt.prototype,"imageFormat",void 0),h([pe("imageFormat",["supportedImageFormatTypes"])],Gt.prototype,"readImageFormat",null),h([d({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],Gt.prototype,"imageMaxHeight",void 0),h([d({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],Gt.prototype,"imageMaxWidth",void 0),h([d()],Gt.prototype,"imageTransparency",void 0),h([d(n8)],Gt.prototype,"legendEnabled",void 0),h([d({type:["show","hide","hide-children"]})],Gt.prototype,"listMode",void 0),h([d({type:String,json:{write:{ignoreOrigin:!0}}})],Gt.prototype,"mapUrl",void 0),h([d({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Gt.prototype,"isReference",void 0),h([d({type:["WMS"]})],Gt.prototype,"operationalLayerType",void 0),h([d()],Gt.prototype,"resourceInfo",void 0),h([d({type:Fe,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],Gt.prototype,"spatialReference",void 0),h([pe(["web-document","portal-item"],"spatialReference",["spatialReferences"])],Gt.prototype,"readSpatialReferenceFromItemOrDocument",null),h([d({type:[St],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],Gt.prototype,"spatialReferences",void 0),h([ge(["web-document","portal-item"],"spatialReferences")],Gt.prototype,"writeSpatialReferences",null),h([d({type:qe.ofType(Ik),json:{write:{target:"layers",overridePolicy(e,t,r){if(vCe(this.allSublayers,r))return{ignoreOrigin:!0}}}}})],Gt.prototype,"sublayers",void 0),h([pe(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],Gt.prototype,"readSublayersFromItemOrMap",null),h([pe("service","sublayers",["layers"])],Gt.prototype,"readSublayers",null),h([ge("sublayers",{layers:{type:[Ik]},visibleLayers:{type:[String]}})],Gt.prototype,"writeSublayers",null),h([d({json:{read:!1},readOnly:!0,value:"wms"})],Gt.prototype,"type",void 0),h([d(oS)],Gt.prototype,"url",null),h([d({type:String,json:{write:{ignoreOrigin:!0}}})],Gt.prototype,"version",void 0),Gt=h([j("esri.layers.WMSLayer")],Gt);const yie=Gt,_lt=Object.freeze(Object.defineProperty({__proto__:null,default:yie},Symbol.toStringTag,{value:"Module"}));var Ek;let r3=Ek=class extends ue{constructor(e){super(e),this.type="none"}clone(){return new Ek({type:this.type})}};h([We({none:"none",stayAbove:"stay-above"})],r3.prototype,"type",void 0),r3=Ek=h([j("esri.ground.NavigationConstraint")],r3);var Ak;let Kc=Ak=class extends U2(Yu){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new qe;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&be.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))])}initialize(){this.when().catch(e=>{ws(e)||be.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)jr(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Id(e,this._get("layers")))}writeLayers(e,t,r,i){const s=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(n=>{if("write"in n){const o={};Xbe(n)().write(o,i)&&s.push(o)}else i?.messages&&i.messages.push(new K("layer:unsupported",`Layers (${n.title}, ${n.id}) of type '${n.declaredClass}' cannot be persisted in the ground`,{layer:n}))})),t.layers=s}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return nA(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t?.signal});const{ElevationQuery:r}=await fe(()=>import("./ElevationQuery-CegAKfs-.js"),__vite__mapDeps([147,1]),import.meta.url);dr(t);const i=new r,s=this.layers.filter(SG).toArray();return i.queryAll(s,e,t)}async createElevationSampler(e,t){await this.load({signal:t?.signal});const{ElevationQuery:r}=await fe(()=>import("./ElevationQuery-CegAKfs-.js"),__vite__mapDeps([147,1]),import.meta.url);dr(t);const i=new r,s=this.layers.filter(SG).toArray();return i.createSamplerAll(s,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:Z(this.surfaceColor),navigationConstraint:Z(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Ak({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}async _loadLayersFromJSON(e,t,r){const i=t?.origin||"web-scene",s=t?.portal||null,n=t?.url||null,{populateOperationalLayers:o}=await fe(async()=>{const{populateOperationalLayers:l}=await import("./layersCreator-CYoENPV5.js");return{populateOperationalLayers:l}},__vite__mapDeps([7,8,9,10,1]),import.meta.url);dr(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:i,url:n,portal:s,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}await Promise.allSettled(a)}};function bCe(e){return e&&"createElevationSampler"in e}function SG(e){return e.type==="elevation"||bCe(e)}h([d({json:{read:!1}})],Kc.prototype,"layers",null),h([ge("layers")],Kc.prototype,"writeLayers",null),h([d({readOnly:!0})],Kc.prototype,"resourceInfo",void 0),h([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:St,read:{reader:q_,source:"transparency"},write:{writer:(e,t)=>{t.transparency=xA(e)},target:"transparency"}}})],Kc.prototype,"opacity",void 0),h([d({type:Le,json:{type:[St],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Kc.prototype,"surfaceColor",void 0),h([d({type:r3,json:{write:!0}})],Kc.prototype,"navigationConstraint",void 0),Kc=Ak=h([j("esri.Ground")],Kc);const AI=Kc,Vx=new WeakMap;function gie(e){return!e.destroyed&&(Vx.has(e)||e.addHandles([ht(()=>{const t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||gie(t))},t=>Vx.set(e,t),$a),or(()=>Vx.delete(e))]),Vx.get(e))}function wCe(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function _Ce(e){return!(!wCe(e)||!Ome(e)?.operations?.supportsEditing||"editingEnabled"in e&&!Rme(e)||gie(e))}const xG=()=>be.getLogger("esri.support.basemapUtils");function SCe(){return{}}function xCe(e){for(const t in e){const r=e[t];jr(r),delete e[t]}}function MCe(e,t){let r;if(typeof e=="string"){const i=e in TO,s=!i&&e.includes("/");if(!i&&!s){const n=Object.entries(TO).filter(([o,a])=>Vt.apiKey&&!a.classic||!Vt.apiKey&&(a.classic||a.is3d)).map(([o])=>`"${o}"`).sort().join(", ");return xG().warn(`Unable to find basemap definition for: ${e}. Try one of these: ${n}`),null}t&&(r=t[e]),r||(r=i?Y0.fromId(e):new Y0({style:{id:e}}),t&&(t[e]=r))}else r=ni(Y0,e);return r?.destroyed&&(xG().warn("The provided basemap is already destroyed",{basemap:r}),r=null),r}function TCe(e){return new Py({getCollections:()=>[e.tables,e.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return!!r&&"tables"in r&&r.tables.includes(t)}})}function R5(e){for(const t of e.values())t?.destroy();e.clear()}const MG={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function ICe(e){let t=null;if(typeof e=="string")if(e in MG){const r=MG[e];t=new AI({resourceInfo:{data:{layers:[r]}}})}else be.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=ni(AI,e);return t}function $k(e,t,r){let i,s;if(e)for(let n=0,o=e.length;n<o;n++){if(i=e.at(n),i?.[t]===r)return i;if(i?.type==="group"&&(s=$k(i.layers,t,r),s))return s}}const ECe=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new qe;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},s=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||be.getLogger(this).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},n=o=>{o.parent=null,this.layerRemoved(o)};this.addHandles([this.layers.on("before-add",o=>{if(o.item===this)return o.preventDefault(),void be.getLogger(this).error("#add()","Cannot add layer to itself.");i(o.item)}),this.layers.on("after-add",o=>s(o.item)),this.layers.on("after-remove",o=>n(o.item))])}destroy(){const r=this.layers.toArray();for(const i of r)i.destroy();this.layers.destroy()}set layers(r){this._set("layers",Id(r,this._get("layers")))}add(r,i){const s=this.layers;if(i=s.getNextIndex(i),r instanceof Yd){const n=r;n.parent===this?this.reorder(n,i):s.add(n,i)}else Ud(r)?r.then(n=>{this.destroyed||this.add(n,i)}):be.getLogger(this).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const s=this.layers;let n=s.getNextIndex(i);r.slice().forEach(o=>{o.parent!==this?(s.add(o,n),n+=1):this.reorder(o,n)})}findLayerById(r){return $k(this.layers,"id",r)}findLayerByUid(r){return $k(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return h([d()],t.prototype,"layers",null),t=h([j("esri.support.LayersMixin")],t),t};function Ck(e,t,r){if(e)for(let i=0,s=e.length;i<s;i++){const n=e.at(i);if(n[t]===r)return n;if(n?.type==="group"){const o=Ck(n.tables,t,r);if(o)return o}}}const ACe=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new qe,this.addHandles([this.tables.on("after-add",i=>{const s=i.item;s.parent&&s.parent!==this&&"tables"in s.parent&&s.parent.tables.remove(s),s.parent=this,s.type!=="feature"&&be.getLogger(this).error(`Layer 'title:${s.title}, id:${s.id}' of type '${s.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})])}destroy(){const r=this.tables.toArray();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",Id(r,this._get("tables")))}findTableById(r){return Ck(this.tables,"id",r)}findTableByUid(r){return Ck(this.tables,"uid",r)}};return h([d()],t.prototype,"tables",null),t=h([j("esri.support.TablesMixin")],t),t};let wl=class extends ACe(ECe(jh.EventedMixin(et))){constructor(t){super(t),this.allLayers=new Py({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:r=>"layers"in r?r.layers:null}),this.allTables=TCe(this),this.basemap=null,this.editableLayers=new Py({getCollections:()=>[this.allLayers],itemFilterFunction:_Ce}),this.ground=new AI,this._basemapCache=SCe()}destroy(){xCe(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=jr(this.basemap),jr(this.ground),this._set("ground",null)}castBasemap(t){return MCe(t,this._basemapCache)}castGround(t){return ICe(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(r=>r.id===t)}findTableById(t){return this.allTables.find(r=>r.id===t)}};h([d({readOnly:!0,dependsOn:[]})],wl.prototype,"allLayers",void 0),h([d({readOnly:!0})],wl.prototype,"allTables",void 0),h([d({type:Y0,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],wl.prototype,"basemap",void 0),h([Zt("basemap")],wl.prototype,"castBasemap",null),h([d({readOnly:!0})],wl.prototype,"editableLayers",void 0),h([d({type:AI,nonNullable:!0})],wl.prototype,"ground",void 0),h([Zt("ground")],wl.prototype,"castGround",null),h([d()],wl.prototype,"undoRedo",void 0),wl=h([j("esri.Map")],wl);const vie=wl;let _m=class extends OO{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};h([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],_m.prototype,"row",void 0),h([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],_m.prototype,"column",void 0),h([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],_m.prototype,"rows",void 0),h([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],_m.prototype,"columns",void 0),_m=h([j("esri.CameraLayout")],_m);const bie=_m;let $Ce=class{constructor(t,r){this.min=t,this.max=r,this.range=r-t}normalize(t,r=0,i=!1){return TG(this.range,this.min,this.max,t,r,i)}clamp(t,r=0){return Gl(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+Ok(this.range,t-r,i)}minimalMonotonic(t,r,i){return TG(this.range,t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,s=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(s)?i:s}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}};function TG(e,t,r,i,s=0,n=!1){return(i-=s)<t?i+=Ok(e,t-i):i>r&&(i-=Ok(e,i-r)),n&&i===r&&(i=t),i+s}function Ok(e,t,r=0){return Math.ceil((t-r)/e)*e+r}const CCe=new $Ce(0,360);let yu=class extends Yt(ue){constructor(...t){super(...t),this.position=new je([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new bie}normalizeCtorArgs(t,r,i,s){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){const n={position:t};return r!=null&&(n.heading=r),i!=null&&(n.tilt=i),s!=null&&(n.fov=s),n}return t}writePosition(t,r,i,s){const n=t.clone();n.x=Bo(t.x||0),n.y=Bo(t.y||0),n.z=t.hasZ?Bo(t.z||0):t.z,r[i]=n.write({},s)}readPosition(t,r){const i=new je;return i.read(t,r),i.x=Bo(i.x||0),i.y=Bo(i.y||0),i.z=i.hasZ?Bo(i.z||0):i.z,i}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};h([d({type:je,json:{write:{isRequired:!0}}})],yu.prototype,"position",void 0),h([ge("position")],yu.prototype,"writePosition",null),h([pe("position")],yu.prototype,"readPosition",null),h([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Zt(e=>CCe.normalize(Bo(e)))],yu.prototype,"heading",void 0),h([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Zt(e=>Gl(Bo(e),-180,180))],yu.prototype,"tilt",void 0),h([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],yu.prototype,"fov",void 0),h([d({type:bie,nonNullable:!0,json:{read:!1,write:!1}})],yu.prototype,"layout",void 0),yu=h([j("esri.Camera")],yu);const OCe=yu;var Pk;let Lp=Pk=class extends ue{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new Pk({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};h([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:L5}}}}})],Lp.prototype,"rotation",void 0),h([Zt("rotation")],Lp.prototype,"castRotation",null),h([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:L5}}}}})],Lp.prototype,"scale",void 0),h([d({types:Ss,json:{read:bi,write:!0,origins:{"web-scene":{read:bi,write:{overridePolicy:L5}}}}})],Lp.prototype,"targetGeometry",void 0),h([d({type:OCe,json:{write:!0}})],Lp.prototype,"camera",void 0),Lp=Pk=h([j("esri.Viewpoint")],Lp);const Nl=Lp;function L5(){return{enabled:!this.camera}}const i3={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],s=this.values;return i>=r?s.portrait:s.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},k5={xsmall:544,small:768,medium:992,large:1200};function PCe(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function N5(e,t){return t?i3[e].valueToClassName[t].split(" "):[]}const RCe=e=>{let t=class extends e{constructor(...r){super(...r),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=k5}initialize(){this.addHandles(ht(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),fn))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(r){if(r!==this._get("breakpoints")){if(!PCe(r)){const i=JSON.stringify(k5,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),r=k5}this._set("breakpoints",{...r})}}_updateClassNames(){if(!this.container)return;const r=Nn.acquire(),i=Nn.acquire();let s,n=!1;for(s in i3){const o=this[s],a=i3[s].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(n=!0,this[s]=a,N5(s,o).forEach(l=>i.push(l)),N5(s,a).forEach(l=>r.push(l)))}n&&(this._applyClassNameChanges(r,i),Nn.release(r),Nn.release(i))}_applyClassNameChanges(r,i){const s=this.container;s&&(i.forEach(n=>s.classList.remove(n)),r.forEach(n=>s.classList.add(n)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in i3)N5(i,this[i]).forEach(s=>r.classList.remove(s))}};return h([d()],t.prototype,"breakpoints",null),h([d()],t.prototype,"orientation",void 0),h([d()],t.prototype,"widthBreakpoint",void 0),h([d()],t.prototype,"heightBreakpoint",void 0),t=h([j("esri.views.BreakpointsOwner")],t),t};function eF(e){return typeof e=="string"?document.getElementById(e):e??null}function wie(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function IG(e,t){const r=t.parentNode;r&&r.insertBefore(e,t)}function EG(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}let iy=class extends et{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll()}add(t,r,i={}){return this._installWatch(t,r,i,ht)}addWhen(t,r,i={}){return this._installWatch(t,r,i,Rh)}addOnCollectionChange(t,r,{initial:i=!1,final:s=!1}={}){const n=++this._handleId;return this.addHandles([ql(t,"after-changes",this._createSyncUpdatingCallback(),Os),ql(t,"change",r,{onListenerAdd:i?o=>r({added:o.toArray(),removed:[]}):void 0,onListenerRemove:s?o=>r({added:[],removed:o.toArray()}):void 0})],n),or(()=>this.removeHandles(n))}addPromise(t){if(t==null)return t;const r=++this._handleId;this.addHandles(or(()=>{this._pendingPromises.delete(t)&&(this._pendingPromises.size!==0||this.hasHandles(Ux)||this._set("updating",!1))}),r),this._pendingPromises.add(t),this._set("updating",!0);const i=()=>this.removeHandles(r);return t.then(i,i),t}removeAll(){this._pendingPromises.clear(),this.removeAllHandles(),this._set("updating",!1)}_installWatch(t,r,i={},s){const n=++this._handleId;i.sync||this._installSyncUpdatingWatch(t,n);const o=s(t,r,i);return this.addHandles(o,n),or(()=>this.removeHandles(n))}_installSyncUpdatingWatch(t,r){const i=this._createSyncUpdatingCallback(),s=ht(t,i,{sync:!0,equals:()=>!1});return this.addHandles(s,r),s}_createSyncUpdatingCallback(){return()=>{this.removeHandles(Ux),++this._scheduleHandleId;const t=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this.addHandles(l1(()=>{t===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this.removeHandles(Ux))}),Ux)}}};h([d({readOnly:!0})],iy.prototype,"updating",void 0),iy=h([j("esri.core.support.UpdatingHandles")],iy);const Ux=-42;/*!
 * @esri/arcgis-html-sanitizer - v4.0.3 - Wed Jul 03 2024 17:50:35 GMT-0400 (Eastern Daylight Time)
 * Copyright (c) 2024 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(é›·å®—æ°‘) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var $I=function(){return $I=Object.assign||function(t){for(var r,i=1,s=arguments.length;i<s;i++){r=arguments[i];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},$I.apply(this,arguments)},Rk={exports:{}},li={},Lk={exports:{}},Qy={};function _ie(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function LCe(e,t,r){}function kCe(e,t,r){}var NCe=/javascript\s*\:/img;function DCe(e,t){return NCe.test(t)?"":t}Qy.whiteList=_ie();Qy.getDefaultWhiteList=_ie;Qy.onAttr=LCe;Qy.onIgnoreAttr=kCe;Qy.safeAttrValue=DCe;var FCe={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},cb=FCe;function jCe(e,t){e=cb.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,s=0,n=0,o="";function a(){if(!i){var c=cb.trim(e.slice(s,n)),p=c.indexOf(":");if(p!==-1){var f=cb.trim(c.slice(0,p)),m=cb.trim(c.slice(p+1));if(f){var g=t(s,o.length,f,m,c);g&&(o+=g+"; ")}}}s=n+1}for(;n<r;n++){var l=e[n];if(l==="/"&&e[n+1]==="*"){var u=e.indexOf("*/",n+2);if(u===-1)break;n=u+1,s=n+1,i=!1}else l==="("?i=!0:l===")"?i=!1:l===";"?i||a():l===`
`&&a()}return cb.trim(o)}var VCe=jCe,zx=Qy,UCe=VCe;function AG(e){return e==null}function zCe(e){var t={};for(var r in e)t[r]=e[r];return t}function Sie(e){e=zCe(e||{}),e.whiteList=e.whiteList||zx.whiteList,e.onAttr=e.onAttr||zx.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||zx.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||zx.safeAttrValue,this.options=e}Sie.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onAttr,n=r.onIgnoreAttr,o=r.safeAttrValue,a=UCe(e,function(l,u,c,p,f){var m=i[c],g=!1;if(m===!0?g=m:typeof m=="function"?g=m(p):m instanceof RegExp&&(g=m.test(p)),g!==!0&&(g=!1),p=o(c,p),!!p){var b={position:u,sourcePosition:l,source:f,isWhite:g};if(g){var w=s(c,p,b);return AG(w)?c+":"+p:w}else{var w=n(c,p,b);if(!AG(w))return w}}});return a};var GCe=Sie;(function(e,t){var r=Qy,i=GCe;function s(o,a){var l=new i(a);return l.process(o)}t=e.exports=s,t.FilterCSS=i;for(var n in r)t[n]=r[n]})(Lk,Lk.exports);var tF=Lk.exports,rF={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,s;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,s=e.length;i<s;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},BCe=tF.FilterCSS,qCe=tF.getDefaultWhiteList,CI=rF;function xie(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Mie=new BCe;function HCe(e,t,r){}function WCe(e,t,r){}function JCe(e,t,r){}function ZCe(e,t,r){}function Tie(e){return e.replace(KCe,"&lt;").replace(XCe,"&gt;")}function YCe(e,t,r,i){if(r=Oie(r),t==="href"||t==="src"){if(r=CI.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(Gx.lastIndex=0,Gx.test(r))return""}else if(t==="style"){if($G.lastIndex=0,$G.test(r)||(CG.lastIndex=0,CG.test(r)&&(Gx.lastIndex=0,Gx.test(r))))return"";i!==!1&&(i=i||Mie,r=i.process(r))}return r=Pie(r),r}var KCe=/</g,XCe=/>/g,QCe=/"/g,eOe=/&quot;/g,tOe=/&#([a-zA-Z0-9]*);?/gim,rOe=/&colon;?/gim,iOe=/&newline;?/gim,Gx=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,$G=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,CG=/u\s*r\s*l\s*\(.*/gi;function Iie(e){return e.replace(QCe,"&quot;")}function Eie(e){return e.replace(eOe,'"')}function Aie(e){return e.replace(tOe,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function $ie(e){return e.replace(rOe,":").replace(iOe," ")}function Cie(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return CI.trim(t)}function Oie(e){return e=Eie(e),e=Aie(e),e=$ie(e),e=Cie(e),e}function Pie(e){return e=Iie(e),e=Tie(e),e}function sOe(){return""}function nOe(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:CI.indexOf(e,o)!==-1}var s=[],n=!1;return{onIgnoreTag:function(o,a,l){if(i(o))if(l.isClosing){var u="[/removed]",c=l.position+u.length;return s.push([n!==!1?n:l.position,c]),n=!1,u}else return n||(n=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return CI.forEach(s,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function oOe(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var s=e.indexOf("-->",i);if(s===-1)break;r=s+3}return t}function aOe(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}li.whiteList=xie();li.getDefaultWhiteList=xie;li.onTag=HCe;li.onIgnoreTag=WCe;li.onTagAttr=JCe;li.onIgnoreTagAttr=ZCe;li.safeAttrValue=YCe;li.escapeHtml=Tie;li.escapeQuote=Iie;li.unescapeQuote=Eie;li.escapeHtmlEntities=Aie;li.escapeDangerHtml5Entities=$ie;li.clearNonPrintableCharacter=Cie;li.friendlyAttrValue=Oie;li.escapeAttrValue=Pie;li.onIgnoreTagStripAll=sOe;li.StripTagBody=nOe;li.stripCommentTag=oOe;li.stripBlankChar=aOe;li.cssFilter=Mie;li.getDefaultCSSWhiteList=qCe;var s$={},Kp=rF;function lOe(e){var t=Kp.spaceIndex(e),r;return t===-1?r=e.slice(1,-1):r=e.slice(1,t+1),r=Kp.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function uOe(e){return e.slice(0,2)==="</"}function cOe(e,t,r){var i="",s=0,n=!1,o=!1,a=0,l=e.length,u="",c="";e:for(a=0;a<l;a++){var p=e.charAt(a);if(n===!1){if(p==="<"){n=a;continue}}else if(o===!1){if(p==="<"){i+=r(e.slice(s,a)),n=a,s=a;continue}if(p===">"){i+=r(e.slice(s,n)),c=e.slice(n,a+1),u=lOe(c),i+=t(n,i.length,u,c,uOe(c)),s=a+1,n=!1;continue}if(p==='"'||p==="'")for(var f=1,m=e.charAt(a-f);m.trim()===""||m==="=";){if(m==="="){o=p;continue e}m=e.charAt(a-++f)}}else if(p===o){o=!1;continue}}return s<e.length&&(i+=r(e.substr(s))),i}var hOe=/[^a-zA-Z0-9\\_:.-]/gim;function pOe(e,t){var r=0,i=0,s=[],n=!1,o=e.length;function a(f,m){if(f=Kp.trim(f),f=f.replace(hOe,"").toLowerCase(),!(f.length<1)){var g=t(f,m||"");g&&s.push(g)}}for(var l=0;l<o;l++){var u=e.charAt(l),c,p;if(n===!1&&u==="="){n=e.slice(r,l),r=l+1,i=e.charAt(r)==='"'||e.charAt(r)==="'"?r:fOe(e,l+1);continue}if(n!==!1&&l===i){if(p=e.indexOf(u,l+1),p===-1)break;c=Kp.trim(e.slice(i+1,p)),a(n,c),n=!1,l=p,r=l+1;continue}if(/\s|\n|\t/.test(u))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(p=dOe(e,l),p===-1){c=Kp.trim(e.slice(r,l)),a(c),n=!1,r=l+1;continue}else{l=p-1;continue}else if(p=mOe(e,l-1),p===-1){c=Kp.trim(e.slice(r,l)),c=OG(c),a(n,c),n=!1,r=l+1;continue}else continue}return r<e.length&&(n===!1?a(e.slice(r)):a(n,OG(Kp.trim(e.slice(r))))),Kp.trim(s.join(" "))}function dOe(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function fOe(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="'"||r==='"'?t:-1}}function mOe(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function yOe(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function OG(e){return yOe(e)?e.substr(1,e.length-2):e}s$.parseTag=cOe;s$.parseAttr=pOe;var gOe=tF.FilterCSS,_l=li,Rie=s$,vOe=Rie.parseTag,bOe=Rie.parseAttr,s3=rF;function Bx(e){return e==null}function wOe(e){var t=s3.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=s3.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=s3.trim(e.slice(0,-1))),{html:e,closing:r}}function _Oe(e){var t={};for(var r in e)t[r]=e[r];return t}function SOe(e){var t={};for(var r in e)Array.isArray(e[r])?t[r.toLowerCase()]=e[r].map(function(i){return i.toLowerCase()}):t[r.toLowerCase()]=e[r];return t}function Lie(e){e=_Oe(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=_l.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=SOe(e.whiteList||e.allowList):e.whiteList=_l.whiteList,e.onTag=e.onTag||_l.onTag,e.onTagAttr=e.onTagAttr||_l.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||_l.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||_l.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||_l.safeAttrValue,e.escapeHtml=e.escapeHtml||_l.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new gOe(e.css))}Lie.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,s=r.onTag,n=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,l=r.safeAttrValue,u=r.escapeHtml,c=t.cssFilter;r.stripBlankChar&&(e=_l.stripBlankChar(e)),r.allowCommentTag||(e=_l.stripCommentTag(e));var p=!1;r.stripIgnoreTagBody&&(p=_l.StripTagBody(r.stripIgnoreTagBody,n),n=p.onIgnoreTag);var f=vOe(e,function(m,g,b,w,S){var M={sourcePosition:m,position:g,isClosing:S,isWhite:Object.prototype.hasOwnProperty.call(i,b)},x=s(b,w,M);if(!Bx(x))return x;if(M.isWhite){if(M.isClosing)return"</"+b+">";var _=wOe(w),I=i[b],E=bOe(_.html,function(A,C){var O=s3.indexOf(I,A)!==-1,R=o(b,A,C,O);return Bx(R)?O?(C=l(b,A,C,c),C?A+'="'+C+'"':A):(R=a(b,A,C,O),Bx(R)?void 0:R):R});return w="<"+b,E&&(w+=" "+E),_.closing&&(w+=" /"),w+=">",w}else return x=n(b,w,M),Bx(x)?u(w):x},u);return p&&(f=p.remove(f)),f};var xOe=Lie;(function(e,t){var r=li,i=s$,s=xOe;function n(a,l){var u=new s(l);return u.process(a)}t=e.exports=n,t.filterXSS=n,t.FilterXSS=s,function(){for(var a in r)t[a]=r[a];for(var l in i)t[l]=i[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=e.exports)})(Rk,Rk.exports);var gg=Rk.exports,MOe=function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},TOe=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],article:["style"],aside:["style"],audio:["autoplay","controls","loop","muted","preload"],b:[],blockquote:["style"],br:[],code:["style"],dd:["style"],details:["style"],div:["align","style","aria-label","aria-hidden"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],footer:["style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],header:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],main:["style"],mark:["style"],nav:["style"],ol:[],p:["style"],pre:["style"],section:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],summary:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],time:["style"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.arcgisCSSWhiteList=$I($I({},gg.getDefaultCSSWhiteList()),{flex:!0,"flex-basis":!0,"flex-direction":!0,"flex-flow":!0,"flex-grow":!0,"flex-shrink":!0,"flex-wrap":!0,"line-height":!0,"justify-content":!0,overflow:!0}),this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(n,o,a,l){return n==="a"&&o==="href"||(n==="img"||n==="source")&&o==="src"?i.sanitizeUrl(a):gg.safeAttrValue(n,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var s;t&&!r?s=t:t&&r?(s=Object.create(this.arcgisFilterOptions),s.css={whiteList:this.arcgisCSSWhiteList},Object.keys(t).forEach(function(n){if(n==="whiteList")s.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]);else if(n==="css"){var o=t.css.whiteList;o!=null&&t.css instanceof Object&&Object.keys(o).forEach(function(a){return s.css.whiteList[a]=o[a]})}else s[n]=t[n]})):(s=Object.create(this.arcgisFilterOptions),s.whiteList=this.arcgisWhiteList,s.css={whiteList:this.arcgisCSSWhiteList}),this.xssFilterOptions=s,this._xssFilter=new gg.FilterXSS(s)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t,r){var i=(r??{}).isProtocolRequired,s=i===void 0?!0:i,n=this._trim(t.substring(0,t.indexOf(":"))),o=t==="/",a=/^#/.test(t),l=n&&this.allowedProtocols.indexOf(n.toLowerCase())>-1;return o||a||l?gg.escapeAttrValue(t):!n&&!s?gg.escapeAttrValue("https://".concat(t)):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,s){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,s):gg.safeAttrValue(t,r,i,s)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype.encodeHTML=function(t){var r=this;return String(t).replace(/[&<>"'\/]/g,function(i){return r._entityMap[i]})},e.prototype.encodeAttrValue=function(t){var r=/^[a-zA-Z0-9]$/;return String(t).replace(/[\x00-\xFF]/g,function(i,s){return r.test(i)?i:"&#x".concat(Number(t.charCodeAt(s)).toString(16),";")})},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(s){Array.isArray(i[s])&&Array.isArray(r[s])?r[s]=r[s].concat(i[s]):r[s]=i[s]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var s=!1,n=void 0;if(Array.isArray(t))n=t.reduce(function(a,l){var u=i.validate(l,r);return u.isValid?a.concat([l]):(s=!0,a.concat([u.sanitized]))},[]);else if(MOe(t)){var o=Object.keys(t);n=o.reduce(function(a,l){var u=t[l],c=i.validate(u,r);return c.isValid?a[l]=u:(s=!0,a[l]=c.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return s?n:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}();const n$=new Map;function kie(){n$.clear()}function IOe(e){return n$.get(e)}function EOe(e,t){n$.set(e,t)}function D5(e){n$.delete(e)}function AOe(...e){const t=Nn.acquire();for(let i=0;i<e.length;i++){const s=e[i],n=typeof s;if(n==="string")t.push(s);else if(Array.isArray(s))t.push.apply(t,s);else if(n==="object")for(const o in s)s[o]&&t.push(o)}const r=t.join(" ");return Nn.release(t),r}(()=>{const e=new Map,t=new ResizeObserver(i=>{kie();for(const s of i)e.get(s.target)?.(s)}),r=(i,s,n)=>(e.set(i,s),t.observe(i,n),or(()=>{t.unobserve(i),e.delete(i)}));return(i,s,n)=>{let o=null;return N2([ht(()=>typeof i=="function"?i():i,a=>{o?.remove(),a&&(o=r(a,s,n))},$a),or(()=>o?.remove())])}})();function $Oe(e){const t=e?.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function Elt(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function Alt(e){const t="data-node-ref";this[e.getAttribute(t)]=e}const COe=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],OOe=COe.reduce((e,t)=>(e[t]=[],e),{}),POe=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],Nie=new TOe({whiteList:OOe,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(POe.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function ROe(e){return e==="Enter"||e===" "}const Die="http://www.w3.org/",o$=`${Die}2000/svg`,Fie=`${Die}1999/xlink`;let PG=[],iF=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},sF=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),jie=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},LOe=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if(sF(e[i],t))return i}return-1},F5=(e,t,r,i)=>{let s=e[t];if(s.vnodeSelector==="")return;let n=s.properties;if(!(n&&(n.key===void 0?n.bind:n.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if(sF(a,s))throw new Error(`${r.vnodeSelector} had a ${s.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},kOe=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},kk=[],Nk=!1,Vie=e=>{(e.children||[]).forEach(Vie),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},RG=()=>{Nk=!1,kk.forEach(Vie),kk.length=0},LG=e=>{kk.push(e),Nk||(Nk=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(RG,{timeout:16}):setTimeout(RG,16))},kG=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),LG(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),LG(e))},NOe=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,s=Object.keys(t),n=s.length;for(let o=0;o<n;o++){let a=s[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")Fk(e,l,!0);else if(a==="classes"){let u=Object.keys(l),c=u.length;for(let p=0;p<c;p++){let f=u[p];l[f]&&e.classList.add(f)}}else if(a==="styles"){let u=Object.keys(l),c=u.length;for(let p=0;p<c;p++){let f=u[p],m=l[f];m&&(jie(m),r.styleApplyer(e,f,m))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(i&&(l=i(a,l,e,t)),a==="oninput"&&function(){let c=l;l=function(p){c.apply(this,[p]),p.target["oninput-value"]=p.target.value}}()),e[a]=l):r.namespace===o$?a==="href"?e.setAttributeNS(Fie,a,l):e.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?e[a]=Nie.sanitize(l):Dk(e)&&a in e?e[a]=l:e.setAttribute(a,l):e[a]=l}}};function Dk(e){if(!(e instanceof Element&&e.tagName.includes("-")))return!1;const t=window.customElements.get(e.tagName.toLowerCase());return!!t&&e instanceof t}let OI,DOe=(e,t,r)=>{if(t)for(let i of t)P0(i,e,void 0,r)},Uie=(e,t,r)=>{DOe(e,t.children,r),t.text&&(e.textContent=t.text),NOe(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},P0=(e,t,r,i)=>{let s,n=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")s=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(s,r):t.appendChild(s);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let c=o.charAt(n-1),p=o.slice(n,l);c==="."?s.classList.add(p):c==="#"?s.id=p:(p==="svg"&&(i=iF(i,{namespace:o$})),i.namespace!==void 0?s=e.domNode=a.createElementNS(i.namespace,p):(s=e.domNode=e.domNode||a.createElement(p),p==="input"&&e.properties&&e.properties.type!==void 0&&s.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(s,r):s.parentNode!==t&&t.appendChild(s)),n=l+1}}Uie(s,e,i)}},Fk=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},FOe=(e,t,r,i)=>{if(!r)return;let s=!1,n=Object.keys(r),o=n.length;for(let a=0;a<o;a++){let l=n[a],u=r[l],c=t[l];if(l==="class")c!==u&&(Fk(e,c,!1),Fk(e,u,!0));else if(l==="classes"){let p=e.classList,f=Object.keys(u),m=f.length;for(let g=0;g<m;g++){let b=f[g],w=!!u[b];w!==!!c[b]&&(s=!0,w?p.add(b):p.remove(b))}}else if(l==="styles"){let p=Object.keys(u),f=p.length;for(let m=0;m<f;m++){let g=p[m],b=u[g];b!==c[g]&&(s=!0,b?(jie(b),i.styleApplyer(e,g,b)):i.styleApplyer(e,g,""))}}else if(u||typeof c!="string"||(u=""),l!=="value"||Dk(e)){if(u!==c){let p=typeof u;p==="function"&&i.eventHandlerInterceptor||(i.namespace===o$?l==="href"?e.setAttributeNS(Fie,l,u):e.setAttribute(l,u):p==="string"?l==="innerHTML"?e[l]=Nie.sanitize(u):l==="role"&&u===""?e.removeAttribute(l):Dk(e)&&l in e?e[l]=u:e.setAttribute(l,u):e[l]!==u&&(e[l]=u),s=!0)}}else{let p=e[l];p!==u&&(e["oninput-value"]?p===e["oninput-value"]:u!==c)&&(e[l]=u,e["oninput-value"]=void 0),u!==c&&(s=!0)}}return s},jOe=(e,t,r,i,s)=>{if(r===i)return!1;i=i||PG;let n,o=(r=r||PG).length,a=i.length,l=0,u=0,c=!1;for(;u<a;){let p=l<o?r[l]:void 0,f=i[u];if(p!==void 0&&sF(p,f))c=OI(p,f,s)||c,l++;else{let m=LOe(r,f,l+1);if(m>=0){for(n=l;n<m;n++)kG(r[n]),F5(r,n,e,"removed");c=OI(r[m],f,s)||c,l=m+1}else P0(f,t,l<o?r[l].domNode:void 0,s),kOe(f),F5(i,u,e,"added")}u++}if(o>l)for(n=l;n<o;n++)kG(r[n]),F5(r,n,e,"removed");return c};OI=(e,t,r)=>{let i=e.domNode,s=!1;if(e===t)return!1;let n=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,s=!0,s}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=iF(r,{namespace:o$})),e.text!==t.text&&(n=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,n=jOe(t,i,e.children,t.children,r)||n,n=FOe(i,e.properties,t.properties,r)||n,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return n&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),s};let hb=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,OI(i,r,t)},domNode:e.domNode});const VOe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let l0=e=>iF(VOe,e),fd={create:(e,t)=>(t=l0(t),P0(e,document.createElement("div"),void 0,t),hb(e,t)),append:(e,t,r)=>(r=l0(r),P0(t,e,void 0,r),hb(t,r)),insertBefore:(e,t,r)=>(r=l0(r),P0(t,e.parentNode,e,r),hb(t,r)),merge:(e,t,r)=>(r=l0(r),t.domNode=e,Uie(e,t,r),hb(t,r)),replace:(e,t,r)=>(r=l0(r),P0(t,e.parentNode,e,r),e.parentNode.removeChild(e),hb(t,r))},zie,UOe=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};zie=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let zOe=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?zie(r.children,s=>s.domNode===i):void 0}),r},GOe=(e,t,r)=>{let i=function(s){r("domEvent",s);let n=t(),o=UOe(s.currentTarget,n.domNode);o.reverse();let a,l=zOe(n.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${s.type}`].apply(l.properties.bind||this,arguments)),r("domEventProcessed",s),a};return(s,n,o,a)=>i},NG=e=>{let t,r,i=l0(e),s=i.performanceLogger,n=!0,o=!1,a=[],l=[],u=(p,f,m)=>{let g,b=()=>g;i.eventHandlerInterceptor=GOe(t,b,s),g=p(f,m(),i),a.push(g),l.push(m)},c=()=>{if(r=void 0,n){n=!1,s("renderStart",void 0);for(let p=0;p<a.length;p++){let f=l[p]();s("rendered",void 0),a[p].update(f),s("patched",void 0)}s("renderDone",void 0),n=!0}};return t={renderNow:c,scheduleRender:()=>{r||o||(r=requestAnimationFrame(c))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,n=!0,t.scheduleRender()},append:(p,f)=>{u(fd.append,p,f)},insertBefore:(p,f)=>{u(fd.insertBefore,p,f)},merge:(p,f)=>{u(fd.merge,p,f)},replace:(p,f)=>{u(fd.replace,p,f)},detach:p=>{for(let f=0;f<l.length;f++)if(l[f]===p)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},t},kp=class extends et{constructor(){super(...arguments),this.items=new qe,this._watchUpdatingTracking=new iy,this._callbacks=new Map,this._projector=NG(),this._hiddenProjector=NG()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const i of r.added){const s=()=>i.render();this._callbacks.set(i,s),this._projector.append(this.surface,s)}for(const i of r.removed){const s=this._projector.detach(this._callbacks.get(i));this.surface.removeChild(s.domNode),this._callbacks.delete(i)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){const r=this._hiddenSurface,i=this._hiddenProjector;let s;const n=()=>(s=t.render(),s);i.append(r,n),i.renderNow();const o={left:0,top:0,right:0,bottom:0};if(s?.domNode){const a=s.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(i.detach(n);r.firstChild;)r.removeChild(r.firstChild);return o}overlaps(t,r){const i=this.computeBoundingRect(t),s=this.computeBoundingRect(r);return Math.max(i.left,s.left)<=Math.min(i.right,s.right)&&Math.max(i.top,s.top)<=Math.min(i.bottom,s.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(t,r){const i=!!r?.disableDecorations;if(!this.items.some(n=>n.visible&&!(i&&n.isDecoration)))return;const s=t.getContext("2d");s.save(),s.font=this._fontString(),this.items.forEach(n=>{i&&n.isDecoration||(s.save(),n.renderCanvas(s),s.restore())}),s.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};h([d({readOnly:!0})],kp.prototype,"surface",void 0),h([d({readOnly:!0})],kp.prototype,"items",void 0),h([d({readOnly:!0})],kp.prototype,"needsRender",null),h([d({readOnly:!0})],kp.prototype,"_watchUpdatingTracking",void 0),h([d({readOnly:!0})],kp.prototype,"updating",null),kp=h([j("esri.views.overlay.ViewOverlay")],kp);const DG=kp,j5=[0,0];function BOe(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return j5[0]=r.left+(t?.pageXOffset??0),j5[1]=r.top+(t?.pageYOffset??0),j5}function FG(e){e&&(wie(e),e.parentNode&&e.parentNode.removeChild(e))}function qOe(e){const t=document.createElement("div");return e.appendChild(t),t}const pb=16,qx=750,HOe=512,WOe=2,JOe=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:pb,time:qx},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([ht(()=>this.cursor,i=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",i)}),ht(()=>this.navigating,i=>{const{surface:s}=this;s&&s.setAttribute("data-navigating",i.toString())})])}initialize(){this.addHandles([ht(()=>this.ui,(r,i)=>this._handleUIChange(r,i),fn),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=jr(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(r){const i=this._get("container"),s=eF(r);if(s||typeof r!="string"||be.getLogger(this).error("#container",`element with id '${r}' not found`),i===s)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(FG(this.root),this._set("root",null)),this.userContent&&(EG(this.userContent,i),FG(this.userContent),this._set("userContent",null))),!s)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);s.classList.add("esri-view");const n=document.createElement("div");n.className="esri-view-user-storage",EG(s,n),s.appendChild(n),this._set("userContent",n);const o=document.createElement("div");o.className="esri-view-root",s.insertBefore(o,s.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new DG;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(ht(()=>l.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=_v({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=Kr(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",s),this._startMeasuring()}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(r,i,s){const n=this.position;return r-=n?n[0]:0,i-=n?n[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}containerToPage(r,i,s){const n=this.position;return r+=n?n[0]:0,i+=n?n[1]:0,s?(s[0]=r,s[1]=i):s=[r,i],s}_handleUIChange(r,i){this.removeHandles("ui"),i&&i!==r&&i.destroy(),r&&(r.view=this,this.addHandles(ht(()=>this.root,s=>{r.container=s?qOe(s):null},fn),"ui")),this._set("ui",r)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=pb,r.time=qx,this.addHandles([j2(window,"resize",()=>{r.freq=pb,r.time=qx}),_v({prepare:i=>{const s=this._measure(),n=this._freqInfo;if(n.time+=i.deltaTime,s&&(n.freq=pb,this._get("resizing")||this._set("resizing",!0)),n.time<n.freq)return;n.time=0;const o=this._position();n.freq=o||s?pb:Math.min(qx,n.freq*WOe),!s&&n.freq>=HOe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,s=r?r.clientHeight:0;if(i===0||s===0)return this.suspended||this._set("suspended",!0),!1;const n=this.width,o=this.height;return i===n&&s===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",s),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:n,oldHeight:o,width:i,height:s}),!0)}_position(){const r=this.container,i=this.position,s=r&&BOe(r);return!!s&&(!i||s[0]!==i[0]||s[1]!==i[1])&&(this._set("position",[s[0],s[1]]),!0)}forceDOMReadyCycle(){}};return h([d()],t.prototype,"container",null),h([d({readOnly:!0})],t.prototype,"focused",null),h([d({readOnly:!0})],t.prototype,"height",void 0),h([d()],t.prototype,"messagesCommon",void 0),h([d({type:DG})],t.prototype,"overlay",void 0),h([d({readOnly:!0})],t.prototype,"position",void 0),h([d({readOnly:!0})],t.prototype,"resizing",void 0),h([d({readOnly:!0})],t.prototype,"root",void 0),h([d({value:null,readOnly:!0})],t.prototype,"size",null),h([d({readOnly:!0})],t.prototype,"surface",void 0),h([d({readOnly:!0})],t.prototype,"suspended",void 0),h([d()],t.prototype,"ui",void 0),h([d({readOnly:!0})],t.prototype,"userContent",void 0),h([d({readOnly:!0})],t.prototype,"width",void 0),h([d()],t.prototype,"widthBreakpoint",void 0),t=h([j("esri.views.DOMContainer")],t),t};let ZOe=class{constructor(t,r){this._owner=r,this._properties={},this._afterDispatchHandle=null;for(const i in t){const s=t[i],n=new $J(s,void 0,void 0,2,2);this._properties[i]={pool:n,acquired:[]}}this._afterDispatchHandle=ope(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const t in this._properties){const r=this._properties[t];for(const i of r.acquired)R7(i)||r.pool.release(i);r.pool.destroy(),r.pool=null,r.acquired=null}this._properties=null,this._owner=null}get(t){const r=this._owner._get(t),i=this._properties[t];let s=i.pool.acquire();for(i.acquired.push(s);s===r;)i.acquired.push(s),s=i.pool.acquire();return s}_release(){for(const t in this._properties){const r=this._properties[t];let i=0;for(const s of r.acquired)R7(s)?r.acquired[i++]=s:r.pool.release(s);r.acquired.length=i}}};const YOe=ce("mac")?"Meta":"Control",KOe=new Set(["Alt","Control","Meta","Shift","Ctrl","Primary"]),XOe=e=>KOe.has(e);let QOe=class{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}},is=class{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager||(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let s;typeof r=="function"?(i=r,s=[]):s=r||[];const n=typeof t=="string"?new QOe(t,s):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=c=>{const p=this._incoming[c.match.eventType];if(p){const f=p.indexOf(c);p.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new ePe(n,i,{onPause:a,onRemove:a,onResume:c=>{const p=this._incoming[c.match.eventType];p&&!p.includes(c)&&(p.push(c),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[n.eventType];return u||(u=[],this._incoming[n.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw new Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new tPe(t,{onEmit:(i,s,n,o)=>{this._manager?.emit(i.eventType,s,n,o)},onRemove:i=>{delete this._outgoing[i.eventType],this._manager?.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){this._manager?.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager?.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager?.refreshHasPendingInputs()}_onUninstall(){this._manager&&(this.onUninstall(),this._manager=null)}_handleEvent(t){const r=this._incoming[t.type];if(r){for(const i of r)if(i.match.matches(t)&&(i.callback?.(t),t.shouldStopPropagation()))break}}},ePe=class{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},tPe=class{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}},rPe=class extends is{constructor(t){super(!0),this._onChange=t,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",r=>{this._update(r.data)})}_update(t){const r=t.native.pointerType==="touch"?"touch":"mouse",{x:i,y:s}=t;r===this._value&&this._x===i&&this._y===s||(this._value=r,this._x=i,this._y=s,this._onChange(r,i,s))}},iPe=class{constructor(t,r){this._observable=new z2,this._value=t,this._equalityFunction=r}get value(){return ot(this._observable),this._value}set value(t){this._equalityFunction(t,this._value)||(this._value=t,this._observable.notify())}mutate(t){t(this._value),this._observable.notify()}};function Gie(e,t=hJ){return new iPe(e,t)}let sPe=class extends is{get multiTouchActive(){return this._multiTouchActive.value}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=Gie(!1),this._onPointerAdd=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.add(t.native.pointerId),this._update())},this._onPointerRemove=({data:t})=>{t.pointerType==="touch"&&(this._activeTouchPointerIds.delete(t.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.value=this._activeTouchPointerIds.size>1}},Ma=class extends et{constructor(t){super(t),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=YOe,this._latestPointerType="mouse",this._propertiesPool=new ZOe({latestPointerLocation:aPe},this),this.latestPointerLocation=null,this._paused=!1,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const t=Object.keys(this._nameToGroup);for(const r of t)this.uninstallHandlers(r);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(t=>t.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}get updating(){return this.hasPendingInputs||this._paused}installHandlers(t,r,i=wd.INTERNAL){if(this._nameToGroup[t]||r.length===0)return;const s={name:t,handlers:r.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:i,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[t]=s;for(let n=s.handlers.length-1;n>=0;n--){const o=s.handlers[n];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,u,c,p)=>{this._emitInputEvent(o.priorityIndex+1,a,l,u,p,c)},setPointerCapture:(a,l)=>{this._setPointerCapture(s,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(t){const r=this._nameToGroup[t];r?(r.handlers.forEach(i=>{i.removed=!0,i.uninstallCallback?.()}),delete this._nameToGroup[t],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):be.getLogger(this).error("There is no InputHandler group registered under the name `"+t+"`")}hasHandlers(t){return this._nameToGroup[t]!==void 0}isModifierKeyDown(t){return this._activeKeyModifiers&&this._activeKeyModifiers.has(t)}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const t=new Set,r=new Set;this._handlersPriority=[];for(let i=this._handlers.length-1;i>=0;i--){const s=this._handlers[i];s.priorityIndex=i,this._handlersPriority.push(s)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let i=this._handlersPriority.length-1;i>=0;i--){const s=this._handlersPriority[i];s.priorityIndex=i;let n=s.handler.hasSideEffects;if(!n){for(const o of s.handler.outgoingEventTypes)if(t.has(o)){n=!0;break}}if(n)for(const o of s.handler.incomingEventMatches){t.add(o.eventType);for(const a of o.keyModifiers)XOe(a)||r.add(a)}s.active=n}this._sourceEvents=t,this._keyModifiers=r,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(t,r,i){this._latestPointerType=t;const s=this._get("latestPointerLocation");if(s==null||s.x!==r||s.y!==i){const n=this._propertiesPool.get("latestPointerLocation");n.x=r,n.y=i,this._set("latestPointerLocation",n)}}_onEventReceived(t,r){if(t==="pointer-capture-lost"){const n=r;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(t,r);const i=this.test.timestamp!=null?this.test.timestamp:r.native?r.native.timestamp:void 0,s=r.native?r.native.cancelable:void 0;this._emitInputEventFromSource(t,r,i,s)}_updateKeyModifiers(t,r){if(!r)return;let i=!1;const s=()=>{if(!i){const a=new Set;this._activeKeyModifiers.forEach(l=>{a.add(l)}),this._activeKeyModifiers=a,i=!0}},n=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(s(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(s(),this._activeKeyModifiers.delete(a))};if(t==="key-down"||t==="key-up"){const a=r.key;this._keyModifiers.has(a)&&n(a,t==="key-down")}const o=r.native;n("Alt",!(!o||!o.altKey)),n("Control",!(!o||!o.ctrlKey)),n("Ctrl",!(!o||!o.ctrlKey)),n("Shift",!(!o||!o.shiftKey)),n("Meta",!(!o||!o.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new rPe((t,r,i)=>this._setLatestPointer(t,r,i)),this._multiTouchHandler=new sPe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],wd.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,wd.INTERNAL)}_setPointerCapture(t,r,i,s){const n=t.name+"-"+r.priorityIndex,o=this._pointerCaptures.get(i.pointerId)||new Set;this._pointerCaptures.set(i.pointerId,o),s?(o.add(n),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(i,!0)):o.has(n)&&(o.delete(n),o.size===0&&(this._pointerCaptures.delete(i.pointerId),this.eventSource&&this.eventSource.setPointerCapture(i,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(t=>!t.removed),this.updateDependencies()}_emitInputEventFromSource(t,r,i,s){this._emitInputEvent(0,t,r,i,s)}_emitInputEvent(t,r,i,s,n,o){const a=s!==void 0?s:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=n!==void 0&&n,u={event:new nPe(r,i,a,o||this._activeKeyModifiers,l),priorityIndex:t};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(t){this._currentPropagation={events:new vI,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:t.event.timestamp},this._currentPropagation.events.push(t),this._continuePropagation()}_continuePropagation(){this._paused=!1;const t=this._currentPropagation;if(t){for(;t.events.length>0;){const{event:r,priorityIndex:i}=t.events.pop(),s=r.data?.eventId;if(!(s!=null&&this._stoppedPropagationEventIds.has(s)))for(t.currentHandler=this._handlersPriority[i];t.currentHandler;){if(t.currentHandler.removed)t.needsHandlerGarbageCollect=!0;else{if(t.currentHandler.active&&!r.shouldStopPropagation()&&t.currentHandler.eventCallback?.(r),r.shouldStopPropagation()){s!=null&&this._stoppedPropagationEventIds.add(s);break}if(r.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:r,priorityIndex:t.currentHandler.priorityIndex+1})}t.currentHandler=this._handlersPriority[t.currentHandler.priorityIndex+1]}}t.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(t){const r=new vI;r.push(t);const i=this._currentPropagation;if(i){for(;i.events.length;)r.push(i.events.pop());i.events=r,i.currentHandler=null,this._paused=!0}}_compareHandlerPriority(t,r){if(t.handler.hasSideEffects!==r.handler.hasSideEffects)return t.handler.hasSideEffects?1:-1;if(t.groupPriority!==r.groupPriority)return t.groupPriority>r.groupPriority?-1:1;for(const i of t.handler.incomingEventMatches)for(const s of r.handler.incomingEventMatches){if(i.eventType!==s.eventType)continue;const n=i.keyModifiers.filter(o=>s.keyModifiers.includes(o));if(n.length===i.keyModifiers.length!=(n.length===s.keyModifiers.length))return i.keyModifiers.length>s.keyModifiers.length?-1:1}return t.priorityIndex>r.priorityIndex?-1:1}_sortHandlersPriority(t){const r=[];for(const i of t){let s=0;for(;s<r.length&&this._compareHandlerPriority(i,r[s])>=0;)s++;r.splice(s,0,i)}return r}get debug(){const t=r=>{const i=this._setPointerCapture;this._setPointerCapture=()=>{},r(),this._setPointerCapture=i};return{injectEvent:(r,i)=>{t(()=>{this._onEventReceived(r,i)})},disablePointerCapture:t}}};h([d({readOnly:!0})],Ma.prototype,"hasPendingInputs",null),h([d({constructOnly:!0})],Ma.prototype,"eventSource",void 0),h([d({constructOnly:!0})],Ma.prototype,"recognizers",void 0),h([d()],Ma.prototype,"_latestPointerType",void 0),h([d()],Ma.prototype,"latestPointerType",null),h([d()],Ma.prototype,"multiTouchActive",null),h([d({readOnly:!0})],Ma.prototype,"latestPointerLocation",void 0),h([d()],Ma.prototype,"_paused",void 0),h([d({readOnly:!0})],Ma.prototype,"updating",null),Ma=h([j("esri.views.input.InputManager")],Ma);let nPe=class{constructor(t,r,i,s,n){this.type=t,this.data=r,this.timestamp=i,this.modifiers=s,this.cancelable=n,this._propagationState=Xp.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=Xp.STOPPED}shouldStopPropagation(){return!!(this._propagationState&Xp.STOPPED)}async(t){this._propagationState|=Xp.PAUSED;const r=(i,s)=>{this._propagationState&=~Xp.PAUSED;const n=this._resumeCallback;if(this._resumeCallback=null,n&&n(),s)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(this._propagationState&Xp.PAUSED)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}};var Xp;(function(e){e[e.NONE=0]="NONE",e[e.STOPPED=1]="STOPPED",e[e.PAUSED=2]="PAUSED"})(Xp||(Xp={}));const wd={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let oPe=class{};const aPe=oPe;function wc(e){return e!=null&&"open"in e&&"declaredClass"in e}function jG(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}const lPe=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([ht(()=>[this.ui,this.popup],([r,i],s)=>{const n="popup",o="manual";if(s){const[a,l]=s;a&&wc(l)&&(l.view=null,jG(l)&&a.remove(l,n))}r&&wc(i)&&(i.view=this,jG(i)&&r.add(i,{key:n,position:o,internal:!0}))},fn),this.on("click",r=>{this.popup&&this.popupEnabled&&(r.pointerType!=="mouse"||r.button===0)&&(wc(this.popup)?this.popup.viewModel.handleViewClick(r):r.async(async()=>{await this.setupPopup(),wc(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(r)}))},wd.WIDGET)]),C6(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{fe(()=>import("./Popup-BcmjNxAq.js"),__vite__mapDeps([148,1,3,24,149]),import.meta.url)})}destroy(){this.destroyed||this.closePopup()}async openPopup(r){if(wc(this.popup))return this.popup.open(r);try{if(await this.setupPopup(),!this.popup)return void be.getLogger(this).error(new K("view:null-popup","Popup is null and can't be opened"));this.popup.open(r)}catch{}}closePopup(){this._popupSetupTask?.abort(),wc(this.popup)&&this.popup.close()}async fetchPopupFeatures(r,i){return await this.when(),this._popupHitsToFeatures(await this._getPopupHits(r,i),i)}async setupPopup(){if(this._popupSetupTask?.abort(),this.popup&&!wc(this.popup))return this._popupSetupTask=PD(async r=>{const{default:i}=await fe(()=>import("./Popup-BcmjNxAq.js"),__vite__mapDeps([148,1,3,24,149]),import.meta.url);if(dr(r),!this.popup||wc(this.popup))return;const s=this.popup;delete s.open,delete s.close,this.popup=new i(s)}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:r,hits:i},s){const n=[],o=[];let a=!1;const l=Fhe(s,ce("popup-view-fetch-timeout")??cPe),u=f=>{const m=new uPe(f);return o.push(m),n.push(m.promise),m},c=f=>{const m=o.at(-1);return m&&m.layerView===f&&!a?m:u(f)};for(const f of i)"graphic"in f?(c(f.layerView).graphics.push(f.graphic),a=!1):(n.push(f.layerView.fetchPopupFeaturesAtLocation(f.mapPoint,l)),a=!0);o.map(f=>f.resolve(l));const p=Dhe(n).then(f=>f.filter(m=>!!m).flat());return{pendingFeatures:n,allGraphicsPromise:p,location:r}}async _getPopupHits(r,i){const{hits:s,location:n}=await this.popupHitTest(r);dr(i);const o=[];for(const a of s)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,i)){const l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:n}}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(i?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(r){return!r||(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesFromGraphics"in r}_isValidPopupLocationLayerView(r){return(!("layer"in r)||!r.suspended)&&"fetchPopupFeaturesAtLocation"in r}};return h([d({cast(r){return!r||wc(r)||typeof r=="object"&&(r.open=i=>(yy(be.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(i)),r.close=()=>(yy(be.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),r}})],t.prototype,"popup",void 0),h([d()],t.prototype,"popupEnabled",void 0),t=h([j("esri.views.PopupView")],t),t};let uPe=class{constructor(t){this.layerView=t,this._resolver=ia(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){const{layerView:r,graphics:i,_resolver:s}=this;if(!r)return s.resolve(i),s.promise;let n;return r.fetchPopupFeaturesFromGraphics(i,t).catch(o=>(n=o,null)).then(o=>{o?s.resolve(o):s.reject(n)}),s.promise}};const cPe=5e3;let PI=class extends t_{constructor(t){super(t),this.addHandles(this.on("before-add",r=>{r.item!=null&&r.item.parent===this.owner&&(be.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),r.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};PI=h([j("esri.support.AnalysesCollection")],PI);let Np=class extends et{constructor(t){super(t),this.view=null,this.baseLayerViews=new qe,this.referenceLayerViews=new qe,this._loadingHandle=ht(()=>this.view?.map?.basemap,r=>{r&&r.load().catch(()=>{})},fn)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(const t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(const t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view?.suspended)return!1;const t=this.view?.map?.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};h([d({constructOnly:!0})],Np.prototype,"view",void 0),h([d({readOnly:!0})],Np.prototype,"baseLayerViews",void 0),h([d({readOnly:!0})],Np.prototype,"referenceLayerViews",void 0),h([d({readOnly:!0})],Np.prototype,"suspended",null),h([d({type:Boolean,readOnly:!0})],Np.prototype,"updating",null),Np=h([j("esri.views.BasemapView")],Np);function hPe(e){return"tryRecycleWith"in e}function pPe(e){return e!=null&&typeof e=="object"&&"layerViews"in e}let dPe=class{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=ia(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Zo(this._controller.signal,()=>{const s=new K("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(s)})}tryRecycle(t){if(!this.done||!this.layerView||!hPe(this.layerView))return null;const r=this.layer.type,i=this._controller.signal;for(let s=0;s<t.length;s++){const n=t[s];if(n.type!==r)continue;const o=this.layerView.tryRecycleWith(n,{signal:i});if(o){t.splice(s,1),this.layer=n;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(dr(this._controller.signal),n.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),n.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((u,c)=>Zo(this._controller.signal,()=>c(ii())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:t}=this;if(t){const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{let s,n;if(await r.load({signal:t}),r.prefetchResources&&await r.prefetchResources({signal:t}),mPe(r))s=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new K("layer:view-not-supported","No layerview implementation was found");const l=await this.layerViewImporter.importLayerView(r);dr(t),s="default"in l?new l.default({layer:r,view:i}):new l({layer:r,view:i})}const o=()=>{n=Kr(n),s.destroyed||s.destroy(),s.layer=null,s.parent=null,s.view=null,this.done=!0};n=Zo(t,o),dr(t);try{await s.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(r))return o(),void this._deferred.reject(new K("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=s,r.emit("layerview-create",{view:i,layerView:s}),i.emit("layerview-create",{layer:r,layerView:s}),this.done=!0,this._deferred.resolve(s)}catch(s){r.emit("layerview-create-error",{view:i,error:s}),i.emit("layerview-create-error",{layer:r,error:s}),this.done=!0,this._deferred.reject(new K("layerview:create-error","layerview creation failed",{layer:r,error:s}))}}},Ta=class extends et{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new iy,this.supportsGround=!0,this._preloadLayerViewModules=()=>{const r=this.view.map?.allLayers;if(r)for(const i of r)this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=ia(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(l1(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;const r=this.view.map;if(this._map!==r&&(this.clear(),this._map=r),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const i=new Set,s=[],n=this.view.ready,o=l=>{if(l!=null){for(const u of l)if(u){i.add(u);const c=this._layerLayerViewInfoMap.get(u);c&&n?c.start():c||this._recyclingInfoMap.has(u)||s.push(u),"layers"in u&&u.layers&&o(u.layers)}}};for(const l of this._rootCollectionNames)o(Ll(this,l));for(const[l,u]of this._layerLayerViewInfoMap)if(!i.has(l)){this._layerLayerViewInfoMap.delete(u.layer);const c=u.tryRecycle(s);c?(this.notifyChange("updating"),this._recyclingInfoMap.set(u.layer,u),c.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(u.layer),this._layerLayerViewInfoMap.set(u.layer,u),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(u.layer),u.destroy(),this._reschedule()})):u.destroy()}for(const[l,u]of this._recyclingInfoMap)i.has(l)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(u.layer),u.destroy());for(const l of s)this._createLayerView(l);this._refreshCollections();const a=[r?.ground?.layers,r?.basemap?.baseLayers,r?.basemap?.referenceLayers,r?.layers].filter(l=>!!l);i.forEach(l=>"layers"in l&&a.push(l.layers)),this.addHandles(a.map(l=>this._watchUpdatingTracking.addOnCollectionChange(()=>l,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([ql(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),ht(()=>{const t=this.view,r=t?.map;return[r?.basemap,r?.ground,r?.layers,t?.ready]},()=>this._reschedule(),$a)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),R5(this._recyclingInfoMap),R5(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(ii()),this._workPromise=null)}get _layersToLayerViews(){const t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||YE(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(const r of this._layerLayerViewInfoMap.values())r.done||++t;return t}clear(){this.destroyed||(R5(this._layerLayerViewInfoMap),this._refreshCollections())}async whenLayerView(t){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new K("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise}isCreatingLayerViewsForLayer(t,r){this.commitProperty("updatingRemaining");const i=this._layerLayerViewInfoMap.get(t);if(!i?.done)return!0;const s=i.layerView;return!(!s||!r||s.parent===r)||!!(i.done&&s&&"layers"in t&&t.layers?.length)&&t.layers.some(n=>this.isCreatingLayerViewsForLayer(n,s))}_refreshCollections(){for(const[t,r]of this._layersToLayerViews)this._populateLayerViewsOwners(Ll(this,t),Ll(this,r),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,r,i){if(!t||!r)return void(r&&r.removeAll());let s=0;for(const n of t){const o=this._layerLayerViewInfoMap.get(n);if(!o?.layerView)continue;const a=o.layerView;a.layer=n,a.parent=i,r.at(s)!==a&&r.splice(s,0,a),"layers"in n&&pPe(a)&&this._populateLayerViewsOwners(n.layers,a.layerViews,a),s+=1}s<r.length&&r.splice(s,r.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);const r=new dPe(t,this.view,this.layerViewImporter);r.promise.then(()=>this._refreshCollections(),i=>{i&&(ws(i)||i.name==="cancelled:layerview-create")||be.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:i}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,r),this.view.ready&&r.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};h([d()],Ta.prototype,"_workPromise",void 0),h([d({readOnly:!0})],Ta.prototype,"_watchUpdatingTracking",void 0),h([d({readOnly:!0})],Ta.prototype,"_layersToLayerViews",null),h([d({readOnly:!0})],Ta.prototype,"_rootCollectionNames",null),h([d()],Ta.prototype,"layerViewImporter",void 0),h([d()],Ta.prototype,"supportsGround",void 0),h([d({readOnly:!0})],Ta.prototype,"updating",null),h([d({readOnly:!0})],Ta.prototype,"updatingRemaining",null),h([d({constructOnly:!0})],Ta.prototype,"view",void 0),Ta=h([j("esri.views.LayerViewManager")],Ta);const fPe=Ta;function mPe(e){return"createLayerView"in e&&e.createLayerView!=null}let Fo=class extends et{constructor(t){super(t),this.factor=1.5,this.offset=Cs(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};h([d({type:Number})],Fo.prototype,"factor",void 0),h([d({nonNullable:!0})],Fo.prototype,"offset",void 0),h([d()],Fo.prototype,"position",void 0),h([d({type:Number,range:{min:0}})],Fo.prototype,"size",void 0),h([d()],Fo.prototype,"maskUrl",void 0),h([d()],Fo.prototype,"maskEnabled",void 0),h([d()],Fo.prototype,"overlayUrl",void 0),h([d()],Fo.prototype,"overlayEnabled",void 0),h([d({readOnly:!0})],Fo.prototype,"version",null),h([d({type:Boolean})],Fo.prototype,"visible",void 0),Fo=h([j("esri.views.Magnifier")],Fo);const Bie=Fo;let n3=class{constructor(t){this._observable=new z2,this._map=new Map(t)}get size(){return ot(this._observable),this._map.size}clear(){this._map.size>0&&(this._map.clear(),this._observable.notify())}delete(t){const r=this._map.delete(t);return r&&this._observable.notify(),r}entries(){return ot(this._observable),this._map.entries()}forEach(t,r){ot(this._observable),this._map.forEach((i,s)=>t.call(r,i,s,this),r)}get(t){return ot(this._observable),this._map.get(t)}has(t){return ot(this._observable),this._map.has(t)}keys(){return ot(this._observable),this._map.keys()}set(t,r){return this._map.set(t,r),this._observable.notify(),this}values(){return ot(this._observable),this._map.values()}[Symbol.iterator](){return ot(this._observable),this._map[Symbol.iterator]()}get[Symbol.toStringTag](){return this._map[Symbol.toStringTag]}};function Hx(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}let Xc=class extends jh.EventedAccessor{constructor(t){super(t),this._selectionMap=new n3,this._sources=new qe,this._trashCan=[],this._layerEditHandles=new qe,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([ht(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),ql(()=>this.sources,"change",r=>{const i=this._selectionMap;for(const s of r.removed)i.delete(s);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);const t=new qe;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(r=>"sublayers"in r&&r.sublayers?r.sublayers:null).forEach(r=>{(Hx(r)&&!$me(r)||jf(r))&&t.add(r)}),this.sources=t)})}destroy(){this._layerEditHandles.drain(Kr)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{const[r,i]=t;return{layer:r,selection:[...i.selection]}})}get count(){let t=0;for(const r of this._selectionMap.values())t+=r.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(t){Id(t,this._sources)}async getSelectedFeatures(t,r={},i="layerView"){const{view:s,selections:n}=this,o=(t!==void 0?n.filter(a=>t.includes(a.layer)):n).filter(a=>a.selection.length>0).map(async a=>{const{layer:l,selection:u}=a,c=jf(l)?l.parent:l;if(c==null||!UG(c))return null;if(i==="layer")return zG(c,u,r);if(VG(c))return null;const p=await s.whenLayerView(c).catch(()=>null);return p?zG(p,u,r):null});return(await Promise.all(o)).filter(a=>a!=null)}updateSelection(t){const r=new Map;for(const[n,o]of this._selectionMap)r.set(n,[...o.selection]);let i=!1;const s=t.current.concat(t.added);for(const n of s){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Hx(o)||jf(o))&&a!==null){const l=KE(r,o,()=>[]);l.includes(a)||(l.push(a),i=!0)}}for(const n of t.removed){const o=n.sourceLayer,a=n.getObjectId();if(this.sources.includes(o)&&(Hx(o)||jf(o))&&a!==null){const l=r.get(o),u=l?.indexOf(a);u!==void 0&&u>=0&&(l?.splice(u,1),i=!0)}}if(i){const{_selectionMap:n,_trashCan:o}=this,a=[];for(const[l,u]of r){const c=n.get(l);c!==void 0&&o.push(c),n.set(l,{selection:u}),a.push({layer:l,selection:u,...p7(c!==void 0?c.selection:[],u)})}this._onSelectionChange(a)}}setSelection(t,r){this._setSelection(t,r)}getSelection(t){return this._selectionMap.get(t)?.selection}appendToSelection(t,r){const i=this._selectionMap.get(t),s=i!==void 0?[...i.selection]:[];for(const n of r)s.includes(n)||s.push(n);this._setSelection(t,s)}removeFromSelection(t,r){const i=this._selectionMap.get(t);if(!i)return;const s=[];for(const n of i.selection)r.includes(n)||s.push(n);this._setSelection(t,s)}toggleInSelection(t,r){const i=this._selectionMap.get(t);if(!i||i.selection.length===0)return void this._setSelection(t,r);const s=new Set(i.selection),n=new Set(r),o=Xhe(s,n);this._setSelection(t,Array.from(o))}clear(){const t=this._selectionMap.values();this._trashCan.push(...t);const r=[];for(const[i,s]of this._selectionMap.entries())r.push({layer:i,added:[],removed:[...s.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(r)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();const{sources:t,view:r,_selectionMap:i,showHighlight:s}=this,n=this._vizTaskId;for(const o of t){const a=i.get(o),l=jf(o)?o.parent:o;if(l!=null&&UG(l)){if(VG(l))continue;r.whenLayerView(l).then(u=>{a?.highlightHandle?.remove(),a!=null&&s&&n===this._vizTaskId&&"highlight"in u&&typeof u.highlight=="function"&&a.selection.length>0&&(a.highlightHandle=u.highlight(a.selection,"selection"))}).catch(()=>{a?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Kr);for(const t of this.sources){const r=jf(t)?t.parent:t;if(r!=null&&Hx(r)){const i=r.on("edits",s=>{this._handleEditChanges(s,t)});this._layerEditHandles.push(i)}}}_handleEditChanges(t,r){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(r)){const i=t.deletedFeatures.filter(s=>s.error==null).map(s=>s.objectId).filter(ra);this.removeFromSelection(r,i)}}_setSelection(t,r){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);const i=this._selectionMap.get(t);if(i===void 0||!gPe(i,{selection:r})){i!==void 0&&this._trashCan.push(i),this._selectionMap.set(t,{selection:[...r]});const s={layer:t,selection:[...r],...p7(i!==void 0?i.selection:[],r)};this._onSelectionChange([s])}}};h([d({readOnly:!0,nonNullable:!0})],Xc.prototype,"selections",null),h([d({readOnly:!0,nonNullable:!0})],Xc.prototype,"count",null),h([d({constructOnly:!0,nonNullable:!0})],Xc.prototype,"view",void 0),h([d({readOnly:!0,nonNullable:!0})],Xc.prototype,"hasSelection",null),h([d()],Xc.prototype,"showHighlight",void 0),h([d()],Xc.prototype,"sources",null),Xc=h([j("esri.views.SelectionManager")],Xc);const VG=e=>jf(e)?e.parent?.isTable===!0:e.isTable,yPe=e=>e.layer!==void 0,UG=e=>e?.when!==void 0,gPe=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){const r=[...e.selection],i=[...t.selection];if(r.length!==i.length)return!1;r.sort(),i.sort();for(let s=0;s<r.length;s++)if(r[s]!==i[s])return!1}return!0},zG=async(e,t,r={})=>{let i;if(yPe(e)){const s=e;i=s===void 0?null:await s.queryFeatures(new Ci({...r,objectIds:t})).then(n=>({data:n,layer:e.layer}))}else{const s=e;i=s===void 0?null:await s.queryFeatures(new Ci({...r,objectIds:t})).then(n=>({data:n,layer:s}))}return i},vPe=Xc;let bw=class extends Yt(et){constructor(t){super(t),this.accentColor=new Le([255,127,0]),this.textColor=new Le([255,255,255])}};h([d({type:Le,nonNullable:!0})],bw.prototype,"accentColor",void 0),h([d({type:Le,nonNullable:!0})],bw.prototype,"textColor",void 0),bw=h([j("esri.views.Theme")],bw);const jk=bw;var GG;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right"})(GG||(GG={}));const qie=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Hie={};function Wie(e){return!!Hie[e]}function bPe(e){for(const t of e)if(!Wie(t))return!1;return!0}qie.forEach(e=>{Hie[e]=!0});let wPe=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:r,priority:i},s)=>this.inputManager?.installHandlers(s,[r],i))}disconnect(){this.inputManager&&this._handlers.forEach((t,r)=>this.inputManager?.uninstallHandlers(r)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,r,i,s){const n=Array.isArray(t)?t:t.split(",");if(!bPe(n))return n.some(Wie)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:s=i,s=s??wd.DEFAULT;const l=this._createUniqueGroupName(),u=new _Pe(this.view,n,a,o);this._handlers.set(l,{handler:u,priority:s});for(const c of n){const p=this._handlerCounts.get(c)||0;this._handlerCounts.set(c,p+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],s),or(()=>this._removeHandler(l,n))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,r){if(this._handlers.has(t)){this._handlers.delete(t);for(const i of r){const s=this._handlerCounts.get(i);s===void 0||(s===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,s-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},_Pe=class extends is{constructor(t,r,i,s){super(!0),this._latestDragStart=void 0,this.view=t;for(const n of r)switch(n){case"click":this.registerIncoming("click",i,o=>s(MPe(t,o)));break;case"double-click":this.registerIncoming("double-click",i,o=>s(TPe(t,o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>s(IPe(t,o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>s(EPe(t,o)));break;case"hold":this.registerIncoming("hold",i,o=>s(APe(t,o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this._wrapDrag(o);a&&s(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>s($Pe(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>s(CPe(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>s(db(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>s(db(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>s(db(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>s(OPe(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>s(PPe(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>s(db(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>s(db(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{s(RPe(o))});break;case"focus":this.registerIncoming("focus",i,o=>{s(SPe(o))});break;case"blur":this.registerIncoming("blur",i,o=>{s(xPe(o))})}}_wrapDrag(t){const r=t.data,{x:i,y:s}=r.center,{action:n,pointerType:o,button:a}=r;if(n==="start"&&(this._latestDragStart=r),!this._latestDragStart)return;const l=r.pointer.native,u=r.buttons,{cancelable:c,timestamp:p}=t,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return n==="end"&&(this._latestDragStart=void 0),{type:"drag",action:n,x:i,y:s,origin:f,pointerType:o,button:a,buttons:u,radius:r.radius,angle:EY(r.angle),native:l,timestamp:p,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}};function SPe(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function xPe(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function MPe(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:c}=t;return{type:"click",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:c,screenPoint:Cs(n,o),mapPoint:mS(e,n,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function TPe(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:c}=t;return{type:"double-click",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:c,mapPoint:mS(e,n,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function IPe(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:c,timestamp:p}=t;return{type:"immediate-click",pointerId:u,pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:p,mapPoint:mS(e,n,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function EPe(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:c,timestamp:p}=t;return{type:"immediate-double-click",pointerId:u,pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:p,mapPoint:mS(e,n,o),eventId:l,cancelable:c,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}function APe(e,t){const{pointerType:r,button:i,buttons:s,x:n,y:o,native:a}=t.data,{cancelable:l,timestamp:u}=t;return{type:"hold",pointerType:r,button:i,buttons:s,x:n,y:o,native:a,timestamp:u,mapPoint:mS(e,n,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:c=>t.async(c),preventDefault:()=>t.preventDefault()}}function mS(e,t,r){return e.toMap(Cs(t,r),{exclude:[]})}function $Pe(e){const{key:t,repeat:r,native:i}=e.data,{cancelable:s,timestamp:n}=e;return{type:"key-down",key:t,repeat:r,native:i,timestamp:n,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}function CPe(e){const{key:t,native:r}=e.data,{cancelable:i,timestamp:s}=e;return{type:"key-up",key:t,native:r,timestamp:s,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:n=>e.async(n),preventDefault:()=>e.preventDefault()}}function db(e,t){const{x:r,y:i,button:s,buttons:n,native:o,eventId:a}=e.data,l=o.pointerId,u=o.pointerType,{cancelable:c,timestamp:p}=e;return{type:t,x:r,y:i,pointerId:l,pointerType:u,button:s,buttons:n,native:o,timestamp:p,eventId:a,cancelable:c,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}function OPe(e){const{x:t,y:r,buttons:i,native:s,eventId:n}=e.data.currentEvent,{button:o}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,u=e.data.action,c={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:p,timestamp:f}=e;return{type:"pointer-drag",x:t,y:r,pointerId:a,pointerType:l,button:o,buttons:i,action:u,origin:c,native:s,timestamp:f,eventId:n,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function PPe(e){const{cancelable:t,data:r,timestamp:i}=e,{x:s,y:n,deltaY:o,native:a}=r;return{type:"mouse-wheel",x:s,y:n,deltaY:o,native:a,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}function RPe(e){const{action:t,state:r,device:i}=e.data,{cancelable:s,timestamp:n}=e,{buttons:o,axes:a}=r;return{type:"gamepad",device:i,timestamp:n,action:t,buttons:o,axes:a,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}var i2,BG,qG;(function(e){e[e.USER=0]="USER",e[e.MANAGER=1]="MANAGER"})(i2||(i2={})),function(e){e[e.None=0]="None",e[e.Unfocused=1]="Unfocused",e[e.Focused=2]="Focused",e[e.Unselected=4]="Unselected",e[e.Selected=8]="Selected",e[e.All=15]="All"}(BG||(BG={})),function(e){e[e.None=0]="None",e[e.Custom1=16]="Custom1",e[e.Custom2=32]="Custom2",e[e.Custom3=64]="Custom3",e[e.Custom4=128]="Custom4",e[e.Custom5=256]="Custom5",e[e.Custom6=512]="Custom6",e[e.Custom7=1024]="Custom7",e[e.Custom8=2048]="Custom8",e[e.Custom9=4096]="Custom9",e[e.Custom10=8192]="Custom10",e[e.Custom11=16384]="Custom11",e[e.Custom12=32768]="Custom12",e[e.All=65520]="All"}(qG||(qG={}));function LPe(e){return[e.on("before-add",t=>{const r=t.item;if(r==null||e.includes(r))return be.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();r.onAdd()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.destroy()})]}function Vk(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(i2.USER)&&e.getEditableFlag(i2.MANAGER)}function gu(e){return Cs(e.x,e.y)}function Jie(e,t){const r=(e instanceof HTMLElement?e:e.surface)?.getBoundingClientRect();return r?Cs(t.clientX-r.left,t.clientY-r.top):Cs(0,0)}function Zie(e,t){return t instanceof Event?Jie(e,t):gu(t)}function Yie(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let kPe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":WG(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!JG(t))break;const s=gu(t),n=vg(s,t.pointerType,r.forEachTool);if(n==null)break;const o=n.manipulator,a=n.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(t)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,t,r),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(t)&&!o.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:o,tool:a,start:s,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool==null&&(this._revertToNullActiveTool=!0,r.setActiveTool(n.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:s}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!JG(t))break;const s=this._grabbedManipulators.get(t.pointerId),n=s?.manipulator,o=s?.tool;if(n==null||o==null)break;const a=gu(t);a.x=Gl(a.x,0,r.view.width),a.y=Gl(a.y,0,r.view.height);const l=s.start,u=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(n.dragging=!0,u?n.events.emit("drag",{action:"update",start:l,screenPoint:a}):n.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:o,manipulator:n,start:l}));break;case"end":n.dragging=!1,u&&n.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const s=gu(t),n=vg(s,t.pointerType,r.forEachTool);if(NPe(t)||r.forEachTool(u=>{if((n==null||n.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let c=!1;u.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,c=!0)}),c&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),n==null)break;const{manipulator:o,tool:a}=n;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=t.native.shiftKey;o.events.emit("immediate-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i}),V5(o,i);break}case"click":{const s=gu(t),n=vg(s,t.pointerType,r.forEachTool),o=n?.manipulator;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const s=gu(t),n=vg(s,t.pointerType,r.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),V5(o,i);break}case"immediate-double-click":{const s=gu(t),n=vg(s,t.pointerType,r.forEachTool),o=n!=null?n.manipulator:null;if(o==null||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:s,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),V5(o,i);break}}this._onFocusChange(r.forEachTool)}_releaseManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:r.pointerType,screenPoint:gu(r)}),this._grabbedManipulators.forEach(({manipulator:s},n)=>{s===t&&this._grabbedManipulators.delete(n)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,r){const i=this._grabbedManipulators.get(t.pointerId)?.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:gu(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(r.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=HG(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=HG(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){const r=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:s})=>{r.add(s)}),this._hoveredManipulators.forEach(({tool:s})=>{i.add(s)}),t(s=>{s.hasGrabbedManipulators=r.has(s),s.hasHoveredManipulators=i.has(s);const n=this._grabbedManipulators.values(),o=ohe(n,({tool:a})=>a===s);s.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(t,{forEachTool:r,setActiveTool:i},s=!0,n){const o=(a,l)=>a===t&&(n==null||n===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:u},c)=>{o(a,l)&&(this._grabbedManipulators.delete(c),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._draggedManipulators.delete(u),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),s&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._hoveredManipulators.delete(u),l.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(r)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Cs(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!WG(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(gu(t),t.pointerId,t.pointerType,r)}_updateHoveredStateForPointerAtScreenPosition(t,r,i,s){let n=vg(t,i,s);const o=this._hoveredManipulators.get(r)?.manipulator;n==null||n.manipulator.interactive||(n=null),n!=null&&o===n.manipulator||(o!=null&&(o.hovering=!1),n!=null?(n.manipulator.hovering=!0,this._hoveredManipulators.set(r,n)):this._hoveredManipulators.delete(r),this._onFocusChange(s))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}};function HG(e){let t=null;return YE(e,({manipulator:r})=>!(r==null||!r.interactive)&&(r.grabbing&&r.grabCursor?(t=r.grabCursor,!0):!!r.cursor&&(t=r.cursor,!0))),t}function vg(e,t,r){let i=null;return r(s=>{if(s.manipulators==null||!Vk(s))return!1;const n=s.manipulators.intersect(e,t);return n!=null&&(i={tool:s,manipulator:n},!0)}),i}function WG(e){return e==="mouse"}function JG(e){return e.pointerType!=="mouse"||e.button===0}function NPe(e){return!!e.native.shiftKey}function V5(e,t){e?.consumesClicks&&t()}const ZG="attached",U5="tools",DPe=1e3;let vu=class extends et{constructor(t){super(t),this._updatingHandles=new iy,this._clock=a1,this._manipulatorState=new kPe,this.tools=new qe,this.cursor=null,this._interacting=!1,this._interactingTimeout=DPe,this._interactingTimeoutHandle=null,this._forEachTool=r=>{for(const i of this.tools.items)if(r(i))return}}initialize(){this.addHandles([this.view.on(qie,t=>{this._handleInputEvent(t)},wd.TOOL),...LPe(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void be.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;const r=this.activeTool;this._set("activeTool",t),r?.deactivate(),t?.activate(),this._removeIncompleteTools(t);for(const i of this.tools){this._updateToolEditableFlag(i);const s=Vk(i);this.activeTool!=null&&s||this._manipulatorState.clearPointers(i,this._manipulatorStateEventArgs,!s)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Kr(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([ht(()=>{const{state:t}=this.view;return"camera"in t&&t.camera},()=>this._forEachManipulator(t=>t.onViewChange())),this.view.elevationProvider?.on("elevation-change",t=>this._forEachManipulator(r=>r.onElevationChange(t)))],ZG):this.addHandles(ht(()=>this.view.extent,()=>this._forEachManipulator(t=>t.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(ZG),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(r=>{r.manipulators&&r.manipulators.forEach(({manipulator:i})=>t(i,r))})}_handleInputEvent(t){let r=!1;const i={...t,stopPropagation:()=>{r=!0,t.stopPropagation()}};this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(i):this._forEachTool(s=>{!r&&s.visible&&s.handleInputEvent(i)}),!r&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(i,this._manipulatorStateEventArgs),r||this.activeTool==null||this.activeTool.handleInputEventAfter(i),this._manipulatorState.handleHoverEvent(i,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(U5),this._forEachTool(t=>{if(t instanceof et){const r=ht(()=>[t.cursor,t.visible,t.editable],()=>{Vk(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(r,U5)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",r=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,r.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],U5)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){t.setEditableFlag?.(i2.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(r=>!(r.cursor==null||!r.visible)&&(t=r.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(r=>(t==null||r!==t)&&!r.created&&r.removeIncompleteOnCancel).forEach(r=>{this.tools.remove(r)})}get test(){}};h([d({constructOnly:!0,nonNullable:!0})],vu.prototype,"view",void 0),h([d({value:null})],vu.prototype,"activeTool",null),h([d({readOnly:!0,type:qe})],vu.prototype,"tools",void 0),h([d({readOnly:!0})],vu.prototype,"cursor",void 0),h([d({readOnly:!0})],vu.prototype,"updating",null),h([d()],vu.prototype,"_interacting",void 0),h([d({readOnly:!0})],vu.prototype,"interacting",null),vu=h([j("esri.views.ToolViewManager")],vu);let u0=class extends et{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":FPe.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){const t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return jPe[this.deviceType]}};h([d({nonNullable:!0,readOnly:!0})],u0.prototype,"nativeIndex",void 0),h([d({type:String,readOnly:!0})],u0.prototype,"deviceType",null),h([d({type:Number,readOnly:!0})],u0.prototype,"axisThreshold",null),u0=h([j("esri.views.input.gamepad.GamepadInputDevice")],u0);const nF=u0,FPe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),jPe={standard:.15,spacemouse:.025,unknown:0};let ww=class extends et{constructor(...t){super(...t),this.devices=new qe,this.enabledFocusMode="document"}};h([d({type:qe.ofType(nF),readOnly:!0})],ww.prototype,"devices",void 0),h([d({type:["document","view","none"]})],ww.prototype,"enabledFocusMode",void 0),ww=h([j("esri.views.input.gamepad.GamepadSettings")],ww);const VPe=ww;let o3=class extends et{constructor(){super(...arguments),this.gamepad=new VPe}};h([d({readOnly:!0})],o3.prototype,"gamepad",void 0),o3=h([j("esri.views.input.Input")],o3);const UPe=o3,Kie=()=>Vt.respectPrefersReducedMotion&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let Dp=class extends et{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};h([d({type:Boolean,nonNullable:!0})],Dp.prototype,"enabled",void 0),h([d({type:nF})],Dp.prototype,"device",void 0),h([d({type:["pan","zoom"],nonNullable:!0})],Dp.prototype,"mode",void 0),h([d({type:["forward-down","forward-up"],nonNullable:!0})],Dp.prototype,"tiltDirection",void 0),h([d({type:Number,nonNullable:!0})],Dp.prototype,"velocityFactor",void 0),Dp=h([j("esri.views.navigation.gamepad.GamepadSettings")],Dp);const Xie=Dp;let Sm=class extends et{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new Xie,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!Kie()}};h([d({type:Boolean})],Sm.prototype,"browserTouchPanEnabled",void 0),h([d({type:Xie,nonNullable:!0})],Sm.prototype,"gamepad",void 0),h([d({type:Boolean})],Sm.prototype,"momentumEnabled",void 0),h([d({type:Boolean})],Sm.prototype,"mouseWheelZoomEnabled",void 0),Sm=h([j("esri.views.navigation.Navigation")],Sm);const Qie=Sm;var YG;function zPe(e){if(e.type==="integrated-mesh-3dtiles")return null;const t=e.url?Lh(e.url):void 0;return!(e.spatialReference?.vcsWkid==null&&t!=null&&t.serverType==="ImageServer")&&ese(e)&&e.heightModelInfo?e.heightModelInfo:GPe(e)?BA.deriveUnitFromSR(qPe,e.spatialReference):null}function ese(e){return"heightModelInfo"in e}function tse(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"catalog":case"catalog-footprint":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function GPe(e){return tse(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):rse(e)}function BPe(e){return e.layers!=null||rse(e)||tse(e)||ese(e)}function rse(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(e){e[e.Ok=0]="Ok",e[e.Units=1]="Units",e[e.HeightModel=2]="HeightModel",e[e.CRS=3]="CRS",e[e.Unsupported=4]="Unsupported"})(YG||(YG={}));const qPe=new BA({heightModel:"gravity-related-height"});var RI;(function(e){e[e.Global=1]="Global",e[e.Local=2]="Local"})(RI||(RI={}));let Uk,z5=null;async function HPe(e){z5||(z5=fe(()=>import("./geometryServiceUtils-BlCp-5My.js"),__vite__mapDeps([150,151,1]),import.meta.url).then(t=>Uk=t)),await z5,dr(e)}async function ise(e,t,r,i){if(!e)return null;const s=e.spatialReference;return ef()||ec(s,t)?tf(e,t):Uk?Uk.projectGeometry(e,t,r,i):(await Promise.race([HPe(i),Rd(i)]),ise(e,t,r,i))}let pr=class extends et{constructor(t){super(t),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=O_(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){const t=this.map?.(),r=[];return this.priorityCollection!=null&&r.push(this.priorityCollection),r.push({parent:t?.basemap,layers:t?.basemap?.baseLayers},{layers:t?.layers},{parent:t?.ground,layers:t?.ground?.layers},{parent:t?.basemap,layers:t?.basemap?.referenceLayers}),r}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:t,updating:r}=this._allLayers;let i=null;for(const n of t){const o=this._getSupportedSpatialReferences(n);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(i,o);a!=null&&(i=a)}if(i!=null&&i.length===1)break}if(r&&(i==null||i.length!==1))return{updating:!0};const s=this._pickSpatialReferenceCandidate(i);return{spatialReference:s?.spatialReference??null,viewingMode:s?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:t,updating:r}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(t&&t.length>0&&"tileInfo"in t[0]){const i=t[0].tileInfo;return{tileInfo:i?.spatialReference.equals(this.spatialReference)?i:null,updating:!1}}return{updating:r}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};const{layers:t,updating:r}=this._allLayers;for(const i of t)if(BPe(i)){const s=zPe(i);if(s)return{heightModelInfo:s,vcsWkid:i.spatialReference?.vcsWkid,latestVcsWkid:i.spatialReference?.latestVcsWkid,updating:!1}}return{updating:r}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,r=t.updating,i=[];for(const s of t.layers){const n="fullExtents"in s&&s.fullExtents||(s.fullExtent!=null?[s.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:n[0],a=n.find(l=>l.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:s}],updating:!1};if(this._getSupportedSpatialReferences(s).length>0)for(const l of n)i.push({extent:l,layer:s})}return{candidates:i,updating:r}}get _extentTask(){const{candidates:t,updating:r}=this._extentCandidatesTask;if(r)return{updating:r};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const i=this._pickExtentCandidate(t),s=this.spatialReference;return i.extent.equals(this._projectExtentTask.input)&&s.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=O_(this._projectExtentTask.task)),this._projectExtentTask={input:i.extent.clone(),output:null,spatialReference:s.clone(),task:PD(async n=>{try{const o=await ise(i.extent,s,"portalItem"in i.layer?i.layer.portalItem:void 0,n);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if(Ul(n))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,r){if(t==null)return r;const i=new Array;for(const s of t)for(const n of r){if(!s.spatialReference.equals(n.spatialReference))continue;const o=JPe(s.viewingMode,n.viewingMode);if(o!==!1){i.push({spatialReference:s.spatialReference,viewingMode:o});break}}return i.length>0?i:null}_pickSpatialReferenceCandidate(t){const r=this.defaultSpatialReference;return t==null||t.length<1?r?{spatialReference:r,viewingMode:null}:null:(r!=null&&t.length>1&&t.some(({spatialReference:i})=>i.equals(r))&&(t=t.filter(({spatialReference:i})=>i.equals(r))),t.length>1&&t.some(({viewingMode:i})=>i!==RI.Local)&&(t=t.filter(({viewingMode:i})=>i!==RI.Local)),t[0])}_getSupportedSpatialReferences(t){const r="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(r.length===0)return[];const i=[];for(const s of r){const n=this.getSpatialReferenceSupport(s,t);if(n!=null){const o=n.constraints??[{spatialReference:s,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!a.equals(this.userSpatialReference)||i.push({spatialReference:a,viewingMode:l})}}return i}_pickExtentCandidate(t){const r=this.spatialReference;return t.find(({extent:i})=>r.equals(i.spatialReference))||t[0]}_collectLayers(t){if(this._loadMaybe(this.map?.())!=="loaded")return{layers:[],updating:!0};const r=new WPe;for(const i of t)if(this._collectCollection(i,r),r.preloading===this.sourcePreloadCount)break;return{layers:r.layers,updating:r.updating}}_collectCollection(t,r){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return r.updating=!0,void++r.preloading;case"failed":return}for(const i of t.layers){switch(this._loadMaybe(i)){case"failed":continue;case"loading":r.updating=!0,++r.preloading;break;case"loaded":r.updating||r.layers.push(i),"layers"in i&&this._collectCollection({layers:i.layers},r)}if(r.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(r=>{ws(r)||console.log(r)}),"loading"):t.loadStatus:"loaded"}};h([d()],pr.prototype,"required",void 0),h([d({constructOnly:!0})],pr.prototype,"map",void 0),h([d({constructOnly:!0})],pr.prototype,"getSpatialReferenceSupport",void 0),h([d()],pr.prototype,"defaultSpatialReference",void 0),h([d()],pr.prototype,"userSpatialReference",void 0),h([d()],pr.prototype,"sourcePreloadCount",void 0),h([d()],pr.prototype,"priorityCollection",void 0),h([d()],pr.prototype,"requiresExtentInSpatialReference",void 0),h([d()],pr.prototype,"suspended",void 0),h([d({readOnly:!0})],pr.prototype,"ready",null),h([d({readOnly:!0})],pr.prototype,"heightModelInfoReady",null),h([d({readOnly:!0})],pr.prototype,"spatialReference",null),h([d({readOnly:!0})],pr.prototype,"extent",null),h([d({readOnly:!0})],pr.prototype,"heightModelInfo",null),h([d({readOnly:!0})],pr.prototype,"vcsWkid",null),h([d({readOnly:!0})],pr.prototype,"latestVcsWkid",null),h([d({readOnly:!0})],pr.prototype,"viewingMode",null),h([d({readOnly:!0})],pr.prototype,"tileInfo",null),h([d({readOnly:!0})],pr.prototype,"mapCollections",null),h([d({readOnly:!0})],pr.prototype,"_allLayers",null),h([d({readOnly:!0})],pr.prototype,"_spatialReferenceTask",null),h([d({readOnly:!0})],pr.prototype,"_tileInfoTask",null),h([d({readOnly:!0})],pr.prototype,"_heightModelInfoTask",null),h([d({readOnly:!0})],pr.prototype,"_extentCandidatesTask",null),h([d()],pr.prototype,"_extentTask",null),h([d()],pr.prototype,"_projectExtentTask",void 0),pr=h([j("esri.views.support.DefaultsFromMap")],pr);let WPe=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};function JPe(e,t){return e!=null?t!=null?e===t&&e:e:t}var _w;let tt=_w=class extends jh.EventedMixin(iA(et)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new k2,this.updatingHandles=new iy,this.allLayerViews=new Py({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:YPe}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new ty,this.analyses=new PI,this.typeSpecificPreconditionsReady=!0,this.layerViews=new qe,this.magnifier=new Bie,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new UPe,this.navigation=new Qie,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new wPe(this),this.persistableViewModels=new qe,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(ht(()=>this.preconditionsReady,t=>{const r=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,_w.views.add(this)):(this._lockedSpatialReference=null,_w.views.remove(this)),this.notifyChange("spatialReference"),!t&&r)this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(t&&!r){try{this._startup()}catch(i){return void queueMicrotask(()=>{this.fatalError=new K("startup-error",null,i)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Os))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,C6(()=>this.ready)))),this.basemapView=new Np({view:this}),this.layerViewManager=new fPe({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new vu({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new vPe({view:this}),this.addHandles([ht(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},$a),ht(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Os),ht(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},$a)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([ht(()=>this.defaultsFromMap?.ready,t=>{const r=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&r){if(e!=null)return;const i=or(()=>e=O_(e));e=PD(async s=>{try{await RJ(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{e=null}be.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.addHandles(i,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){this.destroyed||(_w.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=jr(this.graphics),this.analyses=jr(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),jr(this.analysisViewManager),this.toolViewManager=jr(this.toolViewManager),this.layerViewManager=jr(this.layerViewManager),this.selectionManager=jr(this.selectionManager),this.basemapView=jr(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=jr(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return be.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new pr({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Yu.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(be.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Yu.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){const e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){const t=e.clone();return t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,t}return e}set spatialReference(e){const t=!vi(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Xu}set timeZone(e){const t=new Set(["etc/utc","etc/gmt","gmt"]),r=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));this._userTimeZone=e,e===Xu||e===Ty||t.has(e.toLowerCase())||r.has(e.toLowerCase())||be.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new jk}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}importLayerView(e){throw new K("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}async loadAsyncDependencies(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&be.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(Rh(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};tt.views=new qe,h([d()],tt.prototype,"_userSpatialReference",void 0),h([d()],tt.prototype,"activeTool",null),h([d({readOnly:!0})],tt.prototype,"allLayerViews",void 0),h([d()],tt.prototype,"groundView",void 0),h([d()],tt.prototype,"animation",null),h([d()],tt.prototype,"basemapView",void 0),h([d()],tt.prototype,"center",null),h([d({readOnly:!0})],tt.prototype,"_defaultsFromMapSettings",null),h([d()],tt.prototype,"defaultsFromMap",null),h([d()],tt.prototype,"fatalError",void 0),h([d({type:yt})],tt.prototype,"extent",null),h([d(CL(ty,"graphics"))],tt.prototype,"graphics",void 0),h([d(CL(PI,"analyses"))],tt.prototype,"analyses",void 0),h([d({readOnly:!0,type:BA})],tt.prototype,"heightModelInfo",null),h([d({readOnly:!0})],tt.prototype,"interacting",null),h([d({readOnly:!0})],tt.prototype,"navigating",null),h([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],tt.prototype,"preconditionsReady",null),h([d({readOnly:!0})],tt.prototype,"typeSpecificPreconditionsReady",void 0),h([d({type:qe,readOnly:!0})],tt.prototype,"layerViews",void 0),h([d()],tt.prototype,"resolution",null),h([d({type:Bie})],tt.prototype,"magnifier",void 0),h([d({value:null,type:vie})],tt.prototype,"map",null),h([d()],tt.prototype,"padding",void 0),h([d({readOnly:!0})],tt.prototype,"ready",void 0),h([d({type:Fe})],tt.prototype,"spatialReference",null),h([d()],tt.prototype,"spatialReferenceWarningDelay",void 0),h([d()],tt.prototype,"stationary",null),h([d({readOnly:!0})],tt.prototype,"supportsGround",void 0),h([d({type:Bn})],tt.prototype,"timeExtent",void 0),h([d({type:String,nonNullable:!0})],tt.prototype,"timeZone",null),h([d()],tt.prototype,"tools",null),h([d()],tt.prototype,"toolViewManager",void 0),h([d({readOnly:!0})],tt.prototype,"type",void 0),h([d({type:Number})],tt.prototype,"scale",void 0),h([d({readOnly:!0})],tt.prototype,"updating",void 0),h([d({readOnly:!0})],tt.prototype,"initialExtentRequired",void 0),h([d({readOnly:!0})],tt.prototype,"initialExtent",null),h([d()],tt.prototype,"cursor",null),h([d({readOnly:!0})],tt.prototype,"input",void 0),h([d({type:Qie,nonNullable:!0})],tt.prototype,"navigation",void 0),h([d()],tt.prototype,"layerViewManager",void 0),h([d()],tt.prototype,"analysisViewManager",void 0),h([d()],tt.prototype,"selectionManager",void 0),h([d()],tt.prototype,"width",void 0),h([d()],tt.prototype,"height",void 0),h([d({readOnly:!0})],tt.prototype,"resizing",void 0),h([d({value:null,readOnly:!0})],tt.prototype,"size",null),h([d({readOnly:!0})],tt.prototype,"suspended",void 0),h([d({readOnly:!0})],tt.prototype,"viewEvents",void 0),h([d({readOnly:!0})],tt.prototype,"persistableViewModels",void 0),h([d()],tt.prototype,"_isValid",void 0),h([d()],tt.prototype,"_readyCycleForced",void 0),h([d()],tt.prototype,"_lockedSpatialReference",void 0),h([d()],tt.prototype,"_userTimeZone",void 0),h([d()],tt.prototype,"_lockedTimeZone",void 0),h([d({type:jk})],tt.prototype,"theme",void 0),h([d({readOnly:!0,type:jk})],tt.prototype,"effectiveTheme",null),tt=_w=h([j("esri.views.View")],tt);const ZPe=tt;function YPe(e){return e.layerViews}function si(){return[0,0]}function KPe(e){return[e[0],e[1]]}function yS(e,t){return[e,t]}function XPe(e,t=si()){const r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function QPe(e,t){return new Float64Array(e,t,2)}function sse(){return si()}function nse(){return yS(1,1)}function ose(){return yS(1,0)}function ase(){return yS(0,1)}const eRe=sse(),tRe=nse(),rRe=ose(),iRe=ase();Object.freeze(Object.defineProperty({__proto__:null,ONES:tRe,UNIT_X:rRe,UNIT_Y:iRe,ZEROS:eRe,clone:KPe,create:si,createView:QPe,fromArray:XPe,fromValues:yS,ones:nse,unitX:ose,unitY:ase,zeros:sse},Symbol.toStringTag,{value:"Module"}));let Fp=class extends Z3{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=ia(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new K("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(t,r){r||(r=Ud(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",r)}};h([d({readOnly:!0})],Fp.prototype,"done",null),h([d({readOnly:!0,type:String})],Fp.prototype,"state",void 0),h([d()],Fp.prototype,"target",void 0),Fp=h([j("esri.views.ViewAnimation")],Fp),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Fp||(Fp={}));const zk=Fp;function hv(e,t){return e[0]=t[0],e[1]=t[1],e}function fs(e,t,r){return e[0]=t,e[1]=r,e}function lse(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function s2(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function use(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function cse(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function sRe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function nRe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function oRe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function aRe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function lRe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function gS(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function uRe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function a$(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function LI(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function kI(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function hse(e){const t=e[0],r=e[1];return t*t+r*r}function pse(e,t){return e[0]=-t[0],e[1]=-t[1],e}function cRe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function Gk(e,t){const r=t[0],i=t[1];let s=r*r+i*i;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s),e}function dse(e,t){return e[0]*t[0]+e[1]*t[1]}function fse(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function hRe(e,t,r,i){const s=t[0],n=t[1];return e[0]=s+i*(r[0]-s),e[1]=n+i*(r[1]-n),e}function pRe(e,t){t=t||1;const r=2*dA()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function dRe(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s,e[1]=r[1]*i+r[3]*s,e}function $u(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[2]*s+r[4],e[1]=r[1]*i+r[3]*s+r[5],e}function fRe(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[3]*s+r[6],e[1]=r[1]*i+r[4]*s+r[7],e}function mRe(e,t,r){const i=t[0],s=t[1];return e[0]=r[0]*i+r[4]*s+r[12],e[1]=r[1]*i+r[5]*s+r[13],e}function yRe(e,t,r,i){const s=t[0]-r[0],n=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=s*a-n*o+r[0],e[1]=s*o+n*a+r[1],e}function gRe(e,t){const r=e[0],i=e[1],s=t[0],n=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=s*s+n*n;a>0&&(a=1/Math.sqrt(a));const l=(r*s+i*n)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function vRe(e){return"vec2("+e[0]+", "+e[1]+")"}function bRe(e,t){return e[0]===t[0]&&e[1]===t[1]}function wRe(e,t){const r=e[0],i=e[1],s=t[0],n=t[1],o=zn();return Math.abs(r-s)<=o*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-n)<=o*Math.max(1,Math.abs(i),Math.abs(n))}function _Re(e,t,r,i,s){let n=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*n+i[1]*o)*(s-1);return n=i[0]*a,o=i[1]*a,e[0]=t[0]+n,e[1]=t[1]+o,e}const SRe=kI,oF=s2,xRe=use,MRe=cse,TRe=a$,IRe=LI,ERe=hse;Object.freeze(Object.defineProperty({__proto__:null,add:lse,angle:gRe,ceil:sRe,copy:hv,cross:fse,dist:TRe,distance:a$,div:MRe,divide:cse,dot:dse,equals:wRe,exactEquals:bRe,floor:nRe,inverse:cRe,len:SRe,length:kI,lerp:hRe,max:aRe,min:oRe,mul:xRe,multiply:use,negate:pse,normalize:Gk,projectAndScale:_Re,random:pRe,rotate:yRe,round:lRe,scale:gS,scaleAndAdd:uRe,set:fs,sqrDist:IRe,sqrLen:ERe,squaredDistance:LI,squaredLength:hse,str:vRe,sub:oF,subtract:s2,transformMat2:dRe,transformMat2d:$u,transformMat3:fRe,transformMat4:mRe},Symbol.toStringTag,{value:"Module"}));function ARe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function $Re(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function CRe(e,t,r,i,s,n,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e}function aF(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5];let l=r*n-i*s;return l?(l=1/l,e[0]=n*l,e[1]=-i*l,e[2]=-s*l,e[3]=r*l,e[4]=(s*a-n*o)*l,e[5]=(i*o-r*a)*l,e):null}function ORe(e){return e[0]*e[3]-e[1]*e[2]}function mse(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1],p=r[2],f=r[3],m=r[4],g=r[5];return e[0]=i*u+n*c,e[1]=s*u+o*c,e[2]=i*p+n*f,e[3]=s*p+o*f,e[4]=i*m+n*g+a,e[5]=s*m+o*g+l,e}function l$(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=i*c+n*u,e[1]=s*c+o*u,e[2]=i*-u+n*c,e[3]=s*-u+o*c,e[4]=a,e[5]=l,e}function lF(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1];return e[0]=i*u,e[1]=s*u,e[2]=n*c,e[3]=o*c,e[4]=a,e[5]=l,e}function n2(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=r[0],c=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=i*u+n*c+a,e[5]=s*u+o*c+l,e}function yse(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function gse(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function uF(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function PRe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function RRe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function LRe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function vse(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function kRe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function NRe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function DRe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function FRe(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=t[0],u=t[1],c=t[2],p=t[3],f=t[4],m=t[5],g=zn();return Math.abs(r-l)<=g*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-u)<=g*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-c)<=g*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(n-p)<=g*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-f)<=g*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-m)<=g*Math.max(1,Math.abs(a),Math.abs(m))}const jRe=mse,VRe=vse;Object.freeze(Object.defineProperty({__proto__:null,add:LRe,copy:ARe,determinant:ORe,equals:FRe,exactEquals:DRe,frob:RRe,fromRotation:yse,fromScaling:gse,fromTranslation:uF,identity:$Re,invert:aF,mul:jRe,multiply:mse,multiplyScalar:kRe,multiplyScalarAndAdd:NRe,rotate:l$,scale:lF,set:CRe,str:PRe,sub:VRe,subtract:vse,translate:n2},Symbol.toStringTag,{value:"Module"}));function Th(){return[1,0,0,1,0,0]}function URe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function zRe(e,t,r,i,s,n){return[e,t,r,i,s,n]}function GRe(e,t){return new Float64Array(e,t,6)}const BRe=Th();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:BRe,clone:URe,create:Th,createView:GRe,fromValues:zRe},Symbol.toStringTag,{value:"Module"}));const bse=96,wse=39.37,qRe=180/Math.PI;function _se(e){return e.wkid?e:e.spatialReference||Fe.WGS84}function cF(e,t){return t.type?fs(e,t.x,t.y):hv(e,t)}function Sse(e){return Vh(e)}function u$(e,t,r=0){let i=e.width,s=e.height;if(r!==0){const a=H2(r),l=Math.abs(Math.cos(a)),u=Math.abs(Math.sin(a));i=e.width*l+e.height*u,s=e.width*u+e.height*l}const n=Math.max(1,t[0]),o=Math.max(1,t[1]);return Math.max(i/n,s/o)*QRe(e.spatialReference)}async function Sw(e,t,r,i){let s,n;if(!e||Array.isArray(e)&&!e.length)return null;if(qe.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(c=>"attributes"in c),l=e.some(c=>!c.geometry);let u=e;if(a&&l&&t&&t.allLayerViews){const c=new Map;for(const g of e){const b=g.layer,w=c.get(b)||[],S=g.attributes[b.objectIdField];S!=null&&w.push(S),c.set(b,w)}const p=[];c.forEach((g,b)=>{const w=t.allLayerViews.find(S=>S.layer.id===b.id);if(w&&"queryFeatures"in w){const S=b.createQuery();S.objectIds=g,S.returnGeometry=!0,p.push(w.queryFeatures(S))}});const f=await Promise.all(p),m=[];for(const g of f)if(g&&g.features&&g.features.length)for(const b of g.features)b.geometry!=null&&m.push(b.geometry);u=m}for(const c of u)i=await Sw(c,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")s=new je(e);else if(e instanceof uc)s=e;else if("geometry"in e){if(e.geometry)s=e.geometry;else if(e.layer){const a=e.layer,l=t.allLayerViews.find(u=>u.layer.id===a.id);if(l&&"queryFeatures"in l){const u=a.createQuery();u.objectIds=[e.attributes[a.objectIdField]],u.returnGeometry=!0,s=(await l.queryFeatures(u))?.features?.[0]?.geometry}}}if(s==null)return null;switch(s.type){case"point":n=new yt({xmin:s.x,ymin:s.y,xmax:s.x,ymax:s.y,spatialReference:s.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":n=jIe(s);break;default:n=s.extent}if(!n)return null;ef()||ec(n.spatialReference,r)||await Rd();const o=tf(n,r);if(!o)return null;if(i){const a=o.center,l=a.clone();l.x=I8(a.x,i.center.x,r),l.x!==a.x&&o.centerAt(l),i=i.union(o)}else i=o;return i}function HRe(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer?.minScale!=null&&e.layer.maxScale!=null){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,r=0;for(const i of e){const s=i.layer;s?.minScale&&s.maxScale&&(t=s.minScale<t?s.minScale:t,r=s.maxScale>r?s.maxScale:r)}return t&&r?{min:t,max:r}:null}}}function KG(e,t){return vi(_se(e),t)?e:tf(e,t)}async function WRe(e,t){if(!e||!t)return new Nl({targetGeometry:new je,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:s,viewpoint:n,size:o}=t,a=[s?o[0]-s.left-s.right:o[0],s?o[1]-s.top-s.bottom:o[1]];let l=null;e instanceof Nl?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let u=null;l?.targetGeometry?u=l.targetGeometry:e instanceof yt?u=e:e instanceof uc?u=await Sw(e,t,r):e&&(u=await Sw(e.center,t,r)||await Sw(e.target,t,r)||await Sw(e,t,r)),!u&&n?.targetGeometry?u=n.targetGeometry:!u&&t.extent&&(u=t.extent),r||(r=_se(t.spatialReference||t.extent||u)),ef()||vi(u.spatialReference,r)||ec(u.spatialReference,r)||await Rd();const c=KG(u,r),p="center"in c?c.center:c;t.pickClosestTarget!==!1&&p.type==="point"&&n.targetGeometry?.type==="point"&&(p.x=I8(p.x,n.targetGeometry.x,p.spatialReference));let f=0;l?f=l.rotation:e.hasOwnProperty("rotation")?f=e.rotation:n&&(f=n.rotation);let m=0;m=l?.targetGeometry!=null&&l.targetGeometry.type==="point"?l.scale:"scale"in e&&e.scale?e.scale:"zoom"in e&&e.zoom!==-1&&i&&i.effectiveLODs?i.zoomToScale(e.zoom):Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0?n.scale:u$(KG(u.extent,r),a,f);const g=HRe(e.target??e);g&&(g.min&&g.min<m?m=g.min:g.max&&g.max>m&&(m=g.max));let b=new Nl({targetGeometry:p,scale:m,rotation:f});return i&&(b=i.fit(b),i.constrainByGeometry(b),i.rotationEnabled||(b.rotation=n.rotation)),b}function pn(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function JRe(e,t,r){return r?fs(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):gS(e,t,.5)}const ZRe=function(){const e=si();return function(t,r,i){const s=r.targetGeometry;cF(e,s);const n=.5*O1(r);return t.xmin=e[0]-n*i[0],t.ymin=e[1]-n*i[1],t.xmax=e[0]+n*i[0],t.ymax=e[1]+n*i[1],t.spatialReference=s.spatialReference,t}}();function YRe(e,t,r,i,s){return Bk(e,t,r.center),e.scale=u$(r,i),s?.constraints?.constrain(e),e}function KRe(e,t,r,i){return dF(e,t,r,i),aF(e,e)}const xse=function(){const e=si();return function(t,r,i){return oF(t,eLe(t,r),JRe(e,r,i))}}(),XRe=function(){const e=Th(),t=si();return function(r,i,s,n){const o=O1(i),a=hF(i);return fs(t,o,o),gse(e,t),l$(e,e,a),n2(e,e,xse(t,s,n)),n2(e,e,[0,n.top-n.bottom]),fs(r,e[4],e[5])}}();function O1(e){return e.scale*Mse(e.targetGeometry?.spatialReference)}function Mse(e){return e!=null&&Wo(e)?1/(Sse(e)*wse*bse):1}function hF(e){return HD(e.rotation)||0}function QRe(e){return Wo(e)?Sse(e)*wse*bse:1}function eLe(e,t){return gS(e,t,.5)}const pF=function(){const e=si(),t=si(),r=si();return function(i,s,n,o,a,l){return pse(e,s),gS(t,n,.5*l),fs(r,1/o*l,-1/o*l),uF(i,t),a&&l$(i,i,a),lF(i,i,r),n2(i,i,e),i}}(),dF=function(){const e=si();return function(t,r,i,s){const n=O1(r),o=hF(r);return cF(e,r.targetGeometry),pF(t,e,i,n,o,s)}}(),tLe=function(){const e=si();return function(t,r,i,s){const n=O1(r);return cF(e,r.targetGeometry),pF(t,e,i,n,0,s)}}();function Tse(e){const t=Un(e);return t?t.valid[1]-t.valid[0]:0}function rLe(e,t){return Math.round(Tse(e)/t)}const iLe=function(){const e=si(),t=si(),r=[0,0,0];return function(i,s,n){s2(e,i,s),Gk(e,e),s2(t,i,n),Gk(t,t),fse(r,e,t);let o=Math.acos(dse(e,t)/(kI(e)*kI(t)))*qRe;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),sLe=function(){const e=si();return function(t,r,i,s){const n=t.targetGeometry;return pn(t,r),XRe(e,r,i,s),n.x+=e[0],n.y+=e[1],t}}(),Bk=function(e,t,r){pn(e,t);const i=e.targetGeometry;return i.x=r.x,i.y=r.y,i.spatialReference=r.spatialReference,e},nLe=function(){const e=si();return function(t,r,i,s,n){n||(n="center"),oF(e,i,s),gS(e,e,.5);const o=e[0],a=e[1];switch(n){case"center":fs(e,0,0);break;case"left":fs(e,-o,0);break;case"top":fs(e,0,a);break;case"right":fs(e,o,0);break;case"bottom":fs(e,0,-a);break;case"top-left":fs(e,-o,a);break;case"bottom-left":fs(e,-o,-a);break;case"top-right":fs(e,o,a);break;case"bottom-right":fs(e,o,-a)}return c$(t,r,e),t}}();function lut(e,t,r){return pn(e,t),e.rotation+=r,e}function oLe(e,t,r){return pn(e,t),e.rotation=r,e}const aLe=function(){const e=si();return function(t,r,i,s,n){return pn(t,r),isNaN(i)||i===0||(Ese(e,s,r,n),t.scale=r.scale*i,Ase(e,e,t,n),c$(t,t,fs(e,e[0]-s[0],s[1]-e[1]))),t}}();function XG(e,t,r){return pn(e,t),e.scale=r,e}const Ise=function(){const e=si();return function(t,r,i,s,n,o){return pn(t,r),isNaN(i)||i===0||(Ese(e,n,r,o),t.scale=r.scale*i,t.rotation+=s,Ase(e,e,t,o),c$(t,t,fs(e,e[0]-n[0],n[1]-e[1]))),t}}(),uut=function(){const e=si(),t=si();return function(r,i,s,n,o,a,l){return xse(t,a,l),lse(e,o,t),n?Ise(r,i,s,n,e,a):aLe(r,i,s,e,a)}}(),Ese=function(){const e=Th();return function(t,r,i,s){return $u(t,r,KRe(e,i,s,1))}}(),Ase=function(){const e=Th();return function(t,r,i,s){return $u(t,r,dF(e,i,s,1))}}(),c$=function(){const e=si(),t=Th();return function(r,i,s){pn(r,i);const n=O1(i),o=r.targetGeometry;return yse(t,hF(i)),lF(t,t,yS(n,n)),$u(e,s,t),o.x+=e[0],o.y+=e[1],r}}();function $se(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function lLe(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function uLe(e,t,r,i,s,n){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=s,o[5]=n,o}function cLe(e,t){return new Float32Array(e,t,6)}function Cse(e,t,r,i){const s=t[i],n=t[i+1];e[i]=r[0]*s+r[2]*n+r[4],e[i+1]=r[1]*s+r[3]*n+r[5]}function hLe(e,t,r,i=0,s=0,n=2){const o=s||t.length/n;for(let a=i;a<o;a++)Cse(e,t,r,a*n)}Object.freeze(Object.defineProperty({__proto__:null,clone:lLe,create:$se,createView:cLe,fromValues:uLe,transform:Cse,transformMany:hLe},Symbol.toStringTag,{value:"Module"}));function pLe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function dLe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ose(e,t,r,i,s,n,o,a,l,u){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e[4]=n,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e}function Pse(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function fLe(e,t){if(e===t){const r=t[1],i=t[2],s=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=s}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function mLe(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],p=c*o-a*u,f=-c*n+a*l,m=u*n-o*l;let g=r*p+i*f+s*m;return g?(g=1/g,e[0]=p*g,e[1]=(-c*i+s*u)*g,e[2]=(a*i-s*o)*g,e[3]=f*g,e[4]=(c*r-s*l)*g,e[5]=(-a*r+s*n)*g,e[6]=m*g,e[7]=(-u*r+i*l)*g,e[8]=(o*r-i*n)*g,e):null}function yLe(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-a*u,e[1]=s*u-i*c,e[2]=i*a-s*o,e[3]=a*l-n*c,e[4]=r*c-s*l,e[5]=s*n-r*a,e[6]=n*u-o*l,e[7]=i*l-r*u,e[8]=r*o-i*n,e}function gLe(e){const t=e[0],r=e[1],i=e[2],s=e[3],n=e[4],o=e[5],a=e[6],l=e[7],u=e[8];return t*(u*n-o*l)+r*(-u*s+o*a)+i*(l*s-n*a)}function fF(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=r[0],m=r[1],g=r[2],b=r[3],w=r[4],S=r[5],M=r[6],x=r[7],_=r[8];return e[0]=f*i+m*o+g*u,e[1]=f*s+m*a+g*c,e[2]=f*n+m*l+g*p,e[3]=b*i+w*o+S*u,e[4]=b*s+w*a+S*c,e[5]=b*n+w*l+S*p,e[6]=M*i+x*o+_*u,e[7]=M*s+x*a+_*c,e[8]=M*n+x*l+_*p,e}function qk(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=r[0],m=r[1];return e[0]=i,e[1]=s,e[2]=n,e[3]=o,e[4]=a,e[5]=l,e[6]=f*i+m*o+u,e[7]=f*s+m*a+c,e[8]=f*n+m*l+p,e}function Rse(e,t,r){const i=t[0],s=t[1],n=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=Math.sin(r),m=Math.cos(r);return e[0]=m*i+f*o,e[1]=m*s+f*a,e[2]=m*n+f*l,e[3]=m*o-f*i,e[4]=m*a-f*s,e[5]=m*l-f*n,e[6]=u,e[7]=c,e[8]=p,e}function vLe(e,t,r){const i=r[0],s=r[1],n=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e[6]=n*t[6],e[7]=n*t[7],e[8]=n*t[8],e}function bLe(e,t,r){const i=r[0],s=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=s*t[3],e[4]=s*t[4],e[5]=s*t[5],e}function wLe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function _Le(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function SLe(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function xLe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function MLe(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=r+r,a=i+i,l=s+s,u=r*o,c=i*o,p=i*a,f=s*o,m=s*a,g=s*l,b=n*o,w=n*a,S=n*l;return e[0]=1-p-g,e[3]=c-S,e[6]=f+w,e[1]=c+S,e[4]=1-u-g,e[7]=m-b,e[2]=f-w,e[5]=m+b,e[8]=1-u-p,e}function TLe(e,t){const r=t[0],i=t[1],s=t[2],n=t[4],o=t[5],a=t[6],l=t[8],u=t[9],c=t[10],p=c*o-a*u,f=-c*n+a*l,m=u*n-o*l,g=r*p+i*f+s*m;if(!g)return null;const b=1/g;return e[0]=p*b,e[1]=(-c*i+s*u)*b,e[2]=(a*i-s*o)*b,e[3]=f*b,e[4]=(c*r-s*l)*b,e[5]=(-a*r+s*n)*b,e[6]=m*b,e[7]=(-u*r+i*l)*b,e[8]=(o*r-i*n)*b,e}function ILe(e,t){const r=t[0],i=t[1],s=t[2],n=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],p=t[9],f=t[10],m=t[11],g=t[12],b=t[13],w=t[14],S=t[15],M=r*a-i*o,x=r*l-s*o,_=r*u-n*o,I=i*l-s*a,E=i*u-n*a,A=s*u-n*l,C=c*b-p*g,O=c*w-f*g,R=c*S-m*g,D=p*w-f*b,N=p*S-m*b,U=f*S-m*w;let J=M*U-x*N+_*D+I*R-E*O+A*C;return J?(J=1/J,e[0]=(a*U-l*N+u*D)*J,e[1]=(l*R-o*U-u*O)*J,e[2]=(o*N-a*R+u*C)*J,e[3]=(s*N-i*U-n*D)*J,e[4]=(r*U-s*R+n*O)*J,e[5]=(i*R-r*N-n*C)*J,e[6]=(b*A-w*E+S*I)*J,e[7]=(w*_-g*A-S*x)*J,e[8]=(g*E-b*_+S*M)*J,e):null}function ELe(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function ALe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function $Le(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function CLe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function Lse(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function OLe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function PLe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function RLe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function LLe(e,t){const r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],p=t[0],f=t[1],m=t[2],g=t[3],b=t[4],w=t[5],S=t[6],M=t[7],x=t[8],_=zn();return Math.abs(r-p)<=_*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(i-f)<=_*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-m)<=_*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(n-g)<=_*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-b)<=_*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-w)<=_*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(l-S)<=_*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-M)<=_*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-x)<=_*Math.max(1,Math.abs(c),Math.abs(x))}function kLe(e){const t=zn(),r=e[0],i=e[1],s=e[2],n=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return Math.abs(1-(r*r+n*n+l*l))<=t&&Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(s*s+a*a+c*c))<=t}const NLe=fF,DLe=Lse;Object.freeze(Object.defineProperty({__proto__:null,add:CLe,adjoint:yLe,copy:dLe,determinant:gLe,equals:LLe,exactEquals:RLe,frob:$Le,fromMat2d:xLe,fromMat4:pLe,fromQuat:MLe,fromRotation:_Le,fromScaling:SLe,fromTranslation:wLe,identity:Pse,invert:mLe,isOrthoNormal:kLe,mul:NLe,multiply:fF,multiplyScalar:OLe,multiplyScalarAndAdd:PLe,normalFromMat4:ILe,normalFromMat4Legacy:TLe,projection:ELe,rotate:Rse,scale:vLe,scaleByVec2:bLe,set:Ose,str:ALe,sub:DLe,subtract:Lse,translate:qk,transpose:fLe},Symbol.toStringTag,{value:"Module"}));function a3(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function FLe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function jLe(e,t,r,i,s,n,o,a,l){const u=new Float32Array(9);return u[0]=e,u[1]=t,u[2]=r,u[3]=i,u[4]=s,u[5]=n,u[6]=o,u[7]=a,u[8]=l,u}function VLe(e,t){return new Float32Array(e,t,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:FLe,create:a3,createView:VLe,fromValues:jLe},Symbol.toStringTag,{value:"Module"}));function kse(){return new Float32Array(2)}function ULe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function Fv(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function zLe(e,t){return new Float32Array(e,t,2)}function Nse(){return kse()}function Dse(){return Fv(1,1)}function Fse(){return Fv(1,0)}function jse(){return Fv(0,1)}const GLe=Nse(),BLe=Dse(),qLe=Fse(),HLe=jse();Object.freeze(Object.defineProperty({__proto__:null,ONES:BLe,UNIT_X:qLe,UNIT_Y:HLe,ZEROS:GLe,clone:ULe,create:kse,createView:zLe,fromValues:Fv,ones:Dse,unitX:Fse,unitY:jse,zeros:Nse},Symbol.toStringTag,{value:"Module"}));function WLe(e){return e instanceof Float32Array&&e.length>=2}function JLe(e){return Array.isArray(e)&&e.length>=2}function G5(e){return WLe(e)||JLe(e)}var Hk;const _c=[0,0];let jp=Hk=class extends ue{constructor(e){super(e),this._viewpoint2D={center:si(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new yt,this.id=0,this.inverseTransform=Th(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Th(),this.transformNoRotation=Th(),this.displayMat3=a3(),this.displayViewMat3=a3(),this.viewMat3=a3(),this.viewMat2d=$se(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=pn(r,e.viewpoint),this._set("size",hv(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new Hk({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return G5(t)?$u(e,t,this.inverseTransform):(_c[0]=t,_c[1]=r,$u(e,_c,this.inverseTransform))}toScreen(e,t,r){return G5(t)?$u(e,t,this.transform):(_c[0]=t,_c[1]=r,$u(e,_c,this.transform))}toScreenNoRotation(e,t,r){return G5(t)?$u(e,t,this.transformNoRotation):(_c[0]=t,_c[1]=r,$u(e,_c,this.transformNoRotation))}wrapMapCoordinate(e,t){hv(e,t);const[r]=t,[i]=this.center,{extent:s,spatialReference:n}=this;let{xmin:o,xmax:a}=s;if(n.isWrappable){const l=Tse(n)/2;o=Math.max(o,i-l),a=Math.min(a,i+l)}return(r<o||r>a)&&(e[0]=I8(r,i,n)),e}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,s=this._get("size");return pF(e,r,s,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,s=this._get("pixelRatio")||1,n=this._get("size"),o=new Nl({targetGeometry:new je(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!n||!t||!r)return;this.resolution=O1(o),this.rotation=i,this.scale=r,this.spatialReference=t,hv(this.center,e);const a=n[0]!==0?2/n[0]:0,l=n[1]!==0?-2/n[1]:0;Ose(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=Pse(this.viewMat3),c=Fv(n[0]/2,n[1]/2),p=Fv(-n[0]/2,-n[1]/2),f=HD(i);qk(u,u,c),Rse(u,u,f),qk(u,u,p),fF(this.displayViewMat3,this.displayMat3,u);const m=uF(this.viewMat2d,c);return l$(m,m,f),n2(m,m,p),ZRe(this.extent,o,n),dF(this.transform,o,n,s),aF(this.inverseTransform,this.transform),tLe(this.transformNoRotation,o,n,s),this.worldScreenWidth=rLe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};h([d({readOnly:!0})],jp.prototype,"id",void 0),h([d({value:1,json:{write:!0}})],jp.prototype,"pixelRatio",null),h([d({json:{write:!0}})],jp.prototype,"size",null),h([d()],jp.prototype,"spatialReference",void 0),h([d({type:Nl,json:{write:!0}})],jp.prototype,"viewpoint",null),jp=Hk=h([j("esri.views.2d.ViewState")],jp);const QG=jp;var Wk,Jk;let ph=Wk=class extends et{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Wk({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};h([d()],ph.prototype,"left",void 0),h([d()],ph.prototype,"top",void 0),h([d()],ph.prototype,"right",void 0),h([d()],ph.prototype,"bottom",void 0),ph=Wk=h([j("esri.views.2d.PaddedViewState.Padding")],ph);let c0=Jk=class extends QG{constructor(...e){super(...e),this.paddedViewState=new QG,this._updateContent=(()=>{const t=si();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const s=this.paddedViewState;fs(t,i.left+i.right,i.top+i.bottom),s2(t,r,t),hv(s.size,t);const n=s.viewpoint;n&&(this.viewpoint=n)}})(),this.addHandles(ht(()=>[this.size,this.padding],()=>this._updateContent(),Os)),this.padding=new ph,this.size=[0,0]}set padding(e){this._set("padding",e||new ph)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;const t=this._viewpoint2D;if(this._get("padding")){const r=e.clone();sLe(r,e,this._get("size"),this._get("padding"));const i=r.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=r.rotation,t.scale=r.scale,t.spatialReference=i.spatialReference}else{const r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}}clone(){return new Jk({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};h([d()],c0.prototype,"paddedViewState",void 0),h([d({type:ph})],c0.prototype,"padding",null),h([d()],c0.prototype,"viewpoint",null),c0=Jk=h([j("esri.views.2d.PaddedViewState")],c0);const mF=c0;function km(e,t,r,i){const s=3*e,n=3*(r-e)-s,o=1-s-n,a=3*t,l=3*(i-t)-a,u=1-a-l;function c(g){return((o*g+n)*g+s)*g}function p(g){return((u*g+l)*g+a)*g}function f(g){return(3*o*g+2*n)*g+s}function m(g,b){let w,S,M,x,_,I;for(M=g,I=0;I<8;I++){if(x=c(M)-g,Math.abs(x)<b)return M;if(_=f(M),Math.abs(_)<1e-6)break;M-=x/_}if(w=0,S=1,M=g,M<w)return w;if(M>S)return S;for(;w<S;){if(x=c(M),Math.abs(x-g)<b)return M;g>x?w=M:S=M,M=.5*(S-w)+w}return M}return function(g,b=1e-6){return p(m(g,b))}}const ZLe=/^cubic-bezier\((.*)\)/,xu={};function YLe(e){let t=xu[e]||null;if(!t){const r=ZLe.exec(e);if(r){const i=r[1].split(",").map(s=>parseFloat(s.trim()));i.length!==4||i.some(s=>isNaN(s))||(t=km.apply(km,i))}}return t}xu.ease=km(.25,.1,.25,1),xu.linear=km(0,0,1,1),xu.easeIn=xu["ease-in"]=km(.42,0,1,1),xu.easeOut=xu["ease-out"]=km(0,0,.58,1),xu.easeInOut=xu["ease-in-out"]=km(.42,0,.58,1);let eB=class{constructor(t){this._view=t,this.viewpoint=new Nl({targetGeometry:new je,scale:0,rotation:0})}get view(){return this._view}get size(){const[t,r]=this._view.size;return Math.sqrt(t*t+r*r)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return Mse(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotateAtZoom(t){return this.size/2}compareTo(t,r){r.pan=YZ(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,r.rotate=H2(i),r.sourceZoom=this.scale,r.targetZoom=t.scale}interpolate(t,r,i){const{pan:s,rotate:n,zoom:o,zoomOffset:a}=i,{center:l}=this;l.spatialReference=t.center.spatialReference,l.x=$b(t.center.x,r.center.x,s),l.y=$b(t.center.y,r.center.y,s),this.viewpoint.scale=$b(t.scale,r.scale+a,o);let u=t.rotation;const c=r.rotation;Math.abs(c-u)>=180&&(u+=360*(u<c?1:-1)),this.viewpoint.rotation=$b(u,c,n)}copyFrom(t){pn(this.viewpoint,t.viewpoint),this._view=t.view}};const Vse=e=>e*e,KLe=e=>1-Vse(1-e),XLe=e=>2**(10*(e-1)),QLe=e=>1-XLe(1-e);function eke(e){const t=2*(e-Math.sqrt((e-1)*e)),r=t/2/e;return i=>i<r?e*i*i:t*i-t+1}function tke(e,t){return(r,i)=>r<t?t*e(r/t,i):1-e((1-r)/(1-t),i)*(1-t)}const tB=tke(eke(1),.5);let rke=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};const o2={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Use={...o2,maxDuration:4e3};let ike=class zse{constructor(t){this._createCamera=t,this.compared=new rke,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:o2.desiredScreenFlow},this.source=t(),this.target=t()}clone(){const t=new zse(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,r,i){this.source!==t&&this.source.copyFrom(t),this.target!==r&&this.target.copyFrom(r),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow!=null?i.desiredScreenFlow:o2.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){const r=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/r}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>zn()}get hasFov(){return Math.abs(this.compared.fov)>zn()}get hasRotate(){return this.compared.rotate>zn()}},ske=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}},nke=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((t,r)=>t+r.time,0)}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),t*=this.time;let i=0,s=0;const n=this.definition,o=this.segments.reduce((a,l)=>a||l.definition.hasZoom,!1);for(let a=0;a<this.segments.length;a++){const l=this.segments[a],u=l.definition;if(t<=l.time||a===this.segments.length-1){if(this.segmentInterpolateComponentsAt(l,l.time===0?0:t/l.time,r),n.hasPan&&!isNaN(r.pan)&&isFinite(n.compared.pan)?r.pan=(i+u.compared.pan*r.pan)/n.compared.pan:r.pan=1,n.hasRotate&&!isNaN(r.rotate)&&isFinite(n.compared.rotate)?r.rotate=(s+u.compared.rotate*r.rotate)/n.compared.rotate:r.rotate=1,o&&!isNaN(r.zoom)&&isFinite(u.compared.targetZoom)){const{sourceZoom:c,targetZoom:p}=u.compared,f=r.zoom*(p-c)+c,m=this.segments[0].definition.compared.sourceZoom,g=this.segments[this.segments.length-1].definition.compared.targetZoom,b=Math.abs(p-m)>Math.abs(c-m)?p:c;r.zoomOffset=b-g,r.zoom=(f-m)/(b-m)}else r.zoom=1;return r}t-=l.time,i+=u.compared.pan,s+=u.compared.rotate}}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i)}},B5=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){const t=this.definition,r=t.compared,i=r.sourceZoom,s=r.targetZoom;this._zoomSign=i>s?1:-1,this._panPixelsAtSource=r.pan*t.source.pixelsPerPanAtZoom(i);const n=(t.source.pixelsPerRotateAtZoom(i)+t.target.pixelsPerRotateAtZoom(s))/2;this._rotatePixels=r.rotate*n}_updatePixelFlow(){const t=this.definition.compared.sourceZoom,r=this.definition.compared.targetZoom,{hasZoom:i,hasPan:s,hasRotate:n}=this.definition;let o=0,a=0;i&&(s&&(o=(r/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),n&&(a=this._zoomSign*(Math.log(t/r)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;const l=this.definition.desiredPixelFlow;if(i&&s&&n){const u=o+a+o*a;this._zoomPixelFlow=o*a/u*l,this._panPixelFlow=a/u*l,this._rotatePixelFlow=o/u*l}else if(i&&s){const u=1+o;this._zoomPixelFlow=o/u*l,this._panPixelFlow=1/u*l}else if(i&&n){const u=1+a;this._zoomPixelFlow=a/u*l,this._rotatePixelFlow=1/u*l}else if(s&&n){const u=this._panPixelsAtSource/this._rotatePixels,c=1+u;this._panPixelFlow=u/c*l,this._rotatePixelFlow=1/c*l}else s?this._panPixelFlow=l:i?this._zoomPixelFlow=l:n&&(this._rotatePixelFlow=l);this._time=this.rotateTime??this.zoomTime??this.panTime??this.fovTime??0}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:null}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:null}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/oke:null}get panTime(){if(this.definition.hasPan){if(this.definition.hasZoom){const t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,r=t*this._panPixelsAtSource;return Math.log(r*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){const r=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(r*(r/i)**-t-r)/(i-r)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){const{segmentStart:r,segmentEnd:i}=this.definition;return r+t*(i-r)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){const r=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(r*t*this._time)-1))/(r*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,r){t=Math.min(Math.max(t,0),1),r.zoom=this._interpolateComponentsZoom(t),r.pan=this._interpolateComponentsPan(t),r.rotate=this._interpolateComponentsRotate(t),r.zoomOffset=0,r.fov=this._interpolateComponentsFov(t)}};const oke=H2(90);function ake(e,t,r){const i=t-e.compared.sourceZoom,s=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(r.ascensionFactor*Math.LN2*e.compared.pan+s)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*s)}function lke(e,t,r){const i=1/t,s=Math.log(e.compared.sourceZoom*i),n=1/e.desiredPixelFlow,o=1/Math.LN2,a=t-e.compared.sourceZoom,l=1/a,u=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*n*o*l*u-e.halfWindowSize*s*n*o*l+e.halfWindowSize*s*n*o*u/(a*a)}function uke(e,t,r){const i=t-e.compared.sourceZoom,s=1/i,n=1/t,o=Math.log(e.compared.sourceZoom*n),a=(r.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a+2*s*o+2*n-2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function cke(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function hke(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function pke(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function dke(e,t,r){return-e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function fke(e,t,r){return e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function mke(e,t,r){return-2*e.compared.pan*e.halfWindowSize*(r.ascensionFactor+r.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function yke(e,t,r){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function gke(e,t,r){const i=Math.log(t/e.compared.targetZoom),s=1/e.desiredPixelFlow,n=1/Math.LN2,o=-t+e.compared.targetZoom,a=1/o,l=(-e.halfWindowPanAtZoom(t)-r.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*s*n*a+e.halfWindowSize*i*s*n*l/(o*o)+e.halfWindowSize*s*n*a*l/t}function vke(e,t,r){const i=t-e.compared.targetZoom,s=1/i,n=1/t,o=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+r.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*s*(-2*s*n*a-2*s*o+2*n+2*o*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function bke(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function wke(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function _ke(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Ske(e){const t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));const r=Math.LN2*e.compared.pan,i=t,s=e.halfWindowPanAtZoom(i),n=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*s);return e.compared.sourceZoom<=e.compared.targetZoom?n*(r-s):n*(r+s)}function xke(e,t){let r=Mke(e,t);const i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},s=i.ascensionFactor===0,n=i.descensionFactor===0,o=s?cke:ake,a=s?hke:lke,l=s?pke:uke,u=n?bke:yke,c=n?wke:gke,p=n?_ke:vke,f=_=>o(e,_,i)+dke(e,_,i)+u(e,_,i),m=_=>a(e,_,i)+fke(e,_,i)+c(e,_,i),g=_=>l(e,_,i)+mke(e,_,i)+p(e,_,i);let b=f(r);const w=Ske(e);let S;const M=t.maximumIterations||20,x=t.maximumDistance!=null?t.maximumDistance:1/0;for(S=0;S<M;S++){const _=t.desiredSlope??1e-6;let I=m(r);Math.abs(I)>_&&(I+=_);const E=I/g(r);if(isNaN(E)||r>=x&&E<0){if(!isFinite(x))return null;r=x,b=f(r);break}if(r-=E,r<e.compared.sourceZoom||r<e.compared.targetZoom)return null;const A=f(r);if(Math.abs(A-b)/b<=.005)break;b=A}return b>w*(1-.3)||r<e.compared.sourceZoom||r<e.compared.targetZoom?null:r}function Mke(e,t){const r=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<r?t.maximumDistance!=null?r+(t.maximumDistance-r)/2:1.5*r:t.maximumDistance?Math.min(t.maximumDistance,i):i}let Tke=class extends nke{constructor(t,r){super(),this._preallocSegments=[new B5,new B5,new B5],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,r)}update(t,r){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();const i=r?.apex?xke(t,r.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,r?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,r,i){t.interpolateComponentsAt(r,i),t===this._ascensionSegment?i.zoom=KLe(i.zoom):t===this._descensionSegment&&(i.zoom=Vse(i.zoom))}_updateWithApex(t,r){const[i,s,n]=this._preallocSegments,o=r?.ascensionFactor??.5,a=Math.min(1-o,r?.ascensionFactor!=null&&r.descensionFactor!=null?r.descensionFactor:.5),l=1-o-a;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*o,i.definition.compared.rotate=this.definition.compared.rotate*o,i.definition.segmentEnd=o,i.update(),this._ascensionSegment=i,this.segments.push(i),l>0&&(s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.copyFrom(this.definition),s.definition.compared.sourceZoom=t,s.definition.compared.targetZoom=t,s.definition.compared.pan=this.definition.compared.pan*l,s.definition.compared.rotate=this.definition.compared.rotate*l,s.definition.segmentStart=i.definition.segmentEnd,s.definition.segmentEnd=i.definition.segmentEnd+l,s.update(),this.segments.push(s)),n.definition?n.definition.copyFrom(this.definition):n.definition=this.definition.clone(),n.definition.compared.sourceZoom=t,n.definition.compared.pan=this.definition.compared.pan*a,n.definition.compared.rotate=this.definition.compared.rotate*a,n.definition.segmentStart=o+l,n.update(),this._descensionSegment=n,this.segments.push(n)}_updateWithoutApex(){const[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};const Ike=new ske;let Eke=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(t){this._time=0,this._easing=tB,this.definition=new ike(t),this.path=new Tke}update(t,r,i){this.definition.update(t,r,i),this.path.update(this.definition,i),this._time=this._applyTimeSettings(jhe(isFinite(this.path.time)?this.path.time:0),i),this._easing=i.easing??(this._time>=1e3?tB:QLe)}cameraAt(t,r){t=Math.min(Math.max(0,t),1),t=this._normalizedEasing(t);const i=this.path.interpolateComponentsAt(t,Ike);r.interpolate(this.definition.source,this.definition.target,i)}_normalizedEasing(t){const r=this._easing(0,this._time),i=this._easing(1,this._time);return(this._easing(t,this._time)-r)/(i-r)}_applyTimeSettings(t,r){const i=r.speedFactor!=null?r.speedFactor:1,s=r.minDuration??o2.minDuration/i,n=r.maxDuration??o2.maxDuration/i;return t=r.duration!=null?r.duration:Math.min(Math.max(t/i,s),n)}};const rB=2e3,Ake=64;let $ke=class{constructor(t){this._view=t,this._animation=new Eke(()=>new eB(this._view)),this._current=new eB(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,r,i={}){pn(this._current.viewpoint,t),pn(this._source.viewpoint,t),pn(this._target.viewpoint,r),this._animation.update(this._source,this._target,i)}applyRatio(t,r){this._animation.cameraAt(r,this._current),pn(t,this._current.viewpoint)}},h0=class extends et{constructor(t){super(t),this._animation=null,this._destinationViewState=new mF,this.updateFunction=null,this.easing=xu.ease,this.viewpoint=new Nl({targetGeometry:new je,scale:0,rotation:0}),this._updateTask=_v({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new $ke(t.view)}destroy(){this._updateTask=Kr(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view.animation=t}animate(t,r,i){this.stop();const s=this.viewpoint;pn(s,r);const n=(typeof i?.easing=="string"?YLe(i.easing):i?.easing)||this.easing,o=t.target;this._transition.update(this.viewpoint,o,{apex:{maximumDistance:Math.min(Math.min(r.scale,o.scale)*Ake,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:i?.duration,maxDuration:i?.animationMode==="auto"?1/0:i?.maxDuration??Use.maxDuration,speedFactor:i?.speedFactor,easing:typeof n=="function"?l=>n(l):void 0}),i?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=o,Cke(this._transition.animation,i,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,o,{duration:0}));const a=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(a,a),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinuous(t,r){this.stop(),this.updateFunction=r,this.viewpoint=t;const i=new zk({target:t.clone()}),s=()=>{this.animation===i&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return i.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=i,i}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){const r=this.animation;if(r&&r.state!==zk.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime),this.animation?.update(this.viewpoint);else{const i=performance.now()-this._startTime,s=this._transition.duration,n=s>0?i/s:1,o=n>=1;this._transition.applyRatio(this.viewpoint,n),o&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function Cke(e,t,r,i){if(t?.duration!=null)return!0;const{time:s,isLinear:n}=e,o=t?.speedFactor||1,a=t?.maxDuration??Use.maxDuration/o;if(ce("esri-goto-debug")&&(console.log("speed factor:",o),console.log("adjusted duration:		",s),console.log("adjusted max duration:	",a),console.log("is linear:",n)),s>a)return ce("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(n){const u=si(),c=Cs(...i.toScreen(u,...r.center)),p=Cs(...r.toScreen(u,...i.center)),f=p!=null&&p.x>-(1.5-.5)*r.size[0]&&p.x<(1.5+.5)*r.size[0]&&p.y>-(1.5-.5)*r.size[1]&&p.y<(1.5+.5)*r.size[1],m=c!=null&&c.x>-(1.5-.5)*i.size[0]&&c.x<(1.5+.5)*i.size[0]&&c.y>-(1.5-.5)*i.size[1]&&c.y<(1.5+.5)*i.size[1];if(ce("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,f),console.log(`start is within ${1.5} screens at dest view:`,m)),s>rB/o&&!f&&!m)return ce("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${rB/1e3/o}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}h([d()],h0.prototype,"easing",void 0),h([d()],h0.prototype,"view",void 0),h([d()],h0.prototype,"viewpoint",void 0),h0=h([j("esri.views.2d.AnimationManager")],h0);const Oke=h0;let Pke=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation&&!("then"in this.view.animation.target)&&(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=()=>{if(this._updateRequested=!1,this.view?.destroyed)return;const{allLayerViews:r,graphicsView:i,labelManager:s,state:{id:n}}=this.view;r.forEach(this._updateLayerView,this),s!=null&&(s.lastUpdateId!==n&&(s.viewChange(),s.lastUpdateId=n),s.updateRequested&&s.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==n&&(i.viewChange(),i.lastUpdateId=n),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new mF,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=ht(()=>t.stationary,r=>{this.stationary=r,this.requestFrame()}),this._frameTaskHandle=_v(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews?.forEach(this._updateLayerView,this)}},l3=class extends et{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(t,r){if(!t)return void be.getLogger(this).error("#goTo()","target cannot be null or undefined");const i=new zk;this.view.animation=i,await C6(()=>this.view.ready,r);const s={...r,animate:r?.animate??!Kie(),animationMode:r?.animationMode??"auto"},{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:c,allLayerViews:p}=this.view,f=WRe(t,{extent:n,spatialReference:o,size:a,viewpoint:l,constraints:u,padding:c,allLayerViews:p,pickClosestTarget:r?.pickClosestTarget??!0});return i?.update(f),this._gotoTask={},s.animate?this._gotoAnimated(f,s):this._gotoImmediate(f,s)}_gotoImmediate(t,r){const i=this._gotoTask,s=this.view.animation,n=t.then(o=>{if(dr(r),i!==this._gotoTask)throw new K("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=s.target=o,s.finish()});return this._cancellableGoTo(i,s,n,r)}_gotoAnimated(t,r){const i=this._gotoTask,s=this.view.animation;if(!s)return Promise.resolve();const n=t.then(o=>{if(dr(r),i!==this._gotoTask)throw new K("view:goto-interrupted","Goto was interrupted");return s.update(o),this.view.animationManager.animate(s,this.view.viewpoint,r),s.when().then(()=>{},()=>{})});return this._cancellableGoTo(i,s,n,r)}_cancellableGoTo(t,r,i,s){const n=()=>t===this._gotoTask;return wu(i,s).finally(()=>{n()&&(r.done||r.stop())})}};h([d({constructOnly:!0})],l3.prototype,"view",void 0),l3=h([j("esri.views.2d.GoToManager")],l3);function Ar(){return Promise.all([fe(()=>import("./webglDeps-D6JzrBv5.js"),__vite__mapDeps([152,73,72,45,153,154,1]),import.meta.url),fe(()=>import("./mapViewDeps-C0zfIe5e.js"),__vite__mapDeps([155,74,75,76,71,68,77,70,72,45,73,46,78,40,79,156,106,82,83,1,84,85,157,158,154,93,115,114,113,152,153,159,88,160,69,12,32,20,161,162,163,108,164,138,165,166,86,167,81,168,169,170,171,172,173,174]),import.meta.url)])}const fb=()=>Ar().then(()=>fe(()=>import("./TileLayerView2D-Df4ZIL2J.js"),__vite__mapDeps([175,76,74,75,71,68,77,70,72,45,73,46,78,40,79,106,157,158,154,93,115,114,84,113,159,88,160,69,12,32,1,20,167,85,82,83,162,163,108,168,169,176,177,173,178,149,179,171,172,180,181,182]),import.meta.url)),bg=()=>Ar().then(()=>fe(()=>import("./FeatureLayerView2D-CQVfJHkX.js").then(e=>e.F),__vite__mapDeps([183,157,79,68,45,72,184,178,149,172,74,75,76,71,77,70,73,46,78,40,173,158,154,93,115,114,84,88,80,156,106,167,85,185,182,180]),import.meta.url)),iB={"base-dynamic":()=>Ar().then(()=>fe(()=>import("./BaseDynamicLayerView2D-t2fua-JI.js"),__vite__mapDeps([186,187,158,68,70,71,72,45,73,46,154,93,157,79,115,114,84,178,149,188,177,180,1]),import.meta.url)),"base-tile":fb,"bing-maps":fb,catalog:()=>Ar().then(()=>fe(()=>import("./CatalogLayerView2D-C54DsJ5l.js"),__vite__mapDeps([189,178,157,79,68,45,72,149,1]),import.meta.url)),"catalog-dynamic-group":()=>Ar().then(()=>fe(()=>import("./CatalogDynamicGroupLayerView2D-DgGl5G_5.js"),__vite__mapDeps([190,178,157,79,68,45,72,149,1]),import.meta.url)),"catalog-footprint":()=>Ar().then(()=>fe(()=>import("./CatalogFootprintLayerView2D-BF0Canas.js"),__vite__mapDeps([191,183,157,79,68,45,72,184,178,149,172,74,75,76,71,77,70,73,46,78,40,173,158,154,93,115,114,84,88,80,156,106,167,85,185,182,180,1]),import.meta.url)),csv:bg,"geo-rss":()=>Ar().then(()=>fe(()=>import("./GeoRSSLayerView2D-CWqRTn79.js"),__vite__mapDeps([192,178,157,79,68,45,72,149,170,171,172,74,75,76,71,77,70,73,46,78,40,173,158,154,93,115,114,84,167,85,168,69,12,32,1,20,169]),import.meta.url)),feature:bg,geojson:bg,graphics:()=>Ar().then(()=>fe(()=>import("./GraphicsLayerView2D-B8zPY_2R.js"),__vite__mapDeps([193,79,178,157,68,45,72,149,170,171,172,74,75,76,71,77,70,73,46,78,40,173,158,154,93,115,114,84,167,85,168,69,12,32,1,20,169,185]),import.meta.url)),group:()=>Ar().then(()=>fe(()=>import("./GroupLayerView2D-DGmsG1yQ.js"),__vite__mapDeps([194,178,157,79,68,45,72,149,1]),import.meta.url)),imagery:()=>Ar().then(()=>fe(()=>import("./ImageryLayerView2D-DIHHYKP_.js"),__vite__mapDeps([195,196,73,72,45,154,46,158,68,70,71,93,157,79,115,114,84,178,149,168,74,75,76,77,78,40,69,12,32,1,20,167,85,169,179,171,172,173,187,177,188,100,184,182,180]),import.meta.url)),"imagery-tile":()=>Ar().then(()=>fe(()=>import("./ImageryTileLayerView2D-BqJtk7c1.js"),__vite__mapDeps([197,196,73,72,45,154,46,158,68,70,71,93,157,79,115,114,84,178,149,198,173,199,100,184,182,180,1]),import.meta.url)),kml:()=>Ar().then(()=>fe(()=>import("./KMLLayerView2D-CrN6Ro6a.js"),__vite__mapDeps([200,201,177,157,79,68,45,72,187,158,70,71,73,46,154,93,115,114,84,178,149,170,171,172,74,75,76,77,78,40,173,167,85,168,69,12,32,1,20,169,100,161,152,153,162,163,108,160,106,164,198]),import.meta.url)),"knowledge-graph":()=>Ar().then(()=>fe(()=>import("./KnowledgeGraphLayerView2D-CNnUbgRR.js"),__vite__mapDeps([202,178,157,79,68,45,72,149,1]),import.meta.url)),"link-chart":()=>Ar().then(()=>fe(()=>import("./KnowledgeGraphLayerView2D-CNnUbgRR.js"),__vite__mapDeps([202,178,157,79,68,45,72,149,1]),import.meta.url)),"knowledge-graph-sublayer":bg,"map-image":()=>Ar().then(()=>fe(()=>import("./MapImageLayerView2D-BZUcvzAU.js"),__vite__mapDeps([203,187,158,68,70,71,72,45,73,46,154,93,157,79,115,114,84,178,149,168,74,75,76,77,78,40,69,12,32,1,20,167,85,169,179,171,172,173,188,177,184,180,181,182]),import.meta.url)),"map-notes":()=>Ar().then(()=>fe(()=>import("./MapNotesLayerView2D-C-CbcZW0.js"),__vite__mapDeps([204,79,178,157,68,45,72,149,170,171,172,74,75,76,71,77,70,73,46,78,40,173,158,154,93,115,114,84,167,85,168,69,12,32,1,20,169]),import.meta.url)),media:()=>Ar().then(()=>fe(()=>import("./MediaLayerView2D-DdvX_mq_.js"),__vite__mapDeps([205,206,169,50,76,74,75,71,68,77,70,72,45,73,46,78,40,79,106,157,158,154,93,115,114,84,113,159,88,160,69,12,32,1,20,167,85,82,83,162,163,108,168,166,86,207,178,149]),import.meta.url)),"ogc-feature":()=>Ar().then(()=>fe(()=>import("./OGCFeatureLayerView2D-Dl2pdFpy.js"),__vite__mapDeps([208,183,157,79,68,45,72,184,178,149,172,74,75,76,71,77,70,73,46,78,40,173,158,154,93,115,114,84,88,80,156,106,167,85,185,182,180,1]),import.meta.url)),"open-street-map":fb,"oriented-imagery":bg,route:()=>Ar().then(()=>fe(()=>import("./RouteLayerView2D-CTwvJOYT.js"),__vite__mapDeps([209,210,79,178,157,68,45,72,149,170,171,172,74,75,76,71,77,70,73,46,78,40,173,158,154,93,115,114,84,167,85,168,69,12,32,1,20,169]),import.meta.url)),stream:()=>Ar().then(()=>fe(()=>import("./StreamLayerView2D-BocCihch.js"),__vite__mapDeps([211,183,157,79,68,45,72,184,178,149,172,74,75,76,71,77,70,73,46,78,40,173,158,154,93,115,114,84,88,80,156,106,167,85,185,182,180,1]),import.meta.url)),"subtype-group":()=>Ar().then(()=>fe(()=>import("./SubtypeGroupLayerView2D-BSG6hUSE.js"),__vite__mapDeps([212,183,157,79,68,45,72,184,178,149,172,74,75,76,71,77,70,73,46,78,40,173,158,154,93,115,114,84,88,80,156,106,167,85,185,182,180,1]),import.meta.url)),tile:fb,"vector-tile":()=>Ar().then(()=>fe(()=>import("./VectorTileLayerView2D-BaZeiddM.js"),__vite__mapDeps([213,113,77,45,72,165,106,85,76,73,154,114,158,68,70,71,46,93,157,79,115,84,173,31,116,117,178,149,1]),import.meta.url)),video:()=>Ar().then(()=>fe(()=>import("./VideoLayerView2D-CwKVfaQz.js"),__vite__mapDeps([214,215,207,93,158,68,70,71,72,45,73,46,154,157,79,115,114,84,178,149,170,171,172,74,75,76,77,78,40,173,167,85,168,69,12,32,1,20,169]),import.meta.url)),wcs:()=>Ar().then(()=>fe(()=>import("./ImageryTileLayerView2D-BqJtk7c1.js"),__vite__mapDeps([197,196,73,72,45,154,46,158,68,70,71,93,157,79,115,114,84,178,149,198,173,199,100,184,182,180,1]),import.meta.url)),"web-tile":fb,wfs:bg,wms:()=>Ar().then(()=>fe(()=>import("./WMSLayerView2D-IxT_k1ch.js"),__vite__mapDeps([216,187,158,68,70,71,72,45,73,46,154,93,157,79,115,114,84,178,149,188,177,180,184,1]),import.meta.url)),wmts:()=>Ar().then(()=>fe(()=>import("./WMTSLayerView2D-B_6YUfu9.js"),__vite__mapDeps([217,176,177,157,79,68,45,72,158,70,71,73,46,154,93,115,114,84,173,178,149,180,1]),import.meta.url)),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function Rke(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new K(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const sB={hasLayerViewModule:e=>iB[e.type]!=null,importLayerView:e=>{const t=iB[e.type];if(t==null)throw Rke(e);return t(e)}};function Lke(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let s=Number.POSITIVE_INFINITY,n=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const u of l)for(let c=0;c<u.length-1;c++){Bye(a,i,u,c);const p=a$(i,a);p<s&&(s=p,n=a[0],o=a[1])}return{coordinate:new je({x:n,y:o,spatialReference:r}),distance:s}}var Zk;let Nm=Zk=class extends g6(et){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return tf(this.geometry,this.spatialReference)}catch(e){return be.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?G2(this.normalizedGeometry,r):FD(this.normalizedGeometry,r))return e;const{coordinate:i}=Lke(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){return new Zk({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};h([d({constructOnly:!0})],Nm.prototype,"geometry",void 0),h([d({readOnly:!0})],Nm.prototype,"normalizedGeometry",null),h([d({constructOnly:!0})],Nm.prototype,"spatialReference",void 0),Nm=Zk=h([j("esri.views.2d.constraints.GeometryConstraint")],Nm);var Yk;let xw=Yk=class extends g6(et){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new Yk({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};h([d()],xw.prototype,"enabled",void 0),h([d()],xw.prototype,"rotationEnabled",void 0),xw=Yk=h([j("esri.views.2d.constraints.RotationConstraint")],xw);const Gse=xw;var Kk;let ro=Kk=class extends g6(et){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:s,maxZoom:n}=this,o=-1,a=-1,l=!1,u=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!t?.length)return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(c=>c.clone()),t.sort((c,p)=>p.scale-c.scale),t.forEach((c,p)=>c.level=p);for(const c of t)!l&&r>0&&r>=c.scale&&(o=c.level,l=!0),!u&&i>0&&i>=c.scale&&(a=e?e.level:-1,u=!0),e=c;s===-1&&(s=r===0?0:o),n===-1&&(n=i===0?t.length-1:a),s=Math.max(s,0),s=Math.min(s,t.length-1),n=Math.max(n,0),n=Math.min(n,t.length-1),s>n&&([s,n]=[n,s]),r=t[s].scale,i=t[n].scale,t.splice(0,s),t.splice(n-s+1,t.length),t.forEach((c,p)=>{this._lodByScale[c.scale]=c,this._scales[p]=c.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",s),this._set("effectiveMaxZoom",n),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,s=e.targetGeometry,n=t&&t.targetGeometry,o=i!==0&&e.scale<i,a=r!==0&&e.scale>r;if(o||a){const l=a?r:i;if(t&&n){const u=(l-t.scale)/(e.scale-t.scale);s.x=n.x+(s.x-n.x)*u,s.y=n.y+(s.y-n.y)*u}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.floor(e),i=Math.ceil(e);return t[r]+(e-r)*(t[i]-t[r])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let s=0;s<t.length-1;s++){if(r=t[s],i=t[s+1],i===e)return s+this.effectiveMinZoom+1;if(r>e&&i<e)return s+this.effectiveMinZoom+1-(e-i)/(r-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new Kk({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};h([d({readOnly:!0})],ro.prototype,"effectiveLODs",void 0),h([d({readOnly:!0})],ro.prototype,"effectiveMinZoom",void 0),h([d({readOnly:!0})],ro.prototype,"effectiveMaxZoom",void 0),h([d({readOnly:!0})],ro.prototype,"effectiveMinScale",void 0),h([d({readOnly:!0})],ro.prototype,"effectiveMaxScale",void 0),h([d()],ro.prototype,"lods",void 0),h([d()],ro.prototype,"minZoom",void 0),h([d()],ro.prototype,"maxZoom",void 0),h([d()],ro.prototype,"minScale",void 0),h([d()],ro.prototype,"maxScale",void 0),h([d()],ro.prototype,"snapToZoom",void 0),ro=Kk=h([j("esri.views.2d.constraints.ZoomConstraint")],ro);const Bse=ro,kke={base:null,key:"type",typeMap:{extent:yt,polygon:Rs}};let di=class extends et{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new qe}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const t=this._get("_geometry");return t&&this.geometry===t.geometry&&this.view?.constraintsInfo.spatialReference===t.spatialReference?t:new Nm({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new Gse({rotationEnabled:this.rotationEnabled})}get _zoom(){const t=this._get("_zoom"),r=this.lods||this.view?.constraintsInfo.lods,i=this.minZoom,s=this.maxZoom,n=this.minScale,o=this.maxScale,a=this.snapToZoom;return t&&t.lods===r&&t.minZoom===i&&t.maxZoom===s&&t.minScale===n&&t.maxScale===o&&t.snapToZoom===a?t:new Bse({lods:r,minZoom:i,maxZoom:s,minScale:n,maxScale:o,snapToZoom:a})}canZoomInTo(t){const r=this.effectiveMaxScale;return r===0||t>=r}canZoomOutTo(t){const r=this.effectiveMinScale;return r===0||t<=r}constrain(t,r){return this._zoom.constrain(t,r),this._rotation.constrain(t,r),this._geometry.constrain(t,r),this.customConstraints.forEach(i=>i.constrain(t,r)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(r=>r.applyPanConstraint?.(t)),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};h([d({readOnly:!0})],di.prototype,"effectiveLODs",null),h([d({readOnly:!0})],di.prototype,"effectiveMinScale",null),h([d({readOnly:!0})],di.prototype,"effectiveMaxScale",null),h([d({readOnly:!0})],di.prototype,"effectiveMinZoom",null),h([d({readOnly:!0})],di.prototype,"effectiveMaxZoom",null),h([d({types:kke,value:null})],di.prototype,"geometry",null),h([d({type:[vt]})],di.prototype,"lods",void 0),h([d()],di.prototype,"minScale",void 0),h([d()],di.prototype,"maxScale",void 0),h([d()],di.prototype,"minZoom",void 0),h([d()],di.prototype,"maxZoom",void 0),h([d()],di.prototype,"rotationEnabled",void 0),h([d()],di.prototype,"snapToZoom",void 0),h([d({type:qe})],di.prototype,"customConstraints",void 0),h([d()],di.prototype,"view",void 0),h([d({readOnly:!0})],di.prototype,"version",null),h([d({type:Nm,readOnly:!0})],di.prototype,"_geometry",null),h([d({type:Gse})],di.prototype,"_rotation",null),h([d({readOnly:!0,type:Bse})],di.prototype,"_zoom",null),di=h([j("esri.views.2d.MapViewConstraints")],di);const qse=di;let Ld=class xm{static getId(t,r,i,s){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${s}`}constructor(t,r,i,s){this.set(t,r,i,s)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,s){this.set(t,r,i,s)}contains(t){const r=t.level-this.level;return r>=0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}containsChild(t){const r=t.level-this.level;return r>0&&this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new xm(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,s){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[n,o,a,l]=t.split("/");this.level=parseFloat(n),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+r,this.col=+i,this.world=+s||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new xm(this.level-1,this.row>>1,this.col>>1,this.world)}getNeighborId(t,r){return`${this.level}/${this.row+r}/${this.col+t}/${this.world}`}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,s=this.world;return[new xm(t,r,i,s),new xm(t,r,i+1,s),new xm(t,r+1,i,s),new xm(t,r+1,i+1,s)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}};Ld.pool=new Vd(Ld,null,null,25,50);function np(e,t){return[e,t]}function Tf(e,t,r){return e[0]=t,e[1]=r,e}function Nke(e,t,r,i,s){return e[0]=t,e[1]=r,e[2]=i,e[3]=s,e}const tl=new Ld("0/0/0/0");let Dke=class Hse{static create(t,r,i=null){const s=Un(t.spatialReference),n=r.origin||np(t.origin.x,t.origin.y),o=np(t.size[0]*r.resolution,t.size[1]*r.resolution),a=np(-1/0,-1/0),l=np(1/0,1/0),u=np(1/0,1/0);i!=null&&(Tf(a,Math.max(0,Math.floor((i.xmin-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymax)/o[1]))),Tf(l,Math.max(0,Math.floor((i.xmax-n[0])/o[0])),Math.max(0,Math.floor((n[1]-i.ymin)/o[1]))),Tf(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:c,rows:p}=r;let f,m,g,b;return!i&&c&&p&&(Tf(a,c[0],p[0]),Tf(l,c[1],p[1]),Tf(u,c[1]-c[0]+1,p[1]-p[0]+1)),t.isWrappable?(f=np(Math.ceil(Math.round((s.valid[1]-s.valid[0])/r.resolution)/t.size[0]),u[1]),m=np(Math.floor((s.origin[0]-n[0])/o[0]),a[1]),g=np(f[0]+m[0]-1,l[1]),b=!0):(m=a,g=l,f=u,b=!1),new Hse(r.level,r.resolution,r.scale,n,a,l,u,o,m,g,f,b)}constructor(t,r,i,s,n,o,a,l,u,c,p,f){this.level=t,this.resolution=r,this.scale=i,this.origin=s,this.first=n,this.last=o,this.size=a,this.norm=l,this.worldStart=u,this.worldEnd=c,this.worldSize=p,this.wrap=f}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){tl.set(r);const s=i?tl.col:this.denormalizeCol(tl.col,tl.world),n=tl.row;return Nke(t,this.getXForColumn(s),this.getYForRow(n+1),this.getXForColumn(s+1),this.getYForRow(n)),t}getTileCoords(t,r,i=!1){tl.set(r);const s=i?tl.col:this.denormalizeCol(tl.col,tl.world);return Array.isArray(t)?Tf(t,this.getXForColumn(s),this.getYForRow(tl.row)):(t.x=this.getXForColumn(s),t.y=this.getYForRow(tl.row)),t}},a2=class{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}*keys(){const t=this.lodInfo;for(const{row:r,colFrom:i,colTo:s}of this.spans)for(let n=i;n<=s;n++){const o=t.getWorldForColumn(n);yield new Ld(t.level,r,t.normalizeCol(n),o)}}forEach(t,r){const{spans:i,lodInfo:s}=this,{level:n}=s;if(i.length!==0)for(const{row:o,colFrom:a,colTo:l}of i)for(let u=a;u<=l;u++)t.call(r,n,o,s.normalizeCol(u),s.getWorldForColumn(u))}};a2.pool=new Vd(a2);let q5=class{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}};const Lr=new Ld("0/0/0/0");let Fke=class Wse{static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,s]=t,[n,o]=r,a=n-i,l=o-s,u=l!==0?a/l:0,c=(Math.ceil(s)-s)*u,p=(Math.floor(s)-s)*u;return new Wse(i,Math.floor(s),Math.ceil(o),u,a<0?c:p,a<0?p:c,a<0?n:i,a<0?i:n)}constructor(t,r,i,s,n,o,a,l){this.x=t,this.ymin=r,this.ymax=i,this.invM=s,this.leftAdjust=n,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Ao=[[0,0],[0,0],[0,0],[0,0]],jke=1e-6;let Vke=class{constructor(t,r=null,i=t.lods[0].level,s=t.lods[t.lods.length-1].level){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=t.lods.filter(a=>a.level>=i&&a.level<=s);this.minScale=n[0].scale,this.maxScale=n[n.length-1].scale;const o=this._lodInfos=n.map(a=>Dke.create(t,a,r));n.forEach((a,l)=>{this._infoByLevel[a.level]=o[l],this._infoByScale[a.scale]=o[l],this.scales[l]=a.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){Lr.set(r);const s=this._infoByLevel[Lr.level];return s?s.getTileBounds(t,Lr,i):t}getTileCoords(t,r,i=!1){Lr.set(r);const s=this._infoByLevel[Lr.level];return s?s.getTileCoords(t,Lr,i):t}getTileCoverage(t,r=192,i=!0,s="closest"){if(!i&&(t.scale>this.minScale||t.scale<this.maxScale))return null;const n=s==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),o=a2.pool.acquire(n),a=this._wrap;let l,u,c,p=1/0,f=-1/0;const m=o.spans;Ao[0][0]=Ao[0][1]=Ao[1][1]=Ao[3][0]=-r,Ao[1][0]=Ao[2][0]=t.size[0]+r,Ao[2][1]=Ao[3][1]=t.size[1]+r;for(const S of Ao)t.toMap(S,S),S[0]=n.getColumnForX(S[0]),S[1]=n.getRowForY(S[1]);const g=[];let b=3;for(let S=0;S<4;S++){if(Ao[S][1]===Ao[b][1]){b=S;continue}const M=Fke.create(Ao[S],Ao[b]);p=Math.min(M.ymin,p),f=Math.max(M.ymax,f),g[M.ymin]===void 0&&(g[M.ymin]=[]),g[M.ymin].push(M),b=S}if(p==null||f==null||f-p>100)return null;let w=[];for(l=p;l<f;){g[l]!=null&&(w=w.concat(g[l])),u=1/0,c=-1/0;for(let S=w.length-1;S>=0;S--){const M=w[S];u=Math.min(u,M.getLeftCol()),c=Math.max(c,M.getRightCol())}if(u=Math.floor(u),c=Math.floor(c),l>=n.first[1]&&l<=n.last[1])if(a)if(n.size[0]<n.worldSize[0]){const S=Math.floor(c/n.worldSize[0]);for(let M=Math.floor(u/n.worldSize[0]);M<=S;M++)m.push(new q5(l,Math.max(n.getFirstColumnForWorld(M),u),Math.min(n.getLastColumnForWorld(M),c)))}else m.push(new q5(l,u,c));else u>n.last[0]||c<n.first[0]||(u=Math.max(u,n.first[0]),c=Math.min(c,n.last[0]),m.push(new q5(l,u,c)));l+=1;for(let S=w.length-1;S>=0;S--){const M=w[S];M.ymax>=l?M.incrRow():w.splice(S,1)}}return o}getTileParentId(t){Lr.set(t);const r=this._infoByLevel[Lr.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(Lr,this._lodInfos[i],Lr),Lr.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){Lr.set(r);const i=this._infoByLevel[Lr.level],s=t.lodInfo;if(s.resolution>i.resolution){this._getTileIdAtLOD(Lr,s,Lr);const o=s.denormalizeCol(Lr.col,Lr.world);for(const a of t.spans)if(a.row===Lr.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(s.resolution<i.resolution){const[o,a,l,u]=t.spans.reduce((b,w)=>(b[0]=Math.min(b[0],w.row),b[1]=Math.max(b[1],w.row),b[2]=Math.min(b[2],w.colFrom),b[3]=Math.max(b[3],w.colTo),b),[1/0,-1/0,1/0,-1/0]),c=i.denormalizeCol(Lr.col,Lr.world),p=s.getColumnForX(i.getXForColumn(c)),f=s.getRowForY(i.getYForRow(Lr.row)),m=s.getColumnForX(i.getXForColumn(c+1))-1,g=s.getRowForY(i.getYForRow(Lr.row+1))-1;return!(p>u||m<l||f>a||g<o)}const n=s.denormalizeCol(Lr.col,Lr.world);return t.spans.some(o=>o.row===Lr.row&&o.colFrom<=n&&o.colTo>=n)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const s=Un(this.tileInfo.spatialReference),n=-i*(s.valid[1]-s.valid[0]);t[0]+=n,t[2]+=n}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+jke)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,s)=>Math.abs(s-t)<Math.abs(i-t)?s:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}zoomToScale(t){return this.tileInfo.zoomToScale(t)}_getTileIdAtLOD(t,r,i){const s=this._infoByLevel[i.level];return t.set(i),r.resolution<s.resolution?null:(r.resolution===s.resolution||(t.level=r.level,t.col=Math.floor(i.col*s.resolution/r.resolution+.01),t.row=Math.floor(i.row*s.resolution/r.resolution+.01)),t)}},Uke=class{constructor(t,r){this.item=t,this.controller=r,this.promise=null}},zke=class{constructor(t){this._schedule=null,this._task=null,this._deferreds=new n3,this._controllers=new n3,this._processingItems=new n3,this._pausedSignal=Gie(!1),this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new vI(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&r&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule=Kr(this._schedule),this._task=Kr(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const s=new AbortController;let n=null;r&&(n=Zo(r,()=>s.abort()));const o=()=>{const c=this._processingItems.get(t);c&&c.controller.abort(),a(),u.reject(ii())},a=()=>{l.remove(),n?.remove(),this._removeItem(t),this._queue.remove(t),this._scheduleNext()},l=fD(s.signal,o),u=ia();return this._deferreds.set(t,u),this._controllers.set(t,s),u.promise.then(a,a),this._queue.push(t),this._scheduleNext(),u.promise}last(){return this._queue.last()}lastPromise(){const t=this.last();return t?this.get(t):null}peek(){return this._queue.peek()}popLast(){const t=this._queue.popLast();return t&&(this._deferreds.get(t)?.reject(ii("Removed from queue")),this._removeItem(t)),t}reset(){const t=[];this._processingItems.forEach(r=>t.push(r)),this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._pausedSignal.value&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_removeItem(t){this._deferreds.delete(t),this._controllers.delete(t),this._processingItems.delete(t)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=l1(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(t==null)return;let r;const i=new AbortController,s=new Uke(t,i);this._processingItems.set(t,s);try{r=this.process(t,i.signal)}catch(n){this._processError(s,n)}Ud(r)?(s.promise=r,r.then(n=>this._processResult(s,n),n=>this._processError(s,n))):this._processResult(s,r)}get test(){}};function Gke(e,t){return e.length=0,t.forEach(r=>e.push(r)),e}const H5=new Set,Wx=[],wg=new Map,nB=[0,0];let Vp=class extends et{constructor(t){super(t),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:t,process:r,strategy:i}=this;this._queue=new zke({concurrency:t,process:(s,n)=>{const o=this._keyToItem.get(s);return r(o,{signal:n})},peeker:i==="scale-first"?s=>this._peekByScaleFirst(s):s=>this._peekByCenterFirst(s)})}destroy(){this.clear(),this._queue=jr(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}abort(t){const r=typeof t=="string"?t:t.id;this._queue.abort(r)}clear(){this._queue.clear(),this._keyToItem.clear()}has(t){return typeof t=="string"?this._keyToItem.has(t):this._keyToItem.has(t.id)}isOngoing(t){const r=typeof t=="string"?t:t.id;return this.has(r)&&this._queue.isOngoing(r)}pause(){this._queue.pause()}push(t){const r=t.key.id;if(this._queue.has(r))return this._queue.get(r);const i=this._queue.push(r),s=()=>{this._keyToItem.delete(r)};return this._keyToItem.set(r,t),i.then(s,s),i}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(t){if(!this.state)return t.values().next().value;const r=this.tileInfoView;let i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;t.forEach(c=>{const p=this._keyToItem.get(c),f=this.tileInfoView.getTileScale(p.key);wg.has(f)||(wg.set(f,[]),i=Math.max(f,i),s=Math.min(f,s)),wg.get(f).push(p.key),H5.add(f)});let n=this.state.scale;wg.has(n)||(Gke(Wx,H5),Wx.sort((c,p)=>c-p),n=Wx.reduce((c,p)=>Math.abs(p-n)<Math.abs(c-n)?p:c,Wx[0])),n=Math.min(n,i),n=Math.max(n,s);const o=wg.get(n),a=r.getClosestInfoForScale(n),l=a.getColumnForX(this.state.center[0]),u=a.getRowForY(this.state.center[1]);return o.sort((c,p)=>{const f=a.denormalizeCol(c.col,c.world),m=a.denormalizeCol(p.col,p.world);return Math.sqrt((l-f)*(l-f)+(u-c.row)*(u-c.row))-Math.sqrt((l-m)*(l-m)+(u-p.row)*(u-p.row))}),H5.clear(),wg.clear(),o[0].id}_peekByCenterFirst(t){if(!this.state)return t.values().next().value;const r=this.tileInfoView,i=this.state.center;let s,n=Number.POSITIVE_INFINITY;return t.forEach(o=>{const a=this._keyToItem.get(o);r.getTileCoords(nB,a.key);const l=a$(nB,i);l<n&&(n=l,s=a.key)}),s.id}};h([d({constructOnly:!0})],Vp.prototype,"concurrency",void 0),h([d({constructOnly:!0})],Vp.prototype,"process",void 0),h([d()],Vp.prototype,"state",void 0),h([d({constructOnly:!0})],Vp.prototype,"strategy",void 0),h([d({constructOnly:!0})],Vp.prototype,"tileInfoView",void 0),Vp=h([j("esri.views.2d.tiling.TileQueue")],Vp);const Aut=Vp;let Bke=class{constructor(t,r,i){this.maxSize=t,this._tileInfoView=r,this._removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear(),this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return;const i=r.key.level,s=this._tileKeysPerLevel[i];oB(this._tilePerId,t);for(let n=0;n<s.length;n++)if(s[n].id===t){s.splice(n,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const s=r.level;this._tileKeysPerLevel[s]||(this._tileKeysPerLevel[s]=[]),this._tileKeysPerLevel[s].push(r)}prune(t,r,i){let s=this._tilePerId.size;if(s<=this.maxSize)return;let n=this._tileKeysPerLevel.length-1;for(;s>this.maxSize&&n>=0;)n!==t&&(s=this._pruneAroundCenterTile(s,r,i,n)),n--;s>this.maxSize&&(s=this._pruneAroundCenterTile(s,r,i,t))}_pruneAroundCenterTile(t,r,i,s){const n=this._tileKeysPerLevel[s];if(!n||n.length===0)return t;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=i*o[0],u=i*o[1],c=[0,0],p=[0,0];for(n.sort((f,m)=>(c[0]=a.x+l*(f.col+.5),c[1]=a.y-u*(f.row+.5),p[0]=a.x+l*(m.col+.5),p[1]=a.y-u*(m.row+.5),LI(c,r)-LI(p,r)));n.length>0;){const f=n.pop();if(this._removeTile(f.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this._removedFunc&&r&&this._removedFunc(r),oB(this._tilePerId,t)}};function oB(e,t){e.delete(t)}const If=new Ld(0,0,0,0),Sc=new Map,Ef=[],W5=[];let Cut=class{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,t.resampling!=null&&(this.resampling=t.resampling),t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new Bke(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:r,tileIndex:i}=this,{scale:s,center:n,resolution:o}=t.state,{minScale:a,maxScale:l}=this.tileInfoView,u=!t.stationary&&s>this._previousScale;if(this._previousScale=s,!r&&(s>a||s<l))return this.tiles.length=0,void this.clear();const c=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.resampling,this.coveragePolicy);if(!c)return this.tiles.length=0,void this.clear();const{spans:p,lodInfo:f}=c,{level:m}=f;this.tiles.length=0,i.forEach(S=>S.visible=!0);let g=0,b=0;if(p.length>0)for(const{row:S,colFrom:M,colTo:x}of p)for(let _=M;_<=x;_++){g++;const I=If.set(m,S,f.normalizeCol(_),f.getWorldForColumn(_)).id;let E=i.get(I);if(E)E.isReady?(Sc.set(I,E),b++):u||this._addParentTile(I,Sc);else{if(this._tileCache?.has(I)){if(E=this._tileCache.pop(I),this.tileIndex.set(I,E),E.isReady){Sc.set(I,E),b++;continue}}else E=this.acquireTile(If),this.tileIndex.set(I,E);u||this._addParentTile(I,Sc)}}const w=b===g;for(const[S,M]of i){if(Sc.has(S))continue;If.set(S);const x=this.tileInfoView.intersects(c,If),_=this.cachePolicy==="purge"?If.level!==m:If.level>m;!x||!u&&w?!_&&x||Ef.push(M):M.isReady?_&&this.cachePolicy==="purge"&&this._hasReadyAncestor(If,m)?Ef.push(M):W5.push(M):_&&Ef.push(M)}for(const S of W5)S.isReady&&Sc.set(S.key.id,S);for(const S of Ef)this._tileCache?this._tileCache.add(S):this.releaseTile(S),i.delete(S.key.id);for(const S of Sc.values())this.tiles.push(S);for(const S of i.values())Sc.has(S.key.id)||(S.visible=!1);this._tileCache?.prune(m,n,o),a2.pool.release(c),W5.length=0,Ef.length=0,Sc.clear()}clear(){const{tileIndex:t}=this;for(const r of t.values())this.releaseTile(r);t.clear()}refresh(t){for(const r of this.tileIndex.values())this.tiles.includes(r)?t(r):Ef.push(r);for(const r of Ef)this.releaseTile(r),this.tileIndex.delete(r.key.id);this._tileCache?.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){let i=t,s=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(s=this.tileIndex.get(i),s?.isReady){r.has(s.key.id)||r.set(s.key.id,s);break}}else if(this._tileCache?.has(i)&&(s=this._tileCache.pop(i),this.tileIndex.set(i,s),s?.isReady)){r.has(s.key.id)||r.set(s.key.id,s);break}}_hasReadyAncestor(t,r){const i=mo();this.tileInfoView.getTileBounds(i,t,!0);for(const s of this.tileIndex.values())if(s.isReady&&s.key.level>=r&&s.key.level<t.level){const n=mo();if(this.tileInfoView.getTileBounds(n,s.key,!0),ige(n,i))return!0}return!1}},In=class extends et{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([ht(()=>this.constraints?.version,r=>{this.constraints&&r&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Os)])}get center(){if(!this.ready)return this._get("center");const{center:t,spatialReference:r}=this.state.paddedViewState;return this.state.commitProperty("id"),new je({x:t[0],y:t[1],spatialReference:r})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let r;try{r=this._project(t,this.state.spatialReference)}catch(s){return void be.getLogger(this).error(new K("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:s}))}const i=this.viewpoint;Bk(i,i,r),this.viewpoint=i}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void be.getLogger(this).error(new K("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let r;try{r=this._project(t,this.state.spatialReference)}catch(s){return void be.getLogger(this).error(new K("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:s}))}const i=this.viewpoint;YRe(i,i,r,this.state.size,{constraints:this.constraints}),this.viewpoint=i}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);const r=this.viewpoint;oLe(r,r,t),this.viewpoint=r}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);const i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}const r=this.viewpoint;XG(r,r,t),this.viewpoint=r}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let r,i;try{r=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?i=new K("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(i=new K("mapview:invalid-viewpoint","geometry not defined"))}catch(n){i=new K("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:n})}if(i)return void be.getLogger(this).error(i);this._scaleBeforeChangingSpatialReference=null;const s=new Nl({targetGeometry:new je,scale:0,rotation:0});pn(s,r),this.constraints?.constrain(s,this.state.paddedViewState.viewpoint),this.state.viewpoint=s,this._set("viewpoint",s)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(t){if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);const s=this._get("extent");return void(s&&(this._set("extent",void 0),this._set("center",s.center)))}const r=this.constraints?.zoomToScale(t)??0;if(!r)return void this._set("zoom",-1);const i=this.viewpoint;XG(i,i,r),this.viewpoint=i,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};const{padding:r,constraints:i}=this,s=this._get("center"),n=this._get("extent"),o=this._get("scale"),a=this._get("rotation"),l=this._get("viewpoint"),u=this._get("zoom"),c=u!=null&&i!=null&&i.zoomToScale(u)||void 0;let p,f,m;const g=l?.rotation,b=l?.targetGeometry;b?.type==="extent"?p=b:b?.type==="point"&&(f=b,m=l?.scale);const w=n??p;return{center:s??f??w?.center,rotation:a??g,scale:(o??c??m??(w&&u$(w,[t[0]-r.left-r.right,t[1]-r.top-r.bottom])))||void 0}}startup(t,r,i,s){const n=t.targetGeometry;try{this._project(t,i)}catch(o){be.getLogger(this).warn(new sa("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:n.toJSON(),spatialReference:i,error:o})),t.targetGeometry=s||new je({x:0,y:0,spatialReference:i})}this.constraints?.fit(t),this._set("state",new mF({padding:this.padding,size:r,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);const{center:[t,r],spatialReference:i,rotation:s,scale:n}=this.state.paddedViewState,o=new je({x:t,y:r,spatialReference:i});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",s),this._set("scale",n),this._set("state",null)}changeSpatialReference(t){const r=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=r.scale;else{const l=r.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,r.viewpoint=l}const i=r.clone(),[s,n]=r.center;let o=null;try{o=this._project(new je({x:s,y:n,spatialReference:r.spatialReference}),t)}catch(l){LD()||be.getLogger(this).warn(new sa("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o?.toJSON(),spatialReference:t,error:l}))}o||(o=new je({x:0,y:0,spatialReference:t}));const a=Bk(new Nl({targetGeometry:new je,scale:0,rotation:0}),r.viewpoint,o);i.viewpoint=a;try{const u=[r.size[0]/2,r.size[1]/2],c=[u[0]+20,u[1]],p=r.toMap([0,0],c),{x:f,y:m}=this._project(new je({x:p[0],y:p[1],spatialReference:r.spatialReference}),t);p[0]=f,p[1]=m,i.toScreen(p,p);const g=iLe(u,p,c),b=Math.hypot(p[0]-u[0],p[1]-u[1])/20;!Number.isFinite(b)||Math.abs(b)>4?(a.rotation=0,a.targetGeometry=new je({x:0,y:0,spatialReference:t})):(a.scale*=b,a.scale>ce("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(g)?g:0)}catch{}this._get("constraints")?.constrain(a,void 0),this._get("state").viewpoint=a}resize(t,r){if(!this.ready)return;const i=this.state;let s=this.state.paddedViewState.viewpoint;const n=this.state.paddedViewState.size.concat();i.size=[t,r],nLe(s,s,n,this.state.paddedViewState.size,this.resizeAlign),s=this.constraints?.constrain(s,void 0)??s,this.state.viewpoint=s}toMap(t){if(!this.ready)return null;const r=[0,0],[i,s]=this.state.toMap(r,[t.x,t.y]),n=this.state.spatialReference;return new je({x:i,y:s,spatialReference:n})}toScreen(t,r){if(!this.ready)return null;const i=this._project(t,this.state.spatialReference),s=[i.x,i.y];return r?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(s,s),this.state.toScreen(s,s),Cs(s[0],s[1])}_project(t,r){const i=t?.targetGeometry||t;if(!r)return t;if(!i)return null;if(r.imageCoordinateSystem||i.spatialReference?.imageCoordinateSystem||vi(r,i.spatialReference))return t;const s=tf(i,r);if(!s)throw new K("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:i,spatialReference:r});return qke(t)?(t.targetGeometry=s,t):s}};function qke(e){return e?.declaredClass==="esri.Viewpoint"}h([d({type:je})],In.prototype,"center",null),h([d()],In.prototype,"constraints",void 0),h([d({type:yt})],In.prototype,"extent",null),h([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],In.prototype,"padding",null),h([d()],In.prototype,"ready",void 0),h([d()],In.prototype,"resizeAlign",void 0),h([d({readOnly:!0})],In.prototype,"resolution",null),h([d({type:Number})],In.prototype,"rotation",null),h([d({type:Number})],In.prototype,"scale",null),h([d({readOnly:!0})],In.prototype,"state",void 0),h([d({type:Nl})],In.prototype,"viewpoint",null),h([d()],In.prototype,"zoom",null),In=h([j("esri.views.2d.ViewStateManager")],In);function yF(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}let aB=class extends is{constructor(t,r){super(!0),this._view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){yF(t.data,"primary")&&(t.stopPropagation(),r?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}},Hke=class extends is{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,s=>this._handleDoubleTapDrag(s))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:s,delta:n}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(s){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=n,a.begin();break}case"update":{if(this._previousDelta.y===n.y)return;this._previousDelta=n;const l=1.015**n.y,u=this._startScale*l,c=u/this._currentScale;a.setViewpointImmediate(c),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:c}=l;if(!c||!u)return void a.end();const p=l.snapScale(this._currentScale),f=(n.y>0?Math.max(p,l.snapToPreviousScale(this._startScale)):Math.min(p,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f).then(()=>{a.end()});break}}}},h$=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}},Wke=class extends is{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r,this.registerIncoming("drag",i,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new h$({start:(r,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(r,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(r,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(r,i)=>r===1&&yF(i.data,this.pointerAction)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},Jke=class extends is{constructor(t,r,i){super(!0),this._view=t,this.pointerAction=r;const s=this._view.mapViewNavigation;this._dragEventSeparator=new h$({start:(n,o)=>{s.rotate.begin(this._view,o.data),o.stopPropagation()},update:(n,o)=>{s.rotate.update(this._view,o.data),o.stopPropagation()},end:(n,o)=>{s.rotate.end(),o.stopPropagation()},condition:(n,o)=>n===1&&yF(o.data,this.pointerAction)}),this.registerIncoming("drag",i,n=>this._dragEventSeparator.handle(n))}};function rl(e){let t=e*e;return e<0&&(t*=-1),t}function Zke(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function Yke(e,t,r){const i=r,s=e.state,n=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return n.deviceType==="standard"?(i.translation[0]=rl(s.axes[0]),i.translation[1]=rl(s.axes[1]),i.translation[2]=rl(s.buttons[7])-rl(s.buttons[6]),i.heading=rl(s.axes[2]),i.tilt=rl(s.axes[3])):n.deviceType==="spacemouse"&&(i.translation[0]=1.2*rl(s.axes[0]),i.translation[1]=1.2*rl(s.axes[1]),i.translation[2]=2*-rl(s.axes[2]),i.heading=1.2*rl(s.axes[5]),i.tilt=1.2*rl(s.axes[3])),i.tilt*=o,SY(i.translation,i.translation,a),i}function Kke(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}let Xke=class extends is{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new k2,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",r=>this._handleGamePadEvent(r)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([ht(()=>this._view.navigation.gamepad?.enabled,r=>{r?(this._handle.resume(),this._frameTask||(this._frameTask=_v({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},fn)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){const r=this._view.navigation.gamepad.device;r&&t.data.device!==r||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,Zke(this._transformation)):(this._currentDevice=t.data.device,Yke(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){const r=this._transformation;if(Kke(r))return;const i=this._view.viewpoint.clone(),s=this._view.navigation.gamepad.velocityFactor,n=eNe*s*t;c$(i,i,[r.translation[0]*n,-r.translation[1]*n]);const o=1+r.translation[2]*tNe*t,a=this._view.constraints.rotationEnabled?-r.heading*Qke*t:0,l=this._view.size,u=[l[0]/2,l[1]];Ise(i,i,o,a,u,l);const c=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=c}};const Qke=.06,eNe=.7,tNe=6e-4;function Jse(e){const t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),or(()=>document.removeEventListener("visibilitychange",t))}let rNe=class extends is{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=s=>{const n=this._keyMap[s.data.key];if(s.modifiers.has("Meta")||s.modifiers.has("Control"))return void this._stopMovement();if(n==null)return;s.stopPropagation(),s.preventDefault();const o=s.type==="key-down";if(this._pressedKeys[o?"add":"delete"](n),o){if(this._direction===n)return;this._direction=n,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{const a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=Jse(s=>s?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(t){const r=this._currentDirection!=null;if(t!=null){if(r||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else r&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}},iNe=class extends is{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyToDirection={[r.clockwiseOption1]:"clockwise",[r.clockwiseOption2]:"clockwise",[r.counterClockwiseOption1]:"counterClockwise",[r.counterClockwiseOption2]:"counterClockwise",[r.resetOption1]:"reset",[r.resetOption2]:"reset"},this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),this.registerIncoming("key-up",i,s=>this._handleKeyUp(s)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=Jse(s=>s?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const s=this._keyToDirection[t.data.key];if(this._pressed=s!=null,this._pressed){if(t.preventDefault(),r)switch(this.view.mapViewNavigation.begin(),s){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var R0;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(R0||(R0={}));let sNe=class extends is{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,s=>this._handleKeyDown(s)),r.zoomIn.forEach(s=>this._keysToZoomAction[s]=R0.IN),r.zoomOut.forEach(s=>this._keysToZoomAction[s]=R0.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const s=this._keysToZoomAction[i],{mapViewNavigation:n}=this.view;let o=null;switch(s){case R0.IN:o=n.zoomIn();break;case R0.OUT:o=n.zoomOut();break;default:return}n.begin(),o.then(()=>n.end()),t.stopPropagation()}};const nNe=.6;let oNe=class extends is{constructor(t,r){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this._view.mapViewNavigation,{x:i,y:s,deltaY:n}=t.data,o=1/nNe**(1/60*n),a=r.zoom(o,[i,s]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}},aNe=class extends is{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const r=this.view.mapViewNavigation;this._dragEventSeparator=new h$({start:(i,s)=>{r.pinch.begin(this.view,s.data),s.stopPropagation()},update:(i,s)=>{r.pinch.update(this.view,s.data),s.stopPropagation()},end:(i,s)=>{r.pinch.end(this.view),s.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function lB(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value||1:0),axes:t.axes.map(r=>cNe(r,e.axisThreshold))}:{buttons:[],axes:[]}}function lNe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function uNe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function cNe(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}let hNe=class{constructor(t,r){this._element=t,this._input=r,this._hasEventListeners=!1,this._onConnectGamepad=n=>{this._connectGamepad(n.gamepad)},this._onDisconnectGamepad=n=>{const o=n.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,lB(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const i="getGamepads"in window.navigator,s=window.isSecureContext;this.supported=i&&s,this.supported&&(uB(n=>this._connectGamepad(n)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){const r=new nF(t);r.deviceType!=="unknown"&&(this._inputDevices[t.index]=r,this._input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=_v({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const t=document.hasFocus(),r=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!r;uB(s=>{const n=this._inputDevices[s.index];if(!n)return;const o=this._latestUpdate[s.index],a=lB(n),l=i||uNe(a);o&&(o.timestamp===s.timestamp||!o.active&&l||lNe(o.state,a))||this._emitGamepadEvent(s,a,!l)})}_emitGamepadEvent(t,r,i){const s=this._latestUpdate[t.index],n=s&&s.active;if(!n&&!i)return;const o=!n&&i?"start":n&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:r,action:o})}};function pNe(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function uB(e){const t=window.navigator.getGamepads();for(let r=0;r<t.length;r++){const i=t[r];pNe(i)&&e(i)}}const cB=ce("edge"),dNe=ce("chrome"),fNe=ce("ff"),mNe=ce("safari"),hB="esri-view-surface",_g={touchNone:`${hB}--touch-none`,touchPan:`${hB}--touch-pan`};let Zse=class Yse{constructor(t,r){this._input=r,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new hNe(t,this._input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource=jr(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(J5[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&J5[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(J5[r],i),this._active[r]=i}}),this._gamepadSource.hasEventListeners=t?.has("gamepad")??!1}setPointerCapture(t,r){r?this._setPointerCatpureSafe(t.pointerId):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?_g.touchNone:_g.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?_g.touchPan:_g.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(_g.touchNone),this._element.classList.remove(_g.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(t){try{this._element.setPointerCapture(t),this._activePointerCaptures.add(t)}catch{}}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=Jie(this._element,t);return Yse.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const{key:i}=r;i&&t==="key-up"&&this._keyDownState.delete(i);const s={native:r,key:i,repeat:!!i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(s.key),this._callback(t,s)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_handleMouseWheel(t,r){let i=r.deltaY;switch(r.deltaMode){case 0:cB&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}cB?i*=.7:dNe||mNe?i*=.6:fNe&&(i*=1.375);const s=100,n=Math.abs(i);n>s&&(i=i/n*200/(1+Math.exp(-.02*(n-s))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}};Zse.test={disableSubpixelCoordinates:!1};const J5={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let yNe=class extends is{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}};const $s={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function NI(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function gNe(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function vNe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:Cs()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[x,_]=e,[I,E]=[_.x-x.x,_.y-x.y];return t.radius=Math.sqrt(I*I+E*E)/2,t.center.x=(x.x+_.x)/2,t.center.y=(x.y+_.y)/2,t}let r=0,i=0;for(let x=0;x<e.length;x++)r+=e[x].x,i+=e[x].y;r/=e.length,i/=e.length;const s=e.map(x=>x.x-r),n=e.map(x=>x.y-i);let o=0,a=0,l=0,u=0,c=0,p=0,f=0;for(let x=0;x<s.length;x++){const _=s[x],I=n[x],E=_*_,A=I*I;o+=E,a+=A,l+=_*I,u+=E*_,c+=A*I,p+=_*A,f+=I*E}const m=.5*(u+p),g=.5*(c+f),b=o*a-l*l,w=(m*a-g*l)/b,S=(o*g-l*m)/b,M=Cs(w+r,S+i);return{radius:Math.sqrt(w*w+S*S+(o+a)/e.length),center:M}}function sy(e){const{native:t}=e,{pointerId:r,button:i,pointerType:s}=t;return s==="mouse"?`${r}:${i}`:`${s}`}let bNe=class extends is{constructor(t=$s.maximumDoubleClickDelay,r=$s.maximumDoubleClickDistance,i=$s.maximumDoubleTouchDelay,s=$s.maximumDoubleTouchDistance,n=a1){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Cs(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new h$({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Kr(t.doubleTapTimeout)})}get hasPendingInputs(){return YE(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout=Kr(r.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:s}=r,{center:n}=i;this._dragStartCenter=n;const o=Z5("begin",Cs(0,0),i);this._doubleTapDrag.emit(o,void 0,s),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:s}=r,n=Z5("update",Cs(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:s}=r,n=Z5("end",Cs(s.x-this._dragStartCenter.x,s.y-this._dragStartCenter.y),r);this._doubleTapDrag.emit(n,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=sy(r),s=this._pointerState.get(i),{pointerType:n}=r.native;if(s){const o=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),NI(s.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,s=sy(r),n=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(s),n);this._pointerState.set(s,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};function Z5(e,t,r){const{button:i,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}=r;return{action:e,delta:t,button:i,buttons:s,pointer:n,pointers:o,pointerType:a,timestamp:l}}let wNe=class extends is{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,r,i,s){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:r.buttons,timestamp:s,pointers:_Ne(this._activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){const r=t.native.pointerId,i=Jx(this._activePointerMap).angle,s={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(r,s);const n=u3(s,Kse(this._activePointerMap));s.initialAngle=n,s.lastAngle=n,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this._activePointerMap.get(r);i?i.event=t:this._addPointer(t)}_removePointer(t){const r=Jx(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(r)}_updatePointerAngles(t){const r=Jx(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=u3(i,r)-t,i.lastAngle=u3(i,r)-t})}_emitEvent(t,r,i){const s=Jx(this._activePointerMap);this._drag.emit(this._createPayload(t,r,s,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(r)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(r)):(this._removePointer(r),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){const r=t.data,i=r.currentEvent,s=t.timestamp;switch(r.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,s)):(this._addPointer(i),this._emitEvent("added",i,s),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,s))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Kse(e){const t=[];return e.forEach(r=>{t.push(Cs(r.event.x,r.event.y))}),vNe(t)}function Jx(e){const t=Kse(e);let r=0;return e.forEach(i=>{let s=u3(i,t),n=s-i.lastAngle;for(;n>Math.PI;)n-=2*Math.PI;for(;n<-Math.PI;)n+=2*Math.PI;s=i.lastAngle+n,i.lastAngle=s;const o=s-i.initialAngle;r+=o}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function _Ne(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function u3(e,t){const r=e.event,i=r.x-t.center.x,s=r.y-t.center.y;return Math.atan2(s,i)}var pB;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(pB||(pB={}));let SNe=class extends is{constructor(t=$s.maximumDoubleClickDelay,r=$s.maximumDoubleClickDistance,i=$s.maximumDoubleTouchDelay,s=$s.maximumDoubleTouchDistance,n=a1){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=sy(r);if(!this._pointerState.has(i)){const s={downButton:r.native.button,x:r.x,y:r.y,immediateDoubleClick:null};this._pointerState.set(i,s),this.startCapturingPointer(r.native)}}_handlePointerUp(t){const r=t.data,i=sy(r),s=this._pointerState.get(i);if(s&&s.downButton===r.native.button){const n=s.immediateDoubleClick,o=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;n?(n.timeoutHandle.remove(),NI(n,t.data)>o?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,n.modifiers),this._removeState(r))):NI(s,t.data)>o?this._removeState(r):this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){const r=sy(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}},xNe=class extends is{constructor(t=$s.maximumClickDelay,r=$s.movementUntilMouseDrag,i=$s.movementUntilPenDrag,s=$s.movementUntilTouchDrag,n=$s.holdDelay,o=a1){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=r,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=s,this._holdDelay=n,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Kr(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let s=null;this._pointerState.size===0&&(s=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const n={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:s,modifiers:new Set};this._pointerState.set(i,n),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,s=this._pointerState.get(i);s&&(s.isDragging?this._pointerDrag.emit(Zx("update",s,r),void 0,s.modifiers):gNe(r,s.startEvent)>this._getDragThreshold(r.native.pointerType)&&this._startDragging(t),s.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(s=>{s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging||(s.modifiers=t.modifiers,s.isDragging=!0,i===s.startEvent.native.pointerId?this._pointerDrag.emit(Zx("start",s,r)):this._pointerDrag.emit(Zx("start",s,s.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,s=i.native.pointerId,n=this._pointerState.get(s);n&&(n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging?this._pointerDrag.emit(Zx("end",n,r==="pointer-up"?i:n.previousEvent),void 0,n.modifiers):r==="pointer-up"&&n.downButton===i.native.button&&t.timestamp-n.startTimestamp<=this._maximumClickDelay&&!n.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(s),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function Zx(e,t,r){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:r}}let MNe=class extends is{constructor(t=$s.maximumDoubleClickDelay,r=$s.maximumDoubleClickDistance,i=$s.maximumDoubleTouchDelay,s=$s.maximumDoubleTouchDistance,n=a1){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=r,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=s,this._clock=n,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Kr(t.doubleClickTimer))}get hasPendingInputs(){return YE(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimer=Kr(i.doubleClickTimer),r&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);r.pointerDownCount===1&&this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){const r=t.data,{pointerType:i}=r.native,s=TNe(r);if(!this._pointerState.has(s))return void this._startClick(t);const n=this._pointerState.get(s),{data:o,modifiers:a}=n.event,l=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;NI(o,r)>l?(this._clearDoubleClickTimer(s,!0),this._startClick(t)):(this._clearDoubleClickTimer(s,!1),n.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(t){const r=sy(t.data),i=this._pointerState.get(r);i&&(i.pointerDownCount+=1)}_startClick(t){const{data:r}=t,{native:{pointerType:i}}=r,s=sy(r),n=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(s),n);this._pointerState.set(s,{event:t,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};function TNe(e){const{pointerId:t,pointerType:r,button:i}=e.native;return r==="mouse"?`${t}:${i}`:`${r}`}const Yx={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Mm=class extends et{initialize(){const t=()=>this.view?.ready;this.addHandles([Rh(()=>!t(),()=>this._disconnect()),Rh(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(t){return this._inputManager?.isModifierKeyDown(t)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=jr(this._inputManager)}_connect(){const t=this.view.surface,r=new Zse(t,this.view.input),i=[new SNe,new xNe,new MNe,new wNe(this.view.navigation),new bNe],s=new Ma({eventSource:r,recognizers:i});s.installHandlers("prevent-context-menu",[new yNe],wd.INTERNAL),s.installHandlers("navigation",[new aNe(this.view),new Xke(this.view),new oNe(this.view),new aB(this.view),new aB(this.view,[Yx.counter]),new Wke(this.view,"primary"),new rNe(this.view,Yx.pan),new sNe(this.view,Yx.zoom),new iNe(this.view,Yx.rotate),new Jke(this.view,"secondary"),new Hke(this.view,"touch")],wd.INTERNAL),this.view.viewEvents.connect(s),this._source=r,this._inputManager=s,ht(()=>this.view?.navigation?.browserTouchPanEnabled,n=>{this._source&&(this._source.browserTouchPanningEnabled=!n)},fn)}get test(){}};h([d()],Mm.prototype,"view",void 0),h([d()],Mm.prototype,"latestPointerType",null),h([d()],Mm.prototype,"latestPointerLocation",null),h([d()],Mm.prototype,"multiTouchActive",null),Mm=h([j("esri.views.2d.input.MapViewInputManager")],Mm);const INe=Mm;var dB,fB,mB,Xse={exports:{}};dB=Xse,fB=function(){function e(s,n,o,a,l){t(s,n,o||0,a||s.length-1,l||i)}function t(s,n,o,a,l){for(;a>o;){if(a-o>600){var u=a-o+1,c=n-o+1,p=Math.log(u),f=.5*Math.exp(2*p/3),m=.5*Math.sqrt(p*f*(u-f)/u)*(c-u/2<0?-1:1);t(s,n,Math.max(o,Math.floor(n-c*f/u+m)),Math.min(a,Math.floor(n+(u-c)*f/u+m)),l)}var g=s[n],b=o,w=a;for(r(s,o,n),l(s[a],g)>0&&r(s,o,a);b<w;){for(r(s,b,w),b++,w--;l(s[b],g)<0;)b++;for(;l(s[w],g)>0;)w--}l(s[o],g)===0?r(s,o,w):r(s,++w,a),w<=n&&(o=w+1),n<=w&&(a=w-1)}}function r(s,n,o){var a=s[n];s[n]=s[o],s[o]=a}function i(s,n){return s<n?-1:s>n?1:0}return e},(mB=fB())!==void 0&&(dB.exports=mB);const ENe=X6(Xse.exports);function DI(e,t){if(!(this instanceof DI))return new DI(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function ANe(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function Sg(e,t){Mw(e,0,e.children.length,t,e)}function Mw(e,t,r,i,s){s||(s=p0(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(var n,o=t;o<r;o++)n=e.children[o],Tw(s,e.leaf?i(n):n);return s}function Tw(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function yB(e,t){return e.minX-t.minX}function gB(e,t){return e.minY-t.minY}function Y5(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function Kx(e){return e.maxX-e.minX+(e.maxY-e.minY)}function $Ne(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function CNe(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),s=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY);return Math.max(0,s-r)*Math.max(0,n-i)}function K5(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function Xx(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function p0(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function vB(e,t,r,i,s){for(var n,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(n=t+Math.ceil((r-t)/i/2)*i,ENe(e,n,t,r,s),o.push(t,n,n,r))}DI.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!Xx(e,t))return r;for(var s,n,o,a,l=[];t;){for(s=0,n=t.children.length;s<n;s++)o=t.children[s],Xx(e,a=t.leaf?i(o):o)&&(t.leaf?r.push(o):K5(e,a)?this._all(o,r):l.push(o));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!Xx(e,t))return!1;for(var i,s,n,o,a=[];t;){for(i=0,s=t.children.length;i<s;i++)if(n=t.children[i],Xx(e,o=t.leaf?r(n):n)){if(t.leaf||K5(e,o))return!0;a.push(n)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var s=this.data;this.data=i,i=s}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e!=null&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=p0([]),this},remove:function(e,t){if(e==null)return this;for(var r,i,s,n,o=this.data,a=this.toBBox(e),l=[],u=[];o||l.length;){if(o||(o=l.pop(),i=l[l.length-1],r=u.pop(),n=!0),o.leaf&&(s=ANe(e,o.children,t))!==-1)return o.children.splice(s,1),l.push(o),this._condense(l),this;n||o.leaf||!K5(o,a)?i?(r++,o=i.children[r],n=!1):o=null:(l.push(o),u.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:yB,compareMinY:gB,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var s,n=r-t+1,o=this._maxEntries;if(n<=o)return Sg(s=p0(e.slice(t,r+1)),this.toBBox),s;i||(i=Math.ceil(Math.log(n)/Math.log(o)),o=Math.ceil(n/Math.pow(o,i-1))),(s=p0([])).leaf=!1,s.height=i;var a,l,u,c,p=Math.ceil(n/o),f=p*Math.ceil(Math.sqrt(o));for(vB(e,t,r,f,this.compareMinX),a=t;a<=r;a+=f)for(vB(e,a,u=Math.min(a+f-1,r),p,this.compareMinY),l=a;l<=u;l+=p)c=Math.min(l+p-1,u),s.children.push(this._build(e,l,c,i-1));return Sg(s,this.toBBox),s},_chooseSubtree:function(e,t,r,i){for(var s,n,o,a,l,u,c,p;i.push(t),!t.leaf&&i.length-1!==r;){for(c=p=1/0,s=0,n=t.children.length;s<n;s++)l=Y5(o=t.children[s]),(u=$Ne(e,o)-l)<p?(p=u,c=l<c?l:c,a=o):u===p&&l<c&&(c=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,s=r?e:i(e),n=[],o=this._chooseSubtree(s,this.data,t,n);for(o.children.push(e),Tw(o,s);t>=0&&n[t].children.length>this._maxEntries;)this._split(n,t),t--;this._adjustParentBBoxes(s,n,t)},_split:function(e,t){var r=e[t],i=r.children.length,s=this._minEntries;this._chooseSplitAxis(r,s,i);var n=this._chooseSplitIndex(r,s,i),o=p0(r.children.splice(n,r.children.length-n));o.height=r.height,o.leaf=r.leaf,Sg(r,this.toBBox),Sg(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=p0([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Sg(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,s,n,o,a,l,u,c;for(l=u=1/0,i=t;i<=r-t;i++)o=CNe(s=Mw(e,0,i,this.toBBox),n=Mw(e,i,r,this.toBBox)),a=Y5(s)+Y5(n),o<l?(l=o,c=i,u=a<u?a:u):o===l&&a<u&&(u=a,c=i);return c},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:yB,s=e.leaf?this.compareMinY:gB;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,s)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var s,n,o=this.toBBox,a=Mw(e,0,t,o),l=Mw(e,r-t,r,o),u=Kx(a)+Kx(l);for(s=t;s<r-t;s++)n=e.children[s],Tw(a,e.leaf?o(n):n),u+=Kx(a);for(s=r-t-1;s>=t;s--)n=e.children[s],Tw(l,e.leaf?o(n):n),u+=Kx(l);return u},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)Tw(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():Sg(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};let bB=class Qse{constructor(t,r){this.key=new Ld(0,0,0,0),this.bounds=mo(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.level=i.level,this.scale=i.scale,this.minScale=t.zoomToScale(i.level-1),this.maxScale=t.zoomToScale(i.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return yt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(t){return{$view:{scale:this.scale,timeZone:t}}}createChildTiles(){const t=this.key.getChildKeys(),r=Nn.acquire();for(let i=0;i<t.length;i++)r[i]=new Qse(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return Hee.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const Af={added:[],removed:[]},X5=new Set,ONe=new Ld(0,0,0,0);function PNe(e,t){const r=Un(t);if(!r)return null;const[i,s]=r.valid;return e[2]>s?[mo([e[0],e[1],s,e[3]]),mo([i,e[1],i+e[2]-s,e[3]])]:e[0]<i?[mo([i,e[1],e[2],e[3]]),mo([s-(i-e[0]),e[1],s,e[3]])]:null}let RNe=class extends jh{constructor(t){super(),this._tiles=new Map,this._index=DI(9,ce("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||NY(t)===0||DY(t)===0)return[];const r=PNe(t,this.tileScheme.spatialReference);return r!=null?[...new Set([...this.boundsIntersections(r[0]),...this.boundsIntersections(r[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const s=new bB(this.tileScheme,i);this._tiles.set(i,s),this._index.insert(s),r.added.push(s)}for(const i of t.removed)if(this.has(i)){const s=this.get(i);this._tiles.delete(i),this._index.remove(s),r.removed.push(s)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:s}=r,{level:n}=s;if(i.length>0)for(const{row:o,colFrom:a,colTo:l}of i)for(let u=a;u<=l;u++){const c=ONe.set(n,o,s.normalizeCol(u),s.getWorldForColumn(u)).id;if(X5.add(c),!this.has(c)){const p=new bB(this.tileScheme,c);this._tiles.set(c,p),this._index.insert(p),this.tiles.push(p),Af.added.push(p)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];X5.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Af.removed.push(a))}(Af.added.length||Af.removed.length)&&this.emit("update",Af),a2.pool.release(r),X5.clear(),Af.added.length=0,Af.removed.length=0}},Up=class extends et{constructor(){super(...arguments),this.color=new Le([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25,this.multiHighlightEnabled=!1}equals(t){return this.color.equals(t.color)&&(this.haloColor||this.color).equals(t.haloColor||t.color)&&this.haloOpacity===t.haloOpacity&&this.fillOpacity===t.fillOpacity&&this.multiHighlightEnabled===t.multiHighlightEnabled}};h([d({type:Le})],Up.prototype,"color",void 0),h([d({type:Le})],Up.prototype,"haloColor",void 0),h([d()],Up.prototype,"haloOpacity",void 0),h([d()],Up.prototype,"fillOpacity",void 0),h([d()],Up.prototype,"multiHighlightEnabled",void 0),Up=h([j("esri.views.2d.support.HighlightOptions")],Up);const ene=Up,Qx=e=>parseFloat(e)/100;function LNe(e,t,r){const i=typeof e.left=="string"?Qx(e.left)*t:e.left,s=typeof e.right=="string"?Qx(e.right)*t:e.right,n=typeof e.top=="string"?Qx(e.top)*r:e.top,o=typeof e.bottom=="string"?Qx(e.bottom)*r:e.bottom,a=n;return{xmin:i,xmax:Math.max(t-s,i),ymin:a,ymax:Math.max(r-o,n)}}function kNe(e,t,r,i){switch(t.type){case"rect":{const{width:s,height:n}=e,{xmin:o,xmax:a,ymin:l,ymax:u}=LNe(t,s,n),{x:c,y:p}=r;return c>o&&c<a&&p>l&&p<u}case"path":return t.path.length===0||!Array.isArray(t.path[0][0])||jD(t.path,[r.x,r.y]);case"geometry":return t.geometry==null||(t.geometry.type==="polygon"?FD(t.geometry,i):G2(t.geometry,i))}}async function NNe(e,t,r){const i=Yie(t)?Zie(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let s=new Set;const n=new Set;let o=!1,a=null,l=null;r?.include?_B(r.include,wB(e,f=>{s.add(f),Q5(f,m=>n.add(m))},(f,m)=>{n.add(f),s.add(m)},f=>{a||(a=new Set),a.add(f)},f=>s.add(f),()=>o=!0)):(o=!0,s=new Set(e.allLayerViews),s.forEach(f=>{Q5(f,m=>n.add(m))})),r?.exclude&&_B(r.exclude,wB(e,f=>{s.delete(f),Q5(f,m=>n.delete(m))},f=>n.delete(f),f=>{l||(l=new Set),l.add(f)}));const u=e.toMap(i),c=e.allLayerViews.filter(f=>!f.suspended&&s.has(f)&&f.clips.every(m=>kNe(e,m,i,u))).reverse();let p=[...o?e.graphicsView.hitTest(u).map(f=>({type:"graphic",graphic:f,layer:null,mapPoint:u})):[],...await Promise.all(c.map(f=>f.hitTest(u,i)).toArray())].filter(ra).flat().filter(ra);return p=p.filter(f=>f.type!=="graphic"||f.layer?.type!=="subtype-group"||n.has(f.graphic.layer)),a&&(p=p.filter(f=>!("graphic"in f)||!f.graphic||a?.has(Xk(f.graphic)))),l&&(p=p.filter(f=>!("graphic"in f)||!f.graphic||!l?.has(Xk(f.graphic)))),{screenPoint:i,results:p}}function wB(e,t,r,i,s,n){return o=>{if(o instanceof Ga){if(o.layer===e)n?.();else{const a=e.allLayerViews.find(l=>l.layer===o.layer);a&&s?.(a)}i(Xk(o))}else if(!("layer"in o&&"element"in o))if(o.type==="subtype-sublayer"){const a=e.allLayerViews.find(l=>l.layer===o.parent);a&&r(o,a)}else{const a=e.allLayerViews.find(l=>l.layer===o);a&&t(a)}}}function _B(e,t){if(e)if(C3(e))for(const r of e)if(C3(r))for(const i of r)t(i);else t(r);else t(e)}function Xk(e){const t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function Q5({layer:e},t){e?.type==="subtype-group"&&e.sublayers.forEach(r=>{t(r)})}function DNe(e,t,r){const{ctx:i,canvas:s}=tne(e,r),n=i.getImageData(0,0,e.width,e.height),o=VNe(s,t);return rne(s),{dataUrl:o,data:n}}function FNe(e,t){const{ctx:r,canvas:i}=tne(e,t),s=r.getImageData(0,0,e.width,e.height);return rne(i),s}function tne(e,t){const r=jNe();t.premultipliedAlpha&&qNe(e),r.width=e.width,r.height=e.height;const i=r.getContext("2d",{willReadFrequently:!0});return i.putImageData(e,0,0),t.flipY&&BNe(i),{ctx:i,canvas:r}}function rne(e){e.width=0,e.height=0}function jNe(){return eC==null&&(eC=document.createElement("canvas")),eC}let eC=null;function VNe(e,t){const r=HNe[t.format],i=t.quality/100;return e.toDataURL(r,i)}function UNe(e,t){const r=GNe(e),i=JNe[r];return{format:r,quality:Gl(t??i,0,100)}}function zNe(e,t){return t/Math.max(e[0],e[1])}function ect(e,t,r,i=0,s=0,n=e.width-i,o=e.height-s,a=!1){const{data:l}=e,{width:u,height:c,data:p}=t,f=n/u,m=o/c,g=Math.ceil(f/2),b=Math.ceil(m/2),w=e.width;for(let S=0;S<c;S++)for(let M=0;M<u;M++){const x=4*(M+(a?c-S-1:S)*u);let _=0,I=0,E=0,A=0,C=0,O=0;const R=(S+.5)*m;for(let D=Math.floor(S*m);D<(S+1)*m;D++){const N=Math.abs(R-(D+.5))/b,U=(M+.5)*f,J=N*N;for(let y=Math.floor(M*f);y<(M+1)*f;y++){const T=Math.abs(U-(y+.5))/g,$=Math.sqrt(J+T*T);if($>=1)continue;let P=2*$*$*$-3*$*$+1;const z=4*(i+y+(s+D)*w);O+=P*l[z+3],I+=P,E+=P*l[z],A+=P*l[z+1],C+=P*l[z+2],_+=P}}p[x]=E/_,p[x+1]=A/_,p[x+2]=C/_,p[x+3]=O/I}return t}function GNe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return WNe}}function BNe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function qNe(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const s=t[i+3];if(s!==255&&s>0){const n=255/s;t[i]=t[i]*n,t[i+1]=t[i+1]*n,t[i+2]=t[i+2]*n}}}const HNe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},SB=98,WNe="png",JNe={png:100,jpg:SB,jpeg:SB},ine={flipY:!0,premultipliedAlpha:!0};async function ZNe(e,t){const r=await sne(e,t),{format:i,quality:s}=UNe(t?.format,t?.quality);return DNe(r,{format:i,quality:s,rotation:0,disableDecorations:!1},ine)}async function YNe(e,t){const r=await sne(e,t);return FNe(r,ine)}function sne(e,t){const r=QNe(t||{},XNe(e.stage,e.size),e.size,e.padding),i=KNe(t,e.allLayerViews);return e.stage.takeScreenshot(r,i,e.backgroundColor,t?.rotation)}function KNe(e={},t){if(!e.layers)return;const r=[];return e.layers.forEach(i=>{const s=t.find(n=>n.layer.id===i.id);s?.container&&r.push(s.container)}),r}function XNe(e,t){return Math.min(4,zNe(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function QNe(e,t,r,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let s=null;e.width!=null&&e.height!=null?s=[e.width,e.height]:e.width==null&&e.height!=null?s=[e.height,e.height]:e.width!=null&&e.height==null?s=[e.width,e.width]:e.width==null&&e.height==null&&(s=null);const n=r[0]-(i.left+i.right),o=r[1]-(i.top+i.bottom);let a,l,u=e.area||{x:0,y:0,width:n,height:o};if(s){const c=n/o,p=s[0]/s[1];if(p>c){const f=u.width/p;u={x:u.x,y:Math.round(u.y+(u.height-f)/2),width:u.width,height:Math.round(f)}}else{const f=u.height*p;u={x:Math.round(u.x+(u.width-f)/2),y:u.y,width:Math.round(f),height:u.height}}}else s=[u.width,u.height];return s[0]>u.width?(a=Math.min(s[0]/u.width,t),l=s[0]/u.width/a):(a=1,l=s[0]/u.width),{cropArea:{x:Math.round((u.x+i.left)*a),y:Math.round((u.y+i.top)*a),width:Math.round(u.width*a),height:Math.round(u.height*a)},outputScale:l,resolutionScale:a}}const xB=160;let Iw=class extends et{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=xB&&this.clear()},xB))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};h([d()],Iw.prototype,"_timer",void 0),h([d()],Iw.prototype,"stationary",null),Iw=h([j("esri.views.2d.support.StationaryManager")],Iw);const eDe=e=>e.includes("Brush");let nne=class{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),eDe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}};function MB(e,t={}){return e.getContext("webgl2",t)||null}let tC;function tDe(){return tC||(tC=sDe()),tC}let rDe=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}};function iDe(e){if(typeof WebGL2RenderingContext>"u")return null;const t=document.createElement("canvas");if(!t)return null;let r=MB(t,{failIfMajorPerformanceCaveat:!0});if(r==null&&(r=MB(t),r!=null&&(e.majorPerformanceCaveat=!0)),r==null)return r;e.available=!0,e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const i=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);return i&&(e.supportsHighPrecisionFragment=i.precision>0),r}function sDe(){const e=new rDe,t=iDe(e);return t==null||(e.supportsColorBufferFloat=t.getExtension("EXT_color_buffer_float")!==null,e.supportsColorBufferFloatBlend=t.getExtension("EXT_float_blend")!==null,e.supportsColorBufferHalfFloat=e.supportsColorBufferFloat||t.getExtension("EXT_color_buffer_half_float")!==null),e}function nDe(e){const t=tDe();return t.available?e==="3d"&&t.majorPerformanceCaveat?new K("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new K("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new K("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new K("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function oDe(e){return e&&"nodeType"in e}function aDe(e){return e&&typeof e.render=="function"}const TB={component:"esri-component"};let Tm=class extends et{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(t){this._set("id",t)}set node(t){const r=this._get("node");t!==r&&(t&&t.classList.add(TB.component),r&&r.classList.remove(TB.component),this._set("node",t))}castNode(t){return this.widget?.destroy(),t?typeof t=="string"||oDe(t)?(this._set("widget",null),eF(t)):(aDe(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};h([d()],Tm.prototype,"id",null),h([d()],Tm.prototype,"node",null),h([Zt("node")],Tm.prototype,"castNode",null),h([d({readOnly:!0})],Tm.prototype,"widget",void 0),Tm=h([j("esri.views.ui.Component")],Tm);const c3=Tm,one="calcite-mode-";function lDe(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replaceAll(/\s|'|"/g,"")}function uDe(){return lDe().startsWith("dark")}function cDe(){return`${one}${uDe()?"dark":"light"}`}function hDe(e){pDe(e),e.classList.add(cDe())}function pDe(e){Array.from(e.classList).forEach(t=>{t.startsWith(one)&&e.classList.remove(t)})}const dDe={left:0,top:0,bottom:0,right:0},ane={bottom:30,top:15,right:15,left:15},xc="esri-ui",Yn={ui:xc,corner:`${xc}-corner`,innerContainer:`${xc}-inner-container`,manualContainer:`${xc}-manual-container`,cornerContainer:`${xc}-corner-container`,topLeft:`${xc}-top-left`,topRight:`${xc}-top-right`,bottomLeft:`${xc}-bottom-left`,bottomRight:`${xc}-bottom-right`};function fDe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function eM(e){return e===0?"0":`${e}px`}function rC(e){const t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function iC(e,{top:t,bottom:r,left:i,right:s}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=s}let bu=class extends jh.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Ko(),this.view=null,this._applyViewPadding=()=>{const t=this.container;t&&iC(t,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const t=this._innerContainer;t&&iC(t,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([ht(()=>[this.view?.padding,this.container],this._applyViewPadding,fn),ht(()=>this.padding,this._applyUIPadding,fn),ht(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},fn),rY(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(Yn.ui),hDe(e),this._attachContainers(e)),t&&(t.classList.remove(Yn.ui),iC(t,{top:"",bottom:"",left:"",right:""}),wie(t)),this._set("container",e))}get height(){const e=this.view?.height??0;if(e===0)return e;const t=this._getViewPadding(),{top:r,bottom:i}=t;return Math.max(e-r-i,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...ane,...e}}get width(){const e=this.view?.width??0;if(e===0)return e;const t=this._getViewPadding(),{left:r,right:i}=t;return Math.max(e-r-i,0)}add(e,t){let r,i,s;if(Array.isArray(e))return void e.forEach(o=>this.add(o,t));const n=rC(e);n&&({index:r,position:t,component:e,key:i}=n),t&&typeof t=="object"&&({index:r,key:i,position:t,internal:s}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,r,i,s)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(i=>this.remove(i,t));const r=this._find(e);if(r){if(this._componentMap.has(r)&&this._componentMap.get(r)?.key!==t)return;const i=this._components.indexOf(r);return r.node.parentNode?.removeChild(r.node),this._componentMap.delete(r),r.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(i,1)[0]}}empty(e,t={removeInternal:!1}){if(Array.isArray(e)){for(const s of e)this.empty(s,t);return}const r=this._positionNameToContainerLookup[e??"manual"],i=Array.prototype.slice.call(r.children).map(s=>this._findByNode(s)).filter(s=>s==null?!1:!(this._componentMap.get(s)?.internal??!1)||t.removeInternal);for(const s of i)this.remove(s)}move(e,t){if(Array.isArray(e)&&e.forEach(n=>this.move(n,t)),!e)return;let r;const i=rC(e)||rC(t);if(i&&(r=i.index,t=i.position,e=i.component||e),t&&!this._isValidPosition(t))return;const s=this.remove(e);s&&this.add(s,{position:t,index:r})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getComponents(e,t={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(r=>this._getComponentsAtPosition(r,t)):this._getComponentsAtPosition(e,t):this._components.filter(r=>t.includeInternal||!this._componentMap.get(r)?.internal).map(({widget:r,node:i})=>r??i)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,r,i,s){e instanceof c3||(e=new c3({node:e}));const{widget:n}=e;n!=null&&n instanceof et&&n.addHandles(or(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._place({component:e,position:t,index:r}),this._components.push(e),this._componentMap.set(e,{key:i,internal:s})}_find(e){return e?e instanceof c3?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.view?.padding??dDe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Yn.innerContainer,Yn.cornerContainer);const t=document.createElement("div");t.classList.add(Yn.innerContainer,Yn.manualContainer);const r=document.createElement("div");r.classList.add(Yn.topLeft,Yn.corner),e.appendChild(r);const i=document.createElement("div");i.classList.add(Yn.topRight,Yn.corner),e.appendChild(i);const s=document.createElement("div");s.classList.add(Yn.bottomLeft,Yn.corner),e.appendChild(s);const n=document.createElement("div");n.classList.add(Yn.bottomRight,Yn.corner),e.appendChild(n),this._innerContainer=e,this._manualContainer=t;const o=$Oe();this._cornerNameToContainerLookup={"top-left":r,"top-right":i,"bottom-left":s,"bottom-right":n,"top-leading":o?i:r,"top-trailing":o?r:i,"bottom-leading":o?n:s,"bottom-trailing":o?s:n},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.position??"manual",{component:r,index:i}=e,s=this._positionNameToContainerLookup[t],n=i!=null&&i>-1;if(fDe(r.widget)&&r.widget.startup(),!n)return void s.appendChild(r.node);const o=Array.from(s.children);if(i===0)return void(s.firstChild?IG(r.node,s.firstChild):s.appendChild(r.node));i>=o.length?s.appendChild(r.node):IG(r.node,o[i])}_toPixelPosition(e){return{top:eM(e.top),left:eM(e.left),right:eM(e.right),bottom:eM(e.bottom)}}_findByComponent(e){return this._components.find(t=>t===e)??null}_findById(e){return this._components.find(({id:t})=>t===e)??null}_findByNode(e){return this._components.find(({node:t})=>t===e)??null}_getComponentsAtPosition(e,t){const r=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(r.children).map(i=>this._findByNode(i)).filter(ra).filter(i=>t.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:s})=>i??s)}};h([d()],bu.prototype,"_locale",void 0),h([d()],bu.prototype,"container",null),h([d()],bu.prototype,"height",null),h([d({value:ane})],bu.prototype,"padding",null),h([Zt("padding")],bu.prototype,"castPadding",null),h([d()],bu.prototype,"view",void 0),h([d()],bu.prototype,"width",null),bu=h([j("esri.views.ui.UI")],bu);const mDe=bu,yDe={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},gDe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},vDe=e=>({...gDe,...e}),bDe=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},wDe=(e,t)=>e.find(t),IB=(e,t,r=!1)=>{let i=e;return t.forEach((s,n)=>{const o=i?.children?wDe(i.children,a=>a.domNode===s):void 0;r&&!o&&n!==t.length-1||(i=o)}),i},_De=e=>{let t;const r={...yDe,...e},i=vDe(r),s=i.performanceLogger;let n,o=!0,a=!1;const l=[],u=[],c=(f,m,g)=>{let b;i.eventHandlerInterceptor=(S,M,x,_)=>function(I){let E;s("domEvent",I);const A=bDe(I.currentTarget,b.domNode),C=A.some(R=>customElements.get(R?.tagName?.toLowerCase()));if(I.eventPhase===Event.CAPTURING_PHASE||!C)A.reverse(),E=IB(b.getLastRender(),A);else{const R=I.composedPath(),D=R.slice(R.indexOf(I.currentTarget),R.indexOf(b.domNode)).reverse();E=IB(b.getLastRender(),D,!0)}let O;return E&&(O=r.handleInterceptedEvent(t,E,this,I)),s("domEventProcessed",I),O},r.postProcessProjectionOptions?.(i);const w=g();b=f(m,w,i),i.eventHandlerInterceptor=void 0,l.push(b),u.push(g),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(b,w)};let p=()=>{if(n=void 0,o){o=!1,s("renderStart",void 0);for(let f=0;f<l.length;f++){const m=u[f]();s("rendered",void 0),l[f].update(m),s("patched",void 0)}s("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(p=r.modifyDoRenderImplementation(p,l,u)),t={renderNow:p,scheduleRender:()=>{n||a||(n=requestAnimationFrame(p))},stop:()=>{n&&(cancelAnimationFrame(n),n=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(f,m)=>{c(fd.append,f,m)},insertBefore:(f,m)=>{c(fd.insertBefore,f,m)},merge:(f,m)=>{c(fd.merge,f,m)},replace:(f,m)=>{c(fd.replace,f,m)},detach:f=>{for(let m=0;m<u.length;m++)if(u[m]===f)return u.splice(m,1),l.splice(m,1)[0];throw new Error("renderFunction was not found")}},t};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const lne="calcite-mode-auto",une="calcite-mode-dark",SDe="calcite-mode-light",nct={autoMode:lne,darkMode:une,lightMode:SDe,rtl:"calcite--rtl",calciteAnimate:"calcite-animate",calciteAnimateIn:"calcite-animate__in",calciteAnimateInUp:"calcite-animate__in-up",calciteAnimateInDown:"calcite-animate__in-down",calciteAnimateInRight:"calcite-animate__in-right",calciteAnimateInLeft:"calcite-animate__in-left",calciteAnimateInScale:"calcite-animate__in-scale"},oct={filter:250,nextTick:0,resize:150,reposition:100};var Oa={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1},xDe=Object.defineProperty,MDe=(e,t)=>{for(var r in t)xDe(e,r,{get:t[r],enumerable:!0})},cne=new WeakMap,eg=e=>cne.get(e),TDe=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return cne.set(e,r)},EB=(e,t)=>t in e,vS=(e,t)=>(0,console.error)(e,t),FI=new Map,IDe=[],EDe="slot-fb{display:contents}slot-fb[hidden]{display:none}",AB="http://www.w3.org/1999/xlink",bS=typeof window<"u"?window:{},Dl=bS.document||{head:{}},act=bS.HTMLElement||class{},_s={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,i)=>e.addEventListener(t,r,i),rel:(e,t,r,i)=>e.removeEventListener(t,r,i),ce:(e,t)=>new CustomEvent(e,t)},ADe=(()=>{let e=!1;try{Dl.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),$De=e=>Promise.resolve(e),CDe=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),Qk=!1,eN=[],hne=[],pne=(e,t)=>r=>{e.push(r),Qk||(Qk=!0,t&&_s.$flags$&4?ODe(tN):_s.raf(tN))},$B=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){vS(r)}e.length=0},tN=()=>{$B(eN),$B(hne),(Qk=eN.length>0)&&_s.raf(tN)},ODe=e=>$De().then(e),lct=pne(eN,!1),PDe=pne(hne,!0),RDe=e=>{const t=new URL(e,_s.$resourcesUrl$);return t.origin!==bS.location.origin?t.href:t.pathname},LDe=e=>_s.$resourcesUrl$=e,CB={},kDe="http://www.w3.org/2000/svg",NDe="http://www.w3.org/1999/xhtml",DDe=e=>e!=null,gF=e=>(e=typeof e,e==="object"||e==="function");function FDe(e){var t,r,i;return(i=(r=(t=e.head)==null?void 0:t.querySelector('meta[name="csp-nonce"]'))==null?void 0:r.getAttribute("content"))!=null?i:void 0}var jDe={};MDe(jDe,{err:()=>dne,map:()=>VDe,ok:()=>rN,unwrap:()=>UDe,unwrapErr:()=>zDe});var rN=e=>({isOk:!0,isErr:!1,value:e}),dne=e=>({isOk:!1,isErr:!0,value:e});function VDe(e,t){if(e.isOk){const r=t(e.value);return r instanceof Promise?r.then(i=>rN(i)):rN(r)}if(e.isErr){const r=e.value;return dne(r)}throw"should never get here"}var UDe=e=>{if(e.isOk)return e.value;throw e.value},zDe=e=>{if(e.isErr)return e.value;throw e.value},Ly=(e,t="")=>()=>{},fne=(e,t,...r)=>{let i=null,s=null,n=null,o=!1,a=!1;const l=[],u=p=>{for(let f=0;f<p.length;f++)i=p[f],Array.isArray(i)?u(i):i!=null&&typeof i!="boolean"&&((o=typeof e!="function"&&!gF(i))&&(i=String(i)),o&&a?l[l.length-1].$text$+=i:l.push(o?jI(null,i):i),a=o)};if(u(r),t){t.key&&(s=t.key),t.name&&(n=t.name);{const p=t.className||t.class;p&&(t.class=typeof p!="object"?p:Object.keys(p).filter(f=>p[f]).join(" "))}}if(typeof e=="function")return e(t===null?{}:t,l,qDe);const c=jI(e,null);return c.$attrs$=t,l.length>0&&(c.$children$=l),c.$key$=s,c.$name$=n,c},jI=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return r.$attrs$=null,r.$key$=null,r.$name$=null,r},GDe={},BDe=e=>e&&e.$tag$===GDe,qDe={forEach:(e,t)=>e.map(OB).forEach(t),map:(e,t)=>e.map(OB).map(t).map(HDe)},OB=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),HDe=e=>{if(typeof e.vtag=="function"){const r={...e.vattrs};return e.vkey&&(r.key=e.vkey),e.vname&&(r.name=e.vname),fne(e.vtag,r,...e.vchildren||[])}const t=jI(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},WDe=e=>IDe.map(t=>t(e)).find(t=>!!t),JDe=(e,t)=>e!=null&&!gF(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,ZDe=e=>e,uct=(e,t,r)=>{const i=ZDe(e);return{emit:s=>YDe(i,t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:s})}},YDe=(e,t,r)=>{const i=_s.ce(t,r);return e.dispatchEvent(i),i},PB=new WeakMap,KDe=(e,t,r)=>{let i=FI.get(e);CDe&&r?(i=i||new CSSStyleSheet,typeof i=="string"?i=t:i.replaceSync(t)):i=t,FI.set(e,i)},XDe=(e,t,r)=>{var i;const s=mne(t,r),n=FI.get(s);if(e=e.nodeType===11?e:Dl,n)if(typeof n=="string"){e=e.head||e;let o=PB.get(e),a;if(o||PB.set(e,o=new Set),!o.has(s)){{a=Dl.createElement("style"),a.innerHTML=n;const l=(i=_s.$nonce$)!=null?i:FDe(Dl);l!=null&&a.setAttribute("nonce",l),(!(t.$flags$&1)||t.$flags$&1&&e.nodeName!=="HEAD")&&e.insertBefore(a,e.querySelector("link"))}t.$flags$&4&&(a.innerHTML+=EDe),o&&o.add(s)}}else e.adoptedStyleSheets.includes(n)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,n]);return s},QDe=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,i=t.$flags$,s=Ly("attachStyles",t.$tagName$),n=XDe(r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);i&10&&i&2&&(r["s-sc"]=n,r.classList.add(n+"-h"),i&2&&r.classList.add(n+"-s")),s()},mne=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),RB=(e,t,r,i,s,n)=>{if(r!==i){let o=EB(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,u=LB(r),c=LB(i);l.remove(...u.filter(p=>p&&!c.includes(p))),l.add(...c.filter(p=>p&&!u.includes(p)))}else if(t==="style"){for(const l in r)(!i||i[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in i)(!r||i[l]!==r[l])&&(l.includes("-")?e.style.setProperty(l,i[l]):e.style[l]=i[l])}else if(t!=="key")if(t==="ref")i&&i(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n"){if(t[2]==="-"?t=t.slice(3):EB(bS,a)?t=a.slice(2):t=a[2]+t.slice(3),r||i){const l=t.endsWith(yne);t=t.replace(t6e,""),r&&_s.rel(e,t,r,l),i&&_s.ael(e,t,i,l)}}else{const l=gF(i);if((o||l&&i!==null)&&!s)try{if(e.tagName.includes("-"))e[t]=i;else{const c=i??"";t==="list"?o=!1:(r==null||e[t]!=c)&&(e[t]=c)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,u=!0),i==null||i===!1?(i!==!1||e.getAttribute(t)==="")&&(u?e.removeAttributeNS(AB,t):e.removeAttribute(t)):(!o||n&4||s)&&!l&&(i=i===!0?"":i,u?e.setAttributeNS(AB,t,i):e.setAttribute(t,i))}}},e6e=/\s/,LB=e=>e?e.split(e6e):[],yne="Capture",t6e=new RegExp(yne+"$"),gne=(e,t,r)=>{const i=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||CB,n=t.$attrs$||CB;for(const o of kB(Object.keys(s)))o in n||RB(i,o,s[o],void 0,r,t.$flags$);for(const o of kB(Object.keys(n)))RB(i,o,s[o],n[o],r,t.$flags$)};function kB(e){return e.includes("ref")?[...e.filter(t=>t!=="ref"),"ref"]:e}var d0,iN,jv,VI=!1,UI=!1,vF=!1,Vo=!1,zI=(e,t,r,i)=>{var s;const n=t.$children$[r];let o=0,a,l,u;if(VI||(vF=!0,n.$tag$==="slot"&&(d0&&i.classList.add(d0+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)a=n.$elm$=Dl.createTextNode(n.$text$);else if(n.$flags$&1)a=n.$elm$=Dl.createTextNode("");else{if(Vo||(Vo=n.$tag$==="svg"),a=n.$elm$=Dl.createElementNS(Vo?kDe:NDe,!VI&&Oa.slotRelocation&&n.$flags$&2?"slot-fb":n.$tag$),Vo&&n.$tag$==="foreignObject"&&(Vo=!1),gne(null,n,Vo),!!a.getRootNode().querySelector("body")&&Oa.scoped&&DDe(d0)&&a["s-si"]!==d0&&a.classList.add(a["s-si"]=d0),wF(a,i),n.$children$)for(o=0;o<n.$children$.length;++o)l=zI(e,n,o,a),l&&a.appendChild(l);n.$tag$==="svg"?Vo=!1:a.tagName==="foreignObject"&&(Vo=!0)}return a["s-hn"]=jv,n.$flags$&3&&(a["s-sr"]=!0,a["s-cr"]=iN,a["s-sn"]=n.$name$||"",a["s-rf"]=(s=n.$attrs$)==null?void 0:s.ref,u=e&&e.$children$&&e.$children$[r],u&&u.$tag$===n.$tag$&&e.$elm$&&l2(e.$elm$,!1)),a},l2=(e,t)=>{_s.$flags$|=1;const r=Array.from(e.childNodes);if(e["s-sr"]&&Oa.experimentalSlotFixes){let i=e;for(;i=i.nextSibling;)i&&i["s-sn"]===e["s-sn"]&&i["s-sh"]===jv&&r.push(i)}for(let i=r.length-1;i>=0;i--){const s=r[i];s["s-hn"]!==jv&&s["s-ol"]&&(_d(wne(s),s,bF(s)),s["s-ol"].remove(),s["s-ol"]=void 0,s["s-sh"]=void 0,vF=!0),t&&l2(s,t)}_s.$flags$&=-2},vne=(e,t,r,i,s,n)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===jv&&(o=o.shadowRoot);s<=n;++s)i[s]&&(a=zI(null,r,s,e),a&&(i[s].$elm$=a,_d(o,a,bF(t))))},bne=(e,t,r)=>{for(let i=t;i<=r;++i){const s=e[i];if(s){const n=s.$elm$;xne(s),n&&(UI=!0,n["s-ol"]?n["s-ol"].remove():l2(n,!0),n.remove())}}},r6e=(e,t,r,i,s=!1)=>{let n=0,o=0,a=0,l=0,u=t.length-1,c=t[0],p=t[u],f=i.length-1,m=i[0],g=i[f],b,w;for(;n<=u&&o<=f;)if(c==null)c=t[++n];else if(p==null)p=t[--u];else if(m==null)m=i[++o];else if(g==null)g=i[--f];else if(tM(c,m,s))f0(c,m,s),c=t[++n],m=i[++o];else if(tM(p,g,s))f0(p,g,s),p=t[--u],g=i[--f];else if(tM(c,g,s))(c.$tag$==="slot"||g.$tag$==="slot")&&l2(c.$elm$.parentNode,!1),f0(c,g,s),_d(e,c.$elm$,p.$elm$.nextSibling),c=t[++n],g=i[--f];else if(tM(p,m,s))(c.$tag$==="slot"||g.$tag$==="slot")&&l2(p.$elm$.parentNode,!1),f0(p,m,s),_d(e,p.$elm$,c.$elm$),p=t[--u],m=i[++o];else{for(a=-1,l=n;l<=u;++l)if(t[l]&&t[l].$key$!==null&&t[l].$key$===m.$key$){a=l;break}a>=0?(w=t[a],w.$tag$!==m.$tag$?b=zI(t&&t[o],r,a,e):(f0(w,m,s),t[a]=void 0,b=w.$elm$),m=i[++o]):(b=zI(t&&t[o],r,o,e),m=i[++o]),b&&_d(wne(c.$elm$),b,bF(c.$elm$))}n>u?vne(e,i[f+1]==null?null:i[f+1].$elm$,r,i,o,f):o>f&&bne(t,n,u)},tM=(e,t,r=!1)=>e.$tag$===t.$tag$?e.$tag$==="slot"?"$nodeId$"in e&&r&&e.$elm$.nodeType!==8?!1:e.$name$===t.$name$:r?!0:e.$key$===t.$key$:!1,bF=e=>e&&e["s-ol"]||e,wne=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,f0=(e,t,r=!1)=>{const i=t.$elm$=e.$elm$,s=e.$children$,n=t.$children$,o=t.$tag$,a=t.$text$;let l;a===null?(Vo=o==="svg"?!0:o==="foreignObject"?!1:Vo,o==="slot"&&!VI||gne(e,t,Vo),s!==null&&n!==null?r6e(i,s,t,n,r):n!==null?(e.$text$!==null&&(i.textContent=""),vne(i,null,t,n,0,n.length-1)):!r&&Oa.updatable&&s!==null&&bne(s,0,s.length-1),Vo&&o==="svg"&&(Vo=!1)):(l=i["s-cr"])?l.parentNode.textContent=a:e.$text$!==a&&(i.data=a)},_ne=e=>{const t=e.childNodes;for(const r of t)if(r.nodeType===1){if(r["s-sr"]){const i=r["s-sn"];r.hidden=!1;for(const s of t)if(s!==r){if(s["s-hn"]!==r["s-hn"]||i!==""){if(s.nodeType===1&&(i===s.getAttribute("slot")||i===s["s-sn"])||s.nodeType===3&&i===s["s-sn"]){r.hidden=!0;break}}else if(s.nodeType===1||s.nodeType===3&&s.textContent.trim()!==""){r.hidden=!0;break}}}_ne(r)}},dh=[],Sne=e=>{let t,r,i;for(const s of e.childNodes){if(s["s-sr"]&&(t=s["s-cr"])&&t.parentNode){r=t.parentNode.childNodes;const n=s["s-sn"];for(i=r.length-1;i>=0;i--)if(t=r[i],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==s["s-hn"]&&!Oa.experimentalSlotFixes)if(NB(t,n)){let o=dh.find(a=>a.$nodeToRelocate$===t);UI=!0,t["s-sn"]=t["s-sn"]||n,o?(o.$nodeToRelocate$["s-sh"]=s["s-hn"],o.$slotRefNode$=s):(t["s-sh"]=s["s-hn"],dh.push({$slotRefNode$:s,$nodeToRelocate$:t})),t["s-sr"]&&dh.map(a=>{NB(a.$nodeToRelocate$,t["s-sn"])&&(o=dh.find(l=>l.$nodeToRelocate$===t),o&&!a.$slotRefNode$&&(a.$slotRefNode$=o.$slotRefNode$))})}else dh.some(o=>o.$nodeToRelocate$===t)||dh.push({$nodeToRelocate$:t})}s.nodeType===1&&Sne(s)}},NB=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",xne=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(xne)},_d=(e,t,r)=>{const i=e?.insertBefore(t,r);return wF(t,e),i},Mne=e=>{const t=[];return e&&t.push(...e["s-scs"]||[],e["s-si"],e["s-sc"],...Mne(e.parentElement)),t},wF=(e,t,r=!1)=>{var i;if(e&&t&&e.nodeType===1){const s=new Set(Mne(t).filter(Boolean));if(s.size&&((i=e.classList)==null||i.add(...e["s-scs"]=[...s]),e["s-ol"]||r))for(const n of Array.from(e.childNodes))wF(n,e,!0)}},i6e=(e,t,r=!1)=>{var i,s,n,o,a;const l=e.$hostElement$,u=e.$cmpMeta$,c=e.$vnode$||jI(null,null),p=BDe(t)?t:fne(null,null,t);if(jv=l.tagName,u.$attrsToReflect$&&(p.$attrs$=p.$attrs$||{},u.$attrsToReflect$.map(([f,m])=>p.$attrs$[m]=l[f])),r&&p.$attrs$)for(const f of Object.keys(p.$attrs$))l.hasAttribute(f)&&!["key","ref","style","class"].includes(f)&&(p.$attrs$[f]=l[f]);p.$tag$=null,p.$flags$|=4,e.$vnode$=p,p.$elm$=c.$elm$=l.shadowRoot||l,d0=l["s-sc"],VI=(u.$flags$&1)!==0,iN=l["s-cr"],UI=!1,f0(c,p,r);{if(_s.$flags$|=1,vF){Sne(p.$elm$);for(const f of dh){const m=f.$nodeToRelocate$;if(!m["s-ol"]){const g=Dl.createTextNode("");g["s-nr"]=m,_d(m.parentNode,m["s-ol"]=g,m)}}for(const f of dh){const m=f.$nodeToRelocate$,g=f.$slotRefNode$;if(g){const b=g.parentNode;let w=g.nextSibling;{let S=(i=m["s-ol"])==null?void 0:i.previousSibling;for(;S;){let M=(s=S["s-nr"])!=null?s:null;if(M&&M["s-sn"]===m["s-sn"]&&b===M.parentNode){for(M=M.nextSibling;M===m||M?.["s-sr"];)M=M?.nextSibling;if(!M||!M["s-nr"]){w=M;break}}S=S.previousSibling}}(!w&&b!==m.parentNode||m.nextSibling!==w)&&m!==w&&(!m["s-hn"]&&m["s-ol"]&&(m["s-hn"]=m["s-ol"].parentNode.nodeName),_d(b,m,w),m.nodeType===1&&(m.hidden=(n=m["s-ih"])!=null?n:!1)),m&&typeof g["s-rf"]=="function"&&g["s-rf"](m)}else m.nodeType===1&&(r&&(m["s-ih"]=(o=m.hidden)!=null?o:!1),m.hidden=!0)}}UI&&_ne(p.$elm$),_s.$flags$&=-2,dh.length=0}if(Oa.experimentalScopedSlotChanges&&u.$flags$&2)for(const f of p.$elm$.childNodes)f["s-hn"]!==jv&&!f["s-sh"]&&(r&&f["s-ih"]==null&&(f["s-ih"]=(a=f.hidden)!=null?a:!1),f.hidden=!0);iN=void 0},s6e=(e,t)=>{},_F=(e,t)=>(e.$flags$|=16,s6e(e,e.$ancestorComponent$),PDe(()=>n6e(e,t))),n6e=(e,t)=>{const r=e.$hostElement$,i=Ly("scheduleUpdate",e.$cmpMeta$.$tagName$),s=r;if(!s)throw new Error(`Can't render component <${r.tagName.toLowerCase()} /> with invalid Stencil runtime! Make sure this imported component is compiled with a \`externalRuntime: true\` flag. For more information, please refer to https://stenciljs.com/docs/custom-elements#externalruntime`);let n;return t?n=pv(s,"componentWillLoad"):n=pv(s,"componentWillUpdate"),n=DB(n,()=>pv(s,"componentWillRender")),i(),DB(n,()=>a6e(e,s,t))},DB=(e,t)=>o6e(e)?e.then(t).catch(r=>{console.error(r),t()}):t(),o6e=e=>e instanceof Promise||e&&e.then&&typeof e.then=="function",a6e=async(e,t,r)=>{const i=e.$hostElement$,s=Ly("update",e.$cmpMeta$.$tagName$);i["s-rc"],r&&QDe(e);const n=Ly("render",e.$cmpMeta$.$tagName$);l6e(e,t,i,r),n(),s(),u6e(e)},FB=null,l6e=(e,t,r,i)=>{try{FB=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Oa.hasRenderFn||Oa.reflect)&&(Oa.vdomRender||Oa.reflect)&&(Oa.hydrateServerSide||i6e(e,t,i))}catch(l){vS(l,e.$hostElement$)}return FB=null,null},u6e=e=>{const t=e.$cmpMeta$.$tagName$,r=e.$hostElement$,i=Ly("postUpdate",t),s=r;e.$ancestorComponent$,pv(s,"componentDidRender"),e.$flags$&64?(pv(s,"componentDidUpdate"),i()):(e.$flags$|=64,pv(s,"componentDidLoad"),i())},cct=e=>{{const t=eg(e),r=t.$hostElement$.isConnected;return r&&(t.$flags$&18)===2&&_F(t,!1),r}},pv=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(i){vS(i)}},c6e=(e,t)=>eg(e).$instanceValues$.get(t),h6e=(e,t,r,i)=>{const s=eg(e),n=e,o=s.$instanceValues$.get(t),a=s.$flags$,l=n;r=JDe(r,i.$members$[t][0]);const u=Number.isNaN(o)&&Number.isNaN(r);if(r!==o&&!u){s.$instanceValues$.set(t,r);{if(i.$watchers$&&a&128){const p=i.$watchers$[t];p&&p.map(f=>{try{l[f](r,o,t)}catch(m){vS(m,n)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(r,o,t)===!1)return;_F(s,!1)}}}},p6e=(e,t,r)=>{var i,s;const n=e.prototype;if(t.$members$||t.$watchers$||e.watchers){e.watchers&&!t.$watchers$&&(t.$watchers$=e.watchers);const o=Object.entries((i=t.$members$)!=null?i:{});o.map(([a,[l]])=>{(l&31||l&32)&&Object.defineProperty(n,a,{get(){return c6e(this,a)},set(u){h6e(this,a,u,t)},configurable:!0,enumerable:!0})});{const a=new Map;n.attributeChangedCallback=function(l,u,c){_s.jmp(()=>{var p;const f=a.get(l);if(this.hasOwnProperty(f))c=this[f],delete this[f];else{if(n.hasOwnProperty(f)&&typeof this[f]=="number"&&this[f]==c)return;if(f==null){const m=eg(this),g=m?.$flags$;if(g&&!(g&8)&&g&128&&c!==u){const w=this,S=(p=t.$watchers$)==null?void 0:p[l];S?.forEach(M=>{w[M]!=null&&w[M].call(w,c,u,l)})}return}}this[f]=c===null&&typeof this[f]=="boolean"?!1:c})},e.observedAttributes=Array.from(new Set([...Object.keys((s=t.$watchers$)!=null?s:{}),...o.filter(([l,u])=>u[0]&15).map(([l,u])=>{var c;const p=u[1]||l;return a.set(p,l),u[0]&512&&((c=t.$attrsToReflect$)==null||c.push([l,p])),p})]))}}return e},d6e=async(e,t,r,i)=>{let s;if(!(t.$flags$&32)){t.$flags$|=32,r.$lazyBundleId$;{s=e.constructor;const o=e.localName;customElements.whenDefined(o).then(()=>t.$flags$|=128)}if(s&&s.style){let o;typeof s.style=="string"?o=s.style:typeof s.style!="string"&&(t.$modeName$=WDe(e),t.$modeName$&&(o=s.style[t.$modeName$]));const a=mne(r,t.$modeName$);if(!FI.has(a)){const l=Ly("registerStyles",r.$tagName$);KDe(a,o,!!(r.$flags$&1)),l()}}}t.$ancestorComponent$,_F(t,!0)},jB=e=>{},f6e=e=>{if(!(_s.$flags$&1)){const t=eg(e),r=t.$cmpMeta$,i=Ly("connectedCallback",r.$tagName$);t.$flags$&1?(Tne(e,t,r.$listeners$),t?.$lazyInstance$?jB(t.$lazyInstance$):t?.$onReadyPromise$&&t.$onReadyPromise$.then(()=>jB(t.$lazyInstance$))):(t.$flags$|=1,r.$flags$&12&&m6e(e),r.$members$&&Object.entries(r.$members$).map(([s,[n]])=>{if(n&31&&e.hasOwnProperty(s)){const o=e[s];delete e[s],e[s]=o}}),d6e(e,t,r)),i()}},m6e=e=>{const t=e["s-cr"]=Dl.createComment("");t["s-cn"]=!0,_d(e,t,e.firstChild)},y6e=async e=>{if(!(_s.$flags$&1)){const t=eg(e);t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0)}},hct=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};r.$members$=t[2],r.$listeners$=t[3],r.$watchers$=e.$watchers$,r.$attrsToReflect$=[];const i=e.prototype.connectedCallback,s=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){TDe(this,r)},connectedCallback(){const n=eg(this);Tne(this,n,r.$listeners$),f6e(this),i&&i.call(this)},disconnectedCallback(){y6e(this),s&&s.call(this)},__attachShadow(){if(!this.shadowRoot)this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)});else if(this.shadowRoot.mode!=="open")throw new Error(`Unable to re-use existing shadow root for ${r.$tagName$}! Mode is set to ${this.shadowRoot.mode} but Stencil only supports open shadow roots.`)}}),e.is=r.$tagName$,p6e(e,r)},pct=(e,t)=>t,Tne=(e,t,r,i)=>{r&&r.map(([s,n,o])=>{const a=v6e(e,s),l=g6e(t,o),u=b6e(s);_s.ael(a,n,l,u),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>_s.rel(a,n,l,u))})},g6e=(e,t)=>r=>{var i;try{Oa.lazyLoad||e.$hostElement$[t](r)}catch(s){vS(s)}},v6e=(e,t)=>t&4?Dl:t&8?bS:t&16?Dl.body:e,b6e=e=>ADe?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const c_=globalThis.calciteConfig,dct=c_?.focusTrapStack||[],fct=c_?.logLevel||"info",VB="2.13.2",w6e="2024-10-24",_6e="e38e2977d";function S6e(){if(c_&&c_.version)return;console.info(`Using Calcite Components ${VB} [Date: ${w6e}, Revision: ${_6e}]`);const e=c_||globalThis.calciteConfig||{};Object.defineProperty(e,"version",{value:VB,writable:!1}),globalThis.calciteConfig=e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */const x6e=()=>typeof navigator<"u"&&typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */function UB(){const{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(une)||e.contains(lne)&&t?"dark":"light",i=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),s=o=>{n!==o&&i(o),n=o};let n=r();i(n),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>s(o.matches?"dark":"light")),new MutationObserver(()=>s(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function M6e(){x6e()&&(document.readyState==="interactive"?UB():document.addEventListener("DOMContentLoaded",()=>UB(),{once:!0})),S6e()}const T6e=M6e;T6e();let Ine;function I6e(){try{RDe(".")}catch{LDe(Ho(Xt(Ine)))}}function SF(e){const t=[];for(const r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push(e[r]?.());return t.length>0?Promise.all(t):null}Ine="components/assets";const Ene=Symbol("widget"),Ane=Symbol("widget-test-data"),E6e=[],A6e={},GI=new WeakMap;function $ne(e,t){let r=t.children;if(r?.length)for(let s=0;s<r.length;++s)r[s]=$ne(e,r[s]);else r=E6e;const i=t.vnodeSelector;if(BI(i)){const s=t.properties||A6e,n=s.key||i;return{vnodeSelector:"div",properties:{key:n,afterCreate:$6e,afterUpdate:C6e,afterRemoved:Cne,parentWidget:e,widgetConstructor:i,widgetProperties:{...s,key:n,children:r}},children:void 0,text:void 0,domNode:null}}return t}function $6e(e,t,r,{parentWidget:i,widgetConstructor:s,widgetProperties:n}){const o=new s(n);o.container=e,GI.set(e,o),o.afterCreate?.(o,e),i.addHandles(or(()=>Cne(e))),queueMicrotask(()=>{o[Ane].projector.renderNow()})}function C6e(e,t,r,{widgetProperties:i}){const s=GI.get(e);s&&(s.set(i),s.afterUpdate?.(s,e))}function Cne(e){const t=GI.get(e);t&&(t.afterRemoved?.(t,e),t.destroy(),GI.delete(e))}function BI(e){return typeof e=="function"&&e[Ene]}const zB=new Set;function O6e(e){zB.add(e),e.finally(()=>zB.delete(e))}var One;const P6e="esri.widgets.Widget";let R6e=0;function Pne(e,t){const r=Object.prototype.hasOwnProperty;for(const i in t)r.call(t,i)&&r.call(e,i)&&(e[i]!=null&&t[i]!=null&&typeof e[i]=="object"&&typeof t[i]=="object"?Pne(e[i],t[i]):e[i]=t[i]);return e}const L6e=_De({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,s,n,o)=>{const a=t?.(i,s,n,o),l=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in n)||l){const u=i[2].toLowerCase()+i.slice(3),c=m=>a?.call(n,m);n.addEventListener(u,c,l);const p=()=>n.removeEventListener(u,c,l),f=o.afterRemoved;o.afterRemoved=m=>{f?.(m),p()}}return a}},handleInterceptedEvent(e,t,r,i){const{eventPhase:s,type:n}=i,o=s===Event.CAPTURING_PHASE;let a=`on${n}${o?"capture":""}`;const l=t.properties;(l&&a in l||(a=`on${n[0].toUpperCase()}${n.slice(1)}${o?"Capture":""}`,l&&a in l))&&(kie(),e.scheduleRender(),l[a].call(l.bind||r,i))}});let sC=!1,Zi=class extends iA(jh.EventedAccessor){constructor(t,r){super(t,r),this._attached=!1,this._projector=L6e,this._readyForTrueRender=!1,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=JE(async()=>{if(this._messageBundleProps?.length){const l=await Promise.allSettled(this._messageBundleProps.map(async({bundlePath:u,propertyName:c})=>{if(this.destroyed)return;let p=await oY(u);this.uiStrings&&Object.keys(this.uiStrings)&&(p=Pne(Z(p),this.uiStrings)),this[c]=p}));if(this.destroyed)return;for(const u of l)u.status==="rejected"&&be.getLogger(this).error("widget-intl:locale-error",this.declaredClass,u.reason)}await this.loadLocale()}),I6e();const i="esri-widget-uid-"+r8(),s=this.render.bind(this);this._trackingTarget=new ZE(()=>{this.autoRenderingEnabled&&this.scheduleRender()});const n=()=>({vnodeSelector:"div",properties:{key:`${i}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}),o=()=>{if(!this._readyForTrueRender||this.destroyed)return null;const l=s()??n(),u=l.properties??={};if(u.key??=i,BI(l.vnodeSelector)){if(!this.visible)return n()}else this.visible?u.styles||(u.styles={}):(u.class="",u.styles={display:"none"}),u.styles.display??="";let c=0;return l.children?.forEach(p=>{BI(p.vnodeSelector)||(p.properties??={},p.properties.key??=`${this.id}--${c++}`)}),$ne(this,l)};this.render=()=>{if(sC)return o();let l=IOe(this)??null;if(l)return l;this._trackingTarget.clear(),sC=!0;try{l=Ch(this._trackingTarget,o)}catch(u){throw be.getLogger(this).error(u),u}finally{sC=!1}return l&&EOe(this,l),l};const a=this.beforeFirstRender();a?this._resourcesFetch=a.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),O6e(this._resourcesFetch)}normalizeCtorArgs(t,r){const i={...t};return r&&(i.container=r),i}postInitialize(){}beforeFirstRender(){const t=this.loadDependencies();return this._messageBundleProps?.length||t?Promise.all([t,this._loadLocale()]).then(()=>{}).catch($7):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(jr(this._trackingTarget),jr(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,D5(this))}set container(t){this._get("container")||this._set("container",t)}castContainer(t){return eF(t)}get domNode(){return this.container}set domNode(t){this.container=t}get icon(){return null}set icon(t){this._overrideIfSome("icon",t)}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+R6e++}set id(t){t&&this._set("id",t)}get label(){return this.declaredClass.split(".").pop()}set label(t){this._overrideIfSome("label",t)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(t){this._set("visible",t)}get[(One=Ene,Ane)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(D5(this),this._projector.scheduleRender())}own(t){gJ(be.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(t)}classes(...t){return AOe.apply(this,t)}renderNow(){D5(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(ht(()=>this.viewModel,(r,i)=>{i&&this.removeHandles("delegated-events"),r&&HE(r)&&this.addHandles(this._delegatedEventNames.map(s=>j2(r,s,n=>{this.emit(s,n)})),"delegated-events")},$a)),this.postInitialize();const t=async()=>{await this._loadLocale().catch($7),this.scheduleRender()};this.addHandles([rY(t),ht(()=>this.uiStrings,t),Rh(()=>this.container,r=>{this.destroyed||this._attach(r)},{initial:!0,once:!0})])}_attach(t){t&&(this._projector.merge(t,this.render),this._attached=!0)}_detach(t){this._attached&&(this._projector.detach(this.render),this._attached=!1),t?.parentNode?.removeChild(t)}};Zi[One]=!0,h([d()],Zi.prototype,"_readyForTrueRender",void 0),h([d({value:null})],Zi.prototype,"container",null),h([Zt("container")],Zi.prototype,"castContainer",null),h([d()],Zi.prototype,"icon",null),h([d()],Zi.prototype,"id",null),h([d()],Zi.prototype,"label",null),h([d()],Zi.prototype,"renderable",null),h([d()],Zi.prototype,"uiStrings",void 0),h([d()],Zi.prototype,"viewModel",void 0),h([d({value:!0})],Zi.prototype,"visible",null),h([d()],Zi.prototype,"key",void 0),h([d()],Zi.prototype,"children",void 0),h([d()],Zi.prototype,"afterCreate",void 0),h([d()],Zi.prototype,"afterUpdate",void 0),h([d()],Zi.prototype,"afterRemoved",void 0),Zi=h([j(P6e)],Zi);const p$=Zi,k6e=new Map;function N6e(e){return k6e.get(e)}function GB(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function D6e(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function mb(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function F6e(e){return e.type==="bing-maps"}const Mc=[];let m0=class extends et{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new qe,this.view=null,this._allLayerViewsChange=t=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");const r=this.view?.allLayerViews;r&&(this.addHandles(r.map(i=>ht(()=>[i.suspended,i.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),r.forEach(i=>{i.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(i.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),t?.removed&&t.removed.forEach(i=>{this._pendingAttributions.delete(i),this._fetchedAttributionData.delete(i)}),this._updateAttributionItems()},this.addHandles([ql(()=>this.view?.allLayerViews,"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Rh(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,t=e?.allLayerViews;if(Mc.length=0,!e||!t)return void this._clear();t.forEach(i=>{if(i.suspended||!i.layer?.attributionVisible)return;const s=i.layer;if(GB(s,"user"))return void mb(Mc,i,s.copyright);if(s.hasAttributionData){if(this._fetchedAttributionData.has(i)){const o=this._fetchedAttributionData.get(i);return void(o?mb(Mc,i,this._getDynamicAttribution(o,e,s)):GB(s)&&mb(Mc,i,s.copyright))}return void this._fetchAttributionData(i)}const n="portalItem"in s?s.portalItem?.accessInformation:void 0;mb(Mc,i,n||s.copyright)});const r=t.find(i=>i.layer?.type==="integrated-mesh-3dtiles");if(this.view&&r){const i=N6e(this.view);if(i){const s=i.getAttributionText();for(let n=0;n<s.length;++n)mb(Mc,r,s[n])}}D6e(this.items,Mc)&&(this.items.removeAll(),this.items.addMany(Mc)),Mc.length=0,this.notifyChange("state")}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await sA(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=t.ok?this._createContributionIndex(t.value,F6e(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,t){const r=e.contributors,i={};if(!r)return i;for(let s=0;s<r.length;s++){const n=r[s],o=n.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,u=a.zoomMin-(t&&a.zoomMin?1:0),c=a.zoomMax-(t&&a.zoomMax?1:0),p=new yt({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:Fe.WGS84}),f={extent:Jm(p),attribution:n.attribution||"",score:a.score!=null?a.score:100,id:s};for(let m=u;m<=c;m++)i[m]??=[],i[m].push(f)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(e,t,r){const{extent:i,scale:s}=t;let n=r.tileInfo?.scaleToZoom(s)??0;if(n=Math.min(e.maxKey??0,Math.round(n)),!i||n==null||n<=-1)return"";const o=e[n],a=uA(i.center.clone().normalize(),t.spatialReference),l=new Set;return o?o.filter(u=>{const c=u.id,p=!l.has(c)&&a&&u.extent&&G2(u.extent,a);return p&&l.add(c),p}).sort((u,c)=>c.score-u.score||u.objectId-c.objectId).map(u=>u.attribution).join(", "):""}};h([d({readOnly:!0,type:qe})],m0.prototype,"items",void 0),h([d({readOnly:!0})],m0.prototype,"state",null),h([d()],m0.prototype,"view",void 0),m0=h([j("esri.widgets.Attribution.AttributionViewModel")],m0);const Rne=m0,Gu={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function j6e(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:U6e(e[t])}}}function V6e(e){const t=e?.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function U6e(e){return function(t,...r){V6e(t)?ROe(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function d$(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var z6e=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},Lne=function(e,t){for(var r=0,i=e.length;r<i;r++){var s=e[r];Array.isArray(s)?Lne(s,t):s!=null&&s!==!1&&(s.hasOwnProperty("vnodeSelector")||(s=z6e(s)),t.push(s))}},G6e=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var s=[];return Lne(r,s),{vnodeSelector:e,properties:t||void 0,children:s,text:void 0,domNode:null}};function yo(e,t,...r){return typeof e!="function"||BI(e)?G6e(e,t,...r):e(t,...r)}function yct(...e){return e}const xg="esri-attribution",Mg={base:xg,poweredBy:`${xg}__powered-by`,sources:`${xg}__sources`,open:`${xg}--open`,sourcesOpen:`${xg}__sources--open`,link:`${xg}__link`};let En=class extends p${constructor(t,r){super(t,r),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(i=>i.forEach(({target:s})=>this._checkSourceTextOverflow(s))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new Rne}initialize(){this.addHandles(ql(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,r)=>(t.includes(r.text)||t.push(r.text),t),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t={[Mg.open]:this._isOpen};return yo("div",{bind:this,class:this.classes(Mg.base,Gu.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return yo("div",{class:Mg.poweredBy},"Powered by"," ",yo("a",{class:Mg.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const t=this._isOpen,r=this._isInteractive,i=r?0:void 0,{attributionText:s}=this,n={[Mg.sourcesOpen]:t,[Gu.interactive]:r};return yo("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Mg.sources,n),innerHTML:s,tabIndex:i})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let r=!1;const{clientHeight:i,clientWidth:s,scrollWidth:n}=t,o=n>s,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(r=!0),this._isOpen){const l=i<this._prevSourceNodeHeight;this._prevSourceNodeHeight=i,l&&(this._isOpen=!1,r=!0)}r&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};h([d()],En.prototype,"_isOpen",void 0),h([d()],En.prototype,"_isInteractive",null),h([d()],En.prototype,"_attributionTextOverflowed",void 0),h([d()],En.prototype,"_prevSourceNodeHeight",void 0),h([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],En.prototype,"attributionText",null),h([d()],En.prototype,"icon",null),h([d()],En.prototype,"itemDelimiter",void 0),h([d()],En.prototype,"label",null),h([d(),d$("esri/widgets/Attribution/t9n/Attribution")],En.prototype,"messages",void 0),h([d()],En.prototype,"view",null),h([d({type:Rne})],En.prototype,"viewModel",void 0),h([j6e()],En.prototype,"_toggleState",null),En=h([j("esri.widgets.Attribution")],En);const B6e=En;function q6e(e){return e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1}const H6e=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return gd(i),this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return h([d()],t.prototype,"goToOverride",void 0),h([d()],t.prototype,"view",void 0),t=h([j("esri.widgets.support.GoTo")],t),t};let Im=class extends H6e(et){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(ht(()=>this.view,this._updateRotationWatcher,fn))}destroy(){this.view=null}get canShowNorth(){return q6e(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:ce("mapview-essential-goto-duration")}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(t){t!=null&&this._set("orientation",{z:t})}_updateForCamera(t){if(!t)return;const r=-t.heading;this._set("orientation",{x:0,y:0,z:r})}_updateRotationWatcher(t){this.removeAllHandles(),t&&this.addHandles(t.type==="2d"?ht(()=>t?.rotation,this._updateForRotation,fn):ht(()=>t?.camera,this._updateForCamera,fn))}};h([d({readOnly:!0})],Im.prototype,"canShowNorth",null),h([d({readOnly:!0})],Im.prototype,"orientation",void 0),h([d({readOnly:!0})],Im.prototype,"state",null),h([d()],Im.prototype,"view",void 0),Im=h([j("esri.widgets.Compass.CompassViewModel")],Im);const kne=Im,BB="esri-compass",qB={base:BB,iconContainer:`${BB}__icon-container`};let Qc=class extends p${constructor(t,r){super(t,r),this.messages=null,this.viewModel=new kne,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=i=>({transform:`rotateZ(${i.z}deg)`})}loadDependencies(){return SF({button:()=>fe(()=>import("./calcite-button-MPcyXaF9.js"),__vite__mapDeps([218,219,220,221,222,223,224,225,226,227,228,229,1]),import.meta.url),icon:()=>fe(()=>import("./calcite-icon-E1cKYEny.js"),__vite__mapDeps([230,228,220,226,1]),import.meta.url)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){const{orientation:t,state:r}=this.viewModel,{messages:i}=this;return yo("div",{class:this.classes(qB.base,Gu.widget)},yo("calcite-button",{class:Gu.widgetButton,disabled:r==="disabled",kind:"neutral",label:i.reset,onclick:this._reset,round:!0,scale:"s",title:i.reset},yo("div",{"aria-hidden":"true",class:qB.iconContainer,title:i.reset},yo("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(t)}))))}};h([d()],Qc.prototype,"goToOverride",null),h([d()],Qc.prototype,"icon",null),h([d()],Qc.prototype,"label",null),h([d(),d$("esri/widgets/Compass/t9n/Compass")],Qc.prototype,"messages",void 0),h([d()],Qc.prototype,"view",null),h([d({type:kne})],Qc.prototype,"viewModel",void 0),Qc=h([j("esri.widgets.Compass")],Qc);const W6e=Qc,HB="esri-navigation-toggle",WB={base:HB,isLayoutHorizontal:`${HB}--horizontal`};let y0=class extends et{constructor(t){super(t),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(Rh(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(t){this._navigationMode=t,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){const t=this.view?.inputManager;t&&(t.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};h([d({readOnly:!0})],y0.prototype,"state",null),h([d()],y0.prototype,"_navigationMode",void 0),h([d()],y0.prototype,"view",void 0),y0=h([j("esri.widgets.NavigationToggle.NavigationToggleViewModel")],y0);const Nne=y0;let eh=class extends p${constructor(t,r){super(t,r),this.messages=null,this.viewModel=new Nne,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{(this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton)?.setFocus(),this.toggle()}}loadDependencies(){return SF({button:()=>fe(()=>import("./calcite-button-MPcyXaF9.js"),__vite__mapDeps([218,219,220,221,222,223,224,225,226,227,228,229,1]),import.meta.url)})}get icon(){return"move"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const t=this.viewModel?.state==="disabled",r=this.viewModel?.navigationMode==="pan",i=this.messages.toggle;return yo("div",{class:this.classes(WB.base,Gu.widget,{[WB.isLayoutHorizontal]:this.layout==="horizontal"})},yo("calcite-button",{afterCreate:s=>{this._panButton=s},appearance:r?"outline-fill":"solid",class:Gu.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?void 0:-1,title:i}),yo("calcite-button",{afterCreate:s=>{this._rotateButton=s},appearance:r?"solid":"outline-fill",class:Gu.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:i,onclick:this._toggle,tabIndex:r?-1:void 0,title:i}))}};h([d()],eh.prototype,"icon",null),h([d()],eh.prototype,"label",null),h([d({value:"vertical"})],eh.prototype,"layout",null),h([d(),d$("esri/widgets/NavigationToggle/t9n/NavigationToggle")],eh.prototype,"messages",void 0),h([d()],eh.prototype,"view",null),h([d({type:Nne})],eh.prototype,"viewModel",void 0),eh=h([j("esri.widgets.NavigationToggle")],eh);const J6e=eh;let Em=class extends et{get canZoomIn(){if(!this.view?.ready)return!1;const t=this.view?.constraints?.effectiveMaxScale;return t===0||this._scale>t}get canZoomOut(){const{view:e}=this;if(!e?.ready)return!1;const r=e.constraints?.effectiveMinScale;return r===0||this._scale<r}get _scale(){const e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};h([d({readOnly:!0})],Em.prototype,"canZoomIn",null),h([d({readOnly:!0})],Em.prototype,"canZoomOut",null),h([d()],Em.prototype,"view",void 0),h([d()],Em.prototype,"_scale",null),Em=h([j("esri.widgets.Zoom.ZoomConditions2D")],Em);const Z6e=Em;let g0=class extends et{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};h([d({readOnly:!0})],g0.prototype,"canZoomIn",null),h([d({readOnly:!0})],g0.prototype,"canZoomOut",null),h([d()],g0.prototype,"view",void 0),g0=h([j("esri.widgets.Zoom.ZoomConditions3D")],g0);const Y6e=g0;let zp=class extends et{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new Z6e({view:t}):t.type==="3d"&&(this._zoomConditions=new Y6e({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():HC(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():HC(t.goTo({zoomFactor:.5}))}};h([d()],zp.prototype,"_zoomConditions",void 0),h([d()],zp.prototype,"canZoomIn",null),h([d()],zp.prototype,"canZoomOut",null),h([d({readOnly:!0})],zp.prototype,"state",null),h([d()],zp.prototype,"view",null),zp=h([j("esri.widgets.Zoom.ZoomViewModel")],zp);const Dne=zp,JB={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"};let th=class extends p${constructor(t,r){super(t,r),this.messages=null,this.viewModel=new Dne,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return SF({button:()=>fe(()=>import("./calcite-button-MPcyXaF9.js"),__vite__mapDeps([218,219,220,221,222,223,224,225,226,227,228,229,1]),import.meta.url)})}get icon(){return"magnifying-glass-plus"}set icon(t){this._overrideIfSome("icon",t)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){const t={[JB.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:r,canZoomOut:i}=this.viewModel,{zoomIn:s,zoomOut:n}=this.messages;return yo("div",{class:this.classes(JB.base,Gu.widget,t)},yo("calcite-button",{class:Gu.widgetButton,disabled:!r,iconStart:"plus",kind:"neutral",label:s,onclick:this.zoomIn,title:s}),yo("calcite-button",{class:Gu.widgetButton,disabled:!i,iconStart:"minus",kind:"neutral",label:n,onclick:this.zoomOut,title:n}))}};h([d()],th.prototype,"icon",null),h([d()],th.prototype,"label",null),h([d({value:"vertical"})],th.prototype,"layout",null),h([d(),d$("esri/widgets/Zoom/t9n/Zoom")],th.prototype,"messages",void 0),h([d()],th.prototype,"view",null),h([d({type:Dne})],th.prototype,"viewModel",void 0),th=h([j("esri.widgets.Zoom")],th);const K6e=th;function X6e(e){return e?.view!==void 0}let h3=class extends mDe{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=r=>{this.components.forEach(i=>{const s=this._find(i),n=s?.widget;X6e(n)&&(n.view=r)})},this._componentsWatcher=(r,i)=>{this._removeComponents(i),this._addComponents(r),this._adjustPadding(r)}}initialize(){this.addHandles([ht(()=>this.components,this._componentsWatcher,fn),ht(()=>this.view,this._updateViewAwareWidgets,fn)])}_add(t,r,i,s,n){let o=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;o=this._createComponent(t)}super._add(o,r,i,s,n)}_removeComponents(t){t.forEach(r=>{const i=this._find(r);i&&(this.remove(i),i.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){const{top:r}=this.padding;this.padding=r}}_addComponents(t){this.constructed&&t.forEach(r=>this.add(this._createComponent(r),this._defaultPositionLookup[r]))}_createComponent(t){const r=this._createWidget(t);return new c3({id:t,node:r})}_createWidget(t){const r=this.view;switch(t){case"attribution":return new B6e({view:r});case"compass":return new W6e({view:r});case"navigation-toggle":return new J6e({view:r});case"zoom":return new K6e({view:r})}}};h([d()],h3.prototype,"components",void 0),h3=h([j("esri.views.ui.DefaultUI")],h3);const Fne=h3;let p3=class extends Fne{constructor(t){super(t),this.components=["attribution","zoom"]}};h([d()],p3.prototype,"components",void 0),p3=h([j("esri.views.ui.2d.DefaultUI2D")],p3);const jne=p3;function ZB(e){return e!=null&&typeof e=="object"&&"declaredClass"in e&&e.declaredClass==="esri.WebMap"}var sN;let d3=sN=class extends ue{constructor(e){super(e),this.color=new Le([0,0,0,1])}clone(){return new sN(Z({color:this.color}))}};h([d({type:Le,json:{write:!0}})],d3.prototype,"color",void 0),d3=sN=h([j("esri.webmap.background.ColorBackground")],d3);const Vne=d3;let Une,zne,Gne,Bne,qne,Hne;async function Q6e(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:s,Stage:n}]=await Promise.all([fe(()=>import("./webglDeps-D6JzrBv5.js"),__vite__mapDeps([152,73,72,45,153,154,1]),import.meta.url),fe(()=>import("./mapViewDeps-C0zfIe5e.js"),__vite__mapDeps([155,74,75,76,71,68,77,70,72,45,73,46,78,40,79,156,106,82,83,1,84,85,157,158,154,93,115,114,113,152,153,159,88,160,69,12,32,20,161,162,163,108,164,138,165,166,86,167,81,168,169,170,171,172,173,174]),import.meta.url)]);zne=e,Gne=t,Bne=r,qne=i,Hne=s,Une=n}let xt=class extends RCe(lPe(JOe(ZPe))){constructor(e){super(e),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Py({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new l3({view:this}),this.graphicsView=null,this.stateManager=new In({constraints:new qse({view:this})}),this.stationaryManager=new Iw,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new Pke(this),this.floors=new qe,this.highlightOptions=new ene,this.inputManager=new INe({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new nne,this.type="2d",this.ui=new jne,this.test={takeScreenshot:async t=>YNe(this._getScreenshotView(t),t)},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([ht(()=>this.viewpoint,()=>this.stationaryManager.flip(),Os),this.on("resize",t=>this.stateManager.resize(t.width,t.height))]),kSe()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=jr(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new RNe(this.featuresTilingScheme)}get constraintsInfo(){const e=this.defaultsFromMap?.tileInfo,t=this.spatialReference;return{lods:e?.spatialReference?.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;const{scale:e,constraints:t,center:r,viewpoint:i,extent:s}=this;let n=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!s&&(t?.effectiveLODs||(n=-1),(!r||e===0&&n===-1)&&(i?.targetGeometry==null||i.targetGeometry.type!=="extent"&&!i.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const t=e.targetGeometry,r=this.spatialReference;return Ste(t.spatialReference,r)}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",e),this.frameTask.animationInProgress=!0;const r=()=>{this.destroyed||(e===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask.animationInProgress=!1)};e.when(r,r)}get background(){return ZB(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return this.stateManager?.constraints}set constraints(e){e.view=this;const t=this.stateManager.constraints;this.stateManager.constraints=e,t?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(e){this.stateManager.extent=e}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){const{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(r=>!r.destroyed&&!("layerViews"in r)&&r.updating===!0)||e);if(ce("esri-2d-log-updating")){const r=this.allLayerViews.reduce((i,s)=>({...i,[`${s.layer.id}(${s.layer.type})`]:!s.destroyed&&!("layerViews"in s)&&s.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(r)}
-> updatingMagnifier: ${e}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(e,t){return this.goToManager.goTo(e,t)}async hitTest(e,t){return NNe(this,e,t)}async takeScreenshot(e){return ZNe(this._getScreenshotView(e),e)}toMap(e){if(!this.ready)return null;const t=Yie(e)?Zie(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,r,i){return this.inputManager&&this.viewEvents.on(e,t,r,i)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return ZB(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(e){return sB.hasLayerViewModule(e)}importLayerView(e){return sB.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(be.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(e){const t=this.toMap(e),r=await this.hitTest(e),i=this.allLayerViews.toArray().reverse(),s=new globalThis.Map(i.map(l=>[l.layer.uid,l])),n=[];let o=0,a=0;for(;o<r.results.length||a<i.length;){const l=r.results.at(o);if(l&&l.type!=="graphic"){++o;continue}const u=s.get((l?.layer??l?.graphic.layer)?.uid);if((!l||u)&&a<i.length&&i.at(a)!==u){const c=i.at(a);"fetchPopupFeaturesAtLocation"in c&&n.push({mapPoint:t,layerView:c}),++a}else l&&(n.push({graphic:l.graphic,layerView:u}),++o)}return{hits:n,location:t}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let e=nDe(this.type);if(ce("safari")&&ce("safari")<9&&(e=new K("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ce("safari")})),e!=null)throw be.getLogger(this).warn("#validate()",e.message),e}loadAsyncDependencies(){return Q6e()}_getDefaultViewpoint(){const{constraints:e,initialExtent:t,map:r,padding:i,size:s}=this;if(!e)return null;const n=r&&"initialViewProperties"in r?r.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),a=n?.viewpoint,l=a?.targetGeometry?.extent??t,u=l?.center,c=a?.rotation??0,p=a?.scale||l&&u$(l,[s[0]-i.left-i.right,s[1]-i.top-i.bottom]),f=o.center??u,m=o.rotation??c,g=o.scale??p;return f&&g?new Nl({targetGeometry:f,scale:g,rotation:m}):null}_startup(){this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;const t=new Une(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new Hne,this._magnifierView.magnifier=this.magnifier;const r=new Bne({view:this});this._set("labelManager",r);const i=new Oke({view:this});this._set("animationManager",i);const s=new qne({view:this,animationManager:i});this._set("mapViewNavigation",s),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",o=>this.fatalError=o.error),ht(()=>this.stationary,o=>t.stationary=o,$a),ht(()=>this.background,o=>{t.backgroundColor=o?.color,this._magnifierView.backgroundColor=o?.color},$a),ht(()=>this.magnifier,o=>this._magnifierView.magnifier=o,$a),ht(()=>this.renderingOptions,o=>t.renderingOptions=o,$a),ht(()=>this.highlightOptions,o=>t.highlightOptions=o,$a),ht(()=>this.state.id,()=>t.state=this.state,$a)],"map-view"),this._updateStageChildren();const n=this._resolveWhenReady;this._resolveWhenReady=[],n.forEach(o=>o(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});const e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new Vke(Ry.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const t=new zne({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Gne(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){const{allLayerViews:t,padding:r,size:i,stage:s}=this;return{allLayerViews:t,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:r,size:i,stage:s}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(const t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};xt.type="2d",h([d({readOnly:!0})],xt.prototype,"animationManager",void 0),h([d({constructOnly:!0})],xt.prototype,"deactivatedWebGLExtensions",void 0),h([d({constructOnly:!0})],xt.prototype,"debugWebGLExtensions",void 0),h([d({readOnly:!0})],xt.prototype,"featuresTilingScheme",void 0),h([d({readOnly:!0})],xt.prototype,"fullOpacity",void 0),h([d()],xt.prototype,"goToManager",void 0),h([d({readOnly:!0})],xt.prototype,"graphicsTileStore",null),h([d()],xt.prototype,"graphicsView",void 0),h([d()],xt.prototype,"stateManager",void 0),h([d()],xt.prototype,"constraintsInfo",null),h([d({readOnly:!0})],xt.prototype,"state",null),h([d()],xt.prototype,"initialExtentRequired",null),h([d()],xt.prototype,"labelManager",void 0),h([d({readOnly:!0})],xt.prototype,"mapViewNavigation",void 0),h([d({constructOnly:!0})],xt.prototype,"renderCanvas",void 0),h([d()],xt.prototype,"renderingOptions",void 0),h([d({constructOnly:!0})],xt.prototype,"supersampleScreenshotsEnabled",void 0),h([d({readOnly:!0})],xt.prototype,"supportsGround",void 0),h([d()],xt.prototype,"_defaultsFromMapSettings",null),h([d({readOnly:!0})],xt.prototype,"typeSpecificPreconditionsReady",null),h([d()],xt.prototype,"animation",null),h([d({type:Vne})],xt.prototype,"background",null),h([d()],xt.prototype,"center",null),h([d({type:qse})],xt.prototype,"constraints",null),h([d()],xt.prototype,"extent",null),h([d()],xt.prototype,"floors",void 0),h([d({type:ene})],xt.prototype,"highlightOptions",void 0),h([d({readOnly:!0})],xt.prototype,"inputManager",void 0),h([d()],xt.prototype,"map",void 0),h([d()],xt.prototype,"padding",null),h([d({readOnly:!0})],xt.prototype,"rendering",null),h([d()],xt.prototype,"resizeAlign",null),h([d({readOnly:!0})],xt.prototype,"resolution",null),h([d()],xt.prototype,"rotation",null),h([d()],xt.prototype,"scale",null),h([d({constructOnly:!0})],xt.prototype,"spatialReferenceLocked",void 0),h([d()],xt.prototype,"stationary",null),h([d({readOnly:!0})],xt.prototype,"tileInfo",null),h([d({type:nne,readOnly:!0})],xt.prototype,"timeline",void 0),h([d({readOnly:!0})],xt.prototype,"type",void 0),h([d({readOnly:!0})],xt.prototype,"updating",null),h([d()],xt.prototype,"viewpoint",null),h([d()],xt.prototype,"zoom",null),h([d({readOnly:!0})],xt.prototype,"navigating",null),h([d(),Zt(e=>e instanceof Fne?e:zr(jne,e))],xt.prototype,"ui",void 0),xt=h([j("esri.views.MapView")],xt);const e8e=xt;class $t{wkid;latestWkid;wkt;constructor(t,r){typeof t=="string"?this.wkt=t:(this.wkid=t,this.latestWkid=r)}isEqual(t){return!!(this.isWebMercator()&&t.isWebMercator()||this.wkid&&t.wkid&&this.wkid===t.wkid||this.wkt&&t.wkt&&this.wkt===t.wkt||this.latestWkid&&t.latestWkid&&this.latestWkid===t.latestWkid)}clone(){const t=new $t("");return t.latestWkid=this.latestWkid,t.wkid=this.wkid,t.wkt=this.wkt,t}lean(){const t={};return this.wkt?t.wkt=this.wkt:(t.wkid=this.wkid,this.latestWkid&&(t.latestWkid=this.latestWkid)),t}isWebMercator(){const t=[900913,3587,54004,41001,102113,102100,3785];return!!(this.wkid&&t.includes(this.wkid)||this.latestWkid&&t.includes(this.latestWkid))}static latLongSR(){return new $t(4326)}static fromConfig(t){if(t.wkt)return new $t(t.wkt);if(t.wkid)return new $t(t.wkid,t.latestWkid);throw new Error("Could not parse config spatial reference object")}static parseSR(t){return t?t instanceof $t?t.clone():typeof t=="string"&&t.startsWith("EPSG:")?new $t(parseInt(t.substring(5).trim())):new $t(t):$t.latLongSR()}static fromESRI(t){if(t.wkt)return new $t(t.wkt);{const r=t.toJSON().latestWkid,i=new $t(t.wkid);return r&&(i.latestWkid=r),i}}toESRI(){return new Fe(this.lean())}static fromGeoJSON(t){const r=$t.parseGeoJsonCrs(t);return r.substring(0,5)==="EPSG:"?new $t(parseInt(r.slice(5))):new $t(r)}static parseGeoJsonCrs(t){if(t){if(t.type==="name"){const r=/urn:ogc:def:crs:EPSG::(\d+)/,i=t.properties.name,s=i.match(r);if(s)return"EPSG:"+s[1];if(i.substring(0,7)!=="urn:ogc")return i}}else return"EPSG:4326";return console.error("Encountered unsupported GeoJSON CRS format. Defaulting to lat-long, resuling conversion is likely wrong",t),"EPSG:4326"}toGeoJSON(){const t={type:"name",properties:{name:""}};return this.wkt?t.properties.name=this.wkt:t.properties.name="urn:ogc:def:crs:EPSG::"+(this.latestWkid||this.wkid),t}}class tg{sr;id;constructor(t,r){this.id=t?t.toString():"",this.sr=$t.parseSR(r)}get type(){return Ft.UNKNOWN}childIdGenerator(t){return`${this.id}-${t}`}toESRI(){throw new Error(`.toESRI not implemented on geometry type ${this.type}`)}toGeoJSON(){throw new Error(`.toGeoJSON not implemented on geometry type ${this.type}`)}invalid(){return this.type===Ft.NONE||this.type===Ft.UNKNOWN}geoJsonFactory(t,r){const i={type:t,coordinates:r};return this.sr&&(i.crs=this.sr.toGeoJSON()),i}}class rf extends tg{constructor(){super("no_geometry")}get type(){return Ft.NONE}}let jn=class Ew extends tg{rawArray;constructor(t,r,i,s){super(t,r.sr||i),s?this.rawArray=r.slice():this.rawArray=Ew.parseXY(r)}get type(){return Ft.POINT}get x(){return this.rawArray[0]}set x(t){this.rawArray[0]=t}get y(){return this.rawArray[1]}set y(t){this.rawArray[1]=t}toArray(){return this.rawArray.slice()}static parseXY(t){let r;if(Array.isArray(t)&&t.length===2)r=t;else{if(t instanceof Ew)return t.toArray();r=[t.x,t.y]}if(isNaN(r[0])||isNaN(r[1]))throw new Error("Unsupported point format detected. Supported formats are two element array of numbers, or object with x and y properties containing numbers");return[parseFloat(r[0]),parseFloat(r[1])]}static fromESRI(t,r){return new Ew(r,[t.x,t.y],$t.fromESRI(t.spatialReference),!0)}toESRI(){return new je({x:this.x,y:this.y,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Ew(r,t.coordinates,$t.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(mi.POINT,this.toArray())}};class go extends tg{rawArray;constructor(t,r,i,s){super(t,r.sr||i),s?this.rawArray=go.arrayDeepCopy(r):r instanceof go?this.rawArray=r.toArray():this.rawArray=go.parsePointSet(r)}get pointArray(){return this.rawArray.map((t,r)=>new jn(this.childIdGenerator(r),t,this.sr,!0))}getAt(t){return new jn(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,r){this.rawArray[r]=jn.parseXY(t)}get length(){return this.rawArray.length}toArray(){return go.arrayDeepCopy(this.rawArray)}static parsePointSet(t){if(Array.isArray(t)){if(t.length===0)throw new Error("no verticies provided");return t.map(r=>jn.parseXY(r))}else throw new Error("Bad geometry input encountered")}static arrayDeepCopy(t){return t.map(r=>r.slice())}}class dv extends go{constructor(t,r,i,s){super(t,r,i,s)}get type(){return Ft.MULTIPOINT}static fromESRI(t,r){return new dv(r,t.points,$t.fromESRI(t.spatialReference),!0)}toESRI(){return new p1({points:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new dv(r,t.coordinates,$t.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(mi.MULTIPOINT,this.toArray())}}class Sd extends go{constructor(t,r,i,s){if(super(t,r,i,s),this.rawArray.length<2)throw new Error("lines require at least two verticies")}get type(){return Ft.LINESTRING}static fromESRI(t,r){return new Sd(r,t.paths[0],$t.fromESRI(t.spatialReference),!0)}toESRI(){return new Jo({paths:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Sd(r,t.coordinates,$t.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(mi.LINESTRING,this.toArray())}}class Tl extends tg{rawArray;constructor(t,r,i,s){if(super(t,r.sr||i),s)this.rawArray=Tl.arrayDeepCopy(r);else if(r instanceof Tl)this.rawArray=r.toArray();else if(r instanceof go)this.rawArray=[r.toArray()];else if(Array.isArray(r)){if(r.length===0)throw new Error("no lines provided");this.rawArray=r.map(n=>go.parsePointSet(n))}else throw new Error("invalid lines format for MulitLineString")}get lineArray(){return this.rawArray.map((t,r)=>new Sd(this.childIdGenerator(r),t,this.sr,!0))}getAt(t){return new Sd(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,r){this.rawArray[r]=go.parsePointSet(t)}get length(){return this.rawArray.length}get type(){return Ft.MULTILINESTRING}toArray(){return Tl.arrayDeepCopy(this.rawArray)}static arrayDeepCopy(t){return t.map(r=>r.map(i=>i.slice()))}static fromESRI(t,r){return new Tl(r,t.paths,$t.fromESRI(t.spatialReference),!0)}toESRI(){return new Jo({paths:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Tl(r,t.coordinates,$t.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(mi.MULTILINESTRING,this.toArray())}}class ny extends go{constructor(t,r,i,s){if(super(t,r,i,s),ny.closeRing(this.rawArray),this.length<4)throw new Error("Linear Ring must have at least 3 distinct vertices.")}get type(){return Ft.LINEARRING}updateAt(t,r){const i=this.length-1;r===0?super.updateAt(t,i):r===i&&super.updateAt(t,0),super.updateAt(t,r)}static closeRing(t){const r=t[0],i=t[t.length-1];(r[0]!==i[0]||r[1]!==i[1])&&t.push(r.slice())}static fromESRI(t,r){return new ny(r,t.rings[0],$t.fromESRI(t.spatialReference),!0)}toESRI(){return new Rs({rings:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new ny(r,t.coordinates,$t.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(mi.POLYGON,[this.toArray()])}}class sn extends tg{rawArray;constructor(t,r,i,s){super(t,r.sr||i),s?this.rawArray=sn.arrayDeepCopy(r):this.rawArray=sn.parsePolygon(r)}addLinearRings(t){t.forEach(r=>this.rawArray.push(r.toArray()))}get ringArray(){return this.rawArray.map((t,r)=>new ny(this.childIdGenerator(r),t,this.sr,!0))}get type(){return Ft.POLYGON}toArray(){return sn.arrayDeepCopy(this.rawArray)}static parsePolygon(t){let r=[];if(t instanceof sn)return t.toArray();if(t instanceof Tl)r=t.toArray();else if(t instanceof go)r=[t.toArray()];else if(Array.isArray(t)){if(t.length===0)throw new Error("no rings provided");r=t.map(i=>go.parsePointSet(i))}else throw new Error("invalid input format for parsePolygon");return r.forEach(i=>ny.closeRing(i)),r}static arrayDeepCopy(t){return t.map(r=>r.map(i=>i.slice()))}static fromESRI(t,r){return new sn(r,t.rings,$t.fromESRI(t.spatialReference),!0)}toESRI(){return new Rs({rings:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new sn(r,t.coordinates,$t.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(mi.POLYGON,this.toArray())}}class fh extends tg{rawArray;constructor(t,r,i,s){super(t,r.sr||i),s?this.rawArray=fh.arrayDeepCopy(r):this.rawArray=fh.parseMultiPolygon(r)}addPolygon(t){this.rawArray.push(t.toArray())}get polygonArray(){return this.rawArray.map((t,r)=>new sn(this.childIdGenerator(r),t,this.sr,!0))}get type(){return Ft.MULTIPOLYGON}toArray(){return fh.arrayDeepCopy(this.rawArray)}static parseMultiPolygon(t){if(t instanceof fh)return t.toArray();if(t instanceof sn)return[t.toArray()];if(t instanceof Tl||t instanceof go)return[sn.parsePolygon(t)];if(Array.isArray(t)){if(t.length===0)throw new Error("no polygons provided");return t.map(r=>sn.parsePolygon(r))}else throw new Error("invalid input format for parseMultiPolygon")}static arrayDeepCopy(t){return t.map(r=>r.map(i=>i.map(s=>s.slice())))}static fromESRI(t,r){return new fh(r,[t.rings],$t.fromESRI(t.spatialReference),!0)}toESRI(){const t=[];return this.toArray().forEach(r=>{r.forEach(i=>t.push(i))}),new Rs({rings:t,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new fh(r,t.coordinates,$t.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(mi.MULTIPOLYGON,this.toArray())}}class Yr extends tg{rawMin;rawMax;constructor(t,r,i,s){super(t,r.sr||s),this.rawMin=jn.parseXY(r),this.rawMax=jn.parseXY(i)}get type(){return Ft.EXTENT}get xmin(){return this.rawMin[0]}get ymin(){return this.rawMin[1]}get xmax(){return this.rawMax[0]}get ymax(){return this.rawMax[1]}center(){return new jn(this.id+"_centerPoint",[(this.xmax-this.xmin)/2+this.xmin,(this.ymax-this.ymin)/2+this.ymin],this.sr,!0)}expand(t){return Yr.fromESRI(this.toESRI().expand(t),`${this.id}-expanded`)}clone(){return new Yr(this.id,this.rawMin,this.rawMax,this.sr)}contains(t){return this.sr.isEqual(t.sr)?this.xmin<=t.x&&this.xmax>=t.x&&this.ymin<=t.y&&this.ymax>=t.y:(console.error("Extent.contains(point) must have point in same spatial reference as the extent."),!1)}toArray(){return[this.rawMin.slice(),this.rawMax.slice()]}toPolygonArray(){return[[this.rawMin.slice(),[this.xmin,this.ymax],this.rawMax.slice(),[this.xmax,this.ymin],this.rawMin.slice()]]}toPolygon(){return new sn(this.id,this.toPolygonArray(),this.sr,!0)}static fromParams(t,r,i,s,n,o){return new Yr(t,[r,i],[s,n],o)}static fromConfig(t,r){return new Yr(t,[r.xmin,r.ymin],[r.xmax,r.ymax],$t.fromConfig(r.spatialReference))}isEqual(t){return t?this.xmin===t.xmin&&this.ymin===t.ymin&&this.xmax===t.xmax&&this.ymax===t.ymax:!1}static fromESRI(t,r){return Yr.fromParams(r,t.xmin,t.ymin,t.xmax,t.ymax,$t.fromESRI(t.spatialReference))}toESRI(){return new yt({xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:this.sr.toESRI()})}static fromArcServer(t,r){return Yr.fromESRI(yt.fromJSON(t),r)}static fromGeoJSON(t,r){if(t.coordinates.length!==5)throw new Error("Extent expected a four vertex polygon from GeoJSON");const i=t.coordinates[0].slice(),s=i.slice();return[1,2,3].forEach(n=>{[0,1].forEach(o=>{const a=t.coordinates[n];i[o]>a[o]&&(i[o]=a[o]),s[o]<a[o]&&(s[o]=a[o])})}),new Yr(r,i,s,$t.fromGeoJSON(t.crs))}toGeoJSON(){return this.geoJsonFactory(mi.POLYGON,this.toPolygonArray())}}class kh{c;constructor(t){if(!t){this.c=[0,0,0,1];return}if(Array.isArray(t)){const r=t.length;if(r<3||r>4){console.error("Invalid colour value array passed to Colour class"),this.c=[0,0,0,1];return}this.c=t.map((i,s)=>s===3?i:parseInt(i)),r===3&&this.c.push(1)}else if(typeof t=="string"){const r=t.substring(0,1)==="#"?t.substring(1):t;this.c=[0,2,4,6].map(i=>{const s=r.substring(i,i+2);return kh.hexToInt(s)})}else this.c=[t.r,t.g,t.b,t.a??1];this.c.forEach((r,i)=>{r<0&&(console.error("Negative value passed to colour"),this.c[i]=0),r>255&&(console.error("Rotund value passed to colour"),this.c[i]=255)}),this.c[3]>1&&(this.c[3]=this.c[3]/255)}get rgba(){return this.c.slice()}get hex(){const t=this.rgba;return t[3]=t[3]*255,`#${t.map(r=>kh.intToHex(r)).join("")}`}get r(){return this.c[0]}get g(){return this.c[1]}get b(){return this.c[2]}get a(){return this.c[3]}toESRI(){return new Le(this.rgba)}toArcServer(){return[this.c[0],this.c[1],this.c[2],255*this.c[3]]}static hexToInt(t){return t.length===0?255:parseInt(t,16)}static intToHex(t){const r=t.toString(16);return r.length===1?`0${r}`:r}}class mh{toOptions(){throw new Error(".toOptions called on BaseStyle. Likely was not implemented on subclass.")}toESRI(){throw new Error(".toESRI called on BaseStyle. Likely was not implemented on subclass.")}static convToPoints(t){if(!(typeof t>"u"))if(typeof t=="string"){let r;const i=t.length;if(i===0)return;const s=t.substring(i-2);return s==="px"?r=parseFloat(t.substring(0,i-2))*1.333333:s==="pt"?r=parseFloat(t.substring(0,i-2)):r=parseFloat(t),r}else return t}}class md extends mh{_height;_xOffset;_yOffset;_icon;_width;_size;_colour;_style;_outline;_path;_angle;constructor(t){if(t=t||{style:Ac.CIRCLE},super(),this._style=t.style||Ac.CIRCLE,t.style===Ac.ICON){const r=t;this._icon=r.icon||"",this._height=mh.convToPoints(r.height)||16.5,this._width=mh.convToPoints(r.width)||16.5,this._size=0,this._colour=new kh,this._outline=new Bu,this._path=""}else{const r=t;this._size=mh.convToPoints(r.size)||12,this._colour=new kh(r.colour??"#ffffff40"),this._outline=new Bu(r.outline),this._path=this._style===Ac.PATH&&r.path||"",this._height=0,this._width=0,this._icon=""}this._xOffset=mh.convToPoints(t.xOffset)||0,this._yOffset=mh.convToPoints(t.yOffset)||0,this._angle=t.angle||0}get colour(){return this.propGrouse(!1),this._colour}get styleType(){return this._style}get width(){return this.propGrouse(!0),this._width}get height(){return this.propGrouse(!0),this._height}get size(){return this.propGrouse(!1),this._size}get xOffset(){return this._xOffset}get yOffset(){return this._yOffset}get angle(){return this._angle}get icon(){return this.propGrouse(!0),this._icon}get outline(){return this.propGrouse(!1),this._outline}get path(){return this.propGrouse(!1),this._path}propGrouse(t){this._style===Ac.ICON!==t&&console.warn(`Accessed a point style property that is invalid for the style type ${this._style}`)}toOptions(){const t={style:this.styleType,yOffset:this.yOffset,xOffset:this.xOffset,angle:this.angle};return this._style===Ac.ICON?{...t,icon:this.icon,width:this.width,height:this.height}:{...t,size:this.size,colour:this.colour.hex,path:this.path}}toESRI(){let t;return this.styleType===Ac.ICON?md.isImageUrl(this.icon)?(t=new Sh,t.url=this.icon,t.width=this.width,t.height=this.height,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new Mo,t.color=new Le(this.colour.rgba),t.size=this.width,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new Mo,t.color=new Le(this.colour.rgba),t.size=this.size,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle,t.path=this.path,t.style=this.styleType,t.outline=this.outline.toESRI()),t}static fromESRI(t){const r={xOffset:t.xoffset,yOffset:t.yoffset,angle:t.angle};if(t.type==="simple-marker"){const i=r;i.style=t.style,i.colour=t.color.toRgba(),i.size=t.size,i.path=t.path,i.outline=Bu.fromESRI(t.outline).toOptions()}else{const i=r;i.style=Ac.ICON,i.width=t.width,i.height=t.height,i.icon=t.url}return new md(r)}static fromArcServer(t){return md.fromESRI(j6(t))}static isImageUrl(t){return!!t.match(/\.(jpeg|jpg|gif|png|swf|svg)$/)||!!t.match(/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)}}class Bu extends mh{_style;_width;_miter;_cap;_join;_colour;constructor(t){t=t||{},super(),this._style=t.style||io.SOLID;const r=mh.convToPoints(t.width);this._width=typeof r>"u"||r<0?.75:r,this._colour=new kh(t.colour),this._miter=t.miter??2,this._cap=t.cap||YW.ROUND,this._join=t.join||ZW.ROUND}get styleType(){return this._style}get width(){return this._width}get colour(){return this._colour}get miter(){return this._miter}get cap(){return this._cap}get join(){return this._join}toOptions(){return{style:this.styleType,width:this.width,colour:this.colour.hex,miter:this.miter,cap:this.cap,join:this.join}}toESRI(){const t=new qn;return t.width=this.width,t.color=this.colour.toESRI(),t.style=this.styleType,t.cap=this.cap,t.miterLimit=this.miter,t.join=this.join,t}static fromESRI(t){const r={width:t.width,colour:t.color.toRgba(),style:t.style};return new Bu(r)}static fromArcServer(t){return Bu.fromESRI(j6(t))}}class u2 extends mh{_outlineStyle;_fillColour;_fillStyle;constructor(t){super(),t=t||{},t.fill||(t.fill={}),this._fillColour=new kh(t.fill.colour),this._fillStyle=t.fill.style||KW.SOLID,this._outlineStyle=new Bu(t.outline)}get fillColour(){return this._fillColour}get fillStyleType(){return this._fillStyle}get outline(){return this._outlineStyle}toOptions(){return{fill:{style:this.fillStyleType,colour:this.fillColour.hex},outline:this.outline.toOptions()}}toESRI(){const t=this.outline.toESRI(),r=new Le(this.fillColour.rgba),i=new Hl;return i.style=this.fillStyleType,i.color=r,i.outline=t,i}static fromESRI(t){const r={fill:{colour:t.color.toRgba(),style:t.style},outline:Bu.fromESRI(t.outline).toOptions()};return new u2(r)}static fromArcServer(t){return u2.fromESRI(j6(t))}}class t8e{Extent=Yr;Graphic=Vl;LineString=Sd;LineStyle=Bu;LinearRing=ny;MultiLineString=Tl;MultiPoint=dv;MultiPolygon=fh;Point=jn;PointStyle=md;Polygon=sn;PolygonStyle=u2;SpatialReference=$t;esriMapClickToRamp(t,r){return{mapPoint:jn.fromESRI(t.mapPoint,r),screenX:t.x,screenY:t.y,button:t.button,input:t.native.pointerType,clickTime:t.timestamp}}esriMapMouseToRamp(t){return{screenX:t.x,screenY:t.y,button:t.button,moveTime:t.timestamp}}geomRampToEsri(t){return t.toESRI()}geomEsriToRamp(t,r){switch(t.type){case"point":return jn.fromESRI(t,r);case"polyline":{const i=t;return i.paths.length===1?Sd.fromESRI(i,r):Tl.fromESRI(i,r)}case"polygon":return sn.fromESRI(t,r);case"extent":return Yr.fromESRI(t,r);case"multipoint":return dv.fromESRI(t,r);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomGeoJsonToRamp(t,r){switch(t.type){case mi.POINT:return jn.fromGeoJSON(t,r);case mi.LINESTRING:return Sd.fromGeoJSON(t,r);case mi.POLYGON:return sn.fromGeoJSON(t,r);case mi.MULTIPOINT:return dv.fromGeoJSON(t,r);case mi.MULTILINESTRING:return Tl.fromGeoJSON(t,r);case mi.MULTIPOLYGON:return fh.fromGeoJSON(t,r);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomRampToGeoJson(t){return t.toGeoJSON()}graphicRampToGeoJson(t){const r={},i={type:"Feature",geometry:this.geomRampToGeoJson(t.geometry),properties:r};return Object.keys(t.attributes).forEach(s=>i.properties[s]=t.attributes[s]),i}graphicGeoJsonToRamp(t,r){if(t.type!=="Feature")throw new Error("Expected input parameter of graphicGeoJsonToRamp to be a GeoJson feature");const i=this.geomGeoJsonToRamp(t.geometry,r),s={};return Object.keys(t.properties.forEach(o=>s[o]=t.properties[o])),new Vl(i,"",s)}graphicRampToEsri(t){const r={attributes:{},id:t.id};return r.geometry=this.geomRampToEsri(t.geometry),Object.keys(t.attributes).forEach(i=>r.attributes[i]=t.attributes[i]),t.style&&(r.symbol=this.styleRampToEsri(t.style)),new Ga(r)}styleRampToEsri(t){return t.toESRI()}styleEsriToRamp(t){switch(t.type){case"picture-marker":case"simple-marker":return md.fromESRI(t);case"simple-line":return Bu.fromESRI(t);case"simple-fill":return u2.fromESRI(t);default:return console.error(`Unsupported ESRI symbol type encountered: ${t.type}`),new md}}serverGeomTypeToRampGeomType(t){if(!t)return Ft.NONE;switch(t){case"esriGeometryPolygon":return Ft.POLYGON;case"esriGeometryPolyline":return Ft.LINESTRING;case"esriGeometryPoint":return Ft.POINT;case"esriGeometryMultipoint":return Ft.MULTIPOINT;case"esriGeometryEnvelope":return Ft.EXTENT;default:return console.error(`Unrecognized server geometry type encountered: ${t}`),Ft.UNKNOWN}}clientGeomTypeToRampGeomType(t){if(!t)return Ft.NONE;switch(t){case"polygon":return Ft.POLYGON;case"polyline":return Ft.LINESTRING;case"point":return Ft.POINT;case"multipoint":return Ft.MULTIPOINT;default:return console.error(`Unrecognized client geometry type encountered: ${t}`),Ft.UNKNOWN}}geoJsonGeomTypeToEsriGeomType(t){switch(t){case mi.POINT:return"point";case mi.LINESTRING:case mi.MULTILINESTRING:return"polyline";case mi.POLYGON:case mi.MULTIPOLYGON:return"polygon";case mi.MULTIPOINT:return"multipoint";default:throw new Error(`Encountered unhandled geometry type ${t}`)}}isImageUrl(t){return md.isImageUrl(t)}}class qI{layerIdx;name;children;uid;isRoot;constructor(t,r,i="",s=!0){this.layerIdx=t,this.name=i,this.isRoot=s,this.children=[],this.uid=r}findChildByUid(t){if(this.uid===t)return this;{let r;return this.children.some(i=>r=i.findChildByUid(t)),r}}findChildByIdx(t){if(this.layerIdx===t)return this;{let r;return this.children.some(i=>r=i.findChildByIdx(t)),r}}get isLogicalLayer(){return this.layerIdx>-1&&this.children.length===0}get isLayerRoot(){return this.isRoot}}class Wne{minScale;maxScale;constructor(t=0,r=0){this.minScale=t,this.maxScale=r}isOffScale(t){const r={offScale:!1,zoomIn:!1};return t<this.maxScale&&this.maxScale!==0?(r.offScale=!0,r.zoomIn=!1):t>this.minScale&&this.minScale!==0&&(r.offScale=!0,r.zoomIn=!0),r}}class Jne{sql;cache;extent;constructor(t="",r=""){this.sql={[Ln.PERMANENT]:t,[Ln.INITIAL]:r},this.extent=void 0,this.cache={}}sqlActiveFilters(t=[]){const r=this.sql,i=Object.keys(r).filter(s=>r[s]);return t.length===0?i:i.filter(s=>t.indexOf(s)===-1)}isActive(){return this.sqlActiveFilters([Ln.PERMANENT]).length>0}getCombinedSql(t=[]){const r=this.sqlActiveFilters(t),i=r.length;return i===0?"":i===1?this.sql[r[0]]:r.map(s=>`(${this.sql[s]})`).join(" AND ")}setSql(t,r){t===Ln.PERMANENT?console.error("Attempted to overwrite a permanent filter. Not allowed."):(this.sql[t]=r,this.clearCacheSet(t))}getSql(t){return this.sql[t]||""}setExtent(t){t.isEqual(this.extent)||(this.extent=t,this.clearCacheSet(Ln.EXTENT))}getCacheKey(t,r){return`_cache$${t.sort().join("$")}${r?"$"+Ln.EXTENT:""}$`}getCache(t,r){const i=this.getCacheKey(t,r);return this.cache[i]}setCache(t,r,i){const s=this.getCacheKey(r,i);this.cache[s]=t}cacheActiveKeys(){const t=this.cache;return Object.keys(t).filter(r=>t[r])}clearAllCaches(){this.cache={}}clearCacheSet(t){this.cacheActiveKeys().forEach(r=>{r.indexOf(`$${t}$`)>-1&&delete this.cache[r]})}clearAll(){this.sql={[Ln.PERMANENT]:this.sql[Ln.PERMANENT]},this.extent=void 0,this.clearAllCaches()}}class c2{id;sr;_defaultExtent;_fullExtent;_maximumExtent;constructor(t,r,i=void 0,s=void 0){this.id=t,this.sr=r.sr.clone(),this._defaultExtent=r.clone(),this._fullExtent=i?.clone(),this._maximumExtent=s?.clone(),i&&!i.sr.isEqual(this.sr)&&console.error(`Full extent provided in extent set has a mismatching spatial reference: ${i.sr}`),s&&!s.sr.isEqual(this.sr)&&console.error(`Maximum extent provided in extent set has a mismatching spatial reference: ${s.sr}`)}get defaultExtent(){return this._defaultExtent}set defaultExtent(t){this._defaultExtent=t.clone()}get fullExtent(){return this._fullExtent?this._fullExtent:this.defaultExtent}set fullExtent(t){this._fullExtent=t.clone()}get maximumExtent(){return this._maximumExtent?this._maximumExtent:this.fullExtent}set maximumExtent(t){this._maximumExtent=t.clone()}static fromConfig(t){return new c2(t.id,Yr.fromConfig(`${t.id}-extent-default`,t.default),t.full!==void 0?Yr.fromConfig(`${t.id}-extent-full`,t.full):void 0,t.maximum!==void 0?Yr.fromConfig(`${t.id}-extent-maximum`,t.maximum):void 0)}clone(){return new c2(this.id,this._defaultExtent,this._fullExtent,this._maximumExtent)}}class zi{realPromise;resolveMe(t){}rejectMe(){}getPromise(){return this.realPromise}constructor(){this.realPromise=new Promise((t,r)=>{this.resolveMe=i=>{t(i)},this.rejectMe=r})}}var rM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r8e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),r}var nC,YB;function i8e(){if(YB)return nC;YB=1;var e=function(M){return t(M)&&!r(M)};function t(S){return!!S&&typeof S=="object"}function r(S){var M=Object.prototype.toString.call(S);return M==="[object RegExp]"||M==="[object Date]"||n(S)}var i=typeof Symbol=="function"&&Symbol.for,s=i?Symbol.for("react.element"):60103;function n(S){return S.$$typeof===s}function o(S){return Array.isArray(S)?[]:{}}function a(S,M){return M.clone!==!1&&M.isMergeableObject(S)?b(o(S),S,M):S}function l(S,M,x){return S.concat(M).map(function(_){return a(_,x)})}function u(S,M){if(!M.customMerge)return b;var x=M.customMerge(S);return typeof x=="function"?x:b}function c(S){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(S).filter(function(M){return Object.propertyIsEnumerable.call(S,M)}):[]}function p(S){return Object.keys(S).concat(c(S))}function f(S,M){try{return M in S}catch{return!1}}function m(S,M){return f(S,M)&&!(Object.hasOwnProperty.call(S,M)&&Object.propertyIsEnumerable.call(S,M))}function g(S,M,x){var _={};return x.isMergeableObject(S)&&p(S).forEach(function(I){_[I]=a(S[I],x)}),p(M).forEach(function(I){m(S,I)||(f(S,I)&&x.isMergeableObject(M[I])?_[I]=u(I,x)(S[I],M[I],x):_[I]=a(M[I],x))}),_}function b(S,M,x){x=x||{},x.arrayMerge=x.arrayMerge||l,x.isMergeableObject=x.isMergeableObject||e,x.cloneUnlessOtherwiseSpecified=a;var _=Array.isArray(M),I=Array.isArray(S),E=_===I;return E?_?x.arrayMerge(S,M,x):g(S,M,x):a(M,x)}b.all=function(M,x){if(!Array.isArray(M))throw new Error("first argument should be an array");return M.reduce(function(_,I){return b(_,I,x)},{})};var w=b;return nC=w,nC}var s8e=i8e();const Zne=wS(s8e);class n8e{generateUUID(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const i=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r==="x"?i:i&3|8).toString(16)})}convertImageToCanvas(t,r,i=!0){const s=r??document.createElement("canvas"),n=document.createElement("img");i&&(n.crossOrigin="anonymous");const o=new Promise((a,l)=>{n.addEventListener("load",()=>{s.width=n.width,s.height=n.height,s.getContext("2d")?.drawImage(n,0,0),a(s)}),n.addEventListener("error",u=>l(u))});return n.src=t,o}async convertImagetoDataURL(t,r="image/png"){return t.startsWith("data")?t:this.convertImageToCanvas(t).then(i=>i.toDataURL(r)).catch(i=>(console.error("Failed to load crossorigin image",t,i),t))}parseUrlIndex(t){const r={rootUrl:t,index:0},i=/\/(\d+)\/?$/,s=t.match(i);if(s){const n=s[1];r.index=isNaN(parseInt(n))?void 0:parseInt(n),r.rootUrl=t.substr(0,t.length-s[0].length)}else console.warn("Cannot extract layer index from url "+t);return r}controlAvailable(t,r){return r?.disabledControls?.includes(t)?!1:r?.controls?r?.controls?.includes(t):!0}}class HI{_url;_base;_query;_queryMap={};constructor(t){this._url=t,[this._base,this._query]=t.split("?").concat(""),this._queryMap=this._query.split("&").reduce((r,i)=>{const[s,n]=i.split("=");return r[s]=n,r},{})}get query(){return this._query}get base(){return this._base}get queryMap(){return this._queryMap}updateQuery(t){const r=Zne.all([{},this.queryMap,t]);return`${this.base}${Object.entries(r).filter(([,s])=>s!==void 0).map(([s,n],o)=>`${o===0?"?":""}${s}=${n}`).join("&")}`}}var f3={exports:{}},o8e=f3.exports,KB;function Yne(){return KB||(KB=1,function(e,t){(function(r,i){e.exports=i(),typeof window=="object"&&(r.Terraformer=i())})(o8e,function(){var r={},i=6378137,s=57.29577951308232,n=.017453292519943,o={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}},a={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}};function l(k){return Object.prototype.toString.call(k)==="[object Array]"}function u(){var k=Array.prototype.slice.apply(arguments);typeof console!==void 0&&console.warn&&console.warn.apply(console,k)}function c(k,q){for(var L in q)q.hasOwnProperty(L)&&(k[L]=q[L]);return k}function p(k){if(k.type)switch(k.type){case"Point":return[k.coordinates[0],k.coordinates[1],k.coordinates[0],k.coordinates[1]];case"MultiPoint":return g(k.coordinates);case"LineString":return g(k.coordinates);case"MultiLineString":return f(k.coordinates);case"Polygon":return f(k.coordinates);case"MultiPolygon":return m(k.coordinates);case"Feature":return k.geometry?p(k.geometry):null;case"FeatureCollection":return b(k);case"GeometryCollection":return w(k);default:throw new Error("Unknown type: "+k.type)}return null}function f(k){for(var q=null,L=null,V=null,W=null,Q=0;Q<k.length;Q++)for(var se=k[Q],le=0;le<se.length;le++){var ee=se[le],ne=ee[0],Oe=ee[1];(q===null||ne<q)&&(q=ne),(L===null||ne>L)&&(L=ne),(V===null||Oe<V)&&(V=Oe),(W===null||Oe>W)&&(W=Oe)}return[q,V,L,W]}function m(k){for(var q=null,L=null,V=null,W=null,Q=0;Q<k.length;Q++)for(var se=k[Q],le=0;le<se.length;le++)for(var ee=se[le],ne=0;ne<ee.length;ne++){var Oe=ee[ne],ke=Oe[0],_t=Oe[1];(q===null||ke<q)&&(q=ke),(L===null||ke>L)&&(L=ke),(V===null||_t<V)&&(V=_t),(W===null||_t>W)&&(W=_t)}return[q,V,L,W]}function g(k){for(var q=null,L=null,V=null,W=null,Q=0;Q<k.length;Q++){var se=k[Q],le=se[0],ee=se[1];(q===null||le<q)&&(q=le),(L===null||le>L)&&(L=le),(V===null||ee<V)&&(V=ee),(W===null||ee>W)&&(W=ee)}return[q,V,L,W]}function b(k){for(var q=[],L,V=k.features.length-1;V>=0;V--)L=p(k.features[V].geometry),q.push([L[0],L[1]]),q.push([L[2],L[3]]);return g(q)}function w(k){for(var q=[],L,V=k.geometries.length-1;V>=0;V--)L=p(k.geometries[V]),q.push([L[0],L[1]]),q.push([L[2],L[3]]);return g(q)}function S(k){var q=p(k);return{x:q[0],y:q[1],w:Math.abs(q[0]-q[2]),h:Math.abs(q[1]-q[3])}}function M(k){return k*s}function x(k){return k*n}function _(k,q){for(var L=0;L<k.length;L++)typeof k[L][0]=="number"&&(k[L]=q(k[L])),typeof k[L]=="object"&&(k[L]=_(k[L],q));return k}function I(k){var q=k[0],L=k[1];return[M(q/i)-Math.floor((M(q/i)+180)/360)*360,M(Math.PI/2-2*Math.atan(Math.exp(-1*L/i)))]}function E(k){var q=k[0],L=Math.max(Math.min(k[1],89.99999),-89.99999);return[x(q)*i,i/2*Math.log((1+Math.sin(x(L)))/(1-Math.sin(x(L))))]}function A(k,q,L){if(k.type==="Point")k.coordinates=q(k.coordinates);else if(k.type==="Feature")k.geometry=A(k.geometry,q,!0);else if(k.type==="FeatureCollection")for(var V=0;V<k.features.length;V++)k.features[V]=A(k.features[V],q,!0);else if(k.type==="GeometryCollection")for(var W=0;W<k.geometries.length;W++)k.geometries[W]=A(k.geometries[W],q,!0);else k.coordinates=_(k.coordinates,q);return L||q===E&&(k.crs=o),q===I&&delete k.crs,k}function C(k){return A(k,E)}function O(k){return A(k,I)}function R(k,q){return k<q?-1:k>q?1:0}function D(k,q){return k[0]>q[0]?-1:k[0]<q[0]?1:k[1]>q[1]?-1:k[1]<q[1]?1:0}function N(k,q,L){return R((q[0]-k[0])*(L[1]-k[1])-(L[0]-k[0])*(q[1]-k[1]),0)}function U(k,q){var L=q[0]-k[0],V=q[1]-k[1];return L*L+V*V}function J(k,q){var L=q;for(var V in k){var W=N(q,L,k[V]);(W===-1||W===0&&U(q,k[V])>U(q,L))&&(L=k[V])}return L}function y(k){if(k.length===0)return[];if(k.length===1)return k;for(var q=[k.sort(D)[0]],L=0;L<q.length;L++){var V=J(k,q[L]);V!==q[0]&&q.push(V)}return q}function T(k){for(var q,L=0;L<k.length-3;L++){var V=k[L],W=k[L+1],Q=k[L+2],se=[W[0]-V[0],W[1]-V[1]],le=Q[0]*se[1]-Q[1]*se[0]+se[0]*V[1]-se[1]*V[0];if(L===0)le<0?q=!0:q=!1;else if(q&&le>0||!q&&le<0)return!1}return!0}function $(k,q){for(var L=!1,V=-1,W=k.length,Q=W-1;++V<W;Q=V)(k[V][1]<=q[1]&&q[1]<k[Q][1]||k[Q][1]<=q[1]&&q[1]<k[V][1])&&q[0]<(k[Q][0]-k[V][0])*(q[1]-k[V][1])/(k[Q][1]-k[V][1])+k[V][0]&&(L=!L);return L}function P(k,q){if(k&&k.length){if(k.length===1)return $(k[0],q);if($(k[0],q)){for(var L=1;L<k.length;L++)if($(k[L],q))return!1;return!0}else return!1}else return!1}function z(k,q,L,V){var W=(V[0]-L[0])*(k[1]-L[1])-(V[1]-L[1])*(k[0]-L[0]),Q=(q[0]-k[0])*(k[1]-L[1])-(q[1]-k[1])*(k[0]-L[0]),se=(V[1]-L[1])*(q[0]-k[0])-(V[0]-L[0])*(q[1]-k[1]);if(se!==0){var le=W/se,ee=Q/se;if(0<=le&&le<=1&&0<=ee&&ee<=1)return!0}return!1}function X(k){return!isNaN(parseFloat(k))&&isFinite(k)}function ae(k,q){if(X(k[0][0])){if(X(q[0][0])){for(var L=0;L<k.length-1;L++)for(var V=0;V<q.length-1;V++)if(z(k[L],k[L+1],q[V],q[V+1]))return!0}else for(var W=0;W<q.length;W++)if(ae(k,q[W]))return!0}else for(var Q=0;Q<k.length;Q++)if(ae(k[Q],q))return!0;return!1}function te(k){for(var q=[],L=0;L<k.length;L++){var V=k[L].slice();ye(V[0],V[V.length-1])===!1&&V.push(V[0]),q.push(V)}return q}function ye(k,q){for(var L=0;L<k.length;L++)if(k[L]!==q[L])return!1;return!0}function Me(k,q){if(k.length!==q.length)return!1;for(var L=k.slice().sort(D),V=q.slice().sort(D),W=0;W<L.length;W++){if(L[W].length!==V[W].length)return!1;for(var Q=0;Q<L.length;Q++)if(L[W][Q]!==V[W][Q])return!1}return!0}var De=["length"];function $e(k){if(k)switch(k.type){case"Point":return new gt(k);case"MultiPoint":return new dt(k);case"LineString":return new Je(k);case"MultiLineString":return new He(k);case"Polygon":return new mt(k);case"MultiPolygon":return new zt(k);case"Feature":return new H(k);case"FeatureCollection":return new G(k);case"GeometryCollection":return new re(k);default:throw new Error("Unknown type: "+k.type)}}$e.prototype.toMercator=function(){return C(this)},$e.prototype.toGeographic=function(){return O(this)},$e.prototype.envelope=function(){return S(this)},$e.prototype.bbox=function(){return p(this)},$e.prototype.convexHull=function(){var k=[],q,L;if(this.type==="Point")return null;if(this.type==="LineString"||this.type==="MultiPoint")if(this.coordinates&&this.coordinates.length>=3)k=this.coordinates;else return null;else if(this.type==="Polygon"||this.type==="MultiLineString")if(this.coordinates&&this.coordinates.length>0){for(q=0;q<this.coordinates.length;q++)k=k.concat(this.coordinates[q]);if(k.length<3)return null}else return null;else if(this.type==="MultiPolygon")if(this.coordinates&&this.coordinates.length>0){for(q=0;q<this.coordinates.length;q++)for(L=0;L<this.coordinates[q].length;L++)k=k.concat(this.coordinates[q][L]);if(k.length<3)return null}else return null;else if(this.type==="Feature"){var V=new $e(this.geometry);return V.convexHull()}return new mt({type:"Polygon",coordinates:te([y(k)])})},$e.prototype.toJSON=function(){var k={};for(var q in this)this.hasOwnProperty(q)&&De.indexOf(q)===-1&&(k[q]=this[q]);return k.bbox=p(this),k},$e.prototype.contains=function(k){return new $e(k).within(this)},$e.prototype.within=function(k){var q,L,V,W;if(k.type==="Feature"&&(k=k.geometry),k.type==="Point"&&this.type==="Point")return ye(this.coordinates,k.coordinates);if(k.type==="MultiLineString"&&this.type==="Point")for(L=0;L<k.coordinates.length;L++){var Q={type:"LineString",coordinates:k.coordinates[L]};if(this.within(Q))return!0}if((k.type==="LineString"||k.type==="MultiPoint")&&this.type==="Point")for(L=0;L<k.coordinates.length;L++){if(this.coordinates.length!==k.coordinates[L].length)return!1;if(ye(this.coordinates,k.coordinates[L]))return!0}if(k.type==="Polygon")if(this.type==="Polygon"){if(k.coordinates.length===this.coordinates.length){for(L=0;L<this.coordinates.length;L++)if(Me(this.coordinates[L],k.coordinates[L]))return!0}return this.coordinates.length&&P(k.coordinates,this.coordinates[0][0])?!ae(te(this.coordinates),te(k.coordinates)):!1}else{if(this.type==="Point")return P(k.coordinates,this.coordinates);if(this.type==="LineString"||this.type==="MultiPoint"){if(!this.coordinates||this.coordinates.length===0)return!1;for(L=0;L<this.coordinates.length;L++)if(P(k.coordinates,this.coordinates[L])===!1)return!1;return!0}else if(this.type==="MultiLineString"){for(L=0;L<this.coordinates.length;L++){var se=new Je(this.coordinates[L]);if(se.within(k)===!1)return W++,!1}return!0}else if(this.type==="MultiPolygon"){for(L=0;L<this.coordinates.length;L++){var le=new $e({type:"Polygon",coordinates:this.coordinates[L]});if(le.within(k)===!1)return!1}return!0}}if(k.type==="MultiPolygon"){if(this.type==="Point"){if(k.coordinates.length){for(L=0;L<k.coordinates.length;L++)if(q=k.coordinates[L],P(q,this.coordinates)&&ae([this.coordinates],k.coordinates)===!1)return!0}return!1}else if(this.type==="Polygon"){for(L=0;L<this.coordinates.length;L++)if(k.coordinates[L].length===this.coordinates.length){for(V=0;V<this.coordinates.length;V++)if(Me(this.coordinates[V],k.coordinates[L][V]))return!0}if(ae(this.coordinates,k.coordinates)===!1&&k.coordinates.length){for(L=0;L<k.coordinates.length;L++)q=k.coordinates[L],P(q,this.coordinates[0][0])===!1?W=!1:W=!0;return W}}else if(this.type==="LineString"||this.type==="MultiPoint")for(L=0;L<k.coordinates.length;L++){var ee={type:"Polygon",coordinates:k.coordinates[L]};return!!this.within(ee)}else if(this.type==="MultiLineString"){for(L=0;L<this.coordinates.length;L++){var ne=new Je(this.coordinates[L]);if(ne.within(k)===!1)return!1}return!0}else if(this.type==="MultiPolygon"){for(L=0;L<k.coordinates.length;L++){var Oe={type:"Polygon",coordinates:k.coordinates[L]};if(this.within(Oe)===!1)return!1}return!0}}return!1},$e.prototype.intersects=function(k){k.type==="Feature"&&(k=k.geometry);var q=new $e(k);if(this.within(k)||q.within(this))return!0;if(this.type!=="Point"&&this.type!=="MultiPoint"&&k.type!=="Point"&&k.type!=="MultiPoint")return ae(this.coordinates,k.coordinates);if(this.type==="Feature"){var L=new $e(this.geometry);return L.intersects(k)}return u("Type "+this.type+" to "+k.type+" intersection is not supported by intersects"),!1};function gt(k){var q=Array.prototype.slice.call(arguments);if(k&&k.type==="Point"&&k.coordinates)c(this,k);else if(k&&l(k))this.coordinates=k;else if(q.length>=2)this.coordinates=q;else throw"Terraformer: invalid input for Terraformer.Point";this.type="Point"}gt.prototype=new $e,gt.prototype.constructor=gt;function dt(k){if(k&&k.type==="MultiPoint"&&k.coordinates)c(this,k);else if(l(k))this.coordinates=k;else throw"Terraformer: invalid input for Terraformer.MultiPoint";this.type="MultiPoint"}dt.prototype=new $e,dt.prototype.constructor=dt,dt.prototype.forEach=function(k){for(var q=0;q<this.coordinates.length;q++)k.apply(this,[this.coordinates[q],q,this.coordinates]);return this},dt.prototype.addPoint=function(k){return this.coordinates.push(k),this},dt.prototype.insertPoint=function(k,q){return this.coordinates.splice(q,0,k),this},dt.prototype.removePoint=function(k){return typeof k=="number"?this.coordinates.splice(k,1):this.coordinates.splice(this.coordinates.indexOf(k),1),this},dt.prototype.get=function(k){return new gt(this.coordinates[k])};function Je(k){if(k&&k.type==="LineString"&&k.coordinates)c(this,k);else if(l(k))this.coordinates=k;else throw"Terraformer: invalid input for Terraformer.LineString";this.type="LineString"}Je.prototype=new $e,Je.prototype.constructor=Je,Je.prototype.addVertex=function(k){return this.coordinates.push(k),this},Je.prototype.insertVertex=function(k,q){return this.coordinates.splice(q,0,k),this},Je.prototype.removeVertex=function(k){return this.coordinates.splice(k,1),this};function He(k){if(k&&k.type==="MultiLineString"&&k.coordinates)c(this,k);else if(l(k))this.coordinates=k;else throw"Terraformer: invalid input for Terraformer.MultiLineString";this.type="MultiLineString"}He.prototype=new $e,He.prototype.constructor=He,He.prototype.forEach=function(k){for(var q=0;q<this.coordinates.length;q++)k.apply(this,[this.coordinates[q],q,this.coordinates])},He.prototype.get=function(k){return new Je(this.coordinates[k])};function mt(k){if(k&&k.type==="Polygon"&&k.coordinates)c(this,k);else if(l(k))this.coordinates=k;else throw"Terraformer: invalid input for Terraformer.Polygon";this.type="Polygon"}mt.prototype=new $e,mt.prototype.constructor=mt,mt.prototype.addVertex=function(k){return this.insertVertex(k,this.coordinates[0].length-1),this},mt.prototype.insertVertex=function(k,q){return this.coordinates[0].splice(q,0,k),this},mt.prototype.removeVertex=function(k){return this.coordinates[0].splice(k,1),this},mt.prototype.close=function(){this.coordinates=te(this.coordinates)},mt.prototype.hasHoles=function(){return this.coordinates.length>1},mt.prototype.holes=function(){var k=[];if(this.hasHoles())for(var q=1;q<this.coordinates.length;q++)k.push(new mt([this.coordinates[q]]));return k};function zt(k){if(k&&k.type==="MultiPolygon"&&k.coordinates)c(this,k);else if(l(k))this.coordinates=k;else throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.type="MultiPolygon"}zt.prototype=new $e,zt.prototype.constructor=zt,zt.prototype.forEach=function(k){for(var q=0;q<this.coordinates.length;q++)k.apply(this,[this.coordinates[q],q,this.coordinates])},zt.prototype.get=function(k){return new mt(this.coordinates[k])},zt.prototype.close=function(){var k=[];return this.forEach(function(q){k.push(te(q))}),this.coordinates=k,this};function H(k){if(k&&k.type==="Feature")c(this,k);else if(k&&k.type&&k.coordinates)this.geometry=k;else throw"Terraformer: invalid input for Terraformer.Feature";this.type="Feature"}H.prototype=new $e,H.prototype.constructor=H;function G(k){if(k&&k.type==="FeatureCollection"&&k.features)c(this,k);else if(l(k))this.features=k;else throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.type="FeatureCollection"}G.prototype=new $e,G.prototype.constructor=G,G.prototype.forEach=function(k){for(var q=0;q<this.features.length;q++)k.apply(this,[this.features[q],q,this.features])},G.prototype.get=function(k){var q;return this.forEach(function(L){L.id===k&&(q=L)}),new H(q)};function re(k){if(k&&k.type==="GeometryCollection"&&k.geometries)c(this,k);else if(l(k))this.geometries=k;else if(k.coordinates&&k.type)this.type="GeometryCollection",this.geometries=[k];else throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection"}re.prototype=new $e,re.prototype.constructor=re,re.prototype.forEach=function(k){for(var q=0;q<this.geometries.length;q++)k.apply(this,[this.geometries[q],q,this.geometries])},re.prototype.get=function(k){return new $e(this.geometries[k])};function we(k,q,L){for(var V=E(k),W=L||64,Q={type:"Polygon",coordinates:[[]]},se=1;se<=W;se++){var le=se*(360/W)*Math.PI/180;Q.coordinates[0].push([V[0]+q*Math.cos(le),V[1]+q*Math.sin(le)])}return Q.coordinates=te(Q.coordinates),O(Q)}function me(k,q,L){var V=L||64,W=q||250;if(!k||k.length<2||!W||!V)throw new Error("Terraformer: missing parameter for Terraformer.Circle");c(this,new H({type:"Feature",geometry:we(k,W,V),properties:{radius:W,center:k,steps:V}}))}return me.prototype=new $e,me.prototype.constructor=me,me.prototype.recalculate=function(){return this.geometry=we(this.properties.center,this.properties.radius,this.properties.steps),this},me.prototype.center=function(k){return k&&(this.properties.center=k,this.recalculate()),this.properties.center},me.prototype.radius=function(k){return k&&(this.properties.radius=k,this.recalculate()),this.properties.radius},me.prototype.steps=function(k){return k&&(this.properties.steps=k,this.recalculate()),this.properties.steps},me.prototype.toJSON=function(){var k=$e.prototype.toJSON.call(this);return k},r.Primitive=$e,r.Point=gt,r.MultiPoint=dt,r.LineString=Je,r.MultiLineString=He,r.Polygon=mt,r.MultiPolygon=zt,r.Feature=H,r.FeatureCollection=G,r.GeometryCollection=re,r.Circle=me,r.toMercator=C,r.toGeographic=O,r.Tools={},r.Tools.positionToMercator=E,r.Tools.positionToGeographic=I,r.Tools.applyConverter=A,r.Tools.toMercator=C,r.Tools.toGeographic=O,r.Tools.createCircle=we,r.Tools.calculateBounds=p,r.Tools.calculateEnvelope=S,r.Tools.coordinatesContainPoint=$,r.Tools.polygonContainsPoint=P,r.Tools.arraysIntersectArrays=ae,r.Tools.coordinatesContainPoint=$,r.Tools.coordinatesEqual=Me,r.Tools.convexHull=y,r.Tools.isConvex=T,r.MercatorCRS=o,r.GeographicCRS=a,r})}(f3)),f3.exports}var a8e=Yne();function l8e(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var ky=1,Ny=2,fv=3,u8e=4,nN=5,XB=6378137,c8e=6356752314e-3,QB=.0066943799901413165,h_=484813681109536e-20,Ee=Math.PI/2,h8e=.16666666666666666,p8e=.04722222222222222,d8e=.022156084656084655,Ue=1e-10,Es=.017453292519943295,Lu=57.29577951308232,ur=Math.PI/4,h2=Math.PI*2,Ai=3.14159265359,Io={};Io.greenwich=0;Io.lisbon=-9.131906111111;Io.paris=2.337229166667;Io.bogota=-74.080916666667;Io.madrid=-3.687938888889;Io.rome=12.452333333333;Io.bern=7.439583333333;Io.jakarta=106.807719444444;Io.ferro=-17.666666666667;Io.brussels=4.367975;Io.stockholm=18.058277777778;Io.athens=23.7163375;Io.oslo=10.722916666667;const f8e={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var eq=/[\s_\-\/\(\)]/g;function kd(e,t){if(e[t])return e[t];for(var r=Object.keys(e),i=t.toLowerCase().replace(eq,""),s=-1,n,o;++s<r.length;)if(n=r[s],o=n.toLowerCase().replace(eq,""),o===i)return e[n]}function oN(e){var t={},r=e.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),i,s,n,o={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*Es},lat_1:function(a){t.lat1=a*Es},lat_2:function(a){t.lat2=a*Es},lat_ts:function(a){t.lat_ts=a*Es},lon_0:function(a){t.long0=a*Es},lon_1:function(a){t.long1=a*Es},lon_2:function(a){t.long2=a*Es},alpha:function(a){t.alpha=parseFloat(a)*Es},gamma:function(a){t.rectified_grid_angle=parseFloat(a)},lonc:function(a){t.longc=a*Es},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r:function(a){t.a=t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var l=kd(f8e,a);l&&(t.to_meter=l.to_meter)},from_greenwich:function(a){t.from_greenwich=a*Es},pm:function(a){var l=kd(Io,a);t.from_greenwich=(l||parseFloat(a))*Es},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(t.axis=a)},approx:function(){t.approx=!0}};for(i in r)s=r[i],i in o?(n=o[i],typeof n=="function"?n(s):t[n]=s):t[i]=s;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var p2=1,Kne=2,Xne=3,WI=4,Qne=5,xF=-1,m8e=/\s/,y8e=/[A-Za-z]/,g8e=/[A-Za-z84_]/,f$=/[,\]]/,eoe=/[\d\.E\-\+]/;function Gh(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=p2}Gh.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==WI)for(;m8e.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case p2:return this.neutral(e);case Kne:return this.keyword(e);case WI:return this.quoted(e);case Qne:return this.afterquote(e);case Xne:return this.number(e);case xF:return}};Gh.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=WI;return}if(f$.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Gh.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=p2;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=p2,this.currentObject=this.stack.pop(),this.currentObject||(this.state=xF);return}};Gh.prototype.number=function(e){if(eoe.test(e)){this.word+=e;return}if(f$.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Gh.prototype.quoted=function(e){if(e==='"'){this.state=Qne;return}this.word+=e};Gh.prototype.keyword=function(e){if(g8e.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=p2;return}if(f$.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Gh.prototype.neutral=function(e){if(y8e.test(e)){this.word=e,this.state=Kne;return}if(e==='"'){this.word="",this.state=WI;return}if(eoe.test(e)){this.word=e,this.state=Xne;return}if(f$.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Gh.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===xF)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function v8e(e){var t=new Gh(e);return t.output()}function tq(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var i=t?{}:e,s=r.reduce(function(n,o){return L0(o,n),n},i);t&&(e[t]=s)}function L0(e,t){if(!Array.isArray(e)){t[e]=!0;return}var r=e.shift();if(r==="PARAMETER"&&(r=e.shift()),e.length===1){if(Array.isArray(e[0])){t[r]={},L0(e[0],t[r]);return}t[r]=e[0];return}if(!e.length){t[r]=!0;return}if(r==="TOWGS84"){t[r]=e;return}if(r==="AXIS"){r in t||(t[r]=[]),t[r].push(e);return}Array.isArray(r)||(t[r]={});var i;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[r]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&L0(e[2],t[r]);return;case"SPHEROID":case"ELLIPSOID":t[r]={name:e[0],a:e[1],rf:e[2]},e.length===4&&L0(e[3],t[r]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],tq(t,r,e);return;default:for(i=-1;++i<e.length;)if(!Array.isArray(e[i]))return L0(e,t[r]);return tq(t,r,e)}}var b8e=.017453292519943295;function w8e(e,t){var r=t[0],i=t[1];!(r in e)&&i in e&&(e[r]=e[i],t.length===3&&(e[r]=t[2](e[r])))}function eu(e){return e*b8e}function _8e(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",r=0,i=e.AXIS.length;r<i;++r){var s=[e.AXIS[r][0].toLowerCase(),e.AXIS[r][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?t+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?t+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?t+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var n=e.GEOGCS;e.type==="GEOGCS"&&(n=e),n&&(n.DATUM?e.datumCode=n.DATUM.name.toLowerCase():e.datumCode=n.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),n.DATUM&&n.DATUM.SPHEROID&&(e.ellps=n.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=n.DATUM.SPHEROID.a,e.rf=parseFloat(n.DATUM.SPHEROID.rf,10)),n.DATUM&&n.DATUM.TOWGS84&&(e.datum_params=n.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function o(u){var c=e.to_meter||1;return u*c}var a=function(u){return w8e(e,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",eu],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",eu],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",eu],["lat0","latitude_of_origin",eu],["lat0","standard_parallel_1",eu],["lat1","standard_parallel_1",eu],["lat2","standard_parallel_2",eu],["azimuth","Azimuth"],["alpha","azimuth",eu],["srsCode","name"]];l.forEach(a),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=eu(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=eu(e.lat0>0?90:-90))}function toe(e){var t=v8e(e),r=t.shift(),i=t.shift();t.unshift(["name",i]),t.unshift(["type",r]);var s={};return L0(t,s),_8e(s),s}function Pn(e){var t=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?Pn[e]=oN(arguments[1]):Pn[e]=toe(arguments[1]):Pn[e]=r}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(i){Array.isArray(i)?Pn.apply(t,i):Pn(i)});if(typeof e=="string"){if(e in Pn)return Pn[e]}else"EPSG"in e?Pn["EPSG:"+e.EPSG]=e:"ESRI"in e?Pn["ESRI:"+e.ESRI]=e:"IAU2000"in e?Pn["IAU2000:"+e.IAU2000]=e:console.log(e);return}}l8e(Pn);function S8e(e){return typeof e=="string"}function x8e(e){return e in Pn}var M8e=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function T8e(e){return M8e.some(function(t){return e.indexOf(t)>-1})}var I8e=["3857","900913","3785","102113"];function E8e(e){var t=kd(e,"authority");if(t){var r=kd(t,"epsg");return r&&I8e.indexOf(r)>-1}}function A8e(e){var t=kd(e,"extension");if(t)return kd(t,"proj4")}function $8e(e){return e[0]==="+"}function C8e(e){if(S8e(e)){if(x8e(e))return Pn[e];if(T8e(e)){var t=toe(e);if(E8e(t))return Pn["EPSG:3857"];var r=A8e(t);return r?oN(r):t}if($8e(e))return oN(e)}else return e}function rq(e,t){e=e||{};var r,i;if(!t)return e;for(i in t)r=t[i],r!==void 0&&(e[i]=r);return e}function ic(e,t,r){var i=e*t;return r/Math.sqrt(1-i*i)}function _S(e){return e<0?-1:1}function Ge(e){return Math.abs(e)<=Ai?e:e-_S(e)*h2}function Fl(e,t,r){var i=e*r,s=.5*e;return i=Math.pow((1-i)/(1+i),s),Math.tan(.5*(Ee-t))/i}function d2(e,t){for(var r=.5*e,i,s,n=Ee-2*Math.atan(t),o=0;o<=15;o++)if(i=e*Math.sin(n),s=Ee-2*Math.atan(t*Math.pow((1-i)/(1+i),r))-n,n+=s,Math.abs(s)<=1e-10)return n;return-9999}function O8e(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ic(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function P8e(e){var t=e.x,r=e.y;if(r*Lu>90&&r*Lu<-90&&t*Lu>180&&t*Lu<-180)return null;var i,s;if(Math.abs(Math.abs(r)-Ee)<=Ue)return null;if(this.sphere)i=this.x0+this.a*this.k0*Ge(t-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(ur+.5*r));else{var n=Math.sin(r),o=Fl(this.e,r,n);i=this.x0+this.a*this.k0*Ge(t-this.long0),s=this.y0-this.a*this.k0*Math.log(o)}return e.x=i,e.y=s,e}function R8e(e){var t=e.x-this.x0,r=e.y-this.y0,i,s;if(this.sphere)s=Ee-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var n=Math.exp(-r/(this.a*this.k0));if(s=d2(this.e,n),s===-9999)return null}return i=Ge(this.long0+t/(this.a*this.k0)),e.x=i,e.y=s,e}var L8e=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const k8e={init:O8e,forward:P8e,inverse:R8e,names:L8e};function N8e(){}function iq(e){return e}var D8e=["longlat","identity"];const F8e={init:N8e,forward:iq,inverse:iq,names:D8e};var j8e=[k8e,F8e],m3={},JI=[];function roe(e,t){var r=JI.length;return e.names?(JI[r]=e,e.names.forEach(function(i){m3[i.toLowerCase()]=r}),this):(console.log(t),!0)}function V8e(e){if(!e)return!1;var t=e.toLowerCase();if(typeof m3[t]<"u"&&JI[m3[t]])return JI[m3[t]]}function U8e(){j8e.forEach(roe)}const z8e={start:U8e,add:roe,get:V8e};var Lt={};Lt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Lt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Lt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Lt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Lt.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Lt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Lt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Lt.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Lt.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Lt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Lt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Lt.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Lt.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Lt.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Lt.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Lt.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Lt.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Lt.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Lt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Lt.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Lt.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Lt.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Lt.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Lt.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Lt.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Lt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Lt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Lt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Lt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Lt.hough={a:6378270,rf:297,ellipseName:"Hough"};Lt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Lt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Lt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Lt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Lt.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Lt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Lt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Lt.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Lt.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Lt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Lt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Lt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var G8e=Lt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Lt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function B8e(e,t,r,i){var s=e*e,n=t*t,o=(s-n)/s,a=0;i?(e*=1-o*(h8e+o*(p8e+o*d8e)),s=e*e,o=0):a=Math.sqrt(o);var l=(s-n)/n;return{es:o,e:a,ep2:l}}function q8e(e,t,r,i,s){if(!e){var n=kd(Lt,i);n||(n=G8e),e=n.a,t=n.b,r=n.rf}return r&&!t&&(t=(1-1/r)*e),(r===0||Math.abs(e-t)<Ue)&&(s=!0,t=e),{a:e,b:t,rf:r,sphere:s}}var ss={};ss.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};ss.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};ss.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};ss.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};ss.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};ss.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};ss.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};ss.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};ss.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};ss.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};ss.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};ss.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};ss.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};ss.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};ss.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};ss.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};ss.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};ss.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function H8e(e,t,r,i,s,n,o){var a={};return e===void 0||e==="none"?a.datum_type=nN:a.datum_type=u8e,t&&(a.datum_params=t.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=ky),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=Ny,a.datum_params[3]*=h_,a.datum_params[4]*=h_,a.datum_params[5]*=h_,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=fv,a.grids=o),a.a=r,a.b=i,a.es=s,a.ep2=n,a}var ioe={};function W8e(e,t){var r=new DataView(t),i=Y8e(r),s=K8e(r,i),n=X8e(r,s,i),o={header:s,subgrids:n};return ioe[e]=o,o}function J8e(e){if(e===void 0)return null;var t=e.split(",");return t.map(Z8e)}function Z8e(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:ioe[e]||null,isNull:!1}}function k0(e){return e/3600*Math.PI/180}function Y8e(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function K8e(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:aN(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function aN(e,t,r){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,r)))}function X8e(e,t,r){for(var i=176,s=[],n=0;n<t.nSubgrids;n++){var o=eFe(e,i,r),a=tFe(e,i,o,r),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),u=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[k0(o.lowerLongitude),k0(o.lowerLatitude)],del:[k0(o.longitudeInterval),k0(o.latitudeInterval)],lim:[l,u],count:o.gridNodeCount,cvs:Q8e(a)}),i+=176+o.gridNodeCount*16}return s}function Q8e(e){return e.map(function(t){return[k0(t.longitudeShift),k0(t.latitudeShift)]})}function eFe(e,t,r){return{name:aN(e,t+8,t+16).trim(),parent:aN(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,r),upperLatitude:e.getFloat64(t+88,r),lowerLongitude:e.getFloat64(t+104,r),upperLongitude:e.getFloat64(t+120,r),latitudeInterval:e.getFloat64(t+136,r),longitudeInterval:e.getFloat64(t+152,r),gridNodeCount:e.getInt32(t+168,r)}}function tFe(e,t,r,i){for(var s=t+176,n=16,o=[],a=0;a<r.gridNodeCount;a++){var l={latitudeShift:e.getFloat32(s+a*n,i),longitudeShift:e.getFloat32(s+a*n+4,i),latitudeAccuracy:e.getFloat32(s+a*n+8,i),longitudeAccuracy:e.getFloat32(s+a*n+12,i)};o.push(l)}return o}function qu(e,t){if(!(this instanceof qu))return new qu(e);t=t||function(u){if(u)throw u};var r=C8e(e);if(typeof r!="object"){t("Could not parse to valid json: "+e);return}var i=qu.projections.get(r.projName);if(!i){t("Could not get projection name from: "+e);return}if(r.datumCode&&r.datumCode!=="none"){var s=kd(ss,r.datumCode);s&&(r.datum_params=r.datum_params||(s.towgs84?s.towgs84.split(","):null),r.ellps=s.ellipse,r.datumName=s.datumName?s.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var n=q8e(r.a,r.b,r.rf,r.ellps,r.sphere),o=B8e(n.a,n.b,n.rf,r.R_A),a=J8e(r.nadgrids),l=r.datum||H8e(r.datumCode,r.datum_params,n.a,n.b,o.es,o.ep2,a);rq(this,r),rq(this,i),this.a=n.a,this.b=n.b,this.rf=n.rf,this.sphere=n.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),t(null,this)}qu.projections=z8e;qu.projections.start();function rFe(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===ky?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===Ny?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function soe(e,t,r){var i=e.x,s=e.y,n=e.z?e.z:0,o,a,l,u;if(s<-Ee&&s>-1.001*Ee)s=-Ee;else if(s>Ee&&s<1.001*Ee)s=Ee;else{if(s<-Ee)return{x:-1/0,y:-1/0,z:e.z};if(s>Ee)return{x:1/0,y:1/0,z:e.z}}return i>Math.PI&&(i-=2*Math.PI),a=Math.sin(s),u=Math.cos(s),l=a*a,o=r/Math.sqrt(1-t*l),{x:(o+n)*u*Math.cos(i),y:(o+n)*u*Math.sin(i),z:(o*(1-t)+n)*a}}function noe(e,t,r,i){var s=1e-12,n=s*s,o=30,a,l,u,c,p,f,m,g,b,w,S,M,x,_=e.x,I=e.y,E=e.z?e.z:0,A,C,O;if(a=Math.sqrt(_*_+I*I),l=Math.sqrt(_*_+I*I+E*E),a/r<s){if(A=0,l/r<s)return C=Ee,O=-i,{x:e.x,y:e.y,z:e.z}}else A=Math.atan2(I,_);u=E/l,c=a/l,p=1/Math.sqrt(1-t*(2-t)*c*c),g=c*(1-t)*p,b=u*p,x=0;do x++,m=r/Math.sqrt(1-t*b*b),O=a*g+E*b-m*(1-t*b*b),f=t*m/(m+O),p=1/Math.sqrt(1-f*(2-f)*c*c),w=c*(1-f)*p,S=u*p,M=S*g-w*b,g=w,b=S;while(M*M>n&&x<o);return C=Math.atan(S/Math.abs(w)),{x:A,y:C,z:O}}function iFe(e,t,r){if(t===ky)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===Ny){var i=r[0],s=r[1],n=r[2],o=r[3],a=r[4],l=r[5],u=r[6];return{x:u*(e.x-l*e.y+a*e.z)+i,y:u*(l*e.x+e.y-o*e.z)+s,z:u*(-a*e.x+o*e.y+e.z)+n}}}function sFe(e,t,r){if(t===ky)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===Ny){var i=r[0],s=r[1],n=r[2],o=r[3],a=r[4],l=r[5],u=r[6],c=(e.x-i)/u,p=(e.y-s)/u,f=(e.z-n)/u;return{x:c+l*p-a*f,y:-l*c+p+o*f,z:a*c-o*p+f}}}function iM(e){return e===ky||e===Ny}function nFe(e,t,r){if(rFe(e,t)||e.datum_type===nN||t.datum_type===nN)return r;var i=e.a,s=e.es;if(e.datum_type===fv){var n=sq(e,!1,r);if(n!==0)return;i=XB,s=QB}var o=t.a,a=t.b,l=t.es;if(t.datum_type===fv&&(o=XB,a=c8e,l=QB),s===l&&i===o&&!iM(e.datum_type)&&!iM(t.datum_type))return r;if(r=soe(r,s,i),iM(e.datum_type)&&(r=iFe(r,e.datum_type,e.datum_params)),iM(t.datum_type)&&(r=sFe(r,t.datum_type,t.datum_params)),r=noe(r,l,o,a),t.datum_type===fv){var u=sq(t,!0,r);if(u!==0)return}return r}function sq(e,t,r){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-r.x,y:r.y},s={x:Number.NaN,y:Number.NaN},n=[];e:for(var o=0;o<e.grids.length;o++){var a=e.grids[o];if(n.push(a.name),a.isNull){s=i;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,u=0,c=l.length;u<c;u++){var p=l[u],f=(Math.abs(p.del[1])+Math.abs(p.del[0]))/1e4,m=p.ll[0]-f,g=p.ll[1]-f,b=p.ll[0]+(p.lim[0]-1)*p.del[0]+f,w=p.ll[1]+(p.lim[1]-1)*p.del[1]+f;if(!(g>i.y||m>i.x||w<i.y||b<i.x)&&(s=oFe(i,t,p),!isNaN(s.x)))break e}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*Lu+" "+i.y*Lu+" tried: '"+n+"'"),-1):(r.x=-s.x,r.y=s.y,0)}function oFe(e,t,r){var i={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return i;var s={x:e.x,y:e.y};s.x-=r.ll[0],s.y-=r.ll[1],s.x=Ge(s.x-Math.PI)+Math.PI;var n=nq(s,r);if(t){if(isNaN(n.x))return i;n.x=s.x-n.x,n.y=s.y-n.y;var o=9,a=1e-12,l,u;do{if(u=nq(n,r),isNaN(u.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:s.x-(u.x+n.x),y:s.y-(u.y+n.y)},n.x+=l.x,n.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=Ge(n.x+r.ll[0]),i.y=n.y+r.ll[1]}else isNaN(n.x)||(i.x=e.x+n.x,i.y=e.y+n.y);return i}function nq(e,t){var r={x:e.x/t.del[0],y:e.y/t.del[1]},i={x:Math.floor(r.x),y:Math.floor(r.y)},s={x:r.x-1*i.x,y:r.y-1*i.y},n={x:Number.NaN,y:Number.NaN},o;if(i.x<0||i.x>=t.lim[0]||i.y<0||i.y>=t.lim[1])return n;o=i.y*t.lim[0]+i.x;var a={x:t.cvs[o][0],y:t.cvs[o][1]};o++;var l={x:t.cvs[o][0],y:t.cvs[o][1]};o+=t.lim[0];var u={x:t.cvs[o][0],y:t.cvs[o][1]};o--;var c={x:t.cvs[o][0],y:t.cvs[o][1]},p=s.x*s.y,f=s.x*(1-s.y),m=(1-s.x)*(1-s.y),g=(1-s.x)*s.y;return n.x=m*a.x+f*l.x+g*c.x+p*u.x,n.y=m*a.y+f*l.y+g*c.y+p*u.y,n}function oq(e,t,r){var i=r.x,s=r.y,n=r.z||0,o,a,l,u={};for(l=0;l<3;l++)if(!(t&&l===2&&r.z===void 0))switch(l===0?(o=i,"ew".indexOf(e.axis[l])!==-1?a="x":a="y"):l===1?(o=s,"ns".indexOf(e.axis[l])!==-1?a="y":a="x"):(o=n,a="z"),e.axis[l]){case"e":u[a]=o;break;case"w":u[a]=-o;break;case"n":u[a]=o;break;case"s":u[a]=-o;break;case"u":r[a]!==void 0&&(u.z=o);break;case"d":r[a]!==void 0&&(u.z=-o);break;default:return null}return u}function ooe(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function aFe(e){aq(e.x),aq(e.y)}function aq(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function lFe(e,t){return(e.datum.datum_type===ky||e.datum.datum_type===Ny||e.datum.datum_type===fv)&&t.datumCode!=="WGS84"||(t.datum.datum_type===ky||t.datum.datum_type===Ny||t.datum.datum_type===fv)&&e.datumCode!=="WGS84"}function ZI(e,t,r,i){var s;Array.isArray(r)?r=ooe(r):r={x:r.x,y:r.y,z:r.z,m:r.m};var n=r.z!==void 0;if(aFe(r),e.datum&&t.datum&&lFe(e,t)&&(s=new qu("WGS84"),r=ZI(e,s,r,i),e=s),i&&e.axis!=="enu"&&(r=oq(e,!1,r)),e.projName==="longlat")r={x:r.x*Es,y:r.y*Es,z:r.z||0};else if(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),r=e.inverse(r),!r)return;if(e.from_greenwich&&(r.x+=e.from_greenwich),r=nFe(e.datum,t.datum,r),!!r)return t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),t.projName==="longlat"?r={x:r.x*Lu,y:r.y*Lu,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),i&&t.axis!=="enu"?oq(t,!0,r):(r&&!n&&delete r.z,r)}var lq=qu("WGS84");function oC(e,t,r,i){var s,n,o;return Array.isArray(r)?(s=ZI(e,t,r,i)||{x:NaN,y:NaN},r.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(r.slice(3)):[s.x,s.y,r[2]].concat(r.slice(3)):[s.x,s.y].concat(r.slice(2)):[s.x,s.y]):(n=ZI(e,t,r,i),o=Object.keys(r),o.length===2||o.forEach(function(a){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;n[a]=r[a]}),n)}function uq(e){return e instanceof qu?e:e.oProj?e.oProj:qu(e)}function Sr(e,t,r){e=uq(e);var i=!1,s;return typeof t>"u"?(t=e,e=lq,i=!0):(typeof t.x<"u"||Array.isArray(t))&&(r=t,t=e,e=lq,i=!0),t=uq(t),r?oC(e,t,r):(s={forward:function(n,o){return oC(e,t,n,o)},inverse:function(n,o){return oC(t,e,n,o)}},i&&(s.oProj=t),s)}var cq=6,aoe="AJSAJS",loe="AFAFAF",N0=65,so=73,Ia=79,Aw=86,$w=90;const uFe={forward:uoe,inverse:cFe,toPoint:coe};function uoe(e,t){return t=t||5,dFe(hFe({lat:e[1],lon:e[0]}),t)}function cFe(e){var t=MF(poe(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function coe(e){var t=MF(poe(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function aC(e){return e*(Math.PI/180)}function hq(e){return 180*(e/Math.PI)}function hFe(e){var t=e.lat,r=e.lon,i=6378137,s=.00669438,n=.9996,o,a,l,u,c,p,f,m=aC(t),g=aC(r),b,w;w=Math.floor((r+180)/6)+1,r===180&&(w=60),t>=56&&t<64&&r>=3&&r<12&&(w=32),t>=72&&t<84&&(r>=0&&r<9?w=31:r>=9&&r<21?w=33:r>=21&&r<33?w=35:r>=33&&r<42&&(w=37)),o=(w-1)*6-180+3,b=aC(o),a=s/(1-s),l=i/Math.sqrt(1-s*Math.sin(m)*Math.sin(m)),u=Math.tan(m)*Math.tan(m),c=a*Math.cos(m)*Math.cos(m),p=Math.cos(m)*(g-b),f=i*((1-s/4-3*s*s/64-5*s*s*s/256)*m-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*m)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*m)-35*s*s*s/3072*Math.sin(6*m));var S=n*l*(p+(1-u+c)*p*p*p/6+(5-18*u+u*u+72*c-58*a)*p*p*p*p*p/120)+5e5,M=n*(f+l*Math.tan(m)*(p*p/2+(5-u+9*c+4*c*c)*p*p*p*p/24+(61-58*u+u*u+600*c-330*a)*p*p*p*p*p*p/720));return t<0&&(M+=1e7),{northing:Math.round(M),easting:Math.round(S),zoneNumber:w,zoneLetter:pFe(t)}}function MF(e){var t=e.northing,r=e.easting,i=e.zoneLetter,s=e.zoneNumber;if(s<0||s>60)return null;var n=.9996,o=6378137,a=.00669438,l,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),c,p,f,m,g,b,w,S,M,x=r-5e5,_=t;i<"N"&&(_-=1e7),w=(s-1)*6-180+3,l=a/(1-a),b=_/n,S=b/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),M=S+(3*u/2-27*u*u*u/32)*Math.sin(2*S)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*S)+151*u*u*u/96*Math.sin(6*S),c=o/Math.sqrt(1-a*Math.sin(M)*Math.sin(M)),p=Math.tan(M)*Math.tan(M),f=l*Math.cos(M)*Math.cos(M),m=o*(1-a)/Math.pow(1-a*Math.sin(M)*Math.sin(M),1.5),g=x/(c*n);var I=M-c*Math.tan(M)/m*(g*g/2-(5+3*p+10*f-4*f*f-9*l)*g*g*g*g/24+(61+90*p+298*f+45*p*p-252*l-3*f*f)*g*g*g*g*g*g/720);I=hq(I);var E=(g-(1+2*p+f)*g*g*g/6+(5-2*f+28*p-3*f*f+8*l+24*p*p)*g*g*g*g*g/120)/Math.cos(M);E=w+hq(E);var A;if(e.accuracy){var C=MF({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});A={top:C.lat,right:C.lon,bottom:I,left:E}}else A={lat:I,lon:E};return A}function pFe(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function dFe(e,t){var r="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+fFe(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+i.substr(i.length-5,t)}function fFe(e,t,r){var i=hoe(r),s=Math.floor(e/1e5),n=Math.floor(t/1e5)%20;return mFe(s,n,i)}function hoe(e){var t=e%cq;return t===0&&(t=cq),t}function mFe(e,t,r){var i=r-1,s=aoe.charCodeAt(i),n=loe.charCodeAt(i),o=s+e-1,a=n+t,l=!1;o>$w&&(o=o-$w+N0-1,l=!0),(o===so||s<so&&o>so||(o>so||s<so)&&l)&&o++,(o===Ia||s<Ia&&o>Ia||(o>Ia||s<Ia)&&l)&&(o++,o===so&&o++),o>$w&&(o=o-$w+N0-1),a>Aw?(a=a-Aw+N0-1,l=!0):l=!1,(a===so||n<so&&a>so||(a>so||n<so)&&l)&&a++,(a===Ia||n<Ia&&a>Ia||(a>Ia||n<Ia)&&l)&&(a++,a===so&&a++),a>Aw&&(a=a-Aw+N0-1);var u=String.fromCharCode(o)+String.fromCharCode(a);return u}function poe(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,r=null,i="",s,n=0;!/[A-Z]/.test(s=e.charAt(n));){if(n>=2)throw"MGRSPoint bad conversion from: "+e;i+=s,n++}var o=parseInt(i,10);if(n===0||n+3>t)throw"MGRSPoint bad conversion from: "+e;var a=e.charAt(n++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+e;r=e.substring(n,n+=2);for(var l=hoe(o),u=yFe(r.charAt(0),l),c=gFe(r.charAt(1),l);c<vFe(a);)c+=2e6;var p=t-n;if(p%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var f=p/2,m=0,g=0,b,w,S,M,x;return f>0&&(b=1e5/Math.pow(10,f),w=e.substring(n,n+f),m=parseFloat(w)*b,S=e.substring(n+f),g=parseFloat(S)*b),M=m+u,x=g+c,{easting:M,northing:x,zoneLetter:a,zoneNumber:o,accuracy:b}}function yFe(e,t){for(var r=aoe.charCodeAt(t-1),i=1e5,s=!1;r!==e.charCodeAt(0);){if(r++,r===so&&r++,r===Ia&&r++,r>$w){if(s)throw"Bad character: "+e;r=N0,s=!0}i+=1e5}return i}function gFe(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var r=loe.charCodeAt(t-1),i=0,s=!1;r!==e.charCodeAt(0);){if(r++,r===so&&r++,r===Ia&&r++,r>Aw){if(s)throw"Bad character: "+e;r=N0,s=!0}i+=1e5}return i}function vFe(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Vv(e,t,r){if(!(this instanceof Vv))return new Vv(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var i=e.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Vv.fromMGRS=function(e){return new Vv(coe(e))};Vv.prototype.toMGRS=function(e){return uoe([this.x,this.y],e)};var bFe=1,wFe=.25,pq=.046875,dq=.01953125,fq=.01068115234375,_Fe=.75,SFe=.46875,xFe=.013020833333333334,MFe=.007120768229166667,TFe=.3645833333333333,IFe=.005696614583333333,EFe=.3076171875;function TF(e){var t=[];t[0]=bFe-e*(wFe+e*(pq+e*(dq+e*fq))),t[1]=e*(_Fe-e*(pq+e*(dq+e*fq)));var r=e*e;return t[2]=r*(SFe-e*(xFe+e*MFe)),r*=e,t[3]=r*(TFe-e*IFe),t[4]=r*e*EFe,t}function P1(e,t,r,i){return r*=t,t*=t,i[0]*e-r*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var AFe=20;function IF(e,t,r){for(var i=1/(1-t),s=e,n=AFe;n;--n){var o=Math.sin(s),a=1-t*o*o;if(a=(P1(s,o,Math.cos(s),r)-e)*(a*Math.sqrt(a))*i,s-=a,Math.abs(a)<Ue)return s}return s}function $Fe(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=TF(this.es),this.ml0=P1(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function CFe(e){var t=e.x,r=e.y,i=Ge(t-this.long0),s,n,o,a=Math.sin(r),l=Math.cos(r);if(this.es){var c=l*i,p=Math.pow(c,2),f=this.ep2*Math.pow(l,2),m=Math.pow(f,2),g=Math.abs(l)>Ue?Math.tan(r):0,b=Math.pow(g,2),w=Math.pow(b,2);s=1-this.es*Math.pow(a,2),c=c/Math.sqrt(s);var S=P1(r,a,l,this.en);n=this.a*(this.k0*c*(1+p/6*(1-b+f+p/20*(5-18*b+w+14*f-58*b*f+p/42*(61+179*w-w*b-479*b)))))+this.x0,o=this.a*(this.k0*(S-this.ml0+a*i*c/2*(1+p/12*(5-b+9*f+4*m+p/30*(61+w-58*b+270*f-330*b*f+p/56*(1385+543*w-w*b-3111*b))))))+this.y0}else{var u=l*Math.sin(i);if(Math.abs(Math.abs(u)-1)<Ue)return 93;if(n=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=l*Math.cos(i)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>Ue)return 93;o=0}else o=Math.acos(o);r<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return e.x=n,e.y=o,e}function OFe(e){var t,r,i,s,n=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,r=IF(t,this.es,this.en),Math.abs(r)<Ee){var p=Math.sin(r),f=Math.cos(r),m=Math.abs(f)>Ue?Math.tan(r):0,g=this.ep2*Math.pow(f,2),b=Math.pow(g,2),w=Math.pow(m,2),S=Math.pow(w,2);t=1-this.es*Math.pow(p,2);var M=n*Math.sqrt(t)/this.k0,x=Math.pow(M,2);t=t*m,i=r-t*x/(1-this.es)*.5*(1-x/12*(5+3*w-9*g*w+g-4*b-x/30*(61+90*w-252*g*w+45*S+46*g-x/56*(1385+3633*w+4095*S+1574*S*w)))),s=Ge(this.long0+M*(1-x/6*(1+2*w+g-x/20*(5+28*w+24*S+8*g*w+6*g-x/42*(61+662*w+1320*S+720*S*w))))/f)}else i=Ee*_S(o),s=0;else{var a=Math.exp(n/this.k0),l=.5*(a-1/a),u=this.lat0+o/this.k0,c=Math.cos(u);t=Math.sqrt((1-Math.pow(c,2))/(1+Math.pow(l,2))),i=Math.asin(t),o<0&&(i=-i),l===0&&c===0?s=0:s=Ge(Math.atan2(l,c)+this.long0)}return e.x=s,e.y=i,e}var PFe=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const y3={init:$Fe,forward:CFe,inverse:OFe,names:PFe};function doe(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function po(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),i=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(i,2))}function RFe(e){var t=1+e,r=t-1;return r===0?e:e*Math.log(t)/r}function LFe(e){var t=Math.abs(e);return t=RFe(t*(1+t/(po(1,t)+1))),e<0?-t:t}function EF(e,t){for(var r=2*Math.cos(2*t),i=e.length-1,s=e[i],n=0,o;--i>=0;)o=-n+r*s+e[i],n=s,s=o;return t+o*Math.sin(2*t)}function kFe(e,t){for(var r=2*Math.cos(t),i=e.length-1,s=e[i],n=0,o;--i>=0;)o=-n+r*s+e[i],n=s,s=o;return Math.sin(t)*o}function NFe(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function foe(e,t,r){for(var i=Math.sin(t),s=Math.cos(t),n=doe(r),o=NFe(r),a=2*s*o,l=-2*i*n,u=e.length-1,c=e[u],p=0,f=0,m=0,g,b;--u>=0;)g=f,b=p,f=c,p=m,c=-g+a*f-l*p+e[u],m=-b+l*f+a*p;return a=i*o,l=s*n,[a*c-l*m,a*m+l*c]}function DFe(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(y3.init.apply(this),this.forward=y3.forward,this.inverse=y3.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),r=r*t,this.cgb[1]=r*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r=r*t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),r=r*t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(-12/5+t*(-24832/14175))),r=r*t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r=r*t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),r=r*t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r=r*t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r=r*t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r=r*t,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var i=EF(this.cbg,this.lat0);this.Zb=-this.Qn*(i+kFe(this.gtu,2*i))}function FFe(e){var t=Ge(e.x-this.long0),r=e.y;r=EF(this.cbg,r);var i=Math.sin(r),s=Math.cos(r),n=Math.sin(t),o=Math.cos(t);r=Math.atan2(i,o*s),t=Math.atan2(n*s,po(i,s*o)),t=LFe(Math.tan(t));var a=foe(this.gtu,2*r,2*t);r=r+a[0],t=t+a[1];var l,u;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(l=1/0,u=1/0),e.x=l,e.y=u,e}function jFe(e){var t=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,t=t/this.Qn;var i,s;if(Math.abs(t)<=2.623395162778){var n=foe(this.utg,2*r,2*t);r=r+n[0],t=t+n[1],t=Math.atan(doe(t));var o=Math.sin(r),a=Math.cos(r),l=Math.sin(t),u=Math.cos(t);r=Math.atan2(o*u,po(l,u*a)),t=Math.atan2(l,u*a),i=Ge(t+this.long0),s=EF(this.cgb,r)}else i=1/0,s=1/0;return e.x=i,e.y=s,e}var VFe=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const g3={init:DFe,forward:FFe,inverse:jFe,names:VFe};function UFe(e,t){if(e===void 0){if(e=Math.floor((Ge(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var zFe="etmerc";function GFe(){var e=UFe(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Es,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,g3.init.apply(this),this.forward=g3.forward,this.inverse=g3.inverse}var BFe=["Universal Transverse Mercator System","utm"];const qFe={init:GFe,names:BFe,dependsOn:zFe};function AF(e,t){return Math.pow((1-e)/(1+e),t)}var HFe=20;function WFe(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ur)/(Math.pow(Math.tan(.5*this.lat0+ur),this.C)*AF(this.e*e,this.ratexp))}function JFe(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+ur),this.C)*AF(this.e*Math.sin(r),this.ratexp))-Ee,e.x=this.C*t,e}function ZFe(e){for(var t=1e-14,r=e.x/this.C,i=e.y,s=Math.pow(Math.tan(.5*i+ur)/this.K,1/this.C),n=HFe;n>0&&(i=2*Math.atan(s*AF(this.e*Math.sin(e.y),-.5*this.e))-Ee,!(Math.abs(i-e.y)<t));--n)e.y=i;return n?(e.x=r,e.y=i,e):null}var YFe=["gauss"];const $F={init:WFe,forward:JFe,inverse:ZFe,names:YFe};function KFe(){$F.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function XFe(e){var t,r,i,s;return e.x=Ge(e.x-this.long0),$F.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),i=Math.cos(e.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*i),e.x=s*r*Math.sin(e.x),e.y=s*(this.cosc0*t-this.sinc0*r*i),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function QFe(e){var t,r,i,s,n;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,n=po(e.x,e.y)){var o=2*Math.atan2(n,this.R2);t=Math.sin(o),r=Math.cos(o),s=Math.asin(r*this.sinc0+e.y*t*this.cosc0/n),i=Math.atan2(e.x*t,n*this.cosc0*r-e.y*this.sinc0*t)}else s=this.phic0,i=0;return e.x=i,e.y=s,$F.inverse.apply(this,[e]),e.x=Ge(e.x+this.long0),e}var e9e=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const t9e={init:KFe,forward:XFe,inverse:QFe,names:e9e};function r9e(e,t,r){return t*=r,Math.tan(.5*(Ee+e))*Math.pow((1-t)/(1+t),.5*r)}function i9e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ue&&(this.k0=.5*(1+_S(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Ue&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Ue&&Math.abs(Math.cos(this.lat_ts))>Ue&&(this.k0=.5*this.cons*ic(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Fl(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ic(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ee,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function s9e(e){var t=e.x,r=e.y,i=Math.sin(r),s=Math.cos(r),n,o,a,l,u,c,p=Ge(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Ue&&Math.abs(r+this.lat0)<=Ue?(e.x=NaN,e.y=NaN,e):this.sphere?(n=2*this.k0/(1+this.sinlat0*i+this.coslat0*s*Math.cos(p)),e.x=this.a*n*s*Math.sin(p)+this.x0,e.y=this.a*n*(this.coslat0*i-this.sinlat0*s*Math.cos(p))+this.y0,e):(o=2*Math.atan(this.ssfn_(r,i,this.e))-Ee,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=Ue?(u=Fl(this.e,r*this.con,this.con*i),c=2*this.a*this.k0*u/this.cons,e.x=this.x0+c*Math.sin(t-this.long0),e.y=this.y0-this.con*c*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<Ue?(n=2*this.a*this.k0/(1+l*Math.cos(p)),e.y=n*a):(n=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(p))),e.y=n*(this.cosX0*a-this.sinX0*l*Math.cos(p))+this.y0),e.x=n*l*Math.sin(p)+this.x0,e))}function n9e(e){e.x-=this.x0,e.y-=this.y0;var t,r,i,s,n,o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,r=this.lat0,o<=Ue?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(a)*this.sinlat0+e.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<Ue?this.lat0>0?t=Ge(this.long0+Math.atan2(e.x,-1*e.y)):t=Ge(this.long0+Math.atan2(e.x,e.y)):t=Ge(this.long0+Math.atan2(e.x*Math.sin(a),o*this.coslat0*Math.cos(a)-e.y*this.sinlat0*Math.sin(a))),e.x=t,e.y=r,e)}else if(Math.abs(this.coslat0)<=Ue){if(o<=Ue)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,i=o*this.cons/(2*this.a*this.k0),r=this.con*d2(this.e,i),t=this.con*Ge(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else s=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=Ue?n=this.X0:(n=Math.asin(Math.cos(s)*this.sinX0+e.y*Math.sin(s)*this.cosX0/o),t=Ge(this.long0+Math.atan2(e.x*Math.sin(s),o*this.cosX0*Math.cos(s)-e.y*this.sinX0*Math.sin(s)))),r=-1*d2(this.e,Math.tan(.5*(Ee+n)));return e.x=t,e.y=r,e}var o9e=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const a9e={init:i9e,forward:s9e,inverse:n9e,names:o9e,ssfn_:r9e};function l9e(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,i=this.rf,s=1/i,n=2*s-Math.pow(s,2),o=this.e=Math.sqrt(n);this.R=this.k0*r*Math.sqrt(1-n)/(1-n*Math.pow(t,2)),this.alpha=Math.sqrt(1+n/(1-n)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+e/2)),u=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*l+this.alpha*o/2*u}function u9e(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=-this.alpha*(t+r)+this.K,s=2*(Math.atan(Math.exp(i))-Math.PI/4),n=this.alpha*(e.x-this.lambda0),o=Math.atan(Math.sin(n)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(n))),a=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(n));return e.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,e.x=this.R*o+this.x0,e}function c9e(e){for(var t=e.x-this.x0,r=e.y-this.y0,i=t/this.R,s=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),n=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(s))),a=this.lambda0+o/this.alpha,l=0,u=n,c=-1e3,p=0;Math.abs(u-c)>1e-7;){if(++p>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+n/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=a,e.y=u,e}var h9e=["somerc"];const p9e={init:l9e,forward:u9e,inverse:c9e,names:h9e};var v0=1e-7;function d9e(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],r=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(r)!==-1}function f9e(){var e,t,r,i,s,n,o,a,l,u,c=0,p,f=0,m=0,g=0,b=0,w=0,S=0;this.no_off=d9e(this),this.no_rot="no_rot"in this;var M=!1;"alpha"in this&&(M=!0);var x=!1;if("rectified_grid_angle"in this&&(x=!0),M&&(S=this.alpha),x&&(c=this.rectified_grid_angle*Es),M||x)f=this.longc;else if(m=this.long1,b=this.lat1,g=this.long2,w=this.lat2,Math.abs(b-w)<=v0||(e=Math.abs(b))<=v0||Math.abs(e-Ee)<=v0||Math.abs(Math.abs(this.lat0)-Ee)<=v0||Math.abs(Math.abs(w)-Ee)<=v0)throw new Error;var _=1-this.es;t=Math.sqrt(_),Math.abs(this.lat0)>Ue?(a=Math.sin(this.lat0),r=Math.cos(this.lat0),e=1-this.es*a*a,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/_),this.A=this.B*this.k0*t/e,i=this.B*t/(r*Math.sqrt(e)),s=i*i-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=i,this.E*=Math.pow(Fl(this.e,this.lat0,a),this.B)):(this.B=1/t,this.A=this.k0,this.E=i=s=1),M||x?(M?(p=Math.asin(Math.sin(S)/i),x||(c=S)):(p=c,S=Math.asin(i*Math.sin(p))),this.lam0=f-Math.asin(.5*(s-1/s)*Math.tan(p))/this.B):(n=Math.pow(Fl(this.e,b,Math.sin(b)),this.B),o=Math.pow(Fl(this.e,w,Math.sin(w)),this.B),s=this.E/n,l=(o-n)/(o+n),u=this.E*this.E,u=(u-o*n)/(u+o*n),e=m-g,e<-Math.pi?g-=h2:e>Math.pi&&(g+=h2),this.lam0=Ge(.5*(m+g)-Math.atan(u*Math.tan(.5*this.B*(m-g))/l)/this.B),p=Math.atan(2*Math.sin(this.B*Ge(m-this.lam0))/(s-1/s)),c=S=Math.asin(i*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(c),this.cosrot=Math.cos(c),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(ur-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(ur+s))}function m9e(e){var t={},r,i,s,n,o,a,l,u;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-Ee)>Ue){if(o=this.E/Math.pow(Fl(this.e,e.y,Math.sin(e.y)),this.B),a=1/o,r=.5*(o-a),i=.5*(o+a),n=Math.sin(this.B*e.x),s=(r*this.singam-n*this.cosgam)/i,Math.abs(Math.abs(s)-1)<Ue)throw new Error;u=.5*this.ArB*Math.log((1-s)/(1+s)),a=Math.cos(this.B*e.x),Math.abs(a)<v0?l=this.A*e.x:l=this.ArB*Math.atan2(r*this.cosgam+n*this.singam,a)}else u=e.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*e.y;return this.no_rot?(t.x=l,t.y=u):(l-=this.u_0,t.x=u*this.cosrot+l*this.sinrot,t.y=l*this.cosrot-u*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function y9e(e){var t,r,i,s,n,o,a,l={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(r=e.y,t=e.x):(r=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*r),s=.5*(i-1/i),n=.5*(i+1/i),o=Math.sin(this.BrA*t),a=(o*this.cosgam+s*this.singam)/n,Math.abs(Math.abs(a)-1)<Ue)l.x=0,l.y=a<0?-Ee:Ee;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=d2(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(s*this.cosgam-o*this.singam,Math.cos(this.BrA*t))}return l.x+=this.lam0,l}var g9e=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const v9e={init:f9e,forward:m9e,inverse:y9e,names:g9e};function b9e(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Ue)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),i=ic(this.e,t,r),s=Fl(this.e,this.lat1,t),n=Math.sin(this.lat2),o=Math.cos(this.lat2),a=ic(this.e,n,o),l=Fl(this.e,this.lat2,n),u=Fl(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Ue?this.ns=Math.log(i/a)/Math.log(s/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function w9e(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=Ue&&(r=_S(r)*(Ee-2*Ue));var i=Math.abs(Math.abs(r)-Ee),s,n;if(i>Ue)s=Fl(this.e,r,Math.sin(r)),n=this.a*this.f0*Math.pow(s,this.ns);else{if(i=r*this.ns,i<=0)return null;n=0}var o=this.ns*Ge(t-this.long0);return e.x=this.k0*(n*Math.sin(o))+this.x0,e.y=this.k0*(this.rh-n*Math.cos(o))+this.y0,e}function _9e(e){var t,r,i,s,n,o=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+a*a),r=1):(t=-Math.sqrt(o*o+a*a),r=-1);var l=0;if(t!==0&&(l=Math.atan2(r*o,r*a)),t!==0||this.ns>0){if(r=1/this.ns,i=Math.pow(t/(this.a*this.f0),r),s=d2(this.e,i),s===-9999)return null}else s=-Ee;return n=Ge(l/this.ns+this.long0),e.x=n,e.y=s,e}var S9e=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const x9e={init:b9e,forward:w9e,inverse:_9e,names:S9e};function M9e(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function T9e(e){var t,r,i,s,n,o,a,l=e.x,u=e.y,c=Ge(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),i=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(s)),o=this.n*n,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),e.y=a*Math.cos(o)/1,e.x=a*Math.sin(o)/1,this.czech||(e.y*=-1,e.x*=-1),e}function I9e(e){var t,r,i,s,n,o,a,l,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),n=Math.atan2(e.y,e.x),s=n/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(s)),r=Math.asin(Math.cos(i)*Math.sin(s)/Math.cos(t)),e.x=this.long0-r/this.alfa,a=t,l=0;var c=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(l=1),a=e.y,c+=1;while(l===0&&c<15);return c>=15?null:e}var E9e=["Krovak","krovak"];const A9e={init:M9e,forward:T9e,inverse:I9e,names:E9e};function Vn(e,t,r,i,s){return e*s-t*Math.sin(2*s)+r*Math.sin(4*s)-i*Math.sin(6*s)}function SS(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function xS(e){return .375*e*(1+.25*e*(1+.46875*e))}function MS(e){return .05859375*e*e*(1+.75*e)}function TS(e){return e*e*e*(35/3072)}function Uv(e,t,r){var i=t*r;return e/Math.sqrt(1-i*i)}function sf(e){return Math.abs(e)<Ee?e:e-_S(e)*Math.PI}function YI(e,t,r,i,s){var n,o;n=e/t;for(var a=0;a<15;a++)if(o=(e-(t*n-r*Math.sin(2*n)+i*Math.sin(4*n)-s*Math.sin(6*n)))/(t-2*r*Math.cos(2*n)+4*i*Math.cos(4*n)-6*s*Math.cos(6*n)),n+=o,Math.abs(o)<=1e-10)return n;return NaN}function $9e(){this.sphere||(this.e0=SS(this.es),this.e1=xS(this.es),this.e2=MS(this.es),this.e3=TS(this.es),this.ml0=this.a*Vn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function C9e(e){var t,r,i=e.x,s=e.y;if(i=Ge(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(i)),r=this.a*(Math.atan2(Math.tan(s),Math.cos(i))-this.lat0);else{var n=Math.sin(s),o=Math.cos(s),a=Uv(this.a,this.e,n),l=Math.tan(s)*Math.tan(s),u=i*Math.cos(s),c=u*u,p=this.es*o*o/(1-this.es),f=this.a*Vn(this.e0,this.e1,this.e2,this.e3,s);t=a*u*(1-c*l*(1/6-(8-l+8*p)*c/120)),r=f-this.ml0+a*n/o*c*(.5+(5-l+6*p)*c/24)}return e.x=t+this.x0,e.y=r+this.y0,e}function O9e(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,i,s;if(this.sphere){var n=r+this.lat0;i=Math.asin(Math.sin(n)*Math.cos(t)),s=Math.atan2(Math.tan(t),Math.cos(n))}else{var o=this.ml0/this.a+r,a=YI(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Ee)<=Ue)return e.x=this.long0,e.y=Ee,r<0&&(e.y*=-1),e;var l=Uv(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),p=t*this.a/l,f=p*p;i=a-l*Math.tan(a)/u*p*p*(.5-(1+3*c)*p*p/24),s=p*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(a)}return e.x=Ge(s+this.long0),e.y=sf(i),e}var P9e=["Cassini","Cassini_Soldner","cass"];const R9e={init:$9e,forward:C9e,inverse:O9e,names:P9e};function xd(e,t){var r;return e>1e-7?(r=e*t,(1-e*e)*(t/(1-r*r)-.5/e*Math.log((1-r)/(1+r)))):2*t}var L9e=1,k9e=2,N9e=3,D9e=4;function F9e(){var e=Math.abs(this.lat0);if(Math.abs(e-Ee)<Ue?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Ue?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=xd(this.e,1),this.mmf=.5/(1-this.es),this.apa=W9e(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=xd(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function j9e(e){var t,r,i,s,n,o,a,l,u,c,p=e.x,f=e.y;if(p=Ge(p-this.long0),this.sphere){if(n=Math.sin(f),c=Math.cos(f),i=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+c*i:1+this.sinph0*n+this.cosph0*c*i,r<=Ue)return null;r=Math.sqrt(2/r),t=r*c*Math.sin(p),r*=this.mode===this.EQUIT?n:this.cosph0*n-this.sinph0*c*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(f+this.lat0)<Ue)return null;r=ur-f*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),t=r*Math.sin(p),r*=i}}else{switch(a=0,l=0,u=0,i=Math.cos(p),s=Math.sin(p),n=Math.sin(f),o=xd(this.e,n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*i;break;case this.EQUIT:u=1+l*i;break;case this.N_POLE:u=Ee+f,o=this.qp-o;break;case this.S_POLE:u=f-Ee,o=this.qp+o;break}if(Math.abs(u)<Ue)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?r=this.ymf*u*(this.cosb1*a-this.sinb1*l*i):r=(u=Math.sqrt(2/(1+l*i)))*a*this.ymf,t=this.xmf*u*l*s;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(u=Math.sqrt(o))*s,r=i*(this.mode===this.S_POLE?u:-u)):t=r=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e}function V9e(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,i,s,n,o,a,l,u;if(this.sphere){var c=0,p,f=0;if(p=Math.sqrt(t*t+r*r),s=p*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(s),c=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(p)<=Ue?0:Math.asin(r*f/p),t*=f,r=c*p;break;case this.OBLIQ:s=Math.abs(p)<=Ue?this.lat0:Math.asin(c*this.sinph0+r*f*this.cosph0/p),t*=f*this.cosph0,r=(c-Math.sin(s)*this.sinph0)*p;break;case this.N_POLE:r=-r,s=Ee-s;break;case this.S_POLE:s-=Ee;break}i=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,r)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,r*=this.dd,l=Math.sqrt(t*t+r*r),l<Ue)return e.x=this.long0,e.y=this.lat0,e;o=2*Math.asin(.5*l/this.rq),n=Math.cos(o),t*=o=Math.sin(o),this.mode===this.OBLIQ?(u=n*this.sinb1+r*o*this.cosb1/l,a=this.qp*u,r=l*this.cosb1*n-r*this.sinb1*o):(u=r*o/l,a=this.qp*u,r=l*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),a=t*t+r*r,!a)return e.x=this.long0,e.y=this.lat0,e;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}i=Math.atan2(t,r),s=J9e(Math.asin(u),this.apa)}return e.x=Ge(this.long0+i),e.y=s,e}var U9e=.3333333333333333,z9e=.17222222222222222,G9e=.10257936507936508,B9e=.06388888888888888,q9e=.0664021164021164,H9e=.016415012942191543;function W9e(e){var t,r=[];return r[0]=e*U9e,t=e*e,r[0]+=t*z9e,r[1]=t*B9e,t*=e,r[0]+=t*G9e,r[1]+=t*q9e,r[2]=t*H9e,r}function J9e(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}var Z9e=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Y9e={init:F9e,forward:j9e,inverse:V9e,names:Z9e,S_POLE:L9e,N_POLE:k9e,EQUIT:N9e,OBLIQ:D9e};function Nd(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function K9e(){Math.abs(this.lat1+this.lat2)<Ue||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ic(this.e3,this.sin_po,this.cos_po),this.qs1=xd(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ic(this.e3,this.sin_po,this.cos_po),this.qs2=xd(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=xd(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Ue?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function X9e(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var i=xd(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,n=this.ns0*Ge(t-this.long0),o=s*Math.sin(n)+this.x0,a=this.rh-s*Math.cos(n)+this.y0;return e.x=o,e.y=a,e}function Q9e(e){var t,r,i,s,n,o;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),s=0,t!==0&&(s=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(r=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,r)),n=Ge(s/this.ns0+this.long0),e.x=n,e.y=o,e}function e7e(e,t){var r,i,s,n,o,a=Nd(.5*t);if(e<Ue)return a;for(var l=e*e,u=1;u<=25;u++)if(r=Math.sin(a),i=Math.cos(a),s=e*r,n=1-s*s,o=.5*n*n/i*(t/(1-l)-r/n+.5/e*Math.log((1-s)/(1+s))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var t7e=["Albers_Conic_Equal_Area","Albers","aea"];const r7e={init:K9e,forward:X9e,inverse:Q9e,names:t7e,phi1z:e7e};function i7e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function s7e(e){var t,r,i,s,n,o,a,l,u=e.x,c=e.y;return i=Ge(u-this.long0),t=Math.sin(c),r=Math.cos(c),s=Math.cos(i),o=this.sin_p14*t+this.cos_p14*r*s,n=1,o>0||Math.abs(o)<=Ue?(a=this.x0+this.a*n*r*Math.sin(i)/o,l=this.y0+this.a*n*(this.cos_p14*t-this.sin_p14*r*s)/o):(a=this.x0+this.infinity_dist*r*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*s)),e.x=a,e.y=l,e}function n7e(e){var t,r,i,s,n,o;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(s=Math.atan2(t,this.rc),r=Math.sin(s),i=Math.cos(s),o=Nd(i*this.sin_p14+e.y*r*this.cos_p14/t),n=Math.atan2(e.x*r,t*this.cos_p14*i-e.y*this.sin_p14*r),n=Ge(this.long0+n)):(o=this.phic0,n=0),e.x=n,e.y=o,e}var o7e=["gnom"];const a7e={init:i7e,forward:s7e,inverse:n7e,names:o7e};function l7e(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*Ee:Ee;for(var i=Math.asin(.5*t),s,n,o,a,l=0;l<30;l++)if(n=Math.sin(i),o=Math.cos(i),a=e*n,s=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-n/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),i+=s,Math.abs(s)<=1e-10)return i;return NaN}function u7e(){this.sphere||(this.k0=ic(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function c7e(e){var t=e.x,r=e.y,i,s,n=Ge(t-this.long0);if(this.sphere)i=this.x0+this.a*n*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=xd(this.e,Math.sin(r));i=this.x0+this.a*this.k0*n,s=this.y0+this.a*o*.5/this.k0}return e.x=i,e.y=s,e}function h7e(e){e.x-=this.x0,e.y-=this.y0;var t,r;return this.sphere?(t=Ge(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=l7e(this.e,2*e.y*this.k0/this.a),t=Ge(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e}var p7e=["cea"];const d7e={init:u7e,forward:c7e,inverse:h7e,names:p7e};function f7e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function m7e(e){var t=e.x,r=e.y,i=Ge(t-this.long0),s=sf(r-this.lat0);return e.x=this.x0+this.a*i*this.rc,e.y=this.y0+this.a*s,e}function y7e(e){var t=e.x,r=e.y;return e.x=Ge(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=sf(this.lat0+(r-this.y0)/this.a),e}var g7e=["Equirectangular","Equidistant_Cylindrical","eqc"];const v7e={init:f7e,forward:m7e,inverse:y7e,names:g7e};var mq=20;function b7e(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=SS(this.es),this.e1=xS(this.es),this.e2=MS(this.es),this.e3=TS(this.es),this.ml0=this.a*Vn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function w7e(e){var t=e.x,r=e.y,i,s,n,o=Ge(t-this.long0);if(n=o*Math.sin(r),this.sphere)Math.abs(r)<=Ue?(i=this.a*o,s=-1*this.a*this.lat0):(i=this.a*Math.sin(n)/Math.tan(r),s=this.a*(sf(r-this.lat0)+(1-Math.cos(n))/Math.tan(r)));else if(Math.abs(r)<=Ue)i=this.a*o,s=-1*this.ml0;else{var a=Uv(this.a,this.e,Math.sin(r))/Math.tan(r);i=a*Math.sin(n),s=this.a*Vn(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(n))}return e.x=i+this.x0,e.y=s+this.y0,e}function _7e(e){var t,r,i,s,n,o,a,l,u;if(i=e.x-this.x0,s=e.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=Ue)t=Ge(i/this.a+this.long0),r=0;else{o=this.lat0+s/this.a,a=i*i/this.a/this.a+o*o,l=o;var c;for(n=mq;n;--n)if(c=Math.tan(l),u=-1*(o*(l*c+1)-l-.5*(l*l+a)*c)/((l-o)/c-1),l+=u,Math.abs(u)<=Ue){r=l;break}t=Ge(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(r))}else if(Math.abs(s+this.ml0)<=Ue)r=0,t=Ge(this.long0+i/this.a);else{o=(this.ml0+s)/this.a,a=i*i/this.a/this.a+o*o,l=o;var p,f,m,g,b;for(n=mq;n;--n)if(b=this.e*Math.sin(l),p=Math.sqrt(1-b*b)*Math.tan(l),f=this.a*Vn(this.e0,this.e1,this.e2,this.e3,l),m=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),g=f/this.a,u=(o*(p*g+1)-g-.5*p*(g*g+a))/(this.es*Math.sin(2*l)*(g*g+a-2*o*g)/(4*p)+(o-g)*(p*m-2/Math.sin(2*l))-m),l-=u,Math.abs(u)<=Ue){r=l;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=Ge(this.long0+Math.asin(i*p/this.a)/Math.sin(r))}return e.x=t,e.y=r,e}var S7e=["Polyconic","poly"];const x7e={init:b7e,forward:w7e,inverse:_7e,names:S7e};function M7e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function T7e(e){var t,r=e.x,i=e.y,s=i-this.lat0,n=r-this.long0,o=s/h_*1e-5,a=n,l=1,u=0;for(t=1;t<=10;t++)l=l*o,u=u+this.A[t]*l;var c=u,p=a,f=1,m=0,g,b,w=0,S=0;for(t=1;t<=6;t++)g=f*c-m*p,b=m*c+f*p,f=g,m=b,w=w+this.B_re[t]*f-this.B_im[t]*m,S=S+this.B_im[t]*f+this.B_re[t]*m;return e.x=S*this.a+this.x0,e.y=w*this.a+this.y0,e}function I7e(e){var t,r=e.x,i=e.y,s=r-this.x0,n=i-this.y0,o=n/this.a,a=s/this.a,l=1,u=0,c,p,f=0,m=0;for(t=1;t<=6;t++)c=l*o-u*a,p=u*o+l*a,l=c,u=p,f=f+this.C_re[t]*l-this.C_im[t]*u,m=m+this.C_im[t]*l+this.C_re[t]*u;for(var g=0;g<this.iterations;g++){var b=f,w=m,S,M,x=o,_=a;for(t=2;t<=6;t++)S=b*f-w*m,M=w*f+b*m,b=S,w=M,x=x+(t-1)*(this.B_re[t]*b-this.B_im[t]*w),_=_+(t-1)*(this.B_im[t]*b+this.B_re[t]*w);b=1,w=0;var I=this.B_re[1],E=this.B_im[1];for(t=2;t<=6;t++)S=b*f-w*m,M=w*f+b*m,b=S,w=M,I=I+t*(this.B_re[t]*b-this.B_im[t]*w),E=E+t*(this.B_im[t]*b+this.B_re[t]*w);var A=I*I+E*E;f=(x*I+_*E)/A,m=(_*I-x*E)/A}var C=f,O=m,R=1,D=0;for(t=1;t<=9;t++)R=R*C,D=D+this.D[t]*R;var N=this.lat0+D*h_*1e5,U=this.long0+O;return e.x=U,e.y=N,e}var E7e=["New_Zealand_Map_Grid","nzmg"];const A7e={init:M7e,forward:T7e,inverse:I7e,names:E7e};function $7e(){}function C7e(e){var t=e.x,r=e.y,i=Ge(t-this.long0),s=this.x0+this.a*i,n=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=s,e.y=n,e}function O7e(e){e.x-=this.x0,e.y-=this.y0;var t=Ge(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e}var P7e=["Miller_Cylindrical","mill"];const R7e={init:$7e,forward:C7e,inverse:O7e,names:P7e};var L7e=20;function k7e(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=TF(this.es)}function N7e(e){var t,r,i=e.x,s=e.y;if(i=Ge(i-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var n=this.n*Math.sin(s),o=L7e;o;--o){var a=(this.m*s+Math.sin(s)-n)/(this.m+Math.cos(s));if(s-=a,Math.abs(a)<Ue)break}t=this.a*this.C_x*i*(this.m+Math.cos(s)),r=this.a*this.C_y*s}else{var l=Math.sin(s),u=Math.cos(s);r=this.a*P1(s,l,u,this.en),t=this.a*i*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=r,e}function D7e(e){var t,r,i,s;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=Nd((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Nd(Math.sin(t)/this.n)),i=Ge(i+this.long0),t=sf(t)):(t=IF(e.y/this.a,this.es,this.en),s=Math.abs(t),s<Ee?(s=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(t)),i=Ge(r)):s-Ue<Ee&&(i=this.long0)),e.x=i,e.y=t,e}var F7e=["Sinusoidal","sinu"];const j7e={init:k7e,forward:N7e,inverse:D7e,names:F7e};function V7e(){}function U7e(e){for(var t=e.x,r=e.y,i=Ge(t-this.long0),s=r,n=Math.PI*Math.sin(r);;){var o=-(s+Math.sin(s)-n)/(1+Math.cos(s));if(s+=o,Math.abs(o)<Ue)break}s/=2,Math.PI/2-Math.abs(r)<Ue&&(i=0);var a=.900316316158*this.a*i*Math.cos(s)+this.x0,l=1.4142135623731*this.a*Math.sin(s)+this.y0;return e.x=a,e.y=l,e}function z7e(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var i=Ge(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var s=Math.asin(r);return e.x=i,e.y=s,e}var G7e=["Mollweide","moll"];const B7e={init:V7e,forward:U7e,inverse:z7e,names:G7e};function q7e(){Math.abs(this.lat1+this.lat2)<Ue||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=SS(this.es),this.e1=xS(this.es),this.e2=MS(this.es),this.e3=TS(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ic(this.e,this.sinphi,this.cosphi),this.ml1=Vn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Ue?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ic(this.e,this.sinphi,this.cosphi),this.ml2=Vn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Vn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function H7e(e){var t=e.x,r=e.y,i;if(this.sphere)i=this.a*(this.g-r);else{var s=Vn(this.e0,this.e1,this.e2,this.e3,r);i=this.a*(this.g-s)}var n=this.ns*Ge(t-this.long0),o=this.x0+i*Math.sin(n),a=this.y0+this.rh-i*Math.cos(n);return e.x=o,e.y=a,e}function W7e(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,r,i,s;this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var n=0;if(r!==0&&(n=Math.atan2(t*e.x,t*e.y)),this.sphere)return s=Ge(this.long0+n/this.ns),i=sf(this.g-r/this.a),e.x=s,e.y=i,e;var o=this.g-r/this.a;return i=YI(o,this.e0,this.e1,this.e2,this.e3),s=Ge(this.long0+n/this.ns),e.x=s,e.y=i,e}var J7e=["Equidistant_Conic","eqdc"];const Z7e={init:q7e,forward:H7e,inverse:W7e,names:J7e};function Y7e(){this.R=this.a}function K7e(e){var t=e.x,r=e.y,i=Ge(t-this.long0),s,n;Math.abs(r)<=Ue&&(s=this.x0+this.R*i,n=this.y0);var o=Nd(2*Math.abs(r/Math.PI));(Math.abs(i)<=Ue||Math.abs(Math.abs(r)-Ee)<=Ue)&&(s=this.x0,r>=0?n=this.y0+Math.PI*this.R*Math.tan(.5*o):n=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/i-i/Math.PI),l=a*a,u=Math.sin(o),c=Math.cos(o),p=c/(u+c-1),f=p*p,m=p*(2/u-1),g=m*m,b=Math.PI*this.R*(a*(p-g)+Math.sqrt(l*(p-g)*(p-g)-(g+l)*(f-g)))/(g+l);i<0&&(b=-b),s=this.x0+b;var w=l+p;return b=Math.PI*this.R*(m*w-a*Math.sqrt((g+l)*(l+1)-w*w))/(g+l),r>=0?n=this.y0+b:n=this.y0-b,e.x=s,e.y=n,e}function X7e(e){var t,r,i,s,n,o,a,l,u,c,p,f,m;return e.x-=this.x0,e.y-=this.y0,p=Math.PI*this.R,i=e.x/p,s=e.y/p,n=i*i+s*s,o=-Math.abs(s)*(1+n),a=o-2*s*s+i*i,l=-2*o+1+2*s*s+n*n,m=s*s/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,u=(o-a*a/3/l)/l,c=2*Math.sqrt(-u/3),p=3*m/u/c,Math.abs(p)>1&&(p>=0?p=1:p=-1),f=Math.acos(p)/3,e.y>=0?r=(-c*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:r=-(-c*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,Math.abs(i)<Ue?t=this.long0:t=Ge(this.long0+Math.PI*(n-1+Math.sqrt(1+2*(i*i-s*s)+n*n))/2/i),e.x=t,e.y=r,e}var Q7e=["Van_der_Grinten_I","VanDerGrinten","vandg"];const eje={init:Y7e,forward:K7e,inverse:X7e,names:Q7e};function tje(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function rje(e){var t=e.x,r=e.y,i=Math.sin(e.y),s=Math.cos(e.y),n=Ge(t-this.long0),o,a,l,u,c,p,f,m,g,b,w,S,M,x,_,I,E,A,C,O,R,D,N;return this.sphere?Math.abs(this.sin_p12-1)<=Ue?(e.x=this.x0+this.a*(Ee-r)*Math.sin(n),e.y=this.y0-this.a*(Ee-r)*Math.cos(n),e):Math.abs(this.sin_p12+1)<=Ue?(e.x=this.x0+this.a*(Ee+r)*Math.sin(n),e.y=this.y0+this.a*(Ee+r)*Math.cos(n),e):(A=this.sin_p12*i+this.cos_p12*s*Math.cos(n),I=Math.acos(A),E=I?I/Math.sin(I):1,e.x=this.x0+this.a*E*s*Math.sin(n),e.y=this.y0+this.a*E*(this.cos_p12*i-this.sin_p12*s*Math.cos(n)),e):(o=SS(this.es),a=xS(this.es),l=MS(this.es),u=TS(this.es),Math.abs(this.sin_p12-1)<=Ue?(c=this.a*Vn(o,a,l,u,Ee),p=this.a*Vn(o,a,l,u,r),e.x=this.x0+(c-p)*Math.sin(n),e.y=this.y0-(c-p)*Math.cos(n),e):Math.abs(this.sin_p12+1)<=Ue?(c=this.a*Vn(o,a,l,u,Ee),p=this.a*Vn(o,a,l,u,r),e.x=this.x0+(c+p)*Math.sin(n),e.y=this.y0+(c+p)*Math.cos(n),e):(f=i/s,m=Uv(this.a,this.e,this.sin_p12),g=Uv(this.a,this.e,i),b=Math.atan((1-this.es)*f+this.es*m*this.sin_p12/(g*s)),w=Math.atan2(Math.sin(n),this.cos_p12*Math.tan(b)-this.sin_p12*Math.cos(n)),w===0?C=Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math.abs(Math.abs(w)-Math.PI)<=Ue?C=-Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):C=Math.asin(Math.sin(n)*Math.cos(b)/Math.sin(w)),S=this.e*this.sin_p12/Math.sqrt(1-this.es),M=this.e*this.cos_p12*Math.cos(w)/Math.sqrt(1-this.es),x=S*M,_=M*M,O=C*C,R=O*C,D=R*C,N=D*C,I=m*C*(1-O*_*(1-_)/6+R/8*x*(1-2*_)+D/120*(_*(4-7*_)-3*S*S*(1-7*_))-N/48*x),e.x=this.x0+I*Math.sin(w),e.y=this.y0+I*Math.cos(w),e))}function ije(e){e.x-=this.x0,e.y-=this.y0;var t,r,i,s,n,o,a,l,u,c,p,f,m,g,b,w,S,M,x,_,I,E,A,C;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*Ee*this.a?void 0:(r=t/this.a,i=Math.sin(r),s=Math.cos(r),n=this.long0,Math.abs(t)<=Ue?o=this.lat0:(o=Nd(s*this.sin_p12+e.y*i*this.cos_p12/t),a=Math.abs(this.lat0)-Ee,Math.abs(a)<=Ue?this.lat0>=0?n=Ge(this.long0+Math.atan2(e.x,-e.y)):n=Ge(this.long0-Math.atan2(-e.x,e.y)):n=Ge(this.long0+Math.atan2(e.x*i,t*this.cos_p12*s-e.y*this.sin_p12*i))),e.x=n,e.y=o,e)):(l=SS(this.es),u=xS(this.es),c=MS(this.es),p=TS(this.es),Math.abs(this.sin_p12-1)<=Ue?(f=this.a*Vn(l,u,c,p,Ee),t=Math.sqrt(e.x*e.x+e.y*e.y),m=f-t,o=YI(m/this.a,l,u,c,p),n=Ge(this.long0+Math.atan2(e.x,-1*e.y)),e.x=n,e.y=o,e):Math.abs(this.sin_p12+1)<=Ue?(f=this.a*Vn(l,u,c,p,Ee),t=Math.sqrt(e.x*e.x+e.y*e.y),m=t-f,o=YI(m/this.a,l,u,c,p),n=Ge(this.long0+Math.atan2(e.x,e.y)),e.x=n,e.y=o,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),w=Math.atan2(e.x,e.y),g=Uv(this.a,this.e,this.sin_p12),S=Math.cos(w),M=this.e*this.cos_p12*S,x=-M*M/(1-this.es),_=3*this.es*(1-x)*this.sin_p12*this.cos_p12*S/(1-this.es),I=t/g,E=I-x*(1+x)*Math.pow(I,3)/6-_*(1+3*x)*Math.pow(I,4)/24,A=1-x*E*E/2-I*E*E*E/6,b=Math.asin(this.sin_p12*Math.cos(E)+this.cos_p12*Math.sin(E)*S),n=Ge(this.long0+Math.asin(Math.sin(w)*Math.sin(E)/Math.cos(b))),C=Math.sin(b),o=Math.atan2((C-this.es*A*this.sin_p12)*Math.tan(b),C*(1-this.es)),e.x=n,e.y=o,e))}var sje=["Azimuthal_Equidistant","aeqd"];const nje={init:tje,forward:rje,inverse:ije,names:sje};function oje(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function aje(e){var t,r,i,s,n,o,a,l,u=e.x,c=e.y;return i=Ge(u-this.long0),t=Math.sin(c),r=Math.cos(c),s=Math.cos(i),o=this.sin_p14*t+this.cos_p14*r*s,n=1,(o>0||Math.abs(o)<=Ue)&&(a=this.a*n*r*Math.sin(i),l=this.y0+this.a*n*(this.cos_p14*t-this.sin_p14*r*s)),e.x=a,e.y=l,e}function lje(e){var t,r,i,s,n,o,a;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),r=Nd(t/this.a),i=Math.sin(r),s=Math.cos(r),o=this.long0,Math.abs(t)<=Ue?(a=this.lat0,e.x=o,e.y=a,e):(a=Nd(s*this.sin_p14+e.y*i*this.cos_p14/t),n=Math.abs(this.lat0)-Ee,Math.abs(n)<=Ue?(this.lat0>=0?o=Ge(this.long0+Math.atan2(e.x,-e.y)):o=Ge(this.long0-Math.atan2(-e.x,e.y)),e.x=o,e.y=a,e):(o=Ge(this.long0+Math.atan2(e.x*i,t*this.cos_p14*s-e.y*this.sin_p14*i)),e.x=o,e.y=a,e))}var uje=["ortho"];const cje={init:oje,forward:aje,inverse:lje,names:uje};var ri={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},cr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function hje(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ee-ur/2?this.face=ri.TOP:this.lat0<=-(Ee-ur/2)?this.face=ri.BOTTOM:Math.abs(this.long0)<=ur?this.face=ri.FRONT:Math.abs(this.long0)<=Ee+ur?this.face=this.long0>0?ri.RIGHT:ri.LEFT:this.face=ri.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function pje(e){var t={x:0,y:0},r,i,s,n,o,a,l={value:0};if(e.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):r=e.y,i=e.x,this.face===ri.TOP)n=Ee-r,i>=ur&&i<=Ee+ur?(l.value=cr.AREA_0,s=i-Ee):i>Ee+ur||i<=-(Ee+ur)?(l.value=cr.AREA_1,s=i>0?i-Ai:i+Ai):i>-(Ee+ur)&&i<=-ur?(l.value=cr.AREA_2,s=i+Ee):(l.value=cr.AREA_3,s=i);else if(this.face===ri.BOTTOM)n=Ee+r,i>=ur&&i<=Ee+ur?(l.value=cr.AREA_0,s=-i+Ee):i<ur&&i>=-ur?(l.value=cr.AREA_1,s=-i):i<-ur&&i>=-(Ee+ur)?(l.value=cr.AREA_2,s=-i-Ee):(l.value=cr.AREA_3,s=i>0?-i+Ai:-i-Ai);else{var u,c,p,f,m,g,b;this.face===ri.RIGHT?i=mv(i,+Ee):this.face===ri.BACK?i=mv(i,+Ai):this.face===ri.LEFT&&(i=mv(i,-Ee)),f=Math.sin(r),m=Math.cos(r),g=Math.sin(i),b=Math.cos(i),u=m*b,c=m*g,p=f,this.face===ri.FRONT?(n=Math.acos(u),s=sM(n,p,c,l)):this.face===ri.RIGHT?(n=Math.acos(c),s=sM(n,p,-u,l)):this.face===ri.BACK?(n=Math.acos(-u),s=sM(n,p,-c,l)):this.face===ri.LEFT?(n=Math.acos(-c),s=sM(n,p,u,l)):(n=s=0,l.value=cr.AREA_0)}return a=Math.atan(12/Ai*(s+Math.acos(Math.sin(s)*Math.cos(ur))-Ee)),o=Math.sqrt((1-Math.cos(n))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(s))))),l.value===cr.AREA_1?a+=Ee:l.value===cr.AREA_2?a+=Ai:l.value===cr.AREA_3&&(a+=1.5*Ai),t.x=o*Math.cos(a),t.y=o*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function dje(e){var t={lam:0,phi:0},r,i,s,n,o,a,l,u,c,p={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),r=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?p.value=cr.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(p.value=cr.AREA_1,r-=Ee):e.x<0&&-e.x>=Math.abs(e.y)?(p.value=cr.AREA_2,r=r<0?r+Ai:r-Ai):(p.value=cr.AREA_3,r+=Ee),c=Ai/12*Math.tan(r),o=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),a=Math.atan(o),s=Math.cos(r),n=Math.tan(i),l=1-s*s*n*n*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===ri.TOP)u=Math.acos(l),t.phi=Ee-u,p.value===cr.AREA_0?t.lam=a+Ee:p.value===cr.AREA_1?t.lam=a<0?a+Ai:a-Ai:p.value===cr.AREA_2?t.lam=a-Ee:t.lam=a;else if(this.face===ri.BOTTOM)u=Math.acos(l),t.phi=u-Ee,p.value===cr.AREA_0?t.lam=-a+Ee:p.value===cr.AREA_1?t.lam=-a:p.value===cr.AREA_2?t.lam=-a-Ee:t.lam=a<0?-a-Ai:-a+Ai;else{var f,m,g;f=l,c=f*f,c>=1?g=0:g=Math.sqrt(1-c)*Math.sin(a),c+=g*g,c>=1?m=0:m=Math.sqrt(1-c),p.value===cr.AREA_1?(c=m,m=-g,g=c):p.value===cr.AREA_2?(m=-m,g=-g):p.value===cr.AREA_3&&(c=m,m=g,g=-c),this.face===ri.RIGHT?(c=f,f=-m,m=c):this.face===ri.BACK?(f=-f,m=-m):this.face===ri.LEFT&&(c=f,f=m,m=-c),t.phi=Math.acos(-g)-Ee,t.lam=Math.atan2(m,f),this.face===ri.RIGHT?t.lam=mv(t.lam,-Ee):this.face===ri.BACK?t.lam=mv(t.lam,-Ai):this.face===ri.LEFT&&(t.lam=mv(t.lam,+Ee))}if(this.es!==0){var b,w,S;b=t.phi<0?1:0,w=Math.tan(t.phi),S=this.b/Math.sqrt(w*w+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-S*S)/(this.one_minus_f*S)),b&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function sM(e,t,r,i){var s;return e<Ue?(i.value=cr.AREA_0,s=0):(s=Math.atan2(t,r),Math.abs(s)<=ur?i.value=cr.AREA_0:s>ur&&s<=Ee+ur?(i.value=cr.AREA_1,s-=Ee):s>Ee+ur||s<=-(Ee+ur)?(i.value=cr.AREA_2,s=s>=0?s-Ai:s+Ai):(i.value=cr.AREA_3,s+=Ee)),s}function mv(e,t){var r=e+t;return r<-Ai?r+=h2:r>+Ai&&(r-=h2),r}var fje=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const mje={init:hje,forward:pje,inverse:dje,names:fje};var lN=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Cw=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],moe=.8487,yoe=1.3523,goe=Lu/5,yje=1/goe,D0=18,KI=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},gje=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function vje(e,t,r,i){for(var s=t;i;--i){var n=e(s);if(s-=n,Math.abs(n)<r)break}return s}function bje(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function wje(e){var t=Ge(e.x-this.long0),r=Math.abs(e.y),i=Math.floor(r*goe);i<0?i=0:i>=D0&&(i=D0-1),r=Lu*(r-yje*i);var s={x:KI(lN[i],r)*t,y:KI(Cw[i],r)};return e.y<0&&(s.y=-s.y),s.x=s.x*this.a*moe+this.x0,s.y=s.y*this.a*yoe+this.y0,s}function _je(e){var t={x:(e.x-this.x0)/(this.a*moe),y:Math.abs(e.y-this.y0)/(this.a*yoe)};if(t.y>=1)t.x/=lN[D0][0],t.y=e.y<0?-Ee:Ee;else{var r=Math.floor(t.y*D0);for(r<0?r=0:r>=D0&&(r=D0-1);;)if(Cw[r][0]>t.y)--r;else if(Cw[r+1][0]<=t.y)++r;else break;var i=Cw[r],s=5*(t.y-i[0])/(Cw[r+1][0]-i[0]);s=vje(function(n){return(KI(i,n)-t.y)/gje(i,n)},s,Ue,100),t.x/=KI(lN[r],s),t.y=(5*r+s)*Es,e.y<0&&(t.y=-t.y)}return t.x=Ge(t.x+this.long0),t}var Sje=["Robinson","robin"];const xje={init:bje,forward:wje,inverse:_je,names:Sje};function Mje(){this.name="geocent"}function Tje(e){var t=soe(e,this.es,this.a);return t}function Ije(e){var t=noe(e,this.es,this.a,this.b);return t}var Eje=["Geocentric","geocentric","geocent","Geocent"];const Aje={init:Mje,forward:Tje,inverse:Ije,names:Eje};var rn={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},yb={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function $je(){if(Object.keys(yb).forEach(function(r){if(typeof this[r]>"u")this[r]=yb[r].def;else{if(yb[r].num&&isNaN(this[r]))throw new Error("Invalid parameter value, must be numeric "+r+" = "+this[r]);yb[r].num&&(this[r]=parseFloat(this[r]))}yb[r].degrees&&(this[r]=this[r]*Es)}.bind(this)),Math.abs(Math.abs(this.lat0)-Ee)<Ue?this.mode=this.lat0<0?rn.S_POLE:rn.N_POLE:Math.abs(this.lat0)<Ue?this.mode=rn.EQUIT:(this.mode=rn.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function Cje(e){e.x-=this.long0;var t=Math.sin(e.y),r=Math.cos(e.y),i=Math.cos(e.x),s,n;switch(this.mode){case rn.OBLIQ:n=this.sinph0*t+this.cosph0*r*i;break;case rn.EQUIT:n=r*i;break;case rn.S_POLE:n=-t;break;case rn.N_POLE:n=t;break}switch(n=this.pn1/(this.p-n),s=n*r*Math.sin(e.x),this.mode){case rn.OBLIQ:n*=this.cosph0*t-this.sinph0*r*i;break;case rn.EQUIT:n*=t;break;case rn.N_POLE:n*=-(r*i);break;case rn.S_POLE:n*=r*i;break}var o,a;return o=n*this.cg+s*this.sg,a=1/(o*this.sw*this.h1+this.cw),s=(s*this.cg-n*this.sg)*this.cw*a,n=o*a,e.x=s*this.a,e.y=n*this.a,e}function Oje(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},r,i,s;s=1/(this.pn1-e.y*this.sw),r=this.pn1*e.x*s,i=this.pn1*e.y*this.cw*s,e.x=r*this.cg+i*this.sg,e.y=i*this.cg-r*this.sg;var n=po(e.x,e.y);if(Math.abs(n)<Ue)t.x=0,t.y=e.y;else{var o,a;switch(a=1-n*n*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/n+n/this.pn1),o=Math.sqrt(1-a*a),this.mode){case rn.OBLIQ:t.y=Math.asin(o*this.sinph0+e.y*a*this.cosph0/n),e.y=(o-this.sinph0*Math.sin(t.y))*n,e.x*=a*this.cosph0;break;case rn.EQUIT:t.y=Math.asin(e.y*a/n),e.y=o*n,e.x*=a;break;case rn.N_POLE:t.y=Math.asin(o),e.y=-e.y;break;case rn.S_POLE:t.y=-Math.asin(o);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var Pje=["Tilted_Perspective","tpers"];const Rje={init:$je,forward:Cje,inverse:Oje,names:Pje};function Lje(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function kje(e){var t=e.x,r=e.y,i,s,n,o;if(t=t-this.long0,this.shape==="ellipse"){r=Math.atan(this.radius_p2*Math.tan(r));var a=this.radius_p/po(this.radius_p*Math.cos(r),Math.sin(r));if(s=a*Math.cos(t)*Math.cos(r),n=a*Math.sin(t)*Math.cos(r),o=a*Math.sin(r),(this.radius_g-s)*s-n*n-o*o*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=this.radius_g-s,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/po(o,i)),e.y=this.radius_g_1*Math.atan(o/i)):(e.x=this.radius_g_1*Math.atan(n/i),e.y=this.radius_g_1*Math.atan(o/po(n,i)))}else this.shape==="sphere"&&(i=Math.cos(r),s=Math.cos(t)*i,n=Math.sin(t)*i,o=Math.sin(r),i=this.radius_g-s,this.flip_axis?(e.x=this.radius_g_1*Math.atan(n/po(o,i)),e.y=this.radius_g_1*Math.atan(o/i)):(e.x=this.radius_g_1*Math.atan(n/i),e.y=this.radius_g_1*Math.atan(o/po(n,i))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function Nje(e){var t=-1,r=0,i=0,s,n,o,a;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),r=Math.tan(e.x/this.radius_g_1)*po(1,i)):(r=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*po(1,r));var l=i/this.radius_p;if(s=r*r+l*l+t*t,n=2*this.radius_g*t,o=n*n-4*s*this.C,o<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-n-Math.sqrt(o))/(2*s),t=this.radius_g+a*t,r*=a,i*=a,e.x=Math.atan2(r,t),e.y=Math.atan(i*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),r=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+i*i)):(r=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+r*r)),s=r*r+i*i+t*t,n=2*this.radius_g*t,o=n*n-4*s*this.C,o<0)return e.x=Number.NaN,e.y=Number.NaN,e;a=(-n-Math.sqrt(o))/(2*s),t=this.radius_g+a*t,r*=a,i*=a,e.x=Math.atan2(r,t),e.y=Math.atan(i*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var Dje=["Geostationary Satellite View","Geostationary_Satellite","geos"];const Fje={init:Lje,forward:kje,inverse:Nje,names:Dje};var p_=1.340264,d_=-.081106,f_=893e-6,m_=.003796,XI=Math.sqrt(3)/2;function jje(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function Vje(e){var t=Ge(e.x-this.long0),r=e.y,i=Math.asin(XI*Math.sin(r)),s=i*i,n=s*s*s;return e.x=t*Math.cos(i)/(XI*(p_+3*d_*s+n*(7*f_+9*m_*s))),e.y=i*(p_+d_*s+n*(f_+m_*s)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function Uje(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var t=1e-9,r=12,i=e.y,s,n,o,a,l,u;for(u=0;u<r&&(s=i*i,n=s*s*s,o=i*(p_+d_*s+n*(f_+m_*s))-e.y,a=p_+3*d_*s+n*(7*f_+9*m_*s),i-=l=o/a,!(Math.abs(l)<t));++u);return s=i*i,n=s*s*s,e.x=XI*e.x*(p_+3*d_*s+n*(7*f_+9*m_*s))/Math.cos(i),e.y=Math.asin(Math.sin(i)/XI),e.x=Ge(e.x+this.long0),e}var zje=["eqearth","Equal Earth","Equal_Earth"];const Gje={init:jje,forward:Vje,inverse:Uje,names:zje};var f2=1e-10;function Bje(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<f2)throw new Error;this.es?(this.en=TF(this.es),this.m1=P1(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Hje,this.forward=qje):(Math.abs(this.phi1)+f2>=Ee?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Jje,this.forward=Wje)}function qje(e){var t=Ge(e.x-(this.long0||0)),r=e.y,i,s,n;return i=this.am1+this.m1-P1(r,s=Math.sin(r),n=Math.cos(r),this.en),s=n*t/(i*Math.sqrt(1-this.es*s*s)),e.x=i*Math.sin(s),e.y=this.am1-i*Math.cos(s),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Hje(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,r,i,s;if(r=po(e.x,e.y=this.am1-e.y),s=IF(this.am1+this.m1-r,this.es,this.en),(t=Math.abs(s))<Ee)t=Math.sin(s),i=r*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*t*t)/Math.cos(s);else if(Math.abs(t-Ee)<=f2)i=0;else throw new Error;return e.x=Ge(i+(this.long0||0)),e.y=sf(s),e}function Wje(e){var t=Ge(e.x-(this.long0||0)),r=e.y,i,s;return s=this.cphi1+this.phi1-r,Math.abs(s)>f2?(e.x=s*Math.sin(i=t*Math.cos(r)/s),e.y=this.cphi1-s*Math.cos(i)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Jje(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var t,r,i=po(e.x,e.y=this.cphi1-e.y);if(r=this.cphi1+this.phi1-i,Math.abs(r)>Ee)throw new Error;return Math.abs(Math.abs(r)-Ee)<=f2?t=0:t=i*Math.atan2(e.x,e.y)/Math.cos(r),e.x=Ge(t+(this.long0||0)),e.y=sf(r),e}var Zje=["bonne","Bonne (Werner lat_1=90)"];const Yje={init:Bje,names:Zje};function Kje(e){e.Proj.projections.add(y3),e.Proj.projections.add(g3),e.Proj.projections.add(qFe),e.Proj.projections.add(t9e),e.Proj.projections.add(a9e),e.Proj.projections.add(p9e),e.Proj.projections.add(v9e),e.Proj.projections.add(x9e),e.Proj.projections.add(A9e),e.Proj.projections.add(R9e),e.Proj.projections.add(Y9e),e.Proj.projections.add(r7e),e.Proj.projections.add(a7e),e.Proj.projections.add(d7e),e.Proj.projections.add(v7e),e.Proj.projections.add(x7e),e.Proj.projections.add(A7e),e.Proj.projections.add(R7e),e.Proj.projections.add(j7e),e.Proj.projections.add(B7e),e.Proj.projections.add(Z7e),e.Proj.projections.add(eje),e.Proj.projections.add(nje),e.Proj.projections.add(cje),e.Proj.projections.add(mje),e.Proj.projections.add(xje),e.Proj.projections.add(Aje),e.Proj.projections.add(Rje),e.Proj.projections.add(Fje),e.Proj.projections.add(Gje),e.Proj.projections.add(Yje)}Sr.defaultDatum="WGS84";Sr.Proj=qu;Sr.WGS84=new Sr.Proj("WGS84");Sr.Point=Vv;Sr.toPoint=ooe;Sr.defs=Pn;Sr.nadgrid=W8e;Sr.transform=ZI;Sr.mgrs=uFe;Sr.version="__VERSION__";Kje(Sr);const Xje="EPSG:4326";class Qje{espgWorker;constructor(){this.espgWorker=this.defaultEpsgLookup,Sr.defs("EPSG:3978","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),Sr.defs("EPSG:3979","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),Sr.defs("EPSG:54004","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),Sr.defs("EPSG:102100",Sr.defs("EPSG:3857")),Sr.defs("EPSG:102187","+proj=tmerc +lat_0=0 +lon_0=-114 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),Sr.defs("EPSG:102190","+proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");let t=1;for(;t<=60;){const r=t<10?`0${t}`:t;Sr.defs(`EPSG:326${r}`,`+proj=utm +zone=${t} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`),t++}}addProjection(t,r){t=typeof t=="number"?`EPSG:${t}`:t,Sr.defs(t,r)}defaultEpsgLookup(t){const r=/urn:ogc:def:crs:EPSG::(\d+)/,i=/EPSG:(\d+)/,s=String(t).match(r)||String(t).match(i)||[];if(s.length<2)throw new Error("Invalid code provided.");return new Promise((n,o)=>{const a=`https://epsg.io/${s[1]}.proj4`;Re(a,{responseType:"text"}).then(c=>{c.data?n(c.data):o()},c=>{o(c)})})}epsgLookup(t){return this.espgWorker(t)}setEpsgLookup(t){this.espgWorker=t}normalizeProj(t){if(typeof t=="object"){if(t.wkid)return"EPSG:"+t.wkid;if(t.wkt)return t.wkt}else{if(typeof t=="number")return"EPSG:"+t;if(typeof t=="string")return t}throw new Error("Bad argument type, please provide a string, integer or SpatialReference object.")}async checkProj(t){let r,i="";try{r=this.normalizeProj(t)}catch{return!1}if(!r.startsWith("EPSG:"))return!0;typeof t=="object"&&t.latestWkid&&(i=this.normalizeProj(t.latestWkid));const s=(l,u)=>{l!==u&&Sr.defs(u,Sr.defs(l))};if(Sr.defs(r))return!0;if(i&&Sr.defs(i))return s(i,r),!0;const n=async l=>{try{const u=await this.epsgLookup(l);return u===null||u===""?!1:(Sr.defs(l,u),!0)}catch{return!1}};return await(i?n(i):Promise.resolve(!1))?(s(i,r),!0):n(r)}async checkProjBomber(t){if(t.length>0){const r=t.pop();if(await this.checkProj(r))return this.checkProjBomber(t);throw console.error("Unable to parse or locate projection information for this item:",r),new Error("Could not find projection information, see console for details")}}async projectGeoJson(t,r,i){let s,n;if(r?s=this.normalizeProj(r):s=$t.parseGeoJsonCrs(t.crs),i?n=this.normalizeProj(i):n=Xje,n===s)return t;await this.checkProjBomber([s,n]);const o=Sr(s,n).forward;return a8e.Tools.applyConverter(t,o)}async projectGeometry(t,r){if(r.type===Ft.EXTENT)return this.projectExtent(t,r);await this.checkProjBomber([t,r.sr]);const i=r.toGeoJSON(),s=await this.projectGeoJson(i,this.normalizeProj(r.sr),this.normalizeProj(t)),n=wv.geom.geomGeoJsonToRamp(s,r.id);return n.sr=$t.parseSR(t),n}async projectExtent(t,r){const i=(b,w,S)=>{if(S===0)return[b,w];const M=[(b[0]+w[0])/2,(b[1]+w[1])/2];if(S===1)return[b,M,w];if(S>1){const x=i(b,M,S-1),_=i(M,w,S-1);return x.concat(_.slice(1))}return[[]]},s=r.toPolygonArray().pop()||[];let n=[];[0,1,2,3].map(b=>i(s[b],s[b+1],3).slice(1)).forEach(b=>n=n.concat(b));const o=new sn("warpy",[n],r.sr,!0),a=await this.projectGeometry(t,o),l=a.toArray().pop()||[],u=l.map(b=>b[0]),c=l.map(b=>b[1]),p=Math.min.apply(null,u),f=Math.max.apply(null,u),m=Math.min.apply(null,c),g=Math.max.apply(null,c);return Yr.fromParams(r.id+"_projected",p,m,f,g,a.sr)}}class eVe{DEFAULT_MERCATOR="DEFAULT_ESRI_World_AuxMerc_3857";DEFAULT_LAMBERT="DEFAULT_NRCAN_Lambert_3978";proj;geom;sharedUtils;constructor(){this.proj=new Qje,this.geom=new t8e,this.sharedUtils=new n8e}defaultTileSchemas(){return[this.DEFAULT_LAMBERT,this.DEFAULT_MERCATOR]}defaultLODs(t){const r=i=>i.map(s=>({level:s[0],resolution:s[1],scale:s[2]}));if(t===this.DEFAULT_LAMBERT)return r([[0,38364.660062653464,145e6],[1,22489.62831258996,85e6],[2,13229.193125052918,5e7],[3,7937.5158750317505,3e7],[4,4630.2175937685215,175e5],[5,2645.8386250105837,1e7],[6,1587.5031750063501,6e6],[7,926.0435187537042,35e5],[8,529.1677250021168,2e6],[9,317.50063500127004,12e5],[10,185.20870375074085,7e5],[11,111.12522225044451,42e4],[12,66.1459656252646,25e4],[13,38.36466006265346,145e3],[14,22.48962831258996,85e3],[15,13.229193125052918,5e4],[16,7.9375158750317505,3e4],[17,4.6302175937685215,17500]]);if(t===this.DEFAULT_MERCATOR)return r([[0,19567.87924099992,73957190948944e-6],[1,9783.93962049996,36978595474472e-6],[2,4891.96981024998,18489297737236e-6],[3,2445.98490512499,9244648868618e-6],[4,1222.992452562495,4622324434309e-6],[5,611.4962262813797,2311162217155e-6],[6,305.74811314055756,1155581108577e-6],[7,152.87405657041106,577790.554289],[8,76.43702828507324,288895.277144],[9,38.21851414253662,144447.638572],[10,19.10925707126831,72223.819286],[11,9.554628535634155,36111.909643],[12,4.77731426794937,18055.954822],[13,2.388657133974685,9027.977411],[14,1.1943285668550503,4513.988705],[15,.5971642835598172,2256.994353],[16,.29858214164761665,1128.497176],[17,.14929107082380833,564.248588],[18,.07464553541190416,282.124294],[19,.03732276770595208,141.062147],[20,.01866138385297604,70.5310735]]);throw new Error(`Unknown tile schema key passed to LOD defaulter ${t}`)}}class qi{$iApi;get $vApp(){return this.$iApi.$vApp}get $element(){return this.$iApi.$element}constructor(t){this.$iApi=t}}function tVe(e){return typeof e=="function"&&e.render&&typeof e.render=="function"}function rVe(e){const t=["data","props","propsData","computed","methods","watch","template","render","components","model"];return typeof e=="object"&&!e.functional&&t.some(r=>e[r]!==void 0)}function voe(e){return typeof e=="object"&&Object.keys(e).every(t=>typeof t=="string")&&Object.values(e).every(t=>t instanceof HTMLElement)}function iVe(e){return typeof e=="object"&&e.default!==void 0}var nM={exports:{}},yq;function sVe(){if(yq)return nM.exports;yq=1;function e(){}return e.prototype={on:function(t,r,i){var s=this.e||(this.e={});return(s[t]||(s[t]=[])).push({fn:r,ctx:i}),this},once:function(t,r,i){var s=this;function n(){s.off(t,n),r.apply(i,arguments)}return n._=r,this.on(t,n,i)},emit:function(t){var r=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),s=0,n=i.length;for(s;s<n;s++)i[s].fn.apply(i[s].ctx,r);return this},off:function(t,r){var i=this.e||(this.e={}),s=i[t],n=[];if(s&&r)for(var o=0,a=s.length;o<a;o++)s[o].fn!==r&&s[o].fn._!==r&&n.push(s[o]);return n.length?i[t]=n:delete i[t],this}},nM.exports=e,nM.exports.TinyEmitter=e,nM.exports}var nVe=sVe();/**
* @vue/shared v3.5.9
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Eo(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const Jt={},oy=[],Da=()=>{},boe=()=>!1,R1=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),m$=e=>e.startsWith("onUpdate:"),Tr=Object.assign,y$=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},oVe=Object.prototype.hasOwnProperty,rr=(e,t)=>oVe.call(e,t),Qe=Array.isArray,ay=e=>rg(e)==="[object Map]",nf=e=>rg(e)==="[object Set]",uN=e=>rg(e)==="[object Date]",woe=e=>rg(e)==="[object RegExp]",bt=e=>typeof e=="function",fr=e=>typeof e=="string",Jl=e=>typeof e=="symbol",mr=e=>e!==null&&typeof e=="object",g$=e=>(mr(e)||bt(e))&&bt(e.then)&&bt(e.catch),CF=Object.prototype.toString,rg=e=>CF.call(e),_oe=e=>rg(e).slice(8,-1),IS=e=>rg(e)==="[object Object]",v$=e=>fr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ly=Eo(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),aVe=Eo("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),b$=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},lVe=/-(\w)/g,Ls=b$(e=>e.replace(lVe,(t,r)=>r?r.toUpperCase():"")),uVe=/\B([A-Z])/g,un=b$(e=>e.replace(uVe,"-$1").toLowerCase()),L1=b$(e=>e.charAt(0).toUpperCase()+e.slice(1)),yv=b$(e=>e?`on${L1(e)}`:""),nn=(e,t)=>!Object.is(e,t),uy=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},OF=(e,t,r,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:r})},m2=e=>{const t=parseFloat(e);return isNaN(t)?e:t},y2=e=>{const t=fr(e)?Number(e):NaN;return isNaN(t)?e:t};let gq;const PF=()=>gq||(gq=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),cVe=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;function hVe(e){return cVe.test(e)?`__props.${e}`:`__props[${JSON.stringify(e)}]`}function pVe(e,t){return e+JSON.stringify(t,(r,i)=>typeof i=="function"?i.toString():i)}const dVe={TEXT:1,1:"TEXT",CLASS:2,2:"CLASS",STYLE:4,4:"STYLE",PROPS:8,8:"PROPS",FULL_PROPS:16,16:"FULL_PROPS",NEED_HYDRATION:32,32:"NEED_HYDRATION",STABLE_FRAGMENT:64,64:"STABLE_FRAGMENT",KEYED_FRAGMENT:128,128:"KEYED_FRAGMENT",UNKEYED_FRAGMENT:256,256:"UNKEYED_FRAGMENT",NEED_PATCH:512,512:"NEED_PATCH",DYNAMIC_SLOTS:1024,1024:"DYNAMIC_SLOTS",DEV_ROOT_FRAGMENT:2048,2048:"DEV_ROOT_FRAGMENT",CACHED:-1,"-1":"CACHED",BAIL:-2,"-2":"BAIL"},fVe={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"NEED_HYDRATION",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},mVe={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"},yVe={STABLE:1,1:"STABLE",DYNAMIC:2,2:"DYNAMIC",FORWARDED:3,3:"FORWARDED"},gVe={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},vVe="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",RF=Eo(vVe),bVe=RF,vq=2;function wVe(e,t=0,r=e.length){if(t=Math.max(0,Math.min(t,e.length)),r=Math.max(0,Math.min(r,e.length)),t>r)return"";let i=e.split(/(\r?\n)/);const s=i.filter((a,l)=>l%2===1);i=i.filter((a,l)=>l%2===0);let n=0;const o=[];for(let a=0;a<i.length;a++)if(n+=i[a].length+(s[a]&&s[a].length||0),n>=t){for(let l=a-vq;l<=a+vq||r>n;l++){if(l<0||l>=i.length)continue;const u=l+1;o.push(`${u}${" ".repeat(Math.max(3-String(u).length,0))}|  ${i[l]}`);const c=i[l].length,p=s[l]&&s[l].length||0;if(l===a){const f=t-(n-(c+p)),m=Math.max(1,r>n?c-f:r-t);o.push("   |  "+" ".repeat(f)+"^".repeat(m))}else if(l>a){if(r>n){const f=Math.max(Math.min(r-n,c),1);o.push("   |  "+"^".repeat(f))}n+=c+p}}break}return o.join(`
`)}function of(e){if(Qe(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],s=fr(i)?Soe(i):of(i);if(s)for(const n in s)t[n]=s[n]}return t}else if(fr(e)||mr(e))return e}const _Ve=/;(?![^(]*\))/g,SVe=/:([^]+)/,xVe=/\/\*[^]*?\*\//g;function Soe(e){const t={};return e.replace(xVe,"").split(_Ve).forEach(r=>{if(r){const i=r.split(SVe);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function MVe(e){let t="";if(!e||fr(e))return t;for(const r in e){const i=e[r];if(fr(i)||typeof i=="number"){const s=r.startsWith("--")?r:un(r);t+=`${s}:${i};`}}return t}function wi(e){let t="";if(fr(e))t=e;else if(Qe(e))for(let r=0;r<e.length;r++){const i=wi(e[r]);i&&(t+=i+" ")}else if(mr(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function xoe(e){if(!e)return null;let{class:t,style:r}=e;return t&&!fr(t)&&(e.class=wi(t)),r&&(e.style=of(r)),e}const TVe="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",IVe="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",EVe="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",AVe="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",$Ve=Eo(TVe),CVe=Eo(IVe),OVe=Eo(EVe),PVe=Eo(AVe),Moe="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Toe=Eo(Moe),RVe=Eo(Moe+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function LF(e){return!!e||e===""}const LVe=/[>/="'\u0009\u000a\u000c\u0020]/,lC={};function kVe(e){if(lC.hasOwnProperty(e))return lC[e];const t=LVe.test(e);return t&&console.error(`unsafe attribute name: ${e}`),lC[e]=!t}const NVe={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DVe=Eo("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),FVe=Eo("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan"),jVe=Eo("accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns");function VVe(e){if(e==null)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"}const UVe=/["'&<>]/;function zVe(e){const t=""+e,r=UVe.exec(t);if(!r)return t;let i="",s,n,o=0;for(n=r.index;n<t.length;n++){switch(t.charCodeAt(n)){case 34:s="&quot;";break;case 38:s="&amp;";break;case 39:s="&#39;";break;case 60:s="&lt;";break;case 62:s="&gt;";break;default:continue}o!==n&&(i+=t.slice(o,n)),o=n+1,i+=s}return o!==n?i+t.slice(o,n):i}const GVe=/^-?>|<!--|-->|--!>|<!-$/g;function BVe(e){return e.replace(GVe,"")}const Ioe=/[ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g;function qVe(e,t){return e.replace(Ioe,r=>t?r==='"'?'\\\\\\"':`\\\\${r}`:`\\${r}`)}function HVe(e,t){if(e.length!==t.length)return!1;let r=!0;for(let i=0;r&&i<e.length;i++)r=Nh(e[i],t[i]);return r}function Nh(e,t){if(e===t)return!0;let r=uN(e),i=uN(t);if(r||i)return r&&i?e.getTime()===t.getTime():!1;if(r=Jl(e),i=Jl(t),r||i)return e===t;if(r=Qe(e),i=Qe(t),r||i)return r&&i?HVe(e,t):!1;if(r=mr(e),i=mr(t),r||i){if(!r||!i)return!1;const s=Object.keys(e).length,n=Object.keys(t).length;if(s!==n)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!Nh(e[o],t[o]))return!1}}return String(e)===String(t)}function ES(e,t){return e.findIndex(r=>Nh(r,t))}const Eoe=e=>!!(e&&e.__v_isRef===!0),Or=e=>fr(e)?e:e==null?"":Qe(e)||mr(e)&&(e.toString===CF||!bt(e.toString))?Eoe(e)?Or(e.value):JSON.stringify(e,Aoe,2):String(e),Aoe=(e,t)=>Eoe(t)?Aoe(e,t.value):ay(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,s],n)=>(r[uC(i,n)+" =>"]=s,r),{})}:nf(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>uC(r))}:Jl(t)?uC(t):mr(t)&&!Qe(t)&&!IS(t)?String(t):t,uC=(e,t="")=>{var r;return Jl(e)?`Symbol(${(r=e.description)!=null?r:t})`:e},Ict=Object.freeze(Object.defineProperty({__proto__:null,EMPTY_ARR:oy,EMPTY_OBJ:Jt,NO:boe,NOOP:Da,PatchFlagNames:fVe,PatchFlags:dVe,ShapeFlags:mVe,SlotFlags:yVe,camelize:Ls,capitalize:L1,cssVarNameEscapeSymbolsRE:Ioe,def:OF,escapeHtml:zVe,escapeHtmlComment:BVe,extend:Tr,genCacheKey:pVe,genPropsAccessExp:hVe,generateCodeFrame:wVe,getEscapedCssVarName:qVe,getGlobalThis:PF,hasChanged:nn,hasOwn:rr,hyphenate:un,includeBooleanAttr:LF,invokeArrayFns:uy,isArray:Qe,isBooleanAttr:RVe,isBuiltInDirective:aVe,isDate:uN,isFunction:bt,isGloballyAllowed:RF,isGloballyWhitelisted:bVe,isHTMLTag:$Ve,isIntegerKey:v$,isKnownHtmlAttr:DVe,isKnownMathMLAttr:jVe,isKnownSvgAttr:FVe,isMap:ay,isMathMLTag:OVe,isModelListener:m$,isObject:mr,isOn:R1,isPlainObject:IS,isPromise:g$,isRegExp:woe,isRenderableAttrValue:VVe,isReservedProp:ly,isSSRSafeAttrName:kVe,isSVGTag:CVe,isSet:nf,isSpecialBooleanAttr:Toe,isString:fr,isSymbol:Jl,isVoidTag:PVe,looseEqual:Nh,looseIndexOf:ES,looseToNumber:m2,makeMap:Eo,normalizeClass:wi,normalizeProps:xoe,normalizeStyle:of,objectToString:CF,parseStringStyle:Soe,propsToAttrMap:NVe,remove:y$,slotFlagsText:gVe,stringifyStyle:MVe,toDisplayString:Or,toHandlerKey:yv,toNumber:y2,toRawType:_oe,toTypeString:rg},Symbol.toStringTag,{value:"Module"}));/**
* @vue/reactivity v3.5.9
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Rn;class kF{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Rn,!t&&Rn&&(this.index=(Rn.scopes||(Rn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=Rn;try{return Rn=this,t()}finally{Rn=r}}}on(){Rn=this}off(){Rn=this.parent}stop(t){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function w$(e){return new kF(e)}function NF(){return Rn}function $oe(e,t=!1){Rn&&Rn.cleanups.push(e)}let $r;const cC=new WeakSet;class g2{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Rn&&Rn.active&&Rn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,cC.has(this)&&(cC.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ooe(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,bq(this),Poe(this);const t=$r,r=jl;$r=this,jl=!0;try{return this.fn()}finally{Roe(this),$r=t,jl=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)jF(t);this.deps=this.depsTail=void 0,bq(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?cC.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){cN(this)&&this.run()}get dirty(){return cN(this)}}let Coe=0,F0;function Ooe(e){e.flags|=8,e.next=F0,F0=e}function DF(){Coe++}function FF(){if(--Coe>0)return;let e;for(;F0;){let t=F0,r;for(;t;)t.flags&=-9,t=t.next;for(t=F0,F0=void 0;t;){if(t.flags&1)try{t.trigger()}catch(i){e||(e=i)}r=t.next,t.next=void 0,t=r}}if(e)throw e}function Poe(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Roe(e){let t,r=e.depsTail,i=r;for(;i;){const s=i.prevDep;i.version===-1?(i===r&&(r=s),jF(i),WVe(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}e.deps=t,e.depsTail=r}function cN(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Loe(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Loe(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===v2))return;e.globalVersion=v2;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!cN(e)){e.flags&=-3;return}const r=$r,i=jl;$r=e,jl=!0;try{Poe(e);const s=e.fn(e._value);(t.version===0||nn(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{$r=r,jl=i,Roe(e),e.flags&=-3}}function jF(e,t=!1){const{dep:r,prevSub:i,nextSub:s}=e;if(i&&(i.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=i,e.nextSub=void 0),r.subs===e&&(r.subs=i),!r.subs&&r.computed){r.computed.flags&=-5;for(let n=r.computed.deps;n;n=n.nextDep)jF(n,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function WVe(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}function JVe(e,t){e.effect instanceof g2&&(e=e.effect.fn);const r=new g2(e);t&&Tr(r,t);try{r.run()}catch(s){throw r.stop(),s}const i=r.run.bind(r);return i.effect=r,i}function ZVe(e){e.effect.stop()}let jl=!0;const koe=[];function af(){koe.push(jl),jl=!1}function lf(){const e=koe.pop();jl=e===void 0?!0:e}function bq(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=$r;$r=void 0;try{t()}finally{$r=r}}}let v2=0;class YVe{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class _${constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.target=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!$r||!jl||$r===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==$r)r=this.activeLink=new YVe($r,this),$r.deps?(r.prevDep=$r.depsTail,$r.depsTail.nextDep=r,$r.depsTail=r):$r.deps=$r.depsTail=r,Noe(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const i=r.nextDep;i.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=i),r.prevDep=$r.depsTail,r.nextDep=void 0,$r.depsTail.nextDep=r,$r.depsTail=r,$r.deps===r&&($r.deps=i)}return r}trigger(t){this.version++,v2++,this.notify(t)}notify(t){DF();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{FF()}}}function Noe(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)Noe(i)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const QI=new WeakMap,cy=Symbol(""),hN=Symbol(""),b2=Symbol("");function gn(e,t,r){if(jl&&$r){let i=QI.get(e);i||QI.set(e,i=new Map);let s=i.get(r);s||(i.set(r,s=new _$),s.target=e,s.map=i,s.key=r),s.track()}}function Ih(e,t,r,i,s,n){const o=QI.get(e);if(!o){v2++;return}const a=l=>{l&&l.trigger()};if(DF(),t==="clear")o.forEach(a);else{const l=Qe(e),u=l&&v$(r);if(l&&r==="length"){const c=Number(i);o.forEach((p,f)=>{(f==="length"||f===b2||!Jl(f)&&f>=c)&&a(p)})}else switch(r!==void 0&&a(o.get(r)),u&&a(o.get(b2)),t){case"add":l?u&&a(o.get("length")):(a(o.get(cy)),ay(e)&&a(o.get(hN)));break;case"delete":l||(a(o.get(cy)),ay(e)&&a(o.get(hN)));break;case"set":ay(e)&&a(o.get(cy));break}}FF()}function KVe(e,t){const r=QI.get(e);return r&&r.get(t)}function Tg(e){const t=Rt(e);return t===e?t:(gn(t,"iterate",b2),ea(e)?t:t.map(on))}function S$(e){return gn(e=Rt(e),"iterate",b2),e}const XVe={__proto__:null,[Symbol.iterator](){return hC(this,Symbol.iterator,on)},concat(...e){return Tg(this).concat(...e.map(t=>Qe(t)?Tg(t):t))},entries(){return hC(this,"entries",e=>(e[1]=on(e[1]),e))},every(e,t){return Tc(this,"every",e,t,void 0,arguments)},filter(e,t){return Tc(this,"filter",e,t,r=>r.map(on),arguments)},find(e,t){return Tc(this,"find",e,t,on,arguments)},findIndex(e,t){return Tc(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Tc(this,"findLast",e,t,on,arguments)},findLastIndex(e,t){return Tc(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Tc(this,"forEach",e,t,void 0,arguments)},includes(...e){return pC(this,"includes",e)},indexOf(...e){return pC(this,"indexOf",e)},join(e){return Tg(this).join(e)},lastIndexOf(...e){return pC(this,"lastIndexOf",e)},map(e,t){return Tc(this,"map",e,t,void 0,arguments)},pop(){return gb(this,"pop")},push(...e){return gb(this,"push",e)},reduce(e,...t){return wq(this,"reduce",e,t)},reduceRight(e,...t){return wq(this,"reduceRight",e,t)},shift(){return gb(this,"shift")},some(e,t){return Tc(this,"some",e,t,void 0,arguments)},splice(...e){return gb(this,"splice",e)},toReversed(){return Tg(this).toReversed()},toSorted(e){return Tg(this).toSorted(e)},toSpliced(...e){return Tg(this).toSpliced(...e)},unshift(...e){return gb(this,"unshift",e)},values(){return hC(this,"values",on)}};function hC(e,t,r){const i=S$(e),s=i[t]();return i!==e&&!ea(e)&&(s._next=s.next,s.next=()=>{const n=s._next();return n.value&&(n.value=r(n.value)),n}),s}const QVe=Array.prototype;function Tc(e,t,r,i,s,n){const o=S$(e),a=o!==e&&!ea(e),l=o[t];if(l!==QVe[t]){const p=l.apply(e,n);return a?on(p):p}let u=r;o!==e&&(a?u=function(p,f){return r.call(this,on(p),f,e)}:r.length>2&&(u=function(p,f){return r.call(this,p,f,e)}));const c=l.call(o,u,i);return a&&s?s(c):c}function wq(e,t,r,i){const s=S$(e);let n=r;return s!==e&&(ea(e)?r.length>3&&(n=function(o,a,l){return r.call(this,o,a,l,e)}):n=function(o,a,l){return r.call(this,o,on(a),l,e)}),s[t](n,...i)}function pC(e,t,r){const i=Rt(e);gn(i,"iterate",b2);const s=i[t](...r);return(s===-1||s===!1)&&I$(r[0])?(r[0]=Rt(r[0]),i[t](...r)):s}function gb(e,t,r=[]){af(),DF();const i=Rt(e)[t].apply(e,r);return FF(),lf(),i}const eUe=Eo("__proto__,__v_isRef,__isVue"),Doe=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Jl));function tUe(e){Jl(e)||(e=String(e));const t=Rt(this);return gn(t,"has",e),t.hasOwnProperty(e)}class Foe{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,i){const s=this._isReadonly,n=this._isShallow;if(r==="__v_isReactive")return!s;if(r==="__v_isReadonly")return s;if(r==="__v_isShallow")return n;if(r==="__v_raw")return i===(s?n?Boe:Goe:n?zoe:Uoe).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=Qe(t);if(!s){let l;if(o&&(l=XVe[r]))return l;if(r==="hasOwnProperty")return tUe}const a=Reflect.get(t,r,ir(t)?t:i);return(Jl(r)?Doe.has(r):eUe(r))||(s||gn(t,"get",r),n)?a:ir(a)?o&&v$(r)?a:a.value:mr(a)?s?UF(a):Fs(a):a}}class joe extends Foe{constructor(t=!1){super(!1,t)}set(t,r,i,s){let n=t[r];if(!this._isShallow){const l=Dd(n);if(!ea(i)&&!Dd(i)&&(n=Rt(n),i=Rt(i)),!Qe(t)&&ir(n)&&!ir(i))return l?!1:(n.value=i,!0)}const o=Qe(t)&&v$(r)?Number(r)<t.length:rr(t,r),a=Reflect.set(t,r,i,ir(t)?t:s);return t===Rt(s)&&(o?nn(i,n)&&Ih(t,"set",r,i):Ih(t,"add",r,i)),a}deleteProperty(t,r){const i=rr(t,r);t[r];const s=Reflect.deleteProperty(t,r);return s&&i&&Ih(t,"delete",r,void 0),s}has(t,r){const i=Reflect.has(t,r);return(!Jl(r)||!Doe.has(r))&&gn(t,"has",r),i}ownKeys(t){return gn(t,"iterate",Qe(t)?"length":cy),Reflect.ownKeys(t)}}class Voe extends Foe{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const rUe=new joe,iUe=new Voe,sUe=new joe(!0),nUe=new Voe(!0),VF=e=>e,x$=e=>Reflect.getPrototypeOf(e);function oM(e,t,r=!1,i=!1){e=e.__v_raw;const s=Rt(e),n=Rt(t);r||(nn(t,n)&&gn(s,"get",t),gn(s,"get",n));const{has:o}=x$(s),a=i?VF:r?zF:on;if(o.call(s,t))return a(e.get(t));if(o.call(s,n))return a(e.get(n));e!==s&&e.get(t)}function aM(e,t=!1){const r=this.__v_raw,i=Rt(r),s=Rt(e);return t||(nn(e,s)&&gn(i,"has",e),gn(i,"has",s)),e===s?r.has(e):r.has(e)||r.has(s)}function lM(e,t=!1){return e=e.__v_raw,!t&&gn(Rt(e),"iterate",cy),Reflect.get(e,"size",e)}function _q(e,t=!1){!t&&!ea(e)&&!Dd(e)&&(e=Rt(e));const r=Rt(this);return x$(r).has.call(r,e)||(r.add(e),Ih(r,"add",e,e)),this}function Sq(e,t,r=!1){!r&&!ea(t)&&!Dd(t)&&(t=Rt(t));const i=Rt(this),{has:s,get:n}=x$(i);let o=s.call(i,e);o||(e=Rt(e),o=s.call(i,e));const a=n.call(i,e);return i.set(e,t),o?nn(t,a)&&Ih(i,"set",e,t):Ih(i,"add",e,t),this}function xq(e){const t=Rt(this),{has:r,get:i}=x$(t);let s=r.call(t,e);s||(e=Rt(e),s=r.call(t,e)),i&&i.call(t,e);const n=t.delete(e);return s&&Ih(t,"delete",e,void 0),n}function Mq(){const e=Rt(this),t=e.size!==0,r=e.clear();return t&&Ih(e,"clear",void 0,void 0),r}function uM(e,t){return function(i,s){const n=this,o=n.__v_raw,a=Rt(o),l=t?VF:e?zF:on;return!e&&gn(a,"iterate",cy),o.forEach((u,c)=>i.call(s,l(u),l(c),n))}}function cM(e,t,r){return function(...i){const s=this.__v_raw,n=Rt(s),o=ay(n),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=s[e](...i),c=r?VF:t?zF:on;return!t&&gn(n,"iterate",l?hN:cy),{next(){const{value:p,done:f}=u.next();return f?{value:p,done:f}:{value:a?[c(p[0]),c(p[1])]:c(p),done:f}},[Symbol.iterator](){return this}}}}function op(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function oUe(){const e={get(n){return oM(this,n)},get size(){return lM(this)},has:aM,add:_q,set:Sq,delete:xq,clear:Mq,forEach:uM(!1,!1)},t={get(n){return oM(this,n,!1,!0)},get size(){return lM(this)},has:aM,add(n){return _q.call(this,n,!0)},set(n,o){return Sq.call(this,n,o,!0)},delete:xq,clear:Mq,forEach:uM(!1,!0)},r={get(n){return oM(this,n,!0)},get size(){return lM(this,!0)},has(n){return aM.call(this,n,!0)},add:op("add"),set:op("set"),delete:op("delete"),clear:op("clear"),forEach:uM(!0,!1)},i={get(n){return oM(this,n,!0,!0)},get size(){return lM(this,!0)},has(n){return aM.call(this,n,!0)},add:op("add"),set:op("set"),delete:op("delete"),clear:op("clear"),forEach:uM(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=cM(n,!1,!1),r[n]=cM(n,!0,!1),t[n]=cM(n,!1,!0),i[n]=cM(n,!0,!0)}),[e,r,t,i]}const[aUe,lUe,uUe,cUe]=oUe();function M$(e,t){const r=t?e?cUe:uUe:e?lUe:aUe;return(i,s,n)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?i:Reflect.get(rr(r,s)&&s in i?r:i,s,n)}const hUe={get:M$(!1,!1)},pUe={get:M$(!1,!0)},dUe={get:M$(!0,!1)},fUe={get:M$(!0,!0)},Uoe=new WeakMap,zoe=new WeakMap,Goe=new WeakMap,Boe=new WeakMap;function mUe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function yUe(e){return e.__v_skip||!Object.isExtensible(e)?0:mUe(_oe(e))}function Fs(e){return Dd(e)?e:T$(e,!1,rUe,hUe,Uoe)}function qoe(e){return T$(e,!1,sUe,pUe,zoe)}function UF(e){return T$(e,!0,iUe,dUe,Goe)}function gUe(e){return T$(e,!0,nUe,fUe,Boe)}function T$(e,t,r,i,s){if(!mr(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=s.get(e);if(n)return n;const o=yUe(e);if(o===0)return e;const a=new Proxy(e,o===2?i:r);return s.set(e,a),a}function Fa(e){return Dd(e)?Fa(e.__v_raw):!!(e&&e.__v_isReactive)}function Dd(e){return!!(e&&e.__v_isReadonly)}function ea(e){return!!(e&&e.__v_isShallow)}function I$(e){return e?!!e.__v_raw:!1}function Rt(e){const t=e&&e.__v_raw;return t?Rt(t):e}function Gi(e){return!rr(e,"__v_skip")&&Object.isExtensible(e)&&OF(e,"__v_skip",!0),e}const on=e=>mr(e)?Fs(e):e,zF=e=>mr(e)?UF(e):e;function ir(e){return e?e.__v_isRef===!0:!1}function Se(e){return Hoe(e,!1)}function AS(e){return Hoe(e,!0)}function Hoe(e,t){return ir(e)?e:new vUe(e,t)}class vUe{constructor(t,r){this.dep=new _$,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:Rt(t),this._value=r?t:on(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,i=this.__v_isShallow||ea(t)||Dd(t);t=i?t:Rt(t),nn(t,r)&&(this._rawValue=t,this._value=i?t:on(t),this.dep.trigger())}}function bUe(e){e.dep&&e.dep.trigger()}function at(e){return ir(e)?e.value:e}function wUe(e){return bt(e)?e():at(e)}const _Ue={get:(e,t,r)=>t==="__v_raw"?e:at(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const s=e[t];return ir(s)&&!ir(r)?(s.value=r,!0):Reflect.set(e,t,r,i)}};function GF(e){return Fa(e)?e:new Proxy(e,_Ue)}class SUe{constructor(t){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new _$,{get:i,set:s}=t(r.track.bind(r),r.trigger.bind(r));this._get=i,this._set=s}get value(){return this._value=this._get()}set value(t){this._set(t)}}function Woe(e){return new SUe(e)}function Joe(e){const t=Qe(e)?new Array(e.length):{};for(const r in e)t[r]=Zoe(e,r);return t}class xUe{constructor(t,r,i){this._object=t,this._key=r,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return KVe(Rt(this._object),this._key)}}class MUe{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function TUe(e,t,r){return ir(e)?e:bt(e)?new MUe(e):mr(e)&&arguments.length>1?Zoe(e,t,r):Se(e)}function Zoe(e,t,r){const i=e[t];return ir(i)?i:new xUe(e,t,r)}class IUe{constructor(t,r,i){this.fn=t,this.setter=r,this._value=void 0,this.dep=new _$(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=v2-1,this.effect=this,this.__v_isReadonly=!r,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&$r!==this)return Ooe(this),!0}get value(){const t=this.dep.track();return Loe(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function EUe(e,t,r=!1){let i,s;return bt(e)?i=e:(i=e.get,s=e.set),new IUe(i,s,r)}const AUe={GET:"get",HAS:"has",ITERATE:"iterate"},$Ue={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},hM={},eE=new WeakMap;let Qp;function CUe(){return Qp}function Yoe(e,t=!1,r=Qp){if(r){let i=eE.get(r);i||eE.set(r,i=[]),i.push(e)}}function OUe(e,t,r=Jt){const{immediate:i,deep:s,once:n,scheduler:o,augmentJob:a,call:l}=r,u=_=>s?_:ea(_)||s===!1||s===0?gh(_,1):gh(_);let c,p,f,m,g=!1,b=!1;if(ir(e)?(p=()=>e.value,g=ea(e)):Fa(e)?(p=()=>u(e),g=!0):Qe(e)?(b=!0,g=e.some(_=>Fa(_)||ea(_)),p=()=>e.map(_=>{if(ir(_))return _.value;if(Fa(_))return u(_);if(bt(_))return l?l(_,2):_()})):bt(e)?t?p=l?()=>l(e,2):e:p=()=>{if(f){af();try{f()}finally{lf()}}const _=Qp;Qp=c;try{return l?l(e,3,[m]):e(m)}finally{Qp=_}}:p=Da,t&&s){const _=p,I=s===!0?1/0:s;p=()=>gh(_(),I)}const w=NF(),S=()=>{c.stop(),w&&y$(w.effects,c)};if(n&&t){const _=t;t=(...I)=>{_(...I),S()}}let M=b?new Array(e.length).fill(hM):hM;const x=_=>{if(!(!(c.flags&1)||!c.dirty&&!_))if(t){const I=c.run();if(s||g||(b?I.some((E,A)=>nn(E,M[A])):nn(I,M))){f&&f();const E=Qp;Qp=c;try{const A=[I,M===hM?void 0:b&&M[0]===hM?[]:M,m];l?l(t,3,A):t(...A),M=I}finally{Qp=E}}}else c.run()};return a&&a(x),c=new g2(p),c.scheduler=o?()=>o(x,!1):x,m=_=>Yoe(_,!1,c),f=c.onStop=()=>{const _=eE.get(c);if(_){if(l)l(_,4);else for(const I of _)I();eE.delete(c)}},t?i?x(!0):M=c.run():o?o(x.bind(null,!0),!0):c.run(),S.pause=c.pause.bind(c),S.resume=c.resume.bind(c),S.stop=S,S}function gh(e,t=1/0,r){if(t<=0||!mr(e)||e.__v_skip||(r=r||new Set,r.has(e)))return e;if(r.add(e),t--,ir(e))gh(e.value,t,r);else if(Qe(e))for(let i=0;i<e.length;i++)gh(e[i],t,r);else if(nf(e)||ay(e))e.forEach(i=>{gh(i,t,r)});else if(IS(e)){for(const i in e)gh(e[i],t,r);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&gh(e[i],t,r)}return e}/**
* @vue/runtime-core v3.5.9
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Koe=[];function PUe(e){Koe.push(e)}function RUe(){Koe.pop()}function LUe(e,t){}const kUe={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},NUe={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function k1(e,t,r,i){try{return i?e(...i):e()}catch(s){ig(s,t,r)}}function Ba(e,t,r,i){if(bt(e)){const s=k1(e,t,r,i);return s&&g$(s)&&s.catch(n=>{ig(n,t,r)}),s}if(Qe(e)){const s=[];for(let n=0;n<e.length;n++)s.push(Ba(e[n],t,r,i));return s}}function ig(e,t,r,i=!0){const s=t?t.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Jt;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${r}`;for(;a;){const c=a.ec;if(c){for(let p=0;p<c.length;p++)if(c[p](e,l,u)===!1)return}a=a.parent}if(n){af(),k1(n,null,10,[e,l,u]),lf();return}}DUe(e,r,s,i,o)}function DUe(e,t,r,i=!0,s=!1){if(s)throw e;console.error(e)}let w2=!1,pN=!1;const Dn=[];let Mu=0;const gv=[];let ed=null,b0=0;const Xoe=Promise.resolve();let BF=null;function pc(e){const t=BF||Xoe;return e?t.then(this?e.bind(this):e):t}function FUe(e){let t=w2?Mu+1:0,r=Dn.length;for(;t<r;){const i=t+r>>>1,s=Dn[i],n=_2(s);n<e||n===e&&s.flags&2?t=i+1:r=i}return t}function qF(e){if(!(e.flags&1)){const t=_2(e),r=Dn[Dn.length-1];!r||!(e.flags&2)&&t>=_2(r)?Dn.push(e):Dn.splice(FUe(t),0,e),e.flags|=1,Qoe()}}function Qoe(){!w2&&!pN&&(pN=!0,BF=Xoe.then(eae))}function tE(e){Qe(e)?gv.push(...e):ed&&e.id===-1?ed.splice(b0+1,0,e):e.flags&1||(gv.push(e),e.flags|=1),Qoe()}function Tq(e,t,r=w2?Mu+1:0){for(;r<Dn.length;r++){const i=Dn[r];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;Dn.splice(r,1),r--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function rE(e){if(gv.length){const t=[...new Set(gv)].sort((r,i)=>_2(r)-_2(i));if(gv.length=0,ed){ed.push(...t);return}for(ed=t,b0=0;b0<ed.length;b0++){const r=ed[b0];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}ed=null,b0=0}}const _2=e=>e.id==null?e.flags&2?-1:1/0:e.id;function eae(e){pN=!1,w2=!0;try{for(Mu=0;Mu<Dn.length;Mu++){const t=Dn[Mu];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),k1(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Mu<Dn.length;Mu++){const t=Dn[Mu];t&&(t.flags&=-2)}Mu=0,Dn.length=0,rE(),w2=!1,BF=null,(Dn.length||gv.length)&&eae()}}let w0,pM=[];function tae(e,t){var r,i;w0=e,w0?(w0.enabled=!0,pM.forEach(({event:s,args:n})=>w0.emit(s,...n)),pM=[]):typeof window<"u"&&window.HTMLElement&&!((i=(r=window.navigator)==null?void 0:r.userAgent)!=null&&i.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(n=>{tae(n,t)}),setTimeout(()=>{w0||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,pM=[])},3e3)):pM=[]}let Qi=null,E$=null;function S2(e){const t=Qi;return Qi=e,E$=e&&e.type.__scopeId||null,t}function jUe(e){E$=e}function VUe(){E$=null}const UUe=e=>Bi;function Bi(e,t=Qi,r){if(!t||e._n)return e;const i=(...s)=>{i._d&&wN(-1);const n=S2(t);let o;try{o=e(...s)}finally{S2(n),i._d&&wN(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function vr(e,t){if(Qi===null)return e;const r=RS(Qi),i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[n,o,a,l=Jt]=t[s];n&&(bt(n)&&(n={mounted:n,updated:n}),n.deep&&gh(o),i.push({dir:n,instance:r,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Eu(e,t,r,i){const s=e.dirs,n=t&&t.dirs;for(let o=0;o<s.length;o++){const a=s[o];n&&(a.oldValue=n[o].value);let l=a.dir[i];l&&(af(),Ba(l,r,8,[e.el,a,e,t]),lf())}}const rae=Symbol("_vte"),iae=e=>e.__isTeleport,y_=e=>e&&(e.disabled||e.disabled===""),zUe=e=>e&&(e.defer||e.defer===""),Iq=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Eq=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,dN=(e,t)=>{const r=e&&e.to;return fr(r)?t?t(r):null:r},GUe={name:"Teleport",__isTeleport:!0,process(e,t,r,i,s,n,o,a,l,u){const{mc:c,pc:p,pbc:f,o:{insert:m,querySelector:g,createText:b,createComment:w}}=u,S=y_(t.props);let{shapeFlag:M,children:x,dynamicChildren:_}=t;if(e==null){const I=t.el=b(""),E=t.anchor=b("");m(I,r,i),m(E,r,i);const A=(O,R)=>{M&16&&(s&&s.isCE&&(s.ce._teleportTarget=O),c(x,O,R,s,n,o,a,l))},C=()=>{const O=t.target=dN(t.props,g),R=nae(O,t,b,m);O&&(o!=="svg"&&Iq(O)?o="svg":o!=="mathml"&&Eq(O)&&(o="mathml"),S||(A(O,R),v3(t)))};S&&(A(r,E),v3(t)),zUe(t.props)?ds(C,n):C()}else{t.el=e.el,t.targetStart=e.targetStart;const I=t.anchor=e.anchor,E=t.target=e.target,A=t.targetAnchor=e.targetAnchor,C=y_(e.props),O=C?r:E,R=C?I:A;if(o==="svg"||Iq(E)?o="svg":(o==="mathml"||Eq(E))&&(o="mathml"),_?(f(e.dynamicChildren,_,O,s,n,o,a),e9(e,t,!0)):l||p(e,t,O,R,s,n,o,a,!1),S)C?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):dM(t,r,I,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const D=t.target=dN(t.props,g);D&&dM(t,D,null,u,0)}else C&&dM(t,E,A,u,1);v3(t)}},remove(e,t,r,{um:i,o:{remove:s}},n){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:c,target:p,props:f}=e;if(p&&(s(u),s(c)),n&&s(l),o&16){const m=n||!y_(f);for(let g=0;g<a.length;g++){const b=a[g];i(b,t,r,m,!!b.dynamicChildren)}}},move:dM,hydrate:BUe};function dM(e,t,r,{o:{insert:i},m:s},n=2){n===0&&i(e.targetAnchor,t,r);const{el:o,anchor:a,shapeFlag:l,children:u,props:c}=e,p=n===2;if(p&&i(o,t,r),(!p||y_(c))&&l&16)for(let f=0;f<u.length;f++)s(u[f],t,r,2);p&&i(a,t,r)}function BUe(e,t,r,i,s,n,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:c}},p){const f=t.target=dN(t.props,l);if(f){const m=f._lpa||f.firstChild;if(t.shapeFlag&16)if(y_(t.props))t.anchor=p(o(e),t,a(e),r,i,s,n),t.targetStart=m,t.targetAnchor=m&&o(m);else{t.anchor=o(e);let g=m;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")t.targetStart=g;else if(g.data==="teleport anchor"){t.targetAnchor=g,f._lpa=t.targetAnchor&&o(t.targetAnchor);break}}g=o(g)}t.targetAnchor||nae(f,t,c,u),p(m&&o(m),t,f,r,i,s,n)}v3(t)}return t.anchor&&o(t.anchor)}const sae=GUe;function v3(e){const t=e.ctx;if(t&&t.ut){let r=e.targetStart;for(;r&&r!==e.targetAnchor;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function nae(e,t,r,i){const s=t.targetStart=r(""),n=t.targetAnchor=r("");return s[rae]=n,e&&(i(s,e),i(n,e)),n}const td=Symbol("_leaveCb"),fM=Symbol("_enterCb");function HF(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return wn(()=>{e.isMounted=!0}),dc(()=>{e.isUnmounting=!0}),e}const pa=[Function,Array],WF={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:pa,onEnter:pa,onAfterEnter:pa,onEnterCancelled:pa,onBeforeLeave:pa,onLeave:pa,onAfterLeave:pa,onLeaveCancelled:pa,onBeforeAppear:pa,onAppear:pa,onAfterAppear:pa,onAppearCancelled:pa},oae=e=>{const t=e.subTree;return t.component?oae(t.component):t},qUe={name:"BaseTransition",props:WF,setup(e,{slots:t}){const r=rs(),i=HF();return()=>{const s=t.default&&A$(t.default(),!0);if(!s||!s.length)return;const n=aae(s),o=Rt(e),{mode:a}=o;if(i.isLeaving)return dC(n);const l=Aq(n);if(!l)return dC(n);let u=zv(l,o,i,r,f=>u=f);l.type!==Ui&&Dh(l,u);const c=r.subTree,p=c&&Aq(c);if(p&&p.type!==Ui&&!Il(l,p)&&oae(r).type!==Ui){const f=zv(p,o,i,r);if(Dh(p,f),a==="out-in"&&l.type!==Ui)return i.isLeaving=!0,f.afterLeave=()=>{i.isLeaving=!1,r.job.flags&8||r.update(),delete f.afterLeave},dC(n);a==="in-out"&&l.type!==Ui&&(f.delayLeave=(m,g,b)=>{const w=uae(i,p);w[String(p.key)]=p,m[td]=()=>{g(),m[td]=void 0,delete u.delayedLeave},u.delayedLeave=b})}return n}}};function aae(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==Ui){t=r;break}}return t}const lae=qUe;function uae(e,t){const{leavingVNodes:r}=e;let i=r.get(t.type);return i||(i=Object.create(null),r.set(t.type,i)),i}function zv(e,t,r,i,s){const{appear:n,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:p,onBeforeLeave:f,onLeave:m,onAfterLeave:g,onLeaveCancelled:b,onBeforeAppear:w,onAppear:S,onAfterAppear:M,onAppearCancelled:x}=t,_=String(e.key),I=uae(r,e),E=(O,R)=>{O&&Ba(O,i,9,R)},A=(O,R)=>{const D=R[1];E(O,R),Qe(O)?O.every(N=>N.length<=1)&&D():O.length<=1&&D()},C={mode:o,persisted:a,beforeEnter(O){let R=l;if(!r.isMounted)if(n)R=w||l;else return;O[td]&&O[td](!0);const D=I[_];D&&Il(e,D)&&D.el[td]&&D.el[td](),E(R,[O])},enter(O){let R=u,D=c,N=p;if(!r.isMounted)if(n)R=S||u,D=M||c,N=x||p;else return;let U=!1;const J=O[fM]=y=>{U||(U=!0,y?E(N,[O]):E(D,[O]),C.delayedLeave&&C.delayedLeave(),O[fM]=void 0)};R?A(R,[O,J]):J()},leave(O,R){const D=String(e.key);if(O[fM]&&O[fM](!0),r.isUnmounting)return R();E(f,[O]);let N=!1;const U=O[td]=J=>{N||(N=!0,R(),J?E(b,[O]):E(g,[O]),O[td]=void 0,I[D]===e&&delete I[D])};I[D]=e,m?A(m,[O,U]):U()},clone(O){const R=zv(O,t,r,i,s);return s&&s(R),R}};return C}function dC(e){if($S(e))return e=nc(e),e.children=null,e}function Aq(e){if(!$S(e))return iae(e.type)&&e.children?aae(e.children):e;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&bt(r.default))return r.default()}}function Dh(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Dh(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function A$(e,t=!1,r){let i=[],s=0;for(let n=0;n<e.length;n++){let o=e[n];const a=r==null?o.key:String(r)+String(o.key!=null?o.key:n);o.type===xr?(o.patchFlag&128&&s++,i=i.concat(A$(o.children,t,a))):(t||o.type!==Ui)&&i.push(a!=null?nc(o,{key:a}):o)}if(s>1)for(let n=0;n<i.length;n++)i[n].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function Wt(e,t){return bt(e)?Tr({name:e.name},t,{setup:e}):e}function HUe(){const e=rs();return e?(e.appContext.config.idPrefix||"v")+"-"+e.ids[0]+e.ids[1]++:""}function JF(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function WUe(e){const t=rs(),r=AS(null);if(t){const s=t.refs===Jt?t.refs={}:t.refs;Object.defineProperty(s,e,{enumerable:!0,get:()=>r.value,set:n=>r.value=n})}return r}function iE(e,t,r,i,s=!1){if(Qe(e)){e.forEach((g,b)=>iE(g,t&&(Qe(t)?t[b]:t),r,i,s));return}if(Md(i)&&!s)return;const n=i.shapeFlag&4?RS(i.component):i.el,o=s?null:n,{i:a,r:l}=e,u=t&&t.r,c=a.refs===Jt?a.refs={}:a.refs,p=a.setupState,f=Rt(p),m=p===Jt?()=>!1:g=>rr(f,g);if(u!=null&&u!==l&&(fr(u)?(c[u]=null,m(u)&&(p[u]=null)):ir(u)&&(u.value=null)),bt(l))k1(l,a,12,[o,c]);else{const g=fr(l),b=ir(l);if(g||b){const w=()=>{if(e.f){const S=g?m(l)?p[l]:c[l]:l.value;s?Qe(S)&&y$(S,n):Qe(S)?S.includes(n)||S.push(n):g?(c[l]=[n],m(l)&&(p[l]=c[l])):(l.value=[n],e.k&&(c[e.k]=l.value))}else g?(c[l]=o,m(l)&&(p[l]=o)):b&&(l.value=o,e.k&&(c[e.k]=o))};o?(w.id=-1,ds(w,r)):w()}}}let $q=!1;const Ig=()=>{$q||(console.error("Hydration completed but contains mismatches."),$q=!0)},JUe=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",ZUe=e=>e.namespaceURI.includes("MathML"),mM=e=>{if(e.nodeType===1){if(JUe(e))return"svg";if(ZUe(e))return"mathml"}},j0=e=>e.nodeType===8;function YUe(e){const{mt:t,p:r,o:{patchProp:i,createText:s,nextSibling:n,parentNode:o,remove:a,insert:l,createComment:u}}=e,c=(x,_)=>{if(!_.hasChildNodes()){r(null,x,_),rE(),_._vnode=x;return}p(_.firstChild,x,null,null,null),rE(),_._vnode=x},p=(x,_,I,E,A,C=!1)=>{C=C||!!_.dynamicChildren;const O=j0(x)&&x.data==="[",R=()=>b(x,_,I,E,A,O),{type:D,ref:N,shapeFlag:U,patchFlag:J}=_;let y=x.nodeType;_.el=x,J===-2&&(C=!1,_.dynamicChildren=null);let T=null;switch(D){case Eh:y!==3?_.children===""?(l(_.el=s(""),o(x),x),T=x):T=R():(x.data!==_.children&&(Ig(),x.data=_.children),T=n(x));break;case Ui:M(x)?(T=n(x),S(_.el=x.content.firstChild,x,I)):y!==8||O?T=R():T=n(x);break;case py:if(O&&(x=n(x),y=x.nodeType),y===1||y===3){T=x;const $=!_.children.length;for(let P=0;P<_.staticCount;P++)$&&(_.children+=T.nodeType===1?T.outerHTML:T.data),P===_.staticCount-1&&(_.anchor=T),T=n(T);return O?n(T):T}else R();break;case xr:O?T=g(x,_,I,E,A,C):T=R();break;default:if(U&1)(y!==1||_.type.toLowerCase()!==x.tagName.toLowerCase())&&!M(x)?T=R():T=f(x,_,I,E,A,C);else if(U&6){_.slotScopeIds=A;const $=o(x);if(O?T=w(x):j0(x)&&x.data==="teleport start"?T=w(x,x.data,"teleport end"):T=n(x),t(_,$,null,I,E,mM($),C),Md(_)){let P;O?(P=jt(xr),P.anchor=T?T.previousSibling:$.lastChild):P=x.nodeType===3?Ah(""):jt("div"),P.el=x,_.component.subTree=P}}else U&64?y!==8?T=R():T=_.type.hydrate(x,_,I,E,A,C,e,m):U&128&&(T=_.type.hydrate(x,_,I,E,mM(o(x)),A,C,e,p))}return N!=null&&iE(N,null,E,_),T},f=(x,_,I,E,A,C)=>{C=C||!!_.dynamicChildren;const{type:O,props:R,patchFlag:D,shapeFlag:N,dirs:U,transition:J}=_,y=O==="input"||O==="option";if(y||D!==-1){U&&Eu(_,null,I,"created");let T=!1;if(M(x)){T=Fae(E,J)&&I&&I.vnode.props&&I.vnode.props.appear;const P=x.content.firstChild;T&&J.beforeEnter(P),S(P,x,I),_.el=x=P}if(N&16&&!(R&&(R.innerHTML||R.textContent))){let P=m(x.firstChild,_,x,I,E,A,C);for(;P;){yM(x,1)||Ig();const z=P;P=P.nextSibling,a(z)}}else if(N&8){let P=_.children;P[0]===`
`&&(x.tagName==="PRE"||x.tagName==="TEXTAREA")&&(P=P.slice(1)),x.textContent!==P&&(yM(x,0)||Ig(),x.textContent=_.children)}if(R){if(y||!C||D&48){const P=x.tagName.includes("-");for(const z in R)(y&&(z.endsWith("value")||z==="indeterminate")||R1(z)&&!ly(z)||z[0]==="."||P)&&i(x,z,null,R[z],void 0,I)}else if(R.onClick)i(x,"onClick",null,R.onClick,void 0,I);else if(D&4&&Fa(R.style))for(const P in R.style)R.style[P]}let $;($=R&&R.onVnodeBeforeMount)&&no($,I,_),U&&Eu(_,null,I,"beforeMount"),(($=R&&R.onVnodeMounted)||U||T)&&Jae(()=>{$&&no($,I,_),T&&J.enter(x),U&&Eu(_,null,I,"mounted")},E)}return x.nextSibling},m=(x,_,I,E,A,C,O)=>{O=O||!!_.dynamicChildren;const R=_.children,D=R.length;for(let N=0;N<D;N++){const U=O?R[N]:R[N]=co(R[N]),J=U.type===Eh;x?(J&&!O&&N+1<D&&co(R[N+1]).type===Eh&&(l(s(x.data.slice(U.children.length)),I,n(x)),x.data=U.children),x=p(x,U,E,A,C,O)):J&&!U.children?l(U.el=s(""),I):(yM(I,1)||Ig(),r(null,U,I,null,E,A,mM(I),C))}return x},g=(x,_,I,E,A,C)=>{const{slotScopeIds:O}=_;O&&(A=A?A.concat(O):O);const R=o(x),D=m(n(x),_,R,I,E,A,C);return D&&j0(D)&&D.data==="]"?n(_.anchor=D):(Ig(),l(_.anchor=u("]"),R,D),D)},b=(x,_,I,E,A,C)=>{if(yM(x.parentElement,1)||Ig(),_.el=null,C){const D=w(x);for(;;){const N=n(x);if(N&&N!==D)a(N);else break}}const O=n(x),R=o(x);return a(x),r(null,_,R,O,I,E,mM(R),A),O},w=(x,_="[",I="]")=>{let E=0;for(;x;)if(x=n(x),x&&j0(x)&&(x.data===_&&E++,x.data===I)){if(E===0)return n(x);E--}return x},S=(x,_,I)=>{const E=_.parentNode;E&&E.replaceChild(x,_);let A=I;for(;A;)A.vnode.el===_&&(A.vnode.el=A.subTree.el=x),A=A.parent},M=x=>x.nodeType===1&&x.tagName==="TEMPLATE";return[c,p]}const Cq="data-allow-mismatch",KUe={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function yM(e,t){if(t===0||t===1)for(;e&&!e.hasAttribute(Cq);)e=e.parentElement;const r=e&&e.getAttribute(Cq);if(r==null)return!1;if(r==="")return!0;{const i=r.split(",");return t===0&&i.includes("children")?!0:r.split(",").includes(KUe[t])}}const XUe=(e=1e4)=>t=>{const r=requestIdleCallback(t,{timeout:e});return()=>cancelIdleCallback(r)};function QUe(e){const{top:t,left:r,bottom:i,right:s}=e.getBoundingClientRect(),{innerHeight:n,innerWidth:o}=window;return(t>0&&t<n||i>0&&i<n)&&(r>0&&r<o||s>0&&s<o)}const eze=e=>(t,r)=>{const i=new IntersectionObserver(s=>{for(const n of s)if(n.isIntersecting){i.disconnect(),t();break}},e);return r(s=>{if(s instanceof Element){if(QUe(s))return t(),i.disconnect(),!1;i.observe(s)}}),()=>i.disconnect()},tze=e=>t=>{if(e){const r=matchMedia(e);if(r.matches)t();else return r.addEventListener("change",t,{once:!0}),()=>r.removeEventListener("change",t)}},rze=(e=[])=>(t,r)=>{fr(e)&&(e=[e]);let i=!1;const s=o=>{i||(i=!0,n(),t(),o.target.dispatchEvent(new o.constructor(o.type,o)))},n=()=>{r(o=>{for(const a of e)o.removeEventListener(a,s)})};return r(o=>{for(const a of e)o.addEventListener(a,s,{once:!0})}),n};function ize(e,t){if(j0(e)&&e.data==="["){let r=1,i=e.nextSibling;for(;i;){if(i.nodeType===1){if(t(i)===!1)break}else if(j0(i))if(i.data==="]"){if(--r===0)break}else i.data==="["&&r++;i=i.nextSibling}}else t(e)}const Md=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function cae(e){bt(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:i,delay:s=200,hydrate:n,timeout:o,suspensible:a=!0,onError:l}=e;let u=null,c,p=0;const f=()=>(p++,u=null,m()),m=()=>{let g;return u||(g=u=t().catch(b=>{if(b=b instanceof Error?b:new Error(String(b)),l)return new Promise((w,S)=>{l(b,()=>w(f()),()=>S(b),p+1)});throw b}).then(b=>g!==u&&u?u:(b&&(b.__esModule||b[Symbol.toStringTag]==="Module")&&(b=b.default),c=b,b)))};return Wt({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(g,b,w){const S=n?()=>{const M=n(w,x=>ize(g,x));M&&(b.bum||(b.bum=[])).push(M)}:w;c?S():m().then(()=>!b.isUnmounted&&S())},get __asyncResolved(){return c},setup(){const g=Xi;if(JF(g),c)return()=>fC(c,g);const b=x=>{u=null,ig(x,g,13,!i)};if(a&&g.suspense||PS)return m().then(x=>()=>fC(x,g)).catch(x=>(b(x),()=>i?jt(i,{error:x}):null));const w=Se(!1),S=Se(),M=Se(!!s);return s&&setTimeout(()=>{M.value=!1},s),o!=null&&setTimeout(()=>{if(!w.value&&!S.value){const x=new Error(`Async component timed out after ${o}ms.`);b(x),S.value=x}},o),m().then(()=>{w.value=!0,g.parent&&$S(g.parent.vnode)&&g.parent.update()}).catch(x=>{b(x),S.value=x}),()=>{if(w.value&&c)return fC(c,g);if(S.value&&i)return jt(i,{error:S.value});if(r&&!M.value)return jt(r)}}})}function fC(e,t){const{ref:r,props:i,children:s,ce:n}=t.vnode,o=jt(e,i,s);return o.ref=r,o.ce=n,delete t.vnode.ce,o}const $S=e=>e.type.__isKeepAlive,sze={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const r=rs(),i=r.ctx;if(!i.renderer)return()=>{const M=t.default&&t.default();return M&&M.length===1?M[0]:M};const s=new Map,n=new Set;let o=null;const a=r.suspense,{renderer:{p:l,m:u,um:c,o:{createElement:p}}}=i,f=p("div");i.activate=(M,x,_,I,E)=>{const A=M.component;u(M,x,_,0,a),l(A.vnode,M,x,_,A,a,I,M.slotScopeIds,E),ds(()=>{A.isDeactivated=!1,A.a&&uy(A.a);const C=M.props&&M.props.onVnodeMounted;C&&no(C,A.parent,M)},a)},i.deactivate=M=>{const x=M.component;nE(x.m),nE(x.a),u(M,f,null,1,a),ds(()=>{x.da&&uy(x.da);const _=M.props&&M.props.onVnodeUnmounted;_&&no(_,x.parent,M),x.isDeactivated=!0},a)};function m(M){mC(M),c(M,r,a,!0)}function g(M){s.forEach((x,_)=>{const I=TN(x.type);I&&!M(I)&&b(_)})}function b(M){const x=s.get(M);x&&(!o||!Il(x,o))?m(x):o&&mC(o),s.delete(M),n.delete(M)}ks(()=>[e.include,e.exclude],([M,x])=>{M&&g(_=>Ow(M,_)),x&&g(_=>!Ow(x,_))},{flush:"post",deep:!0});let w=null;const S=()=>{w!=null&&(oE(r.subTree.type)?ds(()=>{s.set(w,gM(r.subTree))},r.subTree.suspense):s.set(w,gM(r.subTree)))};return wn(S),CS(S),dc(()=>{s.forEach(M=>{const{subTree:x,suspense:_}=r,I=gM(x);if(M.type===I.type&&M.key===I.key){mC(I);const E=I.component.da;E&&ds(E,_);return}m(M)})}),()=>{if(w=null,!t.default)return o=null;const M=t.default(),x=M[0];if(M.length>1)return o=null,M;if(!sc(x)||!(x.shapeFlag&4)&&!(x.shapeFlag&128))return o=null,x;let _=gM(x);if(_.type===Ui)return o=null,_;const I=_.type,E=TN(Md(_)?_.type.__asyncResolved||{}:I),{include:A,exclude:C,max:O}=e;if(A&&(!E||!Ow(A,E))||C&&E&&Ow(C,E))return _.shapeFlag&=-257,o=_,x;const R=_.key==null?I:_.key,D=s.get(R);return _.el&&(_=nc(_),x.shapeFlag&128&&(x.ssContent=_)),w=R,D?(_.el=D.el,_.component=D.component,_.transition&&Dh(_,_.transition),_.shapeFlag|=512,n.delete(R),n.add(R)):(n.add(R),O&&n.size>parseInt(O,10)&&b(n.values().next().value)),_.shapeFlag|=256,o=_,oE(x.type)?x:_}}},nze=sze;function Ow(e,t){return Qe(e)?e.some(r=>Ow(r,t)):fr(e)?e.split(",").includes(t):woe(e)?(e.lastIndex=0,e.test(t)):!1}function hae(e,t){dae(e,"a",t)}function pae(e,t){dae(e,"da",t)}function dae(e,t,r=Xi){const i=e.__wdc||(e.__wdc=()=>{let s=r;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if($$(t,i,r),r){let s=r.parent;for(;s&&s.parent;)$S(s.parent.vnode)&&oze(i,t,r,s),s=s.parent}}function oze(e,t,r,i){const s=$$(t,e,i,!0);N1(()=>{y$(i[t],s)},r)}function mC(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function gM(e){return e.shapeFlag&128?e.ssContent:e}function $$(e,t,r=Xi,i=!1){if(r){const s=r[e]||(r[e]=[]),n=t.__weh||(t.__weh=(...o)=>{af();const a=Fy(r),l=Ba(t,r,e,o);return a(),lf(),l});return i?s.unshift(n):s.push(n),n}}const Bh=e=>(t,r=Xi)=>{(!PS||e==="sp")&&$$(e,(...i)=>t(...i),r)},C$=Bh("bm"),wn=Bh("m"),fae=Bh("bu"),CS=Bh("u"),dc=Bh("bum"),N1=Bh("um"),mae=Bh("sp"),yae=Bh("rtg"),gae=Bh("rtc");function vae(e,t=Xi){$$("ec",e,t)}const ZF="components",aze="directives";function Vi(e,t){return YF(ZF,e,!0,t)||e}const bae=Symbol.for("v-ndc");function wae(e){return fr(e)?YF(ZF,e,!1)||e:e||bae}function br(e){return YF(aze,e)}function YF(e,t,r=!0,i=!1){const s=Qi||Xi;if(s){const n=s.type;if(e===ZF){const a=TN(n,!1);if(a&&(a===t||a===Ls(t)||a===L1(Ls(t))))return n}const o=Oq(s[e]||n[e],t)||Oq(s.appContext[e],t);return!o&&i?n:o}}function Oq(e,t){return e&&(e[t]||e[Ls(t)]||e[L1(Ls(t))])}function sg(e,t,r,i){let s;const n=r&&r[i],o=Qe(e);if(o||fr(e)){const a=o&&Fa(e);let l=!1;a&&(l=!ea(e),e=S$(e)),s=new Array(e.length);for(let u=0,c=e.length;u<c;u++)s[u]=t(l?on(e[u]):e[u],u,void 0,n&&n[u])}else if(typeof e=="number"){s=new Array(e);for(let a=0;a<e;a++)s[a]=t(a+1,a,void 0,n&&n[a])}else if(mr(e))if(e[Symbol.iterator])s=Array.from(e,(a,l)=>t(a,l,void 0,n&&n[l]));else{const a=Object.keys(e);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const c=a[l];s[l]=t(e[c],c,l,n&&n[l])}}else s=[];return r&&(r[i]=s),s}function lze(e,t){for(let r=0;r<t.length;r++){const i=t[r];if(Qe(i))for(let s=0;s<i.length;s++)e[i[s].name]=i[s].fn;else i&&(e[i.name]=i.key?(...s)=>{const n=i.fn(...s);return n&&(n.key=i.key),n}:i.fn)}return e}function ku(e,t,r={},i,s){if(Qi.ce||Qi.parent&&Md(Qi.parent)&&Qi.parent.ce)return t!=="default"&&(r.name=t),Ae(),Vr(xr,null,[jt("slot",r,i&&i())],64);let n=e[t];n&&n._c&&(n._d=!1),Ae();const o=n&&KF(n(r)),a=Vr(xr,{key:(r.key||o&&o.key||`_${t}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&e._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),n&&n._c&&(n._d=!0),a}function KF(e){return e.some(t=>sc(t)?!(t.type===Ui||t.type===xr&&!KF(t.children)):!0)?e:null}function uze(e,t){const r={};for(const i in e)r[t&&/[A-Z]/.test(i)?`on:${i}`:yv(i)]=e[i];return r}const fN=e=>e?ele(e)?RS(e):fN(e.parent):null,g_=Tr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>fN(e.parent),$root:e=>fN(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>XF(e),$forceUpdate:e=>e.f||(e.f=()=>{qF(e.update)}),$nextTick:e=>e.n||(e.n=pc.bind(e.proxy)),$watch:e=>jze.bind(e)}),yC=(e,t)=>e!==Jt&&!e.__isScriptSetup&&rr(e,t),mN={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:i,data:s,props:n,accessCache:o,type:a,appContext:l}=e;let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return i[t];case 2:return s[t];case 4:return r[t];case 3:return n[t]}else{if(yC(i,t))return o[t]=1,i[t];if(s!==Jt&&rr(s,t))return o[t]=2,s[t];if((u=e.propsOptions[0])&&rr(u,t))return o[t]=3,n[t];if(r!==Jt&&rr(r,t))return o[t]=4,r[t];yN&&(o[t]=0)}}const c=g_[t];let p,f;if(c)return t==="$attrs"&&gn(e.attrs,"get",""),c(e);if((p=a.__cssModules)&&(p=p[t]))return p;if(r!==Jt&&rr(r,t))return o[t]=4,r[t];if(f=l.config.globalProperties,rr(f,t))return f[t]},set({_:e},t,r){const{data:i,setupState:s,ctx:n}=e;return yC(s,t)?(s[t]=r,!0):i!==Jt&&rr(i,t)?(i[t]=r,!0):rr(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(n[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:s,propsOptions:n}},o){let a;return!!r[o]||e!==Jt&&rr(e,o)||yC(t,o)||(a=n[0])&&rr(a,o)||rr(i,o)||rr(g_,o)||rr(s.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:rr(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}},cze=Tr({},mN,{get(e,t){if(t!==Symbol.unscopables)return mN.get(e,t,e)},has(e,t){return t[0]!=="_"&&!RF(t)}});function hze(){return null}function pze(){return null}function dze(e){}function fze(e){}function mze(){return null}function yze(){}function gze(e,t){return null}function vze(){return _ae().slots}function bze(){return _ae().attrs}function _ae(){const e=rs();return e.setupContext||(e.setupContext=ile(e))}function x2(e){return Qe(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}function wze(e,t){const r=x2(e);for(const i in t){if(i.startsWith("__skip"))continue;let s=r[i];s?Qe(s)||bt(s)?s=r[i]={type:s,default:t[i]}:s.default=t[i]:s===null&&(s=r[i]={default:t[i]}),s&&t[`__skip_${i}`]&&(s.skipFactory=!0)}return r}function _ze(e,t){return!e||!t?e||t:Qe(e)&&Qe(t)?e.concat(t):Tr({},x2(e),x2(t))}function Sze(e,t){const r={};for(const i in e)t.includes(i)||Object.defineProperty(r,i,{enumerable:!0,get:()=>e[i]});return r}function xze(e){const t=rs();let r=e();return SN(),g$(r)&&(r=r.catch(i=>{throw Fy(t),i})),[r,()=>Fy(t)]}let yN=!0;function Mze(e){const t=XF(e),r=e.proxy,i=e.ctx;yN=!1,t.beforeCreate&&Pq(t.beforeCreate,e,"bc");const{data:s,computed:n,methods:o,watch:a,provide:l,inject:u,created:c,beforeMount:p,mounted:f,beforeUpdate:m,updated:g,activated:b,deactivated:w,beforeDestroy:S,beforeUnmount:M,destroyed:x,unmounted:_,render:I,renderTracked:E,renderTriggered:A,errorCaptured:C,serverPrefetch:O,expose:R,inheritAttrs:D,components:N,directives:U,filters:J}=t;if(u&&Tze(u,i,null),o)for(const $ in o){const P=o[$];bt(P)&&(i[$]=P.bind(r))}if(s){const $=s.call(r,r);mr($)&&(e.data=Fs($))}if(yN=!0,n)for(const $ in n){const P=n[$],z=bt(P)?P.bind(r,r):bt(P.get)?P.get.bind(r,r):Da,X=!bt(P)&&bt(P.set)?P.set.bind(r):Da,ae=Bt({get:z,set:X});Object.defineProperty(i,$,{enumerable:!0,configurable:!0,get:()=>ae.value,set:te=>ae.value=te})}if(a)for(const $ in a)Sae(a[$],i,r,$);if(l){const $=bt(l)?l.call(r):l;Reflect.ownKeys($).forEach(P=>{Mae(P,$[P])})}c&&Pq(c,e,"c");function T($,P){Qe(P)?P.forEach(z=>$(z.bind(r))):P&&$(P.bind(r))}if(T(C$,p),T(wn,f),T(fae,m),T(CS,g),T(hae,b),T(pae,w),T(vae,C),T(gae,E),T(yae,A),T(dc,M),T(N1,_),T(mae,O),Qe(R))if(R.length){const $=e.exposed||(e.exposed={});R.forEach(P=>{Object.defineProperty($,P,{get:()=>r[P],set:z=>r[P]=z})})}else e.exposed||(e.exposed={});I&&e.render===Da&&(e.render=I),D!=null&&(e.inheritAttrs=D),N&&(e.components=N),U&&(e.directives=U),O&&JF(e)}function Tze(e,t,r=Da){Qe(e)&&(e=gN(e));for(const i in e){const s=e[i];let n;mr(s)?"default"in s?n=vs(s.from||i,s.default,!0):n=vs(s.from||i):n=vs(s),ir(n)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>n.value,set:o=>n.value=o}):t[i]=n}}function Pq(e,t,r){Ba(Qe(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function Sae(e,t,r,i){let s=i.includes(".")?Bae(r,i):()=>r[i];if(fr(e)){const n=t[e];bt(n)&&ks(s,n)}else if(bt(e))ks(s,e.bind(r));else if(mr(e))if(Qe(e))e.forEach(n=>Sae(n,t,r,i));else{const n=bt(e.handler)?e.handler.bind(r):t[e.handler];bt(n)&&ks(s,n,e)}}function XF(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:s,optionsCache:n,config:{optionMergeStrategies:o}}=e.appContext,a=n.get(t);let l;return a?l=a:!s.length&&!r&&!i?l=t:(l={},s.length&&s.forEach(u=>sE(l,u,o,!0)),sE(l,t,o)),mr(t)&&n.set(t,l),l}function sE(e,t,r,i=!1){const{mixins:s,extends:n}=t;n&&sE(e,n,r,!0),s&&s.forEach(o=>sE(e,o,r,!0));for(const o in t)if(!(i&&o==="expose")){const a=Ize[o]||r&&r[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Ize={data:Rq,props:Lq,emits:Lq,methods:Pw,computed:Pw,beforeCreate:An,created:An,beforeMount:An,mounted:An,beforeUpdate:An,updated:An,beforeDestroy:An,beforeUnmount:An,destroyed:An,unmounted:An,activated:An,deactivated:An,errorCaptured:An,serverPrefetch:An,components:Pw,directives:Pw,watch:Aze,provide:Rq,inject:Eze};function Rq(e,t){return t?e?function(){return Tr(bt(e)?e.call(this,this):e,bt(t)?t.call(this,this):t)}:t:e}function Eze(e,t){return Pw(gN(e),gN(t))}function gN(e){if(Qe(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function An(e,t){return e?[...new Set([].concat(e,t))]:t}function Pw(e,t){return e?Tr(Object.create(null),e,t):t}function Lq(e,t){return e?Qe(e)&&Qe(t)?[...new Set([...e,...t])]:Tr(Object.create(null),x2(e),x2(t??{})):t}function Aze(e,t){if(!e)return t;if(!t)return e;const r=Tr(Object.create(null),e);for(const i in t)r[i]=An(e[i],t[i]);return r}function xae(){return{app:null,config:{isNativeTag:boe,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $ze=0;function Cze(e,t){return function(i,s=null){bt(i)||(i=Tr({},i)),s!=null&&!mr(s)&&(s=null);const n=xae(),o=new WeakSet,a=[];let l=!1;const u=n.app={_uid:$ze++,_component:i,_props:s,_container:null,_context:n,_instance:null,version:nle,get config(){return n.config},set config(c){},use(c,...p){return o.has(c)||(c&&bt(c.install)?(o.add(c),c.install(u,...p)):bt(c)&&(o.add(c),c(u,...p))),u},mixin(c){return n.mixins.includes(c)||n.mixins.push(c),u},component(c,p){return p?(n.components[c]=p,u):n.components[c]},directive(c,p){return p?(n.directives[c]=p,u):n.directives[c]},mount(c,p,f){if(!l){const m=u._ceVNode||jt(i,s);return m.appContext=n,f===!0?f="svg":f===!1&&(f=void 0),p&&t?t(m,c):e(m,c,f),l=!0,u._container=c,c.__vue_app__=u,RS(m.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Ba(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,p){return n.provides[c]=p,u},runWithContext(c){const p=hy;hy=u;try{return c()}finally{hy=p}}};return u}}let hy=null;function Mae(e,t){if(Xi){let r=Xi.provides;const i=Xi.parent&&Xi.parent.provides;i===r&&(r=Xi.provides=Object.create(i)),r[e]=t}}function vs(e,t,r=!1){const i=Xi||Qi;if(i||hy){const s=hy?hy._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return r&&bt(t)?t.call(i&&i.proxy):t}}function Tae(){return!!(Xi||Qi||hy)}const Iae={},Eae=()=>Object.create(Iae),Aae=e=>Object.getPrototypeOf(e)===Iae;function Oze(e,t,r,i=!1){const s={},n=Eae();e.propsDefaults=Object.create(null),$ae(e,t,s,n);for(const o in e.propsOptions[0])o in s||(s[o]=void 0);r?e.props=i?s:qoe(s):e.type.props?e.props=s:e.props=n,e.attrs=n}function Pze(e,t,r,i){const{props:s,attrs:n,vnode:{patchFlag:o}}=e,a=Rt(s),[l]=e.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let p=0;p<c.length;p++){let f=c[p];if(O$(e.emitsOptions,f))continue;const m=t[f];if(l)if(rr(n,f))m!==n[f]&&(n[f]=m,u=!0);else{const g=Ls(f);s[g]=vN(l,a,g,m,e,!1)}else m!==n[f]&&(n[f]=m,u=!0)}}}else{$ae(e,t,s,n)&&(u=!0);let c;for(const p in a)(!t||!rr(t,p)&&((c=un(p))===p||!rr(t,c)))&&(l?r&&(r[p]!==void 0||r[c]!==void 0)&&(s[p]=vN(l,a,p,void 0,e,!0)):delete s[p]);if(n!==a)for(const p in n)(!t||!rr(t,p))&&(delete n[p],u=!0)}u&&Ih(e.attrs,"set","")}function $ae(e,t,r,i){const[s,n]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(ly(l))continue;const u=t[l];let c;s&&rr(s,c=Ls(l))?!n||!n.includes(c)?r[c]=u:(a||(a={}))[c]=u:O$(e.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(n){const l=Rt(r),u=a||Jt;for(let c=0;c<n.length;c++){const p=n[c];r[p]=vN(s,l,p,u[p],e,!rr(u,p))}}return o}function vN(e,t,r,i,s,n){const o=e[r];if(o!=null){const a=rr(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&bt(l)){const{propsDefaults:u}=s;if(r in u)i=u[r];else{const c=Fy(s);i=u[r]=l.call(null,t),c()}}else i=l;s.ce&&s.ce._setProp(r,i)}o[0]&&(n&&!a?i=!1:o[1]&&(i===""||i===un(r))&&(i=!0))}return i}const Rze=new WeakMap;function Cae(e,t,r=!1){const i=r?Rze:t.propsCache,s=i.get(e);if(s)return s;const n=e.props,o={},a=[];let l=!1;if(!bt(e)){const c=p=>{l=!0;const[f,m]=Cae(p,t,!0);Tr(o,f),m&&a.push(...m)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!n&&!l)return mr(e)&&i.set(e,oy),oy;if(Qe(n))for(let c=0;c<n.length;c++){const p=Ls(n[c]);kq(p)&&(o[p]=Jt)}else if(n)for(const c in n){const p=Ls(c);if(kq(p)){const f=n[c],m=o[p]=Qe(f)||bt(f)?{type:f}:Tr({},f),g=m.type;let b=!1,w=!0;if(Qe(g))for(let S=0;S<g.length;++S){const M=g[S],x=bt(M)&&M.name;if(x==="Boolean"){b=!0;break}else x==="String"&&(w=!1)}else b=bt(g)&&g.name==="Boolean";m[0]=b,m[1]=w,(b||rr(m,"default"))&&a.push(p)}}const u=[o,a];return mr(e)&&i.set(e,u),u}function kq(e){return e[0]!=="$"&&!ly(e)}const Oae=e=>e[0]==="_"||e==="$stable",QF=e=>Qe(e)?e.map(co):[co(e)],Lze=(e,t,r)=>{if(t._n)return t;const i=Bi((...s)=>QF(t(...s)),r);return i._c=!1,i},Pae=(e,t,r)=>{const i=e._ctx;for(const s in e){if(Oae(s))continue;const n=e[s];if(bt(n))t[s]=Lze(s,n,i);else if(n!=null){const o=QF(n);t[s]=()=>o}}},Rae=(e,t)=>{const r=QF(t);e.slots.default=()=>r},Lae=(e,t,r)=>{for(const i in t)(r||i!=="_")&&(e[i]=t[i])},kze=(e,t,r)=>{const i=e.slots=Eae();if(e.vnode.shapeFlag&32){const s=t._;s?(Lae(i,t,r),r&&OF(i,"_",s,!0)):Pae(t,i)}else t&&Rae(e,t)},Nze=(e,t,r)=>{const{vnode:i,slots:s}=e;let n=!0,o=Jt;if(i.shapeFlag&32){const a=t._;a?r&&a===1?n=!1:Lae(s,t,r):(n=!t.$stable,Pae(t,s)),o=t}else t&&(Rae(e,t),o={default:1});if(n)for(const a in s)!Oae(a)&&o[a]==null&&delete s[a]},ds=Jae;function kae(e){return Dae(e)}function Nae(e){return Dae(e,YUe)}function Dae(e,t){const r=PF();r.__VUE__=!0;const{insert:i,remove:s,patchProp:n,createElement:o,createText:a,createComment:l,setText:u,setElementText:c,parentNode:p,nextSibling:f,setScopeId:m=Da,insertStaticContent:g}=e,b=(H,G,re,we=null,me=null,k=null,q=void 0,L=null,V=!!G.dynamicChildren)=>{if(H===G)return;H&&!Il(H,G)&&(we=gt(H),te(H,me,k,!0),H=null),G.patchFlag===-2&&(V=!1,G.dynamicChildren=null);const{type:W,ref:Q,shapeFlag:se}=G;switch(W){case Eh:w(H,G,re,we);break;case Ui:S(H,G,re,we);break;case py:H==null&&M(G,re,we,q);break;case xr:N(H,G,re,we,me,k,q,L,V);break;default:se&1?I(H,G,re,we,me,k,q,L,V):se&6?U(H,G,re,we,me,k,q,L,V):(se&64||se&128)&&W.process(H,G,re,we,me,k,q,L,V,He)}Q!=null&&me&&iE(Q,H&&H.ref,k,G||H,!G)},w=(H,G,re,we)=>{if(H==null)i(G.el=a(G.children),re,we);else{const me=G.el=H.el;G.children!==H.children&&u(me,G.children)}},S=(H,G,re,we)=>{H==null?i(G.el=l(G.children||""),re,we):G.el=H.el},M=(H,G,re,we)=>{[H.el,H.anchor]=g(H.children,G,re,we,H.el,H.anchor)},x=({el:H,anchor:G},re,we)=>{let me;for(;H&&H!==G;)me=f(H),i(H,re,we),H=me;i(G,re,we)},_=({el:H,anchor:G})=>{let re;for(;H&&H!==G;)re=f(H),s(H),H=re;s(G)},I=(H,G,re,we,me,k,q,L,V)=>{G.type==="svg"?q="svg":G.type==="math"&&(q="mathml"),H==null?E(G,re,we,me,k,q,L,V):O(H,G,me,k,q,L,V)},E=(H,G,re,we,me,k,q,L)=>{let V,W;const{props:Q,shapeFlag:se,transition:le,dirs:ee}=H;if(V=H.el=o(H.type,k,Q&&Q.is,Q),se&8?c(V,H.children):se&16&&C(H.children,V,null,we,me,gC(H,k),q,L),ee&&Eu(H,null,we,"created"),A(V,H,H.scopeId,q,we),Q){for(const Oe in Q)Oe!=="value"&&!ly(Oe)&&n(V,Oe,null,Q[Oe],k,we);"value"in Q&&n(V,"value",null,Q.value,k),(W=Q.onVnodeBeforeMount)&&no(W,we,H)}ee&&Eu(H,null,we,"beforeMount");const ne=Fae(me,le);ne&&le.beforeEnter(V),i(V,G,re),((W=Q&&Q.onVnodeMounted)||ne||ee)&&ds(()=>{W&&no(W,we,H),ne&&le.enter(V),ee&&Eu(H,null,we,"mounted")},me)},A=(H,G,re,we,me)=>{if(re&&m(H,re),we)for(let k=0;k<we.length;k++)m(H,we[k]);if(me){let k=me.subTree;if(G===k||oE(k.type)&&(k.ssContent===G||k.ssFallback===G)){const q=me.vnode;A(H,q,q.scopeId,q.slotScopeIds,me.parent)}}},C=(H,G,re,we,me,k,q,L,V=0)=>{for(let W=V;W<H.length;W++){const Q=H[W]=L?rd(H[W]):co(H[W]);b(null,Q,G,re,we,me,k,q,L)}},O=(H,G,re,we,me,k,q)=>{const L=G.el=H.el;let{patchFlag:V,dynamicChildren:W,dirs:Q}=G;V|=H.patchFlag&16;const se=H.props||Jt,le=G.props||Jt;let ee;if(re&&$f(re,!1),(ee=le.onVnodeBeforeUpdate)&&no(ee,re,G,H),Q&&Eu(G,H,re,"beforeUpdate"),re&&$f(re,!0),(se.innerHTML&&le.innerHTML==null||se.textContent&&le.textContent==null)&&c(L,""),W?R(H.dynamicChildren,W,L,re,we,gC(G,me),k):q||P(H,G,L,null,re,we,gC(G,me),k,!1),V>0){if(V&16)D(L,se,le,re,me);else if(V&2&&se.class!==le.class&&n(L,"class",null,le.class,me),V&4&&n(L,"style",se.style,le.style,me),V&8){const ne=G.dynamicProps;for(let Oe=0;Oe<ne.length;Oe++){const ke=ne[Oe],_t=se[ke],hr=le[ke];(hr!==_t||ke==="value")&&n(L,ke,_t,hr,me,re)}}V&1&&H.children!==G.children&&c(L,G.children)}else!q&&W==null&&D(L,se,le,re,me);((ee=le.onVnodeUpdated)||Q)&&ds(()=>{ee&&no(ee,re,G,H),Q&&Eu(G,H,re,"updated")},we)},R=(H,G,re,we,me,k,q)=>{for(let L=0;L<G.length;L++){const V=H[L],W=G[L],Q=V.el&&(V.type===xr||!Il(V,W)||V.shapeFlag&70)?p(V.el):re;b(V,W,Q,null,we,me,k,q,!0)}},D=(H,G,re,we,me)=>{if(G!==re){if(G!==Jt)for(const k in G)!ly(k)&&!(k in re)&&n(H,k,G[k],null,me,we);for(const k in re){if(ly(k))continue;const q=re[k],L=G[k];q!==L&&k!=="value"&&n(H,k,L,q,me,we)}"value"in re&&n(H,"value",G.value,re.value,me)}},N=(H,G,re,we,me,k,q,L,V)=>{const W=G.el=H?H.el:a(""),Q=G.anchor=H?H.anchor:a("");let{patchFlag:se,dynamicChildren:le,slotScopeIds:ee}=G;ee&&(L=L?L.concat(ee):ee),H==null?(i(W,re,we),i(Q,re,we),C(G.children||[],re,Q,me,k,q,L,V)):se>0&&se&64&&le&&H.dynamicChildren?(R(H.dynamicChildren,le,re,me,k,q,L),(G.key!=null||me&&G===me.subTree)&&e9(H,G,!0)):P(H,G,re,Q,me,k,q,L,V)},U=(H,G,re,we,me,k,q,L,V)=>{G.slotScopeIds=L,H==null?G.shapeFlag&512?me.ctx.activate(G,re,we,q,V):J(G,re,we,me,k,q,V):y(H,G,V)},J=(H,G,re,we,me,k,q)=>{const L=H.component=Qae(H,we,me);if($S(H)&&(L.ctx.renderer=He),tle(L,!1,q),L.asyncDep){if(me&&me.registerDep(L,T,q),!H.el){const V=L.subTree=jt(Ui);S(null,V,G,re)}}else T(L,H,G,re,me,k,q)},y=(H,G,re)=>{const we=G.component=H.component;if(qze(H,G,re))if(we.asyncDep&&!we.asyncResolved){$(we,G,re);return}else we.next=G,we.update();else G.el=H.el,we.vnode=G},T=(H,G,re,we,me,k,q)=>{const L=()=>{if(H.isMounted){let{next:se,bu:le,u:ee,parent:ne,vnode:Oe}=H;{const _i=jae(H);if(_i){se&&(se.el=Oe.el,$(H,se,q)),_i.asyncDep.then(()=>{H.isUnmounted||L()});return}}let ke=se,_t;$f(H,!1),se?(se.el=Oe.el,$(H,se,q)):se=Oe,le&&uy(le),(_t=se.props&&se.props.onVnodeBeforeUpdate)&&no(_t,ne,se,Oe),$f(H,!0);const hr=b3(H),Gr=H.subTree;H.subTree=hr,b(Gr,hr,p(Gr.el),gt(Gr),H,me,k),se.el=hr.el,ke===null&&t9(H,hr.el),ee&&ds(ee,me),(_t=se.props&&se.props.onVnodeUpdated)&&ds(()=>no(_t,ne,se,Oe),me)}else{let se;const{el:le,props:ee}=G,{bm:ne,m:Oe,parent:ke,root:_t,type:hr}=H,Gr=Md(G);if($f(H,!1),ne&&uy(ne),!Gr&&(se=ee&&ee.onVnodeBeforeMount)&&no(se,ke,G),$f(H,!0),le&&zt){const _i=()=>{H.subTree=b3(H),zt(le,H.subTree,H,me,null)};Gr&&hr.__asyncHydrate?hr.__asyncHydrate(le,H,_i):_i()}else{_t.ce&&_t.ce._injectChildStyle(hr);const _i=H.subTree=b3(H);b(null,_i,re,we,H,me,k),G.el=_i.el}if(Oe&&ds(Oe,me),!Gr&&(se=ee&&ee.onVnodeMounted)){const _i=G;ds(()=>no(se,ke,_i),me)}(G.shapeFlag&256||ke&&Md(ke.vnode)&&ke.vnode.shapeFlag&256)&&H.a&&ds(H.a,me),H.isMounted=!0,G=re=we=null}};H.scope.on();const V=H.effect=new g2(L);H.scope.off();const W=H.update=V.run.bind(V),Q=H.job=V.runIfDirty.bind(V);Q.i=H,Q.id=H.uid,V.scheduler=()=>qF(Q),$f(H,!0),W()},$=(H,G,re)=>{G.component=H;const we=H.vnode.props;H.vnode=G,H.next=null,Pze(H,G.props,we,re),Nze(H,G.children,re),af(),Tq(H),lf()},P=(H,G,re,we,me,k,q,L,V=!1)=>{const W=H&&H.children,Q=H?H.shapeFlag:0,se=G.children,{patchFlag:le,shapeFlag:ee}=G;if(le>0){if(le&128){X(W,se,re,we,me,k,q,L,V);return}else if(le&256){z(W,se,re,we,me,k,q,L,V);return}}ee&8?(Q&16&&$e(W,me,k),se!==W&&c(re,se)):Q&16?ee&16?X(W,se,re,we,me,k,q,L,V):$e(W,me,k,!0):(Q&8&&c(re,""),ee&16&&C(se,re,we,me,k,q,L,V))},z=(H,G,re,we,me,k,q,L,V)=>{H=H||oy,G=G||oy;const W=H.length,Q=G.length,se=Math.min(W,Q);let le;for(le=0;le<se;le++){const ee=G[le]=V?rd(G[le]):co(G[le]);b(H[le],ee,re,null,me,k,q,L,V)}W>Q?$e(H,me,k,!0,!1,se):C(G,re,we,me,k,q,L,V,se)},X=(H,G,re,we,me,k,q,L,V)=>{let W=0;const Q=G.length;let se=H.length-1,le=Q-1;for(;W<=se&&W<=le;){const ee=H[W],ne=G[W]=V?rd(G[W]):co(G[W]);if(Il(ee,ne))b(ee,ne,re,null,me,k,q,L,V);else break;W++}for(;W<=se&&W<=le;){const ee=H[se],ne=G[le]=V?rd(G[le]):co(G[le]);if(Il(ee,ne))b(ee,ne,re,null,me,k,q,L,V);else break;se--,le--}if(W>se){if(W<=le){const ee=le+1,ne=ee<Q?G[ee].el:we;for(;W<=le;)b(null,G[W]=V?rd(G[W]):co(G[W]),re,ne,me,k,q,L,V),W++}}else if(W>le)for(;W<=se;)te(H[W],me,k,!0),W++;else{const ee=W,ne=W,Oe=new Map;for(W=ne;W<=le;W++){const Ke=G[W]=V?rd(G[W]):co(G[W]);Ke.key!=null&&Oe.set(Ke.key,W)}let ke,_t=0;const hr=le-ne+1;let Gr=!1,_i=0;const ve=new Array(hr);for(W=0;W<hr;W++)ve[W]=0;for(W=ee;W<=se;W++){const Ke=H[W];if(_t>=hr){te(Ke,me,k,!0);continue}let Ct;if(Ke.key!=null)Ct=Oe.get(Ke.key);else for(ke=ne;ke<=le;ke++)if(ve[ke-ne]===0&&Il(Ke,G[ke])){Ct=ke;break}Ct===void 0?te(Ke,me,k,!0):(ve[Ct-ne]=W+1,Ct>=_i?_i=Ct:Gr=!0,b(Ke,G[Ct],re,null,me,k,q,L,V),_t++)}const Ze=Gr?Dze(ve):oy;for(ke=Ze.length-1,W=hr-1;W>=0;W--){const Ke=ne+W,Ct=G[Ke],kt=Ke+1<Q?G[Ke+1].el:we;ve[W]===0?b(null,Ct,re,kt,me,k,q,L,V):Gr&&(ke<0||W!==Ze[ke]?ae(Ct,re,kt,2):ke--)}}},ae=(H,G,re,we,me=null)=>{const{el:k,type:q,transition:L,children:V,shapeFlag:W}=H;if(W&6){ae(H.component.subTree,G,re,we);return}if(W&128){H.suspense.move(G,re,we);return}if(W&64){q.move(H,G,re,He);return}if(q===xr){i(k,G,re);for(let se=0;se<V.length;se++)ae(V[se],G,re,we);i(H.anchor,G,re);return}if(q===py){x(H,G,re);return}if(we!==2&&W&1&&L)if(we===0)L.beforeEnter(k),i(k,G,re),ds(()=>L.enter(k),me);else{const{leave:se,delayLeave:le,afterLeave:ee}=L,ne=()=>i(k,G,re),Oe=()=>{se(k,()=>{ne(),ee&&ee()})};le?le(k,ne,Oe):Oe()}else i(k,G,re)},te=(H,G,re,we=!1,me=!1)=>{const{type:k,props:q,ref:L,children:V,dynamicChildren:W,shapeFlag:Q,patchFlag:se,dirs:le,cacheIndex:ee}=H;if(se===-2&&(me=!1),L!=null&&iE(L,null,re,H,!0),ee!=null&&(G.renderCache[ee]=void 0),Q&256){G.ctx.deactivate(H);return}const ne=Q&1&&le,Oe=!Md(H);let ke;if(Oe&&(ke=q&&q.onVnodeBeforeUnmount)&&no(ke,G,H),Q&6)De(H.component,re,we);else{if(Q&128){H.suspense.unmount(re,we);return}ne&&Eu(H,null,G,"beforeUnmount"),Q&64?H.type.remove(H,G,re,He,we):W&&!W.hasOnce&&(k!==xr||se>0&&se&64)?$e(W,G,re,!1,!0):(k===xr&&se&384||!me&&Q&16)&&$e(V,G,re),we&&ye(H)}(Oe&&(ke=q&&q.onVnodeUnmounted)||ne)&&ds(()=>{ke&&no(ke,G,H),ne&&Eu(H,null,G,"unmounted")},re)},ye=H=>{const{type:G,el:re,anchor:we,transition:me}=H;if(G===xr){Me(re,we);return}if(G===py){_(H);return}const k=()=>{s(re),me&&!me.persisted&&me.afterLeave&&me.afterLeave()};if(H.shapeFlag&1&&me&&!me.persisted){const{leave:q,delayLeave:L}=me,V=()=>q(re,k);L?L(H.el,k,V):V()}else k()},Me=(H,G)=>{let re;for(;H!==G;)re=f(H),s(H),H=re;s(G)},De=(H,G,re)=>{const{bum:we,scope:me,job:k,subTree:q,um:L,m:V,a:W}=H;nE(V),nE(W),we&&uy(we),me.stop(),k&&(k.flags|=8,te(q,H,G,re)),L&&ds(L,G),ds(()=>{H.isUnmounted=!0},G),G&&G.pendingBranch&&!G.isUnmounted&&H.asyncDep&&!H.asyncResolved&&H.suspenseId===G.pendingId&&(G.deps--,G.deps===0&&G.resolve())},$e=(H,G,re,we=!1,me=!1,k=0)=>{for(let q=k;q<H.length;q++)te(H[q],G,re,we,me)},gt=H=>{if(H.shapeFlag&6)return gt(H.component.subTree);if(H.shapeFlag&128)return H.suspense.next();const G=f(H.anchor||H.el),re=G&&G[rae];return re?f(re):G};let dt=!1;const Je=(H,G,re)=>{H==null?G._vnode&&te(G._vnode,null,null,!0):b(G._vnode||null,H,G,null,null,null,re),G._vnode=H,dt||(dt=!0,Tq(),rE(),dt=!1)},He={p:b,um:te,m:ae,r:ye,mt:J,mc:C,pc:P,pbc:R,n:gt,o:e};let mt,zt;return t&&([mt,zt]=t(He)),{render:Je,hydrate:mt,createApp:Cze(Je,mt)}}function gC({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function $f({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Fae(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function e9(e,t,r=!1){const i=e.children,s=t.children;if(Qe(i)&&Qe(s))for(let n=0;n<i.length;n++){const o=i[n];let a=s[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[n]=rd(s[n]),a.el=o.el),!r&&a.patchFlag!==-2&&e9(o,a)),a.type===Eh&&(a.el=o.el)}}function Dze(e){const t=e.slice(),r=[0];let i,s,n,o,a;const l=e.length;for(i=0;i<l;i++){const u=e[i];if(u!==0){if(s=r[r.length-1],e[s]<u){t[i]=s,r.push(i);continue}for(n=0,o=r.length-1;n<o;)a=n+o>>1,e[r[a]]<u?n=a+1:o=a;u<e[r[n]]&&(n>0&&(t[i]=r[n-1]),r[n]=i)}}for(n=r.length,o=r[n-1];n-- >0;)r[n]=o,o=t[o];return r}function jae(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:jae(t)}function nE(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Vae=Symbol.for("v-scx"),Uae=()=>vs(Vae);function Fze(e,t){return OS(e,null,t)}function zae(e,t){return OS(e,null,{flush:"post"})}function Gae(e,t){return OS(e,null,{flush:"sync"})}function ks(e,t,r){return OS(e,t,r)}function OS(e,t,r=Jt){const{immediate:i,deep:s,flush:n,once:o}=r,a=Tr({},r);let l;if(PS)if(n==="sync"){const f=Uae();l=f.__watcherHandles||(f.__watcherHandles=[])}else if(!t||i)a.once=!0;else{const f=()=>{};return f.stop=Da,f.resume=Da,f.pause=Da,f}const u=Xi;a.call=(f,m,g)=>Ba(f,u,m,g);let c=!1;n==="post"?a.scheduler=f=>{ds(f,u&&u.suspense)}:n!=="sync"&&(c=!0,a.scheduler=(f,m)=>{m?f():qF(f)}),a.augmentJob=f=>{t&&(f.flags|=4),c&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const p=OUe(e,t,a);return l&&l.push(p),p}function jze(e,t,r){const i=this.proxy,s=fr(e)?e.includes(".")?Bae(i,e):()=>i[e]:e.bind(i,i);let n;bt(t)?n=t:(n=t.handler,r=t);const o=Fy(this),a=OS(s,n.bind(i),r);return o(),a}function Bae(e,t){const r=t.split(".");return()=>{let i=e;for(let s=0;s<r.length&&i;s++)i=i[r[s]];return i}}function Vze(e,t,r=Jt){const i=rs(),s=Ls(t),n=un(t),o=qae(e,t),a=Woe((l,u)=>{let c,p=Jt,f;return Gae(()=>{const m=e[t];nn(c,m)&&(c=m,u())}),{get(){return l(),r.get?r.get(c):c},set(m){const g=r.set?r.set(m):m;if(!nn(g,c)&&!(p!==Jt&&nn(m,p)))return;const b=i.vnode.props;b&&(t in b||s in b||n in b)&&(`onUpdate:${t}`in b||`onUpdate:${s}`in b||`onUpdate:${n}`in b)||(c=m,u()),i.emit(`update:${t}`,g),nn(m,g)&&nn(m,p)&&!nn(g,f)&&u(),p=m,f=g}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||Jt:a,done:!1}:{done:!0}}}},a}const qae=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ls(t)}Modifiers`]||e[`${un(t)}Modifiers`];function Uze(e,t,...r){if(e.isUnmounted)return;const i=e.vnode.props||Jt;let s=r;const n=t.startsWith("update:"),o=n&&qae(i,t.slice(7));o&&(o.trim&&(s=r.map(c=>fr(c)?c.trim():c)),o.number&&(s=r.map(m2)));let a,l=i[a=yv(t)]||i[a=yv(Ls(t))];!l&&n&&(l=i[a=yv(un(t))]),l&&Ba(l,e,6,s);const u=i[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Ba(u,e,6,s)}}function Hae(e,t,r=!1){const i=t.emitsCache,s=i.get(e);if(s!==void 0)return s;const n=e.emits;let o={},a=!1;if(!bt(e)){const l=u=>{const c=Hae(u,t,!0);c&&(a=!0,Tr(o,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!n&&!a?(mr(e)&&i.set(e,null),null):(Qe(n)?n.forEach(l=>o[l]=null):Tr(o,n),mr(e)&&i.set(e,o),o)}function O$(e,t){return!e||!R1(t)?!1:(t=t.slice(2).replace(/Once$/,""),rr(e,t[0].toLowerCase()+t.slice(1))||rr(e,un(t))||rr(e,t))}function b3(e){const{type:t,vnode:r,proxy:i,withProxy:s,propsOptions:[n],slots:o,attrs:a,emit:l,render:u,renderCache:c,props:p,data:f,setupState:m,ctx:g,inheritAttrs:b}=e,w=S2(e);let S,M;try{if(r.shapeFlag&4){const _=s||i,I=_;S=co(u.call(I,_,c,p,m,f,g)),M=a}else{const _=t;S=co(_.length>1?_(p,{attrs:a,slots:o,emit:l}):_(p,null)),M=t.props?a:Gze(a)}}catch(_){v_.length=0,ig(_,e,1),S=jt(Ui)}let x=S;if(M&&b!==!1){const _=Object.keys(M),{shapeFlag:I}=x;_.length&&I&7&&(n&&_.some(m$)&&(M=Bze(M,n)),x=nc(x,M,!1,!0))}return r.dirs&&(x=nc(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(r.dirs):r.dirs),r.transition&&Dh(x,r.transition),S=x,S2(w),S}function zze(e,t=!0){let r;for(let i=0;i<e.length;i++){const s=e[i];if(sc(s)){if(s.type!==Ui||s.children==="v-if"){if(r)return;r=s}}else return}return r}const Gze=e=>{let t;for(const r in e)(r==="class"||r==="style"||R1(r))&&((t||(t={}))[r]=e[r]);return t},Bze=(e,t)=>{const r={};for(const i in e)(!m$(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r};function qze(e,t,r){const{props:i,children:s,component:n}=e,{props:o,children:a,patchFlag:l}=t,u=n.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?Nq(i,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let p=0;p<c.length;p++){const f=c[p];if(o[f]!==i[f]&&!O$(u,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Nq(i,o,u):!0:!!o;return!1}function Nq(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let s=0;s<i.length;s++){const n=i[s];if(t[n]!==e[n]&&!O$(r,n))return!0}return!1}function t9({vnode:e,parent:t},r){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=r,t=t.parent;else break}}const oE=e=>e.__isSuspense;let bN=0;const Hze={name:"Suspense",__isSuspense:!0,process(e,t,r,i,s,n,o,a,l,u){if(e==null)Jze(t,r,i,s,n,o,a,l,u);else{if(n&&n.deps>0&&!e.suspense.isInFallback){t.suspense=e.suspense,t.suspense.vnode=t,t.el=e.el;return}Zze(e,t,r,i,s,o,a,l,u)}},hydrate:Yze,normalize:Kze},Wze=Hze;function M2(e,t){const r=e.props&&e.props[t];bt(r)&&r()}function Jze(e,t,r,i,s,n,o,a,l){const{p:u,o:{createElement:c}}=l,p=c("div"),f=e.suspense=Wae(e,s,i,t,p,r,n,o,a,l);u(null,f.pendingBranch=e.ssContent,p,null,i,f,n,o),f.deps>0?(M2(e,"onPending"),M2(e,"onFallback"),u(null,e.ssFallback,t,r,i,null,n,o),vv(f,e.ssFallback)):f.resolve(!1,!0)}function Zze(e,t,r,i,s,n,o,a,{p:l,um:u,o:{createElement:c}}){const p=t.suspense=e.suspense;p.vnode=t,t.el=e.el;const f=t.ssContent,m=t.ssFallback,{activeBranch:g,pendingBranch:b,isInFallback:w,isHydrating:S}=p;if(b)p.pendingBranch=f,Il(f,b)?(l(b,f,p.hiddenContainer,null,s,p,n,o,a),p.deps<=0?p.resolve():w&&(S||(l(g,m,r,i,s,null,n,o,a),vv(p,m)))):(p.pendingId=bN++,S?(p.isHydrating=!1,p.activeBranch=b):u(b,s,p),p.deps=0,p.effects.length=0,p.hiddenContainer=c("div"),w?(l(null,f,p.hiddenContainer,null,s,p,n,o,a),p.deps<=0?p.resolve():(l(g,m,r,i,s,null,n,o,a),vv(p,m))):g&&Il(f,g)?(l(g,f,r,i,s,p,n,o,a),p.resolve(!0)):(l(null,f,p.hiddenContainer,null,s,p,n,o,a),p.deps<=0&&p.resolve()));else if(g&&Il(f,g))l(g,f,r,i,s,p,n,o,a),vv(p,f);else if(M2(t,"onPending"),p.pendingBranch=f,f.shapeFlag&512?p.pendingId=f.component.suspenseId:p.pendingId=bN++,l(null,f,p.hiddenContainer,null,s,p,n,o,a),p.deps<=0)p.resolve();else{const{timeout:M,pendingId:x}=p;M>0?setTimeout(()=>{p.pendingId===x&&p.fallback(m)},M):M===0&&p.fallback(m)}}function Wae(e,t,r,i,s,n,o,a,l,u,c=!1){const{p,m:f,um:m,n:g,o:{parentNode:b,remove:w}}=u;let S;const M=Xze(e);M&&t&&t.pendingBranch&&(S=t.pendingId,t.deps++);const x=e.props?y2(e.props.timeout):void 0,_=n,I={vnode:e,parent:t,parentComponent:r,namespace:o,container:i,hiddenContainer:s,deps:0,pendingId:bN++,timeout:typeof x=="number"?x:-1,activeBranch:null,pendingBranch:null,isInFallback:!c,isHydrating:c,isUnmounted:!1,effects:[],resolve(E=!1,A=!1){const{vnode:C,activeBranch:O,pendingBranch:R,pendingId:D,effects:N,parentComponent:U,container:J}=I;let y=!1;I.isHydrating?I.isHydrating=!1:E||(y=O&&R.transition&&R.transition.mode==="out-in",y&&(O.transition.afterLeave=()=>{D===I.pendingId&&(f(R,J,n===_?g(O):n,0),tE(N))}),O&&(b(O.el)===J&&(n=g(O)),m(O,U,I,!0)),y||f(R,J,n,0)),vv(I,R),I.pendingBranch=null,I.isInFallback=!1;let T=I.parent,$=!1;for(;T;){if(T.pendingBranch){T.effects.push(...N),$=!0;break}T=T.parent}!$&&!y&&tE(N),I.effects=[],M&&t&&t.pendingBranch&&S===t.pendingId&&(t.deps--,t.deps===0&&!A&&t.resolve()),M2(C,"onResolve")},fallback(E){if(!I.pendingBranch)return;const{vnode:A,activeBranch:C,parentComponent:O,container:R,namespace:D}=I;M2(A,"onFallback");const N=g(C),U=()=>{I.isInFallback&&(p(null,E,R,N,O,null,D,a,l),vv(I,E))},J=E.transition&&E.transition.mode==="out-in";J&&(C.transition.afterLeave=U),I.isInFallback=!0,m(C,O,null,!0),J||U()},move(E,A,C){I.activeBranch&&f(I.activeBranch,E,A,C),I.container=E},next(){return I.activeBranch&&g(I.activeBranch)},registerDep(E,A,C){const O=!!I.pendingBranch;O&&I.deps++;const R=E.vnode.el;E.asyncDep.catch(D=>{ig(D,E,0)}).then(D=>{if(E.isUnmounted||I.isUnmounted||I.pendingId!==E.suspenseId)return;E.asyncResolved=!0;const{vnode:N}=E;xN(E,D,!1),R&&(N.el=R);const U=!R&&E.subTree.el;A(E,N,b(R||E.subTree.el),R?null:g(E.subTree),I,o,C),U&&w(U),t9(E,N.el),O&&--I.deps===0&&I.resolve()})},unmount(E,A){I.isUnmounted=!0,I.activeBranch&&m(I.activeBranch,r,E,A),I.pendingBranch&&m(I.pendingBranch,r,E,A)}};return I}function Yze(e,t,r,i,s,n,o,a,l){const u=t.suspense=Wae(t,i,r,e.parentNode,document.createElement("div"),null,s,n,o,a,!0),c=l(e,u.pendingBranch=t.ssContent,r,u,n,o);return u.deps===0&&u.resolve(!1,!0),c}function Kze(e){const{shapeFlag:t,children:r}=e,i=t&32;e.ssContent=Dq(i?r.default:r),e.ssFallback=i?Dq(r.fallback):jt(Ui)}function Dq(e){let t;if(bt(e)){const r=Dy&&e._c;r&&(e._d=!1,Ae()),e=e(),r&&(e._d=!0,t=dn,Zae())}return Qe(e)&&(e=zze(e)),e=co(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(r=>r!==e)),e}function Jae(e,t){t&&t.pendingBranch?Qe(e)?t.effects.push(...e):t.effects.push(e):tE(e)}function vv(e,t){e.activeBranch=t;const{vnode:r,parentComponent:i}=e;let s=t.el;for(;!s&&t.component;)t=t.component.subTree,s=t.el;r.el=s,i&&i.subTree===r&&(i.vnode.el=s,t9(i,s))}function Xze(e){const t=e.props&&e.props.suspensible;return t!=null&&t!==!1}const xr=Symbol.for("v-fgt"),Eh=Symbol.for("v-txt"),Ui=Symbol.for("v-cmt"),py=Symbol.for("v-stc"),v_=[];let dn=null;function Ae(e=!1){v_.push(dn=e?null:[])}function Zae(){v_.pop(),dn=v_[v_.length-1]||null}let Dy=1;function wN(e){Dy+=e,e<0&&dn&&(dn.hasOnce=!0)}function Yae(e){return e.dynamicChildren=Dy>0?dn||oy:null,Zae(),Dy>0&&dn&&dn.push(e),e}function Be(e,t,r,i,s,n){return Yae(Te(e,t,r,i,s,n,!0))}function Vr(e,t,r,i,s){return Yae(jt(e,t,r,i,s,!0))}function sc(e){return e?e.__v_isVNode===!0:!1}function Il(e,t){return e.type===t.type&&e.key===t.key}function Qze(e){}const Kae=({key:e})=>e??null,w3=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?fr(e)||ir(e)||bt(e)?{i:Qi,r:e,k:t,f:!!r}:e:null);function Te(e,t=null,r=null,i=0,s=null,n=e===xr?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Kae(t),ref:t&&w3(t),scopeId:E$,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Qi};return a?(r9(l,r),n&128&&e.normalize(l)):r&&(l.shapeFlag|=fr(r)?8:16),Dy>0&&!o&&dn&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&dn.push(l),l}const jt=eGe;function eGe(e,t=null,r=null,i=0,s=null,n=!1){if((!e||e===bae)&&(e=Ui),sc(e)){const a=nc(e,t,!0);return r&&r9(a,r),Dy>0&&!n&&dn&&(a.shapeFlag&6?dn[dn.indexOf(e)]=a:dn.push(a)),a.patchFlag=-2,a}if(lGe(e)&&(e=e.__vccOpts),t){t=Xae(t);let{class:a,style:l}=t;a&&!fr(a)&&(t.class=wi(a)),mr(l)&&(I$(l)&&!Qe(l)&&(l=Tr({},l)),t.style=of(l))}const o=fr(e)?1:oE(e)?128:iae(e)?64:mr(e)?4:bt(e)?2:0;return Te(e,t,r,i,s,o,n,!0)}function Xae(e){return e?I$(e)||Aae(e)?Tr({},e):e:null}function nc(e,t,r=!1,i=!1){const{props:s,ref:n,patchFlag:o,children:a,transition:l}=e,u=t?i9(s||{},t):s,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Kae(u),ref:t&&t.ref?r&&n?Qe(n)?n.concat(w3(t)):[n,w3(t)]:w3(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==xr?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&nc(e.ssContent),ssFallback:e.ssFallback&&nc(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&i&&Dh(c,l.clone(c)),c}function Ah(e=" ",t=0){return jt(Eh,null,e,t)}function tGe(e,t){const r=jt(py,null,e);return r.staticCount=t,r}function Zr(e="",t=!1){return t?(Ae(),Vr(Ui,null,e)):jt(Ui,null,e)}function co(e){return e==null||typeof e=="boolean"?jt(Ui):Qe(e)?jt(xr,null,e.slice()):sc(e)?rd(e):jt(Eh,null,String(e))}function rd(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:nc(e)}function r9(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Qe(t))r=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),r9(e,s()),s._c&&(s._d=!0));return}else{r=32;const s=t._;!s&&!Aae(t)?t._ctx=Qi:s===3&&Qi&&(Qi.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else bt(t)?(t={default:t,_ctx:Qi},r=32):(t=String(t),i&64?(r=16,t=[Ah(t)]):r=8);e.children=t,e.shapeFlag|=r}function i9(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=wi([t.class,i.class]));else if(s==="style")t.style=of([t.style,i.style]);else if(R1(s)){const n=t[s],o=i[s];o&&n!==o&&!(Qe(n)&&n.includes(o))&&(t[s]=n?[].concat(n,o):o)}else s!==""&&(t[s]=i[s])}return t}function no(e,t,r,i=null){Ba(e,t,7,[r,i])}const rGe=xae();let iGe=0;function Qae(e,t,r){const i=e.type,s=(t?t.appContext:e.appContext)||rGe,n={uid:iGe++,vnode:e,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new kF(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Cae(i,s),emitsOptions:Hae(i,s),emit:null,emitted:null,propsDefaults:Jt,inheritAttrs:i.inheritAttrs,ctx:Jt,data:Jt,props:Jt,attrs:Jt,slots:Jt,refs:Jt,setupState:Jt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=Uze.bind(null,n),e.ce&&e.ce(n),n}let Xi=null;const rs=()=>Xi||Qi;let aE,_N;{const e=PF(),t=(r,i)=>{let s;return(s=e[r])||(s=e[r]=[]),s.push(i),n=>{s.length>1?s.forEach(o=>o(n)):s[0](n)}};aE=t("__VUE_INSTANCE_SETTERS__",r=>Xi=r),_N=t("__VUE_SSR_SETTERS__",r=>PS=r)}const Fy=e=>{const t=Xi;return aE(e),e.scope.on(),()=>{e.scope.off(),aE(t)}},SN=()=>{Xi&&Xi.scope.off(),aE(null)};function ele(e){return e.vnode.shapeFlag&4}let PS=!1;function tle(e,t=!1,r=!1){t&&_N(t);const{props:i,children:s}=e.vnode,n=ele(e);Oze(e,i,n,t),kze(e,s,r);const o=n?sGe(e,t):void 0;return t&&_N(!1),o}function sGe(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,mN);const{setup:i}=r;if(i){const s=e.setupContext=i.length>1?ile(e):null,n=Fy(e);af();const o=k1(i,e,0,[e.props,s]);if(lf(),n(),g$(o)){if(Md(e)||JF(e),o.then(SN,SN),t)return o.then(a=>{xN(e,a,t)}).catch(a=>{ig(a,e,0)});e.asyncDep=o}else xN(e,o,t)}else rle(e,t)}function xN(e,t,r){bt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:mr(t)&&(e.setupState=GF(t)),rle(e,r)}let lE,MN;function nGe(e){lE=e,MN=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,cze))}}const oGe=()=>!lE;function rle(e,t,r){const i=e.type;if(!e.render){if(!t&&lE&&!i.render){const s=i.template||XF(e).template;if(s){const{isCustomElement:n,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,u=Tr(Tr({isCustomElement:n,delimiters:a},o),l);i.render=lE(s,u)}}e.render=i.render||Da,MN&&MN(e)}{const s=Fy(e);af();try{Mze(e)}finally{lf(),s()}}}const aGe={get(e,t){return gn(e,"get",""),e[t]}};function ile(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,aGe),slots:e.slots,emit:e.emit,expose:t}}function RS(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(GF(Gi(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in g_)return g_[r](e)},has(t,r){return r in t||r in g_}})):e.proxy}function TN(e,t=!0){return bt(e)?e.displayName||e.name:e.name||t&&e.__name}function lGe(e){return bt(e)&&"__vccOpts"in e}const Bt=(e,t)=>EUe(e,t,PS);function Cl(e,t,r){const i=arguments.length;return i===2?mr(t)&&!Qe(t)?sc(t)?jt(e,null,[t]):jt(e,t):jt(e,null,t):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&sc(r)&&(r=[r]),jt(e,t,r))}function uGe(){}function cGe(e,t,r,i){const s=r[i];if(s&&sle(s,e))return s;const n=t();return n.memo=e.slice(),n.cacheIndex=i,r[i]=n}function sle(e,t){const r=e.memo;if(r.length!=t.length)return!1;for(let i=0;i<r.length;i++)if(nn(r[i],t[i]))return!1;return Dy>0&&dn&&dn.push(e),!0}const nle="3.5.9",hGe=Da,pGe=NUe,dGe=w0,fGe=tae,mGe={createComponentInstance:Qae,setupComponent:tle,renderComponentRoot:b3,setCurrentRenderingInstance:S2,isVNode:sc,normalizeVNode:co,getComponentPublicInstance:RS,ensureValidVNode:KF,pushWarningContext:PUe,popWarningContext:RUe},yGe=mGe,gGe=null,vGe=null,bGe=null;/**
* @vue/runtime-dom v3.5.9
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let IN;const Fq=typeof window<"u"&&window.trustedTypes;if(Fq)try{IN=Fq.createPolicy("vue",{createHTML:e=>e})}catch{}const ole=IN?e=>IN.createHTML(e):e=>e,wGe="http://www.w3.org/2000/svg",_Ge="http://www.w3.org/1998/Math/MathML",lh=typeof document<"u"?document:null,jq=lh&&lh.createElement("template"),SGe={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const s=t==="svg"?lh.createElementNS(wGe,e):t==="mathml"?lh.createElementNS(_Ge,e):r?lh.createElement(e,{is:r}):lh.createElement(e);return e==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:e=>lh.createTextNode(e),createComment:e=>lh.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>lh.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,i,s,n){const o=r?r.previousSibling:t.lastChild;if(s&&(s===n||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),r),!(s===n||!(s=s.nextSibling)););else{jq.innerHTML=ole(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const a=jq.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},ap="transition",vb="animation",Gv=Symbol("_vtc"),ale={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lle=Tr({},WF,ale),xGe=e=>(e.displayName="Transition",e.props=lle,e),s9=xGe((e,{slots:t})=>Cl(lae,ule(e),t)),Cf=(e,t=[])=>{Qe(e)?e.forEach(r=>r(...t)):e&&e(...t)},Vq=e=>e?Qe(e)?e.some(t=>t.length>1):e.length>1:!1;function ule(e){const t={};for(const N in e)N in ale||(t[N]=e[N]);if(e.css===!1)return t;const{name:r="v",type:i,duration:s,enterFromClass:n=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:l=n,appearActiveClass:u=o,appearToClass:c=a,leaveFromClass:p=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:m=`${r}-leave-to`}=e,g=MGe(s),b=g&&g[0],w=g&&g[1],{onBeforeEnter:S,onEnter:M,onEnterCancelled:x,onLeave:_,onLeaveCancelled:I,onBeforeAppear:E=S,onAppear:A=M,onAppearCancelled:C=x}=t,O=(N,U,J)=>{Gp(N,U?c:a),Gp(N,U?u:o),J&&J()},R=(N,U)=>{N._isLeaving=!1,Gp(N,p),Gp(N,m),Gp(N,f),U&&U()},D=N=>(U,J)=>{const y=N?A:M,T=()=>O(U,N,J);Cf(y,[U,T]),Uq(()=>{Gp(U,N?l:n),rh(U,N?c:a),Vq(y)||zq(U,i,b,T)})};return Tr(t,{onBeforeEnter(N){Cf(S,[N]),rh(N,n),rh(N,o)},onBeforeAppear(N){Cf(E,[N]),rh(N,l),rh(N,u)},onEnter:D(!1),onAppear:D(!0),onLeave(N,U){N._isLeaving=!0;const J=()=>R(N,U);rh(N,p),rh(N,f),hle(),Uq(()=>{N._isLeaving&&(Gp(N,p),rh(N,m),Vq(_)||zq(N,i,w,J))}),Cf(_,[N,J])},onEnterCancelled(N){O(N,!1),Cf(x,[N])},onAppearCancelled(N){O(N,!0),Cf(C,[N])},onLeaveCancelled(N){R(N),Cf(I,[N])}})}function MGe(e){if(e==null)return null;if(mr(e))return[vC(e.enter),vC(e.leave)];{const t=vC(e);return[t,t]}}function vC(e){return y2(e)}function rh(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Gv]||(e[Gv]=new Set)).add(t)}function Gp(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const r=e[Gv];r&&(r.delete(t),r.size||(e[Gv]=void 0))}function Uq(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let TGe=0;function zq(e,t,r,i){const s=e._endId=++TGe,n=()=>{s===e._endId&&i()};if(r!=null)return setTimeout(n,r);const{type:o,timeout:a,propCount:l}=cle(e,t);if(!o)return i();const u=o+"end";let c=0;const p=()=>{e.removeEventListener(u,f),n()},f=m=>{m.target===e&&++c>=l&&p()};setTimeout(()=>{c<l&&p()},a+1),e.addEventListener(u,f)}function cle(e,t){const r=window.getComputedStyle(e),i=g=>(r[g]||"").split(", "),s=i(`${ap}Delay`),n=i(`${ap}Duration`),o=Gq(s,n),a=i(`${vb}Delay`),l=i(`${vb}Duration`),u=Gq(a,l);let c=null,p=0,f=0;t===ap?o>0&&(c=ap,p=o,f=n.length):t===vb?u>0&&(c=vb,p=u,f=l.length):(p=Math.max(o,u),c=p>0?o>u?ap:vb:null,f=c?c===ap?n.length:l.length:0);const m=c===ap&&/\b(transform|all)(,|$)/.test(i(`${ap}Property`).toString());return{type:c,timeout:p,propCount:f,hasTransform:m}}function Gq(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,i)=>Bq(r)+Bq(e[i])))}function Bq(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function hle(){return document.body.offsetHeight}function IGe(e,t,r){const i=e[Gv];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const uE=Symbol("_vod"),ple=Symbol("_vsh"),n9={beforeMount(e,{value:t},{transition:r}){e[uE]=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):bb(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:i}){!t!=!r&&(i?t?(i.beforeEnter(e),bb(e,!0),i.enter(e)):i.leave(e,()=>{bb(e,!1)}):bb(e,t))},beforeUnmount(e,{value:t}){bb(e,t)}};function bb(e,t){e.style.display=t?e[uE]:"none",e[ple]=!t}function EGe(){n9.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const dle=Symbol("");function AGe(e){const t=rs();if(!t)return;const r=t.ut=(s=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(n=>cE(n,s))},i=()=>{const s=e(t.proxy);t.ce?cE(t.ce,s):EN(t.subTree,s),r(s)};C$(()=>{zae(i)}),wn(()=>{const s=new MutationObserver(i);s.observe(t.subTree.el.parentNode,{childList:!0}),N1(()=>s.disconnect())})}function EN(e,t){if(e.shapeFlag&128){const r=e.suspense;e=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{EN(r.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)cE(e.el,t);else if(e.type===xr)e.children.forEach(r=>EN(r,t));else if(e.type===py){let{el:r,anchor:i}=e;for(;r&&(cE(r,t),r!==i);)r=r.nextSibling}}function cE(e,t){if(e.nodeType===1){const r=e.style;let i="";for(const s in t)r.setProperty(`--${s}`,t[s]),i+=`--${s}: ${t[s]};`;r[dle]=i}}const $Ge=/(^|;)\s*display\s*:/;function CGe(e,t,r){const i=e.style,s=fr(r);let n=!1;if(r&&!s){if(t)if(fr(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();r[a]==null&&_3(i,a,"")}else for(const o in t)r[o]==null&&_3(i,o,"");for(const o in r)o==="display"&&(n=!0),_3(i,o,r[o])}else if(s){if(t!==r){const o=i[dle];o&&(r+=";"+o),i.cssText=r,n=$Ge.test(r)}}else t&&e.removeAttribute("style");uE in e&&(e[uE]=n?i.display:"",e[ple]&&(i.display="none"))}const qq=/\s*!important$/;function _3(e,t,r){if(Qe(r))r.forEach(i=>_3(e,t,i));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const i=OGe(e,t);qq.test(r)?e.setProperty(un(i),r.replace(qq,""),"important"):e[i]=r}}const Hq=["Webkit","Moz","ms"],bC={};function OGe(e,t){const r=bC[t];if(r)return r;let i=Ls(t);if(i!=="filter"&&i in e)return bC[t]=i;i=L1(i);for(let s=0;s<Hq.length;s++){const n=Hq[s]+i;if(n in e)return bC[t]=n}return t}const Wq="http://www.w3.org/1999/xlink";function Jq(e,t,r,i,s,n=Toe(t)){i&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(Wq,t.slice(6,t.length)):e.setAttributeNS(Wq,t,r):r==null||n&&!LF(r)?e.removeAttribute(t):e.setAttribute(t,n?"":Jl(r)?String(r):r)}function PGe(e,t,r,i){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?ole(r):r);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?e.getAttribute("value")||"":e.value,a=r==null?e.type==="checkbox"?"on":"":String(r);(o!==a||!("_value"in e))&&(e.value=a),r==null&&e.removeAttribute(t),e._value=r;return}let n=!1;if(r===""||r==null){const o=typeof e[t];o==="boolean"?r=LF(r):r==null&&o==="string"?(r="",n=!0):o==="number"&&(r=0,n=!0)}try{e[t]=r}catch{}n&&e.removeAttribute(t)}function vh(e,t,r,i){e.addEventListener(t,r,i)}function RGe(e,t,r,i){e.removeEventListener(t,r,i)}const Zq=Symbol("_vei");function LGe(e,t,r,i,s=null){const n=e[Zq]||(e[Zq]={}),o=n[t];if(i&&o)o.value=i;else{const[a,l]=kGe(t);if(i){const u=n[t]=FGe(i,s);vh(e,a,u,l)}else o&&(RGe(e,a,o,l),n[t]=void 0)}}const Yq=/(?:Once|Passive|Capture)$/;function kGe(e){let t;if(Yq.test(e)){t={};let i;for(;i=e.match(Yq);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):un(e.slice(2)),t]}let wC=0;const NGe=Promise.resolve(),DGe=()=>wC||(NGe.then(()=>wC=0),wC=Date.now());function FGe(e,t){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;Ba(jGe(i,r.value),t,5,[i])};return r.value=e,r.attached=DGe(),r}function jGe(e,t){if(Qe(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const Kq=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,VGe=(e,t,r,i,s,n)=>{const o=s==="svg";t==="class"?IGe(e,i,o):t==="style"?CGe(e,r,i):R1(t)?m$(t)||LGe(e,t,r,i,n):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):UGe(e,t,i,o))?(PGe(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Jq(e,t,i,o,n,t!=="value")):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Jq(e,t,i,o))};function UGe(e,t,r,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&Kq(t)&&bt(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Kq(t)&&fr(r)?!1:!!(t in e||e._isVueCE&&(/[A-Z]/.test(t)||!fr(r)))}const Xq={};/*! #__NO_SIDE_EFFECTS__ */function fle(e,t,r){const i=Wt(e,t);IS(i)&&Tr(i,t);class s extends P${constructor(o){super(i,o,r)}}return s.def=i,s}/*! #__NO_SIDE_EFFECTS__ */const zGe=(e,t)=>fle(e,t,Ile),GGe=typeof HTMLElement<"u"?HTMLElement:class{};class P$ extends GGe{constructor(t,r={},i=jy){super(),this._def=t,this._props=r,this._createApp=i,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&i!==jy?this._root=this.shadowRoot:t.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let t=this;for(;t=t&&(t.parentNode||t.host);)if(t instanceof P$){this._parent=t;break}this._instance||(this._resolved?(this._setParent(),this._update()):t&&t._pendingResolve?this._pendingResolve=t._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(t=this._parent){t&&(this._instance.parent=t._instance,this._instance.provides=t._instance.provides)}disconnectedCallback(){this._connected=!1,pc(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);this._ob=new MutationObserver(i=>{for(const s of i)this._setAttr(s.attributeName)}),this._ob.observe(this,{attributes:!0});const t=(i,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:n,styles:o}=i;let a;if(n&&!Qe(n))for(const l in n){const u=n[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=y2(this._props[l])),(a||(a=Object.create(null)))[Ls(l)]=!0)}this._numberProps=a,s&&this._resolveProps(i),this.shadowRoot&&this._applyStyles(o),this._mount(i)},r=this._def.__asyncLoader;r?this._pendingResolve=r().then(i=>t(this._def=i,!0)):t(this._def)}_mount(t){this._app=this._createApp(t),t.configureApp&&t.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const r=this._instance&&this._instance.exposed;if(r)for(const i in r)rr(this,i)||Object.defineProperty(this,i,{get:()=>at(r[i])})}_resolveProps(t){const{props:r}=t,i=Qe(r)?r:Object.keys(r||{});for(const s of Object.keys(this))s[0]!=="_"&&i.includes(s)&&this._setProp(s,this[s]);for(const s of i.map(Ls))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(n){this._setProp(s,n,!0,!0)}})}_setAttr(t){if(t.startsWith("data-v-"))return;const r=this.hasAttribute(t);let i=r?this.getAttribute(t):Xq;const s=Ls(t);r&&this._numberProps&&this._numberProps[s]&&(i=y2(i)),this._setProp(s,i,!1,!0)}_getProp(t){return this._props[t]}_setProp(t,r,i=!0,s=!1){r!==this._props[t]&&(r===Xq?delete this._props[t]:(this._props[t]=r,t==="key"&&this._app&&(this._app._ceVNode.key=r)),s&&this._instance&&this._update(),i&&(r===!0?this.setAttribute(un(t),""):typeof r=="string"||typeof r=="number"?this.setAttribute(un(t),r+""):r||this.removeAttribute(un(t))))}_update(){w_(this._createVNode(),this._root)}_createVNode(){const t={};this.shadowRoot||(t.onVnodeMounted=t.onVnodeUpdated=this._renderSlots.bind(this));const r=jt(this._def,Tr(t,this._props));return this._instance||(r.ce=i=>{this._instance=i,i.ce=this,i.isCE=!0;const s=(n,o)=>{this.dispatchEvent(new CustomEvent(n,IS(o[0])?Tr({detail:o},o[0]):{detail:o}))};i.emit=(n,...o)=>{s(n,o),un(n)!==n&&s(un(n),o)},this._setParent()}),r}_applyStyles(t,r){if(!t)return;if(r){if(r===this._def||this._styleChildren.has(r))return;this._styleChildren.add(r)}const i=this._nonce;for(let s=t.length-1;s>=0;s--){const n=document.createElement("style");i&&n.setAttribute("nonce",i),n.textContent=t[s],this.shadowRoot.prepend(n)}}_parseSlots(){const t=this._slots={};let r;for(;r=this.firstChild;){const i=r.nodeType===1&&r.getAttribute("slot")||"default";(t[i]||(t[i]=[])).push(r),this.removeChild(r)}}_renderSlots(){const t=(this._teleportTarget||this).querySelectorAll("slot"),r=this._instance.type.__scopeId;for(let i=0;i<t.length;i++){const s=t[i],n=s.getAttribute("name")||"default",o=this._slots[n],a=s.parentNode;if(o)for(const l of o){if(r&&l.nodeType===1){const u=r+"-s",c=document.createTreeWalker(l,1);l.setAttribute(u,"");let p;for(;p=c.nextNode();)p.setAttribute(u,"")}a.insertBefore(l,s)}else for(;s.firstChild;)a.insertBefore(s.firstChild,s);a.removeChild(s)}}_injectChildStyle(t){this._applyStyles(t.styles,t)}_removeChildStyle(t){}}function mle(e){const t=rs(),r=t&&t.ce;return r||null}function BGe(){const e=mle();return e&&e.shadowRoot}function qGe(e="$style"){{const t=rs();if(!t)return Jt;const r=t.type.__cssModules;if(!r)return Jt;const i=r[e];return i||Jt}}const yle=new WeakMap,gle=new WeakMap,hE=Symbol("_moveCb"),Qq=Symbol("_enterCb"),HGe=e=>(delete e.props.mode,e),WGe=HGe({name:"TransitionGroup",props:Tr({},lle,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=rs(),i=HF();let s,n;return CS(()=>{if(!s.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!KGe(s[0].el,r.vnode.el,o))return;s.forEach(JGe),s.forEach(ZGe);const a=s.filter(YGe);hle(),a.forEach(l=>{const u=l.el,c=u.style;rh(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const p=u[hE]=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",p),u[hE]=null,Gp(u,o))};u.addEventListener("transitionend",p)})}),()=>{const o=Rt(e),a=ule(o);let l=o.tag||xr;if(s=[],n)for(let u=0;u<n.length;u++){const c=n[u];c.el&&c.el instanceof Element&&(s.push(c),Dh(c,zv(c,a,i,r)),yle.set(c,c.el.getBoundingClientRect()))}n=t.default?A$(t.default()):[];for(let u=0;u<n.length;u++){const c=n[u];c.key!=null&&Dh(c,zv(c,a,i,r))}return jt(l,null,n)}}}),o9=WGe;function JGe(e){const t=e.el;t[hE]&&t[hE](),t[Qq]&&t[Qq]()}function ZGe(e){gle.set(e,e.el.getBoundingClientRect())}function YGe(e){const t=yle.get(e),r=gle.get(e),i=t.left-r.left,s=t.top-r.top;if(i||s){const n=e.el.style;return n.transform=n.webkitTransform=`translate(${i}px,${s}px)`,n.transitionDuration="0s",e}}function KGe(e,t,r){const i=e.cloneNode(),s=e[Gv];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),r.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const n=t.nodeType===1?t:t.parentNode;n.appendChild(i);const{hasTransform:o}=cle(i);return n.removeChild(i),o}const Fd=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Qe(t)?r=>uy(t,r):t};function XGe(e){e.target.composing=!0}function eH(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ja=Symbol("_assign"),pE={created(e,{modifiers:{lazy:t,trim:r,number:i}},s){e[ja]=Fd(s);const n=i||s.props&&s.props.type==="number";vh(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;r&&(a=a.trim()),n&&(a=m2(a)),e[ja](a)}),r&&vh(e,"change",()=>{e.value=e.value.trim()}),t||(vh(e,"compositionstart",XGe),vh(e,"compositionend",eH),vh(e,"change",eH))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:i,trim:s,number:n}},o){if(e[ja]=Fd(o),e.composing)return;const a=(n||e.type==="number")&&!/^0\d/.test(e.value)?m2(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(i&&t===r||s&&e.value.trim()===l)||(e.value=l))}},a9={deep:!0,created(e,t,r){e[ja]=Fd(r),vh(e,"change",()=>{const i=e._modelValue,s=Bv(e),n=e.checked,o=e[ja];if(Qe(i)){const a=ES(i,s),l=a!==-1;if(n&&!l)o(i.concat(s));else if(!n&&l){const u=[...i];u.splice(a,1),o(u)}}else if(nf(i)){const a=new Set(i);n?a.add(s):a.delete(s),o(a)}else o(ble(e,n))})},mounted:tH,beforeUpdate(e,t,r){e[ja]=Fd(r),tH(e,t,r)}};function tH(e,{value:t},r){e._modelValue=t;let i;Qe(t)?i=ES(t,r.props.value)>-1:nf(t)?i=t.has(r.props.value):i=Nh(t,ble(e,!0)),e.checked!==i&&(e.checked=i)}const l9={created(e,{value:t},r){e.checked=Nh(t,r.props.value),e[ja]=Fd(r),vh(e,"change",()=>{e[ja](Bv(e))})},beforeUpdate(e,{value:t,oldValue:r},i){e[ja]=Fd(i),t!==r&&(e.checked=Nh(t,i.props.value))}},vle={deep:!0,created(e,{value:t,modifiers:{number:r}},i){const s=nf(t);vh(e,"change",()=>{const n=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>r?m2(Bv(o)):Bv(o));e[ja](e.multiple?s?new Set(n):n:n[0]),e._assigning=!0,pc(()=>{e._assigning=!1})}),e[ja]=Fd(i)},mounted(e,{value:t}){rH(e,t)},beforeUpdate(e,t,r){e[ja]=Fd(r)},updated(e,{value:t}){e._assigning||rH(e,t)}};function rH(e,t){const r=e.multiple,i=Qe(t);if(!(r&&!i&&!nf(t))){for(let s=0,n=e.options.length;s<n;s++){const o=e.options[s],a=Bv(o);if(r)if(i){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(a)):o.selected=ES(t,a)>-1}else o.selected=t.has(a);else if(Nh(Bv(o),t)){e.selectedIndex!==s&&(e.selectedIndex=s);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Bv(e){return"_value"in e?e._value:e.value}function ble(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const wle={created(e,t,r){vM(e,t,r,null,"created")},mounted(e,t,r){vM(e,t,r,null,"mounted")},beforeUpdate(e,t,r,i){vM(e,t,r,i,"beforeUpdate")},updated(e,t,r,i){vM(e,t,r,i,"updated")}};function _le(e,t){switch(e){case"SELECT":return vle;case"TEXTAREA":return pE;default:switch(t){case"checkbox":return a9;case"radio":return l9;default:return pE}}}function vM(e,t,r,i,s){const o=_le(e.tagName,r.props&&r.props.type)[s];o&&o(e,t,r,i)}function QGe(){pE.getSSRProps=({value:e})=>({value:e}),l9.getSSRProps=({value:e},t)=>{if(t.props&&Nh(t.props.value,e))return{checked:!0}},a9.getSSRProps=({value:e},t)=>{if(Qe(e)){if(t.props&&ES(e,t.props.value)>-1)return{checked:!0}}else if(nf(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},wle.getSSRProps=(e,t)=>{if(typeof t.type!="string")return;const r=_le(t.type.toUpperCase(),t.props&&t.props.type);if(r.getSSRProps)return r.getSSRProps(e,t)}}const eBe=["ctrl","shift","alt","meta"],tBe={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>eBe.some(r=>e[`${r}Key`]&&!t.includes(r))},R$=(e,t)=>{const r=e._withMods||(e._withMods={}),i=t.join(".");return r[i]||(r[i]=(s,...n)=>{for(let o=0;o<t.length;o++){const a=tBe[t[o]];if(a&&a(s,t))return}return e(s,...n)})},rBe={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Sle=(e,t)=>{const r=e._withKeys||(e._withKeys={}),i=t.join(".");return r[i]||(r[i]=s=>{if(!("key"in s))return;const n=un(s.key);if(t.some(o=>o===n||rBe[o]===n))return e(s)})},xle=Tr({patchProp:VGe},SGe);let b_,iH=!1;function Mle(){return b_||(b_=kae(xle))}function Tle(){return b_=iH?b_:Nae(xle),iH=!0,b_}const w_=(...e)=>{Mle().render(...e)},iBe=(...e)=>{Tle().hydrate(...e)},jy=(...e)=>{const t=Mle().createApp(...e),{mount:r}=t;return t.mount=i=>{const s=Ale(i);if(!s)return;const n=t._component;!bt(n)&&!n.render&&!n.template&&(n.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=r(s,!1,Ele(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t},Ile=(...e)=>{const t=Tle().createApp(...e),{mount:r}=t;return t.mount=i=>{const s=Ale(i);if(s)return r(s,!0,Ele(s))},t};function Ele(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Ale(e){return fr(e)?document.querySelector(e):e}let sH=!1;const sBe=()=>{sH||(sH=!0,QGe(),EGe())},Ect=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:lae,BaseTransitionPropsValidators:WF,Comment:Ui,DeprecationTypes:bGe,EffectScope:kF,ErrorCodes:kUe,ErrorTypeStrings:pGe,Fragment:xr,KeepAlive:nze,ReactiveEffect:g2,Static:py,Suspense:Wze,Teleport:sae,Text:Eh,TrackOpTypes:AUe,Transition:s9,TransitionGroup:o9,TriggerOpTypes:$Ue,VueElement:P$,assertNumber:LUe,callWithAsyncErrorHandling:Ba,callWithErrorHandling:k1,camelize:Ls,capitalize:L1,cloneVNode:nc,compatUtils:vGe,computed:Bt,createApp:jy,createBlock:Vr,createCommentVNode:Zr,createElementBlock:Be,createElementVNode:Te,createHydrationRenderer:Nae,createPropsRestProxy:Sze,createRenderer:kae,createSSRApp:Ile,createSlots:lze,createStaticVNode:tGe,createTextVNode:Ah,createVNode:jt,customRef:Woe,defineAsyncComponent:cae,defineComponent:Wt,defineCustomElement:fle,defineEmits:pze,defineExpose:dze,defineModel:yze,defineOptions:fze,defineProps:hze,defineSSRCustomElement:zGe,defineSlots:mze,devtools:dGe,effect:JVe,effectScope:w$,getCurrentInstance:rs,getCurrentScope:NF,getCurrentWatcher:CUe,getTransitionRawChildren:A$,guardReactiveProps:Xae,h:Cl,handleError:ig,hasInjectionContext:Tae,hydrate:iBe,hydrateOnIdle:XUe,hydrateOnInteraction:rze,hydrateOnMediaQuery:tze,hydrateOnVisible:eze,initCustomFormatter:uGe,initDirectivesForSSR:sBe,inject:vs,isMemoSame:sle,isProxy:I$,isReactive:Fa,isReadonly:Dd,isRef:ir,isRuntimeOnly:oGe,isShallow:ea,isVNode:sc,markRaw:Gi,mergeDefaults:wze,mergeModels:_ze,mergeProps:i9,nextTick:pc,normalizeClass:wi,normalizeProps:xoe,normalizeStyle:of,onActivated:hae,onBeforeMount:C$,onBeforeUnmount:dc,onBeforeUpdate:fae,onDeactivated:pae,onErrorCaptured:vae,onMounted:wn,onRenderTracked:gae,onRenderTriggered:yae,onScopeDispose:$oe,onServerPrefetch:mae,onUnmounted:N1,onUpdated:CS,onWatcherCleanup:Yoe,openBlock:Ae,popScopeId:VUe,provide:Mae,proxyRefs:GF,pushScopeId:jUe,queuePostFlushCb:tE,reactive:Fs,readonly:UF,ref:Se,registerRuntimeCompiler:nGe,render:w_,renderList:sg,renderSlot:ku,resolveComponent:Vi,resolveDirective:br,resolveDynamicComponent:wae,resolveFilter:gGe,resolveTransitionHooks:zv,setBlockTracking:wN,setDevtoolsHook:fGe,setTransitionHooks:Dh,shallowReactive:qoe,shallowReadonly:gUe,shallowRef:AS,ssrContextKey:Vae,ssrUtils:yGe,stop:ZVe,toDisplayString:Or,toHandlerKey:yv,toHandlers:uze,toRaw:Rt,toRef:TUe,toRefs:Joe,toValue:wUe,transformVNodeArgs:Qze,triggerRef:bUe,unref:at,useAttrs:bze,useCssModule:qGe,useCssVars:AGe,useHost:mle,useId:HUe,useModel:Vze,useSSRContext:Uae,useShadowRoot:BGe,useSlots:vze,useTemplateRef:WUe,useTransitionState:HF,vModelCheckbox:a9,vModelDynamic:wle,vModelRadio:l9,vModelSelect:vle,vModelText:pE,vShow:n9,version:nle,warn:hGe,watch:ks,watchEffect:Fze,watchPostEffect:zae,watchSyncEffect:Gae,withAsyncContext:xze,withCtx:Bi,withDefaults:gze,withDirectives:vr,withKeys:Sle,withMemo:cGe,withModifiers:R$,withScopeId:UUe},Symbol.toStringTag,{value:"Module"}));var nBe=!1;/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let $le;const L$=e=>$le=e,Cle=Symbol();function AN(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var __;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(__||(__={}));function oBe(){const e=w$(!0),t=e.run(()=>Se({}));let r=[],i=[];const s=Gi({install(n){L$(s),s._a=n,n.provide(Cle,s),n.config.globalProperties.$pinia=s,i.forEach(o=>r.push(o)),i=[]},use(n){return!this._a&&!nBe?i.push(n):r.push(n),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return s}const Ole=()=>{};function nH(e,t,r,i=Ole){e.push(t);const s=()=>{const n=e.indexOf(t);n>-1&&(e.splice(n,1),i())};return!r&&NF()&&$oe(s),s}function Eg(e,...t){e.slice().forEach(r=>{r(...t)})}const aBe=e=>e();function $N(e,t){e instanceof Map&&t instanceof Map&&t.forEach((r,i)=>e.set(i,r)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const r in t){if(!t.hasOwnProperty(r))continue;const i=t[r],s=e[r];AN(s)&&AN(i)&&e.hasOwnProperty(r)&&!ir(i)&&!Fa(i)?e[r]=$N(s,i):e[r]=i}return e}const lBe=Symbol();function uBe(e){return!AN(e)||!e.hasOwnProperty(lBe)}const{assign:Bp}=Object;function cBe(e){return!!(ir(e)&&e.effect)}function hBe(e,t,r,i){const{state:s,actions:n,getters:o}=t,a=r.state.value[e];let l;function u(){a||(r.state.value[e]=s?s():{});const c=Joe(r.state.value[e]);return Bp(c,n,Object.keys(o||{}).reduce((p,f)=>(p[f]=Gi(Bt(()=>{L$(r);const m=r._s.get(e);return o[f].call(m,m)})),p),{}))}return l=Ple(e,u,t,r,i,!0),l}function Ple(e,t,r={},i,s,n){let o;const a=Bp({actions:{}},r),l={deep:!0};let u,c,p=[],f=[],m;const g=i.state.value[e];!n&&!g&&(i.state.value[e]={}),Se({});let b;function w(C){let O;u=c=!1,typeof C=="function"?(C(i.state.value[e]),O={type:__.patchFunction,storeId:e,events:m}):($N(i.state.value[e],C),O={type:__.patchObject,payload:C,storeId:e,events:m});const R=b=Symbol();pc().then(()=>{b===R&&(u=!0)}),c=!0,Eg(p,O,i.state.value[e])}const S=n?function(){const{state:O}=r,R=O?O():{};this.$patch(D=>{Bp(D,R)})}:Ole;function M(){o.stop(),p=[],f=[],i._s.delete(e)}function x(C,O){return function(){L$(i);const R=Array.from(arguments),D=[],N=[];function U(T){D.push(T)}function J(T){N.push(T)}Eg(f,{args:R,name:C,store:I,after:U,onError:J});let y;try{y=O.apply(this&&this.$id===e?this:I,R)}catch(T){throw Eg(N,T),T}return y instanceof Promise?y.then(T=>(Eg(D,T),T)).catch(T=>(Eg(N,T),Promise.reject(T))):(Eg(D,y),y)}}const _={_p:i,$id:e,$onAction:nH.bind(null,f),$patch:w,$reset:S,$subscribe(C,O={}){const R=nH(p,C,O.detached,()=>D()),D=o.run(()=>ks(()=>i.state.value[e],N=>{(O.flush==="sync"?c:u)&&C({storeId:e,type:__.direct,events:m},N)},Bp({},l,O)));return R},$dispose:M},I=Fs(_);i._s.set(e,I);const A=(i._a&&i._a.runWithContext||aBe)(()=>i._e.run(()=>(o=w$()).run(t)));for(const C in A){const O=A[C];if(ir(O)&&!cBe(O)||Fa(O))n||(g&&uBe(O)&&(ir(O)?O.value=g[C]:$N(O,g[C])),i.state.value[e][C]=O);else if(typeof O=="function"){const R=x(C,O);A[C]=R,a.actions[C]=O}}return Bp(I,A),Bp(Rt(I),A),Object.defineProperty(I,"$state",{get:()=>i.state.value[e],set:C=>{w(O=>{Bp(O,C)})}}),i._p.forEach(C=>{Bp(I,o.run(()=>C({store:I,app:i._a,pinia:i,options:a})))}),g&&n&&r.hydrate&&r.hydrate(I.$state,g),u=!0,c=!0,I}function ui(e,t,r){let i,s;const n=typeof t=="function";typeof e=="string"?(i=e,s=n?r:t):(s=e,i=e.id);function o(a,l){const u=Tae();return a=a||(u?vs(Cle,null):null),a&&L$(a),a=$le,a._s.has(i)||(n?Ple(i,t,s,a):hBe(i,s,a)),a._s.get(i)}return o.$id=i,o}const dE=ui("appbar",()=>{const e=Se({}),t=Se([]),r=Se([]),i=Bt(()=>t.value.map(o=>o.map(a=>e.value[a]).filter(a=>{if(typeof a=="string"||a.componentId)return!0})).filter(o=>o.length>0));function s(o){r.value.includes(o)||r.value.push(o)}function n(o){const a=r.value.indexOf(o);a!==-1&&r.value.splice(a,1),o in e.value&&delete e.value[o],t.value.forEach(l=>{const u=l.indexOf(o);u!==-1&&l.splice(u,1)})}return{items:e,order:t,temporary:r,visible:i,addTempButton:s,removeButton:n}}),CN=ui("grid",()=>{const e=Se({}),t=Se(),r=Se();function i(a){e.value={...e.value,[a.id]:a}}function s(a){e.value[a]!==void 0&&delete e.value[a]}function n(a){return Object.keys(e.value).find(l=>e.value[l].layerIds.includes(a))}function o(a,l){e.value[a].layerIds=e.value[a].layerIds.filter(u=>u!==l)}return{grids:e,panel:t,currentId:r,addGrid:i,removeGrid:s,getGridId:n,removeLayer:o}});function Bm(e,t,r,i){var s,n=!1,o=0;function a(){s&&clearTimeout(s)}function l(){a(),n=!0}typeof t!="boolean"&&(i=r,r=t,t=void 0);function u(){for(var c=arguments.length,p=new Array(c),f=0;f<c;f++)p[f]=arguments[f];var m=this,g=Date.now()-o;if(n)return;function b(){o=Date.now(),r.apply(m,p)}function w(){s=void 0}i&&!s&&b(),a(),i===void 0&&g>e?b():t!==!0&&(s=setTimeout(i?w:b,i===void 0?e-g:e))}return u.cancel=l,u}function fE(e,t,r){return r===void 0?Bm(e,t,!1):Bm(e,r,t!==!1)}const yd=ui("map-caption",()=>{const e=Se({text:{},logo:{}}),t=Se({}),r=Se({}),i=Se({});function s(o){o!==void 0?t.value.isImperialScale=o:t.value.isImperialScale=!t.value.isImperialScale}function n(o){e.value.text.value=o.text.value,e.value.text.disabled=o.text.disabled,e.value.logo.altText=o.logo.altText,e.value.logo.link=o.logo.link,e.value.logo.value=o.logo.value,e.value.logo.disabled=o.logo.disabled}return{attribution:e,scale:t,coords:r,langtoggle:i,toggleScale:s,setAttribution:n}}),_C=(e,t)=>{const r=[...e];for(;r.length>0;){const i=r.shift();if(t(i))return i;i&&r.push(...i.sublayers)}},Nu=ui("layer",()=>{const e=Se([]),t=Se([]),r=Se([]);function i(p){return _C(e.value,f=>f?.uid===p)}function s(p){return _C(e.value,f=>f?.id===p)}function n(p){return _C(e.value,f=>f!==void 0&&(f.id===p||f.uid===p))}function o(p){t.value=[...t.value,p]}function a(p,f=void 0){e.value=[...e.value,p],p.mapLayer&&((f===void 0||f<0)&&(console.error("Map layer added to store with invalid index!"),f=r.value.length),r.value.splice(f,0,p.id),r.value=[...r.value])}function l(p,f){if(!p.mapLayer){console.error("Data layer passed to layer store reorder");return}if(f<0){console.error("Negative index passed to layer store reorder");return}f>=r.value.length&&(f=r.value.length-1);const m=r.value.findIndex(g=>g===p.id);m!==-1&&m!==f&&(r.value.splice(m,1),r.value.splice(f,0,p.id),r.value=[...r.value])}function u(p){const f=e.value.filter(m=>m.id!==p.id||m.uid!==p.uid);if(e.value=f,p.mapLayer){const m=r.value.filter(g=>g!==p.id);r.value=m}}function c(p){const f=t.value.filter(m=>m.id!==p);t.value=f}return{layers:e,mapOrder:r,layerConfigs:t,getLayerByUid:i,getLayerById:s,getLayerByAny:n,addLayerConfig:o,addLayer:a,reorderLayer:l,removeLayer:u,removeLayerConfig:c}}),fo=ui("config",()=>{const e=Se({map:{lodSets:[],extentSets:[],tileSchemas:[],basemaps:[],initialBasemapId:""},fixtures:{},layers:[]}),t=Se([]),r=Se(),i=Se({}),s=Se({});function n(l){if(i.value[s.value[l]]===void 0)throw new Error("Unsupported language or no registered config exists for requested language");return i.value[s.value[l]]}function o(l){const u={...e.value,...l};if(e.value=u,Array.isArray(e.value.layers)){const c=Nu();c.layerConfigs=[...c.layerConfigs,e.value.layers]}}function a(l){const u=l.configLangs,c=l.config,p=l.allLangs;u!==void 0&&u.length>0&&u.forEach(f=>{i.value[f]=c,s.value[f]=f}),p!==void 0&&p.length>0&&p.forEach(f=>{s.value[f]=Object.keys(i.value)[0]})}return{config:e,startingFixtures:t,activeBasemapConfig:r,registeredConfigs:i,registeredLangs:s,getActiveConfig:n,newConfig:o,registerConfig:a}}),Rle=ui("details",()=>{const e=Se([]),t=Se({}),r=Se({}),i=Se(),s=Se(0),n=Se(0),o=Se(!0),a=Se();function l(c){const p=e.value.findIndex(f=>f.uid===c.uid);p!==-1&&e.value.splice(p,1)}function u(c){t.value={...t.value,[c.id]:c}}return{payload:e,properties:t,defaultTemplates:r,currentFeatureId:i,activeGreedy:s,lastHilight:n,hilightToggle:o,origin:a,removeLayer:l,addConfigProperty:u}}),Ea=ui("fixture",()=>{const e=Se({}),t=Se({});function r(o){return o.map(a=>t.value[a].getPromise())}function i(o){if(e.value={...e.value,[o.id]:Gi(o)},o.id in t.value)t.value[o.id].resolveMe(Gi(o));else{const a=new zi;a.resolveMe(Gi(o)),t.value={...t.value,[o.id]:a}}typeof o.added=="function"&&o.added()}function s(o){delete e.value[o.id],e.value={...e.value},delete t.value[o.id],t.value={...t.value},typeof o.removed=="function"&&o.removed()}function n(o){t.value={...t.value,[o]:new zi}}return{items:e,loadPromises:t,getLoadPromises:r,addFixture:i,removeFixture:s,addLoadPromise:n}});var rt=(e=>(e.APPBAR_BUTTON_CLICK="appbar/click",e.COMPONENT="ramp/component",e.CONFIG_CHANGE="config/configchanged",e.DETAILS_TOGGLE="details/toggle",e.FILTER_CHANGE="filter/change",e.FIXTURE_ADDED="fixture/added",e.FIXTURE_REMOVED="fixture/removed",e.GRID_TOGGLE="grid/toggle",e.HELP_TOGGLE="help/toggle",e.LANG_CHANGE="lang/change",e.LAYER_DRAWSTATECHANGE="layer/drawstatechange",e.LAYER_INITIATIONSTATECHANGE="layer/initiationStatechange",e.LAYER_LAYERSTATECHANGE="layer/layerstatechange",e.LAYER_OPACITYCHANGE="layer/opacitychange",e.LAYER_REGISTERED="layer/registered",e.LAYER_RELOAD_END="layer/reloadend",e.LAYER_RELOAD_START="layer/reloadstart",e.LAYER_REMOVE="layer/remove",e.LAYER_VISIBILITYCHANGE="layer/visibilitychange",e.MAP_BASEMAPCHANGE="map/basemapchanged",e.MAP_BLUR="map/blur",e.MAP_CLICK="map/click",e.MAP_CREATED="map/created",e.MAP_DESTROYED="map/destroyed",e.MAP_DOUBLECLICK="map/doubleclick",e.MAP_EXTENTCHANGE="map/extentchanged",e.MAP_FOCUS="map/focus",e.MAP_GRAPHICHIT="map/graphichit",e.MAP_IDENTIFY="map/identify",e.MAP_KEYDOWN="map/keydown",e.MAP_KEYUP="map/keyup",e.MAP_MOUSEDOWN="map/mousedown",e.MAP_MOUSELEAVE="map/mouseleave",e.MAP_MOUSEMOVE="map/mousemove",e.MAP_MOUSEMOVE_END="map/mousemoveend",e.MAP_MOUSEMOVE_START="map/mousemovestart",e.MAP_REFRESH_END="map/refreshend",e.MAP_REFRESH_START="map/refreshstart",e.MAP_REORDER="map/reorder",e.MAP_RESIZED="map/resized",e.MAP_SCALECHANGE="map/scalechanged",e.MAP_START="map/start",e.METADATA_TOGGLE="metadata/toggle",e.PANEL_CLOSED="panel/closed",e.PANEL_MINIMIZED="panel/minimized",e.PANEL_OPENED="panel/opened",e.RAMP_MOBILEVIEW_CHANGE="ramp/mobileviewchange",e.REORDER_TOGGLE="reorder/toggle",e.SETTINGS_TOGGLE="settings/toggle",e.USER_LAYER_ADDED="user/layeradded",e.WIZARD_TOGGLE="wizard/toggle",e))(rt||{}),ON=(e=>(e.CONFIG_CHANGE_UPDATES_MAP_ATTRIBS="ramp_config_change_updates_map_attribs",e.LAYER_ERROR_UPDATES_LEGEND="ramp_layer_error_updates_legend",e.LAYER_REGISTER_BINDS_LEGEND="ramp_layer_register_binds_legend",e.LAYER_RELOAD_END_BINDS_LEGEND="ramp_layer_reload_end_binds_legend",e.LAYER_RELOAD_START_UPDATES_LEGEND="ramp_layer_reload_start_updates_legend",e.LAYER_REMOVE_UPDATES_DETAILS="ramp_layer_remove_updates_details",e.LAYER_REMOVE_CHECKS_GRID="ramp_layer_remove_checks_grid",e.LAYER_REMOVE_UPDATES_LEGEND="ramp_layer_remove_updates_legend",e.LAYER_USERADD_UPDATES_LEGEND="ramp_layer_useradd_updates_legend",e.MAP_BASEMAP_CHECKS_TILE_PROJ="ramp_map_basemap_checks_tile_proj",e.MAP_BASEMAP_UPDATES_MAP_ATTRIBS="ramp_map_basemap_updates_map_attribs",e.MAP_BLUR_UPDATES_KEY_HANDLER="ramp_map_blur_updates_key_handler",e.MAP_CLICK_RUNS_IDENTIFY="ramp_map_click_runs_identify",e.MAP_CREATED_INITIALIZES_FIXTURES="ramp_map_created_initializes_fixtures",e.MAP_CREATED_UPDATES_MAP_ATTRIBS="ramp_map_created_updates_map_attribs",e.MAP_EXTENT_UPDATES_MAPTIP="ramp_map_extent_updates_maptip",e.MAP_GRAPHICHIT_CREATES_MAPTIP="ramp_map_graphichit_creates_maptip",e.MAP_IDENTIFY_OPENS_IDENTIFY_RESULTS="ramp_map_identify_opens_identify_results",e.MAP_KEYDOWN_UPDATES_COORDS="ramp_map_keydown_updates_coords",e.MAP_KEYDOWN_UPDATES_KEY_HANDLER="ramp_map_keydown_updates_key_handler",e.MAP_KEYUP_UPDATES_KEY_HANDLER="ramp_map_keyup_updates_key_handler",e.MAP_MOUSE_UPDATES_COORDS="ramp_map_mouse_updates_coords",e.MAP_MOUSE_UPDATES_MAPTIP="ramp_map_mouse_updates_maptip",e.MAP_MOUSELEAVE_REMOVES_MAPTIP="ramp_map_mouseleave_removes_maptip",e.MAP_RESIZE_UPDATES_SCALEBAR="ramp_map_resize_updates_scalebar",e.MAP_SCALE_UPDATES_SCALEBAR="ramp_map_scale_updates_scalebar",e.PANEL_CLOSE_UPDATES_APPBAR="ramp_panel_close_updates_appbar",e.PANEL_OPEN_UPDATES_APPBAR="ramp_panel_open_updates_appbar",e.TOGGLE_DETAILS="ramp_toggle_details",e.TOGGLE_GRID="ramp_toggle_grid",e.TOGGLE_HELP="ramp_toggle_help",e.TOGGLE_METADATA="ramp_toggle_metadata",e.TOGGLE_REORDER="ramp_toggle_reorder",e.TOGGLE_SETTINGS="ramp_toggle_settings",e.TOGGLE_WIZARD="ramp_toggle_wizard",e))(ON||{});class pBe{eventName;handlerName;handlerFunc;constructor(t,r,i){this.eventName=t,this.handlerName=r,this.handlerFunc=i}}class dBe extends qi{_eventBus;_eventRegister;_nameRegister;_funCounter;constructor(t){super(t),this._eventBus=new nVe.TinyEmitter,this._eventRegister=[],this._funCounter=1,this._nameRegister=Object.values(rt).filter(r=>typeof r=="string"&&r.indexOf("/")>-1)}findHandler(t){return this._eventRegister.find(r=>r.handlerName===t)}handlerNamer(t){return this._funCounter++,t.replace(/\//g,"_")+this._funCounter.toString()}registerEventName(t){(Array.isArray(t)?t:[t]).forEach(i=>{this._nameRegister.indexOf(i)===-1&&this._nameRegister.push(i)})}eventNames(){return this._nameRegister.slice()}on(t,r,i=""){if(this.findHandler(i))throw new Error("Duplicate handler name registration: "+i);i||(i=this.handlerNamer(t));const s=new pBe(t,i,r);return this._eventRegister.push(s),this._eventBus.on(t,r),i}off(t){const r=this.findHandler(t);r&&(this._eventRegister.splice(this._eventRegister.indexOf(r),1),this._eventBus.off(r.eventName,r.handlerFunc))}offAll(t=""){this.activeHandlers(t).forEach(i=>this.off(i))}removeDefaultEvents(){Object.values(ON).forEach(t=>{this.off(t)})}emit(t,...r){this._eventBus.emit(t,...r)}once(t,r,i=""){i||(i=this.handlerNamer(t));const s=(...n)=>{r(...n),this.off(i)};return this.on(t,s,i)}activeHandlers(t=""){return t===""?this._eventRegister.map(r=>r.handlerName):this._eventRegister.filter(r=>r.eventName===t).map(r=>r.handlerName)}addDefaultEvents(t){return(!Array.isArray(t)||t.length===0)&&(t=Object.values(ON)),t.map(r=>this.defaultHandlerFactory(r))}defaultHandlerFactory(t){let r;switch(t){case"ramp_config_change_updates_map_attribs":r=i=>{const s=i.map.basemaps.find(n=>n.id===this.$iApi.geo.map.getCurrentBasemapId());this.$iApi.geo.map.caption.updateAttribution(s?.attribution)},this.$iApi.event.on("config/configchanged",r,t);break;case"ramp_layer_error_updates_legend":r=i=>{if(i.layer.layerState===yi.ERROR){const s=this.$iApi.fixture.get("legend");s&&s.updateLegend(i.layer)}},this.$iApi.event.on("layer/layerstatechange",r,t);break;case"ramp_layer_register_binds_legend":r=i=>{const s=this.$iApi.fixture.get("legend");s&&s.updateLegend(i)},this.$iApi.event.on("layer/registered",r,t);break;case"ramp_layer_reload_end_binds_legend":r=i=>{const s=this.$iApi.fixture.get("legend");s&&s.updateLegend(i)},this.$iApi.event.on("layer/reloadend",r,t);break;case"ramp_layer_reload_start_updates_legend":r=i=>{if(!i.isSublayer){const s=this.$iApi.fixture.get("legend");s&&s.reloadLayerItem(i.uid)}},this.$iApi.event.on("layer/reloadstart",r,t);break;case"ramp_layer_remove_checks_grid":r=i=>{if(this.$iApi.fixture.get("grid")){const s=CN(this.$vApp.$pinia),n=s.getGridId(i.id);if(n===void 0)return;if(s.removeLayer(n,i.id),s.grids[n].layerIds.length===0){s.removeGrid(n);const o=s.currentId;if(n===o){const a=this.$iApi.panel.get("grid");this.$iApi.panel.close(a),s.currentId=void 0}}}},this.$iApi.event.on("layer/remove",r,t);break;case"ramp_layer_remove_updates_details":r=i=>{const s=Rle(this.$vApp.$pinia);this.$iApi.fixture.get("details")&&s.removeLayer(i)},this.$iApi.event.on("layer/remove",r,t);break;case"ramp_layer_remove_updates_legend":r=i=>{const s=this.$iApi.fixture.get("legend");s&&(s.removeLayerItem(i),this.$iApi.updateAlert(this.$iApi.$i18n.t("legend.alert.layerRemoved",{name:i.name})))},this.$iApi.event.on("layer/remove",r,t);break;case"ramp_layer_useradd_updates_legend":r=i=>{const s=this.$iApi.fixture.get("legend");s&&s.addLayerItem(i)},this.$iApi.event.on("user/layeradded",r,t);break;case"ramp_map_basemap_checks_tile_proj":r=i=>{i.schemaChanged&&this.$iApi.geo.layer.allLayers().filter(s=>s.layerType===ct.TILE).forEach(s=>{s.checkProj()})},this.$iApi.event.on("map/basemapchanged",r,t);break;case"ramp_map_basemap_updates_map_attribs":r=()=>{this.$iApi.geo.map.caption.updateAttribution(fo(this.$vApp.$pinia).activeBasemapConfig?.attribution)},this.$iApi.event.on("map/basemapchanged",r,t);break;case"ramp_map_blur_updates_key_handler":r=()=>{this.$iApi.geo.map.stopKeyPan()},this.$iApi.event.on("map/blur",r,t);break;case"ramp_map_click_runs_identify":r=i=>{i.button===0&&this.$iApi.geo.map.runIdentify(i)},this.on("map/click",r,t);break;case"ramp_map_created_initializes_fixtures":r=()=>{const i=Ea(this.$vApp.$pinia).items;Object.keys(i).forEach(s=>{i[s].initialized?.()})},this.$iApi.geo.map.created&&r(),this.$iApi.event.on("map/created",r,t);break;case"ramp_map_created_updates_map_attribs":r=()=>{this.$iApi.geo.map.caption.updateAttribution(fo(this.$vApp.$pinia).activeBasemapConfig?.attribution)},this.$iApi.geo.map.created&&r(),this.$iApi.event.on("map/created",r,t);break;case"ramp_map_extent_updates_maptip":r=()=>{if(this.$iApi.geo.map.keysActive){const i=this.$iApi.geo.map.mapPointToScreenPoint(this.$iApi.geo.map.getExtent().center());this.$iApi.geo.map.maptip.checkAtCoord(i)}else this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/extentchanged",Bm(50,!0,()=>r()),t);break;case"ramp_map_graphichit_creates_maptip":r=i=>{this.$iApi.geo.map.maptip.generateDefaultMaptip(i)},this.$iApi.event.on("map/graphichit",r,t);break;case"ramp_map_identify_opens_identify_results":r=i=>{const s=this.$iApi.fixture.get("details");s&&s.openDetails(i.results)},this.on("map/identify",r,t);break;case"ramp_map_keydown_updates_coords":this.$iApi.event.on("map/keydown",Bm(50,()=>{const i=yd(this.$vApp.$pinia);i.coords?.disabled||!this.$iApi.geo.map.keysActive||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.getExtent().center()).then(n=>{i.coords={formattedString:n}})}),t);break;case"ramp_map_keydown_updates_key_handler":r=i=>{this.$iApi.geo.map.mapKeyDown(i)},this.$iApi.event.on("map/keydown",r,t);break;case"ramp_map_keyup_updates_key_handler":r=i=>{this.$iApi.geo.map.mapKeyUp(i)},this.$iApi.event.on("map/keyup",r,t);break;case"ramp_map_mouse_updates_coords":this.$iApi.event.on("map/mousemove",Bm(50,i=>{const s=yd(this.$vApp.$pinia);s.coords?.disabled||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.screenPointToMapPoint(i)).then(o=>{s.coords={formattedString:o}})}),t);break;case"ramp_map_mouse_updates_maptip":r=i=>{this.$iApi.geo.map.maptip.checkAtCoord({screenX:i.screenX,screenY:i.screenY})},this.$iApi.event.on("map/mousemove",Bm(50,i=>r(i)),t);break;case"ramp_map_mouseleave_removes_maptip":r=()=>{this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/mouseleave",r);break;case"ramp_map_resize_updates_scalebar":this.$iApi.event.on("map/resized",fE(100,()=>this.$iApi.geo.map.caption.updateScale()),t);break;case"ramp_map_scale_updates_scalebar":this.$iApi.event.on("map/scalechanged",fE(300,()=>this.$iApi.geo.map.caption.updateScale()),t);break;case"ramp_panel_close_updates_appbar":r=i=>{const s=dE(this.$vApp.$pinia);this.$iApi.fixture.get("appbar")&&!s.order.flat().find(n=>n===i.id)&&s.removeButton(i.id)},this.on("panel/closed",r,t);break;case"ramp_panel_open_updates_appbar":r=i=>{const s=dE(this.$vApp.$pinia);this.$iApi.fixture.get("appbar")&&(!i.teleport||i.teleport?.showAppbarButton)&&!s.order.flat().find(n=>n===i.id)&&s.addTempButton(i.id)},this.on("panel/opened",r,t);break;case"ramp_toggle_details":r=(i,s)=>{const n=this.$iApi.fixture.get("details");n&&n.toggleFeature(i,s)},this.$iApi.event.on("details/toggle",r,t);break;case"ramp_toggle_grid":r=(i,s)=>{const n=this.$iApi.fixture.get("grid");n&&n.toggleGrid(i.id,s)},this.$iApi.event.on("grid/toggle",r,t);break;case"ramp_toggle_help":r=i=>{const s=this.$iApi.fixture.get("help");s&&s.toggleHelp(i)},this.$iApi.event.on("help/toggle",r,t);break;case"ramp_toggle_metadata":r=(i,s)=>{const n=this.$iApi.fixture.get("metadata");n&&n.toggleMetadata(i,s)},this.$iApi.event.on("metadata/toggle",r,t);break;case"ramp_toggle_reorder":r=i=>{const s=this.$iApi.fixture.get("layer-reorder");s&&s.toggleLayerReorder(i)},this.$iApi.event.on("reorder/toggle",r,t);break;case"ramp_toggle_settings":r=(i,s)=>{const n=this.$iApi.fixture.get("settings");n&&n.toggleSettings(i,s)},this.$iApi.event.on("settings/toggle",r,t);break;case"ramp_toggle_wizard":r=i=>{const s=this.$iApi.fixture.get("wizard");s&&s.toggleWizard(i)},this.$iApi.event.on("wizard/toggle",r,t);break;default:return console.error(`Unrecognized default event handler name encountered: ${t}`),`ERROR_NOT_REGISTERED__${t}`}return t}}/*!
  * shared v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const mE=typeof window<"u",uf=(e,t=!1)=>t?Symbol.for(e):Symbol(e),fBe=(e,t,r)=>mBe({l:e,k:t,s:r}),mBe=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),$i=e=>typeof e=="number"&&isFinite(e),yBe=e=>kle(e)==="[object Date]",jd=e=>kle(e)==="[object RegExp]",k$=e=>Pt(e)&&Object.keys(e).length===0,Ns=Object.assign,gBe=Object.create,gr=(e=null)=>gBe(e);let oH;const bh=()=>oH||(oH=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:gr());function aH(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const vBe=Object.prototype.hasOwnProperty;function Ol(e,t){return vBe.call(e,t)}const Ur=Array.isArray,Cr=e=>typeof e=="function",ze=e=>typeof e=="string",Ht=e=>typeof e=="boolean",nr=e=>e!==null&&typeof e=="object",bBe=e=>nr(e)&&Cr(e.then)&&Cr(e.catch),Lle=Object.prototype.toString,kle=e=>Lle.call(e),Pt=e=>{if(!nr(e))return!1;const t=Object.getPrototypeOf(e);return t===null||t.constructor===Object},wBe=e=>e==null?"":Ur(e)||Pt(e)&&e.toString===Lle?JSON.stringify(e,null,2):String(e);function _Be(e,t=""){return e.reduce((r,i,s)=>s===0?r+i:r+t+i,"")}function N$(e){let t=e;return()=>++t}function SBe(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const bM=e=>!nr(e)||Ur(e);function S3(e,t){if(bM(e)||bM(t))throw new Error("Invalid value");const r=[{src:e,des:t}];for(;r.length;){const{src:i,des:s}=r.pop();Object.keys(i).forEach(n=>{n!=="__proto__"&&(nr(i[n])&&!nr(s[n])&&(s[n]=Array.isArray(i[n])?[]:gr()),bM(s[n])||bM(i[n])?s[n]=i[n]:r.push({src:i[n],des:s[n]}))})}}/*!
  * message-compiler v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function xBe(e,t,r){return{line:e,column:t,offset:r}}function yE(e,t,r){return{start:e,end:t}}const MBe=/\{([0-9a-zA-Z]+)\}/g;function Nle(e,...t){return t.length===1&&TBe(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),e.replace(MBe,(r,i)=>t.hasOwnProperty(i)?t[i]:"")}const Dle=Object.assign,lH=e=>typeof e=="string",TBe=e=>e!==null&&typeof e=="object";function Fle(e,t=""){return e.reduce((r,i,s)=>s===0?r+i:r+t+i,"")}const u9={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},IBe={[u9.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function EBe(e,t,...r){const i=Nle(IBe[e],...r||[]),s={message:String(i),code:e};return t&&(s.location=t),s}const Tt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},ABe={[Tt.EXPECTED_TOKEN]:"Expected token: '{0}'",[Tt.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Tt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Tt.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Tt.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Tt.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Tt.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Tt.EMPTY_PLACEHOLDER]:"Empty placeholder",[Tt.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Tt.INVALID_LINKED_FORMAT]:"Invalid linked format",[Tt.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Tt.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Tt.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Tt.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Tt.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Tt.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function D1(e,t,r={}){const{domain:i,messages:s,args:n}=r,o=Nle((s||ABe)[e]||"",...n||[]),a=new SyntaxError(String(o));return a.code=e,t&&(a.location=t),a.domain=i,a}function $Be(e){throw e}const Ic=" ",CBe="\r",Cn=`
`,OBe="\u2028",PBe="\u2029";function RBe(e){const t=e;let r=0,i=1,s=1,n=0;const o=A=>t[A]===CBe&&t[A+1]===Cn,a=A=>t[A]===Cn,l=A=>t[A]===PBe,u=A=>t[A]===OBe,c=A=>o(A)||a(A)||l(A)||u(A),p=()=>r,f=()=>i,m=()=>s,g=()=>n,b=A=>o(A)||l(A)||u(A)?Cn:t[A],w=()=>b(r),S=()=>b(r+n);function M(){return n=0,c(r)&&(i++,s=0),o(r)&&r++,r++,s++,t[r]}function x(){return o(r+n)&&n++,n++,t[r+n]}function _(){r=0,i=1,s=1,n=0}function I(A=0){n=A}function E(){const A=r+n;for(;A!==r;)M();n=0}return{index:p,line:f,column:m,peekOffset:g,charAt:b,currentChar:w,currentPeek:S,next:M,peek:x,reset:_,resetPeek:I,skipToPeek:E}}const lp=void 0,LBe=".",uH="'",kBe="tokenizer";function NBe(e,t={}){const r=t.location!==!1,i=RBe(e),s=()=>i.index(),n=()=>xBe(i.line(),i.column(),i.index()),o=n(),a=s(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:c}=t;function p(L,V,W,...Q){const se=u();if(V.column+=W,V.offset+=W,c){const le=r?yE(se.startLoc,V):null,ee=D1(L,le,{domain:kBe,args:Q});c(ee)}}function f(L,V,W){L.endLoc=n(),L.currentType=V;const Q={type:V};return r&&(Q.loc=yE(L.startLoc,L.endLoc)),W!=null&&(Q.value=W),Q}const m=L=>f(L,14);function g(L,V){return L.currentChar()===V?(L.next(),V):(p(Tt.EXPECTED_TOKEN,n(),0,V),"")}function b(L){let V="";for(;L.currentPeek()===Ic||L.currentPeek()===Cn;)V+=L.currentPeek(),L.peek();return V}function w(L){const V=b(L);return L.skipToPeek(),V}function S(L){if(L===lp)return!1;const V=L.charCodeAt(0);return V>=97&&V<=122||V>=65&&V<=90||V===95}function M(L){if(L===lp)return!1;const V=L.charCodeAt(0);return V>=48&&V<=57}function x(L,V){const{currentType:W}=V;if(W!==2)return!1;b(L);const Q=S(L.currentPeek());return L.resetPeek(),Q}function _(L,V){const{currentType:W}=V;if(W!==2)return!1;b(L);const Q=L.currentPeek()==="-"?L.peek():L.currentPeek(),se=M(Q);return L.resetPeek(),se}function I(L,V){const{currentType:W}=V;if(W!==2)return!1;b(L);const Q=L.currentPeek()===uH;return L.resetPeek(),Q}function E(L,V){const{currentType:W}=V;if(W!==8)return!1;b(L);const Q=L.currentPeek()===".";return L.resetPeek(),Q}function A(L,V){const{currentType:W}=V;if(W!==9)return!1;b(L);const Q=S(L.currentPeek());return L.resetPeek(),Q}function C(L,V){const{currentType:W}=V;if(!(W===8||W===12))return!1;b(L);const Q=L.currentPeek()===":";return L.resetPeek(),Q}function O(L,V){const{currentType:W}=V;if(W!==10)return!1;const Q=()=>{const le=L.currentPeek();return le==="{"?S(L.peek()):le==="@"||le==="%"||le==="|"||le===":"||le==="."||le===Ic||!le?!1:le===Cn?(L.peek(),Q()):N(L,!1)},se=Q();return L.resetPeek(),se}function R(L){b(L);const V=L.currentPeek()==="|";return L.resetPeek(),V}function D(L){const V=b(L),W=L.currentPeek()==="%"&&L.peek()==="{";return L.resetPeek(),{isModulo:W,hasSpace:V.length>0}}function N(L,V=!0){const W=(se=!1,le="",ee=!1)=>{const ne=L.currentPeek();return ne==="{"?le==="%"?!1:se:ne==="@"||!ne?le==="%"?!0:se:ne==="%"?(L.peek(),W(se,"%",!0)):ne==="|"?le==="%"||ee?!0:!(le===Ic||le===Cn):ne===Ic?(L.peek(),W(!0,Ic,ee)):ne===Cn?(L.peek(),W(!0,Cn,ee)):!0},Q=W();return V&&L.resetPeek(),Q}function U(L,V){const W=L.currentChar();return W===lp?lp:V(W)?(L.next(),W):null}function J(L){const V=L.charCodeAt(0);return V>=97&&V<=122||V>=65&&V<=90||V>=48&&V<=57||V===95||V===36}function y(L){return U(L,J)}function T(L){const V=L.charCodeAt(0);return V>=97&&V<=122||V>=65&&V<=90||V>=48&&V<=57||V===95||V===36||V===45}function $(L){return U(L,T)}function P(L){const V=L.charCodeAt(0);return V>=48&&V<=57}function z(L){return U(L,P)}function X(L){const V=L.charCodeAt(0);return V>=48&&V<=57||V>=65&&V<=70||V>=97&&V<=102}function ae(L){return U(L,X)}function te(L){let V="",W="";for(;V=z(L);)W+=V;return W}function ye(L){w(L);const V=L.currentChar();return V!=="%"&&p(Tt.EXPECTED_TOKEN,n(),0,V),L.next(),"%"}function Me(L){let V="";for(;;){const W=L.currentChar();if(W==="{"||W==="}"||W==="@"||W==="|"||!W)break;if(W==="%")if(N(L))V+=W,L.next();else break;else if(W===Ic||W===Cn)if(N(L))V+=W,L.next();else{if(R(L))break;V+=W,L.next()}else V+=W,L.next()}return V}function De(L){w(L);let V="",W="";for(;V=$(L);)W+=V;return L.currentChar()===lp&&p(Tt.UNTERMINATED_CLOSING_BRACE,n(),0),W}function $e(L){w(L);let V="";return L.currentChar()==="-"?(L.next(),V+=`-${te(L)}`):V+=te(L),L.currentChar()===lp&&p(Tt.UNTERMINATED_CLOSING_BRACE,n(),0),V}function gt(L){return L!==uH&&L!==Cn}function dt(L){w(L),g(L,"'");let V="",W="";for(;V=U(L,gt);)V==="\\"?W+=Je(L):W+=V;const Q=L.currentChar();return Q===Cn||Q===lp?(p(Tt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,n(),0),Q===Cn&&(L.next(),g(L,"'")),W):(g(L,"'"),W)}function Je(L){const V=L.currentChar();switch(V){case"\\":case"'":return L.next(),`\\${V}`;case"u":return He(L,V,4);case"U":return He(L,V,6);default:return p(Tt.UNKNOWN_ESCAPE_SEQUENCE,n(),0,V),""}}function He(L,V,W){g(L,V);let Q="";for(let se=0;se<W;se++){const le=ae(L);if(!le){p(Tt.INVALID_UNICODE_ESCAPE_SEQUENCE,n(),0,`\\${V}${Q}${L.currentChar()}`);break}Q+=le}return`\\${V}${Q}`}function mt(L){return L!=="{"&&L!=="}"&&L!==Ic&&L!==Cn}function zt(L){w(L);let V="",W="";for(;V=U(L,mt);)W+=V;return W}function H(L){let V="",W="";for(;V=y(L);)W+=V;return W}function G(L){const V=W=>{const Q=L.currentChar();return Q==="{"||Q==="%"||Q==="@"||Q==="|"||Q==="("||Q===")"||!Q||Q===Ic?W:(W+=Q,L.next(),V(W))};return V("")}function re(L){w(L);const V=g(L,"|");return w(L),V}function we(L,V){let W=null;switch(L.currentChar()){case"{":return V.braceNest>=1&&p(Tt.NOT_ALLOW_NEST_PLACEHOLDER,n(),0),L.next(),W=f(V,2,"{"),w(L),V.braceNest++,W;case"}":return V.braceNest>0&&V.currentType===2&&p(Tt.EMPTY_PLACEHOLDER,n(),0),L.next(),W=f(V,3,"}"),V.braceNest--,V.braceNest>0&&w(L),V.inLinked&&V.braceNest===0&&(V.inLinked=!1),W;case"@":return V.braceNest>0&&p(Tt.UNTERMINATED_CLOSING_BRACE,n(),0),W=me(L,V)||m(V),V.braceNest=0,W;default:{let se=!0,le=!0,ee=!0;if(R(L))return V.braceNest>0&&p(Tt.UNTERMINATED_CLOSING_BRACE,n(),0),W=f(V,1,re(L)),V.braceNest=0,V.inLinked=!1,W;if(V.braceNest>0&&(V.currentType===5||V.currentType===6||V.currentType===7))return p(Tt.UNTERMINATED_CLOSING_BRACE,n(),0),V.braceNest=0,k(L,V);if(se=x(L,V))return W=f(V,5,De(L)),w(L),W;if(le=_(L,V))return W=f(V,6,$e(L)),w(L),W;if(ee=I(L,V))return W=f(V,7,dt(L)),w(L),W;if(!se&&!le&&!ee)return W=f(V,13,zt(L)),p(Tt.INVALID_TOKEN_IN_PLACEHOLDER,n(),0,W.value),w(L),W;break}}return W}function me(L,V){const{currentType:W}=V;let Q=null;const se=L.currentChar();switch((W===8||W===9||W===12||W===10)&&(se===Cn||se===Ic)&&p(Tt.INVALID_LINKED_FORMAT,n(),0),se){case"@":return L.next(),Q=f(V,8,"@"),V.inLinked=!0,Q;case".":return w(L),L.next(),f(V,9,".");case":":return w(L),L.next(),f(V,10,":");default:return R(L)?(Q=f(V,1,re(L)),V.braceNest=0,V.inLinked=!1,Q):E(L,V)||C(L,V)?(w(L),me(L,V)):A(L,V)?(w(L),f(V,12,H(L))):O(L,V)?(w(L),se==="{"?we(L,V)||Q:f(V,11,G(L))):(W===8&&p(Tt.INVALID_LINKED_FORMAT,n(),0),V.braceNest=0,V.inLinked=!1,k(L,V))}}function k(L,V){let W={type:14};if(V.braceNest>0)return we(L,V)||m(V);if(V.inLinked)return me(L,V)||m(V);switch(L.currentChar()){case"{":return we(L,V)||m(V);case"}":return p(Tt.UNBALANCED_CLOSING_BRACE,n(),0),L.next(),f(V,3,"}");case"@":return me(L,V)||m(V);default:{if(R(L))return W=f(V,1,re(L)),V.braceNest=0,V.inLinked=!1,W;const{isModulo:se,hasSpace:le}=D(L);if(se)return le?f(V,0,Me(L)):f(V,4,ye(L));if(N(L))return f(V,0,Me(L));break}}return W}function q(){const{currentType:L,offset:V,startLoc:W,endLoc:Q}=l;return l.lastType=L,l.lastOffset=V,l.lastStartLoc=W,l.lastEndLoc=Q,l.offset=s(),l.startLoc=n(),i.currentChar()===lp?f(l,14):k(i,l)}return{nextToken:q,currentOffset:s,currentPosition:n,context:u}}const DBe="parser",FBe=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function jBe(e,t,r){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const i=parseInt(t||r,16);return i<=55295||i>=57344?String.fromCodePoint(i):"ï¿½"}}}function VBe(e={}){const t=e.location!==!1,{onError:r,onWarn:i}=e;function s(x,_,I,E,...A){const C=x.currentPosition();if(C.offset+=E,C.column+=E,r){const O=t?yE(I,C):null,R=D1(_,O,{domain:DBe,args:A});r(R)}}function n(x,_,I,E,...A){const C=x.currentPosition();if(C.offset+=E,C.column+=E,i){const O=t?yE(I,C):null;i(EBe(_,O,A))}}function o(x,_,I){const E={type:x};return t&&(E.start=_,E.end=_,E.loc={start:I,end:I}),E}function a(x,_,I,E){t&&(x.end=_,x.loc&&(x.loc.end=I))}function l(x,_){const I=x.context(),E=o(3,I.offset,I.startLoc);return E.value=_,a(E,x.currentOffset(),x.currentPosition()),E}function u(x,_){const I=x.context(),{lastOffset:E,lastStartLoc:A}=I,C=o(5,E,A);return C.index=parseInt(_,10),x.nextToken(),a(C,x.currentOffset(),x.currentPosition()),C}function c(x,_,I){const E=x.context(),{lastOffset:A,lastStartLoc:C}=E,O=o(4,A,C);return O.key=_,I===!0&&(O.modulo=!0),x.nextToken(),a(O,x.currentOffset(),x.currentPosition()),O}function p(x,_){const I=x.context(),{lastOffset:E,lastStartLoc:A}=I,C=o(9,E,A);return C.value=_.replace(FBe,jBe),x.nextToken(),a(C,x.currentOffset(),x.currentPosition()),C}function f(x){const _=x.nextToken(),I=x.context(),{lastOffset:E,lastStartLoc:A}=I,C=o(8,E,A);return _.type!==12?(s(x,Tt.UNEXPECTED_EMPTY_LINKED_MODIFIER,I.lastStartLoc,0),C.value="",a(C,E,A),{nextConsumeToken:_,node:C}):(_.value==null&&s(x,Tt.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,il(_)),C.value=_.value||"",a(C,x.currentOffset(),x.currentPosition()),{node:C})}function m(x,_){const I=x.context(),E=o(7,I.offset,I.startLoc);return E.value=_,a(E,x.currentOffset(),x.currentPosition()),E}function g(x){const _=x.context(),I=o(6,_.offset,_.startLoc);let E=x.nextToken();if(E.type===9){const A=f(x);I.modifier=A.node,E=A.nextConsumeToken||x.nextToken()}switch(E.type!==10&&s(x,Tt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,il(E)),E=x.nextToken(),E.type===2&&(E=x.nextToken()),E.type){case 11:E.value==null&&s(x,Tt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,il(E)),I.key=m(x,E.value||"");break;case 5:E.value==null&&s(x,Tt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,il(E)),I.key=c(x,E.value||"");break;case 6:E.value==null&&s(x,Tt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,il(E)),I.key=u(x,E.value||"");break;case 7:E.value==null&&s(x,Tt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,il(E)),I.key=p(x,E.value||"");break;default:{s(x,Tt.UNEXPECTED_EMPTY_LINKED_KEY,_.lastStartLoc,0);const A=x.context(),C=o(7,A.offset,A.startLoc);return C.value="",a(C,A.offset,A.startLoc),I.key=C,a(I,A.offset,A.startLoc),{nextConsumeToken:E,node:I}}}return a(I,x.currentOffset(),x.currentPosition()),{node:I}}function b(x){const _=x.context(),I=_.currentType===1?x.currentOffset():_.offset,E=_.currentType===1?_.endLoc:_.startLoc,A=o(2,I,E);A.items=[];let C=null,O=null;do{const N=C||x.nextToken();switch(C=null,N.type){case 0:N.value==null&&s(x,Tt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,il(N)),A.items.push(l(x,N.value||""));break;case 6:N.value==null&&s(x,Tt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,il(N)),A.items.push(u(x,N.value||""));break;case 4:O=!0;break;case 5:N.value==null&&s(x,Tt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,il(N)),A.items.push(c(x,N.value||"",!!O)),O&&(n(x,u9.USE_MODULO_SYNTAX,_.lastStartLoc,0,il(N)),O=null);break;case 7:N.value==null&&s(x,Tt.UNEXPECTED_LEXICAL_ANALYSIS,_.lastStartLoc,0,il(N)),A.items.push(p(x,N.value||""));break;case 8:{const U=g(x);A.items.push(U.node),C=U.nextConsumeToken||null;break}}}while(_.currentType!==14&&_.currentType!==1);const R=_.currentType===1?_.lastOffset:x.currentOffset(),D=_.currentType===1?_.lastEndLoc:x.currentPosition();return a(A,R,D),A}function w(x,_,I,E){const A=x.context();let C=E.items.length===0;const O=o(1,_,I);O.cases=[],O.cases.push(E);do{const R=b(x);C||(C=R.items.length===0),O.cases.push(R)}while(A.currentType!==14);return C&&s(x,Tt.MUST_HAVE_MESSAGES_IN_PLURAL,I,0),a(O,x.currentOffset(),x.currentPosition()),O}function S(x){const _=x.context(),{offset:I,startLoc:E}=_,A=b(x);return _.currentType===14?A:w(x,I,E,A)}function M(x){const _=NBe(x,Dle({},e)),I=_.context(),E=o(0,I.offset,I.startLoc);return t&&E.loc&&(E.loc.source=x),E.body=S(_),e.onCacheKey&&(E.cacheKey=e.onCacheKey(x)),I.currentType!==14&&s(_,Tt.UNEXPECTED_LEXICAL_ANALYSIS,I.lastStartLoc,0,x[I.offset]||""),a(E,_.currentOffset(),_.currentPosition()),E}return{parse:M}}function il(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"â€¦":t}function UBe(e,t={}){const r={ast:e,helpers:new Set};return{context:()=>r,helper:n=>(r.helpers.add(n),n)}}function cH(e,t){for(let r=0;r<e.length;r++)c9(e[r],t)}function c9(e,t){switch(e.type){case 1:cH(e.cases,t),t.helper("plural");break;case 2:cH(e.items,t);break;case 6:{c9(e.key,t),t.helper("linked"),t.helper("type");break}case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function zBe(e,t={}){const r=UBe(e);r.helper("normalize"),e.body&&c9(e.body,r);const i=r.context();e.helpers=Array.from(i.helpers)}function GBe(e){const t=e.body;return t.type===2?hH(t):t.cases.forEach(r=>hH(r)),e}function hH(e){if(e.items.length===1){const t=e.items[0];(t.type===3||t.type===9)&&(e.static=t.value,delete t.value)}else{const t=[];for(let r=0;r<e.items.length;r++){const i=e.items[r];if(!(i.type===3||i.type===9)||i.value==null)break;t.push(i.value)}if(t.length===e.items.length){e.static=Fle(t);for(let r=0;r<e.items.length;r++){const i=e.items[r];(i.type===3||i.type===9)&&delete i.value}}}}const BBe="minifier";function _0(e){switch(e.t=e.type,e.type){case 0:{const t=e;_0(t.body),t.b=t.body,delete t.body;break}case 1:{const t=e,r=t.cases;for(let i=0;i<r.length;i++)_0(r[i]);t.c=r,delete t.cases;break}case 2:{const t=e,r=t.items;for(let i=0;i<r.length;i++)_0(r[i]);t.i=r,delete t.items,t.static&&(t.s=t.static,delete t.static);break}case 3:case 9:case 8:case 7:{const t=e;t.value&&(t.v=t.value,delete t.value);break}case 6:{const t=e;_0(t.key),t.k=t.key,delete t.key,t.modifier&&(_0(t.modifier),t.m=t.modifier,delete t.modifier);break}case 5:{const t=e;t.i=t.index,delete t.index;break}case 4:{const t=e;t.k=t.key,delete t.key;break}default:throw D1(Tt.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:BBe,args:[e.type]})}delete e.type}const qBe="parser";function HBe(e,t){const{sourceMap:r,filename:i,breakLineCode:s,needIndent:n}=t,o=t.location!==!1,a={filename:i,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:s,needIndent:n,indentLevel:0};o&&e.loc&&(a.source=e.loc.source);const l=()=>a;function u(w,S){a.code+=w}function c(w,S=!0){const M=S?s:"";u(n?M+"  ".repeat(w):M)}function p(w=!0){const S=++a.indentLevel;w&&c(S)}function f(w=!0){const S=--a.indentLevel;w&&c(S)}function m(){c(a.indentLevel)}return{context:l,push:u,indent:p,deindent:f,newline:m,helper:w=>`_${w}`,needIndent:()=>a.needIndent}}function WBe(e,t){const{helper:r}=e;e.push(`${r("linked")}(`),qv(e,t.key),t.modifier?(e.push(", "),qv(e,t.modifier),e.push(", _type")):e.push(", undefined, _type"),e.push(")")}function JBe(e,t){const{helper:r,needIndent:i}=e;e.push(`${r("normalize")}([`),e.indent(i());const s=t.items.length;for(let n=0;n<s&&(qv(e,t.items[n]),n!==s-1);n++)e.push(", ");e.deindent(i()),e.push("])")}function ZBe(e,t){const{helper:r,needIndent:i}=e;if(t.cases.length>1){e.push(`${r("plural")}([`),e.indent(i());const s=t.cases.length;for(let n=0;n<s&&(qv(e,t.cases[n]),n!==s-1);n++)e.push(", ");e.deindent(i()),e.push("])")}}function YBe(e,t){t.body?qv(e,t.body):e.push("null")}function qv(e,t){const{helper:r}=e;switch(t.type){case 0:YBe(e,t);break;case 1:ZBe(e,t);break;case 2:JBe(e,t);break;case 6:WBe(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${r("interpolate")}(${r("list")}(${t.index}))`,t);break;case 4:e.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break;default:throw D1(Tt.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:qBe,args:[t.type]})}}const KBe=(e,t={})=>{const r=lH(t.mode)?t.mode:"normal",i=lH(t.filename)?t.filename:"message.intl",s=!!t.sourceMap,n=t.breakLineCode!=null?t.breakLineCode:r==="arrow"?";":`
`,o=t.needIndent?t.needIndent:r!=="arrow",a=e.helpers||[],l=HBe(e,{mode:r,filename:i,sourceMap:s,breakLineCode:n,needIndent:o});l.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${Fle(a.map(p=>`${p}: _${p}`),", ")} } = ctx`),l.newline()),l.push("return "),qv(l,e),l.deindent(o),l.push("}"),delete e.helpers;const{code:u,map:c}=l.context();return{ast:e,code:u,map:c?c.toJSON():void 0}};function XBe(e,t={}){const r=Dle({},t),i=!!r.jit,s=!!r.minify,n=r.optimize==null?!0:r.optimize,a=VBe(r).parse(e);return i?(n&&GBe(a),s&&_0(a),{ast:a,code:""}):(zBe(a,r),KBe(a,r))}/*!
  * core-base v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function QBe(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(bh().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(bh().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(bh().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const cf=[];cf[0]={w:[0],i:[3,0],"[":[4],o:[7]};cf[1]={w:[1],".":[2],"[":[4],o:[7]};cf[2]={w:[2],i:[3,0],0:[3,0]};cf[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};cf[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};cf[5]={"'":[4,0],o:8,l:[5,0]};cf[6]={'"':[4,0],o:8,l:[6,0]};const eqe=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function tqe(e){return eqe.test(e)}function rqe(e){const t=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return t===r&&(t===34||t===39)?e.slice(1,-1):e}function iqe(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function sqe(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:tqe(t)?rqe(t):"*"+t}function nqe(e){const t=[];let r=-1,i=0,s=0,n,o,a,l,u,c,p;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,i=4,f[0]();else{if(s=0,o===void 0||(o=sqe(o),o===!1))return!1;f[1]()}};function m(){const g=e[r+1];if(i===5&&g==="'"||i===6&&g==='"')return r++,a="\\"+g,f[0](),!0}for(;i!==null;)if(r++,n=e[r],!(n==="\\"&&m())){if(l=iqe(n),p=cf[i],u=p[l]||p.l||8,u===8||(i=u[0],u[1]!==void 0&&(c=f[u[1]],c&&(a=n,c()===!1))))return;if(i===7)return t}}const pH=new Map;function oqe(e,t){return nr(e)?e[t]:null}function aqe(e,t){if(!nr(e))return null;let r=pH.get(t);if(r||(r=nqe(t),r&&pH.set(t,r)),!r)return null;const i=r.length;let s=e,n=0;for(;n<i;){const o=s[r[n]];if(o===void 0||Cr(s))return null;s=o,n++}return s}const lqe=e=>e,uqe=e=>"",cqe="text",hqe=e=>e.length===0?"":_Be(e),pqe=wBe;function dH(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function dqe(e){const t=$i(e.pluralIndex)?e.pluralIndex:-1;return e.named&&($i(e.named.count)||$i(e.named.n))?$i(e.named.count)?e.named.count:$i(e.named.n)?e.named.n:t:t}function fqe(e,t){t.count||(t.count=e),t.n||(t.n=e)}function mqe(e={}){const t=e.locale,r=dqe(e),i=nr(e.pluralRules)&&ze(t)&&Cr(e.pluralRules[t])?e.pluralRules[t]:dH,s=nr(e.pluralRules)&&ze(t)&&Cr(e.pluralRules[t])?dH:void 0,n=S=>S[i(r,S.length,s)],o=e.list||[],a=S=>o[S],l=e.named||gr();$i(e.pluralIndex)&&fqe(r,l);const u=S=>l[S];function c(S){const M=Cr(e.messages)?e.messages(S):nr(e.messages)?e.messages[S]:!1;return M||(e.parent?e.parent.message(S):uqe)}const p=S=>e.modifiers?e.modifiers[S]:lqe,f=Pt(e.processor)&&Cr(e.processor.normalize)?e.processor.normalize:hqe,m=Pt(e.processor)&&Cr(e.processor.interpolate)?e.processor.interpolate:pqe,g=Pt(e.processor)&&ze(e.processor.type)?e.processor.type:cqe,w={list:a,named:u,plural:n,linked:(S,...M)=>{const[x,_]=M;let I="text",E="";M.length===1?nr(x)?(E=x.modifier||E,I=x.type||I):ze(x)&&(E=x||E):M.length===2&&(ze(x)&&(E=x||E),ze(_)&&(I=_||I));const A=c(S)(w),C=I==="vnode"&&Ur(A)&&E?A[0]:A;return E?p(E)(C,I):C},message:c,type:g,interpolate:m,normalize:f,values:Ns(gr(),o,l)};return w}let T2=null;function yqe(e){T2=e}function gqe(e,t,r){T2&&T2.emit("i18n:init",{timestamp:Date.now(),i18n:e,version:t,meta:r})}const vqe=bqe("function:translate");function bqe(e){return t=>T2&&T2.emit(e,t)}const jle=u9.__EXTEND_POINT__,Of=N$(jle),wqe={NOT_FOUND_KEY:jle,FALLBACK_TO_TRANSLATE:Of(),CANNOT_FORMAT_NUMBER:Of(),FALLBACK_TO_NUMBER_FORMAT:Of(),CANNOT_FORMAT_DATE:Of(),FALLBACK_TO_DATE_FORMAT:Of(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:Of(),__EXTEND_POINT__:Of()},Vle=Tt.__EXTEND_POINT__,Pf=N$(Vle),Pl={INVALID_ARGUMENT:Vle,INVALID_DATE_ARGUMENT:Pf(),INVALID_ISO_DATE_ARGUMENT:Pf(),NOT_SUPPORT_NON_STRING_MESSAGE:Pf(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Pf(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Pf(),NOT_SUPPORT_LOCALE_TYPE:Pf(),__EXTEND_POINT__:Pf()};function Du(e){return D1(e,null,void 0)}function h9(e,t){return t.locale!=null?fH(t.locale):fH(e.locale)}let SC;function fH(e){if(ze(e))return e;if(Cr(e)){if(e.resolvedOnce&&SC!=null)return SC;if(e.constructor.name==="Function"){const t=e();if(bBe(t))throw Du(Pl.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return SC=t}else throw Du(Pl.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Du(Pl.NOT_SUPPORT_LOCALE_TYPE)}function _qe(e,t,r){return[...new Set([r,...Ur(t)?t:nr(t)?Object.keys(t):ze(t)?[t]:[r]])]}function Ule(e,t,r){const i=ze(r)?r:Hv,s=e;s.__localeChainCache||(s.__localeChainCache=new Map);let n=s.__localeChainCache.get(i);if(!n){n=[];let o=[r];for(;Ur(o);)o=mH(n,o,t);const a=Ur(t)||!Pt(t)?t:t.default?t.default:null;o=ze(a)?[a]:a,Ur(o)&&mH(n,o,!1),s.__localeChainCache.set(i,n)}return n}function mH(e,t,r){let i=!0;for(let s=0;s<t.length&&Ht(i);s++){const n=t[s];ze(n)&&(i=Sqe(e,t[s],r))}return i}function Sqe(e,t,r){let i;const s=t.split("-");do{const n=s.join("-");i=xqe(e,n,r),s.splice(-1,1)}while(s.length&&i===!0);return i}function xqe(e,t,r){let i=!1;if(!e.includes(t)&&(i=!0,t)){i=t[t.length-1]!=="!";const s=t.replace(/!/g,"");e.push(s),(Ur(r)||Pt(r))&&r[s]&&(i=r[s])}return i}const Mqe="9.14.2",D$=-1,Hv="en-US",yH="",gH=e=>`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`;function Tqe(){return{upper:(e,t)=>t==="text"&&ze(e)?e.toUpperCase():t==="vnode"&&nr(e)&&"__v_isVNode"in e?e.children.toUpperCase():e,lower:(e,t)=>t==="text"&&ze(e)?e.toLowerCase():t==="vnode"&&nr(e)&&"__v_isVNode"in e?e.children.toLowerCase():e,capitalize:(e,t)=>t==="text"&&ze(e)?gH(e):t==="vnode"&&nr(e)&&"__v_isVNode"in e?gH(e.children):e}}let zle;function vH(e){zle=e}let Gle;function Iqe(e){Gle=e}let Ble;function Eqe(e){Ble=e}let qle=null;const Aqe=e=>{qle=e},$qe=()=>qle;let Hle=null;const bH=e=>{Hle=e},Cqe=()=>Hle;let wH=0;function Oqe(e={}){const t=Cr(e.onWarn)?e.onWarn:SBe,r=ze(e.version)?e.version:Mqe,i=ze(e.locale)||Cr(e.locale)?e.locale:Hv,s=Cr(i)?Hv:i,n=Ur(e.fallbackLocale)||Pt(e.fallbackLocale)||ze(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:s,o=Pt(e.messages)?e.messages:xC(s),a=Pt(e.datetimeFormats)?e.datetimeFormats:xC(s),l=Pt(e.numberFormats)?e.numberFormats:xC(s),u=Ns(gr(),e.modifiers,Tqe()),c=e.pluralRules||gr(),p=Cr(e.missing)?e.missing:null,f=Ht(e.missingWarn)||jd(e.missingWarn)?e.missingWarn:!0,m=Ht(e.fallbackWarn)||jd(e.fallbackWarn)?e.fallbackWarn:!0,g=!!e.fallbackFormat,b=!!e.unresolving,w=Cr(e.postTranslation)?e.postTranslation:null,S=Pt(e.processor)?e.processor:null,M=Ht(e.warnHtmlMessage)?e.warnHtmlMessage:!0,x=!!e.escapeParameter,_=Cr(e.messageCompiler)?e.messageCompiler:zle,I=Cr(e.messageResolver)?e.messageResolver:Gle||oqe,E=Cr(e.localeFallbacker)?e.localeFallbacker:Ble||_qe,A=nr(e.fallbackContext)?e.fallbackContext:void 0,C=e,O=nr(C.__datetimeFormatters)?C.__datetimeFormatters:new Map,R=nr(C.__numberFormatters)?C.__numberFormatters:new Map,D=nr(C.__meta)?C.__meta:{};wH++;const N={version:r,cid:wH,locale:i,fallbackLocale:n,messages:o,modifiers:u,pluralRules:c,missing:p,missingWarn:f,fallbackWarn:m,fallbackFormat:g,unresolving:b,postTranslation:w,processor:S,warnHtmlMessage:M,escapeParameter:x,messageCompiler:_,messageResolver:I,localeFallbacker:E,fallbackContext:A,onWarn:t,__meta:D};return N.datetimeFormats=a,N.numberFormats=l,N.__datetimeFormatters=O,N.__numberFormatters=R,__INTLIFY_PROD_DEVTOOLS__&&gqe(N,r,D),N}const xC=e=>({[e]:gr()});function p9(e,t,r,i,s){const{missing:n,onWarn:o}=e;if(n!==null){const a=n(e,r,t,s);return ze(a)?a:t}else return t}function wb(e,t,r){const i=e;i.__localeChainCache=new Map,e.localeFallbacker(e,r,t)}function Pqe(e,t){return e===t?!1:e.split("-")[0]===t.split("-")[0]}function Rqe(e,t){const r=t.indexOf(e);if(r===-1)return!1;for(let i=r+1;i<t.length;i++)if(Pqe(e,t[i]))return!0;return!1}function MC(e){return r=>Lqe(r,e)}function Lqe(e,t){const r=Nqe(t);if(r==null)throw I2(0);if(d9(r)===1){const n=Fqe(r);return e.plural(n.reduce((o,a)=>[...o,_H(e,a)],[]))}else return _H(e,r)}const kqe=["b","body"];function Nqe(e){return hf(e,kqe)}const Dqe=["c","cases"];function Fqe(e){return hf(e,Dqe,[])}function _H(e,t){const r=Vqe(t);if(r!=null)return e.type==="text"?r:e.normalize([r]);{const i=zqe(t).reduce((s,n)=>[...s,PN(e,n)],[]);return e.normalize(i)}}const jqe=["s","static"];function Vqe(e){return hf(e,jqe)}const Uqe=["i","items"];function zqe(e){return hf(e,Uqe,[])}function PN(e,t){const r=d9(t);switch(r){case 3:return wM(t,r);case 9:return wM(t,r);case 4:{const i=t;if(Ol(i,"k")&&i.k)return e.interpolate(e.named(i.k));if(Ol(i,"key")&&i.key)return e.interpolate(e.named(i.key));throw I2(r)}case 5:{const i=t;if(Ol(i,"i")&&$i(i.i))return e.interpolate(e.list(i.i));if(Ol(i,"index")&&$i(i.index))return e.interpolate(e.list(i.index));throw I2(r)}case 6:{const i=t,s=Hqe(i),n=Jqe(i);return e.linked(PN(e,n),s?PN(e,s):void 0,e.type)}case 7:return wM(t,r);case 8:return wM(t,r);default:throw new Error(`unhandled node on format message part: ${r}`)}}const Gqe=["t","type"];function d9(e){return hf(e,Gqe)}const Bqe=["v","value"];function wM(e,t){const r=hf(e,Bqe);if(r)return r;throw I2(t)}const qqe=["m","modifier"];function Hqe(e){return hf(e,qqe)}const Wqe=["k","key"];function Jqe(e){const t=hf(e,Wqe);if(t)return t;throw I2(6)}function hf(e,t,r){for(let i=0;i<t.length;i++){const s=t[i];if(Ol(e,s)&&e[s]!=null)return e[s]}return r}function I2(e){return new Error(`unhandled node type: ${e}`)}const Wle=e=>e;let V0=gr();function Wv(e){return nr(e)&&d9(e)===0&&(Ol(e,"b")||Ol(e,"body"))}function Jle(e,t={}){let r=!1;const i=t.onError||$Be;return t.onError=s=>{r=!0,i(s)},{...XBe(e,t),detectError:r}}const Zqe=(e,t)=>{if(!ze(e))throw Du(Pl.NOT_SUPPORT_NON_STRING_MESSAGE);{Ht(t.warnHtmlMessage)&&t.warnHtmlMessage;const i=(t.onCacheKey||Wle)(e),s=V0[i];if(s)return s;const{code:n,detectError:o}=Jle(e,t),a=new Function(`return ${n}`)();return o?a:V0[i]=a}};function Yqe(e,t){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&ze(e)){Ht(t.warnHtmlMessage)&&t.warnHtmlMessage;const i=(t.onCacheKey||Wle)(e),s=V0[i];if(s)return s;const{ast:n,detectError:o}=Jle(e,{...t,location:!1,jit:!0}),a=MC(n);return o?a:V0[i]=a}else{const r=e.cacheKey;if(r){const i=V0[r];return i||(V0[r]=MC(e))}else return MC(e)}}const SH=()=>"",Ca=e=>Cr(e);function xH(e,...t){const{fallbackFormat:r,postTranslation:i,unresolving:s,messageCompiler:n,fallbackLocale:o,messages:a}=e,[l,u]=RN(...t),c=Ht(u.missingWarn)?u.missingWarn:e.missingWarn,p=Ht(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,f=Ht(u.escapeParameter)?u.escapeParameter:e.escapeParameter,m=!!u.resolvedMessage,g=ze(u.default)||Ht(u.default)?Ht(u.default)?n?l:()=>l:u.default:r?n?l:()=>l:"",b=r||g!=="",w=h9(e,u);f&&Kqe(u);let[S,M,x]=m?[l,w,a[w]||gr()]:Zle(e,l,w,o,p,c),_=S,I=l;if(!m&&!(ze(_)||Wv(_)||Ca(_))&&b&&(_=g,I=_),!m&&(!(ze(_)||Wv(_)||Ca(_))||!ze(M)))return s?D$:l;let E=!1;const A=()=>{E=!0},C=Ca(_)?_:Yle(e,l,M,_,I,A);if(E)return _;const O=eHe(e,M,x,u),R=mqe(O),D=Xqe(e,C,R),N=i?i(D,l):D;if(__INTLIFY_PROD_DEVTOOLS__){const U={timestamp:Date.now(),key:ze(l)?l:Ca(_)?_.key:"",locale:M||(Ca(_)?_.locale:""),format:ze(_)?_:Ca(_)?_.source:"",message:N};U.meta=Ns({},e.__meta,$qe()||{}),vqe(U)}return N}function Kqe(e){Ur(e.list)?e.list=e.list.map(t=>ze(t)?aH(t):t):nr(e.named)&&Object.keys(e.named).forEach(t=>{ze(e.named[t])&&(e.named[t]=aH(e.named[t]))})}function Zle(e,t,r,i,s,n){const{messages:o,onWarn:a,messageResolver:l,localeFallbacker:u}=e,c=u(e,i,r);let p=gr(),f,m=null;const g="translate";for(let b=0;b<c.length&&(f=c[b],p=o[f]||gr(),(m=l(p,t))===null&&(m=p[t]),!(ze(m)||Wv(m)||Ca(m)));b++)if(!Rqe(f,c)){const w=p9(e,t,f,n,g);w!==t&&(m=w)}return[m,f,p]}function Yle(e,t,r,i,s,n){const{messageCompiler:o,warnHtmlMessage:a}=e;if(Ca(i)){const u=i;return u.locale=u.locale||r,u.key=u.key||t,u}if(o==null){const u=()=>i;return u.locale=r,u.key=t,u}const l=o(i,Qqe(e,r,s,i,a,n));return l.locale=r,l.key=t,l.source=i,l}function Xqe(e,t,r){return t(r)}function RN(...e){const[t,r,i]=e,s=gr();if(!ze(t)&&!$i(t)&&!Ca(t)&&!Wv(t))throw Du(Pl.INVALID_ARGUMENT);const n=$i(t)?String(t):(Ca(t),t);return $i(r)?s.plural=r:ze(r)?s.default=r:Pt(r)&&!k$(r)?s.named=r:Ur(r)&&(s.list=r),$i(i)?s.plural=i:ze(i)?s.default=i:Pt(i)&&Ns(s,i),[n,s]}function Qqe(e,t,r,i,s,n){return{locale:t,key:r,warnHtmlMessage:s,onError:o=>{throw n&&n(o),o},onCacheKey:o=>fBe(t,r,o)}}function eHe(e,t,r,i){const{modifiers:s,pluralRules:n,messageResolver:o,fallbackLocale:a,fallbackWarn:l,missingWarn:u,fallbackContext:c}=e,f={locale:t,modifiers:s,pluralRules:n,messages:m=>{let g=o(r,m);if(g==null&&c){const[,,b]=Zle(c,m,t,a,l,u);g=o(b,m)}if(ze(g)||Wv(g)){let b=!1;const S=Yle(e,m,t,g,m,()=>{b=!0});return b?SH:S}else return Ca(g)?g:SH}};return e.processor&&(f.processor=e.processor),i.list&&(f.list=i.list),i.named&&(f.named=i.named),$i(i.plural)&&(f.pluralIndex=i.plural),f}function MH(e,...t){const{datetimeFormats:r,unresolving:i,fallbackLocale:s,onWarn:n,localeFallbacker:o}=e,{__datetimeFormatters:a}=e,[l,u,c,p]=LN(...t),f=Ht(c.missingWarn)?c.missingWarn:e.missingWarn;Ht(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const m=!!c.part,g=h9(e,c),b=o(e,s,g);if(!ze(l)||l==="")return new Intl.DateTimeFormat(g,p).format(u);let w={},S,M=null;const x="datetime format";for(let E=0;E<b.length&&(S=b[E],w=r[S]||{},M=w[l],!Pt(M));E++)p9(e,l,S,f,x);if(!Pt(M)||!ze(S))return i?D$:l;let _=`${S}__${l}`;k$(p)||(_=`${_}__${JSON.stringify(p)}`);let I=a.get(_);return I||(I=new Intl.DateTimeFormat(S,Ns({},M,p)),a.set(_,I)),m?I.formatToParts(u):I.format(u)}const Kle=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function LN(...e){const[t,r,i,s]=e,n=gr();let o=gr(),a;if(ze(t)){const l=t.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!l)throw Du(Pl.INVALID_ISO_DATE_ARGUMENT);const u=l[3]?l[3].trim().startsWith("T")?`${l[1].trim()}${l[3].trim()}`:`${l[1].trim()}T${l[3].trim()}`:l[1].trim();a=new Date(u);try{a.toISOString()}catch{throw Du(Pl.INVALID_ISO_DATE_ARGUMENT)}}else if(yBe(t)){if(isNaN(t.getTime()))throw Du(Pl.INVALID_DATE_ARGUMENT);a=t}else if($i(t))a=t;else throw Du(Pl.INVALID_ARGUMENT);return ze(r)?n.key=r:Pt(r)&&Object.keys(r).forEach(l=>{Kle.includes(l)?o[l]=r[l]:n[l]=r[l]}),ze(i)?n.locale=i:Pt(i)&&(o=i),Pt(s)&&(o=s),[n.key||"",a,n,o]}function TH(e,t,r){const i=e;for(const s in r){const n=`${t}__${s}`;i.__datetimeFormatters.has(n)&&i.__datetimeFormatters.delete(n)}}function IH(e,...t){const{numberFormats:r,unresolving:i,fallbackLocale:s,onWarn:n,localeFallbacker:o}=e,{__numberFormatters:a}=e,[l,u,c,p]=kN(...t),f=Ht(c.missingWarn)?c.missingWarn:e.missingWarn;Ht(c.fallbackWarn)?c.fallbackWarn:e.fallbackWarn;const m=!!c.part,g=h9(e,c),b=o(e,s,g);if(!ze(l)||l==="")return new Intl.NumberFormat(g,p).format(u);let w={},S,M=null;const x="number format";for(let E=0;E<b.length&&(S=b[E],w=r[S]||{},M=w[l],!Pt(M));E++)p9(e,l,S,f,x);if(!Pt(M)||!ze(S))return i?D$:l;let _=`${S}__${l}`;k$(p)||(_=`${_}__${JSON.stringify(p)}`);let I=a.get(_);return I||(I=new Intl.NumberFormat(S,Ns({},M,p)),a.set(_,I)),m?I.formatToParts(u):I.format(u)}const Xle=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function kN(...e){const[t,r,i,s]=e,n=gr();let o=gr();if(!$i(t))throw Du(Pl.INVALID_ARGUMENT);const a=t;return ze(r)?n.key=r:Pt(r)&&Object.keys(r).forEach(l=>{Xle.includes(l)?o[l]=r[l]:n[l]=r[l]}),ze(i)?n.locale=i:Pt(i)&&(o=i),Pt(s)&&(o=s),[n.key||"",a,n,o]}function EH(e,t,r){const i=e;for(const s in r){const n=`${t}__${s}`;i.__numberFormatters.has(n)&&i.__numberFormatters.delete(n)}}QBe();/*!
  * vue-i18n v9.14.2
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const tHe="9.14.2";function rHe(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(bh().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(bh().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(bh().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(bh().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(bh().__INTLIFY_PROD_DEVTOOLS__=!1)}const Qle=wqe.__EXTEND_POINT__,Ec=N$(Qle);Ec(),Ec(),Ec(),Ec(),Ec(),Ec(),Ec(),Ec(),Ec();const eue=Pl.__EXTEND_POINT__,Kn=N$(eue),ts={UNEXPECTED_RETURN_TYPE:eue,INVALID_ARGUMENT:Kn(),MUST_BE_CALL_SETUP_TOP:Kn(),NOT_INSTALLED:Kn(),NOT_AVAILABLE_IN_LEGACY_MODE:Kn(),REQUIRED_VALUE:Kn(),INVALID_VALUE:Kn(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:Kn(),NOT_INSTALLED_WITH_PROVIDE:Kn(),UNEXPECTED_ERROR:Kn(),NOT_COMPATIBLE_LEGACY_VUE_I18N:Kn(),BRIDGE_SUPPORT_VUE_2_ONLY:Kn(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:Kn(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:Kn(),__EXTEND_POINT__:Kn()};function bs(e,...t){return D1(e,null,void 0)}const NN=uf("__translateVNode"),DN=uf("__datetimeParts"),FN=uf("__numberParts"),tue=uf("__setPluralRules"),rue=uf("__injectWithOption"),jN=uf("__dispose");function E2(e){if(!nr(e))return e;for(const t in e)if(Ol(e,t))if(!t.includes("."))nr(e[t])&&E2(e[t]);else{const r=t.split("."),i=r.length-1;let s=e,n=!1;for(let o=0;o<i;o++){if(r[o]in s||(s[r[o]]=gr()),!nr(s[r[o]])){n=!0;break}s=s[r[o]]}n||(s[r[i]]=e[t],delete e[t]),nr(s[r[i]])&&E2(s[r[i]])}return e}function F$(e,t){const{messages:r,__i18n:i,messageResolver:s,flatJson:n}=t,o=Pt(r)?r:Ur(i)?gr():{[e]:gr()};if(Ur(i)&&i.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:l,resource:u}=a;l?(o[l]=o[l]||gr(),S3(u,o[l])):S3(u,o)}else ze(a)&&S3(JSON.parse(a),o)}),s==null&&n)for(const a in o)Ol(o,a)&&E2(o[a]);return o}function iue(e){return e.type}function sue(e,t,r){let i=nr(t.messages)?t.messages:gr();"__i18nGlobal"in r&&(i=F$(e.locale.value,{messages:i,__i18n:r.__i18nGlobal}));const s=Object.keys(i);s.length&&s.forEach(n=>{e.mergeLocaleMessage(n,i[n])});{if(nr(t.datetimeFormats)){const n=Object.keys(t.datetimeFormats);n.length&&n.forEach(o=>{e.mergeDateTimeFormat(o,t.datetimeFormats[o])})}if(nr(t.numberFormats)){const n=Object.keys(t.numberFormats);n.length&&n.forEach(o=>{e.mergeNumberFormat(o,t.numberFormats[o])})}}}function AH(e){return jt(Eh,null,e,0)}const $H="__INTLIFY_META__",CH=()=>[],iHe=()=>!1;let OH=0;function PH(e){return(t,r,i,s)=>e(r,i,rs()||void 0,s)}const sHe=()=>{const e=rs();let t=null;return e&&(t=iue(e)[$H])?{[$H]:t}:null};function f9(e={},t){const{__root:r,__injectWithOption:i}=e,s=r===void 0,n=e.flatJson,o=mE?Se:AS,a=!!e.translateExistCompatible;let l=Ht(e.inheritLocale)?e.inheritLocale:!0;const u=o(r&&l?r.locale.value:ze(e.locale)?e.locale:Hv),c=o(r&&l?r.fallbackLocale.value:ze(e.fallbackLocale)||Ur(e.fallbackLocale)||Pt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:u.value),p=o(F$(u.value,e)),f=o(Pt(e.datetimeFormats)?e.datetimeFormats:{[u.value]:{}}),m=o(Pt(e.numberFormats)?e.numberFormats:{[u.value]:{}});let g=r?r.missingWarn:Ht(e.missingWarn)||jd(e.missingWarn)?e.missingWarn:!0,b=r?r.fallbackWarn:Ht(e.fallbackWarn)||jd(e.fallbackWarn)?e.fallbackWarn:!0,w=r?r.fallbackRoot:Ht(e.fallbackRoot)?e.fallbackRoot:!0,S=!!e.fallbackFormat,M=Cr(e.missing)?e.missing:null,x=Cr(e.missing)?PH(e.missing):null,_=Cr(e.postTranslation)?e.postTranslation:null,I=r?r.warnHtmlMessage:Ht(e.warnHtmlMessage)?e.warnHtmlMessage:!0,E=!!e.escapeParameter;const A=r?r.modifiers:Pt(e.modifiers)?e.modifiers:{};let C=e.pluralRules||r&&r.pluralRules,O;O=(()=>{s&&bH(null);const ee={version:tHe,locale:u.value,fallbackLocale:c.value,messages:p.value,modifiers:A,pluralRules:C,missing:x===null?void 0:x,missingWarn:g,fallbackWarn:b,fallbackFormat:S,unresolving:!0,postTranslation:_===null?void 0:_,warnHtmlMessage:I,escapeParameter:E,messageResolver:e.messageResolver,messageCompiler:e.messageCompiler,__meta:{framework:"vue"}};ee.datetimeFormats=f.value,ee.numberFormats=m.value,ee.__datetimeFormatters=Pt(O)?O.__datetimeFormatters:void 0,ee.__numberFormatters=Pt(O)?O.__numberFormatters:void 0;const ne=Oqe(ee);return s&&bH(ne),ne})(),wb(O,u.value,c.value);function D(){return[u.value,c.value,p.value,f.value,m.value]}const N=Bt({get:()=>u.value,set:ee=>{u.value=ee,O.locale=u.value}}),U=Bt({get:()=>c.value,set:ee=>{c.value=ee,O.fallbackLocale=c.value,wb(O,u.value,ee)}}),J=Bt(()=>p.value),y=Bt(()=>f.value),T=Bt(()=>m.value);function $(){return Cr(_)?_:null}function P(ee){_=ee,O.postTranslation=ee}function z(){return M}function X(ee){ee!==null&&(x=PH(ee)),M=ee,O.missing=x}const ae=(ee,ne,Oe,ke,_t,hr)=>{D();let Gr;try{__INTLIFY_PROD_DEVTOOLS__,s||(O.fallbackContext=r?Cqe():void 0),Gr=ee(O)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(O.fallbackContext=void 0)}if(Oe!=="translate exists"&&$i(Gr)&&Gr===D$||Oe==="translate exists"&&!Gr){const[_i,ve]=ne();return r&&w?ke(r):_t(_i)}else{if(hr(Gr))return Gr;throw bs(ts.UNEXPECTED_RETURN_TYPE)}};function te(...ee){return ae(ne=>Reflect.apply(xH,null,[ne,...ee]),()=>RN(...ee),"translate",ne=>Reflect.apply(ne.t,ne,[...ee]),ne=>ne,ne=>ze(ne))}function ye(...ee){const[ne,Oe,ke]=ee;if(ke&&!nr(ke))throw bs(ts.INVALID_ARGUMENT);return te(ne,Oe,Ns({resolvedMessage:!0},ke||{}))}function Me(...ee){return ae(ne=>Reflect.apply(MH,null,[ne,...ee]),()=>LN(...ee),"datetime format",ne=>Reflect.apply(ne.d,ne,[...ee]),()=>yH,ne=>ze(ne))}function De(...ee){return ae(ne=>Reflect.apply(IH,null,[ne,...ee]),()=>kN(...ee),"number format",ne=>Reflect.apply(ne.n,ne,[...ee]),()=>yH,ne=>ze(ne))}function $e(ee){return ee.map(ne=>ze(ne)||$i(ne)||Ht(ne)?AH(String(ne)):ne)}const dt={normalize:$e,interpolate:ee=>ee,type:"vnode"};function Je(...ee){return ae(ne=>{let Oe;const ke=ne;try{ke.processor=dt,Oe=Reflect.apply(xH,null,[ke,...ee])}finally{ke.processor=null}return Oe},()=>RN(...ee),"translate",ne=>ne[NN](...ee),ne=>[AH(ne)],ne=>Ur(ne))}function He(...ee){return ae(ne=>Reflect.apply(IH,null,[ne,...ee]),()=>kN(...ee),"number format",ne=>ne[FN](...ee),CH,ne=>ze(ne)||Ur(ne))}function mt(...ee){return ae(ne=>Reflect.apply(MH,null,[ne,...ee]),()=>LN(...ee),"datetime format",ne=>ne[DN](...ee),CH,ne=>ze(ne)||Ur(ne))}function zt(ee){C=ee,O.pluralRules=C}function H(ee,ne){return ae(()=>{if(!ee)return!1;const Oe=ze(ne)?ne:u.value,ke=we(Oe),_t=O.messageResolver(ke,ee);return a?_t!=null:Wv(_t)||Ca(_t)||ze(_t)},()=>[ee],"translate exists",Oe=>Reflect.apply(Oe.te,Oe,[ee,ne]),iHe,Oe=>Ht(Oe))}function G(ee){let ne=null;const Oe=Ule(O,c.value,u.value);for(let ke=0;ke<Oe.length;ke++){const _t=p.value[Oe[ke]]||{},hr=O.messageResolver(_t,ee);if(hr!=null){ne=hr;break}}return ne}function re(ee){const ne=G(ee);return ne??(r?r.tm(ee)||{}:{})}function we(ee){return p.value[ee]||{}}function me(ee,ne){if(n){const Oe={[ee]:ne};for(const ke in Oe)Ol(Oe,ke)&&E2(Oe[ke]);ne=Oe[ee]}p.value[ee]=ne,O.messages=p.value}function k(ee,ne){p.value[ee]=p.value[ee]||{};const Oe={[ee]:ne};if(n)for(const ke in Oe)Ol(Oe,ke)&&E2(Oe[ke]);ne=Oe[ee],S3(ne,p.value[ee]),O.messages=p.value}function q(ee){return f.value[ee]||{}}function L(ee,ne){f.value[ee]=ne,O.datetimeFormats=f.value,TH(O,ee,ne)}function V(ee,ne){f.value[ee]=Ns(f.value[ee]||{},ne),O.datetimeFormats=f.value,TH(O,ee,ne)}function W(ee){return m.value[ee]||{}}function Q(ee,ne){m.value[ee]=ne,O.numberFormats=m.value,EH(O,ee,ne)}function se(ee,ne){m.value[ee]=Ns(m.value[ee]||{},ne),O.numberFormats=m.value,EH(O,ee,ne)}OH++,r&&mE&&(ks(r.locale,ee=>{l&&(u.value=ee,O.locale=ee,wb(O,u.value,c.value))}),ks(r.fallbackLocale,ee=>{l&&(c.value=ee,O.fallbackLocale=ee,wb(O,u.value,c.value))}));const le={id:OH,locale:N,fallbackLocale:U,get inheritLocale(){return l},set inheritLocale(ee){l=ee,ee&&r&&(u.value=r.locale.value,c.value=r.fallbackLocale.value,wb(O,u.value,c.value))},get availableLocales(){return Object.keys(p.value).sort()},messages:J,get modifiers(){return A},get pluralRules(){return C||{}},get isGlobal(){return s},get missingWarn(){return g},set missingWarn(ee){g=ee,O.missingWarn=g},get fallbackWarn(){return b},set fallbackWarn(ee){b=ee,O.fallbackWarn=b},get fallbackRoot(){return w},set fallbackRoot(ee){w=ee},get fallbackFormat(){return S},set fallbackFormat(ee){S=ee,O.fallbackFormat=S},get warnHtmlMessage(){return I},set warnHtmlMessage(ee){I=ee,O.warnHtmlMessage=ee},get escapeParameter(){return E},set escapeParameter(ee){E=ee,O.escapeParameter=ee},t:te,getLocaleMessage:we,setLocaleMessage:me,mergeLocaleMessage:k,getPostTranslationHandler:$,setPostTranslationHandler:P,getMissingHandler:z,setMissingHandler:X,[tue]:zt};return le.datetimeFormats=y,le.numberFormats=T,le.rt=ye,le.te=H,le.tm=re,le.d=Me,le.n=De,le.getDateTimeFormat=q,le.setDateTimeFormat=L,le.mergeDateTimeFormat=V,le.getNumberFormat=W,le.setNumberFormat=Q,le.mergeNumberFormat=se,le[rue]=i,le[NN]=Je,le[DN]=mt,le[FN]=He,le}function nHe(e){const t=ze(e.locale)?e.locale:Hv,r=ze(e.fallbackLocale)||Ur(e.fallbackLocale)||Pt(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,i=Cr(e.missing)?e.missing:void 0,s=Ht(e.silentTranslationWarn)||jd(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,n=Ht(e.silentFallbackWarn)||jd(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,o=Ht(e.fallbackRoot)?e.fallbackRoot:!0,a=!!e.formatFallbackMessages,l=Pt(e.modifiers)?e.modifiers:{},u=e.pluralizationRules,c=Cr(e.postTranslation)?e.postTranslation:void 0,p=ze(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,f=!!e.escapeParameterHtml,m=Ht(e.sync)?e.sync:!0;let g=e.messages;if(Pt(e.sharedMessages)){const E=e.sharedMessages;g=Object.keys(E).reduce((C,O)=>{const R=C[O]||(C[O]={});return Ns(R,E[O]),C},g||{})}const{__i18n:b,__root:w,__injectWithOption:S}=e,M=e.datetimeFormats,x=e.numberFormats,_=e.flatJson,I=e.translateExistCompatible;return{locale:t,fallbackLocale:r,messages:g,flatJson:_,datetimeFormats:M,numberFormats:x,missing:i,missingWarn:s,fallbackWarn:n,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:u,postTranslation:c,warnHtmlMessage:p,escapeParameter:f,messageResolver:e.messageResolver,inheritLocale:m,translateExistCompatible:I,__i18n:b,__root:w,__injectWithOption:S}}function VN(e={},t){{const r=f9(nHe(e)),{__extender:i}=e,s={id:r.id,get locale(){return r.locale.value},set locale(n){r.locale.value=n},get fallbackLocale(){return r.fallbackLocale.value},set fallbackLocale(n){r.fallbackLocale.value=n},get messages(){return r.messages.value},get datetimeFormats(){return r.datetimeFormats.value},get numberFormats(){return r.numberFormats.value},get availableLocales(){return r.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(n){},get missing(){return r.getMissingHandler()},set missing(n){r.setMissingHandler(n)},get silentTranslationWarn(){return Ht(r.missingWarn)?!r.missingWarn:r.missingWarn},set silentTranslationWarn(n){r.missingWarn=Ht(n)?!n:n},get silentFallbackWarn(){return Ht(r.fallbackWarn)?!r.fallbackWarn:r.fallbackWarn},set silentFallbackWarn(n){r.fallbackWarn=Ht(n)?!n:n},get modifiers(){return r.modifiers},get formatFallbackMessages(){return r.fallbackFormat},set formatFallbackMessages(n){r.fallbackFormat=n},get postTranslation(){return r.getPostTranslationHandler()},set postTranslation(n){r.setPostTranslationHandler(n)},get sync(){return r.inheritLocale},set sync(n){r.inheritLocale=n},get warnHtmlInMessage(){return r.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(n){r.warnHtmlMessage=n!=="off"},get escapeParameterHtml(){return r.escapeParameter},set escapeParameterHtml(n){r.escapeParameter=n},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(n){},get pluralizationRules(){return r.pluralRules||{}},__composer:r,t(...n){const[o,a,l]=n,u={};let c=null,p=null;if(!ze(o))throw bs(ts.INVALID_ARGUMENT);const f=o;return ze(a)?u.locale=a:Ur(a)?c=a:Pt(a)&&(p=a),Ur(l)?c=l:Pt(l)&&(p=l),Reflect.apply(r.t,r,[f,c||p||{},u])},rt(...n){return Reflect.apply(r.rt,r,[...n])},tc(...n){const[o,a,l]=n,u={plural:1};let c=null,p=null;if(!ze(o))throw bs(ts.INVALID_ARGUMENT);const f=o;return ze(a)?u.locale=a:$i(a)?u.plural=a:Ur(a)?c=a:Pt(a)&&(p=a),ze(l)?u.locale=l:Ur(l)?c=l:Pt(l)&&(p=l),Reflect.apply(r.t,r,[f,c||p||{},u])},te(n,o){return r.te(n,o)},tm(n){return r.tm(n)},getLocaleMessage(n){return r.getLocaleMessage(n)},setLocaleMessage(n,o){r.setLocaleMessage(n,o)},mergeLocaleMessage(n,o){r.mergeLocaleMessage(n,o)},d(...n){return Reflect.apply(r.d,r,[...n])},getDateTimeFormat(n){return r.getDateTimeFormat(n)},setDateTimeFormat(n,o){r.setDateTimeFormat(n,o)},mergeDateTimeFormat(n,o){r.mergeDateTimeFormat(n,o)},n(...n){return Reflect.apply(r.n,r,[...n])},getNumberFormat(n){return r.getNumberFormat(n)},setNumberFormat(n,o){r.setNumberFormat(n,o)},mergeNumberFormat(n,o){r.mergeNumberFormat(n,o)},getChoiceIndex(n,o){return-1}};return s.__extender=i,s}}const m9={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}};function oHe({slots:e},t){return t.length===1&&t[0]==="default"?(e.default?e.default():[]).reduce((i,s)=>[...i,...s.type===xr?s.children:[s]],[]):t.reduce((r,i)=>{const s=e[i];return s&&(r[i]=s()),r},gr())}function nue(e){return xr}const aHe=Wt({name:"i18n-t",props:Ns({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>$i(e)||!isNaN(e)}},m9),setup(e,t){const{slots:r,attrs:i}=t,s=e.i18n||Xr({useScope:e.scope,__useComponent:!0});return()=>{const n=Object.keys(r).filter(p=>p!=="_"),o=gr();e.locale&&(o.locale=e.locale),e.plural!==void 0&&(o.plural=ze(e.plural)?+e.plural:e.plural);const a=oHe(t,n),l=s[NN](e.keypath,a,o),u=Ns(gr(),i),c=ze(e.tag)||nr(e.tag)?e.tag:nue();return Cl(c,u,l)}}}),RH=aHe;function lHe(e){return Ur(e)&&!ze(e[0])}function oue(e,t,r,i){const{slots:s,attrs:n}=t;return()=>{const o={part:!0};let a=gr();e.locale&&(o.locale=e.locale),ze(e.format)?o.key=e.format:nr(e.format)&&(ze(e.format.key)&&(o.key=e.format.key),a=Object.keys(e.format).reduce((f,m)=>r.includes(m)?Ns(gr(),f,{[m]:e.format[m]}):f,gr()));const l=i(e.value,o,a);let u=[o.key];Ur(l)?u=l.map((f,m)=>{const g=s[f.type],b=g?g({[f.type]:f.value,index:m,parts:l}):[f.value];return lHe(b)&&(b[0].key=`${f.type}-${m}`),b}):ze(l)&&(u=[l]);const c=Ns(gr(),n),p=ze(e.tag)||nr(e.tag)?e.tag:nue();return Cl(p,c,u)}}const uHe=Wt({name:"i18n-n",props:Ns({value:{type:Number,required:!0},format:{type:[String,Object]}},m9),setup(e,t){const r=e.i18n||Xr({useScope:e.scope,__useComponent:!0});return oue(e,t,Xle,(...i)=>r[FN](...i))}}),LH=uHe,cHe=Wt({name:"i18n-d",props:Ns({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},m9),setup(e,t){const r=e.i18n||Xr({useScope:e.scope,__useComponent:!0});return oue(e,t,Kle,(...i)=>r[DN](...i))}}),kH=cHe;function hHe(e,t){const r=e;if(e.mode==="composition")return r.__getInstance(t)||e.global;{const i=r.__getInstance(t);return i!=null?i.__composer:e.global.__composer}}function pHe(e){const t=o=>{const{instance:a,modifiers:l,value:u}=o;if(!a||!a.$)throw bs(ts.UNEXPECTED_ERROR);const c=hHe(e,a.$),p=NH(u);return[Reflect.apply(c.t,c,[...DH(p)]),c]};return{created:(o,a)=>{const[l,u]=t(a);mE&&e.global===u&&(o.__i18nWatcher=ks(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),o.__composer=u,o.textContent=l},unmounted:o=>{mE&&o.__i18nWatcher&&(o.__i18nWatcher(),o.__i18nWatcher=void 0,delete o.__i18nWatcher),o.__composer&&(o.__composer=void 0,delete o.__composer)},beforeUpdate:(o,{value:a})=>{if(o.__composer){const l=o.__composer,u=NH(a);o.textContent=Reflect.apply(l.t,l,[...DH(u)])}},getSSRProps:o=>{const[a]=t(o);return{textContent:a}}}}function NH(e){if(ze(e))return{path:e};if(Pt(e)){if(!("path"in e))throw bs(ts.REQUIRED_VALUE,"path");return e}else throw bs(ts.INVALID_VALUE)}function DH(e){const{path:t,locale:r,args:i,choice:s,plural:n}=e,o={},a=i||{};return ze(r)&&(o.locale=r),$i(s)&&(o.plural=s),$i(n)&&(o.plural=n),[t,a,o]}function dHe(e,t,...r){const i=Pt(r[0])?r[0]:{},s=!!i.useI18nComponentName;(Ht(i.globalInstall)?i.globalInstall:!0)&&([s?"i18n":RH.name,"I18nT"].forEach(o=>e.component(o,RH)),[LH.name,"I18nN"].forEach(o=>e.component(o,LH)),[kH.name,"I18nD"].forEach(o=>e.component(o,kH))),e.directive("t",pHe(t))}function fHe(e,t,r){return{beforeCreate(){const i=rs();if(!i)throw bs(ts.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const n=s.i18n;if(s.__i18n&&(n.__i18n=s.__i18n),n.__root=t,this===this.$root)this.$i18n=FH(e,n);else{n.__injectWithOption=!0,n.__extender=r.__vueI18nExtend,this.$i18n=VN(n);const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=FH(e,s);else{this.$i18n=VN({__i18n:s.__i18n,__injectWithOption:!0,__extender:r.__vueI18nExtend,__root:t});const n=this.$i18n;n.__extender&&(n.__disposer=n.__extender(this.$i18n))}else this.$i18n=e;s.__i18nGlobal&&sue(t,s,s),this.$t=(...n)=>this.$i18n.t(...n),this.$rt=(...n)=>this.$i18n.rt(...n),this.$tc=(...n)=>this.$i18n.tc(...n),this.$te=(n,o)=>this.$i18n.te(n,o),this.$d=(...n)=>this.$i18n.d(...n),this.$n=(...n)=>this.$i18n.n(...n),this.$tm=n=>this.$i18n.tm(n),r.__setInstance(i,this.$i18n)},mounted(){},unmounted(){const i=rs();if(!i)throw bs(ts.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),r.__deleteInstance(i),delete this.$i18n}}}function FH(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[tue](t.pluralizationRules||e.pluralizationRules);const r=F$(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(r).forEach(i=>e.mergeLocaleMessage(i,r[i])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(i=>e.mergeDateTimeFormat(i,t.datetimeFormats[i])),t.numberFormats&&Object.keys(t.numberFormats).forEach(i=>e.mergeNumberFormat(i,t.numberFormats[i])),e}const mHe=uf("global-vue-i18n");function yHe(e={},t){const r=__VUE_I18N_LEGACY_API__&&Ht(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,i=Ht(e.globalInjection)?e.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&r?!!e.allowComposition:!0,n=new Map,[o,a]=gHe(e,r),l=uf("");function u(f){return n.get(f)||null}function c(f,m){n.set(f,m)}function p(f){n.delete(f)}{const f={get mode(){return __VUE_I18N_LEGACY_API__&&r?"legacy":"composition"},get allowComposition(){return s},async install(m,...g){if(m.__VUE_I18N_SYMBOL__=l,m.provide(m.__VUE_I18N_SYMBOL__,f),Pt(g[0])){const S=g[0];f.__composerExtend=S.__composerExtend,f.__vueI18nExtend=S.__vueI18nExtend}let b=null;!r&&i&&(b=IHe(m,f.global)),__VUE_I18N_FULL_INSTALL__&&dHe(m,f,...g),__VUE_I18N_LEGACY_API__&&r&&m.mixin(fHe(a,a.__composer,f));const w=m.unmount;m.unmount=()=>{b&&b(),f.dispose(),w()}},get global(){return a},dispose(){o.stop()},__instances:n,__getInstance:u,__setInstance:c,__deleteInstance:p};return f}}function Xr(e={}){const t=rs();if(t==null)throw bs(ts.MUST_BE_CALL_SETUP_TOP);if(!t.isCE&&t.appContext.app!=null&&!t.appContext.app.__VUE_I18N_SYMBOL__)throw bs(ts.NOT_INSTALLED);const r=vHe(t),i=wHe(r),s=iue(t),n=bHe(e,s);if(__VUE_I18N_LEGACY_API__&&r.mode==="legacy"&&!e.__useComponent){if(!r.allowComposition)throw bs(ts.NOT_AVAILABLE_IN_LEGACY_MODE);return MHe(t,n,i,e)}if(n==="global")return sue(i,e,s),i;if(n==="parent"){let l=_He(r,t,e.__useComponent);return l==null&&(l=i),l}const o=r;let a=o.__getInstance(t);if(a==null){const l=Ns({},e);"__i18n"in s&&(l.__i18n=s.__i18n),i&&(l.__root=i),a=f9(l),o.__composerExtend&&(a[jN]=o.__composerExtend(a)),xHe(o,t,a),o.__setInstance(t,a)}return a}function gHe(e,t,r){const i=w$();{const s=__VUE_I18N_LEGACY_API__&&t?i.run(()=>VN(e)):i.run(()=>f9(e));if(s==null)throw bs(ts.UNEXPECTED_ERROR);return[i,s]}}function vHe(e){{const t=vs(e.isCE?mHe:e.appContext.app.__VUE_I18N_SYMBOL__);if(!t)throw bs(e.isCE?ts.NOT_INSTALLED_WITH_PROVIDE:ts.UNEXPECTED_ERROR);return t}}function bHe(e,t){return k$(e)?"__i18n"in t?"local":"global":e.useScope?e.useScope:"local"}function wHe(e){return e.mode==="composition"?e.global:e.global.__composer}function _He(e,t,r=!1){let i=null;const s=t.root;let n=SHe(t,r);for(;n!=null;){const o=e;if(e.mode==="composition")i=o.__getInstance(n);else if(__VUE_I18N_LEGACY_API__){const a=o.__getInstance(n);a!=null&&(i=a.__composer,r&&i&&!i[rue]&&(i=null))}if(i!=null||s===n)break;n=n.parent}return i}function SHe(e,t=!1){return e==null?null:t&&e.vnode.ctx||e.parent}function xHe(e,t,r){wn(()=>{},t),N1(()=>{const i=r;e.__deleteInstance(t);const s=i[jN];s&&(s(),delete i[jN])},t)}function MHe(e,t,r,i={}){const s=t==="local",n=AS(null);if(s&&e.proxy&&!(e.proxy.$options.i18n||e.proxy.$options.__i18n))throw bs(ts.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const o=Ht(i.inheritLocale)?i.inheritLocale:!ze(i.locale),a=Se(!s||o?r.locale.value:ze(i.locale)?i.locale:Hv),l=Se(!s||o?r.fallbackLocale.value:ze(i.fallbackLocale)||Ur(i.fallbackLocale)||Pt(i.fallbackLocale)||i.fallbackLocale===!1?i.fallbackLocale:a.value),u=Se(F$(a.value,i)),c=Se(Pt(i.datetimeFormats)?i.datetimeFormats:{[a.value]:{}}),p=Se(Pt(i.numberFormats)?i.numberFormats:{[a.value]:{}}),f=s?r.missingWarn:Ht(i.missingWarn)||jd(i.missingWarn)?i.missingWarn:!0,m=s?r.fallbackWarn:Ht(i.fallbackWarn)||jd(i.fallbackWarn)?i.fallbackWarn:!0,g=s?r.fallbackRoot:Ht(i.fallbackRoot)?i.fallbackRoot:!0,b=!!i.fallbackFormat,w=Cr(i.missing)?i.missing:null,S=Cr(i.postTranslation)?i.postTranslation:null,M=s?r.warnHtmlMessage:Ht(i.warnHtmlMessage)?i.warnHtmlMessage:!0,x=!!i.escapeParameter,_=s?r.modifiers:Pt(i.modifiers)?i.modifiers:{},I=i.pluralRules||s&&r.pluralRules;function E(){return[a.value,l.value,u.value,c.value,p.value]}const A=Bt({get:()=>n.value?n.value.locale.value:a.value,set:G=>{n.value&&(n.value.locale.value=G),a.value=G}}),C=Bt({get:()=>n.value?n.value.fallbackLocale.value:l.value,set:G=>{n.value&&(n.value.fallbackLocale.value=G),l.value=G}}),O=Bt(()=>n.value?n.value.messages.value:u.value),R=Bt(()=>c.value),D=Bt(()=>p.value);function N(){return n.value?n.value.getPostTranslationHandler():S}function U(G){n.value&&n.value.setPostTranslationHandler(G)}function J(){return n.value?n.value.getMissingHandler():w}function y(G){n.value&&n.value.setMissingHandler(G)}function T(G){return E(),G()}function $(...G){return n.value?T(()=>Reflect.apply(n.value.t,null,[...G])):T(()=>"")}function P(...G){return n.value?Reflect.apply(n.value.rt,null,[...G]):""}function z(...G){return n.value?T(()=>Reflect.apply(n.value.d,null,[...G])):T(()=>"")}function X(...G){return n.value?T(()=>Reflect.apply(n.value.n,null,[...G])):T(()=>"")}function ae(G){return n.value?n.value.tm(G):{}}function te(G,re){return n.value?n.value.te(G,re):!1}function ye(G){return n.value?n.value.getLocaleMessage(G):{}}function Me(G,re){n.value&&(n.value.setLocaleMessage(G,re),u.value[G]=re)}function De(G,re){n.value&&n.value.mergeLocaleMessage(G,re)}function $e(G){return n.value?n.value.getDateTimeFormat(G):{}}function gt(G,re){n.value&&(n.value.setDateTimeFormat(G,re),c.value[G]=re)}function dt(G,re){n.value&&n.value.mergeDateTimeFormat(G,re)}function Je(G){return n.value?n.value.getNumberFormat(G):{}}function He(G,re){n.value&&(n.value.setNumberFormat(G,re),p.value[G]=re)}function mt(G,re){n.value&&n.value.mergeNumberFormat(G,re)}const zt={get id(){return n.value?n.value.id:-1},locale:A,fallbackLocale:C,messages:O,datetimeFormats:R,numberFormats:D,get inheritLocale(){return n.value?n.value.inheritLocale:o},set inheritLocale(G){n.value&&(n.value.inheritLocale=G)},get availableLocales(){return n.value?n.value.availableLocales:Object.keys(u.value)},get modifiers(){return n.value?n.value.modifiers:_},get pluralRules(){return n.value?n.value.pluralRules:I},get isGlobal(){return n.value?n.value.isGlobal:!1},get missingWarn(){return n.value?n.value.missingWarn:f},set missingWarn(G){n.value&&(n.value.missingWarn=G)},get fallbackWarn(){return n.value?n.value.fallbackWarn:m},set fallbackWarn(G){n.value&&(n.value.missingWarn=G)},get fallbackRoot(){return n.value?n.value.fallbackRoot:g},set fallbackRoot(G){n.value&&(n.value.fallbackRoot=G)},get fallbackFormat(){return n.value?n.value.fallbackFormat:b},set fallbackFormat(G){n.value&&(n.value.fallbackFormat=G)},get warnHtmlMessage(){return n.value?n.value.warnHtmlMessage:M},set warnHtmlMessage(G){n.value&&(n.value.warnHtmlMessage=G)},get escapeParameter(){return n.value?n.value.escapeParameter:x},set escapeParameter(G){n.value&&(n.value.escapeParameter=G)},t:$,getPostTranslationHandler:N,setPostTranslationHandler:U,getMissingHandler:J,setMissingHandler:y,rt:P,d:z,n:X,tm:ae,te,getLocaleMessage:ye,setLocaleMessage:Me,mergeLocaleMessage:De,getDateTimeFormat:$e,setDateTimeFormat:gt,mergeDateTimeFormat:dt,getNumberFormat:Je,setNumberFormat:He,mergeNumberFormat:mt};function H(G){G.locale.value=a.value,G.fallbackLocale.value=l.value,Object.keys(u.value).forEach(re=>{G.mergeLocaleMessage(re,u.value[re])}),Object.keys(c.value).forEach(re=>{G.mergeDateTimeFormat(re,c.value[re])}),Object.keys(p.value).forEach(re=>{G.mergeNumberFormat(re,p.value[re])}),G.escapeParameter=x,G.fallbackFormat=b,G.fallbackRoot=g,G.fallbackWarn=m,G.missingWarn=f,G.warnHtmlMessage=M}return C$(()=>{if(e.proxy==null||e.proxy.$i18n==null)throw bs(ts.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const G=n.value=e.proxy.$i18n.__composer;t==="global"?(a.value=G.locale.value,l.value=G.fallbackLocale.value,u.value=G.messages.value,c.value=G.datetimeFormats.value,p.value=G.numberFormats.value):s&&H(G)}),zt}const THe=["locale","fallbackLocale","availableLocales"],jH=["t","rt","d","n","tm","te"];function IHe(e,t){const r=Object.create(null);return THe.forEach(s=>{const n=Object.getOwnPropertyDescriptor(t,s);if(!n)throw bs(ts.UNEXPECTED_ERROR);const o=ir(n.value)?{get(){return n.value.value},set(a){n.value.value=a}}:{get(){return n.get&&n.get()}};Object.defineProperty(r,s,o)}),e.config.globalProperties.$i18n=r,jH.forEach(s=>{const n=Object.getOwnPropertyDescriptor(t,s);if(!n||!n.value)throw bs(ts.UNEXPECTED_ERROR);Object.defineProperty(e.config.globalProperties,`$${s}`,n)}),()=>{delete e.config.globalProperties.$i18n,jH.forEach(s=>{delete e.config.globalProperties[`$${s}`]})}}rHe();__INTLIFY_JIT_COMPILATION__?vH(Yqe):vH(Zqe);Iqe(aqe);Eqe(Ule);if(__INTLIFY_PROD_DEVTOOLS__){const e=bh();e.__INTLIFY__=!0,yqe(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const EHe={en:{"lang-code":"en","lang-dir":"ltr","lang-en":"English","lang-fr":"anglais","lang-native":"English","ramp.about.open":"Open About RAMP","ramp.about":"About RAMP","keyboardInstructions.title":"Keyboard Instructions","keyboardInstructions.open":"Open keyboard instructions","keyboardInstructions.app":"Use 'Tab' to navigate between sections of the application.","keyboardInstructions.lists":"Use the arrow keys to move between items in lists. With a list item selected you can press 'Space' or 'Enter' to click the item. You can also navigate within the list item using 'Tab'.","keyboardInstructions.map":"When the map is selected, use the arrow keys to move around and 'Enter' to select a point.","keyboardInstructions.OK":"OK","map.toggleScaleToMetric":"Switch to metric map scale","map.toggleScaleToImperial":"Switch to imperial map scale","map.coordinates.east":"E","map.coordinates.west":"W","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Change Language","map.language.short":"EN-CA","map.language.en":"English","map.language.fr":"FranÃ§ais","map.language.curr":"current","map.export":"export map","notifications.open":"Open Notifications Panel","notifications.title":"Notifications","notifications.empty":"No new notifications.","notifications.controls.dismiss":"Dismiss","notifications.controls.expand":"Expand","notifications.controls.collapse":"Collapse","notifications.controls.clearAll":"Clear All","panels.access":"Press enter or space to access the panel","panels.controls.close":"Close","panels.controls.pin":"Pin","panels.controls.unpin":"Unpin","panels.controls.back":"Back","panels.controls.optionsMenu":"More","panels.controls.minimize":"Minimize","panels.controls.expand":"Expand","panels.controls.collapse":"Collapse","panels.controls.moveRight":"Move Right","panels.controls.moveLeft":"Move Left","panels.controls.items":"Use the arrow keys to navigate the items","panels.alert.open":"{name} panel opened","panels.alert.close":"{name} panel closed","panels.alert.minimize":"{name} panel minimized","layer.error":"{id} failed to load","layer.longload":"{id} is taking longer than expected to load","layer.longdraw":"{id} is taking longer than expected to draw","layer.mismatch":"{name} cannot be displayed in the current projection","layer.filtersdisabled":"Filters have been disabled for {name}","layer.filterwarning":"You are attempting to use a grid that contains unmodifiable layers. Filtering will be partially disabled.","layer.noexportmap":"{name} was attempted to be added as a Map Image Layer but Map Export is not enabled for the service","caption.attributionDefaultText":"Powered by ESRI","caption.attributionLogoAltText":"ESRI logo","caption.attributionLink":"https://www.esri.com/","select.items":" Use Arrow-up/down to select a value. Use Alt+Shift+Arrow-up/down to toggle the select menu"},fr:{"lang-code":"fr","lang-dir":"ltr","lang-en":"French","lang-fr":"franÃ§ais","lang-native":"FranÃ§ais","ramp.about.open":"Ouvrir Ã€ propos de PCAR","ramp.about":"Ã€ propos de PCAR","keyboardInstructions.title":"Instructions clavier","keyboardInstructions.open":"Instructions clavier ouvert","keyboardInstructions.app":"Utilisez la touche Tab pour vous dÃ©placer entre les sections de l'application.","keyboardInstructions.lists":"Lorsqu'un Ã©lÃ©ment de la liste est sÃ©lectionnÃ©, vous pouvez appuyer sur Â« Espace Â» ou Â« EntrÃ©e Â» pour cliquer sur l'Ã©lÃ©ment. Vous pouvez Ã©galement vous dÃ©placer au sein de l'Ã©lÃ©ment de la liste au moyen de la touche Â« Tab Â».","keyboardInstructions.map":"Lorsque la carte est sÃ©lectionnÃ©e, utilisez le pavÃ© curseur pour vous dÃ©placer et appuyez sur Â« EntrÃ©e Â»  pour sÃ©lectionner un point.","keyboardInstructions.OK":"OK","map.toggleScaleToMetric":"Passer Ã  l'Ã©chelle mÃ©trique","map.toggleScaleToImperial":"Passer Ã  l'Ã©chelle impÃ©riale","map.coordinates.east":"E","map.coordinates.west":"O","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Changer de langue","map.language.short":"FR-CA","map.language.en":"English","map.language.fr":"FranÃ§ais","map.language.curr":"actuel","map.export":"exporter la carte","notifications.open":"Ouvrir la fenÃªtre des notifications","notifications.title":"Notifications","notifications.empty":"Aucune nouvelle notification.","notifications.controls.dismiss":"Rejeter","notifications.controls.expand":"DÃ©velopper","notifications.controls.collapse":"RÃ©duire","notifications.controls.clearAll":"Effacer tout","panels.access":"Appuyez sur EntrÃ©e ou sur la barre d'espacement pour accÃ©der au panneau","panels.controls.close":"Fermer","panels.controls.pin":"Ã‰pingler","panels.controls.unpin":"DÃ©sÃ©pingler","panels.controls.back":"Retour","panels.controls.optionsMenu":"Plus","panels.controls.minimize":"RÃ©duire","panels.controls.expand":"DÃ©velopper","panels.controls.collapse":"RÃ©duire","panels.controls.moveRight":"Aller Ã  droite","panels.controls.moveLeft":"Aller Ã  gauche","panels.controls.items":"Utilisez les touches flÃ©chÃ©es pour naviguer entre les Ã©lÃ©ments","panels.alert.open":"FenÃªtre {name} ouverte","panels.alert.close":"FenÃªtre {name} fermÃ©e","panels.alert.minimize":"FenÃªtre {name} rÃ©duite","layer.error":"Ã‰chec du chargement de {id}","layer.longload":"Le chargement de {id} met plus de temps que prÃ©vu","layer.longdraw":"{id} prend plus de temps que prÃ©vu Ã  extraire","layer.mismatch":"{id} ne peut pas s'afficher dans la projection actuelle","layer.filtersdisabled":"Les filtres ont Ã©tÃ© dÃ©sactivÃ©s pour {name}","layer.filterwarning":"Vous essayez d'utiliser une grille qui contient des couches non modifiables. Le filtrage sera partiellement dÃ©sactivÃ©.","layer.noexportmap":"La tentative dâ€™ajouter {name} comme couche dâ€™imagerie cartographique a Ã©chouÃ©e car elle nâ€™a pu Ãªtre activÃ© pour ce service","caption.attributionDefaultText":"PropulsÃ© par ESRI","caption.attributionLogoAltText":"Logo ESRI","caption.attributionLink":"https://www.esri.com/fr-fr/home","select.items":"Utilisez FlÃ¨che haut/bas pour sÃ©lectionner une valeur. Utilisez Alt+Shift+FlÃ¨che haut/bas pour basculer le menu de sÃ©lection"}},VH="en",AHe={en:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}},fr:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}}};function $He(){return yHe({legacy:!1,locale:document.documentElement.getAttribute("lang")||VH,fallbackLocale:VH,globalInjection:!0,messages:EHe,numberFormats:AHe})}var TC={exports:{}};/*!
* screenfull
* v5.0.2 - 2020-02-13
* (c) Sindre Sorhus; MIT License
*/var UH;function CHe(){return UH||(UH=1,function(e){(function(){var t=typeof window<"u"&&typeof window.document<"u"?window.document:{},r=e.exports,i=function(){for(var o,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,u=a.length,c={};l<u;l++)if(o=a[l],o&&o[1]in t){for(l=0;l<o.length;l++)c[a[0][l]]=o[l];return c}return!1}(),s={change:i.fullscreenchange,error:i.fullscreenerror},n={request:function(o){return new Promise(function(a,l){var u=function(){this.off("change",u),a()}.bind(this);this.on("change",u),o=o||t.documentElement;var c=o[i.requestFullscreen]();c instanceof Promise&&c.then(u).catch(l)}.bind(this))},exit:function(){return new Promise(function(o,a){if(!this.isFullscreen){o();return}var l=function(){this.off("change",l),o()}.bind(this);this.on("change",l);var u=t[i.exitFullscreen]();u instanceof Promise&&u.then(l).catch(a)}.bind(this))},toggle:function(o){return this.isFullscreen?this.exit():this.request(o)},onchange:function(o){this.on("change",o)},onerror:function(o){this.on("error",o)},on:function(o,a){var l=s[o];l&&t.addEventListener(l,a,!1)},off:function(o,a){var l=s[o];l&&t.removeEventListener(l,a,!1)},raw:i};if(!i){r?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(n,{isFullscreen:{get:function(){return!!t[i.fullscreenElement]}},element:{enumerable:!0,get:function(){return t[i.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return!!t[i.fullscreenEnabled]}}}),r?e.exports=n:window.screenfull=n})()}(TC)),TC.exports}var OHe=CHe();const tu=wS(OHe);var Rw={exports:{}};Rw.exports;var zH;function PHe(){return zH||(zH=1,function(e,t){var r=200,i="__lodash_hash_undefined__",s=9007199254740991,n="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",u="[object Error]",c="[object Function]",p="[object GeneratorFunction]",f="[object Map]",m="[object Number]",g="[object Object]",b="[object Promise]",w="[object RegExp]",S="[object Set]",M="[object String]",x="[object Symbol]",_="[object WeakMap]",I="[object ArrayBuffer]",E="[object DataView]",A="[object Float32Array]",C="[object Float64Array]",O="[object Int8Array]",R="[object Int16Array]",D="[object Int32Array]",N="[object Uint8Array]",U="[object Uint8ClampedArray]",J="[object Uint16Array]",y="[object Uint32Array]",T=/[\\^$.*+?()[\]{}|]/g,$=/\w*$/,P=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,X={};X[n]=X[o]=X[I]=X[E]=X[a]=X[l]=X[A]=X[C]=X[O]=X[R]=X[D]=X[f]=X[m]=X[g]=X[w]=X[S]=X[M]=X[x]=X[N]=X[U]=X[J]=X[y]=!0,X[u]=X[c]=X[_]=!1;var ae=typeof rM=="object"&&rM&&rM.Object===Object&&rM,te=typeof self=="object"&&self&&self.Object===Object&&self,ye=ae||te||Function("return this")(),Me=t&&!t.nodeType&&t,De=Me&&!0&&e&&!e.nodeType&&e,$e=De&&De.exports===Me;function gt(B,de){return B.set(de[0],de[1]),B}function dt(B,de){return B.add(de),B}function Je(B,de){for(var xe=-1,st=B?B.length:0;++xe<st&&de(B[xe],xe,B)!==!1;);return B}function He(B,de){for(var xe=-1,st=de.length,xs=B.length;++xe<st;)B[xs+xe]=de[xe];return B}function mt(B,de,xe,st){for(var xs=-1,Jn=B?B.length:0;++xs<Jn;)xe=de(xe,B[xs],xs,B);return xe}function zt(B,de){for(var xe=-1,st=Array(B);++xe<B;)st[xe]=de(xe);return st}function H(B,de){return B?.[de]}function G(B){var de=!1;if(B!=null&&typeof B.toString!="function")try{de=!!(B+"")}catch{}return de}function re(B){var de=-1,xe=Array(B.size);return B.forEach(function(st,xs){xe[++de]=[xs,st]}),xe}function we(B,de){return function(xe){return B(de(xe))}}function me(B){var de=-1,xe=Array(B.size);return B.forEach(function(st){xe[++de]=st}),xe}var k=Array.prototype,q=Function.prototype,L=Object.prototype,V=ye["__core-js_shared__"],W=function(){var B=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||"");return B?"Symbol(src)_1."+B:""}(),Q=q.toString,se=L.hasOwnProperty,le=L.toString,ee=RegExp("^"+Q.call(se).replace(T,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=$e?ye.Buffer:void 0,Oe=ye.Symbol,ke=ye.Uint8Array,_t=we(Object.getPrototypeOf,Object),hr=Object.create,Gr=L.propertyIsEnumerable,_i=k.splice,ve=Object.getOwnPropertySymbols,Ze=ne?ne.isBuffer:void 0,Ke=we(Object.keys,Object),Ct=cg(ye,"DataView"),kt=cg(ye,"Map"),Si=cg(ye,"Promise"),ns=cg(ye,"Set"),la=cg(ye,"WeakMap"),Yl=cg(Object,"create"),Za=vf(Ct),ff=vf(kt),Hh=vf(Si),Kl=vf(ns),F1=vf(la),Wh=Oe?Oe.prototype:void 0,fc=Wh?Wh.valueOf:void 0;function mc(B){var de=-1,xe=B?B.length:0;for(this.clear();++de<xe;){var st=B[de];this.set(st[0],st[1])}}function K$(){this.__data__=Yl?Yl(null):{}}function X$(B){return this.has(B)&&delete this.__data__[B]}function he(B){var de=this.__data__;if(Yl){var xe=de[B];return xe===i?void 0:xe}return se.call(de,B)?de[B]:void 0}function Ir(B){var de=this.__data__;return Yl?de[B]!==void 0:se.call(de,B)}function ag(B,de){var xe=this.__data__;return xe[B]=Yl&&de===void 0?i:de,this}mc.prototype.clear=K$,mc.prototype.delete=X$,mc.prototype.get=he,mc.prototype.has=Ir,mc.prototype.set=ag;function Pi(B){var de=-1,xe=B?B.length:0;for(this.clear();++de<xe;){var st=B[de];this.set(st[0],st[1])}}function j1(){this.__data__=[]}function Xe(B){var de=this.__data__,xe=yf(de,B);if(xe<0)return!1;var st=de.length-1;return xe==st?de.pop():_i.call(de,xe,1),!0}function lg(B){var de=this.__data__,xe=yf(de,B);return xe<0?void 0:de[xe][1]}function Ri(B){return yf(this.__data__,B)>-1}function mf(B,de){var xe=this.__data__,st=yf(xe,B);return st<0?xe.push([B,de]):xe[st][1]=de,this}Pi.prototype.clear=j1,Pi.prototype.delete=Xe,Pi.prototype.get=lg,Pi.prototype.has=Ri,Pi.prototype.set=mf;function Jh(B){var de=-1,xe=B?B.length:0;for(this.clear();++de<xe;){var st=B[de];this.set(st[0],st[1])}}function Ya(){this.__data__={hash:new mc,map:new(kt||Pi),string:new mc}}function FS(B){return US(this,B).delete(B)}function jS(B){return US(this,B).get(B)}function Et(B){return US(this,B).has(B)}function Q$(B,de){return US(this,B).set(B,de),this}Jh.prototype.clear=Ya,Jh.prototype.delete=FS,Jh.prototype.get=jS,Jh.prototype.has=Et,Jh.prototype.set=Q$;function yc(B){this.__data__=new Pi(B)}function e4(){this.__data__=new Pi}function t4(B){return this.__data__.delete(B)}function V1(B){return this.__data__.get(B)}function r4(B){return this.__data__.has(B)}function U1(B,de){var xe=this.__data__;if(xe instanceof Pi){var st=xe.__data__;if(!kt||st.length<r-1)return st.push([B,de]),this;xe=this.__data__=new Jh(st)}return xe.set(B,de),this}yc.prototype.clear=e4,yc.prototype.delete=t4,yc.prototype.get=V1,yc.prototype.has=r4,yc.prototype.set=U1;function Li(B,de){var xe=u4(B)||Rce(B)?zt(B.length,String):[],st=xe.length,xs=!!st;for(var Jn in B)se.call(B,Jn)&&!(xs&&(Jn=="length"||$ce(Jn,st)))&&xe.push(Jn);return xe}function VS(B,de,xe){var st=B[de];(!(se.call(B,de)&&n7(st,xe))||xe===void 0&&!(de in B))&&(B[de]=xe)}function yf(B,de){for(var xe=B.length;xe--;)if(n7(B[xe][0],de))return xe;return-1}function i4(B,de){return B&&r7(de,c4(de),B)}function z1(B,de,xe,st,xs,Jn,gc){var Zn;if(st&&(Zn=Jn?st(B,xs,Jn,gc):st(B)),Zn!==void 0)return Zn;if(!zS(B))return B;var l7=u4(B);if(l7){if(Zn=Ice(B),!de)return ug(B,Zn)}else{var hg=gf(B),u7=hg==c||hg==p;if(kce(B))return l4(B,de);if(hg==g||hg==n||u7&&!Jn){if(G(B))return Jn?B:{};if(Zn=Ece(u7?{}:B),!de)return Mce(B,i4(Zn,B))}else{if(!X[hg])return Jn?B:{};Zn=Ace(B,hg,z1,de)}}gc||(gc=new yc);var c7=gc.get(B);if(c7)return c7;if(gc.set(B,Zn),!l7)var h7=xe?Tce(B):c4(B);return Je(h7||B,function(h4,GS){h7&&(GS=h4,h4=B[GS]),VS(Zn,GS,z1(h4,de,xe,st,GS,B,gc))}),Zn}function s4(B){return zS(B)?hr(B):{}}function n4(B,de,xe){var st=de(B);return u4(B)?st:He(st,xe(B))}function o4(B){return le.call(B)}function Hn(B){if(!zS(B)||Oce(B))return!1;var de=a7(B)||G(B)?ee:P;return de.test(vf(B))}function a4(B){if(!s7(B))return Ke(B);var de=[];for(var xe in Object(B))se.call(B,xe)&&xe!="constructor"&&de.push(xe);return de}function l4(B,de){if(de)return B.slice();var xe=new B.constructor(B.length);return B.copy(xe),xe}function Y(B){var de=new B.constructor(B.byteLength);return new ke(de).set(new ke(B)),de}function _e(B,de){var xe=de?Y(B.buffer):B.buffer;return new B.constructor(xe,B.byteOffset,B.byteLength)}function Ie(B,de,xe){var st=de?xe(re(B),!0):re(B);return mt(st,gt,new B.constructor)}function Dt(B){var de=new B.constructor(B.source,$.exec(B));return de.lastIndex=B.lastIndex,de}function ci(B,de,xe){var st=de?xe(me(B),!0):me(B);return mt(st,dt,new B.constructor)}function Rr(B){return fc?Object(fc.call(B)):{}}function Wn(B,de){var xe=de?Y(B.buffer):B.buffer;return new B.constructor(xe,B.byteOffset,B.length)}function ug(B,de){var xe=-1,st=B.length;for(de||(de=Array(st));++xe<st;)de[xe]=B[xe];return de}function r7(B,de,xe,st){xe||(xe={});for(var xs=-1,Jn=de.length;++xs<Jn;){var gc=de[xs],Zn=void 0;VS(xe,gc,Zn===void 0?B[gc]:Zn)}return xe}function Mce(B,de){return r7(B,i7(B),de)}function Tce(B){return n4(B,c4,i7)}function US(B,de){var xe=B.__data__;return Cce(de)?xe[typeof de=="string"?"string":"hash"]:xe.map}function cg(B,de){var xe=H(B,de);return Hn(xe)?xe:void 0}var i7=ve?we(ve,Object):Fce,gf=o4;(Ct&&gf(new Ct(new ArrayBuffer(1)))!=E||kt&&gf(new kt)!=f||Si&&gf(Si.resolve())!=b||ns&&gf(new ns)!=S||la&&gf(new la)!=_)&&(gf=function(B){var de=le.call(B),xe=de==g?B.constructor:void 0,st=xe?vf(xe):void 0;if(st)switch(st){case Za:return E;case ff:return f;case Hh:return b;case Kl:return S;case F1:return _}return de});function Ice(B){var de=B.length,xe=B.constructor(de);return de&&typeof B[0]=="string"&&se.call(B,"index")&&(xe.index=B.index,xe.input=B.input),xe}function Ece(B){return typeof B.constructor=="function"&&!s7(B)?s4(_t(B)):{}}function Ace(B,de,xe,st){var xs=B.constructor;switch(de){case I:return Y(B);case a:case l:return new xs(+B);case E:return _e(B,st);case A:case C:case O:case R:case D:case N:case U:case J:case y:return Wn(B,st);case f:return Ie(B,st,xe);case m:case M:return new xs(B);case w:return Dt(B);case S:return ci(B,st,xe);case x:return Rr(B)}}function $ce(B,de){return de=de??s,!!de&&(typeof B=="number"||z.test(B))&&B>-1&&B%1==0&&B<de}function Cce(B){var de=typeof B;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?B!=="__proto__":B===null}function Oce(B){return!!W&&W in B}function s7(B){var de=B&&B.constructor,xe=typeof de=="function"&&de.prototype||L;return B===xe}function vf(B){if(B!=null){try{return Q.call(B)}catch{}try{return B+""}catch{}}return""}function Pce(B){return z1(B,!0,!0)}function n7(B,de){return B===de||B!==B&&de!==de}function Rce(B){return Lce(B)&&se.call(B,"callee")&&(!Gr.call(B,"callee")||le.call(B)==n)}var u4=Array.isArray;function o7(B){return B!=null&&Nce(B.length)&&!a7(B)}function Lce(B){return Dce(B)&&o7(B)}var kce=Ze||jce;function a7(B){var de=zS(B)?le.call(B):"";return de==c||de==p}function Nce(B){return typeof B=="number"&&B>-1&&B%1==0&&B<=s}function zS(B){var de=typeof B;return!!B&&(de=="object"||de=="function")}function Dce(B){return!!B&&typeof B=="object"}function c4(B){return o7(B)?Li(B):a4(B)}function Fce(){return[]}function jce(){return!1}e.exports=Pce}(Rw,Rw.exports)),Rw.exports}var RHe=PHe();const GH=wS(RHe),gE=ui("maptip",()=>{const e=Se(void 0),t=Se(void 0),r=Se("");function i(o){e.value=o}function s(o){t.value=o}function n(o){r.value=o}return{maptipInstance:e,maptipPoint:t,content:r,setMaptipInstance:i,setMaptipPoint:s,setMaptipContent:n}}),LHe=Wt({__name:"esri-map",setup(e){const t=gE(),r=vs("iApi"),i=Bt(()=>t.maptipPoint),s=Bt(()=>t.maptipInstance),n=Bt(()=>t.content),o=Fs([]);o.push(ks(i,()=>{if(i.value){let l,u;const c=r.geo.map.getPixelWidth()/2,p=0,f=r.geo.map.mapPointToScreenPoint(i.value);l=f.screenX-c,u=p-f.screenY,s.value.setProps({offset:[l,u]}),n.value&&n.value!==""&&s.value.show()}else s.value.hide()})),o.push(ks(n,l=>{l&&l!==""&&i?(s.value.setContent(l),s.value.show()):s.value.hide()})),dc(()=>{o.forEach(l=>l())});const a=()=>{r.geo.map.setMouseFocus()};return(l,u)=>{const c=br("tippy");return vr((Ae(),Be("div",{name:"esriMap",id:"esriMap",class:"h-full overflow-hidden",onMousedown:a,onKeydown:u[0]||(u[0]=Sle(R$(()=>{},["prevent"]),["up","down","left","right"]))},null,544)),[[c,{allowHTML:!0,zIndex:150,theme:"ramp4",trigger:"manual",appendTo:"parent",arrow:!1,delay:200,duration:[200,200]}]])}}});var aue={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},y9={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},kHe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],vE={CSS:{},springs:{}};function Fu(e,t,r){return Math.min(Math.max(e,t),r)}function S_(e,t){return e.indexOf(t)>-1}function IC(e,t){return e.apply(null,t)}var ft={arr:function(e){return Array.isArray(e)},obj:function(e){return S_(Object.prototype.toString.call(e),"Object")},pth:function(e){return ft.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||ft.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return ft.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return ft.hex(e)||ft.rgb(e)||ft.hsl(e)},key:function(e){return!aue.hasOwnProperty(e)&&!y9.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function lue(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function uue(e,t){var r=lue(e),i=Fu(ft.und(r[0])?1:r[0],.1,100),s=Fu(ft.und(r[1])?100:r[1],.1,100),n=Fu(ft.und(r[2])?10:r[2],.1,100),o=Fu(ft.und(r[3])?0:r[3],.1,100),a=Math.sqrt(s/i),l=n/(2*Math.sqrt(s*i)),u=l<1?a*Math.sqrt(1-l*l):0,c=1,p=l<1?(l*a+-o)/u:-o+a;function f(g){var b=t?t*g/1e3:g;return l<1?b=Math.exp(-b*l*a)*(c*Math.cos(u*b)+p*Math.sin(u*b)):b=(c+p*b)*Math.exp(-b*a),g===0||g===1?g:1-b}function m(){var g=vE.springs[e];if(g)return g;for(var b=1/6,w=0,S=0;;)if(w+=b,f(w)===1){if(S++,S>=16)break}else S=0;var M=w*b*1e3;return vE.springs[e]=M,M}return t?f:m}function NHe(e){return e===void 0&&(e=10),function(t){return Math.ceil(Fu(t,1e-6,1)*e)*(1/e)}}var DHe=function(){var e=11,t=1/(e-1);function r(c,p){return 1-3*p+3*c}function i(c,p){return 3*p-6*c}function s(c){return 3*c}function n(c,p,f){return((r(p,f)*c+i(p,f))*c+s(p))*c}function o(c,p,f){return 3*r(p,f)*c*c+2*i(p,f)*c+s(p)}function a(c,p,f,m,g){var b,w,S=0;do w=p+(f-p)/2,b=n(w,m,g)-c,b>0?f=w:p=w;while(Math.abs(b)>1e-7&&++S<10);return w}function l(c,p,f,m){for(var g=0;g<4;++g){var b=o(p,f,m);if(b===0)return p;var w=n(p,f,m)-c;p-=w/b}return p}function u(c,p,f,m){if(!(0<=c&&c<=1&&0<=f&&f<=1))return;var g=new Float32Array(e);if(c!==p||f!==m)for(var b=0;b<e;++b)g[b]=n(b*t,c,f);function w(S){for(var M=0,x=1,_=e-1;x!==_&&g[x]<=S;++x)M+=t;--x;var I=(S-g[x])/(g[x+1]-g[x]),E=M+I*t,A=o(E,c,f);return A>=.001?l(S,E,c,f):A===0?E:a(S,M,M+t,c,f)}return function(S){return c===p&&f===m||S===0||S===1?S:n(w(S),p,m)}}return u}(),cue=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var s,n=4;i<((s=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((s*3-2)/22-i,2)}},Elastic:function(i,s){i===void 0&&(i=1),s===void 0&&(s=.5);var n=Fu(i,1,10),o=Fu(s,.1,2);return function(a){return a===0||a===1?a:-n*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/n))*(Math.PI*2)/o)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,s){t[i]=function(){return function(n){return Math.pow(n,s+2)}}}),Object.keys(t).forEach(function(i){var s=t[i];e["easeIn"+i]=s,e["easeOut"+i]=function(n,o){return function(a){return 1-s(n,o)(1-a)}},e["easeInOut"+i]=function(n,o){return function(a){return a<.5?s(n,o)(a*2)/2:1-s(n,o)(a*-2+2)/2}},e["easeOutIn"+i]=function(n,o){return function(a){return a<.5?(1-s(n,o)(1-a*2))/2:(s(n,o)(a*2-1)+1)/2}}}),e}();function g9(e,t){if(ft.fnc(e))return e;var r=e.split("(")[0],i=cue[r],s=lue(e);switch(r){case"spring":return uue(e,t);case"cubicBezier":return IC(DHe,s);case"steps":return IC(NHe,s);default:return IC(i,s)}}function hue(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function j$(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,s=[],n=0;n<r;n++)if(n in e){var o=e[n];t.call(i,o,n,e)&&s.push(o)}return s}function V$(e){return e.reduce(function(t,r){return t.concat(ft.arr(r)?V$(r):r)},[])}function BH(e){return ft.arr(e)?e:(ft.str(e)&&(e=hue(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function v9(e,t){return e.some(function(r){return r===t})}function b9(e){var t={};for(var r in e)t[r]=e[r];return t}function UN(e,t){var r=b9(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function U$(e,t){var r=b9(e);for(var i in t)r[i]=ft.und(e[i])?t[i]:e[i];return r}function FHe(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function jHe(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(a,l,u,c){return l+l+u+u+c+c}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),s=parseInt(i[1],16),n=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+s+","+n+","+o+",1)"}function VHe(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,s=parseInt(t[3],10)/100,n=t[4]||1;function o(f,m,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?f+(m-f)*6*g:g<1/2?m:g<2/3?f+(m-f)*(2/3-g)*6:f}var a,l,u;if(i==0)a=l=u=s;else{var c=s<.5?s*(1+i):s+i-s*i,p=2*s-c;a=o(p,c,r+1/3),l=o(p,c,r),u=o(p,c,r-1/3)}return"rgba("+a*255+","+l*255+","+u*255+","+n+")"}function UHe(e){if(ft.rgb(e))return FHe(e);if(ft.hex(e))return jHe(e);if(ft.hsl(e))return VHe(e)}function $h(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function zHe(e){if(S_(e,"translate")||e==="perspective")return"px";if(S_(e,"rotate")||S_(e,"skew"))return"deg"}function zN(e,t){return ft.fnc(e)?e(t.target,t.id,t.total):e}function ju(e,t){return e.getAttribute(t)}function w9(e,t,r){var i=$h(t);if(v9([r,"deg","rad","turn"],i))return t;var s=vE.CSS[t+r];if(!ft.und(s))return s;var n=100,o=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=n+r;var l=n/o.offsetWidth;a.removeChild(o);var u=l*parseFloat(t);return vE.CSS[t+r]=u,u}function pue(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),s=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?w9(e,s,r):s}}function _9(e,t){if(ft.dom(e)&&!ft.inp(e)&&(!ft.nil(ju(e,t))||ft.svg(e)&&e[t]))return"attribute";if(ft.dom(e)&&v9(kHe,t))return"transform";if(ft.dom(e)&&t!=="transform"&&pue(e,t))return"css";if(e[t]!=null)return"object"}function due(e){if(ft.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,s;s=r.exec(t);)i.set(s[1],s[2]);return i}}function GHe(e,t,r,i){var s=S_(t,"scale")?1:0+zHe(t),n=due(e).get(t)||s;return r&&(r.transforms.list.set(t,n),r.transforms.last=t),i?w9(e,n,i):n}function S9(e,t,r,i){switch(_9(e,t)){case"transform":return GHe(e,t,i,r);case"css":return pue(e,t,r);case"attribute":return ju(e,t);default:return e[t]||0}}function x9(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=$h(e)||0,s=parseFloat(t),n=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return s+n+i;case"-":return s-n+i;case"*":return s*n+i}}function fue(e,t){if(ft.col(e))return UHe(e);if(/\s/g.test(e))return e;var r=$h(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function M9(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function BHe(e){return Math.PI*2*ju(e,"r")}function qHe(e){return ju(e,"width")*2+ju(e,"height")*2}function HHe(e){return M9({x:ju(e,"x1"),y:ju(e,"y1")},{x:ju(e,"x2"),y:ju(e,"y2")})}function mue(e){for(var t=e.points,r=0,i,s=0;s<t.numberOfItems;s++){var n=t.getItem(s);s>0&&(r+=M9(i,n)),i=n}return r}function WHe(e){var t=e.points;return mue(e)+M9(t.getItem(t.numberOfItems-1),t.getItem(0))}function yue(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return BHe(e);case"rect":return qHe(e);case"line":return HHe(e);case"polyline":return mue(e);case"polygon":return WHe(e)}}function JHe(e){var t=yue(e);return e.setAttribute("stroke-dasharray",t),t}function ZHe(e){for(var t=e.parentNode;ft.svg(t)&&ft.svg(t.parentNode);)t=t.parentNode;return t}function gue(e,t){var r=t||{},i=r.el||ZHe(e),s=i.getBoundingClientRect(),n=ju(i,"viewBox"),o=s.width,a=s.height,l=r.viewBox||(n?n.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o,h:a,vW:l[2],vH:l[3]}}function YHe(e,t){var r=ft.str(e)?hue(e)[0]:e,i=t||100;return function(s){return{property:s,el:r,svg:gue(r),totalLength:yue(r)*(i/100)}}}function KHe(e,t,r){function i(c){c===void 0&&(c=0);var p=t+c>=1?t+c:0;return e.el.getPointAtLength(p)}var s=gue(e.el,e.svg),n=i(),o=i(-1),a=i(1),l=r?1:s.w/s.vW,u=r?1:s.h/s.vH;switch(e.property){case"x":return(n.x-s.x)*l;case"y":return(n.y-s.y)*u;case"angle":return Math.atan2(a.y-o.y,a.x-o.x)*180/Math.PI}}function qH(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=fue(ft.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:ft.str(e)||t?i.split(r):[]}}function T9(e){var t=e?V$(ft.arr(e)?e.map(BH):BH(e)):[];return j$(t,function(r,i,s){return s.indexOf(r)===i})}function vue(e){var t=T9(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:due(r)}}})}function XHe(e,t){var r=b9(t);if(/^spring/.test(r.easing)&&(r.duration=uue(r.easing)),ft.arr(e)){var i=e.length,s=i===2&&!ft.obj(e[0]);s?e={value:e}:ft.fnc(t.duration)||(r.duration=t.duration/i)}var n=ft.arr(e)?e:[e];return n.map(function(o,a){var l=ft.obj(o)&&!ft.pth(o)?o:{value:o};return ft.und(l.delay)&&(l.delay=a?0:t.delay),ft.und(l.endDelay)&&(l.endDelay=a===n.length-1?t.endDelay:0),l}).map(function(o){return U$(o,r)})}function QHe(e){for(var t=j$(V$(e.map(function(n){return Object.keys(n)})),function(n){return ft.key(n)}).reduce(function(n,o){return n.indexOf(o)<0&&n.push(o),n},[]),r={},i=function(n){var o=t[n];r[o]=e.map(function(a){var l={};for(var u in a)ft.key(u)?u==o&&(l.value=a[u]):l[u]=a[u];return l})},s=0;s<t.length;s++)i(s);return r}function eWe(e,t){var r=[],i=t.keyframes;i&&(t=U$(QHe(i),t));for(var s in t)ft.key(s)&&r.push({name:s,tweens:XHe(t[s],e)});return r}function tWe(e,t){var r={};for(var i in e){var s=zN(e[i],t);ft.arr(s)&&(s=s.map(function(n){return zN(n,t)}),s.length===1&&(s=s[0])),r[i]=s}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function rWe(e,t){var r;return e.tweens.map(function(i){var s=tWe(i,t),n=s.value,o=ft.arr(n)?n[1]:n,a=$h(o),l=S9(t.target,e.name,a,t),u=r?r.to.original:l,c=ft.arr(n)?n[0]:u,p=$h(c)||$h(l),f=a||p;return ft.und(o)&&(o=u),s.from=qH(c,f),s.to=qH(x9(o,c),f),s.start=r?r.end:0,s.end=s.start+s.delay+s.duration+s.endDelay,s.easing=g9(s.easing,s.duration),s.isPath=ft.pth(n),s.isPathTargetInsideSVG=s.isPath&&ft.svg(t.target),s.isColor=ft.col(s.from.original),s.isColor&&(s.round=1),r=s,s})}var bue={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,s){if(i.list.set(t,r),t===i.last||s){var n="";i.list.forEach(function(o,a){n+=a+"("+o+") "}),e.style.transform=n}}};function wue(e,t){var r=vue(e);r.forEach(function(i){for(var s in t){var n=zN(t[s],i),o=i.target,a=$h(n),l=S9(o,s,a,i),u=a||$h(l),c=x9(fue(n,u),l),p=_9(o,s);bue[p](o,s,c,i.transforms,!0)}})}function iWe(e,t){var r=_9(e.target,t.name);if(r){var i=rWe(t,e),s=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:s.end,delay:i[0].delay,endDelay:s.endDelay}}}function sWe(e,t){return j$(V$(e.map(function(r){return t.map(function(i){return iWe(r,i)})})),function(r){return!ft.und(r)})}function _ue(e,t){var r=e.length,i=function(n){return n.timelineOffset?n.timelineOffset:0},s={};return s.duration=r?Math.max.apply(Math,e.map(function(n){return i(n)+n.duration})):t.duration,s.delay=r?Math.min.apply(Math,e.map(function(n){return i(n)+n.delay})):t.delay,s.endDelay=r?s.duration-Math.max.apply(Math,e.map(function(n){return i(n)+n.duration-n.endDelay})):t.endDelay,s}var HH=0;function nWe(e){var t=UN(aue,e),r=UN(y9,e),i=eWe(r,e),s=vue(e.targets),n=sWe(s,i),o=_ue(n,r),a=HH;return HH++,U$(t,{id:a,children:[],animatables:s,animations:n,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var El=[],Sue=function(){var e;function t(){!e&&(!WH()||!ai.suspendWhenDocumentHidden)&&El.length>0&&(e=requestAnimationFrame(r))}function r(s){for(var n=El.length,o=0;o<n;){var a=El[o];a.paused?(El.splice(o,1),n--):(a.tick(s),o++)}e=o>0?requestAnimationFrame(r):void 0}function i(){ai.suspendWhenDocumentHidden&&(WH()?e=cancelAnimationFrame(e):(El.forEach(function(s){return s._onDocumentVisibility()}),Sue()))}return typeof document<"u"&&document.addEventListener("visibilitychange",i),t}();function WH(){return!!document&&document.hidden}function ai(e){e===void 0&&(e={});var t=0,r=0,i=0,s,n=0,o=null;function a(M){var x=window.Promise&&new Promise(function(_){return o=_});return M.finished=x,x}var l=nWe(e);a(l);function u(){var M=l.direction;M!=="alternate"&&(l.direction=M!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,s.forEach(function(x){return x.reversed=l.reversed})}function c(M){return l.reversed?l.duration-M:M}function p(){t=0,r=c(l.currentTime)*(1/ai.speed)}function f(M,x){x&&x.seek(M-x.timelineOffset)}function m(M){if(l.reversePlayback)for(var _=n;_--;)f(M,s[_]);else for(var x=0;x<n;x++)f(M,s[x])}function g(M){for(var x=0,_=l.animations,I=_.length;x<I;){var E=_[x],A=E.animatable,C=E.tweens,O=C.length-1,R=C[O];O&&(R=j$(C,function($e){return M<$e.end})[0]||R);for(var D=Fu(M-R.start-R.delay,0,R.duration)/R.duration,N=isNaN(D)?1:R.easing(D),U=R.to.strings,J=R.round,y=[],T=R.to.numbers.length,$=void 0,P=0;P<T;P++){var z=void 0,X=R.to.numbers[P],ae=R.from.numbers[P]||0;R.isPath?z=KHe(R.value,N*X,R.isPathTargetInsideSVG):z=ae+N*(X-ae),J&&(R.isColor&&P>2||(z=Math.round(z*J)/J)),y.push(z)}var te=U.length;if(!te)$=y[0];else{$=U[0];for(var ye=0;ye<te;ye++){U[ye];var Me=U[ye+1],De=y[ye];isNaN(De)||(Me?$+=De+Me:$+=De+" ")}}bue[E.type](A.target,E.property,$,A.transforms),E.currentValue=$,x++}}function b(M){l[M]&&!l.passThrough&&l[M](l)}function w(){l.remaining&&l.remaining!==!0&&l.remaining--}function S(M){var x=l.duration,_=l.delay,I=x-l.endDelay,E=c(M);l.progress=Fu(E/x*100,0,100),l.reversePlayback=E<l.currentTime,s&&m(E),!l.began&&l.currentTime>0&&(l.began=!0,b("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,b("loopBegin")),E<=_&&l.currentTime!==0&&g(0),(E>=I&&l.currentTime!==x||!x)&&g(x),E>_&&E<I?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,b("changeBegin")),b("change"),g(E)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,b("changeComplete")),l.currentTime=Fu(E,0,x),l.began&&b("update"),M>=x&&(r=0,w(),l.remaining?(t=i,b("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,b("loopComplete"),b("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)))))}return l.reset=function(){var M=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=M==="reverse",l.remaining=l.loop,s=l.children,n=s.length;for(var x=n;x--;)l.children[x].reset();(l.reversed&&l.loop!==!0||M==="alternate"&&l.loop===1)&&l.remaining++,g(l.reversed?l.duration:0)},l._onDocumentVisibility=p,l.set=function(M,x){return wue(M,x),l},l.tick=function(M){i=M,t||(t=i),S((i+(r-t))*ai.speed)},l.seek=function(M){S(c(M))},l.pause=function(){l.paused=!0,p()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,El.push(l),p(),Sue())},l.reverse=function(){u(),l.completed=!l.reversed,p()},l.restart=function(){l.reset(),l.play()},l.remove=function(M){var x=T9(M);xue(x,l)},l.reset(),l.autoplay&&l.play(),l}function JH(e,t){for(var r=t.length;r--;)v9(e,t[r].animatable.target)&&t.splice(r,1)}function xue(e,t){var r=t.animations,i=t.children;JH(e,r);for(var s=i.length;s--;){var n=i[s],o=n.animations;JH(e,o),!o.length&&!n.children.length&&i.splice(s,1)}!r.length&&!i.length&&t.pause()}function oWe(e){for(var t=T9(e),r=El.length;r--;){var i=El[r];xue(t,i)}}function aWe(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?g9(t.easing):null,s=t.grid,n=t.axis,o=t.from||0,a=o==="first",l=o==="center",u=o==="last",c=ft.arr(e),p=parseFloat(c?e[0]:e),f=c?parseFloat(e[1]):0,m=$h(c?e[1]:e)||0,g=t.start||0+(c?p:0),b=[],w=0;return function(S,M,x){if(a&&(o=0),l&&(o=(x-1)/2),u&&(o=x-1),!b.length){for(var _=0;_<x;_++){if(!s)b.push(Math.abs(o-_));else{var I=l?(s[0]-1)/2:o%s[0],E=l?(s[1]-1)/2:Math.floor(o/s[0]),A=_%s[0],C=Math.floor(_/s[0]),O=I-A,R=E-C,D=Math.sqrt(O*O+R*R);n==="x"&&(D=-O),n==="y"&&(D=-R),b.push(D)}w=Math.max.apply(Math,b)}i&&(b=b.map(function(U){return i(U/w)*w})),r==="reverse"&&(b=b.map(function(U){return n?U<0?U*-1:-U:Math.abs(w-U)}))}var N=c?(f-p)/w:p;return g+N*(Math.round(b[M]*100)/100)+m}}function lWe(e){e===void 0&&(e={});var t=ai(e);return t.duration=0,t.add=function(r,i){var s=El.indexOf(t),n=t.children;s>-1&&El.splice(s,1);function o(f){f.passThrough=!0}for(var a=0;a<n.length;a++)o(n[a]);var l=U$(r,UN(y9,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=ft.und(i)?u:x9(i,u),o(t),t.seek(l.timelineOffset);var c=ai(l);o(c),n.push(c);var p=_ue(n,e);return t.delay=p.delay,t.endDelay=p.endDelay,t.duration=p.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}ai.version="3.2.1";ai.speed=1;ai.suspendWhenDocumentHidden=!0;ai.running=El;ai.remove=oWe;ai.get=S9;ai.set=wue;ai.convertPx=w9;ai.path=YHe;ai.setDashoffset=JHe;ai.stagger=aWe;ai.timeline=lWe;ai.easing=g9;ai.penner=cue;ai.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};class Mue{resizeObserver;constructor(t){this.resizeObserver="ResizeObserver"in self?new ResizeObserver(function(r){const i={xs:200,sm:576,md:768,lg:960};r.forEach(function(s){const n=s.target.dataset.breakpoints?JSON.parse(s.target.dataset.breakpoints):t??i;Object.keys(n).forEach(function(o){const a=n[o];s.contentRect.width>=a?s.target.classList.add(o):s.target.classList.remove(o)})})}):void 0}observe(t){this.resizeObserver?.observe(t)}}const uWe=["data-cy"],Tue=Wt({__name:"panel-container",props:{panel:{type:Object,required:!0}},setup(e){const t=Se(null),r=e,i=Se(!1);wn(()=>{r.panel.teleport&&new Mue({xs:0,sm:461,...r.panel.teleport.breakpoints}).observe(t.value)});const s=(l,u,c)=>{if(i.value)return u();ai({targets:l,opacity:{value:c,duration:400,easing:"cubicBezier(.5, .05, .1, .3)"},complete:u})},n=(l,u)=>{s(l,u,[0,1])},o=l=>{l.classList.contains("screen-spinner")||(i.value=r.panel.isScreenLoaded(r.panel.route.screen),t.value.querySelectorAll("[focus-item").forEach(u=>u.classList.remove("default-focus-style")))},a=(l,u)=>{s(l,u,[0,1])};return(l,u)=>{const c=br("focus-container");return Ae(),Be("div",{class:wi(["shadow-tm bg-white h-full xs:mr-0 sm:mr-12 last:mr-0 pointer-events-auto min-w-0 shrink-0",e.panel.expanded?"flex-grow max-w-full":""]),style:of(e.panel.style),"data-cy":e.panel.id,ref_key:"componentEl",ref:t},[jt(s9,{onBeforeLeave:o,onLeave:a,onEnter:n},{default:Bi(()=>[vr((Ae(),Vr(wae(e.panel.route.screen),i9({class:"h-full"},e.panel.route.props,{panel:e.panel}),null,16,["panel"])),[[c]])]),_:1})],14,uWe)}}}),Vy=ui("panel",()=>{const e=Se(void 0),t=Se(void 0),r=Se(0),i=Se(0),s=Se(!1),n=Se(!0),o=Se({}),a=Se({}),l=Se([]),u=Se([]),c=Se([]),p=Bt(()=>i.value);function f(D){return D==="xs"&&c.value.length>0?[c.value.slice().pop()]:c.value}function m(D){const N=[];return D.forEach(U=>{U in a.value&&N.push(a.value[U].getPromise())}),N}function g(D){E(D),_(),t.value=void 0}function b(D){A(D),_()}function w(D,N){C(D,N),_()}function S(D){O(D),_()}function M(D){r.value=D,_()}function x(D){s.value=D}function _(){let D=r.value;const N=[],U=350,J=12,y=600;for(let T=l.value.length-1;T>=0;T--){const $=l.value[T];let P=$.width||U;if(s.value?P=D:P+=J,$.id==="grid"&&(P=Math.max(Math.min(P,D),y)),(D>=P&&!s.value||N.length===0)&&(D-=P,N.unshift($)),$.id==="grid"&&D<y)break}if(e.value&&!N.includes(e.value)&&!s.value){let T;for(let X=0;X<N.length-1&&D<(e.value.width||U)+J;X++)T=N.shift(),D+=T.width||U;D>=(e.value.width||U)?N.unshift(e.value):t.value||(T=N.shift(),N.unshift(e.value));const $=l.value.indexOf(e.value),P=l.value.indexOf(T),z=l.value.slice();P>-1&&(z.splice($,1),z.splice(P,0,e.value)),l.value=z}i.value=D,c.value=N}function I(D){if(o.value={...o.value,[D.id]:D},D.id in a.value)a.value[D.id].resolveMe(D);else{const N=new zi;N.resolveMe(D),a.value={...a.value,[D.id]:N}}}function E(D){D.teleport?u.value=[...u.value,D]:(l.value=[...l.value,D],t.value=D)}function A(D){if(D.teleport){const N=u.value.indexOf(D);N!==-1&&(u.value=[...u.value.slice(0,N),...u.value.slice(N+1)])}else{const N=l.value.indexOf(D);N!==-1&&(l.value=[...l.value.slice(0,N),...l.value.slice(N+1)])}}function C(D,N){const U=l.value.indexOf(D),J=N==="right"?1:-1;c.value.includes(l.value[U+J])&&([l.value[U],l.value[U+J]]=[l.value[U+J],l.value[U]])}function O(D){o.value[D.id]!==void 0&&delete o.value[D.id],a.value[D.id]!==void 0&&delete a.value[D.id];const N=c.value.indexOf(D);N!==-1&&(c.value=[...c.value.slice(0,N),...c.value.slice(N+1)]),e.value&&e.value.id==D.id&&(e.value=void 0)}function R(D){a.value={...a.value,[D]:new zi}}return{items:o,regPromises:a,orderedItems:l,pinned:e,priority:t,visible:c,stackWidth:r,remWidth:i,mobileView:s,reorderable:n,teleported:u,getRemainingWidth:p,getVisible:f,getRegPromises:m,openPanel:g,closePanel:b,movePanel:w,removePanel:S,setStackWidth:M,setMobileView:x,updateVisible:_,registerPanel:I,addRegPromise:R}}),cWe=Wt({__name:"panel-stack",setup(e){const t=Vy(),r=vs("iApi"),i=Se(),s=Bt(()=>t.mobileView);wn(()=>{new ResizeObserver(c=>{const p=!(r?.$vApp.$root?.$refs["app-size"]).classList.contains("sm");s.value!==p&&(t.mobileView=p,r?.event.emit(rt.RAMP_MOBILEVIEW_CHANGE,p)),t.setStackWidth(c[0].contentRect.width)}).observe(i.value?.$el)});const n=u=>t.getVisible(u),o=(u,c)=>{l(u,c,[[6,0],[0,1]])},a=(u,c)=>{const[p,f]=[u.children[0].getBoundingClientRect(),u.parentElement.getBoundingClientRect()];u.style.width=`${p.width}px`,u.style.height=`${p.height}px`,u.style.left=`${p.left-f.left}px`,u.style.position="absolute",l(u,c,[[0,-6],[1,0]])},l=(u,c,p)=>{ai({targets:u,duration:300,translateY:{value:p[0],easing:"cubicBezier(.5, .05, .1, .3)"},opacity:{value:p[1],duration:250,easing:"cubicBezier(.5, .05, .1, .3)"},complete:c})};return(u,c)=>(Ae(),Vr(o9,{onEnter:o,onLeave:a,name:"panel-container",tag:"div",ref_key:"el",ref:i},{default:Bi(()=>[(Ae(!0),Be(xr,null,sg(n(at(r).screenSize),p=>(Ae(),Vr(Tue,{key:`${p.id}`,panel:p},null,8,["panel"]))),128))]),_:1},512))}}),qh=(e,t)=>{const r=e.__vccOpts||e;for(const[i,s]of t)r[i]=s;return r},hWe=qh(cWe,[["__scopeId","data-v-f32e4f15"]]);var bo="top",qa="bottom",Ha="right",wo="left",I9="auto",LS=[bo,qa,Ha,wo],Jv="start",A2="end",pWe="clippingParents",Iue="viewport",_b="popper",dWe="reference",ZH=LS.reduce(function(e,t){return e.concat([t+"-"+Jv,t+"-"+A2])},[]),Eue=[].concat(LS,[I9]).reduce(function(e,t){return e.concat([t,t+"-"+Jv,t+"-"+A2])},[]),fWe="beforeRead",mWe="read",yWe="afterRead",gWe="beforeMain",vWe="main",bWe="afterMain",wWe="beforeWrite",_We="write",SWe="afterWrite",xWe=[fWe,mWe,yWe,gWe,vWe,bWe,wWe,_We,SWe];function oc(e){return e?(e.nodeName||"").toLowerCase():null}function oa(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Uy(e){var t=oa(e).Element;return e instanceof t||e instanceof Element}function Va(e){var t=oa(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function E9(e){if(typeof ShadowRoot>"u")return!1;var t=oa(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function MWe(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var i=t.styles[r]||{},s=t.attributes[r]||{},n=t.elements[r];!Va(n)||!oc(n)||(Object.assign(n.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function TWe(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(i){var s=t.elements[i],n=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:r[i]),a=o.reduce(function(l,u){return l[u]="",l},{});!Va(s)||!oc(s)||(Object.assign(s.style,a),Object.keys(n).forEach(function(l){s.removeAttribute(l)}))})}}const IWe={name:"applyStyles",enabled:!0,phase:"write",fn:MWe,effect:TWe,requires:["computeStyles"]};function Hu(e){return e.split("-")[0]}var dy=Math.max,bE=Math.min,Zv=Math.round;function GN(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Aue(){return!/^((?!chrome|android).)*safari/i.test(GN())}function Yv(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=e.getBoundingClientRect(),s=1,n=1;t&&Va(e)&&(s=e.offsetWidth>0&&Zv(i.width)/e.offsetWidth||1,n=e.offsetHeight>0&&Zv(i.height)/e.offsetHeight||1);var o=Uy(e)?oa(e):window,a=o.visualViewport,l=!Aue()&&r,u=(i.left+(l&&a?a.offsetLeft:0))/s,c=(i.top+(l&&a?a.offsetTop:0))/n,p=i.width/s,f=i.height/n;return{width:p,height:f,top:c,right:u+p,bottom:c+f,left:u,x:u,y:c}}function A9(e){var t=Yv(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function $ue(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&E9(r)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Fh(e){return oa(e).getComputedStyle(e)}function EWe(e){return["table","td","th"].indexOf(oc(e))>=0}function pf(e){return((Uy(e)?e.ownerDocument:e.document)||window.document).documentElement}function z$(e){return oc(e)==="html"?e:e.assignedSlot||e.parentNode||(E9(e)?e.host:null)||pf(e)}function YH(e){return!Va(e)||Fh(e).position==="fixed"?null:e.offsetParent}function AWe(e){var t=/firefox/i.test(GN()),r=/Trident/i.test(GN());if(r&&Va(e)){var i=Fh(e);if(i.position==="fixed")return null}var s=z$(e);for(E9(s)&&(s=s.host);Va(s)&&["html","body"].indexOf(oc(s))<0;){var n=Fh(s);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||t&&n.willChange==="filter"||t&&n.filter&&n.filter!=="none")return s;s=s.parentNode}return null}function kS(e){for(var t=oa(e),r=YH(e);r&&EWe(r)&&Fh(r).position==="static";)r=YH(r);return r&&(oc(r)==="html"||oc(r)==="body"&&Fh(r).position==="static")?t:r||AWe(e)||t}function $9(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function x_(e,t,r){return dy(e,bE(t,r))}function $We(e,t,r){var i=x_(e,t,r);return i>r?r:i}function Cue(){return{top:0,right:0,bottom:0,left:0}}function Oue(e){return Object.assign({},Cue(),e)}function Pue(e,t){return t.reduce(function(r,i){return r[i]=e,r},{})}var CWe=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Oue(typeof t!="number"?t:Pue(t,LS))};function OWe(e){var t,r=e.state,i=e.name,s=e.options,n=r.elements.arrow,o=r.modifiersData.popperOffsets,a=Hu(r.placement),l=$9(a),u=[wo,Ha].indexOf(a)>=0,c=u?"height":"width";if(!(!n||!o)){var p=CWe(s.padding,r),f=A9(n),m=l==="y"?bo:wo,g=l==="y"?qa:Ha,b=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c],w=o[l]-r.rects.reference[l],S=kS(n),M=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,x=b/2-w/2,_=p[m],I=M-f[c]-p[g],E=M/2-f[c]/2+x,A=x_(_,E,I),C=l;r.modifiersData[i]=(t={},t[C]=A,t.centerOffset=A-E,t)}}function PWe(e){var t=e.state,r=e.options,i=r.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||$ue(t.elements.popper,s)&&(t.elements.arrow=s))}const RWe={name:"arrow",enabled:!0,phase:"main",fn:OWe,effect:PWe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Kv(e){return e.split("-")[1]}var LWe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function kWe(e,t){var r=e.x,i=e.y,s=t.devicePixelRatio||1;return{x:Zv(r*s)/s||0,y:Zv(i*s)/s||0}}function KH(e){var t,r=e.popper,i=e.popperRect,s=e.placement,n=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,p=e.isFixed,f=o.x,m=f===void 0?0:f,g=o.y,b=g===void 0?0:g,w=typeof c=="function"?c({x:m,y:b}):{x:m,y:b};m=w.x,b=w.y;var S=o.hasOwnProperty("x"),M=o.hasOwnProperty("y"),x=wo,_=bo,I=window;if(u){var E=kS(r),A="clientHeight",C="clientWidth";if(E===oa(r)&&(E=pf(r),Fh(E).position!=="static"&&a==="absolute"&&(A="scrollHeight",C="scrollWidth")),E=E,s===bo||(s===wo||s===Ha)&&n===A2){_=qa;var O=p&&E===I&&I.visualViewport?I.visualViewport.height:E[A];b-=O-i.height,b*=l?1:-1}if(s===wo||(s===bo||s===qa)&&n===A2){x=Ha;var R=p&&E===I&&I.visualViewport?I.visualViewport.width:E[C];m-=R-i.width,m*=l?1:-1}}var D=Object.assign({position:a},u&&LWe),N=c===!0?kWe({x:m,y:b},oa(r)):{x:m,y:b};if(m=N.x,b=N.y,l){var U;return Object.assign({},D,(U={},U[_]=M?"0":"",U[x]=S?"0":"",U.transform=(I.devicePixelRatio||1)<=1?"translate("+m+"px, "+b+"px)":"translate3d("+m+"px, "+b+"px, 0)",U))}return Object.assign({},D,(t={},t[_]=M?b+"px":"",t[x]=S?m+"px":"",t.transform="",t))}function NWe(e){var t=e.state,r=e.options,i=r.gpuAcceleration,s=i===void 0?!0:i,n=r.adaptive,o=n===void 0?!0:n,a=r.roundOffsets,l=a===void 0?!0:a,u={placement:Hu(t.placement),variation:Kv(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,KH(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,KH(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const DWe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:NWe,data:{}};var _M={passive:!0};function FWe(e){var t=e.state,r=e.instance,i=e.options,s=i.scroll,n=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=oa(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&u.forEach(function(c){c.addEventListener("scroll",r.update,_M)}),a&&l.addEventListener("resize",r.update,_M),function(){n&&u.forEach(function(c){c.removeEventListener("scroll",r.update,_M)}),a&&l.removeEventListener("resize",r.update,_M)}}const jWe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:FWe,data:{}};var VWe={left:"right",right:"left",bottom:"top",top:"bottom"};function x3(e){return e.replace(/left|right|bottom|top/g,function(t){return VWe[t]})}var UWe={start:"end",end:"start"};function XH(e){return e.replace(/start|end/g,function(t){return UWe[t]})}function C9(e){var t=oa(e),r=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:r,scrollTop:i}}function O9(e){return Yv(pf(e)).left+C9(e).scrollLeft}function zWe(e,t){var r=oa(e),i=pf(e),s=r.visualViewport,n=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){n=s.width,o=s.height;var u=Aue();(u||!u&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:n,height:o,x:a+O9(e),y:l}}function GWe(e){var t,r=pf(e),i=C9(e),s=(t=e.ownerDocument)==null?void 0:t.body,n=dy(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=dy(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+O9(e),l=-i.scrollTop;return Fh(s||r).direction==="rtl"&&(a+=dy(r.clientWidth,s?s.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function P9(e){var t=Fh(e),r=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+i)}function Rue(e){return["html","body","#document"].indexOf(oc(e))>=0?e.ownerDocument.body:Va(e)&&P9(e)?e:Rue(z$(e))}function M_(e,t){var r;t===void 0&&(t=[]);var i=Rue(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),n=oa(i),o=s?[n].concat(n.visualViewport||[],P9(i)?i:[]):i,a=t.concat(o);return s?a:a.concat(M_(z$(o)))}function BN(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function BWe(e,t){var r=Yv(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function QH(e,t,r){return t===Iue?BN(zWe(e,r)):Uy(t)?BWe(t,r):BN(GWe(pf(e)))}function qWe(e){var t=M_(z$(e)),r=["absolute","fixed"].indexOf(Fh(e).position)>=0,i=r&&Va(e)?kS(e):e;return Uy(i)?t.filter(function(s){return Uy(s)&&$ue(s,i)&&oc(s)!=="body"}):[]}function HWe(e,t,r,i){var s=t==="clippingParents"?qWe(e):[].concat(t),n=[].concat(s,[r]),o=n[0],a=n.reduce(function(l,u){var c=QH(e,u,i);return l.top=dy(c.top,l.top),l.right=bE(c.right,l.right),l.bottom=bE(c.bottom,l.bottom),l.left=dy(c.left,l.left),l},QH(e,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Lue(e){var t=e.reference,r=e.element,i=e.placement,s=i?Hu(i):null,n=i?Kv(i):null,o=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,l;switch(s){case bo:l={x:o,y:t.y-r.height};break;case qa:l={x:o,y:t.y+t.height};break;case Ha:l={x:t.x+t.width,y:a};break;case wo:l={x:t.x-r.width,y:a};break;default:l={x:t.x,y:t.y}}var u=s?$9(s):null;if(u!=null){var c=u==="y"?"height":"width";switch(n){case Jv:l[u]=l[u]-(t[c]/2-r[c]/2);break;case A2:l[u]=l[u]+(t[c]/2-r[c]/2);break}}return l}function Xv(e,t){t===void 0&&(t={});var r=t,i=r.placement,s=i===void 0?e.placement:i,n=r.strategy,o=n===void 0?e.strategy:n,a=r.boundary,l=a===void 0?pWe:a,u=r.rootBoundary,c=u===void 0?Iue:u,p=r.elementContext,f=p===void 0?_b:p,m=r.altBoundary,g=m===void 0?!1:m,b=r.padding,w=b===void 0?0:b,S=Oue(typeof w!="number"?w:Pue(w,LS)),M=f===_b?dWe:_b,x=e.rects.popper,_=e.elements[g?M:f],I=HWe(Uy(_)?_:_.contextElement||pf(e.elements.popper),l,c,o),E=Yv(e.elements.reference),A=Lue({reference:E,element:x,strategy:"absolute",placement:s}),C=BN(Object.assign({},x,A)),O=f===_b?C:E,R={top:I.top-O.top+S.top,bottom:O.bottom-I.bottom+S.bottom,left:I.left-O.left+S.left,right:O.right-I.right+S.right},D=e.modifiersData.offset;if(f===_b&&D){var N=D[s];Object.keys(R).forEach(function(U){var J=[Ha,qa].indexOf(U)>=0?1:-1,y=[bo,qa].indexOf(U)>=0?"y":"x";R[U]+=N[y]*J})}return R}function WWe(e,t){t===void 0&&(t={});var r=t,i=r.placement,s=r.boundary,n=r.rootBoundary,o=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?Eue:l,c=Kv(i),p=c?a?ZH:ZH.filter(function(g){return Kv(g)===c}):LS,f=p.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=p);var m=f.reduce(function(g,b){return g[b]=Xv(e,{placement:b,boundary:s,rootBoundary:n,padding:o})[Hu(b)],g},{});return Object.keys(m).sort(function(g,b){return m[g]-m[b]})}function JWe(e){if(Hu(e)===I9)return[];var t=x3(e);return[XH(e),t,XH(t)]}function ZWe(e){var t=e.state,r=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var s=r.mainAxis,n=s===void 0?!0:s,o=r.altAxis,a=o===void 0?!0:o,l=r.fallbackPlacements,u=r.padding,c=r.boundary,p=r.rootBoundary,f=r.altBoundary,m=r.flipVariations,g=m===void 0?!0:m,b=r.allowedAutoPlacements,w=t.options.placement,S=Hu(w),M=S===w,x=l||(M||!g?[x3(w)]:JWe(w)),_=[w].concat(x).reduce(function(Me,De){return Me.concat(Hu(De)===I9?WWe(t,{placement:De,boundary:c,rootBoundary:p,padding:u,flipVariations:g,allowedAutoPlacements:b}):De)},[]),I=t.rects.reference,E=t.rects.popper,A=new Map,C=!0,O=_[0],R=0;R<_.length;R++){var D=_[R],N=Hu(D),U=Kv(D)===Jv,J=[bo,qa].indexOf(N)>=0,y=J?"width":"height",T=Xv(t,{placement:D,boundary:c,rootBoundary:p,altBoundary:f,padding:u}),$=J?U?Ha:wo:U?qa:bo;I[y]>E[y]&&($=x3($));var P=x3($),z=[];if(n&&z.push(T[N]<=0),a&&z.push(T[$]<=0,T[P]<=0),z.every(function(Me){return Me})){O=D,C=!1;break}A.set(D,z)}if(C)for(var X=g?3:1,ae=function(De){var $e=_.find(function(gt){var dt=A.get(gt);if(dt)return dt.slice(0,De).every(function(Je){return Je})});if($e)return O=$e,"break"},te=X;te>0;te--){var ye=ae(te);if(ye==="break")break}t.placement!==O&&(t.modifiersData[i]._skip=!0,t.placement=O,t.reset=!0)}}const YWe={name:"flip",enabled:!0,phase:"main",fn:ZWe,requiresIfExists:["offset"],data:{_skip:!1}};function eW(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function tW(e){return[bo,Ha,qa,wo].some(function(t){return e[t]>=0})}function KWe(e){var t=e.state,r=e.name,i=t.rects.reference,s=t.rects.popper,n=t.modifiersData.preventOverflow,o=Xv(t,{elementContext:"reference"}),a=Xv(t,{altBoundary:!0}),l=eW(o,i),u=eW(a,s,n),c=tW(l),p=tW(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":p})}const XWe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:KWe};function QWe(e,t,r){var i=Hu(e),s=[wo,bo].indexOf(i)>=0?-1:1,n=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=n[0],a=n[1];return o=o||0,a=(a||0)*s,[wo,Ha].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function eJe(e){var t=e.state,r=e.options,i=e.name,s=r.offset,n=s===void 0?[0,0]:s,o=Eue.reduce(function(c,p){return c[p]=QWe(p,t.rects,n),c},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=o}const tJe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:eJe};function rJe(e){var t=e.state,r=e.name;t.modifiersData[r]=Lue({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const iJe={name:"popperOffsets",enabled:!0,phase:"read",fn:rJe,data:{}};function sJe(e){return e==="x"?"y":"x"}function nJe(e){var t=e.state,r=e.options,i=e.name,s=r.mainAxis,n=s===void 0?!0:s,o=r.altAxis,a=o===void 0?!1:o,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,p=r.padding,f=r.tether,m=f===void 0?!0:f,g=r.tetherOffset,b=g===void 0?0:g,w=Xv(t,{boundary:l,rootBoundary:u,padding:p,altBoundary:c}),S=Hu(t.placement),M=Kv(t.placement),x=!M,_=$9(S),I=sJe(_),E=t.modifiersData.popperOffsets,A=t.rects.reference,C=t.rects.popper,O=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,R=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,N={x:0,y:0};if(E){if(n){var U,J=_==="y"?bo:wo,y=_==="y"?qa:Ha,T=_==="y"?"height":"width",$=E[_],P=$+w[J],z=$-w[y],X=m?-C[T]/2:0,ae=M===Jv?A[T]:C[T],te=M===Jv?-C[T]:-A[T],ye=t.elements.arrow,Me=m&&ye?A9(ye):{width:0,height:0},De=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Cue(),$e=De[J],gt=De[y],dt=x_(0,A[T],Me[T]),Je=x?A[T]/2-X-dt-$e-R.mainAxis:ae-dt-$e-R.mainAxis,He=x?-A[T]/2+X+dt+gt+R.mainAxis:te+dt+gt+R.mainAxis,mt=t.elements.arrow&&kS(t.elements.arrow),zt=mt?_==="y"?mt.clientTop||0:mt.clientLeft||0:0,H=(U=D?.[_])!=null?U:0,G=$+Je-H-zt,re=$+He-H,we=x_(m?bE(P,G):P,$,m?dy(z,re):z);E[_]=we,N[_]=we-$}if(a){var me,k=_==="x"?bo:wo,q=_==="x"?qa:Ha,L=E[I],V=I==="y"?"height":"width",W=L+w[k],Q=L-w[q],se=[bo,wo].indexOf(S)!==-1,le=(me=D?.[I])!=null?me:0,ee=se?W:L-A[V]-C[V]-le+R.altAxis,ne=se?L+A[V]+C[V]-le-R.altAxis:Q,Oe=m&&se?$We(ee,L,ne):x_(m?ee:W,L,m?ne:Q);E[I]=Oe,N[I]=Oe-L}t.modifiersData[i]=N}}const oJe={name:"preventOverflow",enabled:!0,phase:"main",fn:nJe,requiresIfExists:["offset"]};function aJe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function lJe(e){return e===oa(e)||!Va(e)?C9(e):aJe(e)}function uJe(e){var t=e.getBoundingClientRect(),r=Zv(t.width)/e.offsetWidth||1,i=Zv(t.height)/e.offsetHeight||1;return r!==1||i!==1}function cJe(e,t,r){r===void 0&&(r=!1);var i=Va(t),s=Va(t)&&uJe(t),n=pf(t),o=Yv(e,s,r),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!r)&&((oc(t)!=="body"||P9(n))&&(a=lJe(t)),Va(t)?(l=Yv(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):n&&(l.x=O9(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function hJe(e){var t=new Map,r=new Set,i=[];e.forEach(function(n){t.set(n.name,n)});function s(n){r.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!r.has(a)){var l=t.get(a);l&&s(l)}}),i.push(n)}return e.forEach(function(n){r.has(n.name)||s(n)}),i}function pJe(e){var t=hJe(e);return xWe.reduce(function(r,i){return r.concat(t.filter(function(s){return s.phase===i}))},[])}function dJe(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function fJe(e){var t=e.reduce(function(r,i){var s=r[i.name];return r[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,r},{});return Object.keys(t).map(function(r){return t[r]})}var rW={placement:"bottom",modifiers:[],strategy:"absolute"};function iW(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function mJe(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,i=r===void 0?[]:r,s=t.defaultOptions,n=s===void 0?rW:s;return function(a,l,u){u===void 0&&(u=n);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},rW,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],f=!1,m={state:c,setOptions:function(S){var M=typeof S=="function"?S(c.options):S;b(),c.options=Object.assign({},n,c.options,M),c.scrollParents={reference:Uy(a)?M_(a):a.contextElement?M_(a.contextElement):[],popper:M_(l)};var x=pJe(fJe([].concat(i,c.options.modifiers)));return c.orderedModifiers=x.filter(function(_){return _.enabled}),g(),m.update()},forceUpdate:function(){if(!f){var S=c.elements,M=S.reference,x=S.popper;if(iW(M,x)){c.rects={reference:cJe(M,kS(x),c.options.strategy==="fixed"),popper:A9(x)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(R){return c.modifiersData[R.name]=Object.assign({},R.data)});for(var _=0;_<c.orderedModifiers.length;_++){if(c.reset===!0){c.reset=!1,_=-1;continue}var I=c.orderedModifiers[_],E=I.fn,A=I.options,C=A===void 0?{}:A,O=I.name;typeof E=="function"&&(c=E({state:c,options:C,name:O,instance:m})||c)}}}},update:dJe(function(){return new Promise(function(w){m.forceUpdate(),w(c)})}),destroy:function(){b(),f=!0}};if(!iW(a,l))return m;m.setOptions(u).then(function(w){!f&&u.onFirstUpdate&&u.onFirstUpdate(w)});function g(){c.orderedModifiers.forEach(function(w){var S=w.name,M=w.options,x=M===void 0?{}:M,_=w.effect;if(typeof _=="function"){var I=_({state:c,name:S,instance:m,options:x}),E=function(){};p.push(I||E)}})}function b(){p.forEach(function(w){return w()}),p=[]}return m}}var yJe=[jWe,iJe,DWe,IWe,tJe,YWe,oJe,RWe,XWe],gJe=mJe({defaultModifiers:yJe});const vJe=["content","aria-label"],R9=Wt({__name:"dropdown-menu",props:{position:{type:String,default:"bottom"},popperOptions:{type:Object,default(){return{}}},tooltip:{type:String},tooltipPlacement:{type:String,default:"bottom"},tooltipPlacementAlt:{type:String,default:"top"},tooltipTheme:{type:String,default:"ramp4"},tooltipAnimation:{type:String,default:"scale"},centered:{type:Boolean,default:!0},ariaLabel:{type:String}},setup(e){const t=Se(!1),r=Se(null),i=Fs([]),s=Se(),n=Se(),o=Se(),a=e;i.push(ks(t,()=>{r.value.update()}));const l=()=>{t.value=!t.value,o.value._tippy.hide()},u=()=>{o.value._tippy.setProps({placement:t.value?a.tooltipPlacementAlt:a.tooltipPlacement}),o.value._tippy.show()},c=()=>{o.value._tippy.hide()};return wn(()=>{window.addEventListener("click",p=>{(!s.value||!s.value.contains(p.target))&&(t.value=!1)},{capture:!0}),window.addEventListener("blur",()=>{t.value=!1}),window.addEventListener("focusin",p=>{(!s.value||!s.value.contains(p.target))&&(t.value=!1)}),o.value.addEventListener("focus",u),o.value.addEventListener("blur",c),o.value.addEventListener("mouseover",u),o.value.addEventListener("mouseleave",c),pc(()=>{const p={name:"overflowScroll",enabled:!0,phase:"main",fn({state:f}){const{bottom:m}=Xv(f);m>0?(f.styles.popper.overflowY=m>100?"auto":void 0,f.styles.popper.overflowX="hidden",f.styles.popper.height=`${f.rects.popper.height-m-8}px`):f.styles.popper.height="auto"}};o.value&&n.value&&(r.value=gJe(o.value,n.value,{placement:a.position||"bottom",modifiers:[p,{name:"offset",options:{offset:[0,5]}}],...a.popperOptions}))})}),dc(()=>{i.forEach(p=>p()),window.removeEventListener("click",p=>{(!s.value||!s.value.contains(p.target))&&(t.value=!1)},{capture:!0}),window.removeEventListener("blur",()=>{t.value=!1}),window.removeEventListener("focusin",p=>{(!s.value||!s.value.contains(p.target))&&(t.value=!1)}),o.value.removeEventListener("focus",u),o.value.removeEventListener("blur",c),o.value.removeEventListener("mouseover",u),o.value.removeEventListener("mouseleave",c),t.value=!1}),(p,f)=>{const m=br("tippy");return Ae(),Be("div",{ref_key:"el",ref:s},[vr((Ae(),Be("button",{type:"button",class:"text-gray-500 hover:text-black dropdown-button",onClick:l,content:e.tooltip,"aria-label":e.ariaLabel?String(e.ariaLabel):String(e.tooltip),ref_key:"dropdownTrigger",ref:o},[ku(p.$slots,"header")],8,vJe)),[[m,{placement:e.tooltipPlacement,theme:e.tooltipTheme,animation:e.tooltipAnimation,appendTo:"parent",trigger:"manual"}]]),vr(Te("div",{onClick:f[0]||(f[0]=g=>r.value.update()),class:wi(["rv-dropdown shadow-md border border-gray:200 py-8 bg-white rounded z-10",{"text-center":e.centered}]),ref_key:"dropdown",ref:n},[ku(p.$slots,"default",{close:()=>t.value=!t.value})],2),[[n9,t.value]])],512)}}}),Wu=ui("notification",()=>{const e=Se([]),t=Se({}),r=Bt(()=>e.value.length>=99?99:e.value.length);function i(u){e.value=[u,...e.value]}function s(u){if(e.value.includes(u)){const c=e.value.indexOf(u);u instanceof kue&&l(u),c>-1&&e.value.splice(c,1)}}function n(u){t.value[u.id]=u}function o(u,c){t.value[u]&&(t.value[u].messageList.push(c),e.value.includes(t.value[u])||(e.value=[t.value[u],...e.value]))}function a(){Object.values(t.value).forEach(u=>l(u)),e.value=[]}function l(u){const c=e.value.indexOf(u);c>-1&&e.value.splice(c,1),u.messageList=[]}return{notificationStack:e,groups:t,notificationNumber:r,showNotification:i,removeNotification:s,registerGroup:n,addToGroup:o,clearAll:a}}),bJe={class:"h-full flex flex-col"},wJe={class:"w-full flex mb-6"},_Je=["content","aria-label"],SJe=Wt({__name:"screen",props:{panel:{type:Object,required:!0}},setup(e){const t=Wu(),{t:r}=Xr(),i=Bt(()=>t.notificationNumber),s=()=>t.clearAll();return(n,o)=>{const a=Vi("panel-screen"),l=br("tippy");return Ae(),Vr(a,{panel:e.panel},{header:Bi(()=>[Ah(Or(at(r)("notifications.title")),1)]),content:Bi(()=>[Te("div",bJe,[Te("div",wJe,[vr((Ae(),Be("button",{type:"button",onClick:s,class:wi(["p-4 ml-auto",[i.value?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:at(r)("notifications.controls.clearAll"),"aria-label":at(r)("notifications.controls.clearAll")},o[0]||(o[0]=[Te("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current h-20 w-20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Te("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Te("path",{d:"M13 17h-9a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6a2 2 0 1 1 4 0a7 7 0 0 1 4 6v2"}),Te("path",{d:"M9 17v1a3 3 0 0 0 4.194 2.753"}),Te("path",{d:"M22 22l-5 -5"}),Te("path",{d:"M17 22l5 -5"})],-1)]),10,_Je)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale"}]])]),jt(Nue,{class:"overflow-y-auto"})])]),_:1},8,["panel"])}}});var ta=(e=>(e.ERROR="error",e.INFO="info",e.WARNING="warning",e))(ta||{});class xJe extends qi{notificationStore;constructor(t){super(t),this.$iApi.panel.register({id:"notifications",config:{screens:{"notifications-screen":Gi(SJe)},alertName:"notifications.title"}}),this.notificationStore=Wu(this.$vApp.$pinia)}show(t,r){this.notificationStore.showNotification({type:t,message:r})}addGroup(t,r,i){if(this.getGroup(t))throw new Error("Duplicate notification group id registration: "+t);const s=new kue(this.$iApi,t,r,i);return this.notificationStore.registerGroup(s),s}getGroup(t){return this.notificationStore.groups[t]}}class kue extends qi{notificationStore=Wu(this.$vApp.$pinia);id;message;type;messageList=[];constructor(t,r,i,s){super(t),this.id=r,this.type=i,this.message=s}show(t){this.notificationStore.addToGroup(this.id,t)}}const MJe=["content"],TJe={class:"flex items-center text-left"},IJe={class:"select-text cursor-text"},EJe=["content"],AJe={key:0,class:"text-left"},$Je=Wt({__name:"notification-item",props:{notification:{type:Object,required:!0}},setup(e){const t=Wu(),{t:r}=Xr(),i=e,s=Se(!1),n=Fs({[ta.WARNING]:"âš ",[ta.INFO]:"â„¹ï¸",[ta.ERROR]:"âŒ"}),o=l=>{t.removeNotification(l)},a=()=>{if(!i.notification.messageList)return!1};return(l,u)=>{const c=br("tippy");return vr((Ae(),Be("li",{class:wi(["flex-col default-focus-style p-4",e.notification.messageList?"cursor-pointer":""]),content:at(r)(s.value?"notifications.controls.collapse":"notifications.controls.expand"),onClick:u[1]||(u[1]=p=>s.value=!s.value)},[Te("div",TJe,[Te("span",null,[Ah(Or(n[e.notification.type])+" ",1),Te("span",IJe,Or(e.notification.message),1)]),u[4]||(u[4]=Te("span",{class:"flex-grow"},null,-1)),e.notification.messageList?(Ae(),Be("div",{key:0,class:wi(["dropdown-icon p-4 pointer-events-none",{"transform -rotate-180":s.value}])},u[2]||(u[2]=[Te("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24"},[Te("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1)]),2)):Zr("",!0),vr((Ae(),Be("button",{type:"button",onClick:u[0]||(u[0]=R$(p=>o(e.notification),["stop"])),class:"mx-4 p-4 text-gray-500 hover:text-black",content:at(r)("notifications.controls.dismiss")},u[3]||(u[3]=[Te("svg",{class:"fill-current",height:"16",width:"16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 105.16 122.88","fill-rule":"evenodd"},[Te("path",{d:"M11.17,37.16H94.65a8.4,8.4,0,0,1,2,.16,5.93,5.93,0,0,1,2.88,1.56,5.43,5.43,0,0,1,1.64,3.34,7.65,7.65,0,0,1-.06,1.44L94,117.31v0l0,.13,0,.28v0a7.06,7.06,0,0,1-.2.9v0l0,.06v0a5.89,5.89,0,0,1-5.47,4.07H17.32a6.17,6.17,0,0,1-1.25-.19,6.17,6.17,0,0,1-1.16-.48h0a6.18,6.18,0,0,1-3.08-4.88l-7-73.49a7.69,7.69,0,0,1-.06-1.66,5.37,5.37,0,0,1,1.63-3.29,6,6,0,0,1,3-1.58,8.94,8.94,0,0,1,1.79-.13ZM5.65,8.8H37.12V6h0a2.44,2.44,0,0,1,0-.27,6,6,0,0,1,1.76-4h0A6,6,0,0,1,43.09,0H62.46l.3,0a6,6,0,0,1,5.7,6V6h0V8.8h32l.39,0a4.7,4.7,0,0,1,4.31,4.43c0,.18,0,.32,0,.5v9.86a2.59,2.59,0,0,1-2.59,2.59H2.59A2.59,2.59,0,0,1,0,23.62V13.53H0a1.56,1.56,0,0,1,0-.31v0A4.72,4.72,0,0,1,3.88,8.88,10.4,10.4,0,0,1,5.65,8.8Zm42.1,52.7a4.77,4.77,0,0,1,9.49,0v37a4.77,4.77,0,0,1-9.49,0v-37Zm23.73-.2a4.58,4.58,0,0,1,5-4.06,4.47,4.47,0,0,1,4.51,4.46l-2,37a4.57,4.57,0,0,1-5,4.06,4.47,4.47,0,0,1-4.51-4.46l2-37ZM25,61.7a4.46,4.46,0,0,1,4.5-4.46,4.58,4.58,0,0,1,5,4.06l2,37a4.47,4.47,0,0,1-4.51,4.46,4.57,4.57,0,0,1-5-4.06l-2-37Z"})],-1)]),8,EJe)),[[c,{theme:"ramp4",animation:"scale"}]])]),e.notification.messageList&&s.value?(Ae(),Be("div",AJe,[(Ae(!0),Be(xr,null,sg(e.notification.messageList,(p,f)=>(Ae(),Be("p",{key:e.notification.id+p+f},Or(p),1))),128))])):Zr("",!0)],10,MJe)),[[c,{onShow:a,theme:"ramp4",animation:"scale"}]])}}}),CJe=["content"],OJe={key:0,class:"w-full border-b border-black"},PJe={key:1,class:"flex flex-col items-center h-full"},Nue=Wt({__name:"notification-list",setup(e){const t=Wu(),{t:r}=Xr(),i=Se(),s=()=>{i.value._tippy.hide()},n=a=>{a.key==="Tab"&&i.value?.matches(":focus")&&i.value._tippy.show()};wn(()=>{i.value?.addEventListener("blur",s),i.value?.addEventListener("keyup",n)}),dc(()=>{i.value?.removeEventListener("blur",s),i.value?.removeEventListener("keyup",n)});const o=Bt(()=>t.notificationStack);return(a,l)=>{const u=br("focus-item"),c=br("focus-list"),p=br("tippy");return Ae(),Be("div",null,[o.value.length>0?vr((Ae(),Be("ul",{key:0,content:at(r)("panels.controls.items"),ref_key:"el",ref:i},[(Ae(!0),Be(xr,null,sg(o.value,(f,m)=>(Ae(),Be(xr,{key:f.message+m},[m>0?(Ae(),Be("div",OJe)):Zr("",!0),vr(jt($Je,{class:wi([f.type]),notification:f},null,8,["class","notification"]),[[u]])],64))),128))],8,CJe)),[[c],[p,{trigger:"manual",placement:"top-start"}]]):(Ae(),Be("div",PJe,[l[0]||(l[0]=Te("span",{class:"flex-grow"},null,-1)),l[1]||(l[1]=Te("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-48 w-48 fill-current"},[Te("path",{d:"M0 0h24v24H0z",fill:"none"}),Te("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"})],-1)),Te("span",null,Or(at(r)("notifications.empty")),1),l[2]||(l[2]=Te("span",{style:{"flex-grow":"6"}},null,-1))]))])}}}),RJe={class:"flex items-center hover:text-white"},LJe=["aria-label"],kJe={key:0,class:"number rounded-full w-18 text-white"},NJe={class:"notification-dropdown pointer-events-auto bg-white rounded text-center text-black w-500 h-256 flex flex-col p-0"},DJe={class:"pb-8 border-b border-gray-600"},FJe={class:"absolute flex right-3 top-3"},jJe=["content","aria-label"],VJe=Wt({__name:"caption-button",setup(e){const t=Wu(),{t:r}=Xr(),i=Bt(()=>t.notificationNumber),s=()=>t.clearAll();return(n,o)=>{const a=Vi("close"),l=br("tippy");return Ae(),Vr(R9,{position:"top-start",tooltip:at(r)("notifications.title"),tooltipPlacement:"top",class:"pointer-events-auto sm:flex ml-4 mr-8"},{header:Bi(()=>[Te("div",RJe,[(Ae(),Be("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-label":at(r)("notifications.open")},o[0]||(o[0]=[Te("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},null,-1)]),8,LJe)),i.value&&i.value>0?(Ae(),Be("span",kJe,Or(i.value),1)):Zr("",!0)])]),default:Bi(u=>[Te("div",NJe,[Te("div",null,[Te("h4",DJe,Or(at(r)("notifications.title")),1),Te("div",FJe,[vr((Ae(),Be("button",{type:"button",onClick:s,class:wi(["p-4 mr-6",[i.value?"text-gray-500 hover:text-black":"text-gray-300 cursor-default pointer-events-none"]]),content:at(r)("notifications.controls.clearAll"),"aria-label":at(r)("notifications.controls.clearAll")},o[1]||(o[1]=[Te("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current h-20 w-20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[Te("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Te("path",{d:"M13 17h-9a4 4 0 0 0 2 -3v-3a7 7 0 0 1 4 -6a2 2 0 1 1 4 0a7 7 0 0 1 4 6v2"}),Te("path",{d:"M9 17v1a3 3 0 0 0 4.194 2.753"}),Te("path",{d:"M22 22l-5 -5"}),Te("path",{d:"M17 22l5 -5"})],-1)]),10,jJe)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale",appendTo:"parent"}]]),jt(a,{onClick:u.close},null,8,["onClick"])])]),jt(Nue,{class:"overflow-y-auto h-230"})])]),_:1},8,["tooltip"])}}}),UJe=qh(VJe,[["__scopeId","data-v-77b1750c"]]),zJe={class:"flex hover:text-white"},GJe=["aria-label"],BJe={class:"about-ramp-dropdown pointer-events-auto bg-white rounded w-256 h-50"},qJe={class:"pb-8 border-b border-gray-600 mb-10"},HJe={class:"absolute right-5 top-5"},WJe={class:"select-text"},JJe={class:"font-bold cursor-text"},ZJe={class:"text-sm cursor-text"},YJe={class:"text-sm cursor-text"},KJe=Wt({__name:"about-ramp-dropdown",props:{position:{type:String,default:"top-start"}},setup(e){const{t}=Xr(),r=Bt(()=>`${xb.major}.${xb.minor}.${xb.patch}`),i=Bt(()=>xb.hash.slice(0,9)),s=Bt(()=>{let n=new Date(xb.timestamp);if(isNaN(n))return"dev mode, no date";{const o=a=>a<10?"0"+a.toString():a.toString();return`${n.getFullYear()}-${n.getMonth()+1}-${n.getDate()} ${n.getHours()}:${o(n.getMinutes())}:${o(n.getSeconds())}`}});return(n,o)=>{const a=Vi("close"),l=Vi("dropdown-menu"),u=br("focus-item");return vr((Ae(),Vr(l,{class:"pointer-events-auto sm:flex",position:e.position,tooltip:at(t)("ramp.about"),tooltipPlacement:e.position},{header:Bi(()=>[Te("div",zJe,[(Ae(),Be("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20","aria-label":at(t)("ramp.about.open")},o[0]||(o[0]=[Te("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"},null,-1)]),8,GJe))])]),default:Bi(c=>[Te("div",BJe,[Te("div",null,[Te("h4",qJe,Or(at(t)("ramp.about")),1),Te("div",HJe,[jt(a,{onClick:c.close},null,8,["onClick"])]),Te("div",WJe,[Te("div",null,[Te("span",JJe,Or(r.value),1),Te("span",ZJe," ["+Or(i.value)+"] ",1)]),Te("div",null,[Te("span",YJe,Or(s.value),1)]),o[1]||(o[1]=Te("div",{class:"mt-5"},[Te("a",{class:"text-sm underline text-blue-600",href:"https://github.com/ramp4-pcar4/ramp4-pcar4",target:"_blank"},[Te("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"inline-block fill-black w-16 h-16"},[Te("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})]),Ah(" ramp4-pcar4 ")])],-1))])])])]),_:1},8,["position","tooltip","tooltipPlacement"])),[[u]])}}}),XJe=qh(KJe,[["__scopeId","data-v-bb2f62b1"]]),QJe={class:"map-caption absolute bottom-0 h-29 sm:h-38 flex justify-end pointer-events-auto cursor-default select-none text-gray-200 bg-black-75 left-0 right-0 py-2 sm:py-6"},eZe={key:0,class:"relative top-2 sm:top-1 ml-4 sm:ml-0 shrink-0"},tZe=["href","aria-label"],rZe=["src","alt"],iZe={key:1,class:"relative ml-10 top-2 text-sm sm:text-base"},sZe={class:"flex min-w-fit justify-end"},nZe={key:0,class:"pl-8 px-14 sm:block display-none relative top-2"},oZe=["aria-pressed","aria-label","content"],aZe={class:"relative top-1 text-sm sm:text-base"},lZe={class:"text-gray-200 hover:text-white text-sm sm:text-base pb-5"},uZe=["onClick"],cZe={key:0,class:"sr-only"},hZe=Wt({__name:"map-caption",setup(e){const t=yd(),r=fo(),{t:i}=Xr(),s=vs("iApi"),n=Bt(()=>t.scale),o=Bt(()=>t.attribution),a=Bt(()=>t.coords),l=Bt(()=>t.langtoggle),u=Bt(()=>r.config.map),c=Se([]),p=Fs([]);p.push(ks(u,b=>{b&&s.geo.map.caption.createCaption(u.value?.caption)})),dc(()=>{p.forEach(b=>b())}),CS(()=>{pc(()=>{s.$i18n.locale.value&&c.value.length==0&&(c.value=s.$i18n.availableLocales)})});const f=b=>{s.$i18n.locale.value!=b&&s.setLanguage(b)},m=()=>{t.toggleScale(),s.geo.map.caption.updateScale()},g=(b=!1)=>i(b?"map.toggleScaleToMetric":"map.toggleScaleToImperial");return(b,w)=>{const S=Vi("dropdown-menu"),M=br("truncate"),x=br("tippy");return Ae(),Be("div",QJe,[jt(XJe,{class:"sm:block display-none ml-8 mr-4",position:"top-end"}),jt(UJe,{class:"sm:block display-none"}),o.value?.logo.disabled?Zr("",!0):(Ae(),Be("span",eZe,[Te("a",{class:"pointer-events-auto cursor-pointer",href:o.value?.logo.link,target:"_blank","aria-label":o.value?.logo.altText},[Te("img",{class:"object-contain h-18 sm:h-26",src:o.value?.logo.value,alt:o.value?.logo.altText},null,8,rZe)],8,tZe)])),o.value?.text.disabled?Zr("",!0):vr((Ae(),Be("span",iZe,[Ah(Or(o.value?.text.value),1)])),[[M,{options:{placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),w[0]||(w[0]=Te("span",{class:"flex-grow w-15"},null,-1)),Te("div",sZe,[a.value?.disabled?Zr("",!0):vr((Ae(),Be("div",nZe,[Ah(Or(a.value?.formattedString),1)])),[[M,{options:{hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),n.value?.disabled?Zr("",!0):vr((Ae(),Be("button",{key:1,type:"button",class:"flex-shrink-0 mx-2 sm:mx-10 px-4 pointer-events-auto cursor-pointer border-none",onClick:m,"aria-pressed":n.value?.isImperialScale,"aria-label":`
                    ${n.value?.label} - ${g(n.value?.isImperialScale)}
                `,content:g(n.value?.isImperialScale)},[Te("span",{class:"border-solid border-2 border-white border-t-0 h-5 mr-4 inline-block",style:of({width:n.value?.width})},null,4),Te("span",aZe,Or(n.value?.label),1)],8,oZe)),[[x,{delay:[300,0],placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale",touch:["hold",200]}]]),l.value?.disabled?Zr("",!0):(Ae(),Vr(S,{key:2,class:"flex-shrink-0 pointer-events-auto focus:outline-none px-4 mr-4 relative top-2",position:"top-end",tooltip:at(i)("map.changeLanguage"),ariaLabel:`${at(i)("map.language.short")} - ${at(i)("map.changeLanguage")}`,tooltipPlacement:"top-start",tooltipPlacementAlt:"left-end"},{header:Bi(()=>[Te("span",lZe,Or(at(i)("map.language.short")),1)]),default:Bi(()=>[(Ae(!0),Be(xr,null,sg(c.value,(_,I)=>(Ae(),Be("a",{key:`${_}-${I}`,class:wi(["flex-auto items-center text-sm sm:text-base cursor-pointer",{"font-bold":_===at(s).$i18n.locale.value}]),href:"javascript:;",onClick:E=>f(_)},[Ah(Or(at(i)("map.language."+_))+" ",1),_===at(s).$i18n.locale.value?(Ae(),Be("span",cZe,Or(at(i)("map.language.curr")),1)):Zr("",!0)],10,uZe))),128))]),_:1},8,["tooltip","ariaLabel"]))])])}}}),pZe=["content"],dZe={key:0,class:"number absolute -top-2 -right-2 text-white w-18 rounded-full"},fZe=Wt({__name:"floating-button",setup(e){const t=Wu(),r=vs("iApi"),{t:i}=Xr(),s=Bt(()=>t.notificationNumber);return(n,o)=>{const a=br("tippy");return vr((Ae(),Be("button",{type:"button",onClick:o[0]||(o[0]=l=>at(r).panel.get("notifications").open()),class:"pointer-events-auto items-center absolute left-8 bottom-36 p-6 block sm:display-none bg-black-75 rounded-full text-gray-400 hover:text-white",content:at(i)("notifications.title")},[o[1]||(o[1]=Te("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[Te("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})],-1)),s.value&&s.value>0?(Ae(),Be("span",dZe,Or(s.value),1)):Zr("",!0)],8,pZe)),[[a]])}}}),mZe=qh(fZe,[["__scopeId","data-v-edababb6"]]),yZe={class:"flex items-center mb-20"},gZe={class:"text-xl"},vZe=Wt({__name:"keyboard-instructions",setup(e){const t=vs("iApi"),{t:r}=Xr(),i=Se(!1),s=Se(["app","lists","map"]),n=Se([]),o=Se(null),a=Se(null);wn(()=>{n.value.push(t.event.on("openKeyboardInstructions",()=>{i.value=!0,pc(()=>{o.value.focus()})}))}),dc(()=>{n.value.forEach(u=>t?.event.off(u))});const l=u=>{u.key==="Tab"?u.shiftKey&&u.target===o.value?(u.preventDefault(),a.value.focus()):!u.shiftKey&&u.target===a.value&&(u.preventDefault(),o.value.focus()):u.key==="Escape"&&(u.preventDefault(),i.value=!1)};return(u,c)=>{const p=Vi("close");return i.value?(Ae(),Be("div",{key:0,class:"absolute inset-0 flex justify-center items-center bg-opacity-30 bg-black z-50 pointer-events-auto",onClick:c[3]||(c[3]=f=>i.value=!1),onKeydown:l},[Te("div",{class:"bg-white w-500 pointer-events-auto shadow-2xl p-20 flex flex-col",onClick:c[2]||(c[2]=R$(()=>{},["stop","prevent"])),tabindex:"0",ref_key:"firstEl",ref:o},[Te("div",yZe,[Te("h2",gZe,Or(at(r)("keyboardInstructions.title")),1),jt(p,{class:"ml-auto",onClick:c[0]||(c[0]=f=>i.value=!1)})]),(Ae(!0),Be(xr,null,sg(s.value,f=>(Ae(),Be("p",{class:"whitespace-pre-line pb-10",key:f},Or(at(r)(`keyboardInstructions.${f}`)),1))),128)),Te("button",{type:"button",class:"mt-auto self-end mr-10 mb-10 px-20 py-10",onClick:c[1]||(c[1]=f=>i.value=!1),ref_key:"lastEl",ref:a},Or(at(r)("keyboardInstructions.OK")),513)],512)],32)):Zr("",!0)}}}),S0=ui("instance",()=>({started:Se(!1)})),bZe={class:"h-full relative"},wZe={class:"inner-shell absolute top-0 left-0 h-full w-full pointer-events-none"},_Ze={class:"absolute top-8 w-full flex justify-center"},SZe={key:1,class:"w-full h-full"},xZe=Wt({__name:"shell",setup(e){const t=vs("iApi"),r=S0(),i=Ea(),s=Vy(),{t:n}=Xr(),o=Bt(()=>i.items.appbar),a=()=>{t?.event.emit("openKeyboardInstructions")},l=()=>s.teleported;return(u,c)=>(Ae(),Be("div",bZe,[Te("div",wZe,[c[0]||(c[0]=Te("div",{class:"sr-only screen-reader-alert"},null,-1)),Te("div",_Ze,[Te("button",{type:"button",class:"bg-white hidden-until-focus z-50 shadow-md px-10",onClick:a},Or(at(n)("keyboardInstructions.open")),1)]),jt(vZe),jt(hWe,{class:"panel-stack sm:flex absolute inset-0 overflow-hidden sm:p-12 z-10 sm:pl-80 xs:pl-40 sm:pb-48 xs:pb-28 xs:pr-0 sm:pr-40"}),o.value?Zr("",!0):(Ae(),Vr(mZe,{key:0})),jt(hZe,{class:"z-30"})]),at(r).started?(Ae(),Vr(LHe,{key:0})):(Ae(),Be("div",SZe,c[1]||(c[1]=[Te("div",{class:"spinner relative inset-x-1/2 inset-y-9/20"},null,-1)]))),(Ae(!0),Be(xr,null,sg(l(),p=>(Ae(),Vr(sae,{to:p.teleport?.target,key:p.id},[(Ae(),Vr(Tue,{key:`${p.id}`,panel:p},null,8,["panel"]))],8,["to"]))),128))]))}}),MZe=qh(xZe,[["__scopeId","data-v-14234f96"]]);/*!
  * vue-tippy v6.4.4
  * (c) 2024 
  * @license MIT
  */var _o="top",Wa="bottom",Ja="right",So="left",L9="auto",NS=[_o,Wa,Ja,So],Qv="start",$2="end",TZe="clippingParents",Due="viewport",Sb="popper",IZe="reference",sW=NS.reduce(function(e,t){return e.concat([t+"-"+Qv,t+"-"+$2])},[]),Fue=[].concat(NS,[L9]).reduce(function(e,t){return e.concat([t,t+"-"+Qv,t+"-"+$2])},[]),EZe="beforeRead",AZe="read",$Ze="afterRead",CZe="beforeMain",OZe="main",PZe="afterMain",RZe="beforeWrite",LZe="write",kZe="afterWrite",NZe=[EZe,AZe,$Ze,CZe,OZe,PZe,RZe,LZe,kZe];function ac(e){return e?(e.nodeName||"").toLowerCase():null}function Zl(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function e1(e){var t=Zl(e).Element;return e instanceof t||e instanceof Element}function Ua(e){var t=Zl(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function jue(e){if(typeof ShadowRoot>"u")return!1;var t=Zl(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function DZe(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var i=t.styles[r]||{},s=t.attributes[r]||{},n=t.elements[r];!Ua(n)||!ac(n)||(Object.assign(n.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function FZe(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(i){var s=t.elements[i],n=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:r[i]),a=o.reduce(function(l,u){return l[u]="",l},{});!Ua(s)||!ac(s)||(Object.assign(s.style,a),Object.keys(n).forEach(function(l){s.removeAttribute(l)}))})}}var Vue={name:"applyStyles",enabled:!0,phase:"write",fn:DZe,effect:FZe,requires:["computeStyles"]};function Ju(e){return e.split("-")[0]}var fy=Math.max,wE=Math.min,t1=Math.round;function r1(e,t){t===void 0&&(t=!1);var r=e.getBoundingClientRect(),i=1,s=1;if(Ua(e)&&t){var n=e.offsetHeight,o=e.offsetWidth;o>0&&(i=t1(r.width)/o||1),n>0&&(s=t1(r.height)/n||1)}return{width:r.width/i,height:r.height/s,top:r.top/s,right:r.right/i,bottom:r.bottom/s,left:r.left/i,x:r.left/i,y:r.top/s}}function k9(e){var t=r1(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function Uue(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&jue(r)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function lc(e){return Zl(e).getComputedStyle(e)}function jZe(e){return["table","td","th"].indexOf(ac(e))>=0}function df(e){return((e1(e)?e.ownerDocument:e.document)||window.document).documentElement}function G$(e){return ac(e)==="html"?e:e.assignedSlot||e.parentNode||(jue(e)?e.host:null)||df(e)}function nW(e){return!Ua(e)||lc(e).position==="fixed"?null:e.offsetParent}function VZe(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&Ua(e)){var i=lc(e);if(i.position==="fixed")return null}for(var s=G$(e);Ua(s)&&["html","body"].indexOf(ac(s))<0;){var n=lc(s);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||t&&n.willChange==="filter"||t&&n.filter&&n.filter!=="none")return s;s=s.parentNode}return null}function DS(e){for(var t=Zl(e),r=nW(e);r&&jZe(r)&&lc(r).position==="static";)r=nW(r);return r&&(ac(r)==="html"||ac(r)==="body"&&lc(r).position==="static")?t:r||VZe(e)||t}function N9(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function T_(e,t,r){return fy(e,wE(t,r))}function UZe(e,t,r){var i=T_(e,t,r);return i>r?r:i}function zue(){return{top:0,right:0,bottom:0,left:0}}function Gue(e){return Object.assign({},zue(),e)}function Bue(e,t){return t.reduce(function(r,i){return r[i]=e,r},{})}var zZe=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Gue(typeof t!="number"?t:Bue(t,NS))};function GZe(e){var t,r=e.state,i=e.name,s=e.options,n=r.elements.arrow,o=r.modifiersData.popperOffsets,a=Ju(r.placement),l=N9(a),u=[So,Ja].indexOf(a)>=0,c=u?"height":"width";if(!(!n||!o)){var p=zZe(s.padding,r),f=k9(n),m=l==="y"?_o:So,g=l==="y"?Wa:Ja,b=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c],w=o[l]-r.rects.reference[l],S=DS(n),M=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,x=b/2-w/2,_=p[m],I=M-f[c]-p[g],E=M/2-f[c]/2+x,A=T_(_,E,I),C=l;r.modifiersData[i]=(t={},t[C]=A,t.centerOffset=A-E,t)}}function BZe(e){var t=e.state,r=e.options,i=r.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||Uue(t.elements.popper,s)&&(t.elements.arrow=s))}var qZe={name:"arrow",enabled:!0,phase:"main",fn:GZe,effect:BZe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function i1(e){return e.split("-")[1]}var HZe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function WZe(e){var t=e.x,r=e.y,i=window,s=i.devicePixelRatio||1;return{x:t1(t*s)/s||0,y:t1(r*s)/s||0}}function oW(e){var t,r=e.popper,i=e.popperRect,s=e.placement,n=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,p=e.isFixed,f=c===!0?WZe(o):typeof c=="function"?c(o):o,m=f.x,g=m===void 0?0:m,b=f.y,w=b===void 0?0:b,S=o.hasOwnProperty("x"),M=o.hasOwnProperty("y"),x=So,_=_o,I=window;if(u){var E=DS(r),A="clientHeight",C="clientWidth";if(E===Zl(r)&&(E=df(r),lc(E).position!=="static"&&a==="absolute"&&(A="scrollHeight",C="scrollWidth")),E=E,s===_o||(s===So||s===Ja)&&n===$2){_=Wa;var O=p&&I.visualViewport?I.visualViewport.height:E[A];w-=O-i.height,w*=l?1:-1}if(s===So||(s===_o||s===Wa)&&n===$2){x=Ja;var R=p&&I.visualViewport?I.visualViewport.width:E[C];g-=R-i.width,g*=l?1:-1}}var D=Object.assign({position:a},u&&HZe);if(l){var N;return Object.assign({},D,(N={},N[_]=M?"0":"",N[x]=S?"0":"",N.transform=(I.devicePixelRatio||1)<=1?"translate("+g+"px, "+w+"px)":"translate3d("+g+"px, "+w+"px, 0)",N))}return Object.assign({},D,(t={},t[_]=M?w+"px":"",t[x]=S?g+"px":"",t.transform="",t))}function JZe(e){var t=e.state,r=e.options,i=r.gpuAcceleration,s=i===void 0?!0:i,n=r.adaptive,o=n===void 0?!0:n,a=r.roundOffsets,l=a===void 0?!0:a,u={placement:Ju(t.placement),variation:i1(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,oW(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,oW(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var ZZe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:JZe,data:{}},SM={passive:!0};function YZe(e){var t=e.state,r=e.instance,i=e.options,s=i.scroll,n=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=Zl(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&u.forEach(function(c){c.addEventListener("scroll",r.update,SM)}),a&&l.addEventListener("resize",r.update,SM),function(){n&&u.forEach(function(c){c.removeEventListener("scroll",r.update,SM)}),a&&l.removeEventListener("resize",r.update,SM)}}var KZe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:YZe,data:{}},XZe={left:"right",right:"left",bottom:"top",top:"bottom"};function M3(e){return e.replace(/left|right|bottom|top/g,function(t){return XZe[t]})}var QZe={start:"end",end:"start"};function aW(e){return e.replace(/start|end/g,function(t){return QZe[t]})}function D9(e){var t=Zl(e),r=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:r,scrollTop:i}}function F9(e){return r1(df(e)).left+D9(e).scrollLeft}function eYe(e){var t=Zl(e),r=df(e),i=t.visualViewport,s=r.clientWidth,n=r.clientHeight,o=0,a=0;return i&&(s=i.width,n=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:s,height:n,x:o+F9(e),y:a}}function tYe(e){var t,r=df(e),i=D9(e),s=(t=e.ownerDocument)==null?void 0:t.body,n=fy(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=fy(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+F9(e),l=-i.scrollTop;return lc(s||r).direction==="rtl"&&(a+=fy(r.clientWidth,s?s.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function j9(e){var t=lc(e),r=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+i)}function que(e){return["html","body","#document"].indexOf(ac(e))>=0?e.ownerDocument.body:Ua(e)&&j9(e)?e:que(G$(e))}function I_(e,t){var r;t===void 0&&(t=[]);var i=que(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),n=Zl(i),o=s?[n].concat(n.visualViewport||[],j9(i)?i:[]):i,a=t.concat(o);return s?a:a.concat(I_(G$(o)))}function qN(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function rYe(e){var t=r1(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function lW(e,t){return t===Due?qN(eYe(e)):e1(t)?rYe(t):qN(tYe(df(e)))}function iYe(e){var t=I_(G$(e)),r=["absolute","fixed"].indexOf(lc(e).position)>=0,i=r&&Ua(e)?DS(e):e;return e1(i)?t.filter(function(s){return e1(s)&&Uue(s,i)&&ac(s)!=="body"&&(r?lc(s).position!=="static":!0)}):[]}function sYe(e,t,r){var i=t==="clippingParents"?iYe(e):[].concat(t),s=[].concat(i,[r]),n=s[0],o=s.reduce(function(a,l){var u=lW(e,l);return a.top=fy(u.top,a.top),a.right=wE(u.right,a.right),a.bottom=wE(u.bottom,a.bottom),a.left=fy(u.left,a.left),a},lW(e,n));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Hue(e){var t=e.reference,r=e.element,i=e.placement,s=i?Ju(i):null,n=i?i1(i):null,o=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,l;switch(s){case _o:l={x:o,y:t.y-r.height};break;case Wa:l={x:o,y:t.y+t.height};break;case Ja:l={x:t.x+t.width,y:a};break;case So:l={x:t.x-r.width,y:a};break;default:l={x:t.x,y:t.y}}var u=s?N9(s):null;if(u!=null){var c=u==="y"?"height":"width";switch(n){case Qv:l[u]=l[u]-(t[c]/2-r[c]/2);break;case $2:l[u]=l[u]+(t[c]/2-r[c]/2);break}}return l}function C2(e,t){t===void 0&&(t={});var r=t,i=r.placement,s=i===void 0?e.placement:i,n=r.boundary,o=n===void 0?TZe:n,a=r.rootBoundary,l=a===void 0?Due:a,u=r.elementContext,c=u===void 0?Sb:u,p=r.altBoundary,f=p===void 0?!1:p,m=r.padding,g=m===void 0?0:m,b=Gue(typeof g!="number"?g:Bue(g,NS)),w=c===Sb?IZe:Sb,S=e.rects.popper,M=e.elements[f?w:c],x=sYe(e1(M)?M:M.contextElement||df(e.elements.popper),o,l),_=r1(e.elements.reference),I=Hue({reference:_,element:S,strategy:"absolute",placement:s}),E=qN(Object.assign({},S,I)),A=c===Sb?E:_,C={top:x.top-A.top+b.top,bottom:A.bottom-x.bottom+b.bottom,left:x.left-A.left+b.left,right:A.right-x.right+b.right},O=e.modifiersData.offset;if(c===Sb&&O){var R=O[s];Object.keys(C).forEach(function(D){var N=[Ja,Wa].indexOf(D)>=0?1:-1,U=[_o,Wa].indexOf(D)>=0?"y":"x";C[D]+=R[U]*N})}return C}function nYe(e,t){t===void 0&&(t={});var r=t,i=r.placement,s=r.boundary,n=r.rootBoundary,o=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?Fue:l,c=i1(i),p=c?a?sW:sW.filter(function(g){return i1(g)===c}):NS,f=p.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=p);var m=f.reduce(function(g,b){return g[b]=C2(e,{placement:b,boundary:s,rootBoundary:n,padding:o})[Ju(b)],g},{});return Object.keys(m).sort(function(g,b){return m[g]-m[b]})}function oYe(e){if(Ju(e)===L9)return[];var t=M3(e);return[aW(e),t,aW(t)]}function aYe(e){var t=e.state,r=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var s=r.mainAxis,n=s===void 0?!0:s,o=r.altAxis,a=o===void 0?!0:o,l=r.fallbackPlacements,u=r.padding,c=r.boundary,p=r.rootBoundary,f=r.altBoundary,m=r.flipVariations,g=m===void 0?!0:m,b=r.allowedAutoPlacements,w=t.options.placement,S=Ju(w),M=S===w,x=l||(M||!g?[M3(w)]:oYe(w)),_=[w].concat(x).reduce(function(Me,De){return Me.concat(Ju(De)===L9?nYe(t,{placement:De,boundary:c,rootBoundary:p,padding:u,flipVariations:g,allowedAutoPlacements:b}):De)},[]),I=t.rects.reference,E=t.rects.popper,A=new Map,C=!0,O=_[0],R=0;R<_.length;R++){var D=_[R],N=Ju(D),U=i1(D)===Qv,J=[_o,Wa].indexOf(N)>=0,y=J?"width":"height",T=C2(t,{placement:D,boundary:c,rootBoundary:p,altBoundary:f,padding:u}),$=J?U?Ja:So:U?Wa:_o;I[y]>E[y]&&($=M3($));var P=M3($),z=[];if(n&&z.push(T[N]<=0),a&&z.push(T[$]<=0,T[P]<=0),z.every(function(Me){return Me})){O=D,C=!1;break}A.set(D,z)}if(C)for(var X=g?3:1,ae=function(De){var $e=_.find(function(gt){var dt=A.get(gt);if(dt)return dt.slice(0,De).every(function(Je){return Je})});if($e)return O=$e,"break"},te=X;te>0;te--){var ye=ae(te);if(ye==="break")break}t.placement!==O&&(t.modifiersData[i]._skip=!0,t.placement=O,t.reset=!0)}}var lYe={name:"flip",enabled:!0,phase:"main",fn:aYe,requiresIfExists:["offset"],data:{_skip:!1}};function uW(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function cW(e){return[_o,Ja,Wa,So].some(function(t){return e[t]>=0})}function uYe(e){var t=e.state,r=e.name,i=t.rects.reference,s=t.rects.popper,n=t.modifiersData.preventOverflow,o=C2(t,{elementContext:"reference"}),a=C2(t,{altBoundary:!0}),l=uW(o,i),u=uW(a,s,n),c=cW(l),p=cW(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":p})}var cYe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:uYe};function hYe(e,t,r){var i=Ju(e),s=[So,_o].indexOf(i)>=0?-1:1,n=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=n[0],a=n[1];return o=o||0,a=(a||0)*s,[So,Ja].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function pYe(e){var t=e.state,r=e.options,i=e.name,s=r.offset,n=s===void 0?[0,0]:s,o=Fue.reduce(function(c,p){return c[p]=hYe(p,t.rects,n),c},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=o}var dYe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:pYe};function fYe(e){var t=e.state,r=e.name;t.modifiersData[r]=Hue({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var mYe={name:"popperOffsets",enabled:!0,phase:"read",fn:fYe,data:{}};function yYe(e){return e==="x"?"y":"x"}function gYe(e){var t=e.state,r=e.options,i=e.name,s=r.mainAxis,n=s===void 0?!0:s,o=r.altAxis,a=o===void 0?!1:o,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,p=r.padding,f=r.tether,m=f===void 0?!0:f,g=r.tetherOffset,b=g===void 0?0:g,w=C2(t,{boundary:l,rootBoundary:u,padding:p,altBoundary:c}),S=Ju(t.placement),M=i1(t.placement),x=!M,_=N9(S),I=yYe(_),E=t.modifiersData.popperOffsets,A=t.rects.reference,C=t.rects.popper,O=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,R=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,N={x:0,y:0};if(E){if(n){var U,J=_==="y"?_o:So,y=_==="y"?Wa:Ja,T=_==="y"?"height":"width",$=E[_],P=$+w[J],z=$-w[y],X=m?-C[T]/2:0,ae=M===Qv?A[T]:C[T],te=M===Qv?-C[T]:-A[T],ye=t.elements.arrow,Me=m&&ye?k9(ye):{width:0,height:0},De=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:zue(),$e=De[J],gt=De[y],dt=T_(0,A[T],Me[T]),Je=x?A[T]/2-X-dt-$e-R.mainAxis:ae-dt-$e-R.mainAxis,He=x?-A[T]/2+X+dt+gt+R.mainAxis:te+dt+gt+R.mainAxis,mt=t.elements.arrow&&DS(t.elements.arrow),zt=mt?_==="y"?mt.clientTop||0:mt.clientLeft||0:0,H=(U=D?.[_])!=null?U:0,G=$+Je-H-zt,re=$+He-H,we=T_(m?wE(P,G):P,$,m?fy(z,re):z);E[_]=we,N[_]=we-$}if(a){var me,k=_==="x"?_o:So,q=_==="x"?Wa:Ja,L=E[I],V=I==="y"?"height":"width",W=L+w[k],Q=L-w[q],se=[_o,So].indexOf(S)!==-1,le=(me=D?.[I])!=null?me:0,ee=se?W:L-A[V]-C[V]-le+R.altAxis,ne=se?L+A[V]+C[V]-le-R.altAxis:Q,Oe=m&&se?UZe(ee,L,ne):T_(m?ee:W,L,m?ne:Q);E[I]=Oe,N[I]=Oe-L}t.modifiersData[i]=N}}var vYe={name:"preventOverflow",enabled:!0,phase:"main",fn:gYe,requiresIfExists:["offset"]};function bYe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function wYe(e){return e===Zl(e)||!Ua(e)?D9(e):bYe(e)}function _Ye(e){var t=e.getBoundingClientRect(),r=t1(t.width)/e.offsetWidth||1,i=t1(t.height)/e.offsetHeight||1;return r!==1||i!==1}function SYe(e,t,r){r===void 0&&(r=!1);var i=Ua(t),s=Ua(t)&&_Ye(t),n=df(t),o=r1(e,s),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!r)&&((ac(t)!=="body"||j9(n))&&(a=wYe(t)),Ua(t)?(l=r1(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):n&&(l.x=F9(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function xYe(e){var t=new Map,r=new Set,i=[];e.forEach(function(n){t.set(n.name,n)});function s(n){r.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!r.has(a)){var l=t.get(a);l&&s(l)}}),i.push(n)}return e.forEach(function(n){r.has(n.name)||s(n)}),i}function MYe(e){var t=xYe(e);return NZe.reduce(function(r,i){return r.concat(t.filter(function(s){return s.phase===i}))},[])}function TYe(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function IYe(e){var t=e.reduce(function(r,i){var s=r[i.name];return r[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,r},{});return Object.keys(t).map(function(r){return t[r]})}var hW={placement:"bottom",modifiers:[],strategy:"absolute"};function pW(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function EYe(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,i=r===void 0?[]:r,s=t.defaultOptions,n=s===void 0?hW:s;return function(a,l,u){u===void 0&&(u=n);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},hW,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],f=!1,m={state:c,setOptions:function(S){var M=typeof S=="function"?S(c.options):S;b(),c.options=Object.assign({},n,c.options,M),c.scrollParents={reference:e1(a)?I_(a):a.contextElement?I_(a.contextElement):[],popper:I_(l)};var x=MYe(IYe([].concat(i,c.options.modifiers)));return c.orderedModifiers=x.filter(function(_){return _.enabled}),g(),m.update()},forceUpdate:function(){if(!f){var S=c.elements,M=S.reference,x=S.popper;if(pW(M,x)){c.rects={reference:SYe(M,DS(x),c.options.strategy==="fixed"),popper:k9(x)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(R){return c.modifiersData[R.name]=Object.assign({},R.data)});for(var _=0;_<c.orderedModifiers.length;_++){if(c.reset===!0){c.reset=!1,_=-1;continue}var I=c.orderedModifiers[_],E=I.fn,A=I.options,C=A===void 0?{}:A,O=I.name;typeof E=="function"&&(c=E({state:c,options:C,name:O,instance:m})||c)}}}},update:TYe(function(){return new Promise(function(w){m.forceUpdate(),w(c)})}),destroy:function(){b(),f=!0}};if(!pW(a,l))return m;m.setOptions(u).then(function(w){!f&&u.onFirstUpdate&&u.onFirstUpdate(w)});function g(){c.orderedModifiers.forEach(function(w){var S=w.name,M=w.options,x=M===void 0?{}:M,_=w.effect;if(typeof _=="function"){var I=_({state:c,name:S,instance:m,options:x}),E=function(){};p.push(I||E)}})}function b(){p.forEach(function(w){return w()}),p=[]}return m}}var AYe=[KZe,mYe,ZZe,Vue,dYe,lYe,vYe,qZe,cYe],$Ye=EYe({defaultModifiers:AYe}),CYe="tippy-box",Wue="tippy-content",Jue="tippy-backdrop",Zue="tippy-arrow",Yue="tippy-svg-arrow",Am={passive:!0,capture:!0},Kue=function(){return document.body};function EC(e,t,r){if(Array.isArray(e)){var i=e[t];return i??(Array.isArray(r)?r[t]:r)}return e}function V9(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function Xue(e,t){return typeof e=="function"?e.apply(void 0,t):e}function dW(e,t){if(t===0)return e;var r;return function(i){clearTimeout(r),r=setTimeout(function(){e(i)},t)}}function OYe(e,t){var r=Object.assign({},e);return t.forEach(function(i){delete r[i]}),r}function PYe(e){return e.split(/\s+/).filter(Boolean)}function Dm(e){return[].concat(e)}function fW(e,t){e.indexOf(t)===-1&&e.push(t)}function RYe(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function Que(e){return e.split("-")[0]}function s1(e){return[].slice.call(e)}function mW(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function my(){return document.createElement("div")}function B$(e){return["Element","Fragment"].some(function(t){return V9(e,t)})}function LYe(e){return V9(e,"NodeList")}function U9(e){return V9(e,"MouseEvent")}function kYe(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function NYe(e){return B$(e)?[e]:LYe(e)?s1(e):Array.isArray(e)?e:s1(document.querySelectorAll(e))}function AC(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function O2(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function ece(e){var t,r=Dm(e),i=r[0];return i!=null&&(t=i.ownerDocument)!=null&&t.body?i.ownerDocument:document}function DYe(e,t){var r=t.clientX,i=t.clientY;return e.every(function(s){var n=s.popperRect,o=s.popperState,a=s.props,l=a.interactiveBorder,u=Que(o.placement),c=o.modifiersData.offset;if(!c)return!0;var p=u==="bottom"?c.top.y:0,f=u==="top"?c.bottom.y:0,m=u==="right"?c.left.x:0,g=u==="left"?c.right.x:0,b=n.top-i+p>l,w=i-n.bottom-f>l,S=n.left-r+m>l,M=r-n.right-g>l;return b||w||S||M})}function $C(e,t,r){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(s){e[i](s,r)})}function yW(e,t){for(var r=t;r;){var i;if(e.contains(r))return!0;r=r.getRootNode==null||(i=r.getRootNode())==null?void 0:i.host}return!1}var Cu={isTouch:!1},gW=0;function FYe(){Cu.isTouch||(Cu.isTouch=!0,window.performance&&document.addEventListener("mousemove",tce))}function tce(){var e=performance.now();e-gW<20&&(Cu.isTouch=!1,document.removeEventListener("mousemove",tce)),gW=e}function jYe(){var e=document.activeElement;if(kYe(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function VYe(){document.addEventListener("touchstart",FYe,Am),window.addEventListener("blur",jYe)}var UYe=typeof window<"u"&&typeof document<"u",zYe=UYe?!!window.msCrypto:!1,GYe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},BYe={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Rl=Object.assign({appendTo:Kue,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},GYe,BYe),qYe=Object.keys(Rl),HYe=function(t){var r=Object.keys(t);r.forEach(function(i){Rl[i]=t[i]})};function rce(e){var t=e.plugins||[],r=t.reduce(function(i,s){var n=s.name,o=s.defaultValue;if(n){var a;i[n]=e[n]!==void 0?e[n]:(a=Rl[n])!=null?a:o}return i},{});return Object.assign({},e,r)}function WYe(e,t){var r=t?Object.keys(rce(Object.assign({},Rl,{plugins:t}))):qYe,i=r.reduce(function(s,n){var o=(e.getAttribute("data-tippy-"+n)||"").trim();if(!o)return s;if(n==="content")s[n]=o;else try{s[n]=JSON.parse(o)}catch{s[n]=o}return s},{});return i}function vW(e,t){var r=Object.assign({},t,{content:Xue(t.content,[e])},t.ignoreAttributes?{}:WYe(e,t.plugins));return r.aria=Object.assign({},Rl.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var JYe=function(){return"innerHTML"};function HN(e,t){e[JYe()]=t}function bW(e){var t=my();return e===!0?t.className=Zue:(t.className=Yue,B$(e)?t.appendChild(e):HN(t,e)),t}function wW(e,t){B$(t.content)?(HN(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?HN(e,t.content):e.textContent=t.content)}function _E(e){var t=e.firstElementChild,r=s1(t.children);return{box:t,content:r.find(function(i){return i.classList.contains(Wue)}),arrow:r.find(function(i){return i.classList.contains(Zue)||i.classList.contains(Yue)}),backdrop:r.find(function(i){return i.classList.contains(Jue)})}}function ice(e){var t=my(),r=my();r.className=CYe,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var i=my();i.className=Wue,i.setAttribute("data-state","hidden"),wW(i,e.props),t.appendChild(r),r.appendChild(i),s(e.props,e.props);function s(n,o){var a=_E(t),l=a.box,u=a.content,c=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(n.content!==o.content||n.allowHTML!==o.allowHTML)&&wW(u,e.props),o.arrow?c?n.arrow!==o.arrow&&(l.removeChild(c),l.appendChild(bW(o.arrow))):l.appendChild(bW(o.arrow)):c&&l.removeChild(c)}return{popper:t,onUpdate:s}}ice.$$tippy=!0;var ZYe=1,xM=[],CC=[];function YYe(e,t){var r=vW(e,Object.assign({},Rl,rce(mW(t)))),i,s,n,o=!1,a=!1,l=!1,u=!1,c,p,f,m=[],g=dW(G,r.interactiveDebounce),b,w=ZYe++,S=null,M=RYe(r.plugins),x={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},_={id:w,reference:e,popper:my(),popperInstance:S,props:r,state:x,plugins:M,clearDelayTimeouts:ee,setProps:ne,setContent:Oe,show:ke,hide:_t,hideWithInteractivity:hr,enable:se,disable:le,unmount:Gr,destroy:_i};if(!r.render)return _;var I=r.render(_),E=I.popper,A=I.onUpdate;E.setAttribute("data-tippy-root",""),E.id="tippy-"+_.id,_.popper=E,e._tippy=_,E._tippy=_;var C=M.map(function(ve){return ve.fn(_)}),O=e.hasAttribute("aria-expanded");return mt(),X(),$(),P("onCreate",[_]),r.showOnCreate&&W(),E.addEventListener("mouseenter",function(){_.props.interactive&&_.state.isVisible&&_.clearDelayTimeouts()}),E.addEventListener("mouseleave",function(){_.props.interactive&&_.props.trigger.indexOf("mouseenter")>=0&&J().addEventListener("mousemove",g)}),_;function R(){var ve=_.props.touch;return Array.isArray(ve)?ve:[ve,0]}function D(){return R()[0]==="hold"}function N(){var ve;return!!((ve=_.props.render)!=null&&ve.$$tippy)}function U(){return b||e}function J(){var ve=U().parentNode;return ve?ece(ve):document}function y(){return _E(E)}function T(ve){return _.state.isMounted&&!_.state.isVisible||Cu.isTouch||c&&c.type==="focus"?0:EC(_.props.delay,ve?0:1,Rl.delay)}function $(ve){ve===void 0&&(ve=!1),E.style.pointerEvents=_.props.interactive&&!ve?"":"none",E.style.zIndex=""+_.props.zIndex}function P(ve,Ze,Ke){if(Ke===void 0&&(Ke=!0),C.forEach(function(kt){kt[ve]&&kt[ve].apply(kt,Ze)}),Ke){var Ct;(Ct=_.props)[ve].apply(Ct,Ze)}}function z(){var ve=_.props.aria;if(ve.content){var Ze="aria-"+ve.content,Ke=E.id,Ct=Dm(_.props.triggerTarget||e);Ct.forEach(function(kt){var Si=kt.getAttribute(Ze);if(_.state.isVisible)kt.setAttribute(Ze,Si?Si+" "+Ke:Ke);else{var ns=Si&&Si.replace(Ke,"").trim();ns?kt.setAttribute(Ze,ns):kt.removeAttribute(Ze)}})}}function X(){if(!(O||!_.props.aria.expanded)){var ve=Dm(_.props.triggerTarget||e);ve.forEach(function(Ze){_.props.interactive?Ze.setAttribute("aria-expanded",_.state.isVisible&&Ze===U()?"true":"false"):Ze.removeAttribute("aria-expanded")})}}function ae(){J().removeEventListener("mousemove",g),xM=xM.filter(function(ve){return ve!==g})}function te(ve){if(!(Cu.isTouch&&(l||ve.type==="mousedown"))){var Ze=ve.composedPath&&ve.composedPath()[0]||ve.target;if(!(_.props.interactive&&yW(E,Ze))){if(Dm(_.props.triggerTarget||e).some(function(Ke){return yW(Ke,Ze)})){if(Cu.isTouch||_.state.isVisible&&_.props.trigger.indexOf("click")>=0)return}else P("onClickOutside",[_,ve]);_.props.hideOnClick===!0&&(_.clearDelayTimeouts(),_.hide(),a=!0,setTimeout(function(){a=!1}),_.state.isMounted||$e())}}}function ye(){l=!0}function Me(){l=!1}function De(){var ve=J();ve.addEventListener("mousedown",te,!0),ve.addEventListener("touchend",te,Am),ve.addEventListener("touchstart",Me,Am),ve.addEventListener("touchmove",ye,Am)}function $e(){var ve=J();ve.removeEventListener("mousedown",te,!0),ve.removeEventListener("touchend",te,Am),ve.removeEventListener("touchstart",Me,Am),ve.removeEventListener("touchmove",ye,Am)}function gt(ve,Ze){Je(ve,function(){!_.state.isVisible&&E.parentNode&&E.parentNode.contains(E)&&Ze()})}function dt(ve,Ze){Je(ve,Ze)}function Je(ve,Ze){var Ke=y().box;function Ct(kt){kt.target===Ke&&($C(Ke,"remove",Ct),Ze())}if(ve===0)return Ze();$C(Ke,"remove",p),$C(Ke,"add",Ct),p=Ct}function He(ve,Ze,Ke){Ke===void 0&&(Ke=!1);var Ct=Dm(_.props.triggerTarget||e);Ct.forEach(function(kt){kt.addEventListener(ve,Ze,Ke),m.push({node:kt,eventType:ve,handler:Ze,options:Ke})})}function mt(){D()&&(He("touchstart",H,{passive:!0}),He("touchend",re,{passive:!0})),PYe(_.props.trigger).forEach(function(ve){if(ve!=="manual")switch(He(ve,H),ve){case"mouseenter":He("mouseleave",re);break;case"focus":He(zYe?"focusout":"blur",we);break;case"focusin":He("focusout",we);break}})}function zt(){m.forEach(function(ve){var Ze=ve.node,Ke=ve.eventType,Ct=ve.handler,kt=ve.options;Ze.removeEventListener(Ke,Ct,kt)}),m=[]}function H(ve){var Ze,Ke=!1;if(!(!_.state.isEnabled||me(ve)||a)){var Ct=((Ze=c)==null?void 0:Ze.type)==="focus";c=ve,b=ve.currentTarget,X(),!_.state.isVisible&&U9(ve)&&xM.forEach(function(kt){return kt(ve)}),ve.type==="click"&&(_.props.trigger.indexOf("mouseenter")<0||o)&&_.props.hideOnClick!==!1&&_.state.isVisible?Ke=!0:W(ve),ve.type==="click"&&(o=!Ke),Ke&&!Ct&&Q(ve)}}function G(ve){var Ze=ve.target,Ke=U().contains(Ze)||E.contains(Ze);if(!(ve.type==="mousemove"&&Ke)){var Ct=V().concat(E).map(function(kt){var Si,ns=kt._tippy,la=(Si=ns.popperInstance)==null?void 0:Si.state;return la?{popperRect:kt.getBoundingClientRect(),popperState:la,props:r}:null}).filter(Boolean);DYe(Ct,ve)&&(ae(),Q(ve))}}function re(ve){var Ze=me(ve)||_.props.trigger.indexOf("click")>=0&&o;if(!Ze){if(_.props.interactive){_.hideWithInteractivity(ve);return}Q(ve)}}function we(ve){_.props.trigger.indexOf("focusin")<0&&ve.target!==U()||_.props.interactive&&ve.relatedTarget&&E.contains(ve.relatedTarget)||Q(ve)}function me(ve){return Cu.isTouch?D()!==ve.type.indexOf("touch")>=0:!1}function k(){q();var ve=_.props,Ze=ve.popperOptions,Ke=ve.placement,Ct=ve.offset,kt=ve.getReferenceClientRect,Si=ve.moveTransition,ns=N()?_E(E).arrow:null,la=kt?{getBoundingClientRect:kt,contextElement:kt.contextElement||U()}:e,Yl={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Hh){var Kl=Hh.state;if(N()){var F1=y(),Wh=F1.box;["placement","reference-hidden","escaped"].forEach(function(fc){fc==="placement"?Wh.setAttribute("data-placement",Kl.placement):Kl.attributes.popper["data-popper-"+fc]?Wh.setAttribute("data-"+fc,""):Wh.removeAttribute("data-"+fc)}),Kl.attributes.popper={}}}},Za=[{name:"offset",options:{offset:Ct}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Si}},Yl];N()&&ns&&Za.push({name:"arrow",options:{element:ns,padding:3}}),Za.push.apply(Za,Ze?.modifiers||[]),_.popperInstance=$Ye(la,E,Object.assign({},Ze,{placement:Ke,onFirstUpdate:f,modifiers:Za}))}function q(){_.popperInstance&&(_.popperInstance.destroy(),_.popperInstance=null)}function L(){var ve=_.props.appendTo,Ze,Ke=U();_.props.interactive&&ve===Kue||ve==="parent"?Ze=Ke.parentNode:Ze=Xue(ve,[Ke]),Ze.contains(E)||Ze.appendChild(E),_.state.isMounted=!0,k()}function V(){return s1(E.querySelectorAll("[data-tippy-root]"))}function W(ve){_.clearDelayTimeouts(),ve&&P("onTrigger",[_,ve]),De();var Ze=T(!0),Ke=R(),Ct=Ke[0],kt=Ke[1];Cu.isTouch&&Ct==="hold"&&kt&&(Ze=kt),Ze?i=setTimeout(function(){_.show()},Ze):_.show()}function Q(ve){if(_.clearDelayTimeouts(),P("onUntrigger",[_,ve]),!_.state.isVisible){$e();return}if(!(_.props.trigger.indexOf("mouseenter")>=0&&_.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(ve.type)>=0&&o)){var Ze=T(!1);Ze?s=setTimeout(function(){_.state.isVisible&&_.hide()},Ze):n=requestAnimationFrame(function(){_.hide()})}}function se(){_.state.isEnabled=!0}function le(){_.hide(),_.state.isEnabled=!1}function ee(){clearTimeout(i),clearTimeout(s),cancelAnimationFrame(n)}function ne(ve){if(!_.state.isDestroyed){P("onBeforeUpdate",[_,ve]),zt();var Ze=_.props,Ke=vW(e,Object.assign({},Ze,mW(ve),{ignoreAttributes:!0}));_.props=Ke,mt(),Ze.interactiveDebounce!==Ke.interactiveDebounce&&(ae(),g=dW(G,Ke.interactiveDebounce)),Ze.triggerTarget&&!Ke.triggerTarget?Dm(Ze.triggerTarget).forEach(function(Ct){Ct.removeAttribute("aria-expanded")}):Ke.triggerTarget&&e.removeAttribute("aria-expanded"),X(),$(),A&&A(Ze,Ke),_.popperInstance&&(k(),V().forEach(function(Ct){requestAnimationFrame(Ct._tippy.popperInstance.forceUpdate)})),P("onAfterUpdate",[_,ve])}}function Oe(ve){_.setProps({content:ve})}function ke(){var ve=_.state.isVisible,Ze=_.state.isDestroyed,Ke=!_.state.isEnabled,Ct=Cu.isTouch&&!_.props.touch,kt=EC(_.props.duration,0,Rl.duration);if(!(ve||Ze||Ke||Ct)&&!U().hasAttribute("disabled")&&(P("onShow",[_],!1),_.props.onShow(_)!==!1)){if(_.state.isVisible=!0,N()&&(E.style.visibility="visible"),$(),De(),_.state.isMounted||(E.style.transition="none"),N()){var Si=y(),ns=Si.box,la=Si.content;AC([ns,la],0)}f=function(){var Za;if(!(!_.state.isVisible||u)){if(u=!0,E.offsetHeight,E.style.transition=_.props.moveTransition,N()&&_.props.animation){var ff=y(),Hh=ff.box,Kl=ff.content;AC([Hh,Kl],kt),O2([Hh,Kl],"visible")}z(),X(),fW(CC,_),(Za=_.popperInstance)==null||Za.forceUpdate(),P("onMount",[_]),_.props.animation&&N()&&dt(kt,function(){_.state.isShown=!0,P("onShown",[_])})}},L()}}function _t(){var ve=!_.state.isVisible,Ze=_.state.isDestroyed,Ke=!_.state.isEnabled,Ct=EC(_.props.duration,1,Rl.duration);if(!(ve||Ze||Ke)&&(P("onHide",[_],!1),_.props.onHide(_)!==!1)){if(_.state.isVisible=!1,_.state.isShown=!1,u=!1,o=!1,N()&&(E.style.visibility="hidden"),ae(),$e(),$(!0),N()){var kt=y(),Si=kt.box,ns=kt.content;_.props.animation&&(AC([Si,ns],Ct),O2([Si,ns],"hidden"))}z(),X(),_.props.animation?N()&&gt(Ct,_.unmount):_.unmount()}}function hr(ve){J().addEventListener("mousemove",g),fW(xM,g),g(ve)}function Gr(){_.state.isVisible&&_.hide(),_.state.isMounted&&(q(),V().forEach(function(ve){ve._tippy.unmount()}),E.parentNode&&E.parentNode.removeChild(E),CC=CC.filter(function(ve){return ve!==_}),_.state.isMounted=!1,P("onHidden",[_]))}function _i(){_.state.isDestroyed||(_.clearDelayTimeouts(),_.unmount(),zt(),delete e._tippy,_.state.isDestroyed=!0,P("onDestroy",[_]))}}function ut(e,t){t===void 0&&(t={});var r=Rl.plugins.concat(t.plugins||[]);VYe();var i=Object.assign({},t,{plugins:r}),s=NYe(e),n=s.reduce(function(o,a){var l=a&&YYe(a,i);return l&&o.push(l),o},[]);return B$(e)?n[0]:n}ut.defaultProps=Rl;ut.setDefaultProps=HYe;ut.currentInput=Cu;var KYe=Object.assign({},Vue,{effect:function(t){var r=t.state,i={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,i.popper),r.styles=i,r.elements.arrow&&Object.assign(r.elements.arrow.style,i.arrow)}}),XYe=function(t,r){var i;r===void 0&&(r={});var s=t,n=[],o=[],a,l=r.overrides,u=[],c=!1;function p(){o=s.map(function(_){return Dm(_.props.triggerTarget||_.reference)}).reduce(function(_,I){return _.concat(I)},[])}function f(){n=s.map(function(_){return _.reference})}function m(_){s.forEach(function(I){_?I.enable():I.disable()})}function g(_){return s.map(function(I){var E=I.setProps;return I.setProps=function(A){E(A),I.reference===a&&_.setProps(A)},function(){I.setProps=E}})}function b(_,I){var E=o.indexOf(I);if(I!==a){a=I;var A=(l||[]).concat("content").reduce(function(C,O){return C[O]=s[E].props[O],C},{});_.setProps(Object.assign({},A,{getReferenceClientRect:typeof A.getReferenceClientRect=="function"?A.getReferenceClientRect:function(){var C;return(C=n[E])==null?void 0:C.getBoundingClientRect()}}))}}m(!1),f(),p();var w={fn:function(){return{onDestroy:function(){m(!0)},onHidden:function(){a=null},onClickOutside:function(E){E.props.showOnCreate&&!c&&(c=!0,a=null)},onShow:function(E){E.props.showOnCreate&&!c&&(c=!0,b(E,n[0]))},onTrigger:function(E,A){b(E,A.currentTarget)}}}},S=ut(my(),Object.assign({},OYe(r,["overrides"]),{plugins:[w].concat(r.plugins||[]),triggerTarget:o,popperOptions:Object.assign({},r.popperOptions,{modifiers:[].concat(((i=r.popperOptions)==null?void 0:i.modifiers)||[],[KYe])})})),M=S.show;S.show=function(_){if(M(),!a&&_==null)return b(S,n[0]);if(!(a&&_==null)){if(typeof _=="number")return n[_]&&b(S,n[_]);if(s.indexOf(_)>=0){var I=_.reference;return b(S,I)}if(n.indexOf(_)>=0)return b(S,_)}},S.showNext=function(){var _=n[0];if(!a)return S.show(0);var I=n.indexOf(a);S.show(n[I+1]||_)},S.showPrevious=function(){var _=n[n.length-1];if(!a)return S.show(_);var I=n.indexOf(a),E=n[I-1]||_;S.show(E)};var x=S.setProps;return S.setProps=function(_){l=_.overrides||l,x(_)},S.setInstances=function(_){m(!0),u.forEach(function(I){return I()}),s=_,m(!1),f(),p(),u=g(S),S.setProps({triggerTarget:o})},u=g(S),S},QYe={name:"animateFill",defaultValue:!1,fn:function(t){var r;if(!((r=t.props.render)!=null&&r.$$tippy))return{};var i=_E(t.popper),s=i.box,n=i.content,o=t.props.animateFill?eKe():null;return{onCreate:function(){o&&(s.insertBefore(o,s.firstElementChild),s.setAttribute("data-animatefill",""),s.style.overflow="hidden",t.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(o){var l=s.style.transitionDuration,u=Number(l.replace("ms",""));n.style.transitionDelay=Math.round(u/10)+"ms",o.style.transitionDuration=l,O2([o],"visible")}},onShow:function(){o&&(o.style.transitionDuration="0ms")},onHide:function(){o&&O2([o],"hidden")}}}};function eKe(){var e=my();return e.className=Jue,O2([e],"hidden"),e}var WN={clientX:0,clientY:0},MM=[];function sce(e){var t=e.clientX,r=e.clientY;WN={clientX:t,clientY:r}}function tKe(e){e.addEventListener("mousemove",sce)}function rKe(e){e.removeEventListener("mousemove",sce)}var iKe={name:"followCursor",defaultValue:!1,fn:function(t){var r=t.reference,i=ece(t.props.triggerTarget||r),s=!1,n=!1,o=!0,a=t.props;function l(){return t.props.followCursor==="initial"&&t.state.isVisible}function u(){i.addEventListener("mousemove",f)}function c(){i.removeEventListener("mousemove",f)}function p(){s=!0,t.setProps({getReferenceClientRect:null}),s=!1}function f(b){var w=b.target?r.contains(b.target):!0,S=t.props.followCursor,M=b.clientX,x=b.clientY,_=r.getBoundingClientRect(),I=M-_.left,E=x-_.top;(w||!t.props.interactive)&&t.setProps({getReferenceClientRect:function(){var C=r.getBoundingClientRect(),O=M,R=x;S==="initial"&&(O=C.left+I,R=C.top+E);var D=S==="horizontal"?C.top:R,N=S==="vertical"?C.right:O,U=S==="horizontal"?C.bottom:R,J=S==="vertical"?C.left:O;return{width:N-J,height:U-D,top:D,right:N,bottom:U,left:J}}})}function m(){t.props.followCursor&&(MM.push({instance:t,doc:i}),tKe(i))}function g(){MM=MM.filter(function(b){return b.instance!==t}),MM.filter(function(b){return b.doc===i}).length===0&&rKe(i)}return{onCreate:m,onDestroy:g,onBeforeUpdate:function(){a=t.props},onAfterUpdate:function(w,S){var M=S.followCursor;s||M!==void 0&&a.followCursor!==M&&(g(),M?(m(),t.state.isMounted&&!n&&!l()&&u()):(c(),p()))},onMount:function(){t.props.followCursor&&!n&&(o&&(f(WN),o=!1),l()||u())},onTrigger:function(w,S){U9(S)&&(WN={clientX:S.clientX,clientY:S.clientY}),n=S.type==="focus"},onHidden:function(){t.props.followCursor&&(p(),c(),o=!0)}}}};function sKe(e,t){var r;return{popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat((((r=e.popperOptions)==null?void 0:r.modifiers)||[]).filter(function(i){var s=i.name;return s!==t.name}),[t])})}}var nKe={name:"inlinePositioning",defaultValue:!1,fn:function(t){var r=t.reference;function i(){return!!t.props.inlinePositioning}var s,n=-1,o=!1,a=[],l={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(m){var g=m.state;i()&&(a.indexOf(g.placement)!==-1&&(a=[]),s!==g.placement&&a.indexOf(g.placement)===-1&&(a.push(g.placement),t.setProps({getReferenceClientRect:function(){return u(g.placement)}})),s=g.placement)}};function u(f){return oKe(Que(f),r.getBoundingClientRect(),s1(r.getClientRects()),n)}function c(f){o=!0,t.setProps(f),o=!1}function p(){o||c(sKe(t.props,l))}return{onCreate:p,onAfterUpdate:p,onTrigger:function(m,g){if(U9(g)){var b=s1(t.reference.getClientRects()),w=b.find(function(M){return M.left-2<=g.clientX&&M.right+2>=g.clientX&&M.top-2<=g.clientY&&M.bottom+2>=g.clientY}),S=b.indexOf(w);n=S>-1?S:n}},onHidden:function(){n=-1}}}};function oKe(e,t,r,i){if(r.length<2||e===null)return t;if(r.length===2&&i>=0&&r[0].left>r[1].right)return r[i]||t;switch(e){case"top":case"bottom":{var s=r[0],n=r[r.length-1],o=e==="top",a=s.top,l=n.bottom,u=o?s.left:n.left,c=o?s.right:n.right,p=c-u,f=l-a;return{top:a,bottom:l,left:u,right:c,width:p,height:f}}case"left":case"right":{var m=Math.min.apply(Math,r.map(function(E){return E.left})),g=Math.max.apply(Math,r.map(function(E){return E.right})),b=r.filter(function(E){return e==="left"?E.left===m:E.right===g}),w=b[0].top,S=b[b.length-1].bottom,M=m,x=g,_=x-M,I=S-w;return{top:w,bottom:S,left:M,right:x,width:_,height:I}}default:return t}}var aKe={name:"sticky",defaultValue:!1,fn:function(t){var r=t.reference,i=t.popper;function s(){return t.popperInstance?t.popperInstance.state.elements.reference:r}function n(u){return t.props.sticky===!0||t.props.sticky===u}var o=null,a=null;function l(){var u=n("reference")?s().getBoundingClientRect():null,c=n("popper")?i.getBoundingClientRect():null;(u&&_W(o,u)||c&&_W(a,c))&&t.popperInstance&&t.popperInstance.update(),o=u,a=c,t.state.isMounted&&requestAnimationFrame(l)}return{onMount:function(){t.props.sticky&&l()}}}};function _W(e,t){return e&&t?e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom||e.left!==t.left:!0}ut.setDefaultProps({render:ice});ut.setDefaultProps({onShow:e=>{if(!e.props.content)return!1}});function z9(e,t={},r={mount:!0,appName:"Tippy"}){r=Object.assign({mount:!0,appName:"Tippy"},r);const i=rs(),s=Se(),n=Se({isEnabled:!1,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1}),o=AS();let a=null;const l=()=>a||(a=document.createDocumentFragment(),a),u=A=>{let C,O=ir(A)?A.value:A;return sc(O)?(o.value||(o.value=jy({name:r.appName,setup:()=>()=>ir(A)?A.value:A}),i&&Object.assign(o.value._context,i.appContext),o.value.mount(l())),C=()=>l()):typeof O=="object"?(o.value||(o.value=jy({name:r.appName,setup:()=>()=>Cl(ir(A)?A.value:A)}),i&&Object.assign(o.value._context,i.appContext),o.value.mount(l())),C=()=>l()):C=O,C},c=A=>{let C={};return ir(A)?C=A.value||{}:Fa(A)?C={...A}:C={...A},C.content&&(C.content=u(C.content)),C.triggerTarget&&(C.triggerTarget=ir(C.triggerTarget)?C.triggerTarget.value:C.triggerTarget),(!C.plugins||!Array.isArray(C.plugins))&&(C.plugins=[]),C.plugins=C.plugins.filter(O=>O.name!=="vueTippyReactiveState"),C.plugins.push({name:"vueTippyReactiveState",fn:()=>({onCreate(){n.value.isEnabled=!0},onMount(){n.value.isMounted=!0},onShow(){n.value.isMounted=!0,n.value.isVisible=!0},onShown(){n.value.isShown=!0},onHide(){n.value.isMounted=!1,n.value.isVisible=!1},onHidden(){n.value.isShown=!1},onUnmounted(){n.value.isMounted=!1},onDestroy(){n.value.isDestroyed=!0}})}),C},p=()=>{s.value&&s.value.setProps(c(t))},f=()=>{!s.value||!t.content||s.value.setContent(u(t.content))},m=A=>{var C;(C=s.value)===null||C===void 0||C.setContent(u(A))},g=A=>{var C;(C=s.value)===null||C===void 0||C.setProps(c(A))},b=()=>{var A;s.value&&(s.value.destroy(),s.value=void 0),a=null,(A=o.value)===null||A===void 0||A.unmount(),o.value=void 0},w=()=>{var A;(A=s.value)===null||A===void 0||A.show()},S=()=>{var A;(A=s.value)===null||A===void 0||A.hide()},M=()=>{var A;(A=s.value)===null||A===void 0||A.disable(),n.value.isEnabled=!1},x=()=>{var A;(A=s.value)===null||A===void 0||A.enable(),n.value.isEnabled=!0},_=()=>{var A;(A=s.value)===null||A===void 0||A.unmount()},I=()=>{if(!e)return;let A=ir(e)?e.value:e;typeof A=="function"&&(A=A()),A&&(s.value=ut(A,c(t)),A.$tippy=E)},E={tippy:s,refresh:p,refreshContent:f,setContent:m,setProps:g,destroy:b,hide:S,show:w,disable:M,enable:x,unmount:_,mount:I,state:n};return r.mount&&(i?i.isMounted?I():wn(I):I()),i&&N1(()=>{b()}),ir(t)||Fa(t)?ks(t,p,{immediate:!1}):ir(t.content)&&ks(t.content,f,{immediate:!1}),E}function lKe(e,t){const r=Se();return wn(()=>{const s=(Array.isArray(e)?e.map(n=>n.value):typeof e=="function"?e():e.value).map(n=>n instanceof Element?n._tippy:n).filter(Boolean);r.value=XYe(s,t?{allowHTML:!0,...t}:{allowHTML:!0})}),{singleton:r}}function uKe(e){return typeof e=="function"?e():at(e)}function cKe(e){var t,r;const i=uKe(e);return(r=(t=i)===null||t===void 0?void 0:t.$el)!==null&&r!==void 0?r:i}const hKe=Wt({props:{to:{type:[String,Function]},tag:{type:[String,Object],default:"span"},contentTag:{type:[String,Object],default:"span"},contentClass:{type:String,default:null},appendTo:{default:()=>ut.defaultProps.appendTo},aria:{default:()=>ut.defaultProps.aria},delay:{default:()=>ut.defaultProps.delay},duration:{default:()=>ut.defaultProps.duration},getReferenceClientRect:{default:()=>ut.defaultProps.getReferenceClientRect},hideOnClick:{type:[Boolean,String],default:()=>ut.defaultProps.hideOnClick},ignoreAttributes:{type:Boolean,default:()=>ut.defaultProps.ignoreAttributes},interactive:{type:Boolean,default:()=>ut.defaultProps.interactive},interactiveBorder:{default:()=>ut.defaultProps.interactiveBorder},interactiveDebounce:{default:()=>ut.defaultProps.interactiveDebounce},moveTransition:{default:()=>ut.defaultProps.moveTransition},offset:{default:()=>ut.defaultProps.offset},onAfterUpdate:{default:()=>ut.defaultProps.onAfterUpdate},onBeforeUpdate:{default:()=>ut.defaultProps.onBeforeUpdate},onCreate:{default:()=>ut.defaultProps.onCreate},onDestroy:{default:()=>ut.defaultProps.onDestroy},onHidden:{default:()=>ut.defaultProps.onHidden},onHide:{default:()=>ut.defaultProps.onHide},onMount:{default:()=>ut.defaultProps.onMount},onShow:{default:()=>ut.defaultProps.onShow},onShown:{default:()=>ut.defaultProps.onShown},onTrigger:{default:()=>ut.defaultProps.onTrigger},onUntrigger:{default:()=>ut.defaultProps.onUntrigger},onClickOutside:{default:()=>ut.defaultProps.onClickOutside},placement:{default:()=>ut.defaultProps.placement},plugins:{default:()=>ut.defaultProps.plugins},popperOptions:{default:()=>ut.defaultProps.popperOptions},render:{default:()=>ut.defaultProps.render},showOnCreate:{type:Boolean,default:()=>ut.defaultProps.showOnCreate},touch:{type:[Boolean,String,Array],default:()=>ut.defaultProps.touch},trigger:{default:()=>ut.defaultProps.trigger},triggerTarget:{default:()=>ut.defaultProps.triggerTarget},animateFill:{type:Boolean,default:()=>ut.defaultProps.animateFill},followCursor:{type:[Boolean,String],default:()=>ut.defaultProps.followCursor},inlinePositioning:{type:Boolean,default:()=>ut.defaultProps.inlinePositioning},sticky:{type:[Boolean,String],default:()=>ut.defaultProps.sticky},allowHTML:{type:Boolean,default:()=>ut.defaultProps.allowHTML},animation:{default:()=>ut.defaultProps.animation},arrow:{default:()=>ut.defaultProps.arrow},content:{default:()=>ut.defaultProps.content},inertia:{default:()=>ut.defaultProps.inertia},maxWidth:{default:()=>ut.defaultProps.maxWidth},role:{default:()=>ut.defaultProps.role},theme:{default:()=>ut.defaultProps.theme},zIndex:{default:()=>ut.defaultProps.zIndex}},emits:["state"],setup(e,{slots:t,emit:r,expose:i}){const s=Se(),n=Se(),o=Se(),a=Se(!1),l=()=>{let m={...e};for(const g of["to","tag","contentTag","contentClass"])m.hasOwnProperty(g)&&delete m[g];return m};let u=()=>cKe(s);e.to&&(typeof Element<"u"&&e.to instanceof Element?u=()=>e.to:e.to==="parent"?u=()=>{let m=s.value;return m||(m=s.value=n.value.parentElement),m}:(typeof e.to=="string"||e.to instanceof String)&&(u=()=>document.querySelector(e.to)));const c=z9(u,l());let p=t.content;!p&&e.to==="parent"&&(p=t.default),wn(()=>{a.value=!0,pc(()=>{p&&c.setContent(()=>o.value)})}),ks(c.state,()=>{r("state",at(c.state))},{immediate:!0,deep:!0}),ks(()=>e,()=>{c.setProps(l()),p&&c.setContent(()=>o.value)},{deep:!0});let f=Fs({elem:s,contentElem:o,mounted:a,...c});return i(f),()=>{const m=(typeof e.contentTag=="string",e.contentTag),g=p?Cl(m,{ref:o,style:{display:a.value?"inherit":"none"},class:e.contentClass},p(f)):null;if(e.to==="parent"){const S=[];if(!s.value){const M=Cl("span",{ref:n,"data-v-tippy":"",style:{display:"none"}});S.push(M)}return g&&S.push(g),S}const b=t.default?t.default(f):[];if(!e.tag){const S=Cl(b[0],{ref:s,"data-v-tippy":""});return g?[S,g]:S}const w=(typeof e.tag=="string",e.tag);return Cl(w,{ref:s,"data-v-tippy":""},g?[b,g]:b)}}}),pKe=["a11y","allowHTML","arrow","flip","flipOnUpdate","hideOnClick","ignoreAttributes","inertia","interactive","lazy","multiple","showOnInit","touch","touchHold"];let JN={};Object.keys(ut.defaultProps).forEach(e=>{pKe.includes(e)?JN[e]={type:Boolean,default:function(){return ut.defaultProps[e]}}:JN[e]={default:function(){return ut.defaultProps[e]}}});const dKe=Wt({props:JN,setup(e){const t=Se([]),{singleton:r}=lKe(t,e);return{instances:t,singleton:r}},mounted(){var e;const r=this.$el.parentElement.querySelectorAll("[data-v-tippy]");this.instances=Array.from(r).map(i=>i._tippy).filter(Boolean),(e=this.singleton)===null||e===void 0||e.setInstances(this.instances)},render(){let e=this.$slots.default?this.$slots.default():[];return Cl(()=>e)}}),fKe={mounted(e,t,r){const i=typeof t.value=="string"?{content:t.value}:t.value||{},s=Object.keys(t.modifiers||{}),n=s.find(a=>a!=="arrow"),o=s.findIndex(a=>a==="arrow")!==-1;n&&(i.placement=i.placement||n),o&&(i.arrow=i.arrow!==void 0?i.arrow:!0),r.props&&r.props.onTippyShow&&(i.onShow=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyShow(...a)}),r.props&&r.props.onTippyShown&&(i.onShown=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyShown(...a)}),r.props&&r.props.onTippyHidden&&(i.onHidden=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyHidden(...a)}),r.props&&r.props.onTippyHide&&(i.onHide=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyHide(...a)}),r.props&&r.props.onTippyMount&&(i.onMount=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyMount(...a)}),e.getAttribute("title")&&!i.content&&(i.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!i.content&&(i.content=e.getAttribute("content")),z9(e,i)},unmounted(e){e.$tippy?e.$tippy.destroy():e._tippy&&e._tippy.destroy()},updated(e,t){const r=typeof t.value=="string"?{content:t.value}:t.value||{};e.getAttribute("title")&&!r.content&&(r.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!r.content&&(r.content=e.getAttribute("content")),e.$tippy?e.$tippy.setProps(r||{}):e._tippy&&e._tippy.setProps(r||{})}},mKe={install(e,t={}){ut.setDefaultProps(t.defaultProps||{}),e.directive(t.directive||"tippy",fKe),e.component(t.component||"tippy",hKe),e.component(t.componentSingleton||"tippy-singleton",dKe)}},nce=ut.setDefaultProps;nce({ignoreAttributes:!0,plugins:[aKe,nKe,iKe,QYe]});const yKe=Wt({name:"App",components:{Shell:MZe},setup(){const e=rs();wn(()=>{new Mue().observe(e?.proxy?.$refs["app-size"]),nce({aria:{content:"labelledby"},theme:"ramp4",animation:"scale",inertia:!0,trigger:"mouseenter manual focus",touch:["hold",200],delay:[300,0],appendTo:()=>document.fullscreenElement||document.body})})}}),gKe=["lang"],vKe={class:"h-full",ref:"app-size"};function bKe(e,t,r,i,s,n){const o=Vi("shell");return Ae(),Be("div",{class:"ramp-app ramp-styles animation-enabled",lang:e.$i18n.locale},[Te("div",vKe,[jt(o)],512)],8,gKe)}const wKe=qh(yKe,[["render",bKe]]),Ou="focus-list",Rf="focus-item",_Ke="focus-icon",SKe="focus-container",bv=`[${Ou}],[${SKe}]`,TM="truncate-text",IM="show-truncate",U0="focused",ZN=`button,input,select,a,textarea,[contenteditable],[${Ou}],[${_Ke}],[tabIndex]`,xKe={mounted(e,t){+e.getAttribute("tabindex")<=0&&e.setAttribute("tabindex","0"),e.toggleAttribute(Ou,!0),new MKe(e,t.value)},updated(e){oce(e)}};function oce(e){e.querySelectorAll(ZN).forEach(r=>{if(r.closest(bv)===e||r.closest(bv)===r&&r.parentElement.closest(bv)===e)if(r.closest(`[${Ou}],.${U0}`).classList.contains(U0))r.setAttribute("tabindex","0");else{r.setAttribute("tabindex","-1");return}})}class MKe{element;highlightedItem;isHorizontal;isClicked;isTapped;constructor(t,r){this.element=t,this.highlightedItem=this.element,this.isHorizontal=r==="horizontal",this.isClicked=!1,this.isTapped=!1,this.setTabIndex(-1),this.element.setAttribute("role","group");const i=this;t.addEventListener("keydown",function(s){i.onKeydown(s)}),t.addEventListener("focus",function(){i.onFocus()}),t.addEventListener("blur",function(){i.onBlur()}),t.addEventListener("mousedown",function(){i.onMousedown()}),t.addEventListener("touchstart",function(){i.onTouchstart()}),document.addEventListener("click",function(s){t.contains(s.target)?i.onClick(s):i.defocusItem(i.highlightedItem)})}setTabIndex(t,r=this.element){r.querySelectorAll(ZN).forEach(s=>{(t===-1||s.closest(bv)===this.element||s.closest(bv)===s&&s.parentElement.closest(bv)===this.element||s.closest(`[${Ou}],.${U0}`).classList.contains(U0))&&s.setAttribute("tabindex",t.toString())})}defocusItem(t){t.classList.remove(U0),this.setTabIndex(-1,t),t._tippy&&t._tippy.hide(),t.getAttribute(Rf)===IM&&t.querySelector(`[${TM}]`)?._tippy?.hide()}focusItem(t){t.classList.add(U0),this.setAriaActiveDescendant(t),this.setTabIndex(0,t),t.scrollIntoView({block:"nearest"}),t._tippy&&!this.isTapped&&t._tippy.show(),t.getAttribute(Rf)===IM&&t.querySelector(`[${TM}]`)?._tippy?.show(),this.isTapped=!1}setAriaActiveDescendant(t){this.element.setAttribute("aria-activedescendant",t.getAttribute("id"))}shiftHighlight(t,r=!1){if(this.defocusItem(this.highlightedItem),r)if(this.highlightedItem===this.element)this.highlightedItem=t[t.length-1];else{const i=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[i-1]||t[t.length-1]}else if(this.highlightedItem===this.element)this.highlightedItem=t[0];else{const i=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[i+1]||t[0]}this.element.focus(),this.focusItem(this.highlightedItem)}onKeydown(t){const r=this,i=Array.prototype.filter.call(this.element.querySelectorAll(`[${Rf}]`),s=>s.closest(`[${Ou}]`)===r.element&&!!s.offsetParent);if(i.length!==0)switch(t.key){case"Up":case"ArrowUp":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i,!0);break;case"Down":case"ArrowDown":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i);break;case"Left":case"ArrowLeft":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i,!0);break;case"Right":case"ArrowRight":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i);break;case"Esc":case"Escape":this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.defocusItem(this.highlightedItem),this.highlightedItem=this.element,this.element.removeAttribute("aria-activedescendant"),this.element.focus());break;case"Enter":case" ":t.target===this.element&&this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.highlightedItem.click());break;case"Tab":this.highlightedItem!==this.element&&(this.highlightedItem.querySelectorAll(ZN).length===0&&this.defocusItem(this.highlightedItem),t.shiftKey&&(t.preventDefault(),t.stopPropagation(),this.defocusItem(this.highlightedItem),this.highlightedItem=this.element,this.element.removeAttribute("aria-activedescendant"),this.element.focus()))}}onClick(t){this.defocusItem(this.highlightedItem);let r=t.target;if(!r.hasAttribute(Ou))for(;r.parentElement.closest(`[${Ou}]`)!==this.element;)r=r.parentElement.closest(`[${Ou}]`);this.highlightedItem=r.closest(`[${Rf}]`)||r.closest(`[${Ou}]`)||this.highlightedItem,r.hasAttribute(`${Rf}`)&&this.element.focus(),this.highlightedItem!==this.element?this.focusItem(this.highlightedItem):this.element.removeAttribute("aria-activedescendant")}onFocus(){this.highlightedItem&&!this.isClicked&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.show(),this.highlightedItem.getAttribute(Rf)===IM&&this.highlightedItem.querySelector(`[${TM}]`)?._tippy?.show()),this.isClicked=!1,this.element.hasAttribute("aria-activedescendant")||this.highlightedItem===this.element?this.highlightedItem!==this.element&&this.focusItem(this.highlightedItem):this.setAriaActiveDescendant(this.highlightedItem),oce(this.element),this.highlightedItem&&this.highlightedItem!==this.element&&this.highlightedItem.setAttribute("tabindex","-1")}onBlur(){this.highlightedItem&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.hide(),this.highlightedItem.getAttribute(Rf)===IM&&this.highlightedItem.querySelector(`[${TM}]`)?._tippy?.hide())}onMousedown(){this.isClicked=!0}onTouchstart(){this.isTapped=!0}}const SW="focus-item",TKe={beforeMount(e,t){e.hasAttribute("id")||e.setAttribute("id",IKe()),t.value?e.setAttribute(SW,t.value):e.toggleAttribute(SW,!0)}};function IKe(){let e;do e="focus-item-"+Math.random().toString(36).substring(2,9);while(document.getElementById(e)!==null);return e}const G9="focus-container",ace="focus-list",EKe="focus-icon",OC=`[${ace}],[${G9}]`,xW=`button,input,select,a,textarea,[contenteditable],.ag-tab-guard,[${ace}],[${G9}],[${EKe}],[tabIndex]`;let PC=[];const AKe={mounted(e){[...document.querySelectorAll(".inner-shell")].some(r=>r.contains(e))&&PC.push(new $Ke(e))},beforeUnmount(e){PC=PC.filter(t=>t.element===e?(t.removeEventListeners(),!1):!0)}};class $Ke{element;constructor(t){this.element=t,this.element.toggleAttribute(G9,!0),this.element.tabIndex=0,setTimeout(()=>this.disableTabbing(),600);const r=this;this.element.addEventListener("keypress",function(i){r.onKeypress(i)}),this.element.addEventListener("click",function(){r.onClick()}),this.element.addEventListener("focusout",function(i){r.onFocusOut(i)}),this.element.addEventListener("focus",function(){r.onFocus()})}removeEventListeners(){const t=this;this.element.removeEventListener("keypress",function(r){t.onKeypress(r)}),this.element.removeEventListener("click",function(){t.onClick()}),this.element.removeEventListener("focusout",function(r){t.onFocusOut(r)}),this.element.removeEventListener("focus",function(){t.onFocus()})}onKeypress(t){t.target===this.element&&(t.key==="Enter"||t.key===" ")&&this.enableTabbing().focus()}onClick(){this.enableTabbing()}onFocusOut(t){this.element.contains(t.relatedTarget)||this.disableTabbing()}onFocus(){this.disableTabbing()}disableTabbing(){Array.prototype.filter.call(this.element.querySelectorAll(xW),()=>!0).forEach(r=>{r.tabIndex=-1})}enableTabbing(){let t;return Array.prototype.map.call(this.element.querySelectorAll(xW),r=>{(r.closest(OC)===this.element||r.closest(OC)===r&&r.parentElement.closest(OC)===this.element)&&r.offsetParent&&(r.tabIndex=0,t===void 0&&(t=r))}),t}}const CKe="aaa1rp3barth4b_ott3vie4c1le2ogado5udhabi7c_ademy5centure6ountant_s9o1tor4d_s1ult4e_g1ro2tna4f_l1rica5g_akhan5ency5i_g1rbus3force5tel5kdn3l_faromeo7ibaba4pay4lfinanz6state5y2sace3tom5m_azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o_l2partments8p_le4q_uarelle8r_ab1mco4chi3my2pa2t_e3s_da2ia2sociates9t_hleta5torney7u_ction5di_ble3o3spost5thor3o_s4vianca6w_s2x_a2z_ure5ba_by2idu3namex3narepublic11d1k2r_celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b_c1t1va3cg1n2d1e_ats2uty4er2ntley5rlin4st_buy5t2f1g1h_arti5i_ble3d1ke2ng_o3o1z2j1lack_friday9ockbuster8g1omberg7ue3m_s1w2n_pparibas9o_ats3ehringer8fa2m1nd2o_k_ing5sch2tik2on4t1utique6x2r_adesco6idgestone9oadway5ker3ther5ussels7s1t1uild_ers6siness6y1zz3v1w1y1z_h3ca_b1fe2l_l1vinklein9m_era3p2non3petown5ital_one8r_avan4ds2e_er_s4s2sa1e1h1ino4t_ering5holic7ba1n1re2s2c1d1enter4o1rn3f_a1d2g1h_anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i_priani6rcle4sco3tadel4i_c2y_eats7k1l_aims4eaning6ick2nic1que6othing5ud3ub_med6m1n1o_ach3des3ffee4llege4ogne5m_cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking_channel11l1p2rsica5untry4pon_s4rses6pa2r_edit_card4union9icket5own3s1uise_s6u_isinella9v1w1x1y_mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e_al_er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si_gn4v2hl2iamonds6et2gital5rect_ory7scount3ver5h2y2j1k1m1np2o_cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c_o2deka3u_cation8e1g1mail3erck5nergy4gineer_ing9terprises10pson4quipment8r_icsson6ni3s_q1tate5t_isalat7u_rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n_s2rm_ers5shion4t3edex3edback6rrari3ero6i_at2delity5o2lm2nal1nce1ial7re_stone6mdale6sh_ing5t_ness6j1k1lickr3ghts4r2orist4wers5y2m1o_o_d_network8tball6rd1ex2sale4um3undation8x2r_ee1senius7l1ogans4ntdoor4ier7tr2ujitsu5n_d2rniture7tbol5yi3ga_l_lery3o1up4me_s3p1rden4y2b_iz3d_n2e_a1nt_ing5orge5f1g_ee3h1i_ft_s3ves2ing5l_ass3e1obal2o4m_ail3bh2o1x2n1odaddy5ld_point6f2o_dyear5g_le4p1t1v2p1q1r_ainger5phics5tis4een3ipe3ocery4up4s1t1u_ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc_bank7ealth_care8lp1sinki6re1mes5gtv3iphop4samitsu7tachi5v2k_t2m1n1ockey4ldings5iday5medepot5goods5s_ense7nda3rse3spital5t_ing5t_eles2s3mail5use3w2r1sbc3t1u_ghes5yatt3undai7ibm2cbc2e1u2d1e_ee3fm2kano4l1m_amat4db2mo_bilien9n_c1dustries8finiti5o2g1k1stitute6urance4e4t_ernational10uit4vestments10o1piranga7q1r_ish4s_maili5t_anbul7t_au2v3jaguar4va3cb2e_ep2tzt3welry6io2ll2m_p2nj2o_bs1urg4t1y2p_morgan6rs3uegos4niper7kaufen5ddi3e_rryhotels6logistics9properties14fh2g1h1i_a1ds2m1nder2le4tchen5wi3m1n1oeln3matsu5sher5p_mg2n2r_d1ed3uokgroup8w1y_oto4z2la_caixa5mborghini8er3ncaster5ia3d_rover6xess5salle5t_ino3robe5w_yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i_dl2fe_insurance9style7ghting6ke2lly3mited4o2ncoln4de2k2psy3ve1ing5k1lc1p2oan_s3cker3us3l1ndon4tte1o3ve3pl_financial11r1s1t_d_a3u_ndbeck6xe1ury5v1y2ma_cys3drid4if1son4keup4n_agement7go3p1rket_ing3s4riott5shalls7serati6ttel5ba2c_kinsey7d1e_d_ia3et2lbourne7me1orial6n_u2rckmsd7g1h1iami3crosoft7l1ni1t2t_subishi9k1l_b1s2m_a2n1o_bi_le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to_rcycles9v_ie4p1q1r1s_d2t_n1r2u_seum3ic3tual5v1w1x1y1z2na_b1goya4me2tura4vy3ba2c1e_c1t_bank4flix4work5ustar5w_s2xt_direct7us4f_l2g_o2hk2i_co2ke1on3nja3ssan1y5l1o_kia3rthwesternmutual14on4w_ruz3tv4p1r_a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan_group9dnavy5lo3m_ega4ne1g1l_ine5oo2pen3racle3nge4g_anic5igins6saka4tsuka4t2vh3pa_ge2nasonic7ris2s1tners4s1y3ssagens7y2ccw3e_t2f_izer5g1h_armacy6d1ilips5one2to_graphy6s4ysio5ics1tet2ures6d1n_g1k2oneer5zza4k1l_ace2y_station9umbing5s3m1n_c2ohl2ker3litie5rn2st3r_america6xi3ess3ime3o_d_uctions8f1gressive8mo2perties3y5tection8u_dential9s1t1ub2w_c2y2qa1pon3uebec3st5racing4dio4e_ad1lestate6tor2y4cipes5d_stone5umbrella9hab3ise_n3t2liance6n_t_als5pair3ort3ublican8st_aurant8view_s5xroth6ich_ardli6oh3l1o1p2o_cher3ks3deo3gers4om3s_vp3u_gby3hr2n2w_e2yukyu6sa_arland6fe_ty4kura4le1on3msclub4ung5ndvik_coromant12ofi4p1rl2s1ve2xo3b_i1s2c_a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e_arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x_y3fr2g1h_angrila6rp2w2ell3ia1ksha5oes2p_ping5uji3w_time7i_lk2na1gles5te3j1k_i_n2y_pe4l_ing4m_art3ile4n_cf3o_ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa_ce3ort2t3r_l2s1t_ada2ples4r1tebank4farm7c_group6ockholm6rage3e3ream4udio2y3yle4u_cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y_dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x_i3c_i2d_k2eam2ch_nology8l1masek5nnis4va3f1g1h_d1eater2re6iaa2ckets5enda4ffany5ps2res2ol4j_maxx4x2k_maxx5l1m_all4n1o_day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r_ade1ing4ining5vel_channel7ers_insurance16ust3v2t1ube2i1nes3shu4v_s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va_cations7na1guard7c1e_gas3ntures6risign5mÃ¶gensberater2ung14sicherung10t2g1i_ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lkswagen7vo3te1ing3o2yage5u_elos6wales2mart4ter4ng_gou5tch_es6eather_channel12bcam3er2site5d_ding5ibo2r3f1hoswho6ien2ki2lliamhill9n_dows4e1ners6me2olterskluwer11odside6rk_s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u_tube6t1un3za_ppos4ra3ero3ip2m1one3uerich6w2",OKe="ÎµÎ»1Ï…2Ð±Ð³1ÐµÐ»3Ð´ÐµÑ‚Ð¸4ÐµÑŽ2ÐºÐ°Ñ‚Ð¾Ð»Ð¸Ðº6Ð¾Ð¼3Ð¼ÐºÐ´2Ð¾Ð½1ÑÐºÐ²Ð°6Ð¾Ð½Ð»Ð°Ð¹Ð½5Ñ€Ð³3Ñ€ÑƒÑ2Ñ„2ÑÐ°Ð¹Ñ‚3Ñ€Ð±3ÑƒÐºÑ€3Ò›Ð°Ð·3Õ°Õ¡Õµ3×™×©×¨××œ5×§×•×3Ø§Ø¨ÙˆØ¸Ø¨ÙŠ5ØªØµØ§Ù„Ø§Øª6Ø±Ø§Ù…ÙƒÙˆ5Ù„Ø§Ø±Ø¯Ù†4Ø¨Ø­Ø±ÙŠÙ†5Ø¬Ø²Ø§Ø¦Ø±5Ø³Ø¹ÙˆØ¯ÙŠØ©6Ø¹Ù„ÙŠØ§Ù†5Ù…ØºØ±Ø¨5Ù…Ø§Ø±Ø§Øª5ÛŒØ±Ø§Ù†5Ø¨Ø§Ø±Øª2Ø²Ø§Ø±4ÙŠØªÙƒ3Ú¾Ø§Ø±Øª5ØªÙˆÙ†Ø³4Ø³ÙˆØ¯Ø§Ù†3Ø±ÙŠØ©5Ø´Ø¨ÙƒØ©4Ø¹Ø±Ø§Ù‚2Ø¨2Ù…Ø§Ù†4ÙÙ„Ø³Ø·ÙŠÙ†6Ù‚Ø·Ø±3ÙƒØ§Ø«ÙˆÙ„ÙŠÙƒ6ÙˆÙ…3Ù…ØµØ±2Ù„ÙŠØ³ÙŠØ§5ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§7Ù‚Ø¹4Ù‡Ù…Ø±Ø§Ù‡5Ù¾Ø§Ú©Ø³ØªØ§Ù†7Ú€Ø§Ø±Øª4à¤•à¥‰à¤®3à¤¨à¥‡à¤Ÿ3à¤­à¤¾à¤°à¤¤_à¤®à¥3à¥‹à¤¤5à¤¸à¤‚à¤—à¤ à¤¨5à¦¬à¦¾à¦‚à¦²à¦¾5à¦­à¦¾à¦°à¦¤2à§°à¦¤4à¨­à¨¾à¨°à¨¤4àª­àª¾àª°àª¤4à¬­à¬¾à¬°à¬¤4à®‡à®¨à¯à®¤à®¿à®¯à®¾6à®²à®™à¯à®•à¯ˆ6à®šà®¿à®™à¯à®•à®ªà¯à®ªà¯‚à®°à¯11à°­à°¾à°°à°¤à±5à²­à²¾à²°à²¤4à´­à´¾à´°à´¤à´‚5à¶½à¶‚à¶šà·4à¸„à¸­à¸¡3à¹„à¸—à¸¢3àº¥àº²àº§3áƒ’áƒ”2ã¿ã‚“ãª3ã‚¢ãƒžã‚¾ãƒ³4ã‚¯ãƒ©ã‚¦ãƒ‰4ã‚°ãƒ¼ã‚°ãƒ«4ã‚³ãƒ 2ã‚¹ãƒˆã‚¢3ã‚»ãƒ¼ãƒ«3ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³6ãƒã‚¤ãƒ³ãƒˆ4ä¸–ç•Œ2ä¸­ä¿¡1å›½1åœ‹1æ–‡ç½‘3äºšé©¬é€Š3ä¼ä¸š2ä½›å±±2ä¿¡æ¯2å¥åº·2å…«å¦2å…¬å¸1ç›Š2å°æ¹¾1ç£2å•†åŸŽ1åº—1æ ‡2å˜‰é‡Œ_å¤§é…’åº—5åœ¨çº¿2å¤§æ‹¿2å¤©ä¸»æ•™3å¨±ä¹2å®¶é›»2å¹¿ä¸œ2å¾®åš2æ…ˆå–„2æˆ‘çˆ±ä½ 3æ‰‹æœº2æ‹›è˜2æ”¿åŠ¡1åºœ2æ–°åŠ å¡2é—»2æ—¶å°š2æ›¸ç±2æœºæž„2æ·¡é©¬é”¡3æ¸¸æˆ2æ¾³é–€2ç‚¹çœ‹2ç§»åŠ¨2ç»„ç»‡æœºæž„4ç½‘å€1åº—1ç«™1ç»œ2è”é€š2è°·æ­Œ2è´­ç‰©2é€šè²©2é›†å›¢2é›»è¨Šç›ˆç§‘4é£žåˆ©æµ¦3é£Ÿå“2é¤åŽ…2é¦™æ ¼é‡Œæ‹‰3æ¸¯2ë‹·ë„·1ì»´2ì‚¼ì„±2í•œêµ­2",n1=(e,t)=>{for(const r in t)e[r]=t[r];return e},YN="numeric",KN="ascii",XN="alpha",T3="asciinumeric",EM="alphanumeric",QN="domain",lce="emoji",PKe="scheme",RKe="slashscheme",MW="whitespace";function LKe(e,t){return e in t||(t[e]=[]),t[e]}function qm(e,t,r){t[YN]&&(t[T3]=!0,t[EM]=!0),t[KN]&&(t[T3]=!0,t[XN]=!0),t[T3]&&(t[EM]=!0),t[XN]&&(t[EM]=!0),t[EM]&&(t[QN]=!0),t[lce]&&(t[QN]=!0);for(const i in t){const s=LKe(i,r);s.indexOf(e)<0&&s.push(e)}}function kKe(e,t){const r={};for(const i in t)t[i].indexOf(e)>=0&&(r[i]=!0);return r}function qo(e){e===void 0&&(e=null),this.j={},this.jr=[],this.jd=null,this.t=e}qo.groups={};qo.prototype={accepts(){return!!this.t},go(e){const t=this,r=t.j[e];if(r)return r;for(let i=0;i<t.jr.length;i++){const s=t.jr[i][0],n=t.jr[i][1];if(n&&s.test(e))return n}return t.jd},has(e,t){return t===void 0&&(t=!1),t?e in this.j:!!this.go(e)},ta(e,t,r,i){for(let s=0;s<e.length;s++)this.tt(e[s],t,r,i)},tr(e,t,r,i){i=i||qo.groups;let s;return t&&t.j?s=t:(s=new qo(t),r&&i&&qm(t,r,i)),this.jr.push([e,s]),s},ts(e,t,r,i){let s=this;const n=e.length;if(!n)return s;for(let o=0;o<n-1;o++)s=s.tt(e[o]);return s.tt(e[n-1],t,r,i)},tt(e,t,r,i){i=i||qo.groups;const s=this;if(t&&t.j)return s.j[e]=t,t;const n=t;let o,a=s.go(e);if(a?(o=new qo,n1(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new qo,n){if(i)if(o.t&&typeof o.t=="string"){const l=n1(kKe(o.t,i),r);qm(n,l,i)}else r&&qm(n,r,i);o.t=n}return s.j[e]=o,o}};const pt=(e,t,r,i,s)=>e.ta(t,r,i,s),da=(e,t,r,i,s)=>e.tr(t,r,i,s),TW=(e,t,r,i,s)=>e.ts(t,r,i,s),Pe=(e,t,r,i,s)=>e.tt(t,r,i,s),ih="WORD",eD="UWORD",P2="LOCALHOST",tD="TLD",rD="UTLD",I3="SCHEME",x0="SLASH_SCHEME",SE="NUM",uce="WS",B9="NL",z0="OPENBRACE",E_="OPENBRACKET",A_="OPENANGLEBRACKET",$_="OPENPAREN",Fm="CLOSEBRACE",G0="CLOSEBRACKET",B0="CLOSEANGLEBRACKET",jm="CLOSEPAREN",xE="AMPERSAND",ME="APOSTROPHE",TE="ASTERISK",id="AT",IE="BACKSLASH",EE="BACKTICK",AE="CARET",ad="COLON",q9="COMMA",$E="DOLLAR",Tu="DOT",CE="EQUALS",H9="EXCLAMATION",Iu="HYPHEN",OE="PERCENT",PE="PIPE",RE="PLUS",LE="POUND",kE="QUERY",W9="QUOTE",J9="SEMI",uh="SLASH",C_="TILDE",NE="UNDERSCORE",cce="EMOJI",DE="SYM";var hce=Object.freeze({__proto__:null,WORD:ih,UWORD:eD,LOCALHOST:P2,TLD:tD,UTLD:rD,SCHEME:I3,SLASH_SCHEME:x0,NUM:SE,WS:uce,NL:B9,OPENBRACE:z0,OPENBRACKET:E_,OPENANGLEBRACKET:A_,OPENPAREN:$_,CLOSEBRACE:Fm,CLOSEBRACKET:G0,CLOSEANGLEBRACKET:B0,CLOSEPAREN:jm,AMPERSAND:xE,APOSTROPHE:ME,ASTERISK:TE,AT:id,BACKSLASH:IE,BACKTICK:EE,CARET:AE,COLON:ad,COMMA:q9,DOLLAR:$E,DOT:Tu,EQUALS:CE,EXCLAMATION:H9,HYPHEN:Iu,PERCENT:OE,PIPE:PE,PLUS:RE,POUND:LE,QUERY:kE,QUOTE:W9,SEMI:J9,SLASH:uh,TILDE:C_,UNDERSCORE:NE,EMOJI:cce,SYM:DE});const Ag=/[a-z]/,RC=/\p{L}/u,LC=/\p{Emoji}/u,kC=/\d/,IW=/\s/,EW=`
`,NKe="ï¸",DKe="â€";let AM=null,$M=null;function FKe(e){e===void 0&&(e=[]);const t={};qo.groups=t;const r=new qo;AM==null&&(AM=AW(CKe)),$M==null&&($M=AW(OKe)),Pe(r,"'",ME),Pe(r,"{",z0),Pe(r,"[",E_),Pe(r,"<",A_),Pe(r,"(",$_),Pe(r,"}",Fm),Pe(r,"]",G0),Pe(r,">",B0),Pe(r,")",jm),Pe(r,"&",xE),Pe(r,"*",TE),Pe(r,"@",id),Pe(r,"`",EE),Pe(r,"^",AE),Pe(r,":",ad),Pe(r,",",q9),Pe(r,"$",$E),Pe(r,".",Tu),Pe(r,"=",CE),Pe(r,"!",H9),Pe(r,"-",Iu),Pe(r,"%",OE),Pe(r,"|",PE),Pe(r,"+",RE),Pe(r,"#",LE),Pe(r,"?",kE),Pe(r,'"',W9),Pe(r,"/",uh),Pe(r,";",J9),Pe(r,"~",C_),Pe(r,"_",NE),Pe(r,"\\",IE);const i=da(r,kC,SE,{[YN]:!0});da(i,kC,i);const s=da(r,Ag,ih,{[KN]:!0});da(s,Ag,s);const n=da(r,RC,eD,{[XN]:!0});da(n,Ag),da(n,RC,n);const o=da(r,IW,uce,{[MW]:!0});Pe(r,EW,B9,{[MW]:!0}),Pe(o,EW),da(o,IW,o);const a=da(r,LC,cce,{[lce]:!0});da(a,LC,a),Pe(a,NKe,a);const l=Pe(a,DKe);da(l,LC,a);const u=[[Ag,s]],c=[[Ag,null],[RC,n]];for(let p=0;p<AM.length;p++)up(r,AM[p],tD,ih,u);for(let p=0;p<$M.length;p++)up(r,$M[p],rD,eD,c);qm(tD,{tld:!0,ascii:!0},t),qm(rD,{utld:!0,alpha:!0},t),up(r,"file",I3,ih,u),up(r,"mailto",I3,ih,u),up(r,"http",x0,ih,u),up(r,"https",x0,ih,u),up(r,"ftp",x0,ih,u),up(r,"ftps",x0,ih,u),qm(I3,{scheme:!0,ascii:!0},t),qm(x0,{slashscheme:!0,ascii:!0},t),e=e.sort((p,f)=>p[0]>f[0]?1:-1);for(let p=0;p<e.length;p++){const f=e[p][0],g=e[p][1]?{[PKe]:!0}:{[RKe]:!0};f.indexOf("-")>=0?g[QN]=!0:Ag.test(f)?kC.test(f)?g[T3]=!0:g[KN]=!0:g[YN]=!0,TW(r,f,f,g)}return TW(r,"localhost",P2,{ascii:!0}),r.jd=new qo(DE),{start:r,tokens:n1({groups:t},hce)}}function jKe(e,t){const r=VKe(t.replace(/[A-Z]/g,a=>a.toLowerCase())),i=r.length,s=[];let n=0,o=0;for(;o<i;){let a=e,l=null,u=0,c=null,p=-1,f=-1;for(;o<i&&(l=a.go(r[o]));)a=l,a.accepts()?(p=0,f=0,c=a):p>=0&&(p+=r[o].length,f++),u+=r[o].length,n+=r[o].length,o++;n-=p,o-=f,u-=p,s.push({t:c.t,v:t.slice(n-u,n),s:n-u,e:n})}return s}function VKe(e){const t=[],r=e.length;let i=0;for(;i<r;){let s=e.charCodeAt(i),n,o=s<55296||s>56319||i+1===r||(n=e.charCodeAt(i+1))<56320||n>57343?e[i]:e.slice(i,i+2);t.push(o),i+=o.length}return t}function up(e,t,r,i,s){let n;const o=t.length;for(let a=0;a<o-1;a++){const l=t[a];e.j[l]?n=e.j[l]:(n=new qo(i),n.jr=s.slice(),e.j[l]=n),e=n}return n=new qo(r),n.jr=s.slice(),e.j[t[o-1]]=n,n}function AW(e){const t=[],r=[];let i=0,s="0123456789";for(;i<e.length;){let n=0;for(;s.indexOf(e[i+n])>=0;)n++;if(n>0){t.push(r.join(""));let o=parseInt(e.substring(i,i+n),10);for(;o>0;o--)r.pop();i+=n}else e[i]==="_"?(t.push(r.join("")),i++):(r.push(e[i]),i++)}return t}const R2={defaultProtocol:"http",events:null,format:$W,formatHref:$W,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Z9(e,t){t===void 0&&(t=null);let r=n1({},R2);e&&(r=n1(r,e instanceof Z9?e.o:e));const i=r.ignoreTags,s=[];for(let n=0;n<i.length;n++)s.push(i[n].toUpperCase());this.o=r,t&&(this.defaultRender=t),this.ignoreTags=s}Z9.prototype={o:R2,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,r){const i=t!=null;let s=this.o[e];return s&&(typeof s=="object"?(s=r.t in s?s[r.t]:R2[e],typeof s=="function"&&i&&(s=s(t,r))):typeof s=="function"&&i&&(s=s(t,r.t,r)),s)},getObj(e,t,r){let i=this.o[e];return typeof i=="function"&&t!=null&&(i=i(t,r.t,r)),i},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function $W(e){return e}function pce(e,t){this.t="token",this.v=e,this.tk=t}pce.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),r=e.get("truncate",t,this),i=e.get("format",t,this);return r&&i.length>r?i.substring(0,r)+"â€¦":i},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e){return e===void 0&&(e=R2.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,r=this.toFormattedHref(e),i=e.get("tagName",r,t),s=this.toFormattedString(e),n={},o=e.get("className",r,t),a=e.get("target",r,t),l=e.get("rel",r,t),u=e.getObj("attributes",r,t),c=e.getObj("events",r,t);return n.href=r,o&&(n.class=o),a&&(n.target=a),l&&(n.rel=l),u&&n1(n,u),{tagName:i,attributes:n,content:s,eventListeners:c}}};function q$(e,t){class r extends pce{constructor(s,n){super(s,n),this.t=e}}for(const i in t)r.prototype[i]=t[i];return r.t=e,r}const CW=q$("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),OW=q$("text"),UKe=q$("nl"),Lf=q$("url",{isLink:!0,toHref(e){return e===void 0&&(e=R2.defaultProtocol),this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==P2&&e[1].t===ad}}),as=e=>new qo(e);function zKe(e){let{groups:t}=e;const r=t.domain.concat([xE,TE,id,IE,EE,AE,$E,CE,Iu,SE,OE,PE,RE,LE,uh,DE,C_,NE]),i=[ME,B0,Fm,G0,jm,ad,q9,Tu,H9,A_,z0,E_,$_,kE,W9,J9],s=[xE,ME,TE,IE,EE,AE,Fm,$E,CE,Iu,SE,z0,OE,PE,RE,LE,kE,uh,DE,C_,NE],n=as(),o=Pe(n,C_);pt(o,s,o),pt(o,t.domain,o);const a=as(),l=as(),u=as();pt(n,t.domain,a),pt(n,t.scheme,l),pt(n,t.slashscheme,u),pt(a,s,o),pt(a,t.domain,a);const c=Pe(a,id);Pe(o,id,c),Pe(l,id,c),Pe(u,id,c);const p=Pe(o,Tu);pt(p,s,o),pt(p,t.domain,o);const f=as();pt(c,t.domain,f),pt(f,t.domain,f);const m=Pe(f,Tu);pt(m,t.domain,f);const g=as(CW);pt(m,t.tld,g),pt(m,t.utld,g),Pe(c,P2,g);const b=Pe(f,Iu);pt(b,t.domain,f),pt(g,t.domain,f),Pe(g,Tu,m),Pe(g,Iu,b);const w=Pe(g,ad);pt(w,t.numeric,CW);const S=Pe(a,Iu),M=Pe(a,Tu);pt(S,t.domain,a),pt(M,s,o),pt(M,t.domain,a);const x=as(Lf);pt(M,t.tld,x),pt(M,t.utld,x),pt(x,t.domain,a),pt(x,s,o),Pe(x,Tu,M),Pe(x,Iu,S),Pe(x,id,c);const _=Pe(x,ad),I=as(Lf);pt(_,t.numeric,I);const E=as(Lf),A=as();pt(E,r,E),pt(E,i,A),pt(A,r,E),pt(A,i,A),Pe(x,uh,E),Pe(I,uh,E);const C=Pe(l,ad),O=Pe(u,ad),R=Pe(O,uh);Pe(R,uh,C),pt(l,t.domain,a),Pe(l,Tu,M),Pe(l,Iu,S),pt(u,t.domain,a),Pe(u,Tu,M),Pe(u,Iu,S),pt(C,t.domain,E),Pe(C,uh,E);const D=Pe(E,z0),N=Pe(E,E_),U=Pe(E,A_),J=Pe(E,$_);Pe(A,z0,D),Pe(A,E_,N),Pe(A,A_,U),Pe(A,$_,J),Pe(D,Fm,E),Pe(N,G0,E),Pe(U,B0,E),Pe(J,jm,E),Pe(D,Fm,E);const y=as(Lf),T=as(Lf),$=as(Lf),P=as(Lf);pt(D,r,y),pt(N,r,T),pt(U,r,$),pt(J,r,P);const z=as(),X=as(),ae=as(),te=as();return pt(D,i),pt(N,i),pt(U,i),pt(J,i),pt(y,r,y),pt(T,r,T),pt($,r,$),pt(P,r,P),pt(y,i,y),pt(T,i,T),pt($,i,$),pt(P,i,P),pt(z,r,z),pt(X,r,T),pt(ae,r,$),pt(te,r,P),pt(z,i,z),pt(X,i,X),pt(ae,i,ae),pt(te,i,te),Pe(T,G0,E),Pe($,B0,E),Pe(P,jm,E),Pe(y,Fm,E),Pe(X,G0,E),Pe(ae,B0,E),Pe(te,jm,E),Pe(z,jm,E),Pe(n,P2,x),Pe(n,B9,UKe),{start:n,tokens:hce}}function GKe(e,t,r){let i=r.length,s=0,n=[],o=[];for(;s<i;){let a=e,l=null,u=null,c=0,p=null,f=-1;for(;s<i&&!(l=a.go(r[s].t));)o.push(r[s++]);for(;s<i&&(u=l||a.go(r[s].t));)l=null,a=u,a.accepts()?(f=0,p=a):f>=0&&f++,s++,c++;if(f<0)s-=c,s<i&&(o.push(r[s]),s++);else{o.length>0&&(n.push(NC(OW,t,o)),o=[]),s-=f,c-=f;const m=p.t,g=r.slice(s-c,s);n.push(NC(m,t,g))}}return o.length>0&&n.push(NC(OW,t,o)),n}function NC(e,t,r){const i=r[0].s,s=r[r.length-1].e,n=t.slice(i,s);return new e(n,r)}const On={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function BKe(){On.scanner=FKe(On.customSchemes);for(let e=0;e<On.tokenQueue.length;e++)On.tokenQueue[e][1]({scanner:On.scanner});On.parser=zKe(On.scanner.tokens);for(let e=0;e<On.pluginQueue.length;e++)On.pluginQueue[e][1]({scanner:On.scanner,parser:On.parser});On.initialized=!0}function qKe(e){return On.initialized||BKe(),GKe(On.parser.start,e,jKe(On.scanner.start,e))}var HKe={amp:"&",gt:">",lt:"<",nbsp:"Â ",quot:'"'},WKe=/^#[xX]([A-Fa-f0-9]+)$/,JKe=/^#([0-9]+)$/,ZKe=/^([A-Za-z0-9]+)$/,YKe=function(){function e(t){this.named=t}return e.prototype.parse=function(t){if(t){var r=t.match(WKe);if(r)return String.fromCharCode(parseInt(r[1],16));if(r=t.match(JKe),r)return String.fromCharCode(parseInt(r[1],10));if(r=t.match(ZKe),r)return this.named[r[1]]||"&"+r[1]+";"}},e}(),KKe=/[\t\n\f ]/,XKe=/[A-Za-z]/,QKe=/\r\n?/g;function qs(e){return KKe.test(e)}function PW(e){return XKe.test(e)}function eXe(e){return e.replace(QKe,`
`)}var tXe=function(){function e(t,r,i){i===void 0&&(i="precompile"),this.delegate=t,this.entityParser=r,this.mode=i,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var s=this.peek();if(s==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&s===`
`){var n=this.tagNameBuffer.toLowerCase();(n==="pre"||n==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var s=this.peek(),n=this.tagNameBuffer;s==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):s==="&"&&n!=="script"&&n!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(s))},tagOpen:function(){var s=this.consume();s==="!"?this.transitionTo("markupDeclarationOpen"):s==="/"?this.transitionTo("endTagOpen"):(s==="@"||s===":"||PW(s))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(s))},markupDeclarationOpen:function(){var s=this.consume();if(s==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var n=s.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();n==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var s=this.consume();qs(s)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var s=this.consume();qs(s)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(s.toLowerCase()))},doctypeName:function(){var s=this.consume();qs(s)?this.transitionTo("afterDoctypeName"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(s.toLowerCase())},afterDoctypeName:function(){var s=this.consume();if(!qs(s))if(s===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var n=s.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),o=n.toUpperCase()==="PUBLIC",a=n.toUpperCase()==="SYSTEM";(o||a)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),o?this.transitionTo("afterDoctypePublicKeyword"):a&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var s=this.peek();qs(s)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):s==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):s==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):s===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var s=this.consume();s==='"'?this.transitionTo("afterDoctypePublicIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(s)},doctypePublicIdentifierSingleQuoted:function(){var s=this.consume();s==="'"?this.transitionTo("afterDoctypePublicIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(s)},afterDoctypePublicIdentifier:function(){var s=this.consume();qs(s)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):s==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):s==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var s=this.consume();qs(s)||(s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):s==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):s==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var s=this.consume();s==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(s)},doctypeSystemIdentifierSingleQuoted:function(){var s=this.consume();s==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):s===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(s)},afterDoctypeSystemIdentifier:function(){var s=this.consume();qs(s)||s===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var s=this.consume();s==="-"?this.transitionTo("commentStartDash"):s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(s),this.transitionTo("comment"))},commentStartDash:function(){var s=this.consume();s==="-"?this.transitionTo("commentEnd"):s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var s=this.consume();s==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(s)},commentEndDash:function(){var s=this.consume();s==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+s),this.transitionTo("comment"))},commentEnd:function(){var s=this.consume();s===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+s),this.transitionTo("comment"))},tagName:function(){var s=this.consume();qs(s)?this.transitionTo("beforeAttributeName"):s==="/"?this.transitionTo("selfClosingStartTag"):s===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(s)},endTagName:function(){var s=this.consume();qs(s)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):s==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):s===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(s)},beforeAttributeName:function(){var s=this.peek();if(qs(s)){this.consume();return}else s==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):s===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):s==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(s)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var s=this.peek();qs(s)?(this.transitionTo("afterAttributeName"),this.consume()):s==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):s==='"'||s==="'"||s==="<"?(this.delegate.reportSyntaxError(s+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(s)):(this.consume(),this.delegate.appendToAttributeName(s))},afterAttributeName:function(){var s=this.peek();if(qs(s)){this.consume();return}else s==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(s))},beforeAttributeValue:function(){var s=this.peek();qs(s)?this.consume():s==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):s==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):s===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(s))},attributeValueDoubleQuoted:function(){var s=this.consume();s==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):s==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(s)},attributeValueSingleQuoted:function(){var s=this.consume();s==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):s==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(s)},attributeValueUnquoted:function(){var s=this.peek();qs(s)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):s==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):s==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):s===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(s))},afterAttributeValueQuoted:function(){var s=this.peek();qs(s)?(this.consume(),this.transitionTo("beforeAttributeName")):s==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):s===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var s=this.peek();s===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var s=this.consume();(s==="@"||s===":"||PW(s))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(s))}},this.reset()}return e.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},e.prototype.transitionTo=function(t){this.state=t},e.prototype.tokenize=function(t){this.reset(),this.tokenizePart(t),this.tokenizeEOF()},e.prototype.tokenizePart=function(t){for(this.input+=eXe(t);this.index<this.input.length;){var r=this.states[this.state];if(r!==void 0)r.call(this);else throw new Error("unhandled state "+this.state)}},e.prototype.tokenizeEOF=function(){this.flushData()},e.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},e.prototype.peek=function(){return this.input.charAt(this.index)},e.prototype.consume=function(){var t=this.peek();return this.index++,t===`
`?(this.line++,this.column=0):this.column++,t},e.prototype.consumeCharRef=function(){var t=this.input.indexOf(";",this.index);if(t!==-1){var r=this.input.slice(this.index,t),i=this.entityParser.parse(r);if(i){for(var s=r.length;s;)this.consume(),s--;return this.consume(),i}}},e.prototype.markTagStart=function(){this.delegate.tagOpen()},e.prototype.appendToTagName=function(t){this.tagNameBuffer+=t,this.delegate.appendToTagName(t)},e.prototype.isIgnoredEndTag=function(){var t=this.tagNameBuffer;return t==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||t==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||t==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},e}(),rXe=function(){function e(t,r){r===void 0&&(r={}),this.options=r,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new tXe(this,t,r.mode),this._currentAttribute=void 0}return e.prototype.tokenize=function(t){return this.tokens=[],this.tokenizer.tokenize(t),this.tokens},e.prototype.tokenizePart=function(t){return this.tokens=[],this.tokenizer.tokenizePart(t),this.tokens},e.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},e.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},e.prototype.current=function(){var t=this.token;if(t===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return t;for(var r=0;r<arguments.length;r++)if(t.type===arguments[r])return t;throw new Error("token type was unexpectedly "+t.type)},e.prototype.push=function(t){this.token=t,this.tokens.push(t)},e.prototype.currentAttribute=function(){return this._currentAttribute},e.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},e.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},e.prototype.appendToDoctypeName=function(t){this.current("Doctype").name+=t},e.prototype.appendToDoctypePublicIdentifier=function(t){var r=this.current("Doctype");r.publicIdentifier===void 0?r.publicIdentifier=t:r.publicIdentifier+=t},e.prototype.appendToDoctypeSystemIdentifier=function(t){var r=this.current("Doctype");r.systemIdentifier===void 0?r.systemIdentifier=t:r.systemIdentifier+=t},e.prototype.endDoctype=function(){this.addLocInfo()},e.prototype.beginData=function(){this.push({type:"Chars",chars:""})},e.prototype.appendToData=function(t){this.current("Chars").chars+=t},e.prototype.finishData=function(){this.addLocInfo()},e.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},e.prototype.appendToCommentData=function(t){this.current("Comment").chars+=t},e.prototype.finishComment=function(){this.addLocInfo()},e.prototype.tagOpen=function(){},e.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},e.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},e.prototype.finishTag=function(){this.addLocInfo()},e.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},e.prototype.appendToTagName=function(t){this.current("StartTag","EndTag").tagName+=t},e.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},e.prototype.appendToAttributeName=function(t){this.currentAttribute()[0]+=t},e.prototype.beginAttributeValue=function(t){this.currentAttribute()[2]=t},e.prototype.appendToAttributeValue=function(t){this.currentAttribute()[1]+=t},e.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},e.prototype.reportSyntaxError=function(t){this.current().syntaxError=t},e}();function iXe(e,t){var r=new rXe(new YKe(HKe),t);return r.tokenize(e)}const dce="LinkifyResult",FE="StartTag",fce="EndTag",iD="Chars",sXe="Comment",nXe="Doctype";function oXe(e,t){t===void 0&&(t={});const r=iXe(e),i=[],s=[],n=new Z9(t,uXe);for(let o=0;o<r.length;o++){const a=r[o];if(a.type===FE){i.push(a);const l=a.tagName.toUpperCase();if(!(l==="A"||n.ignoreTags.indexOf(l)>=0))continue;let c=i.length;lXe(l,r,++o,i),o+=i.length-c-1}else if(a.type!==iD)i.push(a);else{const l=aXe(a.chars,n);i.push.apply(i,l)}}for(let o=0;o<i.length;o++){const a=i[o];switch(a.type){case dce:s.push(a.rendered);break;case FE:{let l="<"+a.tagName;a.attributes.length>0&&(l+=" "+hXe(a.attributes).join(" ")),a.selfClosing&&(l+=" /"),l+=">",s.push(l);break}case fce:s.push(`</${a.tagName}>`);break;case iD:s.push(sD(a.chars));break;case sXe:s.push(`<!--${sD(a.chars)}-->`);break;case nXe:{let l=`<!DOCTYPE ${a.name}`;a.publicIdentifier&&(l+=` PUBLIC "${a.publicIdentifier}"`),a.systemIdentifier&&(l+=` "${a.systemIdentifier}"`),l+=">",s.push(l);break}}}return s.join("")}function aXe(e,t){const r=qKe(e),i=[];for(let s=0;s<r.length;s++){const n=r[s];n.t==="nl"&&t.get("nl2br")?i.push({type:FE,tagName:"br",attributes:[],selfClosing:!0}):!n.isLink||!t.check(n)?i.push({type:iD,chars:n.toString()}):i.push({type:dce,rendered:t.render(n)})}return i}function lXe(e,t,r,i){let s=1;for(;r<t.length&&s>0;){let n=t[r];n.type===FE&&n.tagName.toUpperCase()===e?s++:n.type===fce&&n.tagName.toUpperCase()===e&&s--,i.push(n),r++}return i}function uXe(e){let{tagName:t,attributes:r,content:i}=e;return`<${t} ${cXe(r)}>${sD(i)}</${t}>`}function sD(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function mce(e){return e.replace(/"/g,"&quot;")}function cXe(e){const t=[];for(const r in e){const i=e[r]+"";t.push(`${r}="${mce(i)}"`)}return t.join(" ")}function hXe(e){const t=[];for(let r=0;r<e.length;r++){const i=e[r][0],s=e[r][1]+"";t.push(`${i}="${mce(s)}"`)}return t}const pXe="truncate-text",dXe="truncate-trigger",fXe={beforeMount(e,t){!e.classList.contains("truncate")&&!t.value?.noTruncateClass&&e.classList.add("truncate"),e.toggleAttribute(pXe,!0)},mounted(e,t){let r;t.value&&t.value.externalTrigger&&(r=e.closest(`[${dXe}]`)),z9(e,{content:RW(e.textContent),onShow:mXe,allowHTML:!0,placement:"bottom-start",maxWidth:320,triggerTarget:r,...t.value?.options||{}})},updated(e,t){e._tippy&&(e._tippy.setContent(RW(e.textContent)),t.value&&t.value.options&&e._tippy.setProps(t.value.options))},unmounted(e){e._tippy&&e._tippy.destroy()}};function mXe(e){if(!(e.reference.clientWidth<e.reference.scrollWidth||e.reference.clientHeight<e.reference.scrollHeight))return!1}function RW(e){if(e===null)return"";let t=oXe(e,{target:"_blank",validate:{url:r=>/^https?:\/\//.test(r)}});return t=`<div style='word-break: break-word;'>${t}</div>`,t}const yXe=["content"],gXe={key:0,class:"flex flex-shrink-0 items-center border-b border-solid border-gray-600 px-8 h-48 overflow-hidden"},vXe={class:"flex-grow text-lg py-16 pl-8 min-w-0",tabIndex:"0"},bXe={key:1},wXe={key:0,class:"flex"},_Xe={key:1,class:"p-8 flex-grow overflow-y-auto"},SXe=["innerHTML"],xXe={key:2,class:"px-8 py-16 border-t border-gray-400 default-focus-style"},MXe=Wt({__name:"panel-screen",props:{header:{type:Boolean,default:!0},content:{type:Boolean,default:!0},footer:{type:Boolean,default:!1},panel:{type:Object,required:!0},screenId:{type:String,required:!1}},setup(e,{expose:t}){const{t:r}=Xr(),i=Vy(),s=dE(),n=vs("iApi"),o=Se();t({el:o});const a=e,l=Bt(()=>n?.fixture.get("appbar")?s.temporary:[]),u=Bt(()=>i.mobileView),c=Bt(()=>i.reorderable),p=()=>!u.value&&!a.panel.teleport,f=g=>{a.panel.move(g),g==="left"&&pc(()=>{(o.value?.querySelector(".move-left")).focus()})},m=Bt(()=>a.screenId?a.panel.screens[a.screenId][n?.$i18n.locale.value??"en"]:null);return wn(()=>{o.value?.addEventListener("blur",()=>{o.value._tippy.hide()}),o.value?.addEventListener("keyup",g=>{g.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()})}),dc(()=>{o.value?.removeEventListener("blur",()=>{o.value._tippy.hide()}),o.value?.removeEventListener("keyup",g=>{g.key==="Tab"&&o.value?.matches(":focus")&&o.value._tippy.show()})}),(g,b)=>{const w=Vi("back"),S=Vi("panel-options-menu"),M=Vi("left"),x=Vi("right"),_=Vi("pin"),I=Vi("expand"),E=Vi("minimize"),A=Vi("close"),C=br("truncate"),O=br("focus-item"),R=br("tippy");return vr((Ae(),Be("div",{class:"h-full flex flex-col items-stretch",content:`<div style='word-break: break-word;'>${at(r)(e.panel.alertName)+". "+at(r)("panels.access")}</div>`,ref_key:"el",ref:o},[e.header?(Ae(),Be("header",gXe,[jt(w,{class:wi(e.panel.teleport?"display-none":"block sm:display-none"),onClick:b[0]||(b[0]=D=>e.panel.close())},null,8,["class"]),vr((Ae(),Be("h2",vXe,[g.$slots.header?ku(g.$slots,"header",{key:0}):(Ae(),Be("div",bXe,Or(at(r)(e.panel.alertName)),1))])),[[C]]),g.$slots.controls?(Ae(),Vr(S,{key:0},{default:Bi(()=>[ku(g.$slots,"controls")]),_:3})):Zr("",!0),Te("div",{class:wi(e.panel.teleport?"flex":"display-none sm:flex")},[e.panel.teleport?Zr("",!0):(Ae(),Be("div",wXe,[c.value?(Ae(),Vr(M,{key:0,onClick:b[1]||(b[1]=D=>f("left")),active:!e.panel.isLeftMostPanel},null,8,["active"])):Zr("",!0),c.value?(Ae(),Vr(x,{key:1,onClick:b[2]||(b[2]=D=>f("right")),active:!e.panel.isRightMostPanel},null,8,["active"])):Zr("",!0),jt(_,{onClick:b[3]||(b[3]=D=>e.panel.pin()),active:e.panel.isPinned},null,8,["active"]),e.panel.controls&&e.panel.controls.expand?(Ae(),Vr(I,{key:2,onClick:b[4]||(b[4]=D=>e.panel.expand()),active:e.panel.expanded},null,8,["active"])):Zr("",!0)])),e.panel.button&&l.value?.includes(e.panel.id)?(Ae(),Vr(E,{key:1,onClick:b[5]||(b[5]=D=>e.panel.minimize())})):Zr("",!0),jt(A,{onClick:b[6]||(b[6]=D=>e.panel.close())})],2)])):Zr("",!0),e.content?(Ae(),Be("div",_Xe,[g.$slots.content?ku(g.$slots,"content",{key:0}):m.value?(Ae(),Be("div",{key:1,innerHTML:m.value.innerHTML},null,8,SXe)):Zr("",!0)])):Zr("",!0),e.footer?vr((Ae(),Be("div",xXe,[ku(g.$slots,"footer")])),[[O]]):Zr("",!0)],8,yXe)),[[R,{trigger:"manual",onShow:p,allowHTML:!0,maxWidth:e.panel.style["flex-basis"]??350,popperOptions:{placement:"top",modifiers:[{name:"preventOverflow",options:{altAxis:!0}},{name:"flip",options:{fallbackPlacements:["top"]}}]}}]])}}}),TXe={class:"relative"},IXe=["content","aria-label"],EXe=["transform"],AXe=Wt({__name:"pin",props:{active:Boolean},setup(e){const{t}=Xr();return(r,i)=>{const s=br("tippy");return Ae(),Be("div",TXe,[vr((Ae(),Be("button",{type:"button",class:wi(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:at(t)(e.active?"panels.controls.unpin":"panels.controls.pin"),"aria-label":at(t)(e.active?"panels.controls.unpin":"panels.controls.pin")},[(Ae(),Be("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",transform:`rotate(${e.active?30:0})`},i[0]||(i[0]=[Te("path",{d:"M298.028 214.267L285.793 96H328c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v48c0 13.255 10.745 24 24 24h42.207L85.972 214.267C37.465 236.82 0 277.261 0 328c0 13.255 10.745 24 24 24h136v104.007c0 1.242.289 2.467.845 3.578l24 48c2.941 5.882 11.364 5.893 14.311 0l24-48a8.008 8.008 0 0 0 .845-3.578V352h136c13.255 0 24-10.745 24-24-.001-51.183-37.983-91.42-85.973-113.733z"},null,-1)]),8,EXe))],10,IXe)),[[s,{placement:"bottom",hideOnClick:!1}]])])}}}),$Xe={class:"relative"},CXe=["content","aria-label"],OXe=Wt({__name:"close",props:{active:Boolean},setup(e){const{t}=Xr();return(r,i)=>{const s=br("tippy");return Ae(),Be("div",$Xe,[vr((Ae(),Be("button",{type:"button",class:wi(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:at(t)("panels.controls.close"),"aria-label":at(t)("panels.controls.close")},i[0]||(i[0]=[Te("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[Te("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1)]),10,CXe)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),PXe={class:"relative"},RXe=["content","aria-label"],LXe=Wt({__name:"back",props:{active:Boolean},setup(e){const{t}=Xr();return(r,i)=>{const s=br("tippy");return Ae(),Be("div",PXe,[vr((Ae(),Be("button",{type:"button",class:wi(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:at(t)("panels.controls.back"),"aria-label":at(t)("panels.controls.back")},i[0]||(i[0]=[Te("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-16 h-16",viewBox:"0 0 16 16"},[Te("path",{d:"M20.485784919653916,7.578491965389372h-14.170000000000005l3.5800000000000054,-3.589999999999997l-1.409999999999993,-1.4099999999999984l-6.000000000000008,6.0000000000000275l6.000000000000008,6l1.409999999999993,-1.4100000000000001l-3.58,-3.59h14.170000000000007Z",transform:"matrix(0.865803 0 0 0.865803 -1.99071 0.638058)"})],-1)]),10,RXe)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),kXe={class:"w-32 h-32"},NXe=["content"],DXe={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},FXe={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},jXe=Wt({__name:"expand",props:{active:Boolean},setup(e){const{t}=Xr();return(r,i)=>{const s=br("tippy");return Ae(),Be("div",kXe,[vr((Ae(),Be("button",{type:"button",class:"text-gray-500 hover:text-black focus:text-black w-full h-full flex justify-center items-center",content:at(t)(`panels.controls.${e.active?"collapse":"expand"}`)},[e.active?(Ae(),Be("svg",FXe,i[1]||(i[1]=[Te("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Te("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Te("path",{d:"M8 19h3v3h2v-3h3l-4-4-4 4zm8-15h-3V1h-2v3H8l4 4 4-4zM4 9v2h16V9H4z"},null,-1),Te("path",{d:"M4 12h16v2H4z"},null,-1)]))):(Ae(),Be("svg",DXe,i[0]||(i[0]=[Te("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Te("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),Te("path",{d:"M4 20h16v2H4zM4 2h16v2H4zm9 7h3l-4-4-4 4h3v6H8l4 4 4-4h-3z"},null,-1)])))],8,NXe)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale",hideOnClick:!1}]])])}}}),VXe={class:"relative"},UXe=["content","aria-label"],zXe=Wt({__name:"minimize",props:{active:Boolean},setup(e){const{t}=Xr();return(r,i)=>{const s=br("tippy");return Ae(),Be("div",VXe,[vr((Ae(),Be("button",{type:"button",class:wi(["text-gray-500 hover:text-black focus:text-black p-6",{"text-gray-700":e.active}]),content:at(t)("panels.controls.minimize"),"aria-label":at(t)("panels.controls.minimize")},i[0]||(i[0]=[Te("svg",{class:"fill-current w-20 h-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[Te("path",{d:"M0 0h24v24H0V0z",fill:"none"}),Te("path",{d:"M6 19h12v2H6z"})],-1)]),10,UXe)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),GXe={class:"relative"},BXe=["content","aria-label"],qXe=Wt({__name:"right",props:{active:Boolean},setup(e){const{t}=Xr();return(r,i)=>{const s=br("tippy");return Ae(),Be("div",GXe,[vr((Ae(),Be("button",{type:"button",class:wi(["p-8",{"text-gray-500 hover:text-black focus:text-black":e.active,"text-gray-300":!e.active}]),content:at(t)("panels.controls.moveRight"),"aria-label":at(t)("panels.controls.moveRight")},i[0]||(i[0]=[Te("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16"},[Te("path",{d:"M 8.59 16.34 L 13.17 11.75 L 8.59 7.16 L 10 5.75 L 16 11.75 L 10 17.75 Z"})],-1)]),10,BXe)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),HXe={class:"relative"},WXe=["content","aria-label"],JXe=Wt({__name:"left",props:{active:Boolean},setup(e){const{t}=Xr();return(r,i)=>{const s=br("tippy");return Ae(),Be("div",HXe,[vr((Ae(),Be("button",{type:"button",class:wi(["p-8 move-left",{"text-gray-500 hover:text-black focus:text-black":e.active,"text-gray-300":!e.active}]),content:at(t)("panels.controls.moveLeft"),"aria-label":at(t)("panels.controls.moveLeft")},i[0]||(i[0]=[Te("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"4 4 16 16"},[Te("path",{d:"M 15.41 16.09 L 10.83 11.5 L 15.41 6.91 L 14 5.5 L 8 11.5 L 14 17.5 Z"})],-1)]),10,WXe)),[[s,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}}}),ZXe=Wt({__name:"panel-options-menu",setup(e){const{t}=Xr();return(r,i)=>(Ae(),Vr(R9,{class:"flex",tooltip:at(t)("panels.controls.optionsMenu"),popperOptions:{strategy:"fixed"},position:"bottom-end"},{header:Bi(()=>i[0]||(i[0]=[Te("div",{class:"p-6"},[Te("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20"},[Te("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})])],-1)])),default:Bi(()=>[ku(r.$slots,"default",{},void 0,!0)]),_:3},8,["tooltip"]))}}),YXe=qh(ZXe,[["__scopeId","data-v-5a275ac2"]]),KXe={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},XXe={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},QXe=Wt({__name:"fullscreen-nav",setup(e){const{t}=Xr(),r=vs("iApi"),i=()=>{r.toggleFullscreen()};return(s,n)=>{const o=Vi("mapnav-button");return Ae(),Vr(o,{onClickFunction:i,tooltip:at(t)("mapnav.fullscreen")},{default:Bi(()=>[at(r).isFullscreen?(Ae(),Be("svg",KXe,n[0]||(n[0]=[Te("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Te("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},null,-1)]))):(Ae(),Be("svg",XXe,n[1]||(n[1]=[Te("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),Te("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},null,-1)])))]),_:1},8,["tooltip"])}}}),eQe=Wt({__name:"geolocator-nav",setup(e){const{t}=Xr(),r=vs("iApi");let i=Fs([]);const s=async()=>{if(i.length)n(i);else{const a=await o({maximumAge:1/0,timeout:5e3}).catch(l=>{l.code===GeolocationPositionError.PERMISSION_DENIED?r.notify.show(ta.ERROR,t("mapnav.geolocator.error.permission")):r.notify.show(ta.ERROR,t("mapnav.geolocator.error.internal"))});a&&(i=[a.coords.longitude,a.coords.latitude],n(i))}},n=a=>{let l=new jn("geolocation",a,$t.latLongSR(),!0);r.geo.map.zoomMapTo(l)},o=a=>new Promise((l,u)=>navigator.geolocation.getCurrentPosition(l,u,a));return(a,l)=>{const u=Vi("mapnav-button");return Ae(),Vr(u,{onClickFunction:s,tooltip:at(t)("mapnav.geolocator")},{default:Bi(()=>l[0]||(l[0]=[Te("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[Te("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})],-1)])),_:1},8,["tooltip"])}}}),tQe=Wt({__name:"home-nav",setup(e){const{t}=Xr(),r=vs("iApi"),i=()=>{const s=r.geo.map.getExtentSet();r.geo.map.zoomMapTo(s.fullExtent)};return(s,n)=>{const o=Vi("mapnav-button");return Ae(),Vr(o,{onClickFunction:i,tooltip:at(t)("mapnav.home")},{default:Bi(()=>n[0]||(n[0]=[Te("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[Te("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),Te("path",{d:"M0 0h24v24H0z",fill:"none"})],-1)])),_:1},8,["tooltip"])}}}),rQe={class:"relative w-32 h-32 text-gray-600 hover:text-black",tabindex:"-1"},iQe=["content","aria-label"],sQe=Wt({__name:"button",props:{onClickFunction:{type:Function,required:!0},tooltip:{type:[String,Boolean],default:!1}},setup(e){return(t,r)=>{const i=br("focus-item"),s=br("tippy");return Ae(),Be("div",rQe,[vr((Ae(),Be("button",{type:"button",class:"w-full h-full default-focus-style focus:outline-none",onClick:r[0]||(r[0]=n=>e.onClickFunction()),content:e.tooltip,"aria-label":typeof e.tooltip=="string"?e.tooltip:""},[ku(t.$slots,"default")],8,iQe)),[[i],[s,{placement:"left"}]])])}}}),nQe={class:"relative",tabindex:"-1"},oQe=["aria-label","content"],aQe=Wt({__name:"button",props:{onClickFunction:{type:Function,required:!0},id:{type:String,required:!0},tooltip:{type:[String,Boolean],default:!1}},setup(e){const t=vs("iApi"),r=e,i=()=>t?.event.emit(rt.APPBAR_BUTTON_CLICK,r.id);return(s,n)=>{const o=br("focus-item"),a=br("tippy");return Ae(),Be("div",nQe,[vr((Ae(),Be("button",{type:"button",class:"py-6 w-full h-full",onClick:n[0]||(n[0]=()=>{e.onClickFunction(),i()}),"aria-label":String(e.tooltip),content:`<div style='word-break: break-word;'>${e.tooltip}</div>`},[ku(s.$slots,"default",{},void 0,!0)],8,oQe)),[[o],[a,{allowHTML:!0,placement:"right"}]])])}}}),lQe=qh(aQe,[["__scopeId","data-v-4e07c09f"]]),uQe=ui("areas-of-interest",()=>({areas:Se([])})),cQe=ui("export",()=>{const e=Se({title:!0,map:!0,mapElements:!0,legend:!0,footnote:!0,timestamp:!0}),t=Se("");function r(i){if(e.value[i.name]!==void 0){const s=e.value[i.name];e.value[i.name]=i.selected!==void 0?i.selected:!s}}return{componentSelectedState:e,fileName:t,toggleSelected:r}}),hQe=ui("extentguard",()=>{const e=Se(!1);function t(l){e.value=l}const r=Se(!1);function i(l){r.value=l}const s=Se(!1);function n(l){s.value=l}const o=Se([]);function a(l){o.value=l}return{active:e,setActive:t,enforcing:r,setEnforcing:i,alwaysOn:s,setAlwaysOn:n,extentSetIds:o,setExtentSetIds:a}}),H$=function e(t){function r(s,n,o){var a,l={};if(Array.isArray(s))return s.concat(n);for(a in s)l[o?a.toLowerCase():a]=s[a];for(a in n){var u=o?a.toLowerCase():a,c=n[a];l[u]=u in l&&typeof c=="object"?r(l[u],c,u=="headers"):c}return l}function i(s,n,o,a,l){var u=typeof s!="string"?(n=s).url:s,c={config:n},p=r(t,n),f={};a=a||p.data,(p.transformRequest||[]).map(function(m){a=m(a,p.headers)||a}),p.auth&&(f.authorization=p.auth),a&&typeof a=="object"&&typeof a.append!="function"&&typeof a.text!="function"&&(a=JSON.stringify(a),f["content-type"]="application/json");try{f[p.xsrfHeaderName]=decodeURIComponent(document.cookie.match(RegExp("(^|; )"+p.xsrfCookieName+"=([^;]*)"))[2])}catch{}return p.baseURL&&(u=u.replace(/^(?!.*\/\/)\/?/,p.baseURL+"/")),p.params&&(u+=(~u.indexOf("?")?"&":"?")+(p.paramsSerializer?p.paramsSerializer(p.params):new URLSearchParams(p.params))),(p.fetch||fetch)(u,{method:(o||p.method||"get").toUpperCase(),body:a,headers:r(p.headers,f,!0),credentials:p.withCredentials?"include":l}).then(function(m){for(var g in m)typeof m[g]!="function"&&(c[g]=m[g]);return p.responseType=="stream"?(c.data=m.body,c):m[p.responseType||"text"]().then(function(b){c.data=b,c.data=JSON.parse(b)}).catch(Object).then(function(){return(p.validateStatus?p.validateStatus(m.status):m.ok)?c:Promise.reject(c)})})}return t=t||{},i.request=i,i.get=function(s,n){return i(s,n,"get")},i.delete=function(s,n){return i(s,n,"delete")},i.head=function(s,n){return i(s,n,"head")},i.options=function(s,n){return i(s,n,"options")},i.post=function(s,n,o){return i(s,o,"post",n)},i.put=function(s,n,o){return i(s,o,"put",n)},i.patch=function(s,n,o){return i(s,o,"patch",n)},i.all=Promise.all.bind(Promise),i.spread=function(s){return s.apply.bind(s,s)},i.CancelToken=typeof AbortController=="function"?AbortController:Object,i.defaults=t,i.create=e,i}(),pQe={A:10,B:12,C:11,E:13,G:24,H:24,J:24,K:35,L:35,M:35,N:35,P:35,R:46,S:47,T:48,V:59,X:[62,61],Y:60},DC={en:{},fr:{}};class dQe{list={};listFetched=!1;constructor(t,r){H$.get(r).then(i=>{i.data.definitions.forEach(s=>DC[t][s.code]=s.description),Object.keys(DC[t]).forEach(s=>{this.list[s]=DC[t][s]}),this.listFetched=!0})}fsaToProvinces(t){const r={};let i=pQe[t.substring(0,1).toUpperCase()];return typeof i=="number"&&(i=[i]),i.forEach(s=>{r[s]=this.list[s]}),r}}function fQe(e,t){return new dQe(e,t)}const CM={en:{ADDRESS:"Street Address",FSA:"Forward Sortation Area",NTS:"National Topographic System",COORD:"Latitude/Longitude",SCALE:"Scale"},fr:{ADDRESS:"Adresse Municipale",FSA:"RÃ©gion De Tri D'Acheminement",NTS:"SystÃ¨me National De RÃ©fÃ©rence Cartographique",COORD:"Latitude/Longitude",SCALE:"Ã‰chelle"}};class mQe{allTypes={};validTypes={};filterComplete=!1;typesFetched=!1;constructor(t,r){H$.get(r).then(i=>{i.data.definitions.forEach(s=>{CM[t][s.code]=s.term.split(`${s.code}-`)[1]}),Object.keys(CM[t]).forEach(s=>{this.allTypes[s]=CM[t][s],this.validTypes[s]=CM[t][s]}),this.typesFetched=!0})}filterValidTypes(t){if(this.filterComplete)return this.validTypes;if(t=typeof t=="string"?[t]:t,t&&t.length>0)for(const r of t)delete this.validTypes[r];return this.filterComplete=!0,this.validTypes}}function yQe(e,t){return new mQe(e,t)}function gQe(e,t){const r=/^[-+]?([1-8]?\d(\.\d+)?|90(\.0+)?)(\s*[,|;\s]\s*)[-+]?(180(\.0+)?|((1[0-7]\d)|([1-9]?\d))(\.\d+)?)[*]$/,i=/^\d{2,3}[A-P]/,s=/^[ABCEGHJKLMNPRSTVXY]\d[A-Z]/;if(r.test(t)&&!e.disabledSearchTypes.includes("LAT/LNG")){const n=t.slice(0,-1);return new vQe(e,n)}else return s.test(t)&&!e.disabledSearchTypes.includes("FSA")?new bQe(e,t):i.test(t)&&!e.disabledSearchTypes.includes("NTS")?new wQe(e,t.substring(0,6).toUpperCase()):new _Qe(e,t)}class W${config;query;failedServs=[];results=[];onComplete;latLongResult;featureResults=[];resultType="geoname";constructor(t,r){this.query=r,this.config=t}search(){return this.jsonRequest(this.getUrl()).then(t=>this.normalizeNameItems(t.items)).catch(()=>(console.error("Geoname service failed"),this.failedServs.push("geoname"),this.normalizeNameItems([])))}getUrl(t,r,i,s){let n="";return t?n=this.config.geoLocateUrl+"?q="+this.query:(i&&s?n=`${this.config.geoNameUrl}?lat=${i}&lon=${s}&num=${this.config.maxResults}`:n=`${this.config.geoNameUrl}?q=${this.query}&num=${this.config.maxResults}`,this.config.categories.length>0&&(n+=`&concise=${this.config.categories.join(",")}`),this.config.officialOnly&&(n+="&category=O")),n}normalizeNameItems(t){return t.filter(r=>this.config.types.validTypes[r.concise.code]).map(r=>({name:r.name,location:r.location,province:this.config.provinces.list[r.province.code],type:this.config.types.allTypes[r.concise.code],LatLon:{lat:r.latitude,lon:r.longitude},bbox:r.bbox,order:this.config.sortOrder.indexOf(r.concise.code)>=0?this.config.sortOrder.indexOf(r.concise.code):this.config.sortOrder.length}))}jsonRequest(t){return new Promise((r,i)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="json",s.onload=()=>{if(s.status===200){const n=typeof s.response=="string"?JSON.parse(s.response):s.response;r(n)}else i("Could not load results from remote service.")},s.send()})}locateByQuery(){return this.jsonRequest(this.getUrl(!0,void 0))}nameByLatLon(t,r,i){return this.jsonRequest(this.getUrl(!1,i,t,r)).then(s=>this.normalizeNameItems(s.items)).catch(()=>(console.error("LatLon service failed"),this.failedServs.push("geoname"),this.normalizeNameItems([])))}}class vQe extends W${constructor(t,r){super(t,r),this.resultType="latlong";const s=r.split(/[\s|,|;|]/).filter(a=>!isNaN(a)&&a!=="").map(a=>parseFloat(a)),n=.015,o=[s[1]-n,s[0]-n,s[1]+n,s[0]+n];this.latLongResult={name:`${s[0]},${s[1]}`,location:{latitude:s[0],longitude:s[1]},type:"Latitude/Longitude",position:[s[1],s[0]],bbox:o},this.onComplete=new Promise((a,l)=>{this.nameByLatLon(s[0],s[1]).then(u=>{u?(this.results=u,a(this)):l("Given lat lon coordinates cannot be found")})})}}class bQe extends W${constructor(t,r){r=r.substring(0,3).toUpperCase(),super(t,r),this.resultType="fsa",this.onComplete=new Promise(i=>{this.formatLocationResult().then(s=>{s?(this.featureResults.push(s),this.nameByLatLon(s.LatLon.lat,s.LatLon.lon,Object.keys(s._provinces).map(n=>parseInt(n))).then(n=>{this.results=n,i(this)})):(console.log("FSA code given cannot be found."),i(this))})})}formatLocationResult(){return this.locateByQuery().then(t=>{if(t.length===1&&this.query){const r=this.config.provinces.fsaToProvinces(this.query);return{fsa:this.query,code:"FSA",desc:this.config.types.allTypes.FSA,province:Object.keys(r).map(i=>r[i]).join(","),_provinces:r,LatLon:{lat:t[0].geometry.coordinates[1],lon:t[0].geometry.coordinates[0]}}}}).catch(()=>{console.error("FSA service failed"),this.failedServs.push("geolocation")})}}class wQe extends W${unitName;unit;mapSheets=[];constructor(t,r){super(t,r),this.resultType="nts",r=isNaN(parseInt(r[2]))?"0"+r:r,this.unitName=r,this.onComplete=new Promise(i=>{this.locateByQuery().then(s=>{if(s.length>0&&this.query){const n=this.locateToResult(s);this.unit=n[0],this.mapSheets=n,this.featureResults.push(this.unit),this.nameByLatLon(this.unit.LatLon.lat,this.unit.LatLon.lon).then(o=>{this.results=o,i(this)})}else console.log("Given NTS code not found"),i(this)}).catch(()=>{console.error("NTS service failed"),this.failedServs.push("geolocation"),i(this)})})}locateToResult(t){return t.map(i=>{const s=i.title.split(" ");return{nts:s.shift()||"",location:s.join(" "),code:"NTS",desc:this.config.types.allTypes.NTS,LatLon:{lat:i.geometry.coordinates[1],lon:i.geometry.coordinates[0]},bbox:i.bbox}})}equals(t){return this.unitName===t.unitName}}class _Qe extends W${constructor(t,r){r=encodeURIComponent(r.trim()),super(t,r),this.resultType="address",this.onComplete=new Promise(i=>{this.locateByQuery().then(s=>{this.featureResults=this.locateToResult(s),this.search().then(n=>{this.results=n,i(this)})}).catch(()=>{this.failedServs.push("geolocation"),console.error("Address service failed"),this.search().then(s=>{this.results=s,i(this)})})})}locateToResult(t){return this.config.categories.length>0&&!this.config.categories.includes("ADDR")?[]:t.filter(i=>i.type?.includes("Street")).map(i=>{const[s,n,o]=i.title.split(", ");return{name:s,city:n.split(" Of ").pop(),province:o,desc:this.config.types.allTypes.ADDRESS,LatLon:{lat:i.geometry.coordinates[1],lon:i.geometry.coordinates[0]}}})}}const LW="https://geogratis.gc.ca/services/geolocation/@{language}/locate",kW="https://geogratis.gc.ca/services/geoname/@{language}/geonames.json",NW="https://geogratis.gc.ca/services/geoname/@{language}/codes/province.json",DW="https://geogratis.gc.ca/services/geoname/@{language}/codes/concise.json",SQe={10:"NL",11:"PE",12:"NS",13:"NB",24:"QC",35:"ON",46:"MB",47:"SK",48:"AB",59:"BC",60:"YU",61:"NT",62:"NU",72:"UF",73:"IW"};class FW{config;constructor(t,r){let i,s,n,o;const a=r?.serviceUrls;a?(i=a.geoLocation?a.geoLocation:LW,s=a.geoNames?a.geoNames:kW,n=a.geoProvince?a.geoProvince:NW,o=a.geoTypes?a.geoTypes:DW):(i=LW,s=kW,n=NW,o=DW),i=i.replace("@{language}",t),s=s.replace("@{language}",t),n=n.replace("@{language}",t),o=o.replace("@{language}",t);const l=r?.settings;let u,c,p,f,m;l?(u=l.categories?l.categories:[],c=l.sortOrder?l.sortOrder:[],p=l.disabledSearchTypes?l.disabledSearchTypes:[],f=l.maxResults>0?l.maxResults:100,m=!!l.officialOnly):(u=[],c=[],p=[],f=100,m=!1),this.config={language:t,geoNameUrl:s,geoLocateUrl:i,types:yQe(t,o),provinces:fQe(t,n),categories:u,sortOrder:c,disabledSearchTypes:p,maxResults:f,officialOnly:m},this.config.types.filterValidTypes(r?.excludeTypes),this._provinceList=[],this._typeList=[],this._excludedTypes=r?.excludeTypes||[]}get provinceList(){return this._provinceList}get typeList(){return this._typeList}set provinceList(t){this._provinceList=t}set typeList(t){this._typeList=t}levenshteinDistance(t,r){r=r.toLowerCase().trim();const i=decodeURI(t.query.toLowerCase().replace("*","")),s=[];for(let n=0;n<=r.length;n++){s[n]=[n];for(let o=1;o<=i.length;o++)s[n][o]=n===0?o:Math.min(s[n][o-1]+1,s[n-1][o]+.2,s[n-1][o-1]+(i[o-1]===r[n-1]?0:1))}return s[r.length][i.length]}findProvinceObj(t){return this.provinceList.find(r=>r.name===t)}query(t){return gQe(this.config,t.toUpperCase()).onComplete.then(r=>{let i=[];r.featureResults.length>0?r.resultType==="fsa"?i=r.featureResults.map(n=>({name:n.fsa,bbox:[n.LatLon.lon+.02,n.LatLon.lat-.02,n.LatLon.lon-.02,n.LatLon.lat+.02],type:n.desc,position:[n.LatLon.lon,n.LatLon.lat],location:{latitude:n.LatLon.lat,longitude:n.LatLon.lon,province:this.findProvinceObj(n.province)},order:-1})):r.resultType==="nts"?i=r.featureResults.map(n=>({name:n.nts,bbox:n.bbox??[n.LatLon.lon+.02,n.LatLon.lat-.02,n.LatLon.lon-.02,n.LatLon.lat+.02],type:n.desc,position:[n.LatLon.lon,n.LatLon.lat],location:{city:n.location,latitude:n.LatLon.lat,longitude:n.LatLon.lon},order:-1})):r.resultType==="address"&&(i=r.featureResults.map(n=>({name:n.name,bbox:[n.LatLon.lon+.002,n.LatLon.lat-.002,n.LatLon.lon-.002,n.LatLon.lat+.002],type:n.desc,position:[n.LatLon.lon,n.LatLon.lat],location:{city:n.city,latitude:n.LatLon.lat,longitude:n.LatLon.lon,province:this.findProvinceObj(n.province)},order:this.config.sortOrder.indexOf("ADDR")>=0?this.config.sortOrder.indexOf("ADDR"):this.config.sortOrder.length})),this.config.sortOrder.length>0&&(i=i.sort((n,o)=>this.levenshteinDistance(r,n.name)>this.levenshteinDistance(r,o.name)?1:-1))):r.resultType==="latlong"&&(i=[r.latLongResult],i[0].order=-1);const s=r.results.map(n=>({name:n.name,bbox:n.bbox,type:n.type,position:[n.LatLon.lon,n.LatLon.lat],location:{city:n.location,latitude:n.LatLon.lat,longitude:n.LatLon.lon,province:this.findProvinceObj(n.province)},order:n.order}));return{results:i.concat(s).slice(0,this.config.maxResults).sort((n,o)=>this.config.sortOrder.length>0?n.order>o.order?1:-1:this.levenshteinDistance(r,n.name)>this.levenshteinDistance(r,o.name)?1:-1),failedServs:r.failedServs}})}fetchProvinces(){return new Promise(t=>{const r=setInterval(()=>{if(this.config.provinces.listFetched){clearInterval(r);const i=[],s={code:-1,abbr:"...",name:"..."};i.push(s);const n=this.config.provinces.list;for(const o in n)i.push({code:o,abbr:SQe[o],name:n[o]});this.provinceList=i,t(this.provinceList)}})})}fetchTypes(){return new Promise(t=>{const r=setInterval(()=>{if(this.config.types.typesFetched){clearInterval(r);const i=[],s={code:-1,name:"..."};i.push(s);const n=this.config.types.allTypes;for(const o in n)this._excludedTypes.includes(o)||i.push({code:o,name:n[o]});this.typeList=i,t(this.typeList)}},250)})}}function jW(e,t,r){return e&&t.extent&&(r=r.filter(i=>i.bbox[0]<=t.extent.xmax&&i.bbox[1]<=t.extent.ymax&&i.bbox[2]>=t.extent.xmin&&i.bbox[3]>=t.extent.ymin)),t.province&&t.province!=="..."&&(r=r.filter(i=>i.location.province?.name&&i.location.province.name===t.province)),t.type&&t.type!=="..."&&(r=r.filter(i=>i.type===t.type)),r}const xQe=ui("geosearch",()=>{const e=Se(new FW("en",void 0)),t=Se({type:"",province:"",extent:void 0}),r=Se(!1),i=Se(""),s=Se(""),n=Se(""),o=Se([]),a=Se([]),l=Se(!1),u=Se([]),c=Bt(()=>new Promise(x=>{e.value.fetchProvinces().then(_=>{_.sort((I,E)=>I.name>E.name?1:-1),x(_)})})),p=Bt(()=>new Promise(x=>{e.value.fetchTypes().then(_=>{_.sort((I,E)=>I.name>E.name?1:-1),x(_)})}));function f(x,_){e.value=new FW(x,_)}function m(x){l.value=!0;const _=i.value.replace(/["!*$+?^{}()|[\]\\]/g,"").trim();if(!_)o.value=[],a.value=[],l.value=!1;else if(_&&_!==n.value||x){const I=setInterval(()=>{e.value.config.provinces.listFetched&&e.value.config.types.typesFetched&&(clearInterval(I),e.value.query(`${_}*`).then(E=>{u.value=E.failedServs,n.value=_,a.value=E.results;const A=jW(r.value,t.value,a.value);o.value=A||[],l.value=!1}))},250)}else{const I=jW(r.value,t.value,a.value);o.value=I||[],l.value=!1}}function g(x){t.value.province=typeof x.province>"u"?"":x.province,m(x.forceReRun)}function b(x){t.value.type=typeof x.type>"u"?"":x.type,m(x.forceReRun)}function w(x){n.value=i.value.replace(/["!*$+?^{}()|[\]\\]/g,"").trim(),i.value=x,m()}function S(x){const _={a:"Ã Ã¡Ã¢Ã£Ã¤Ã¥ÄÄƒÄ…ÇŽÈÈƒÈ§áº¡áº£áº¥áº§áº©áº«áº­áº¯áº±áº³áºµáº·",b:"á¸ƒÉ“á¸…á¸‡",c:"Ã§Ä‡Ä‰Ä‹Ä",d:"Äá¸‹á¸á¸á¸‘á¸“",e:"Ã¨Ã©ÃªÃ«Ä“Ä•Ä—Ä™Ä›È…È‡áº¹áº»áº½áº¿á»á»ƒá»…á»‡",f:"Æ’á¸Ÿ",g:"ÄÄŸÄ¡Ä£Ç§Çµá¸¡",h:"Ä¥ÈŸá¸£á¸¥á¸§á¸©á¸«áº–",i:"Ã¬Ã­Ã®Ã¯Ä©Ä«Ä­Ä¯Ä±È‰È‹á»‹á»‰Ä©",j:"ÄµÇ°É‰",k:"Ä·Ä¸Æ™á¸³á¸µ",l:"ÄºÄ¼Ä¾Å€Å‚á¸·á¸¹á¸»á¸½",m:"á¸¿á¹á¹ƒ",n:"Ã±Å„Å†ÅˆÅ‰Å‹Ç¹á¹…á¹‡á¹‰á¹‹",o:"Ã²Ã³Ã´ÃµÃ¶ÅÅÅ‘Æ¡Ç’Ç«Ç­ÈÈÈ¯á»á»á»‘á»“á»•á»—á»™á»›á»á»Ÿá»¡á»£",p:"á¹•á¹—",r:"Å•Å—Å™È‘È“á¹›á¹á¹Ÿ",s:"Å›ÅÅŸÅ¡È™á¹¡á¹£á¹¥á¹§á¹©",t:"Å£Å¥Å§È›á¹«á¹­á¹¯á¹±áº—",u:"Ã¹ÃºÃ»Ã¼Å©Å«Å­Å¯Å±Å³Æ°Ç”Ç–Ç˜ÇšÇœÈ•È—á»¥á»§á»©á»«á»­á»¯á»±",v:"á¹½á¹¿",w:"áºáºƒÅµáº…áº‡áº‰áº‹",x:"áº‹áº",y:"á»³Ã½Å·Ã¿á»¹È³áºáº™á»µá»·á»¹",z:"ÅºÅ¼Å¾áº‘áº“áº•"};x=x.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),s.value=Array.from(x).map(I=>Object.keys(_).includes(I)?"["+I+_[I]+"]":I.replace(/["$!*+?^{}()|[\]\\]/g,"").replace(/[.\\]/g,"\\$&").trim()).join("")}function M(x){if(x.visible!==void 0&&(r.value=x.visible),x.extent.sr.wkid!==4326)throw new Error("an extent that was not projected to wkid 4326 was passed to the geosearch store");t.value.extent=x.extent,m()}return{GSservice:e,queryParams:t,resultsVisible:r,searchVal:i,searchRegex:s,lastSearchVal:n,searchResults:o,savedResults:a,loadingResults:l,failedServices:u,getProvinces:c,getTypes:p,initService:f,runQuery:m,setProvince:g,setType:b,setSearchTerm:w,setSearchRegex:S,setMapExtent:M}}),MQe=ui("help",()=>({location:Se("./help/")}));var yce=(e=>(e.Visibility="visibilityButton",e.Expand="expandButton",e))(yce||{}),nD=(e=>(e.Item="item",e.Placeholder="placeholder",e.Error="error",e))(nD||{});class gce extends qi{_uid;_name;_type;_children=[];_parent=void 0;_loadPromise;_hidden;_expanded;_visibility;_exclusive;_controls;_disabledControls;_lastVisible;_visibleChildren;constructor(t,r,i){super(t),this._uid=wv.sharedUtils.generateUUID(),this._name=r.name,this._type=r.type??"placeholder",this._parent=i,this._children=[],this._loadPromise=new zi,this._hidden=r.hidden??!1,this._expanded=r.expanded??!0,this._visibility=!0,this._exclusive=r.exclusive??!1,this._controls=r.controls?.slice()??["visibilityButton","expandButton"],this._disabledControls=r.disabledControls?.slice(),this._lastVisible,this._visibleChildren=[]}get uid(){return this._uid}get name(){return this._name}set name(t){this._name=t}get type(){return this._type}get children(){return this._children}set children(t){this._children=t}get parent(){return this._parent}set parent(t){this._parent=t}get loadPromise(){return this._loadPromise.getPromise()}get hidden(){return this._hidden}get expanded(){return this._expanded}get visibility(){return this._visibility}get exclusive(){return this._exclusive}controlAvailable(t){return this._disabledControls?.includes(t)?!1:this._controls?.includes(t)}setControl(t,r){r&&this._disabledControls?.includes(t)?(this._disabledControls=this._disabledControls.filter(i=>i!==t),this._controls?.push(t)):!r&&this._controls?.includes(t)&&(this._controls=this._controls.filter(i=>i!==t),this._disabledControls?.push(t))}toggleHidden(t){this._hidden=t??!this.hidden}toggleExpanded(t){this._expanded=t??!this.expanded}toggleVisibility(t,r=!0){if(this.visibility!==t){if(this._visibility=t??!this.visibility,!this.exclusive)this.visibility?this._visibleChildren.length>0?this._visibleChildren.forEach(i=>i.toggleVisibility(!0,!1)):this.children.forEach(i=>i.toggleVisibility(!0,!1)):this.children.forEach(i=>i.toggleVisibility(!1,!1));else if(this.visibility)if(this._lastVisible&&(!(this._lastVisible instanceof qp)||this._lastVisible.layerControlAvailable(Ii.Visibility)))this._lastVisible.toggleVisibility(!0);else{const i=this.children.find(s=>!(s instanceof qp)||s.layerControlAvailable(Ii.Visibility));i&&i.toggleVisibility(!0)}else this._lastVisible=this.children.find(i=>i.visibility),this._lastVisible?.toggleVisibility(!1);this.parent&&r&&this.parent.checkVisibility(this)}}checkVisibilityRules(){this.parent&&!this.parent.visibility?this.toggleVisibility(!1,!1):this.parent?.exclusive&&this.parent.children.some(r=>r.visibility&&r!==this&&r.type==="item")&&this.toggleVisibility(!1,!1)}checkVisibility(t){this instanceof qp&&!this.layerControlAvailable(Ii.Visibility)||(this.exclusive?t.visibility?(this.children.forEach(r=>{r.uid!==t.uid&&r.toggleVisibility(!1,!1)}),this._lastVisible=t,this._visibility=!0,this instanceof qp&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!0)):(this._visibility=!1,this instanceof qp&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!1),this._lastVisible=t):this.children.some(r=>r.visibility)?(this._visibility=!0,this._visibleChildren=this.children.filter(r=>r.visibility),this instanceof qp&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!0)):(this._visibility=!1,this._visibleChildren=[],this instanceof qp&&this.layer&&this.layer.layerExists&&(this.layer.visibility=!1)),this.parent&&this.parent.checkVisibility(this))}getConfig(){const t={name:this._name,hidden:this._hidden,expanded:this._expanded,exclusive:this._exclusive,controls:this._controls,disabledControls:this._disabledControls},r=[];return this.children.forEach(i=>{r.push(i.getConfig())}),this.exclusive?t.exclusiveVisibility=r:t.children=r,t}onAdded(){}onRemoved(){this.toggleVisibility(!1)}load(){this._type="item",this._loadPromise.resolveMe(),this.checkVisibilityRules()}reload(){this._type="placeholder",this._loadPromise=new zi}error(){this._type!=="error"&&(this._type="error",this._loadPromise.getPromise().catch(()=>{}),this._loadPromise.rejectMe(),this.checkVisibilityRules())}}class qp extends gce{_layerId;_layerIdx;_layerUid="";_isSublayer=!1;_layer;_layerInitVis;_layerRedrawing=!1;_layerOffscale=!1;_treeGrown=!1;_customSymbology=!1;_coverIcon;_description;_symbologyExpanded;_origLayerControls;_origLayerDisabledControls;_layerControls;_layerDisabledControls;_maxLines;_symbologyRenderStyle;_symbologyStack;handlers=[];constructor(t,r,i){super(t,r,i),this._type=nD.Placeholder,this._layerId=r.layerId,this._layerIdx=r.sublayerIndex,this._isSublayer=r.sublayerIndex!==void 0,this._layerControls=r.layerControls??[],this._origLayerControls=r.layerControls,this._layerDisabledControls=r.disabledLayerControls??[],this._origLayerDisabledControls=r.disabledLayerControls,this._layerRedrawing=!1,this._symbologyExpanded=r.symbologyExpanded||!1,r.coverIcon&&(this._coverIcon=r.coverIcon),r.description&&(this._description=r.description),this._symbologyRenderStyle=r.symbologyRenderStyle??"icons",this._customSymbology=!!r.symbologyStack,this._symbologyStack=r.symbologyStack?.map(s=>({uid:this.$iApi.geo.shared.generateUUID(),label:s.text,definitionClause:s.sqlQuery,imgUrl:s.image??"",drawPromise:Promise.resolve(),visibility:!0,lastVisibility:!0})),this._maxLines=r.maxLines&&[1,2,3,4,5,6].includes(r.maxLines)?r.maxLines:void 0}get parentLayerId(){return this._isSublayer?this._layerId.slice(0,this._layerId.length-`-${this._layerIdx}`.length):void 0}get layerId(){return this._layerId}get layerIdx(){return this._layerIdx}get isSublayer(){return this._isSublayer}get layerUid(){return this._layerUid}get layer(){return this._layer}set layer(t){this._layer=t,this._layerId=t.id,this._layerIdx=t.isSublayer?t.layerIdx:void 0,this._layerUid=t.uid,this._name=this._name||t.name,this._symbologyStack=this._customSymbology?this._symbologyStack:t.legend,this.updateLayerControls()}get layerOffscale(){return this._layerOffscale}set layerOffscale(t){this._layerOffscale=t}get layerRedrawing(){return this._layerRedrawing}set layerRedrawing(t){this._layerRedrawing=t}get coverIcon(){return this._coverIcon}set coverIcon(t){this._coverIcon=t}get description(){return this._description}set description(t){this._description=t}get symbologyExpanded(){return this._symbologyExpanded}get treeGrown(){return this._treeGrown}set treeGrown(t){this._treeGrown=t}get origLayerControls(){return this._origLayerControls}get origDisabledLayerControls(){return this._origLayerDisabledControls}set symbologyRenderStyle(t){this._symbologyRenderStyle=t}get symbologyRenderStyle(){return this._symbologyRenderStyle}set symbologyStack(t){this._symbologyStack=t}get symbologyStack(){return this._symbologyStack}get maxLines(){return this._maxLines}getConfig(){const t={layerId:this._layerId,sublayerIndex:this._layerIdx,layerControls:this._layerControls,disabledLayerControls:this._layerDisabledControls,symbologyExpanded:this._symbologyExpanded,coverIcon:this._coverIcon,description:this._description,maxLines:this._maxLines};return{...super.getConfig(),...t}}toggleVisibility(t,r=!0,i=!1){if(!(!this.layerControlAvailable(Ii.Visibility)&&!i)&&(super.toggleVisibility(t,r),this.layer&&this.layer.layerExists)){this.layer.visibility=this.visibility;const s=this._symbologyStack.some(n=>n.lastVisbility);this._symbologyStack.forEach(n=>{s||(n.lastVisbility=!0),n.visibility=this.visibility?n.lastVisbility:!1})}}toggleSymbology(t){return this._symbologyExpanded=t??!this._symbologyExpanded,this._symbologyExpanded}setSymbologyVisibility(t,r){this._symbologyStack.some(i=>((t===void 0||i.uid===t)&&(i.visibility=r,i.lastVisbility=r),t!==void 0&&i.uid===t))}load(t){const r=t instanceof K9?t:this.$iApi.geo.layer.getLayer(this._layerId??this._layerUid);r&&(this.layer=r,this._layerRedrawing=r.mapLayer&&r.drawState!==ho.UP_TO_DATE,r.loadPromise().then(()=>{this._layerInitVis=typeof this._layerInitVis<"u"?this._visibility:r.visibility,super.load(),this.toggleVisibility(this._layerInitVis,!0,!0),r.visibility||this.setSymbologyVisibility(void 0,!1),this.handlers.push(this.$iApi.event.on(rt.LAYER_VISIBILITYCHANGE,i=>{i.layer.uid===this.layer.uid&&this._type===nD.Item&&this.toggleVisibility(i.visibility,!0,!0)})),this.handlers.push(this.$iApi.event.on(rt.LAYER_DRAWSTATECHANGE,i=>{this.layer.uid===i.layer.uid&&(i.layer.drawState===ho.REFRESH?this.layerRedrawing=!0:setTimeout(()=>{this.layerRedrawing=i.layer.drawState===ho.REFRESH},500))})),this._layerOffscale=this.$iApi.geo.map.created?r.isOffscale():!1,this.handlers.push(this.$iApi.event.on(rt.MAP_SCALECHANGE,()=>{this.$iApi.geo.map.created&&(this._layerOffscale=this.layer?.isOffscale())}))}).catch(()=>{this.error()}))}error(){this.updateLayerControls(),super.error()}layerControlAvailable(t){return this._layerDisabledControls?.includes(t)?!1:!!this._layerControls?.includes(t)}updateLayerControls(){const t=this.$iApi.geo.layer.getLayerControls(this.layerId)??this.$iApi.geo.layer.getLayerControls(this.parentLayerId??"");this._origLayerControls||(this._layerControls=t?.controls??[]),this._origLayerDisabledControls||(this._layerDisabledControls=t?.disabledControls??[])}}var TQe=(e=>(e.Title="title",e.Text="text",e.Image="image",e.Markdown="markdown",e.Template="template",e))(TQe||{});class VW extends gce{_infoType;_content;constructor(t,r,i){super(t,r,i),this._infoType=r.infoType??"title",this._content=r.content??"",r.infoType==="template"&&this.$element.component(`${this._uid}-info-section`,{template:this._content}),(r.infoType||r.content)&&(this._controls=r.controls?.slice()??[yce.Expand]),super.load()}get infoType(){return this._infoType}get content(){return this._content}set content(t){this._content=t}getConfig(){const t={infoType:this._infoType,content:this._content};return{...super.getConfig(),...t}}}const IQe=ui("legend",()=>{const e=Se(),t=Se([]),r=Se([]),i=Se(!0),s=Se(3);function n(l){if(l.parent===void 0)t.value.push(l.item);else{if(!(l.item instanceof VW)&&!(l.item instanceof qp)){console.error("attempted to add an unsupported legend item type");return}l.parent.children.push(l.item)}}function o(l){const u=c=>(c=c.filter(p=>(p===l&&!p.children.length&&p.onRemoved(),p!==l)),c.forEach(p=>{p.children=u(p.children)}),c=c.filter(p=>!(p instanceof VW&&!p.children.length&&p.content==="")),c);t.value=u(t.value)}function a(l){if(l.oldItem.parent===void 0){const u=t.value,c=u.indexOf(l.oldItem);c>-1&&(t.value[c]=l.newItem),t.value=u}else{const u=l.oldItem.parent.children,c=u.indexOf(l.oldItem);c>-1&&(u[c]=l.newItem),l.oldItem.parent.children=u}}return{legendConfig:e,multilineItems:i,maxLines:s,children:t,headerControls:r,addItem:n,removeItem:o,replaceItem:a}}),EQe=ui("mapnav",()=>{const e=Se({}),t=Se([]);function r(i){i in e.value&&delete e.value[i];const s=t.value.indexOf(i);s!==-1&&t.value.splice(s,1)}return{items:e,order:t,removeItem:r}}),AQe=ui("metadata",()=>{const e=Se(""),t=Se({type:"LineString",coordinates:[]});return{status:e,response:t}}),$Qe=ui("northarrow",()=>{const e=Se(""),t=Se("");return{arrowIcon:e,poleIcon:t}}),CQe=ui("overviewmap",()=>{const e=Se({lodSets:[],extentSets:[],basemaps:[],tileSchemas:[],initialBasemapId:""}),t=Se({}),r=Se(!0),i=Se(1.5),s=Se("#FF0000"),n=Se(1),o=Se("#000000"),a=Se(.25);function l(u){e.value.initialBasemapId=u}return{mapConfig:e,basemaps:t,startMinimized:r,expandFactor:i,borderColour:s,borderWidth:n,areaColour:o,areaOpacity:a,updateInitialBasemap:l}}),OQe=ui("scrollguard",()=>{const e=Se(!1);function t(r){e.value=r}return{enabled:e,setEnabled:t}});var Qs=(e=>(e[e.UPLOAD=0]="UPLOAD",e[e.FORMAT=1]="FORMAT",e[e.CONFIGURE=2]="CONFIGURE",e))(Qs||{});const PQe=ui("wizard",()=>{const e={id:"Placeholder",layerType:ct.UNKNOWN,url:""},t=Se(),r=Se(""),i=Se(""),s=Se(!0),n=Se(null),o=Se({config:e,configOptions:[]}),a=Se(Qs.UPLOAD);function l(u){switch(a.value){case Qs.UPLOAD:u===Qs.UPLOAD?r.value="":u===Qs.FORMAT&&(a.value=Qs.FORMAT);break;case Qs.FORMAT:u===Qs.UPLOAD?(n.value&&(r.value="",n.value=null),i.value="",a.value=Qs.UPLOAD):u===Qs.CONFIGURE&&(a.value=Qs.CONFIGURE);break;case Qs.CONFIGURE:u===Qs.UPLOAD?(r.value="",i.value="",n.value=null,s.value=!0,o.value={config:e,configOptions:[]},a.value=Qs.UPLOAD):u===Qs.FORMAT&&(o.value={config:e,configOptions:[]},s.value=!0,a.value=Qs.FORMAT);break}}return{layerSource:t,url:r,typeSelection:i,nested:s,fileData:n,layerInfo:o,currStep:a,goToStep:l}});class RQe{fixture;panel;event;geo;notify;ui;startRequired=!1;_eventsOn=!1;$vApp;$element;$i18n;_isFullscreen;constructor(t,r,i){this.event=new dBe(this);const s=LQe(t,this);this.$vApp=s.app,this.$element=s.element,this.$i18n=s.i18n,this.fixture=new Ket(this),this.panel=new Xet(this),this.geo=new Zet(this),this.ui={maptip:this.geo.map.maptip,exposeOids:!1,exposeMeasurements:!0,getZoomIcon:()=>"",formatNumber:()=>"",scrollToInstance:!1,suppressNumberLocalization:!1,escapeHtml:()=>"",isPlainText:()=>!0},this.notify=new xJe(this),this._isFullscreen=tu.isEnabled&&!!this.$vApp.$root&&tu.isFullscreen&&tu.element===this.$vApp.$root.$el,tu.isEnabled&&tu.onchange(()=>{this._isFullscreen=tu.isEnabled&&!!this.$vApp.$root&&tu.isFullscreen&&tu.element===this.$vApp.$root.$el}),this.initialize(!0,r,i)}initialize(t,r,i){const s=fo(this.$vApp.$pinia),n=Vy(this.$vApp.$pinia),o=gE(this.$vApp.$pinia);if(r?.configs!==void 0){const l=r.configs,u=l[this.$i18n.locale.value]??l[Object.keys(l)[0]];s.newConfig(u),s.registerConfig({config:u,configLangs:Object.keys(l),allLangs:Object.keys(this.$i18n.messages.value)});for(const g in l)s.registerConfig({config:l[g],configLangs:[g]});s.activeBasemapConfig=u.map.basemaps.find(g=>g.id===u.map.initialBasemapId);const c=setInterval(()=>{const g=this.$vApp.$el.querySelector("#esriMap");if(g&&(clearInterval(c),this.geo.map.createMap(u.map,g),g._tippy.hide(0),o.setMaptipInstance(g._tippy),u.layers&&u.layers.length>0)){let b=0;u.layers.forEach(w=>{const S=this.geo.layer.createLayer(w);this.geo.map.addLayer(S,b).catch(()=>{}),S.mapLayer&&b++})}},100);if(u.panels){if(u.panels.open&&u.panels.open.length>0){const g=u.panels.open.map(b=>b.id);this.panel.isRegistered(g).then(()=>{u.panels?.open?.forEach(b=>{this.panel.open({id:b.id,screen:b.screen}),b.pin&&this.panel.pin(b.id)})})}n.reorderable=u.panels.reorderable??!0}!u.system?.animate&&this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.remove("animation-enabled"),u.system?.proxyUrl&&(this.geo.proxy=u.system.proxyUrl),u.system?.exposeOid&&(this.ui.exposeOids=u.system.exposeOid),u.system?.exposeMeasurements!=null&&(this.ui.exposeMeasurements=u.system.exposeMeasurements),u.system?.scrollToInstance&&(this.ui.scrollToInstance=u.system?.scrollToInstance),u.system?.suppressNumberLocalization&&(this.ui.suppressNumberLocalization=u.system?.suppressNumberLocalization);const p={magnify:'<svg class="m-auto" xmlns="http://www.w3.org/2000/svg" height="16" viewBox="0 0 24 24" width="16"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" /><path d="M0 0h24v24H0V0z" fill="none" /><path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z" /></svg>',globe:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="16" height="16" viewBox="0 0 16 16" xml:space="preserve"><g transform="matrix(0.67 0 0 0.67 8 8)"><path style=" stroke: none; stroke-width: 1; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: #979797; fill-rule: nonzero; opacity: 1;" transform=" translate(-12, -12)" d="M 12 2 C 6.48 2 2 6.48 2 12 C 2 17.52 6.48 22 12 22 C 17.52 22 22 17.52 22 12 C 22 6.48 17.52 2 12 2 z M 11 19.93 C 7.05 19.44 4 16.08 4 12 C 4 11.38 4.08 10.79 4.21 10.21 L 9 15 L 9 16 C 9 17.1 9.9 18 11 18 L 11 19.93 z M 17.9 17.39 C 17.639999999999997 16.580000000000002 16.9 16 15.999999999999998 16 L 14.999999999999998 16 L 14.999999999999998 13 C 14.999999999999998 12.45 14.549999999999999 12 13.999999999999998 12 L 8 12 L 8 10 L 10 10 C 10.55 10 11 9.55 11 9 L 11 7 L 13 7 C 14.1 7 15 6.1 15 5 L 15 4.59 C 17.93 5.779999999999999 20 8.649999999999999 20 12 C 20 14.08 19.2 15.97 17.9 17.39 z" stroke-linecap="round" /></g></svg>'},f=u.system?.zoomIcon||"globe",m=p[f]||f;this.ui.getZoomIcon=()=>m,this.ui.formatNumber=g=>this.ui.suppressNumberLocalization?g.toString():this.$i18n.n(g,"number"),this.ui.escapeHtml=g=>{const b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return g.replace(/[<>"']/g,w=>b[w])},this.ui.isPlainText=g=>typeof g=="string"?!this.containsValidHtml(g)&&!this.representsObject(g):!1}i||(i={});const a=S0(this.$vApp.$pinia);i?.startRequired?(this.startRequired=!0,a.started=!1):(this.startRequired=!1,a.started=!0,this.event.emit(rt.MAP_START)),t&&(i.loadDefaultFixtures!==!1||r?.startingFixtures!==void 0)?this.fixture.addDefaultFixtures(r?.startingFixtures):t||this.fixture.restore(),i.loadDefaultEvents!==!1&&!this._eventsOn&&(this.event.addDefaultEvents(),this._eventsOn=!0)}reload(t,r){const i=S0(this.$vApp.$pinia),s=Wu(this.$vApp.$pinia),n=fo(this.$vApp.$pinia),o=Ea(this.$vApp.$pinia),a=Nu(this.$vApp.$pinia),l=CN(this.$vApp.$pinia),u=!!t;u?Object.keys(o.items).forEach(f=>{this.fixture.exists(f)&&this.fixture.remove(f)}):this.fixture.flush(),Object.keys(l.grids).forEach(p=>{l.removeGrid(p)}),i.started=!1,this.geo.map.destroyMap(),a.$reset(),r?.loadDefaultEvents===!1&&(this.event.removeDefaultEvents(),this._eventsOn=!1),t===void 0&&(t=JSON.parse(JSON.stringify({startingFixtures:n.startingFixtures,configs:n.registeredConfigs}))),s.clearAll(),this.geo.map.maptip.clear(),this.initialize(u,t,r)}component(t,r){if(r){const i=this.$element.component(t,r);return this.event.emit(rt.COMPONENT,t),i}return this.$element.component(t)}get screenSize(){if(!this.$vApp?.$root||!this.$vApp.$root.$refs["app-size"])return null;const t=this.$vApp.$root.$refs["app-size"].classList;return t.contains("lg")?"lg":t.contains("md")?"md":t.contains("sm")?"sm":"xs"}getConfig(){const t=fo(this.$vApp.$pinia);return JSON.parse(JSON.stringify(t.getActiveConfig(this.language)))}useStore(t){if(!(["appbar","areas-of-interest","details","export","extentguard","geosearch","grid","help","legend","mapnav","metadata","northarrow","overviewmap","scrollguard","wizard"].includes(t)&&!this.fixture.exists(t)))switch(t){case"appbar":return dE(this.$vApp.$pinia);case"areas-of-interest":return uQe(this.$vApp.$pinia);case"details":return Rle(this.$vApp.$pinia);case"export":return cQe(this.$vApp.$pinia);case"extentguard":return hQe(this.$vApp.$pinia);case"geosearch":return xQe(this.$vApp.$pinia);case"grid":return CN(this.$vApp.$pinia);case"help":return MQe(this.$vApp.$pinia);case"legend":return IQe(this.$vApp.$pinia);case"mapnav":return EQe(this.$vApp.$pinia);case"metadata":return AQe(this.$vApp.$pinia);case"northarrow":return $Qe(this.$vApp.$pinia);case"overviewmap":return CQe(this.$vApp.$pinia);case"scrollguard":return OQe(this.$vApp.$pinia);case"wizard":return PQe(this.$vApp.$pinia);case"config":return fo(this.$vApp.$pinia);case"fixture":return Ea(this.$vApp.$pinia);case"instance":return S0(this.$vApp.$pinia);case"layer":return Nu(this.$vApp.$pinia);case"map-caption":return yd(this.$vApp.$pinia);case"maptip":return gE(this.$vApp.$pinia);case"notification":return Wu(this.$vApp.$pinia);case"panel":return Vy(this.$vApp.$pinia);default:console.error(`The store ${t} does not exist.`);return}}setLanguage(t){if(this.$i18n.locale.value===t)return;const r=fo(this.$vApp.$pinia),i=Wu(this.$vApp.$pinia),s=r.registeredLangs;Object.keys(r.registeredConfigs).length===1&&i.clearAll();const n=this.$i18n.locale.value;this.$i18n.locale.value=t;const o=this.getConfig();s[n]!==s[t]&&(this.event.emit(rt.CONFIG_CHANGE,o),this.reload()),this.event.emit(rt.LANG_CHANGE,{oldLang:n,newLang:t})}get language(){return this.$vApp.$i18n.locale}get animate(){return!!(this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.contains("animation-enabled"))}toggleFullscreen(){tu.isEnabled&&tu.toggle(this.$element._container||void 0)}get isFullscreen(){return this._isFullscreen}get started(){return S0(this.$vApp.$pinia).started}updateAlert(t){const r=this.$vApp.$el.querySelector(".screen-reader-alert");r.childNodes.length>0&&(r.innerHTML="");const i=document.createElement("span");i.setAttribute("role","alert");const s=document.createTextNode(t);i.appendChild(s),r.insertBefore(i,null)}scrollToInstance(){this.ui.scrollToInstance&&this.$element._container?.scrollIntoView({behavior:"smooth"})}start(){const t=S0(this.$vApp.$pinia);!t.started&&this.startRequired?(this.event.emit(rt.MAP_START),t.started=!0):t.started&&console.warn("start has already been called")}containsValidHtml(t){return/<(\w+)([^>]*)>(.*?)<\/\1>/.test(t)}representsObject(t){return/^(?:\[\s*(?:[\s\S]*?)\s*\]|\{\s*(?:[\s\S]*?)\s*\})$/.test(t)}}function LQe(e,t){const r=oBe();r.use(({store:o})=>{const a=GH(o.$state);o.$reset=()=>o.$patch(GH(a))});const i=$He(),s=jy(wKe).use(i).use(mKe,{directive:"tippy",component:"tippy"}).use(r);s.directive("focus-container",AKe),s.directive("focus-list",xKe),s.directive("focus-item",TKe),s.directive("truncate",fXe),s.component("panel-screen",MXe),s.component("pin",AXe),s.component("close",OXe),s.component("back",LXe),s.component("expand",jXe),s.component("panel-options-menu",YXe),s.component("dropdown-menu",R9),s.component("minimize",zXe),s.component("right",qXe),s.component("left",JXe),s.component("fullscreen-nav-button",QXe),s.component("geolocator-nav-button",eQe),s.component("home-nav-button",tQe),s.component("mapnav-button",sQe),s.component("appbar-button",lQe),s.component("transition",s9),s.component("transition-group",o9),s.config.globalProperties.$iApi=t,s.config.globalProperties.$pinia=r,s.provide("iApi",t);const n=s.mount(e);return{element:s,app:n,i18n:i.global}}class kQe{esriBasemap;config;constructor(t){this.config=t,this.esriBasemap=new Y0({baseLayers:t.layers.map(r=>{if(r.layerType===ct.TILE)return new Q8({url:r.url,opacity:r.opacity});if(r.layerType===ct.MAPIMAGE)return new K8({url:r.url,opacity:r.opacity});if(r.layerType===ct.OSM)return new X8({opacity:r.opacity});throw new Error(`Unsupported layer type provided to basemap config: ${r.layerType}`)}),title:t.name||"",id:t.id})}get tileSchemaId(){return this.config.tileSchemaId}get id(){return this.config.id}get name(){return this.config.name}set name(t){this.config.name=t||""}get description(){return this.config.description}set description(t){this.config.description=t||""}get altText(){return this.config.altText}set altText(t){this.config.altText=t||""}get attribution(){return this.config.attribution}set attribution(t){this.config.attribution=t}get backgroundColour(){return this.config.backgroundColour??"#FFFFFF"}}class NQe extends qi{esriMap;_basemapStore;created=!1;trackFirstBasemap=!1;esriView;_viewPromise;get viewPromise(){return this._viewPromise.getPromise()}_rampSR;_rampExtentSet;_targetDiv;handlers;pointZoomScale;constructor(t){super(t),this.esriMap=void 0,this._basemapStore=[],this._viewPromise=new zi,this.handlers=[],this.pointZoomScale=5e4}noMapErr(){console.error("Attempted to manipulate the map before calling createMap()")}abstractError(){throw new Error("Attempted to call an abstract method in the parent CommonMapAPI")}labelsDefault={visible:void 0};createMap(t,r){this._basemapStore=t.basemaps.map(s=>{const n=new kQe(s);return n.esriBasemap.baseLayers.forEach(o=>{o.watch("loadStatus",()=>{o.loadStatus==="loaded"?this.trackFirstBasemap=!1:o.loadStatus==="failed"&&(this.$iApi.notify.show(ta.ERROR,this.$iApi.$i18n.t("layer.error",{id:n.name})),this.trackFirstBasemap&&this.recoverBasemap(n.tileSchemaId))})}),n}),t.labelsDefault&&(this.labelsDefault.visible=t.labelsDefault.visible);const i={};this.esriMap=Gi(new vie(i)),this.pointZoomScale=t.pointZoomScale&&t.pointZoomScale>0?t.pointZoomScale:5e4,this._targetDiv=r,this.createMapView(t.initialBasemapId)}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMapView(),this.esriMap.destroy(),delete this.esriMap,this._basemapStore.forEach(t=>t.esriBasemap.destroy()),this._basemapStore=[]}reloadMap(t,r){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMap(),this.createMap(t,r)}createMapView(t){this.abstractError()}destroyMapView(){if(!this.esriView){this.noMapErr();return}this._viewPromise=new zi,this.created=!1,this.handlers.forEach(t=>t.handler.remove()),this.handlers=[],this.esriView.map=null,this.esriView.container=null,this.esriView.spatialReference=null,this.esriView.extent=null,this.esriView.navigation=null,this.esriView.destroy(),delete this.esriView}findBasemap(t){const r=this._basemapStore.find(i=>i.id===t);if(r)return r;throw new Error(`Invalid basemap id requested: ${t}`)}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const r=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=Rt(r.esriBasemap)}setBasemap(t){return this.abstractError(),!1}recoverBasemap(t){}getCurrentBasemapId(){if(this.esriMap)return this.esriMap.basemap.id;this.noMapErr()}geomToMapSR(t){if(!this._rampSR)throw new Error("call to map.geomToMapSR before the map spatial ref was created");return this._rampSR.isEqual(t.sr)?Promise.resolve(t):this.$iApi.geo.proj.projectGeometry(this._rampSR,t)}async zoomMapTo(t,r,i=!0,s=200,n="ease"){if(this.esriView){if(t.invalid())throw new Error("attempt to zoom to invalid geometry");const o=await this.geomToMapSR(t),a={target:this.$iApi.geo.geom.geomRampToEsri(o)};o.type===Ft.POINT&&(a.scale=r||this.pointZoomScale);const l={animate:i,duration:s,easing:n};return this.viewPromise.then(()=>this.esriView.goTo(a,l))}else this.noMapErr()}getZoomLevel(){return this.esriView?this.esriView.zoom:(this.noMapErr(),1)}getScale(){return this.esriView?this.esriView.scale:(this.noMapErr(),1)}getResolution(){return this.esriView?this.esriView.resolution:(this.noMapErr(),1)}getExtent(){return this.esriView?Yr.fromESRI(this.esriView.extent):(this.noMapErr(),Yr.fromParams("i_am_error",0,1,0,1))}getExtentSet(){return this._rampExtentSet?this._rampExtentSet:(this.noMapErr(),c2.fromConfig({id:"i_am_error_extent_set",default:{xmin:0,xmax:1,ymin:0,ymax:1,spatialReference:{wkid:4326}}}))}getSR(){return this._rampSR?this._rampSR.clone():(this.noMapErr(),$t.latLongSR())}getPixelHeight(){return this.esriView?this.esriView.height:(this.noMapErr(),1)}getPixelWidth(){return this.esriView?this.esriView.width:(this.noMapErr(),1)}setPointZoomScale(t){return t>0?(this.pointZoomScale=t,!0):(console.error(`Cannot set pointZoomScale to non-positive number: ${t}.`),!1)}}class DQe extends qi{maptipStore;constructor(t){super(t),this.maptipStore=gE(this.$vApp.$pinia)}#e=void 0;#t=void 0;async checkAtCoord(t){this.#t=t;const r=await this.$iApi.geo.map.getGraphicAtCoord(t);if(this.#t!==t)return;if(!r){this.clear();return}const i=this.$iApi.geo.layer.getLayer(r.layerId);if(i?.geomType!=Ft.POLYGON&&this.#e&&this.#e.layerId===r.layerId&&this.#e.oid===r.oid&&this.#e.layerIdx===r.layerIdx)return;if(this.clear(),this.#e=r,!i){console.error(`graphic hit test returned non-existent layer id: ${r.layerId}`);return}if(!i.hovertips)return;const s=await i.getIcon(r.oid),n=await i.getGraphic(r.oid,{getAttribs:!0});this.setPoint(this.$iApi.geo.map.screenPointToMapPoint(t)),this.$iApi.event.emit(rt.MAP_GRAPHICHIT,{layer:i,graphicHit:r,attributes:n.attributes,icon:s,screenPoint:t})}generateDefaultMaptip(t){this.setContent(`<div class="flex items-center space-x-5"><span>${t.icon}</span><span class="line-clamp-3">${t.attributes[t.layer.config.tooltipField||t.layer.nameField]}</span></div>`)}clear(){this.#e=void 0,this.maptipStore.setMaptipPoint(void 0),this.maptipStore.setMaptipContent("")}getInstance(){return this.maptipStore.maptipInstance}getPoint(){return this.maptipStore.maptipPoint}setPoint(t){this.maptipStore.setMaptipPoint(t)}setContent(t){this.maptipStore.setMaptipContent(t)}}class FQe extends qi{DEFAULT_POINT_FORMATTERS={LAT_LONG_DMS:this.formatLatLongDMS,LAT_LONG_DD:this.formatLatLongDD,LAT_LONG_DDM:this.formatLatLongDDM,WEB_MERCATOR:this.formatMercator,CANADA_ATLAS_LAMBERT:this.formatLambert,UTM:this.formatUTM,BASEMAP:this.formatBasemap};pointFormatter;constructor(t){super(t),this.pointFormatter=this.DEFAULT_POINT_FORMATTERS.LAT_LONG_DMS}createCaption(t){if(!t)return;const r=yd(this.$vApp.$pinia);if(r.coords.disabled=!1,r.scale.disabled=!1,r.scale.isImperialScale=!1,t.mapCoords)if(t.mapCoords.disabled)r.coords.disabled=!0;else{const i=t.mapCoords.formatter;i!==void 0&&this.setPointFormatter(i)}if(t.scaleBar)if(t.scaleBar.disabled)r.scale.disabled=!0;else{const i=t.scaleBar.imperialScale;i!==void 0&&(r.toggleScale(i),this.$iApi.geo.map.viewPromise.then(()=>{this.updateScale()}))}r.langtoggle={disabled:t?.langToggle?.disabled??!1}}updateAttribution(t){const r={disabled:!1,value:this.$iApi.$i18n.t("caption.attributionDefaultText")},i={disabled:!1,altText:this.$iApi.$i18n.t("caption.attributionLogoAltText"),link:this.$iApi.$i18n.t("caption.attributionLink"),value:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAkCAYAAADWzlesAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAADO9JREFUeNq0Wgl0jlca/pfvzyo6qNBSmhLLKE1kKEUtB9NTat+OYnBacwwJY19DZRC7sR41th60lWaizFSqRTOEw0lsrQSJGFIESSxJ/uRfv3nef+7Vt9f3p2E695z3fMt97/3ufe+7PO+9n9n0UzELsjKyiHdUdMZnVHTl2VyFe9nO7Kc/Io+4epUxmpWxeVkbr3hvUebgFf15GL9XUwZHndtAAYI09jGvIghOuoEwLOLeYiBoXrwGfZjYYOWAvWyMGlsk2YebXeV3NUEW1qcT5BBX4jUbCYEmHwwKEfdW1gEXgoWtiIlNRFeezcrkrQaTNSuraRYDdImrR1ylAALZBPnkXIJ0wRskeG2Cj3jsoFI2HhcfDDFWA9UBNdZZyc/PP4Z3HZYsWTLGbrffond0Xb9+/Qy6P3jw4F+HDx8+mu7XrVs3c+7cuX+i+3nz5o3n/Rw4cGAdf/7hhx9SZ8yYEcffHT9+/G/8uaSkJGvDhg3D8P3moNdXrlw5UtYVFxfnXL9+/V8PHz68grr2N2/eTC4tLb2E+9+Cotq1a/dOenr6njt37nxPdOrUqd0dO3bsjromoHBQKBPkEyFUB71MH6SPbNy4cRqfkMvlenzixImtqO/x3XffbXc6nSW5ubnpOTk5J1NTU/cQH91//fXXu3/88ccLy5cvj6d34B8gaBA9JyQk/OWjjz5aIu8Fz2DiWbZs2QLx/A4m0Qf9f/n48eNsPEeDfrdly5Y/U31UVNT7dJ04ceIsGseNGzfS6DkuLq4v8YE6Y/G+93g8XKZ6QUHBRVHfAPQC0xJfCRAv65EkeUP6gFx11JEkfw/qTc8ff/zxKofDUXrv3r08rOIBeU9CWbx48SLej5y4LGlpaf9YuHDhUv5OtqH+6Vty0riPAbWjheH8n3322VYpuG+//Xa5mGB7CGM8hKN7vV5dLfHx8WNI20E1aN4WP97YZyc7d+6MM5vNHRs2bDg3NjY23e12l5w8eZJWzIUJ9IdmlI4bNy4tICAgtHbt2hGdOnXaSe3oftu2bWmBgYFOn3MwmwcQLViwIJOeYVYJGGAZVuW2zWZzCZ6hoIGapnmknUMTQnr16vUeTOKydHqyHrx9t27dunro0KEfzJw5M4Pe3bp166Z0pHXr1g0Fj2EYCw8PD+N+SjNwUuSAKnxexOkswOWxZN63b9/MAQMGzIUwx5WXl99eunTpFLx+hJU/K9o/yM7OPhgZGdk5KSkpp0WLFv+Vrq7/na5nz57dR1dM6t7hw4e3DRkyJG7WrFlxgudzukIw58TzV3SF3Z+ByUzFbTk5O9j8fVH/JV3PnTv3uRijSdSR5/empKRkT5kypQxCC+UTxMKVQXuyWBT5WbiS4VFjIZLHWQsLN1ZFgFbm0U1KSNWUUMlDp9kAh0iNdCkRwiva2FjUsjJeJ5sYRYQwCGIYNGk8tC1UCuDQoUOb+vbtuxuPRUJ4FVwIFhZ7pUD45OXEbUpo9DIz8hgAFk0BORblWypm8BiQzkKnpoRnM+PxsEWhiYfFxMTUHTx4cDOYhg7tzM7IyLhNCiYEUEbCMxsAGYuCGjl4ClKE4GY+xCnIw95zBKqxvmyCOJqT7dws5ntZzLcoaJEjQiPUahMaESzudWEqhBEeiSuZvUvzA1+lxIMEhbD7QGYKUl0rBAgxC9vlq6IzNZZ9BYt+rMw8pBDLmSZZFBPQmBC8imaofo1roa5oKH82aQaaIH0CDTZM0sCBAxvBKbZ+7bXXGr3yyisN4ZjMDx48uAeAkofQdHbt2rUXhIpJKevMJwSLfqq3bt365enTp3eFh365SZMmBGpMFRUVZcAV1wFmzs2ZMyddtCkXk9ESExOjq1Wr9iLCbwAilA9xwrnlwimS4G2ffvppj1atWrWoWbNmbWCKAtj9V5MnT84cMWJEvTfeeKM+wqSFzCEoKMgJ3HEVgO6SkTlKMwgUgImwArn2DpMmTYrDALP0XyjEA9sbjTZtQZGij7qghqBWoK4AWPswkbLK+qHIsWPHjoXgfwvUhsZAAEflg+dfg0kuBlosUuvoO2jXl65qXWZm5g7UNRPIOIQLQqpcmECMJIAuRp1UVmiCACmTxAReFx+LhnPqV1hY+O9n6evIkSObSXCEHI0WASDtMMJ0uVHb7du3E6p9HxpxQK0DjN4r0Gc9kSZYeZiSNkuaUOv06dPTO3fuPNj0DAWgKWTFihVL+vfvT0J8kfohAsobV6tWrYbP0hf460pnLE2AF2jB21DvIKO2gO6FNB+ERJtaB+xjY37NN3+LogmkHi9s2rTp3bZt277LG8NuK5AopXbv3n0O7Gtsjx49ZmNye6GOD1RBwD9MFUKoSQSc30UdzJUrV26uWrVqP7D/lt27d+9/9OhRMas7gjYbhROzkv9R2wcHBwdWshjkYL1G7SBQTXGwTwQQLLIqWsGeGFAhVyFSO6C7Naj7ADRUJENDQGMjIiLmQl0LVLUbNWrUItSPhBNcodYhFyFklwAiYf0RNKZZs2YfFhUVXYcAvhFm0FFc++fl5eX4Mxto7JnRo0cvID4yHWSz70dHRw+khAxZ6yGVH8ndftS9DWokciWNx15fTN2zZ0+f6tWr1+LS279/fwYgcz4LPzJvdyGVLUFidFiVOIRAqx8KlQysZCdKboJUXL58uRAmMLFp06aLRbh1cGhrVEiD3nzzzTXIcU5R6gC6vXfv3kuIGgSIyq1Wq6cqpmdhiNAXFtu0adNeZVq9enUWA0xywyVECC4AicwttQ2SrvpkYnfv3i1X6xo0aPAiJv2H+fPnt27UqFEN4YsCDBCk33Lt2rW8kSNHJuP2LqUc4kq+4KFAgg6LxeKtSl+a4hMC6tSp85QD27VrVy9I1U2SJaKYS/ZG8Rf5uhVXq91ud4aEhATINo0bN46glUQMv4aQV46MMpj3iRVvsGjRohFEENQtygCRmZ5B6DsqNNPFANJT5cyZM5RoPRBE/qREaJYEYm4aZ1WFwDG9ppoClebNm9czPV/xYXOo6J4xY8Z84I8Jgq9HBCDVfsKECR+mpqZ+gSQnRVQHGTm4CxcuXBP9l4qrneUNPtheVSFYKtkF/jUKqWbx2LFjUxBJViA82asSZvv06TPq+PHjE/D4GzI70jiVT+xDyBzDo8DhZyoWNXsD4Cn/FYVQLKgIofCfMIkhgKyr4bhO8pBoVGgvsEuXLq+SEIw0Qayyl5H+vIPUmJf2ZYOwz5twXE05U/369TfBZu+wvMBpkH7L3dwyYZ+l4uoRPL50FzCcQuAJstvIyMjacG5Rw4YN64b7V9XBxcbGdgJq/cZIE4TT0/2ceTyzJsiMj0JSxfnz50+rTECBUUq2aGd2WC7Izib+WFwdLJs0sczT1w+Q3d34+PhTSKQ2w4GeVL9LTtefY1Q2YEz/qxC8LIe3f/LJJ2kqU79+/WIGDRpUj+0L8N0lG7B6N+QGiS1btgxR9ha8gi949uzZ0UiENgBSR4iQyFNiL0zkrh+V/78XfjJDq1aWnJx85dixY8kqRE1KSopNSUkZ0K1btwjhsGpMmzatbVZW1nTy/JQbQHUXA26HMRul/gOQHkcBUK1BBGiJFHgtcMV7YqeXeEM7dOhQB4lXh6dCS1kZaZbDSBjinV6ZhsBkdAMz0o00SO4hhIrUl7K/7vfv37+hP0eBw8tBftFRpNNNExMThyMqlKp8SEXsADy5t1GM+qF6CHwe+hifm5t7Ta1PSEiYj7rWIhsMZaCPEkDyL+2PHj36hdqO3lGd4KkuYbN0jC5h22TPRT179pwCZ5j9rKqF0FWtd+/eL0kBA9Y2kRudvBB4og2al1CM+iFsgQFfJTCkaZrboL2DhUfd4NjAadROvHPyvUsLayxNghxaMWw0D1EhFiguqSrxXWZ/EN7IyZMnX5QHn127dk0Gxo+nnd6q9EHf2rx58zJgC1oxSrQKgR1cKl9YWJhdOFg329TlC1oBM3YYZJ8OubcozVZTJPjkzEEwOBGr1yIr+xz23xX23i48PPxVjiqRQV6GRuetXLkSbiPpCsPuTulzEAYPAh+cnzp1ao+YmJi31D5gevkwo3sZGRmn0M+RzMzMAhFtaGG0ixcvfpmfn39WbpNBC1zILK8KHqdykCsXszQ7O/sE8WMBNKGlbrxLF1HsSeQyV5JQBSrJUghLdDQmKB46ywTJFTKzfqqxftScwM1OjGXY/Vl0UU7IHcq3XMrutkz0QsX3bOwEWo5TfsNj9hMxjP5VCFR2fPl/AS4xMH7u71X6CWR92JQjer5t72AHLrpyKGRRhKbCZrNybhJg8HvBU+385Qv8DMKi/BjBEaKuHJK42YDU/x789cFhu1s5cFH/hTAp3/UqhzMm5cTM6G8br/qnyi8lTWYDoZiUP1TUEyc1Ble1D5OSA+gG7U0GR3b+fhUy+kVIN0Kb/xFgANrk0XIqRaL0AAAAAElFTkSuQmCC"},s={text:{value:"",disabled:!1},logo:{disabled:!1,altText:"",link:"",value:""}};if(t?(t.logo?t.logo.disabled?s.logo.disabled=!0:(s.logo.altText=t.logo.altText||i.altText,s.logo.link=t.logo.link||i.link,s.logo.value=t.logo.value||i.value):(s.logo.altText=i.altText,s.logo.link=i.link,s.logo.value=i.value),t.text?t.text.disabled?s.text.disabled=!0:s.text.value=t.text.value||r.value:s.text.value=r.value,yd(this.$vApp.$pinia).setAttribution(s)):(s.logo.altText=i.altText,s.logo.link=i.link,s.logo.value=i.value,s.text.value=r.value),!t||t.text?.disabled||!t.text){if(!this.$iApi.geo.map.esriMap){console.warn("Attempted to fetch map attribution with undefined map");return}let n="";const o=5e3,a=20,l=this.$iApi.geo.map.esriMap.basemap.baseLayers.map(u=>new Promise(c=>{let p=0;const f=o/a,m=setInterval(function(){u.loaded&&!u.loadError?(clearInterval(m),c(u)):p>f&&(clearInterval(m),c(null)),p++},a)})).toArray();Promise.all(l).then(u=>{n=u.filter(p=>p?.copyright).map(p=>p.copyright).join(" | "),s.text.value=n||s.text.value||r.value,yd(this.$vApp.$pinia).setAttribution(s)})}}updateScale(){const t=yd(this.$vApp.$pinia),r=t.scale;if(r?.disabled)return;const i=r?.isImperialScale||!1,s=this.scaleHelper().find(n=>n.isImperialScale===i)??{isImperialScale:!1,units:"error",pixels:1,distance:1};t.scale={width:`${s.pixels}px`,label:`${this.$iApi.$i18n.n(s.distance,"number")}${s.units}`,isImperialScale:i}}async formatPoint(t){return t?await this.pointFormatter(t):""}setPointFormatter(t){if(typeof t=="string"){if(!(t in this.DEFAULT_POINT_FORMATTERS)){console.warn(`Could not find point formatter with id: ${t}`);return}this.pointFormatter=this.DEFAULT_POINT_FORMATTERS[t]}else this.pointFormatter=t}scaleHelper(){const t=window.innerWidth>600?70:35,r=this.$iApi.geo.map.getResolution(),i=[],s=r*t,n=1609.34,o=3.28084,a=s>1e3?["km","mi"]:["m","ft"];for(let l=0;l<2;l++){const u=l===1;if(i.push({isImperialScale:u,units:a[l],pixels:0,distance:0}),s>1e3){const c=r*t/(u?n:1e3),p=Math.round(c).toString().length,f=Math.pow(10,p-1);i[l].distance=Math.ceil(c/f)*f,i[l].pixels=i[l].distance*(u?n:1e3)/r}else i[l].distance=Math.ceil(u?s*o:s),i[l].pixels=s/r}return i}wrapValue(t,r,i){return((t-r)%(i-r)+(i-r))%(i-r)+r}async formatLatLongDMS(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),s=this.wrapValue(r.x,-180,180),n="Â°",o=Math.floor(Math.abs(i))*(i<0?-1:1),a=Math.floor(Math.abs((i-o)*60)),l=Math.floor((Math.abs(i)-Math.abs(o)-a/60)*3600),u=Math.floor(Math.abs(s))*(s<0?-1:1),c=Math.floor(Math.abs((s-u)*60)),p=Math.floor((Math.abs(s)-Math.abs(u)-c/60)*3600);return`${this.$iApi.$i18n.n(Math.abs(o),"number")}${n} ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$i18n.n(l,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$i18n.t("map.coordinates."+(i>0?"north":"south"))} | ${this.$iApi.$i18n.n(Math.abs(u),"number")}${n} ${this.$iApi.$i18n.n(c,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$i18n.n(p,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$i18n.t("map.coordinates."+(0>s?"west":"east"))}`}async formatLatLongDDM(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),s=this.wrapValue(r.x,-180,180),n="Â°",o=Math.floor(Math.abs(i))*(i<0?-1:1),a=Math.abs((i-o)*60),l=Math.floor(Math.abs(s))*(s<0?-1:1),u=Math.abs((s-l)*60);return`${this.$iApi.$i18n.n(Math.abs(o),"number")}${n} ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$i18n.t("map.coordinates."+(i>0?"north":"south"))} | ${this.$iApi.$i18n.n(Math.abs(l),"number")}${n} ${this.$iApi.$i18n.n(u,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$i18n.t("map.coordinates."+(0>s?"west":"east"))}`}async formatLatLongDD(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),s=this.wrapValue(r.x,-180,180),n="Â°",o=Math.abs(i),a=Math.abs(s);return`${this.$iApi.$i18n.n(o,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${n} ${this.$iApi.$i18n.t("map.coordinates."+(i>0?"north":"south"))} | ${this.$iApi.$i18n.n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${n} ${this.$iApi.$i18n.t("map.coordinates."+(0>s?"west":"east"))}`}async formatMercator(t){const r=await this.$iApi.geo.proj.projectGeometry(102100,t);return`${this.$iApi.$i18n.n(Math.floor(r.x),"number")} m | ${this.$iApi.$i18n.n(Math.floor(r.y),"number")} m`}async formatLambert(t){const r=await this.$iApi.geo.proj.projectGeometry(3978,t);return`${this.$iApi.$i18n.n(Math.abs(Math.floor(r.x)),"number")} m ${this.$iApi.$i18n.t("map.coordinates."+(0>r.x?"west":"east"))} | ${this.$iApi.$i18n.n(Math.abs(Math.floor(r.y)),"number")} m ${this.$iApi.$i18n.t("map.coordinates."+(r.y>0?"north":"south"))}`}async formatUTM(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),s=this.wrapValue(r.x,-180,180),n=Math.ceil((s+180)/6),o=await this.$iApi.geo.proj.projectGeometry(parseInt("326"+n),t);return`${this.$iApi.$i18n.n(n,"number",{minimumIntegerDigits:2})} ${this.$iApi.$i18n.t("map.coordinates."+(i>0?"north":"south"))} ${this.$iApi.$i18n.n(Math.floor(o.x),"number")} m${this.$iApi.$i18n.t("map.coordinates.east")} | ${this.$iApi.$i18n.n(Math.abs(Math.floor(o.y)),"number")} m${this.$iApi.$i18n.t("map.coordinates.north")}`}async formatBasemap(t){const r=await this.$iApi.geo.proj.projectGeometry(this.$iApi.geo.map.getSR(),t);return`${this.$iApi.$i18n.n(r.x,"number")} | ${this.$iApi.$i18n.n(r.y,"number")}`}}class jQe extends NQe{maptip;caption;mapMouseThrottle;layerDefaultTimes={draw:0,load:0,fail:0};constructor(t){super(t),this.maptip=new DQe(t),this.caption=new FQe(t),this.mapMouseThrottle=0}createMap(t,r){this.setMapMouseThrottle(t.mapMouseThrottle??0),this.trackFirstBasemap=!0,super.createMap(t,r),this.layerDefaultTimes.draw=t.layerTimeDefault?.expectedDrawTime??1e4,this.layerDefaultTimes.load=t.layerTimeDefault?.expectedLoadTime??1e4,this.layerDefaultTimes.fail=t.layerTimeDefault?.maxLoadTime||9e4,this.viewPromise.then(()=>{this.$iApi.event.emit(rt.MAP_CREATED)})}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.$iApi.geo.layer.allLayersOnMap(!1).map(t=>t.uid).forEach(t=>this.removeLayer(t)),super.destroyMap(),this.$iApi.event.emit(rt.MAP_DESTROYED)}createMapView(t){const i=fo(this.$vApp.$pinia).config.map;if(!i)throw new Error("Attempted to create map view without a map config");const s=(typeof t=="string"?this.findBasemap(t):t)||this.findBasemap(i.initialBasemapId),n=i.tileSchemas.find(l=>l.id===s.tileSchemaId);if(!n)throw new Error(`Could not find tile schema for the given basemap id: ${s.id}`);const o=i.extentSets.find(l=>l.id===n.extentSetId);if(!o)throw new Error(`Could not find extent set with the given id: ${n.extentSetId}`);this._rampExtentSet=c2.fromConfig(o),this._rampSR=this._rampExtentSet.sr.clone();const a=i.lodSets.find(l=>l.id===n.lodSetId);if(!a)throw new Error(`Could not find lod set with the given id: ${n.lodSetId}`);this.esriView=Gi(new e8e({map:this.esriMap,container:this._targetDiv,constraints:{lods:a.lods,rotationEnabled:!1},spatialReference:this._rampSR.toESRI(),extent:this._rampExtentSet.defaultExtent.toESRI(),navigation:{browserTouchPanEnabled:!1},background:{color:s.backgroundColour}})),this.esriView.ui.components=[],this.handlers.push({type:"extent",handler:this.esriView.watch("extent",l=>{if(l){const u=this.$iApi.geo.geom.geomEsriToRamp(l,"map_extent_event");this.$iApi.event.emit(rt.MAP_EXTENTCHANGE,u),this.$iApi.event.emit(rt.FILTER_CHANGE,{extent:u,filterKey:Ln.EXTENT})}})}),this.handlers.push({type:"scale",handler:this.esriView.watch("scale",l=>{this.$iApi.event.emit(rt.MAP_SCALECHANGE,l)})}),this.handlers.push({type:"resize",handler:this.esriView.on("resize",l=>{this.$iApi.event.emit(rt.MAP_RESIZED,{height:l.height,width:l.width})})}),this.handlers.push({type:"click",handler:this.esriView.on("click",l=>{this.$iApi.event.emit(rt.MAP_CLICK,this.$iApi.geo.geom.esriMapClickToRamp(l,"map_click_point"))})}),this.handlers.push({type:"double-click",handler:this.esriView.on("double-click",l=>{this.$iApi.event.emit(rt.MAP_DOUBLECLICK,this.$iApi.geo.geom.esriMapClickToRamp(l,"map_doubleclick_point"))})}),this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),this.handlers.push({type:"pointer-move-start",handler:this.esriView.on("pointer-move",fE(100,!0,l=>{this.$iApi.event.emit(rt.MAP_MOUSEMOVE_START,this.$iApi.geo.geom.esriMapMouseToRamp(l))}))}),this.handlers.push({type:"pointer-move-end",handler:this.esriView.on("pointer-move",fE(100,l=>{this.$iApi.event.emit(rt.MAP_MOUSEMOVE_END,this.$iApi.geo.geom.esriMapMouseToRamp(l))}))}),this.handlers.push({type:"pointer-leave",handler:this.esriView.on("pointer-leave",l=>{setTimeout(()=>{this.$iApi.event.emit(rt.MAP_MOUSELEAVE,l.native)},Math.max(this.mapMouseThrottle,100)+1)})}),this.handlers.push({type:"pointer-down",handler:this.esriView.on("pointer-down",l=>{this.$iApi.event.emit(rt.MAP_MOUSEDOWN,l.native)})}),this.handlers.push({type:"key-down",handler:this.esriView.on("key-down",l=>{this.$iApi.event.emit(rt.MAP_KEYDOWN,l.native),l.stopPropagation()})}),this.handlers.push({type:"key-up",handler:this.esriView.on("key-up",l=>{this.$iApi.event.emit(rt.MAP_KEYUP,l.native),l.stopPropagation()})}),this.handlers.push({type:"focus",handler:this.esriView.on("focus",l=>{this.$iApi.event.emit(rt.MAP_FOCUS,l.native)})}),this.handlers.push({type:"blur",handler:this.esriView.on("blur",l=>{this.$iApi.event.emit(rt.MAP_BLUR,l.native)})}),this.esriView.container.addEventListener("touchmove",l=>{l.preventDefault()}),this.esriView.watch("fatalError",()=>{const l=new IntersectionObserver(u=>{u.forEach(c=>{c.isIntersecting&&(this.esriView?.tryFatalErrorRecovery(),l.disconnect())})});l.observe(this.esriView.container)}),this.esriView.when(()=>{if(this._viewPromise.resolveMe(),this.created=!0,this.applyBasemap(s),n.recoveryBasemap?.basemapId){const l=n.recoveryBasemap.timeout??8e3;l>0&&setTimeout(()=>{this.trackFirstBasemap&&this.recoverBasemap(n.id)},l)}})}destroyMapView(){this.esriView?.container.removeEventListener("touchmove",t=>{t.preventDefault()}),super.destroyMapView()}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const r=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=Rt(r.esriBasemap);const i=fo(this.$vApp.$pinia);i.activeBasemapConfig=r.config}setBasemap(t){if(!this.esriView||!this.esriMap)return this.noMapErr(),!1;const r=fo(this.$vApp.$pinia),i=this.findBasemap(t),n=r.activeBasemapConfig.tileSchemaId!==i.tileSchemaId;if(n){const o=this.getExtent().center(),a=this.getScale();this._viewPromise=new zi,this.created=!1,this.$iApi.event.emit(rt.MAP_REFRESH_START),this.destroyMapView(),this.createMapView(i),this.viewPromise.then(()=>{this.$iApi.event.emit(rt.MAP_REFRESH_END),this.$iApi.event.emit(rt.MAP_BASEMAPCHANGE,{basemapId:t,schemaChanged:n});const l=this.findClosestScale(a);this.$iApi.geo.proj.projectGeometry(this._rampSR,o).then(u=>this.zoomMapTo(u,l,!1))})}else this.applyBasemap(i),this.esriView.background=new Vne({color:new kh(i.backgroundColour).toESRI()}),this.$iApi.event.emit(rt.MAP_BASEMAPCHANGE,{basemapId:t,schemaChanged:n});return n}recoverBasemap(t){this.esriMap||this.noMapErr(),this.trackFirstBasemap=!1;const i=fo(this.$vApp.$pinia).config.map;if(i){const s=i.tileSchemas.find(n=>n.id===t);if(s?.recoveryBasemap?.basemapId){const n=this.findBasemap(s.recoveryBasemap.basemapId);this.applyBasemap(n)}}}addLayer(t,r=void 0){return new Promise((i,s)=>{if(this.esriMap||(this.noMapErr(),s()),t.initiationState!==Jr.INITIATING&&t.initiationState!==Jr.INITIATED&&t.layerState!==yi.ERROR&&t.initiate(),t.mapLayer&&r===void 0){const u=this.$iApi.geo.layer.layerOrderIds();if(t.isCosmetic)r=u.length;else{const c=this.$iApi.geo.layer.allLayers();let p=!0;for(let f=u.length-1;f>=0&&p;f--){const m=c.find(g=>g.id===u[f]);m&&!m.isCosmetic&&(r=f+1,p=!1)}p&&(r=0)}}Nu(this.$vApp.$pinia).addLayer(t,r),this.$iApi.event.emit(rt.LAYER_REGISTERED,t);const o=Date.now();let a=0;const l=setInterval(()=>{a+=250,a>=t.expectedTime.fail||t.layerState===yi.ERROR?(clearInterval(l),t.lastCancel<o&&console.error(`Failed to add layer: ${t.id}.`),s()):t.initiationState===Jr.INITIATED&&(t.esriLayer||!t.mapLayer)&&(clearInterval(l),t.mapLayer?this.insertToEsriMap(t):t.onLoad(),i())},250)})}insertToEsriMap(t){let r=0;const i=this.$iApi.geo.layer.getLayerPosition(t.id)??-1;if(i>0){const s=this.$iApi.geo.layer.layerOrderIds(),n=this.$iApi.geo.layer.allLayers();for(let o=i-1;o>-1;o--){const a=s[o],l=n.find(u=>u.id===a);if(l&&l.esriLayer){const u=this.esriMap.layers.indexOf(l.esriLayer);if(u>-1){r=u+1;break}}else l||console.error("ESRI Layer insert encountered bad state. Layer likely inserted at bottom of map.")}}i>-1&&this.esriMap?.add(t.esriLayer,r)}reorder(t,r,i=!1){if(r<0){console.error("Negative index passed to map reorder");return}if(!this.esriMap){this.noMapErr();return}if(t.isSublayer&&(t=t.parentLayer),!t.mapLayer){console.error("Attempted to reorder a data layer");return}const s=this.$iApi.geo.layer.allLayers();let n=this.$iApi.geo.layer.layerOrderIds();if(i){if(t.isCosmetic)return;if(r>0){const l=n.filter(u=>{const c=s.find(p=>p.id===u);return c?!c.isCosmetic:(console.error("Layer reorder had critical error"),!1)});r>=l.length&&(console.error("non-cosmetic reorder index was too high"),r=l.length-1),r=n.indexOf(l[r])}}else r>=n.length&&(console.error("reorder index was too high"),r=n.length-1);const o=n.indexOf(t.id);if(o===r)return;if(Nu(this.$vApp.$pinia).reorderLayer(t,r),t.esriLayer&&this.esriMap.layers.indexOf(t.esriLayer)>-1){let l=0;if(r>0){n=this.$iApi.geo.layer.layerOrderIds();for(let u=r-1;u>-1;u--){const c=n[u],p=s.find(f=>f.id===c);if(p&&p.esriLayer){const f=this.esriMap.layers.indexOf(p.esriLayer);if(f>-1){const m=r<o?1:0;l=f+m;break}}else p||console.error("Layer reorder had critical error")}}this.esriMap.reorder(t.esriLayer,l)}this.$iApi.event.emit(rt.MAP_REORDER,{layer:t,newIndex:r})}removeSublayer(t){let r,i;if(typeof t=="string")r=t,i=this.$iApi.geo.layer.getLayer(r);else{if(!t.isSublayer)throw new Error(`Attempted to call removeSublayer on a non-sublayer object: ${t}`);r=t.uid,i=t}if(!i)throw new Error("Sublayer could not be found for removal.");i.visibility=!1,i.isRemoved=!0,this.$iApi.event.emit(rt.LAYER_REMOVE,t),i.parentLayer?.sublayers.every(s=>s.isRemoved)&&this.removeLayer(i.parentLayer)}removeLayer(t){if(!this.esriMap){this.noMapErr();return}let r;if(t instanceof K9?r=t:r=this.$iApi.geo.layer.getLayer(t),!r)throw new Error("Layer could not be found for removal.");if(r.isSublayer){this.removeSublayer(r);return}r.supportsSublayers&&r.sublayers.forEach(s=>{s.isRemoved||this.removeSublayer(s)});const i=Nu(this.$vApp.$pinia);i.removeLayer(r),i.removeLayerConfig(r.id),r.removeEsriLayer(),r.initiationState===Jr.INITIATED&&r.terminate(),r.isRemoved=!0,this.$iApi.event.emit(rt.LAYER_REMOVE,r)}setMapMouseThrottle(t){if(t<0)return console.error("Cannot set map mouse throttle to value that is less than 0."),!1;this.mapMouseThrottle=t;const r=this.handlers.findIndex(i=>i.type==="pointer-move");if(r!==-1){const i=this.handlers[r];this.handlers.splice(r,1),i.handler.remove()}return r!==-1&&this.esriView&&this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),!0}createMouseMoveHandler(){if(!this.esriView){this.noMapErr();return}return Bm(this.mapMouseThrottle,t=>{this.$iApi.event.emit(rt.MAP_MOUSEMOVE,this.$iApi.geo.geom.esriMapMouseToRamp(t))})}async zoomToLevel(t){if(this.esriView)return this.esriView.goTo({zoom:t});this.noMapErr()}async zoomIn(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom+1);this.noMapErr()}async zoomOut(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom-1);this.noMapErr()}async zoomToVisibleScale(t){if(!this.esriView){this.noMapErr();return}const r=t.isOffScale(this.getScale());if(!r.offScale)return;const i=this.esriView.constraints.lods;if(!i)return this.zoomMapTo(this.getExtent().center(),(r.zoomIn,t.minScale));const s=r.zoomIn?i:[...i].reverse(),n=s.find(o=>r.zoomIn?o.scale<t.minScale:o.scale>t.maxScale)||s[s.length-1];return this.zoomToLevel(n.level)}findClosestScale(t){const r=this.esriView?.constraints.lods;if(!r)return t;const i=r.map(n=>Math.abs(n.scale-t)),s=i.indexOf(Math.min(...i));return r[s].scale}async takeScreenshot(t){if(this.esriView)return t.quality||(t.quality=1),t.format||(t.format="png"),this.esriView.takeScreenshot(t);throw new Error("Export attempted without a map view available")}screenPointToMapPoint(t){return this.esriView?jn.fromESRI(this.esriView.toMap({x:t.screenX,y:t.screenY}),"mappoint"):(this.noMapErr(),new jn("i_am_error",[0,0],void 0,!0))}mapPointToScreenPoint(t){if(this.esriView){const r=this.esriView.toScreen(t.toESRI());return{screenX:r.x,screenY:r.y}}else return this.noMapErr(),{screenX:1,screenY:1}}runIdentify(t){const r=this.$iApi.geo.layer.allLayersOnMap(!1).filter(u=>u.canIdentify());let i;if(t instanceof jn){const u=this.mapPointToScreenPoint(t);i={mapPoint:t,screenX:u.screenX,screenY:u.screenY,button:0,input:"mouse",clickTime:Date.now()}}else i=t;if(r===void 0)return{click:i,results:[]};let s=Promise.resolve([]);r.some(u=>u.identifyMode===Ki.HYBRID||u.identifyMode===Ki.SYMBOLIC)&&(s=this.esriView.hitTest({x:i.screenX,y:i.screenY}).then(u=>u.results.map(c=>({layerId:c.layer.id,layerIdx:0,oid:c.graphic.getObjectId()}))));const n={geometry:i.mapPoint,hitTest:s},o=r.filter(u=>u.supportsIdentify).map(u=>(n.tolerance=i.input=="touch"?u.touchTolerance:u.mouseTolerance,u.runIdentify(n))).flat(),a=Date.now();o.forEach(u=>{u.requestTime=a});const l={results:o,click:i};return this.$iApi.event.emit(rt.MAP_IDENTIFY,l),l}async getGraphicAtCoord(t){if(!this.esriView){this.noMapErr();return}const r=this.$iApi.geo.layer.allLayersOnMap(!1).filter(l=>l.supportsFeatures||l.layerType===ct.GRAPHIC);if(r.length===0)return;const i=await this.esriView.hitTest({x:t.screenX,y:t.screenY});if(i.results.length===0)return;const s=i.results;let n,o;const a=new Set;if(s.some(l=>{if(a.has(l.layer.id))return!1;const u=r.find(c=>c.id===l.layer.id);return u?(!u.isCosmetic&&u.layerType!==ct.GRAPHIC&&(n=u,o=l.graphic),!0):(a.add(l.layer.id),!1)}),n&&o)return{oid:o.getObjectId(),layerId:n.id,layerIdx:n.layerIdx}}_activeKeys=[];_panInterval;_mouseFocus=!1;mapKeyDown(t){const r=["=","-"];["Shift","Control","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this._activeKeys.some(s=>r.includes(s))||this.keyPan()):r.includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this.keyZoom(t)):t.key==="Enter"?this.runIdentify(this.getExtent().center()):t.key==="Tab"&&this._activeKeys.push(t.key)}mapKeyUp(t){const r=["=","-"];this._activeKeys.includes(t.key)&&!r.includes(t.key)&&(this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this._activeKeys.some(i=>r.includes(i))||this.keyPan())}setMouseFocus(){this._mouseFocus=!0}stopKeyPan(){this._activeKeys.includes("Tab")&&(this._mouseFocus=!1),this._activeKeys=[],clearInterval(this._panInterval)}get keysActive(){return this._activeKeys.filter(t=>!["Control","Shift"].includes(t)).length!==0}get mouseFocus(){return this._mouseFocus}async keyZoom(t){clearInterval(this._panInterval),t.key==="="?await this.zoomIn():t.key==="-"&&await this.zoomOut(),this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this.keyPan()}keyPan(){if(clearInterval(this._panInterval),!this.keysActive)return;const t=this.getExtent().center(),r=this.mapPointToScreenPoint(t),i=this.screenPointToMapPoint({screenX:r.screenX+5,screenY:r.screenY+5}),s=Math.abs(i.x-t.x),n=Math.abs(i.y-t.y);let o=0,a=0,l=1;for(let c=0;c<this._activeKeys.length;++c)switch(this._activeKeys[c]){case"ArrowLeft":o-=s;break;case"ArrowRight":o+=s;break;case"ArrowUp":a+=n;break;case"ArrowDown":a-=n;break;case"Shift":l=2;break;case"Control":l=.25;break}const u=this.getScale();this._panInterval=setInterval(()=>{t.x+=l*o,t.y+=l*a,this.zoomMapTo(t,u,!1)},25)}}const VQe={geometryType:"point",renderer:{type:"simple",symbol:{type:"esriSMS",style:"esriSMSCircle",color:[67,100,255,200],size:7,outline:{color:[0,0,0,255],width:1}}}},UQe={geometryType:"polyline",renderer:{type:"simple",symbol:{type:"esriSLS",style:"esriSLSSolid",color:[90,90,90,200],width:2}}},zQe={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[76,76,125,200],outline:{type:"esriSLS",style:"esriSLSSolid",color:[110,110,110,255],width:1}}}},GQe={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[255,0,0,64],outline:{type:"esriSLS",style:"esriSLSSolid",color:[240,128,128,255],width:1}}}},BQe={circlePoint:VQe,solidLine:UQe,outlinedPoly:zQe,boundingBoxPoly:GQe};var E3={exports:{}},qQe=E3.exports,UW;function HQe(){return UW||(UW=1,function(e,t){(function(r,i){if(e.exports=i(Yne()),typeof r.navigator=="object"){if(!r.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");r.Terraformer.ArcGIS=i(r.Terraformer)}})(qQe,function(r){var i={};function s(w){var S=0,M=0,x=[],_,I,E,A;E=w.match(/((\+|\-)[^\+\-]+)/g),A=parseInt(E[0],32);for(var C=1;C<E.length;C+=2)_=parseInt(E[C],32)+S,S=_,I=parseInt(E[C+1],32)+M,M=I,x.push([_/A,I/A]);return x}function n(w){return o(w[0],w[w.length-1])||w.push(w[0]),w}function o(w,S){for(var M=0;M<w.length;M++)if(w[M]!==S[M])return!1;return!0}function a(w){var S={};for(var M in w)w.hasOwnProperty(M)&&(S[M]=w[M]);return S}function l(w){var S=0,M=0,x=w.length,_=w[M],I;for(M;M<x-1;M++)I=w[M+1],S+=(I[0]-_[0])*(I[1]+_[1]),_=I;return S>=0}function u(w){var S=[],M=w.slice(0),x=n(M.shift().slice(0));if(x.length>=4){l(x)||x.reverse(),S.push(x);for(var _=0;_<M.length;_++){var I=n(M[_].slice(0));I.length>=4&&(l(I)&&I.reverse(),S.push(I))}}return S}function c(w){for(var S=[],M=0;M<w.length;M++)for(var x=u(w[M]),_=x.length-1;_>=0;_--){var I=x[_].slice(0);S.push(I)}return S}function p(w,S){var M=r.Tools.arraysIntersectArrays(w,S),x=r.Tools.coordinatesContainPoint(w,S[0]);return!!(!M&&x)}function f(w){for(var S=[],M=[],x,_,I,E=0;E<w.length;E++){var A=n(w[E].slice(0));if(!(A.length<4))if(l(A)){var C=[A.slice().reverse()];S.push(C)}else M.push(A.slice().reverse())}for(var O=[];M.length;){I=M.pop();var R=!1;for(x=S.length-1;x>=0;x--)if(_=S[x][0],p(_,I)){S[x].push(I),R=!0;break}R||O.push(I)}for(;O.length;){I=O.pop();var D=!1;for(x=S.length-1;x>=0;x--)if(_=S[x][0],r.Tools.arraysIntersectArrays(_,I)){S[x].push(I),D=!0;break}D||S.push([I.reverse()])}return S.length===1?{type:"Polygon",coordinates:S[0]}:{type:"MultiPolygon",coordinates:S}}function m(w,S){var M={};return S=S||{},S.idAttribute=S.idAttribute||void 0,w.spatialReference&&(w.spatialReference.wkid===3857||w.spatialReference.wkid===102100)&&(M.crs=r.MercatorCRS),typeof w.x=="number"&&typeof w.y=="number"&&(M.type="Point",M.coordinates=[w.x,w.y],(w.z||w.m)&&M.coordinates.push(w.z),w.m&&M.coordinates.push(w.m)),w.points&&(M.type="MultiPoint",M.coordinates=w.points.slice(0)),w.paths&&(w.paths.length===1?(M.type="LineString",M.coordinates=w.paths[0].slice(0)):(M.type="MultiLineString",M.coordinates=w.paths.slice(0))),w.rings&&(M=f(w.rings.slice(0))),typeof w.xmin=="number"&&typeof w.ymin=="number"&&typeof w.xmax=="number"&&typeof w.ymax=="number"&&(M.type="Polygon",M.coordinates=[[[w.xmax,w.ymax],[w.xmin,w.ymax],[w.xmin,w.ymin],[w.xmax,w.ymin],[w.xmax,w.ymax]]]),(w.compressedGeometry||w.geometry||w.attributes)&&(M.type="Feature",w.compressedGeometry&&(w.geometry={paths:[s(w.compressedGeometry)]}),M.geometry=w.geometry?m(w.geometry):null,M.properties=w.attributes?a(w.attributes):null,w.attributes&&(M.id=w.attributes[S.idAttribute]||w.attributes.OBJECTID||w.attributes.FID)),new r.Primitive(M)}function g(w,S){var M;S=S||{};var x=S.idAttribute||"OBJECTID";S.sr?M={wkid:S.sr}:w&&w.crs&&w.crs.properties.name!="urn:ogc:def:crs:OGC:1.3:CRS84"?M=null:M={wkid:4326};var _={},I;switch(w.type){case"Point":_.x=w.coordinates[0],_.y=w.coordinates[1],w.coordinates[2]&&(_.z=w.coordinates[2]),w.coordinates[3]&&(_.m=w.coordinates[3]),_.spatialReference=M;break;case"MultiPoint":_.points=w.coordinates.slice(0),_.spatialReference=M;break;case"LineString":_.paths=[w.coordinates.slice(0)],_.spatialReference=M;break;case"MultiLineString":_.paths=w.coordinates.slice(0),_.spatialReference=M;break;case"Polygon":_.rings=u(w.coordinates.slice(0)),_.spatialReference=M;break;case"MultiPolygon":_.rings=c(w.coordinates.slice(0)),_.spatialReference=M;break;case"Feature":w.geometry&&(_.geometry=g(w.geometry,S)),_.attributes=w.properties?a(w.properties):{},w.id&&(_.attributes[x]=w.id);break;case"FeatureCollection":for(_=[],I=0;I<w.features.length;I++)_.push(g(w.features[I],S));break;case"GeometryCollection":for(_=[],I=0;I<w.geometries.length;I++)_.push(g(w.geometries[I],S));break}return _}function b(w){return new r.LineString(s(w))}return i.parse=m,i.convert=g,i.toGeoJSON=m,i.fromGeoJSON=g,i.parseCompressedGeometry=b,i})}(E3)),E3.exports}var WQe=HQe();const JQe=wS(WQe);function vce(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function ZQe(e,t){var r=vce(e);return function(i,s){return t(r(i),s,e)}}function YQe(e){var t=Object.create(null),r=[];return e.forEach(function(i){for(var s in i)s in t||r.push(t[s]=s)}),r}function Y9(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function i(u,c){var p,f,m=s(u,function(g,b){if(p)return p(g,b-1);f=g,p=c?ZQe(g,c):vce(g)});return m.columns=f,m}function s(u,c){var p={},f={},m=[],g=u.length,b=0,w=0,S,M;function x(){if(b>=g)return f;if(M)return M=!1,p;var I=b,E;if(u.charCodeAt(I)===34){for(var A=I;A++<g;)if(u.charCodeAt(A)===34){if(u.charCodeAt(A+1)!==34)break;++A}return b=A+2,E=u.charCodeAt(A+1),E===13?(M=!0,u.charCodeAt(A+2)===10&&++b):E===10&&(M=!0),u.slice(I+1,A).replace(/""/g,'"')}for(;b<g;){var C=1;if(E=u.charCodeAt(b++),E===10)M=!0;else if(E===13)M=!0,u.charCodeAt(b)===10&&(++b,++C);else if(E!==r)continue;return u.slice(I,b-C)}return u.slice(I)}for(;(S=x())!==f;){for(var _=[];S!==p&&S!==f;)_.push(S),S=x();c&&(_=c(_,w++))==null||m.push(_)}return m}function n(u,c){return c==null&&(c=YQe(u)),[c.map(l).join(e)].concat(u.map(function(p){return c.map(function(f){return l(p[f])}).join(e)})).join(`
`)}function o(u){return u.map(a).join(`
`)}function a(u){return u.map(l).join(e)}function l(u){return u==null?"":t.test(u+="")?'"'+u.replace(/\"/g,'""')+'"':u}return{parse:i,parseRows:s,format:n,formatRows:o}}var J$=Y9(","),KQe=J$.parse,XQe=J$.parseRows,QQe=J$.format,eet=J$.formatRows,Z$=Y9("	"),tet=Z$.parse,ret=Z$.parseRows,iet=Z$.format,set=Z$.formatRows;const net=Object.freeze(Object.defineProperty({__proto__:null,csvFormat:QQe,csvFormatRows:eet,csvParse:KQe,csvParseRows:XQe,dsvFormat:Y9,tsvFormat:iet,tsvFormatRows:set,tsvParse:tet,tsvParseRows:ret},Symbol.toStringTag,{value:"Module"})),oet=r8e(net);var kf={exports:{}},zW;function aet(){if(zW)return kf.exports;zW=1,kf.exports=e,kf.exports.pair=n,kf.exports.format=r,kf.exports.formatPair=t,kf.exports.coordToDMS=i;function e(a,l){var u=s(a,l);return u===null?null:u.val}function t(a){return r(a.lat,"lat")+" "+r(a.lon,"lon")}function r(a,l){var u=i(a,l);return u.whole+"Â° "+(u.minutes?u.minutes+"' ":"")+(u.seconds?u.seconds+'" ':"")+u.dir}function i(a,l){var u={lat:["N","S"],lon:["E","W"]}[l]||"",c=u[a>=0?0:1],p=Math.abs(a),f=Math.floor(p),m=p-f,g=m*60,b=Math.floor(g),w=Math.floor((g-b)*60);return{whole:f,minutes:b,seconds:w,dir:c}}function s(a,l){if(l||(l="NSEW"),typeof a!="string")return null;a=a.toUpperCase();var u=/^[\s\,]*([NSEW])?\s*([\-|\â€”|\â€•]?[0-9.]+)[Â°ÂºËš]?\s*(?:([0-9.]+)['â€™â€²â€˜]\s*)?(?:([0-9.]+)(?:''|"|â€|â€³)\s*)?([NSEW])?/,c=a.match(u);if(!c)return null;var p=c[0],f;if(c[1]&&c[5]?(f=c[1],p=p.slice(0,-1)):f=c[1]||c[5],f&&l.indexOf(f)===-1)return null;var m=c[2]?parseFloat(c[2]):0,g=c[3]?parseFloat(c[3])/60:0,b=c[4]?parseFloat(c[4])/3600:0,w=m<0?-1:1;return(f==="S"||f==="W")&&(w*=-1),{val:(Math.abs(m)+g+b)*w,dim:f,matched:p,remain:a.slice(p.length)}}function n(a,l){a=a.trim();var u=s(a,l);if(!u)return null;a=u.remain.trim();var c=s(a,l);return!c||c.remain?null:u.dim?o(u.val,c.val,u.dim):[u.val,c.val]}function o(a,l,u){if(u==="N"||u==="S")return[a,l];if(u==="W"||u==="E")return[l,a]}return kf.exports}var FC,GW;function uet(){if(GW)return FC;GW=1;var e=oet,t=aet(),r=/(Lat)(itude)?/gi,i=/(L)(on|ng)(gitude)?/i;function s(w,S){var M,x,_;for(var I in w)x=I.match(S),x&&(!M||x[0].length/I.length>_)&&(_=x[0].length/I.length,M=I);return M}function n(w){return s(w,r)}function o(w){return s(w,i)}function a(w){return!!w.match(r)}function l(w){return!!w.match(i)}function u(w){return typeof w=="object"?Object.keys(w).length:0}function c(w){var S=[",",";","	","|"],M=[];return S.forEach(function(x){var _=e.dsvFormat(x).parse(w);if(_.length>=1){for(var I=u(_[0]),E=0;E<_.length;E++)if(u(_[E])!==I)return;M.push({delimiter:x,arity:Object.keys(_[0]).length})}}),M.length?M.sort(function(x,_){return _.arity-x.arity})[0].delimiter:null}function p(w){return delete w.columns,w}function f(w){var S=c(w);return S?p(e.dsvFormat(S).parse(w)):null}function m(w,S,M){M||(M=S,S={}),S.delimiter=S.delimiter||",";var x=S.latfield||"",_=S.lonfield||"",I=S.crs||"",E=[],A={type:"FeatureCollection",features:E};if(I!==""&&(A.crs={type:"name",properties:{name:I}}),S.delimiter==="auto"&&typeof w=="string"&&(S.delimiter=c(w),!S.delimiter)){M({type:"Error",message:"Could not autodetect delimiter"});return}var C=S.numericFields?S.numericFields.split(","):null,O=typeof w=="string"?e.dsvFormat(S.delimiter).parse(w,function(P){if(C)for(var z in P)C.includes(z)&&(P[z]=+P[z]);return P}):w;if(!O.length){M(null,A);return}var R=[],D;x||(x=n(O[0])),_||(_=o(O[0]));var N=!x||!_;if(N){for(D=0;D<O.length;D++)E.push({type:"Feature",properties:O[D],geometry:null});M(R.length?R:null,A);return}for(D=0;D<O.length;D++)if(O[D][_]!==void 0&&O[D][x]!==void 0){var U=O[D][_],J=O[D][x],y,T,$;$=t(U,"EW"),$&&(U=$),$=t(J,"NS"),$&&(J=$),y=parseFloat(U),T=parseFloat(J),isNaN(y)||isNaN(T)?R.push({message:"A row contained an invalid value for latitude or longitude",row:O[D],index:D}):(S.includeLatLon||(delete O[D][_],delete O[D][x]),E.push({type:"Feature",properties:O[D],geometry:{type:"Point",coordinates:[parseFloat(y),parseFloat(T)]}}))}M(R.length?R:null,A)}function g(w){for(var S=w.features,M={type:"Feature",geometry:{type:"LineString",coordinates:[]}},x=0;x<S.length;x++)M.geometry.coordinates.push(S[x].geometry.coordinates);return M.properties=S.reduce(function(_,I){for(var E in I.properties)_[E]||(_[E]=[]),_[E].push(I.properties[E]);return _},{}),{type:"FeatureCollection",features:[M]}}function b(w){for(var S=w.features,M={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},x=0;x<S.length;x++)M.geometry.coordinates[0].push(S[x].geometry.coordinates);return M.properties=S.reduce(function(_,I){for(var E in I.properties)_[E]||(_[E]=[]),_[E].push(I.properties[E]);return _},{}),{type:"FeatureCollection",features:[M]}}return FC={isLon:l,isLat:a,guessLatHeader:n,guessLonHeader:o,csv:e.csvParse,tsv:e.tsvParse,dsv:e,auto:f,csv2geojson:m,toLine:g,toPolygon:b},FC}var jC=uet();const cet={Point:"circlePoint",MultiPoint:"circlePoint",LineString:"solidLine",MultiLineString:"solidLine",Polygon:"outlinedPoly",MultiPolygon:"outlinedPoly"};function het(e){if(e.type!=="FeatureCollection")throw new Error("GeoJSON is not in FeatureCollection format");let t=!0,r=!0;for(let i=0;i<e.features.length;i++){const s=e.features[i];Object.assign(s.properties,{ID_FILE:"",OBJECTID_FILE:""}),"id"in s&&typeof s.id<"u"&&(s.properties.ID_FILE=s.id,t=!1),"OBJECTID"in s.properties&&(s.properties.OBJECTID_FILE=s.properties.OBJECTID,delete s.properties.OBJECTID,r=!1),s.id=i+1}if(t)for(let i=0;i<e.features.length;i++)delete e.features[i].properties.ID_FILE;if(r)for(let i=0;i<e.features.length;i++)delete e.features[i].properties.OBJECTID_FILE}function pet(e,t){const r=i=>i.indexOf(" ")>-1;t.fields?.forEach(i=>{if(i.name&&r(i.name)){const s=i.name;let n,o="_",a;do n=s.replace(/ /g,o),a=t.fields?.find(l=>l.name===n),a&&(o+="_");while(a);i.alias=s,i.name=n;for(let l=0;l<e.features.length;l++){const u=e.features[l];u.properties[n]=u.properties[s],delete u.properties[s]}}})}function det(e,t){const r=e.features[t].geometry.geometries;if(r.length===1)e.features[t].geometry={type:r[0].type,coordinates:r[0].coordinates};else{const i=r.map(s=>s.coordinates);e.features[t].geometry={type:`Multi${r[0].type}`,coordinates:i}}}function fet(e){return e==="MultiLineString"?"LineString":e==="MultiPolygon"?"Polygon":e}class met extends qi{async fetchFileData(t,r){const i=await H$.get(t,{responseType:"arrayBuffer"});switch(r){case ct.GEOJSON:case ct.DATAJSON:return JSON.parse(this.arbToStr(i.data));case ct.SHAPEFILE:case ct.GEOJSONZIPPED:case ct.FLATGEOBUF:case ct.FLATGEOBUFZIPPED:return i.data;case ct.CSV:case ct.DATACSV:return this.arbToStr(i.data);default:console.error(`Unsupported file type passed to fetchFileData- '${r}'`)}}extractGeoJsonFields(t){if(t.features.length<1)throw new Error("GeoJSON field extraction requires at least one feature");let r="";for(let o=0;o<t.features.length;o++){const a=t.features[o];if(a.geometry.type==="GeometryCollection"){const c=a.geometry.geometries;if(c===void 0||c.length===0)throw new Error("GeoJSON file has geometry collection with missing/incomplete geometries");const p=c[0].type;for(let f=0;f<c.length;f++)if(c[f].type!==p)throw new Error("GeoJSON file has geometry collection containing multiple geometry types");det(t,o)}const u=fet(a.geometry.type);if(r==="")r=u;else if(r!==u)throw new Error("GeoJSON file contains multiple geometry types")}const i=Object.keys(t.features[0].properties).map(o=>({name:o,type:"string"}));let s=0;const n=Object.keys(t.features[0].properties);for(;s<t.features.length;){const o=t.features[s];if(o.properties&&Object.keys(o.properties).filter(a=>n.includes(a)).forEach(a=>{const l=o.properties[a];if(l!=null){const u=i.findIndex(c=>c.name===a);i[u]={name:a,type:this.inferType(l)},n.splice(n.indexOf(a),1)}}),n.length===0)break;s++}return i}extractCsvFields(t,r=","){return jC.dsv.dsvFormat(r).parseRows(t)[0].map(s=>({name:s,type:ch.STRING}))}filterCsvLatLonFields(t,r=","){const i=jC.dsv.dsvFormat(r).parseRows(t),s=i[0],n={lat:JSON.parse(JSON.stringify(s)),lon:JSON.parse(JSON.stringify(s))};for(let o=0;o<s.length;o++)for(let a=1;a<i.length;a++){const l=Number(i[a][o]),u=n.lat.indexOf(s[o]),c=n.lon.indexOf(s[o]);if((isNaN(l)||l<-90||l>90)&&u!==-1&&n.lat.splice(u,1),(isNaN(l)||l<-180||l>180)&&c!==-1&&n.lon.splice(c,1),u===-1&&c===-1)break}return n}async geoJsonToEsriJson(t,r){let i,s="",n;const o={objectIdField:"OBJECTID",fields:[{name:"OBJECTID",type:ch.OID}]};het(t);const a=t.features[0].geometry.type,l=cet[a],u=JSON.parse(JSON.stringify(BQe[l]));if(r){if(r.sourceProjection&&(s=this.$iApi.geo.proj.normalizeProj(r.sourceProjection)),r.targetSR)i=r.targetSR;else throw new Error("geoJsonToEsriJson - missing opts.targetSR arguement");r.layerId?n=r.layerId:n=this.$iApi.geo.shared.generateUUID(),r.colour&&(u.renderer.symbol.color=new kh(r.colour).toArcServer())}else throw new Error("geoJsonToEsriJson - missing opts arguement");s||(s=$t.parseGeoJsonCrs(t.crs)),o.renderer=Zy.fromJSON(u.renderer),o.fields=(o.fields||[]).concat(r.fieldMetadata?.exclusiveFields?this.extractGeoJsonFields(t).filter(b=>r.fieldMetadata?.fieldInfo?.find(w=>w.name===b.name)):this.extractGeoJsonFields(t)),r.fieldMetadata?.enforceOrder&&r.fieldMetadata?.fieldInfo&&r.fieldMetadata?.fieldInfo.length>0&&(o.fields=this.$iApi.geo.attributes.orderFields(o.fields,r.fieldMetadata?.fieldInfo)),pet(t,o);const c=this.$iApi.geo.proj.normalizeProj(i);if(r){if(r.latField){const b=o.fields.find(w=>w.name===r.latField||w.alias===r.latField);b&&(b.type=ch.DOUBLE)}if(r.lonField){const b=o.fields.find(w=>w.name===r.lonField||w.alias===r.lonField);b&&(b.type=ch.DOUBLE)}}await this.$iApi.geo.proj.checkProjBomber([s,i]);const p=$t.parseSR(i).toESRI();await this.$iApi.geo.proj.projectGeoJson(t,s,c);const f=JQe.convert(t,{sr:8888});o.geometryType=this.$iApi.geo.geom.geoJsonGeomTypeToEsriGeomType(a);const m=o.fields.map(b=>b.name);for(let b=0;b<f.length;b++){const w=f[b];w.geometry.spatialReference=p,w.geometry.type=o.geometryType,Object.keys(w.attributes).forEach(S=>{m.includes(S)?(Array.isArray(w.attributes[S])||typeof w.attributes[S]=="object")&&w.attributes[S]!=null&&(w.attributes[S]=JSON.stringify(w.attributes[S])):delete w.attributes[S]})}return(r.fieldMetadata?.fieldInfo&&r.fieldMetadata?.fieldInfo.length>0?r.fieldMetadata.fieldInfo.filter(b=>b.trim&&m.includes(b.name)).map(b=>b.name):[]).forEach(b=>{for(let w=0;w<f.length;w++){const S=f[w].attributes;typeof S[b]=="string"&&(S[b]=S[b].trim())}}),o.source=f,o.spatialReference=p,o.id=n,o}async csvToGeoJson(t,r){const i={latfield:"Lat",lonfield:"Long",delimiter:","};return r&&(r.latfield&&(i.latfield=r.latfield),r.lonfield&&(i.lonfield=r.lonfield),r.delimiter&&(i.delimiter=r.delimiter)),new Promise((s,n)=>{jC.csv2geojson(t,i,(o,a)=>{o?(console.error("csv conversion error"),console.error(o),n(o)):(a.features.map(l=>{l.properties[i.lonfield]=l.geometry.coordinates[0],l.properties[i.latfield]=l.geometry.coordinates[1]}),s(a))})})}async shapefileToGeoJson(t){return(await fe(()=>import("./shp.min-BSaRyakr.js").then(i=>i.s),__vite__mapDeps([231,232]),import.meta.url)).default(t)}fgbToGeoJson(t,r){return fe(async()=>{const{geojson:s}=await import("./flatgeobuf-Xmj1HQyn.js");return{geojson:s}},[],import.meta.url).then(({geojson:s})=>new Promise(n=>{let o=!1,a=null;const l=s.deserialize(new Uint8Array(t),void 0,p=>{a=p.crs,o=!0});let u=0;const c=setInterval(()=>{if(l&&o){clearInterval(c);let p;a&&(a.code&&a.code!==4326&&a.org==="EPSG"?p=new $t(a.code):a.wkt?p=new $t(a.wkt):console.error("Encountered FlatGeobuf with non-EPSG org: ",a)),p&&(l.crs=p.toGeoJSON()),n(l)}else u+=60,u>r&&(clearInterval(c),n({}))},60)}))}inferType(t){return typeof t=="number"?ch.DOUBLE:ch.STRING}rawDataJsonParser(t,r=!1){let i;return typeof t=="string"?i=JSON.parse(t):r?i=structuredClone(t):i=t,i}async unzipSingleFile(t){const r=await fe(()=>import("./jszip.min-DYoo7LzA.js").then(o=>o.j),__vite__mapDeps([233,232]),import.meta.url),s=await new r.default().loadAsync(t),n=Object.keys(s.files)[0];if(n&&s.file(n))return await s.file(n).async("arraybuffer");throw new Error("Could not find file in zipfile data.")}async binaryInitHelper(t){if(t.rawData&&t.rawData instanceof ArrayBuffer)return t.rawData;if(t.url)return this.$iApi.geo.layer.files.fetchFileData(t.url,t.layerType);throw new Error(`${t.layerType} config contains no url or invalid/missing raw data`)}arbToStr(t){return new TextDecoder("utf-8").decode(new Uint8Array(t))}}const yet=JSON.parse("[4326,4269,4258,31467,31468,31469,2166,2167,2168,2036,2044,2045,2065,2081,2082,2083,2085,2086,2091,2092,2093,2096,2097,2098,2105,2106,2107,2108,2109,2110,2111,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2169,2170,2171,2172,2173,2174,2175,2176,2177,2178,2179,2180,2193,2199,2200,2206,2207,2208,2209,2210,2211,2212,2319,2320,2321,2322,2323,2324,2325,2326,2327,2328,2329,2330,2331,2332,2333,2334,2335,2336,2337,2338,2339,2340,2341,2342,2343,2344,2345,2346,2347,2348,2349,2350,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2384,2385,2386,2387,2388,2389,2390,2391,2392,2393,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2406,2407,2408,2409,2410,2411,2412,2413,2414,2415,2416,2417,2418,2419,2420,2421,2422,2423,2424,2425,2426,2427,2428,2429,2430,2431,2432,2433,2434,2435,2436,2437,2438,2439,2440,2441,2442,2443,2444,2445,2446,2447,2448,2449,2450,2451,2452,2453,2454,2455,2456,2457,2458,2459,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2472,2473,2474,2475,2476,2477,2478,2479,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,2490,2491,2492,2493,2494,2495,2496,2497,2498,2499,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,2540,2541,2542,2543,2544,2545,2546,2547,2548,2549,2551,2552,2553,2554,2555,2556,2557,2558,2559,2560,2561,2562,2563,2564,2565,2566,2567,2568,2569,2570,2571,2572,2573,2574,2575,2576,2577,2578,2579,2580,2581,2582,2583,2584,2585,2586,2587,2588,2589,2590,2591,2592,2593,2594,2595,2596,2597,2598,2599,2600,2601,2602,2603,2604,2605,2606,2607,2608,2609,2610,2611,2612,2613,2614,2615,2616,2617,2618,2619,2620,2621,2622,2623,2624,2625,2626,2627,2628,2629,2630,2631,2632,2633,2634,2635,2636,2637,2638,2639,2640,2641,2642,2643,2644,2645,2646,2647,2648,2649,2650,2651,2652,2653,2654,2655,2656,2657,2658,2659,2660,2661,2662,2663,2664,2665,2666,2667,2668,2669,2670,2671,2672,2673,2674,2675,2676,2677,2678,2679,2680,2681,2682,2683,2684,2685,2686,2687,2688,2689,2690,2691,2692,2693,2694,2695,2696,2697,2698,2699,2700,2701,2702,2703,2704,2705,2706,2707,2708,2709,2710,2711,2712,2713,2714,2715,2716,2717,2718,2719,2720,2721,2722,2723,2724,2725,2726,2727,2728,2729,2730,2731,2732,2733,2734,2735,2738,2739,2740,2741,2742,2743,2744,2745,2746,2747,2748,2749,2750,2751,2752,2753,2754,2755,2756,2757,2758,2935,2936,2937,2938,2939,2940,2941,2953,2963,3006,3007,3008,3009,3010,3011,3012,3013,3014,3015,3016,3017,3018,3019,3020,3021,3022,3023,3024,3025,3026,3027,3028,3029,3030,3034,3035,3038,3039,3040,3041,3042,3043,3044,3045,3046,3047,3048,3049,3050,3051,3058,3059,3068,3114,3115,3116,3117,3118,3120,3126,3127,3128,3129,3130,3131,3132,3133,3134,3135,3136,3137,3138,3139,3140,3146,3147,3150,3151,3152,3300,3301,3328,3329,3330,3331,3332,3333,3334,3335,3346,3350,3351,3352,3366,3386,3387,3388,3389,3390,3396,3397,3398,3399,3407,3414,3416,3764,3788,3789,3790,3791,3793,3795,3796,3819,3821,3823,3824,3833,3834,3835,3836,3837,3838,3839,3840,3841,3842,3843,3844,3845,3846,3847,3848,3849,3850,3851,3852,3854,3873,3874,3875,3876,3877,3878,3879,3880,3881,3882,3883,3884,3885,3888,3889,3906,3907,3908,3909,3910,3911,4001,4002,4003,4004,4005,4006,4007,4008,4009,4010,4011,4012,4013,4014,4015,4016,4017,4018,4019,4020,4021,4022,4023,4024,4025,4026,4027,4028,4029,4030,4031,4032,4033,4034,4035,4036,4037,4038,4040,4041,4042,4043,4044,4045,4046,4047,4052,4053,4054,4055,4074,4075,4080,4081,4120,4121,4122,4123,4124,4125,4126,4127,4128,4129,4130,4131,4132,4133,4134,4135,4136,4137,4138,4139,4140,4141,4142,4143,4144,4145,4146,4147,4148,4149,4150,4151,4152,4153,4154,4155,4156,4157,4158,4159,4160,4161,4162,4163,4164,4165,4166,4167,4168,4169,4170,4171,4172,4173,4174,4175,4176,4178,4179,4180,4181,4182,4183,4184,4185,4188,4189,4190,4191,4192,4193,4194,4195,4196,4197,4198,4199,4200,4201,4202,4203,4204,4205,4206,4207,4208,4209,4210,4211,4212,4213,4214,4215,4216,4218,4219,4220,4221,4222,4223,4224,4225,4226,4227,4228,4229,4230,4231,4232,4233,4234,4235,4236,4237,4238,4239,4240,4241,4242,4243,4244,4245,4246,4247,4248,4249,4250,4251,4252,4253,4254,4255,4256,4257,4259,4260,4261,4262,4263,4264,4265,4266,4267,4268,4270,4271,4272,4273,4274,4275,4276,4277,4278,4279,4280,4281,4282,4283,4284,4285,4286,4287,4288,4289,4291,4292,4293,4294,4295,4296,4297,4298,4299,4300,4301,4302,4303,4304,4306,4307,4308,4309,4310,4311,4312,4313,4314,4315,4316,4317,4318,4319,4322,4324,4327,4329,4339,4341,4343,4345,4347,4349,4351,4353,4355,4357,4359,4361,4363,4365,4367,4369,4371,4373,4375,4377,4379,4381,4383,4386,4388,4417,4434,4463,4466,4469,4470,4472,4475,4480,4482,4483,4490,4491,4492,4493,4494,4495,4496,4497,4498,4499,4500,4501,4502,4503,4504,4505,4506,4507,4508,4509,4510,4511,4512,4513,4514,4515,4516,4517,4518,4519,4520,4521,4522,4523,4524,4525,4526,4527,4528,4529,4530,4531,4532,4533,4534,4535,4536,4537,4538,4539,4540,4541,4542,4543,4544,4545,4546,4547,4548,4549,4550,4551,4552,4553,4554,4555,4557,4558,4568,4569,4570,4571,4572,4573,4574,4575,4576,4577,4578,4579,4580,4581,4582,4583,4584,4585,4586,4587,4588,4589,4600,4601,4602,4603,4604,4605,4606,4607,4608,4609,4610,4611,4612,4613,4614,4615,4616,4617,4618,4619,4620,4621,4622,4623,4624,4625,4626,4627,4628,4629,4630,4631,4632,4633,4634,4635,4636,4637,4638,4639,4640,4641,4642,4643,4644,4645,4646,4652,4653,4654,4655,4656,4657,4658,4659,4660,4661,4662,4663,4664,4665,4666,4667,4668,4669,4670,4671,4672,4673,4674,4675,4676,4677,4678,4679,4680,4681,4682,4683,4684,4685,4686,4687,4688,4689,4690,4691,4692,4693,4694,4695,4696,4697,4698,4699,4700,4701,4702,4703,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4823,4824,4839,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4874,4875,4876,4877,4878,4879,4880,4883,4885,4887,4889,4891,4893,4895,4898,4900,4901,4902,4903,4904,4907,4909,4921,4923,4925,4927,4929,4931,4933,4935,4937,4939,4941,4943,4945,4947,4949,4951,4953,4955,4957,4959,4961,4963,4965,4967,4969,4971,4973,4975,4977,4979,4981,4983,4985,4987,4989,4991,4993,4995,4997,4999,5012,5013,5017,5048,5105,5106,5107,5108,5109,5110,5111,5112,5113,5114,5115,5116,5117,5118,5119,5120,5121,5122,5123,5124,5125,5126,5127,5128,5129,5130,5132,5167,5168,5169,5170,5171,5172,5173,5174,5175,5176,5177,5178,5179,5180,5181,5182,5183,5184,5185,5186,5187,5188,5224,5228,5229,5233,5245,5246,5251,5252,5253,5254,5255,5256,5257,5258,5259,5263,5264,5269,5270,5271,5272,5273,5274,5275,5801,5802,5803,5804,5808,5809,5810,5811,5812,5813,5814,5815,5816,20004,20005,20006,20007,20008,20009,20010,20011,20012,20013,20014,20015,20016,20017,20018,20019,20020,20021,20022,20023,20024,20025,20026,20027,20028,20029,20030,20031,20032,20064,20065,20066,20067,20068,20069,20070,20071,20072,20073,20074,20075,20076,20077,20078,20079,20080,20081,20082,20083,20084,20085,20086,20087,20088,20089,20090,20091,20092,21413,21414,21415,21416,21417,21418,21419,21420,21421,21422,21423,21453,21454,21455,21456,21457,21458,21459,21460,21461,21462,21463,21473,21474,21475,21476,21477,21478,21479,21480,21481,21482,21483,21896,21897,21898,21899,22171,22172,22173,22174,22175,22176,22177,22181,22182,22183,22184,22185,22186,22187,22191,22192,22193,22194,22195,22196,22197,25884,27205,27206,27207,27208,27209,27210,27211,27212,27213,27214,27215,27216,27217,27218,27219,27220,27221,27222,27223,27224,27225,27226,27227,27228,27229,27230,27231,27232,27391,27392,27393,27394,27395,27396,27397,27398,27492,28402,28403,28404,28405,28406,28407,28408,28409,28410,28411,28412,28413,28414,28415,28416,28417,28418,28419,28420,28421,28422,28423,28424,28425,28426,28427,28428,28429,28430,28431,28432,28462,28463,28464,28465,28466,28467,28468,28469,28470,28471,28472,28473,28474,28475,28476,28477,28478,28479,28480,28481,28482,28483,28484,28485,28486,28487,28488,28489,28490,28491,28492,29701,29702,30161,30162,30163,30164,30165,30166,30167,30168,30169,30170,30171,30172,30173,30174,30175,30176,30177,30178,30179,30800,31251,31252,31253,31254,31255,31256,31257,31258,31259,31275,31276,31277,31278,31279,31281,31282,31283,31284,31285,31286,31287,31288,31289,31290,31466,31700]");function zy(e,t){return e.then(function(r){return[null,r]}).catch(function(r){return[r,void 0]})}class get extends qi{async loadWfsData(t,r=-1,i=0,s=1e3,n={type:"FeatureCollection",features:[]},o=!1){let a={offset:i.toString(),limit:s.toString()};r===-1&&(a={resulttype:"hits"});const u=new HI(t).updateQuery(a),[c,p]=await zy(H$.get(u));if(!p)return console.error(`WFS data failed to load for ${t}`,c),Promise.reject(c);const f=p.data;if(r===-1)return r=p.data.numberMatched,this.loadWfsData(t,r,i,s,n,o);if(n.features=n.features.concat(f.features),f.features.length<r-i){const m=Math.min(s,r-i-f.features.length);return this.loadWfsData(u,r,f.features.length+i,m,n,o)}else return o&&n.features.length>0&&n.features[0].geometry.type===mi.POINT&&n.features.forEach(m=>{const g=m.geometry.coordinates;m.properties.rvInternalCoordX=g[0],m.properties.rvInternalCoordY=g[1]}),n}reversedAxisWKIDs(){return yet}parseCapabilities(t){const r=()=>{let o=t;if(t.indexOf("?")===-1)o+="?service=WMS&request=GetCapabilities";else{const a=new HI(t.toUpperCase());"SERVICE"in a.queryMap||(o+="&service=WMS"),"REQUEST"in a.queryMap||(o+="&request=GetCapabilities")}return Re(o,{responseType:"xml"}).then(a=>a.data)},i=new Promise(o=>{r().then(a=>o(a)).catch(()=>{console.error("Get capabilities failed; trying the second time;"),o(r())})}),s=o=>{let a=o.Layer;return a?(Array.isArray(a)||(a=[a]),a.map(l=>{const u=l.Name,c=l.Title;let p=l.Style;const f=[],m={};return p&&(Array.isArray(p)||(p=[p]),p.forEach(g=>{const b=g.Name;if(f.push(b),g.LegendURL){const S=g.LegendURL.OnlineResource["@_xlink:href"];m[b]=S.replaceAll("&amp;","&")}})),{name:u?.toString()??null,title:c,queryable:l["@_queryable"]==="1",layers:s(l),allStyles:f,styleToURL:m,currentStyle:f[0]}})):[]},n=o=>{let a=o.Format;return Array.isArray(a)||(a=[a]),a};return fe(async()=>{const{XMLParser:o}=await import("./fxp-rjvO85py.js").then(a=>a.f);return{XMLParser:o}},[],import.meta.url).then(({XMLParser:o})=>i.then(a=>{if(!a)return[];const l=new XMLSerializer().serializeToString(a),u={ignoreAttributes:!1},c=new o(u).parse(l);if("ServiceExceptionReport"in c)return console.error(c.ServiceExceptionReport.ServiceException),[];const p=c.WMS_Capabilities.Capability;return{layers:s(p),queryTypes:n(p.Request.GetFeatureInfo)}}))}}class L2{static makeRawItem(t,r){const i=Promise.resolve();return Fs({format:t,data:r,started:!0,loaded:!0,loading:i,load(){return i}})}static makeOidItem(t,r){const i=new zi,s={format:q0.ESRI,data:void 0,started:!1,loaded:!1,loading:i.getPromise(),async load(){if(!this.started){this.started=!0;const n=await r.getGraphic(t,{getAttribs:!0});this.data=n.attributes,this.loaded=!0,i.resolveMe()}return i.getPromise()}};return Fs(s)}}class vet extends qi{files;ogc;constructor(t){super(t),this.files=new met(t),this.ogc=new get(t)}createLayer(t){let r;switch(t.layerType){case ct.FEATURE:r=Aet;break;case ct.MAPIMAGE:r=$et;break;case ct.GRAPHIC:r=wet;break;case ct.TILE:r=Ret;break;case ct.WFS:r=ket;break;case ct.DATATABLE:r=Det;break;case ct.WMS:r=Let;break;case ct.GEOJSON:r=_et;break;case ct.GEOJSONZIPPED:r=Tet;break;case ct.FLATGEOBUFZIPPED:r=Eet;break;case ct.CSV:r=Met;break;case ct.DATAJSON:r=Net;break;case ct.IMAGERY:r=Pet;break;case ct.SHAPEFILE:r=xet;break;case ct.FLATGEOBUF:r=Iet;break;case ct.OSM:r=Oet;break;default:throw new Error("Unsupported Layer Type "+t.layerType)}return new r(t,this.$iApi)}getLayer(t){return Nu(this.$vApp.$pinia).getLayerByAny(t)}getSublayer(t,r){const i=Nu(this.$vApp.$pinia).getLayerById(t);if(i&&i.supportsSublayers&&r<i.sublayers.length)return i.sublayers[r]}getLayerPosition(t){const r=this.getLayer(t);if(r&&r.mapLayer){const i=r.isSublayer?r.parentLayer.id:r.id,s=this.layerOrderIds().findIndex(n=>n===i);return s===-1?void 0:s}else return}layerOrderIds(){return Nu(this.$vApp.$pinia).mapOrder.slice(0)||[]}allLayers(){return Nu(this.$vApp.$pinia).layers||[]}allActiveLayers(){return this.allLayers().filter(t=>t.layerState!==yi.ERROR&&t.initiationState===Jr.INITIATED)}allLayersOnMap(t=!0){let r=this.allLayers().filter(i=>i.mapLayer&&i.initiationState===Jr.INITIATED);if(t){const i=this.layerOrderIds(),s=new Map(i.map((n,o)=>[n,o]));r.sort((n,o)=>s.get(n.id)-s.get(o.id))}return r}allDataLayers(){return this.allLayers().filter(t=>!t.mapLayer&&t.initiationState===Jr.INITIATED)}allErrorLayers(){return this.allLayers().filter(t=>t.layerState===yi.ERROR)}allInitiatingLayers(){return this.allLayers().filter(t=>t.initiationState===Jr.INITIATING)}getLayerControls(t){const r=this.getLayer(t);if(!r)return;const i=r.config.controls?.slice()??[Ii.BoundaryZoom,Ii.Datatable,Ii.Identify,Ii.Metadata,Ii.Opacity,Ii.Refresh,Ii.Reload,Ii.Remove,Ii.Settings,Ii.Symbology,Ii.Visibility],s=[];return r.supportsFeatures||s.push(Ii.Datatable),r.extent===void 0&&s.push(Ii.BoundaryZoom),(r.config?.metadata||(r.isSublayer?r.parentLayer?.config?.metadata:{})||{}).url||s.push(Ii.Metadata),!r.mapLayer&&!r.config.controls?.includes(Ii.Settings)&&s.push(Ii.Settings),s.forEach(o=>{const a=i?.indexOf(o)??-1;a!==-1&&i?.splice(a,1)}),{controls:i,disabledControls:r.config.disabledControls??[]}}async loadLayerMetadata(t){if(!t.trim())throw new Error("url missing on layer server metadata request.");const[r,i]=await zy(Re(t,{query:{f:"json"}}));if(!i)throw console.error(`Service metadata load error: ${t}`,r),new Error(`Service metadata load error: ${t}`);if(!i.data)throw console.error(`Service metadata load error: ${t}`),new Error(`Service metadata load error: ${t}`);const s=i.data,n={geometryType:Ft.NONE,minScale:0,maxScale:0,canModifyLayer:!0,extent:void 0,defaultVisibility:!0,fields:[],displayField:"",objectIdField:"",renderer:void 0,currentVersion:0,name:"",dataFormat:Ps.UNKNOWN,mapLayer:!0};if(n.name=s.name||"",n.currentVersion=s.currentVersion||-1,n.minScale=s.effectiveMinScale||s.minScale||0,n.maxScale=s.effectiveMaxScale||s.maxScale||0,n.extent=s.extent?Yr.fromArcServer(s.extent,"layer_extent"):void 0,n.defaultVisibility=s.defaultVisibility??!0,n.canModifyLayer=s.canModifyLayer??!0,s.type==="Feature Layer"||s.type==="Table"){if(n.dataFormat=Ps.ESRI_FEATURE,n.displayField=s.displayField||"",Array.isArray(s.fields)){const o=s.fields.map(l=>Uo.fromJSON(l));n.fields=o.map(l=>({name:l.name,alias:l.alias,type:l.type,length:l.length})),o.every(l=>l.type==="oid"?(n.objectIdField=l.name,!1):!0)&&(n.objectIdField=s.objectIdField||(console.error(`Encountered service with no OID defined: ${t}`),"")),s.type==="Feature Layer"?(n.geometryType=this.$iApi.geo.geom.serverGeomTypeToRampGeomType(s.geometryType),s.drawingInfo?.renderer&&(n.renderer=Pv(s.drawingInfo.renderer)),s.sourceSpatialReference&&(n.sourceSR=$t.fromConfig(s.sourceSpatialReference))):n.mapLayer=!1}}else n.dataFormat=Ps.ESRI_RASTER;return n}async loadFeatureCount(t,r=""){if(!t)return console.error("A layer without a url attempted to run the server based feature count routine."),0;const i={query:{f:"json",where:r||"1=1",returnCountOnly:!0,returnGeometry:!1}},[s,n]=await zy(Re(`${t}/query`,i));return n?n.data?Number.isInteger(n.data.count)?n.data.count:(console.error(`Funny result (${n.data.count}) during feature count: ${t}`),0):(console.error(`Unable to load feature count: ${t}`),0):(console.error(`Feature count request unsuccessful: ${t}`,s),0)}}class K9 extends qi{config={};id;uid;name;layerState;initiationState;drawState;layerIdx;layerType;layerFormat;dataFormat;supportsIdentify;supportsFeatures;mapLayer;featureCount;fields;fieldList;nameField;oidField;expectedTime;lastCancel;supportsSublayers;isSublayer;isRemoved;isFile;isCosmetic;userAdded;identify;identifyMode;hovertips;geomType;legend;esriLayer;esriSubLayer;esriView;extent;sourceSR;canModifyLayer;canReload;url;_parentLayer;_sublayers;constructor(t,r){super(r),this.config=t,this.id="",this.uid="",this.name="error",this.layerState=yi.NEW,this.drawState=ho.NOT_LOADED,this.initiationState=Jr.NEW,this.layerIdx=-1,this.layerFormat=aa.UNKNOWN,this.layerType=ct.UNKNOWN,this.dataFormat=Ps.UNKNOWN,this.supportsIdentify=!1,this.identifyMode=Ki.NONE,this.supportsFeatures=!1,this.mapLayer=!0,this.featureCount=0,this.fields=[],this.fieldList="",this.nameField="",this.oidField="",this.supportsSublayers=!1,this.isSublayer=!1,this.isRemoved=!1,this.isFile=!1,this.isCosmetic=!1,this.userAdded=!1,this.identify=!1,this.hovertips=!1,this.geomType=Ft.UNKNOWN,this.legend=[],this._sublayers=[],this.expectedTime={draw:0,load:0,fail:0},this.lastCancel=0,this.canModifyLayer=!0,this.canReload=!0,this.url=""}async initiate(){return Promise.resolve()}async terminate(){return Promise.resolve()}async reload(){return Promise.resolve()}cancelLoad(){}removeEsriLayer(){}loadPromise(){return Promise.resolve()}get isLoaded(){return!1}get layerExists(){return!1}getFieldsToTrim(){return[]}getLayerTree(){return new qI(0,"Fake tree","getLayerTree() was not implemented in layer")}getSR(){return $t.latLongSR()}get visibility(){return!1}set visibility(t){}get opacity(){return 0}set opacity(t){}get scaleSet(){return new Wne}set scaleSet(t){}isOffscale(t=void 0){return!1}zoomToVisibleScale(){return Promise.resolve()}zoomToLayerBoundary(){return Promise.resolve()}get mouseTolerance(){return 0}set mouseTolerance(t){}get touchTolerance(){return 0}set touchTolerance(t){}get drawOrder(){return[]}canIdentify(){return!1}runIdentify(t){return[]}getAttributes(){return Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){}clearFeatureCache(){}downloadedAttributes(){return 0}attribLoadAborted(){return!1}getTabularAttributes(){return Promise.resolve({columns:[],rows:[],fields:[],oidField:"error"})}getGraphic(t,r){return Promise.resolve(new Vl(new rf))}getIcon(t){return Promise.resolve("")}getSqlFilter(t){return""}setSqlFilter(t,r){}applySqlFilter(t=[]){}getFilterOIDs(t=[],r=void 0){return Promise.resolve(void 0)}getGraphicExtent(t){return Promise.resolve(Yr.fromParams("fake",0,0,0,0))}get parentLayer(){if(this.isSublayer)return this._parentLayer;throw new Error("Attempted to get parent layer of a non-sublayer object")}set parentLayer(t){if(!this.isSublayer&&t)throw new Error("Attempted to set parent layer for a non-sublayer object");this._parentLayer=t}get sublayers(){return this._sublayers}onLoad(){}onError(t=!0){}updateLayerState(t,r=!1){}updateDrawState(t){}updateInitiationState(t){}uidToIdx(t){if(t===this.uid)return-1;{const r=this._sublayers.findIndex(i=>i?.uid===t);if(r===-1)throw new Error(`Attempt to access non-existing unique id [layerid ${this.id}, uid ${t}]`);return r}}getSublayer(t){if(!this.supportsSublayers){console.warn(`Attempted to call getSublayer on a layer (layer id: ${this.id}) that does not support FCs`);return}let r;if(typeof t=="string"?r=this.uidToIdx(t):r=t,this._sublayers[r]===void 0)throw new Error(`Attempt to access non-existing layer index [layerid ${this.id}, lookup value ${t}]`);return this._sublayers[r]}controlAvailable(t){const r=this.$iApi.geo.layer.getLayerControls(this.id);return this.$iApi.geo.shared.controlAvailable(t,r)}}class bce extends K9{timers;origRampConfig;loadDefProm;loadPromDone;layerTree;constructor(t,r){super(t,r),this.name=t.name||"",this.geomType=Ft.NONE,this.dataFormat=Ps.UNKNOWN,this.layerType=ct.UNKNOWN,this.layerFormat=aa.UNKNOWN;const i=r.geo.map.layerDefaultTimes;this.expectedTime.draw=t.expectedDrawTime??i.draw,this.expectedTime.load=t.expectedLoadTime??i.load,this.expectedTime.fail=t.maxLoadTime||i.fail,this.lastCancel=0,this.timers={draw:void 0,load:void 0},this.origRampConfig=t,this.id=t.id||"",this.uid=this.$iApi.geo.shared.generateUUID(),this.isCosmetic=!1,this.isRemoved=!1,this.isSublayer=!1,this.supportsIdentify=!1,this.mapLayer=!0,this.identifyMode=Ki.NONE,this.supportsFeatures=!1,this.hovertips=!1,this.supportsSublayers=!1,this.isFile=!1,this.layerState=yi.NEW,this.initiationState=Jr.NEW,this.drawState=ho.NOT_LOADED,this.loadDefProm=new zi,this.url=this.origRampConfig.url,this.canReload=!!(this.url||this.origRampConfig.caching),this.loadPromDone=!1,this.layerTree=new qI(0,this.uid,this.name,!0)}updateInitiationState(t){this.initiationState=t,this.$iApi.event.emit(rt.LAYER_INITIATIONSTATECHANGE,{state:t,layer:this})}updateLayerState(t,r=!1){this.layerState=t,this.$iApi.event.emit(rt.LAYER_LAYERSTATECHANGE,{state:t,layer:this,userCancel:r})}updateDrawState(t){this.drawState=t,t===ho.REFRESH?this.startTimer("draw"):t===ho.UP_TO_DATE&&this.stopTimer("draw"),this.$iApi.event.emit(rt.LAYER_DRAWSTATECHANGE,{state:t,layer:this})}async initiate(){this.updateInitiationState(Jr.INITIATING),this.startTimer("load");const t=n=>{this.layerState!==yi.ERROR&&(console.error(n),this.onError())},r=Date.now(),i=setTimeout(()=>{r>this.lastCancel&&(this.lastCancel=Date.now(),t("Layer timed out during initialize. Id: "+this.id))},this.expectedTime.fail),[s]=await zy(this.onInitiate());clearTimeout(i),r>this.lastCancel&&(this.drawState!==ho.UP_TO_DATE&&this.startTimer("draw"),s?t(`Init error on layer id: ${this.id} . ${s.message}`):this.updateInitiationState(Jr.INITIATED))}async onInitiate(){if(this.isSublayer)return console.warn("Attempted to initiate a sublayer as a CommonLayer"),Promise.resolve();this.initiationState===Jr.INITIATED&&console.error(`Encountered layer initialize while already initiated, layer id ${this.id}`)}async terminate(){this.updateInitiationState(Jr.TERMINATING),await Promise.all(this.sublayers.map(t=>t.terminate())),this.loadDefProm=new zi,this.loadPromDone=!1,this.updateLayerState(yi.NEW),this.updateDrawState(ho.NOT_LOADED),this.updateInitiationState(Jr.TERMINATED)}onLoad(){const t=Date.now();let r=!1;const i=setTimeout(()=>{r=!0,this.onError()},this.expectedTime.fail);try{const s=this.onLoadActions();Promise.all(s).then(()=>{clearTimeout(i),r?this.visibility=!1:(this.stopTimer("load"),t>this.lastCancel&&(this.loadPromDone&&(this.loadDefProm=new zi),this.loadDefProm.resolveMe(),this.loadPromDone=!0,this.sublayers.forEach(n=>n.onLoad()),this.updateLayerState(yi.LOADED)))}).catch(()=>{clearTimeout(i),this.onError()})}catch(s){console.error("Encountered error on layer load: ",s),clearTimeout(i),this.onError()}}onError(t=!0){this.layerState!==yi.ERROR&&(this.initiationState===Jr.INITIATING&&this.updateInitiationState(Jr.NEW),this.loadPromDone&&(this.loadDefProm=new zi),this.loadDefProm.rejectMe(),this.loadPromDone=!0,this.sublayers.forEach(r=>r.onError(t)),t&&this.$iApi.notify.show(ta.ERROR,this.$iApi.$i18n.t("layer.error",{id:this.id})),this.stopTimer("draw"),this.stopTimer("load"),this.updateLayerState(yi.ERROR,!t))}onLoadActions(){return[]}cancelLoad(){this.isLoaded||this.initiationState===Jr.NEW||this.initiationState===Jr.TERMINATING||this.initiationState===Jr.TERMINATED||(this.lastCancel=Date.now(),this.esriLayer&&this.esriLayer.loadStatus==="loading"&&this.esriLayer.cancelLoad(),this.removeEsriLayer(),this.onError(!1))}loadPromise(){return this.loadDefProm.getPromise()}get isLoaded(){return this.layerState===yi.LOADED}canIdentify(){return this.supportsIdentify&&this.isLoaded&&this.visibility&&this.identify&&!this.scaleSet.isOffScale(this.$iApi.geo.map.getScale()).offScale}getLayerTree(){return this.layerTree}stubError(){throw new Error(`Attempted to use a method not valid for ${this.layerType}`)}getAttributes(){return this.stubError(),Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){this.stubError()}clearFeatureCache(){this.stubError()}getTabularAttributes(){return this.stubError(),Promise.resolve({columns:[],rows:[],fields:[],oidField:"error"})}getGraphic(t,r){return this.stubError(),Promise.resolve(new Vl(new rf))}getIcon(t){return this.stubError(),Promise.resolve("")}getSqlFilter(t){return this.stubError(),""}setSqlFilter(t,r){this.stubError()}getFilterOIDs(t=[],r=void 0){return this.stubError(),Promise.resolve(void 0)}getGraphicExtent(t){return this.stubError(),Promise.resolve(Yr.fromParams("fake",0,0,0,0))}applySqlFilter(t=[]){this.stubError()}setCustomParameter(t,r,i=!0){this.stubError()}startTimer(t){this.stopTimer(t),this.expectedTime[t]>0&&(this.timers[t]=window.setTimeout(()=>this.$iApi.notify.show(ta.WARNING,this.$iApi.$i18n.t(`layer.long${t}`,{id:this.name||this.id})),this.expectedTime[t]))}stopTimer(t){this.timers[t]&&(clearTimeout(this.timers[t]),this.timers[t]=void 0)}}class ng extends bce{_serverVisibility;_scaleSet;_mouseTolerance;_touchTolerance;_drawOrder;_lastFilterUpdate="";viewDefProm;esriWatches;constructor(t,r){super(t,r),this._scaleSet=new Wne,this._mouseTolerance=t.mouseTolerance!=null?t.mouseTolerance:5,this._touchTolerance=t.touchTolerance!=null?t.touchTolerance:15,this._drawOrder=[],this._serverVisibility=void 0,this.isCosmetic=t.cosmetic||!1,this.extent=t.extent?Yr.fromConfig(`${this.id}_extent`,t.extent):void 0,this.viewDefProm=new zi,this.esriWatches=[]}noLayerErr(){console.error("Attempted to manipulate the layer but no layer found. Likely .initiate() was not finished or failed. Layer id "+this.id),console.trace()}notLoadedErr(){console.error("Attempted to manipulate the layer before it was loaded. Layer id "+this.id),console.trace()}async onInitiate(){if(await super.onInitiate(),!this.esriLayer){this.noLayerErr();return}this.esriWatches.push(this.esriLayer.watch("visible",t=>{this.$iApi.event.emit(rt.LAYER_VISIBILITYCHANGE,{visibility:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("opacity",t=>{this.$iApi.event.emit(rt.LAYER_OPACITYCHANGE,{opacity:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("loadStatus",t=>{const r={"not-loaded":yi.LOADING,loading:yi.LOADING,loaded:yi.LOADED,failed:yi.ERROR};t==="loaded"?this.onLoad():t==="failed"?this.onError():this.updateLayerState(r[t])})),this.esriLayer.on("layerview-create",t=>{this.esriView=t.layerView,this.esriWatches.push(t.layerView.watch("updating",r=>{this.updateDrawState(r?ho.REFRESH:ho.UP_TO_DATE)})),this.viewDefProm.resolveMe()}),this.sublayers.forEach(t=>t.initiate())}async terminate(){this.esriLayer=void 0,await super.terminate(),this.viewDefProm=new zi,this.esriWatches.forEach(t=>t.remove()),this.esriWatches=[]}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}this.removeEsriLayer();const t=Date.now();if(this.$iApi.event.emit(rt.LAYER_RELOAD_START,this),this.sublayers.forEach(r=>this.$iApi.event.emit(rt.LAYER_RELOAD_START,r)),await this.terminate(),await this.initiate(),!(this.lastCancel>t)){if(!this.esriLayer){console.error("ESRI layer failed to re-create during reload.");return}this.$iApi.geo.map.insertToEsriMap(this),this.$iApi.event.emit(rt.LAYER_RELOAD_END,this),this.sublayers.forEach(r=>this.$iApi.event.emit(rt.LAYER_RELOAD_END,r))}}makeEsriLayerConfig(t){return{id:t.id,url:t.url,opacity:t?.state?.opacity??1,visible:t?.state?.visibility??!0}}removeEsriLayer(){this.esriLayer&&this.$iApi.geo.map.esriMap&&this.$iApi.geo.map.esriMap.layers.findIndex(r=>r.id===this.id)>-1&&this.$iApi.geo.map.esriMap.layers.remove(this.esriLayer)}onLoadActions(){const t=super.onLoadActions();this.name||(this.name=this.esriLayer?.title||this.id),this.isCosmetic||(this.identify=this.config.state?.identify??this.supportsIdentify);const r=this.$iApi.geo.proj.checkProj(this.getSR()).then(i=>i?Promise.resolve():Promise.reject());return t.push(r),t}mapCheck(){return this.$iApi.geo.map.created?!0:(console.error("Attempting to use map-dependent logic before the layer has been added to the map"),console.trace(),!1)}get scaleSet(){return this._scaleSet}set scaleSet(t){this._scaleSet=t}isOffscale(t=void 0){let r;if(typeof t>"u")if(this.mapCheck())r=this.$iApi.geo.map.getScale();else return!1;else r=t;return this.scaleSet.isOffScale(r).offScale}zoomToVisibleScale(){return this.mapCheck()?this.$iApi.geo.map.zoomToVisibleScale(this.scaleSet):Promise.resolve()}zoomToLayerBoundary(){return this.extent?this.mapCheck()?this.$iApi.geo.map.zoomMapTo(this.extent):Promise.resolve():(console.error(`Attempted to zoom to boundary of a layer with no extent (Layer Id: ${this.id})`),Promise.resolve())}get mouseTolerance(){return this._mouseTolerance}set mouseTolerance(t){if(!this.supportsIdentify){console.warn("Attempted to set click tolerance on a layer that doesn't support identify");return}if(t<0){console.error("Attempted to set a negative click tolerance");return}this._mouseTolerance=t}get touchTolerance(){return this._touchTolerance}set touchTolerance(t){if(!this.supportsIdentify){console.warn("Attempted to set touch tolerance on a layer that doesn't support identify");return}if(t<0){console.error("Attempted to set a negative touch tolerance");return}this._touchTolerance=t}get layerExists(){return this.initiationState===Jr.INITIATED&&!!this.esriLayer}get drawOrder(){return this._drawOrder}get visibility(){return this.layerExists?this.esriLayer.visible:!1}set visibility(t){this.layerExists?this.esriLayer.visible=t:this.noLayerErr()}checkVisibility(){this.supportsSublayers&&this.layerExists&&(this.visibility=this.sublayers.some(t=>t.visibility))}get opacity(){return this.layerExists?this.esriLayer.opacity:0}set opacity(t){this.layerExists?this.esriLayer.opacity=t:this.noLayerErr()}getSR(){return this.esriLayer?$t.fromESRI(this.esriLayer.spatialReference):(this.noLayerErr(),$t.latLongSR())}}class X9 extends ng{attribs;renderer;serviceUrl;canModifyLayer;filter;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.geomType=Ft.UNKNOWN,this.serviceUrl="",this.fieldList="",this.canModifyLayer=!0,this.filter=new Jne(t.permanentFilteredQuery||"",t.initialFilteredQuery||""),this.hovertips=t.state?.hovertips??!0,this.attribs=new _ce}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}async loadLayerMetadata(t={}){if(!this.serviceUrl)return;const r=Date.now(),i=await this.$iApi.geo.layer.loadLayerMetadata(this.serviceUrl);if(!(r<this.lastCancel))if(this.geomType=i.geometryType,this.attribs.quickCache=new xce(this.geomType),this.scaleSet.minScale=i.minScale,this.scaleSet.maxScale=i.maxScale,this.dataFormat=i.dataFormat,this.extent=this.extent??i.extent,this._serverVisibility=i.defaultVisibility,this.dataFormat===Ps.ESRI_FEATURE){this.supportsFeatures=!0,this.canModifyLayer=this.layerType===ct.SUBLAYER?i.canModifyLayer:!0,this.fields=i.fields,this.nameField=i.displayField,this.oidField=i.objectIdField,this.sourceSR=i.sourceSR,this.drawOrder.forEach(o=>{o.field&&this.fields.findIndex(a=>a.name===o.field)===-1&&console.error(`Draw order for layer ${this.id} references invalid field ${o.field}`)});const s=t&&t.customRenderer&&t.customRenderer.type?t.customRenderer:i.renderer;this.renderer=this.$iApi.geo.symbology.makeRenderer(s,this.fields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const n={supportsLimit:(i.currentVersion||1)>=10.1,serviceUrl:this.serviceUrl,oidField:this.oidField,batchSize:-1,attribs:"*",permanentFilter:this.getSqlFilter(Ln.PERMANENT)};this.attribs.attLoader=new Sce(this.$iApi,n),this.origRampConfig.name||(this.name=i.name??this.id)}else this.supportsFeatures=!1,this.supportsIdentify=!1}getAttributes(){return this.attribs.attLoader.getAttribs()}abortAttributeLoad(){this.attribs.attLoader.abortAttribLoad()}clearFeatureCache(){this.attribs.clearAll()}downloadedAttributes(){return this.isLoaded?this.attribs.attLoader.loadCount():0}attribLoadAborted(){return this.isLoaded?this.attribs.attLoader.isLoadAborted():!1}getFieldsToTrim(){return this.fields.filter(t=>t.trim).map(t=>t.name)}getTabularAttributes(){return this.$iApi.geo.attributes.generateTabularAttributes(this,this.attribs)}async getGraphic(t,r){let i={},s=new rf;const n=this.$iApi.geo.map;let o=!1,a=!1,l=0;if(r.getAttribs||r.getStyle){const c=this.attribs.quickCache.getAttribs(t);if(c)i=c;else if(this.attribs.attLoader.isLoaded()||this.isFile){const p=await this.attribs.attLoader.getAttribs();i=p.features[p.oidIndex[t]]}else o=!0}if(r.getGeom){l=n.getScale();const c=this.attribs.quickCache.getGeom(t,l);c?s=c:a=!0}if(o||a){const c={oid:t,serviceUrl:this.serviceUrl,includeGeometry:a,attribs:this.fieldList,fieldsToTrim:this.getFieldsToTrim()};a&&(c.mapSR=n.getSR().wkid?.toString(),this.attribs.quickCache.isPoint||(c.maxOffset=n.esriView?.resolution));const p=await this.$iApi.geo.attributes.loadSingleFeature(c);a&&(this.attribs.quickCache.setGeom(t,p.geometry,l),s=p.geometry),(o||typeof this.attribs.quickCache.getAttribs(t)>"u")&&(this.attribs.quickCache.setAttribs(t,p.attributes),o&&(i=p.attributes))}const u=new Vl(s,"",r.getAttribs?i:void 0);if(r.getStyle){const c=Rt(this.renderer.getGraphicSymbol(i));u.style=this.$iApi.geo.geom.styleEsriToRamp(c)}return u}async getIcon(t){if(!this.renderer)throw new Error("getIcon called before renderer is defined");const r=await this.getGraphic(t,{getAttribs:!0});return this.$iApi.geo.symbology.getGraphicIcon(r.attributes||{},this.renderer)}setSqlFilter(t,r){const i=this.filter.getSql(t);if(r===i)return;this.filter.setSql(t,r),this.$iApi.event.emit(rt.FILTER_CHANGE,{uid:this.uid,filterKey:t});const s=`${this.uid}-${t}-${r}`;this._lastFilterUpdate=s,setTimeout(()=>{this._lastFilterUpdate===s&&this.applySqlFilter()},100)}applySqlFilter(t=[]){throw new Error(`attempted to apply sql filter ${t} to a layer not equipped for it. likely a new subclass of AttribLayer did not override applySqlFilter`)}getSqlFilter(t){return this.filter.getSql(t)}getCombinedSqlFilter(t){return this.filter.getCombinedSql(t)}async getFilterOIDs(t=[],r=void 0){const i=this.filter.getCombinedSql(t),s=!!r;if(!(i||s))return;r&&this.filter.setExtent(r);const n=this.filter.sqlActiveFilters(t);let o=this.filter.getCache(n,s);if(!o){const a={filterGeometry:r,filterSql:i,includeGeometry:!1,sourceSR:this.sourceSR};o=this.queryOIDs(a),this.filter.setCache(o,n,s)}return o}queryOIDs(t){this.isFile&&(console.error("a file layer called a server based query function"),console.trace());const r={url:this.serviceUrl,...t};return this.$iApi.geo.query.arcGisServerQueryIds(r)}async queryFeaturesDiscrete(t){const r=await this.queryOIDs(t),i={getGeom:!!t.includeGeometry,getAttribs:!0};return r.map(s=>({oid:s,graphic:this.getGraphic(s,i)}))}async queryFeatures(t){const r=await this.queryFeaturesDiscrete(t);return Promise.all(r.map(i=>i.graphic))}configDrawOrder(t,r){Array.isArray(t.drawOrder)&&t.drawOrder.length>0&&(r.orderBy=t.drawOrder.map(i=>{const s=i.ascending??!0?"ascending":"descending";return i.field?{field:i.field,order:s}:{valueExpression:i.arcade,order:s}}),this._drawOrder=t.drawOrder.slice())}}class bet extends ng{constructor(t,r){super(t,r),this.dataFormat=Ps.ESRI_FEATURE,this.layerFormat=aa.GRAPHIC,this.hovertips=!1}_graphics=[];makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}getGraphicCount(){return this._graphics.length}getLocalGraphic(t){return this._graphics.find(r=>r.id===t)}getEsriGraphic(t){return this.esriLayer?.graphics.find(r=>r.id===t)}get graphics(){return this._graphics.slice()}async addGraphic(t){if(!this.layerExists){this.noLayerErr();return}let r;t instanceof Array?r=t:r=[t];const i=r.filter(l=>this._graphics.findIndex(c=>c.id===l.id)===-1?(this._graphics.push(l),!0):(console.error(`Attempting to add graphic with id '${l.id}' that has already been added.`),!1)),s=this.$iApi.geo.map.getSR(),n=i.map(l=>this.$iApi.geo.proj.projectGeometry(s,l.geometry)),o=await Promise.all(n),a=i.map((l,u)=>{const c=new Vl(o[u],l.id,l.attributes);return c.style=l.style,this.$iApi.geo.geom.graphicRampToEsri(c)});this.esriLayer.addMany(a)}removeGraphic(t){if(!this.layerExists){this.noLayerErr();return}if(typeof t>"u"){this.esriLayer.removeAll(),this._graphics=[];return}let r;Array.isArray(t)?r=t:r=[t],r.map(s=>typeof s=="string"?s:s.id).forEach(s=>{const n=this.esriLayer.graphics.findIndex(a=>a.id===s);n>-1&&this.esriLayer.graphics.removeAt(n);const o=this._graphics.findIndex(a=>a.id===s);o>-1&&this._graphics.splice(o,1)})}}class wet extends bet{constructor(t,r){super(t,r),this.layerType=ct.GRAPHIC}async onInitiate(){this.esriLayer=Gi(new wIe(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();return this.layerTree.name=this.name,this.updateDrawState(ho.UP_TO_DATE),t}}class og extends X9{esriJson;sourceGeoJson;tooltipField;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.isFile=!0,this.dataFormat=Ps.ESRI_FEATURE,this.layerFormat=aa.FEATURE,this.tooltipField="",this.layerIdx=0,t.identifyMode&&t.identifyMode!==Ki.NONE?this.identifyMode=t.identifyMode:this.identifyMode=Ki.HYBRID}async reload(){if(this.origRampConfig.caching!==!0&&!this.origRampConfig.url){console.error("Attempted to reload file layer from non server source without caching enabled.");return}await super.reload()}async onInitiate(){if(!this.sourceGeoJson)throw new Error("File Layer is missing source data.");const t={layerId:this.origRampConfig.id||"",targetSR:this.$iApi.geo.map.getSR(),colour:this.origRampConfig.colour,fieldMetadata:this.origRampConfig.fieldMetadata,latField:this.origRampConfig.latField||"",lonField:this.origRampConfig.longField||""};this.esriJson=await this.$iApi.geo.layer.files.geoJsonToEsriJson(this.sourceGeoJson,t),this.esriLayer=Gi(new S8(this.makeEsriLayerConfig(this.origRampConfig))),this.esriJson=void 0,this.origRampConfig.caching||delete this.origRampConfig.rawData,delete this.sourceGeoJson,await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t),i="OBJECTID";return["source","objectIdField","id","fields","renderer","spatialReference","geometryType"].forEach(n=>{r[n]=this.esriJson[n]}),this.origRampConfig.nameField?r.displayField=this.$iApi.geo.attributes.fieldValidator(r.fields,this.origRampConfig.nameField)||i:r.displayField=i,r.outFields=["*"],delete r.url,this.configDrawOrder(t,r),r}onLoadActions(){const t=super.onLoadActions();return this.esriLayer&&this.origRampConfig.customRenderer?.type&&(this.esriLayer.renderer=Pv(this.config.customRenderer)),this.layerTree.name=this.name,this.extractLayerMetadata(),this.origRampConfig.tooltipField?this.tooltipField=this.$iApi.geo.attributes.fieldValidator(this.fields,this.origRampConfig.tooltipField)||this.nameField:this.tooltipField=this.nameField,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.attribs.attLoader.updateFieldList(this.fieldList),this.featureCount=this.esriLayer?.source.length||0,t.push(this.viewDefProm.getPromise()),this.filter.getCombinedSql()&&Promise.all(t).then(()=>{this.applySqlFilter()}),t}runIdentify(t){if(!this.canIdentify())return[];const r=new zi,i=Fs({items:[],loading:r.getPromise(),loaded:!1,errored:!1,uid:this.uid,layerId:this.id,requestTime:Date.now()});let s=Promise.resolve(),n=Promise.resolve(),o=[],a=[];if(this.identifyMode===Ki.HYBRID||this.identifyMode===Ki.GEOMETRIC){const l={includeGeometry:!1};this.geomType!==Ft.POLYGON&&t.geometry.type===Ft.POINT?l.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):l.filterGeometry=t.geometry,l.filterSql=this.getCombinedSqlFilter(),n=this.queryFeatures(l).then(u=>{o=u})}return t.hitTest&&(this.identifyMode===Ki.HYBRID||this.identifyMode===Ki.SYMBOLIC)&&(s=n.then(async()=>{const l=await t.hitTest;a=await Promise.all(l.filter(u=>u.layerId===this.id&&o.findIndex(c=>u.oid===c.attributes[this.oidField])===-1).map(u=>u.oid))})),Promise.all([s,n]).then(()=>{o.forEach(l=>{i.items.push(L2.makeRawItem(q0.ESRI,l.attributes))}),a.forEach(l=>{i.items.push(L2.makeOidItem(l,this))}),i.loaded=!0,r.resolveMe()}).catch(()=>{i.errored=!0,r.resolveMe()}),[i]}extractLayerMetadata(){const t=this.esriLayer;if(!t)throw new Error("file layer attempted to extract data from esri layer, esri layer did not exist");this.supportsFeatures=!0,this.geomType=this.$iApi.geo.geom.clientGeomTypeToRampGeomType(t.geometryType),this.scaleSet.minScale=t.minScale||0,this.scaleSet.maxScale=t.maxScale||0,this.extent=this.extent??Yr.fromESRI(t.fullExtent,this.id+"_extent");const r=Gi(t.fields.slice());this.fields=r.map(s=>({name:s.name,alias:s.alias,type:s.type,length:s.length})),this.nameField=t.displayField,this.oidField=t.objectIdField,this.renderer=this.$iApi.geo.symbology.makeRenderer(t.renderer,this.fields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const i={sourceGraphics:t.source,oidField:this.oidField,attribs:"*",batchSize:-1,fieldsToTrim:[]};this.attribs.attLoader=new jet(this.$iApi,i)}async getGraphic(t,r){let i;if(!r.getGeom&&this.attribs.attLoader.isLoaded()){const s=await this.attribs.attLoader.getAttribs();i=new Vl(new rf,"",s.features[s.oidIndex[t]])}else{const s={filterOIDs:[t],includeGeometry:!!r.getGeom},n=await this.queryFeatures(s);if(n.length===0)throw new Error(`Could not find object id ${t}`);n.length!==1&&console.warn("did not get a single result on a query for a specific object id"),i=n[0]}if(r.getStyle){const s=Rt(this.renderer.getGraphicSymbol(i.attributes));i.style=this.$iApi.geo.geom.styleEsriToRamp(s)}return i}async queryFeatures(t){const r={layer:this,...t};return this.$iApi.geo.query.geoJsonQuery(r)}async queryOIDs(t){const r={layer:this,...t};return(await this.$iApi.geo.query.geoJsonQuery(r)).map(s=>s.attributes?s.attributes[this.oidField]:-1)}applySqlFilter(t=[]){if(!this.esriView){this.noLayerErr();return}const r=this.filter.getCombinedSql(t);Rt(this.esriView).filter=new Jee({where:r})}}class _et extends og{constructor(t,r){super(t,r),this.layerType=ct.GEOJSON}async onInitiate(){let t;const r=Date.now();if(this.origRampConfig.rawData)t=this.$iApi.geo.layer.files.rawDataJsonParser(this.origRampConfig.rawData,this.origRampConfig.caching);else if(this.origRampConfig.url)t=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("GeoJson layer config contains no raw data or url");r>this.lastCancel&&(this.sourceGeoJson=t,await super.onInitiate())}}class xet extends og{constructor(t,r){super(t,r),this.layerType=ct.SHAPEFILE}async onInitiate(){const t=Date.now(),r=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const i=await this.$iApi.geo.layer.files.shapefileToGeoJson(r);t>this.lastCancel&&(this.sourceGeoJson=i,await super.onInitiate())}}}class Met extends og{constructor(t,r){super(t,r),this.layerType=ct.CSV}async onInitiate(){if(!this.origRampConfig.latField||!this.origRampConfig.longField)throw new Error("csv file config missing lat or long field names");let t;const r=Date.now();if(this.origRampConfig.rawData&&typeof this.origRampConfig.rawData=="string")t=this.origRampConfig.rawData;else if(this.origRampConfig.url)t=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("Csv file config contains no raw data or url");if(r>this.lastCancel){const i=await this.$iApi.geo.layer.files.csvToGeoJson(t,{latfield:this.origRampConfig.latField,lonfield:this.origRampConfig.longField});r>this.lastCancel&&(this.sourceGeoJson=i,await super.onInitiate())}}}class Tet extends og{constructor(t,r){super(t,r),this.layerType=ct.GEOJSONZIPPED}async onInitiate(){const t=Date.now(),r=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const i=await this.$iApi.geo.layer.files.unzipSingleFile(r);t>this.lastCancel&&(this.sourceGeoJson=JSON.parse(this.$iApi.geo.layer.files.arbToStr(i)),await super.onInitiate())}}}class Iet extends og{constructor(t,r){super(t,r),this.layerType=ct.FLATGEOBUF}async onInitiate(){const t=Date.now(),r=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const i=await this.$iApi.geo.layer.files.fgbToGeoJson(r,this.expectedTime.fail+1e3);t>this.lastCancel&&(this.sourceGeoJson=i,await super.onInitiate())}}}class Eet extends og{constructor(t,r){super(t,r),this.layerType=ct.FLATGEOBUFZIPPED}async onInitiate(){const t=Date.now(),r=await this.$iApi.geo.layer.files.binaryInitHelper(this.origRampConfig);if(t>this.lastCancel){const i=await this.$iApi.geo.layer.files.unzipSingleFile(r);if(t>this.lastCancel){const s=await this.$iApi.geo.layer.files.fgbToGeoJson(i,this.expectedTime.fail+1e3);t>this.lastCancel&&(this.sourceGeoJson=s,await super.onInitiate())}}}}class Aet extends X9{tooltipField;constructor(t,r){super(t,r),this.dataFormat=Ps.ESRI_FEATURE,this.tooltipField="",this.supportsIdentify=!0,this.layerType=ct.FEATURE,this.layerFormat=aa.FEATURE,t.identifyMode&&t.identifyMode!==Ki.NONE?this.identifyMode=t.identifyMode:this.identifyMode=Ki.HYBRID}async onInitiate(){Gi(this.esriLayer=new S8(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t);return(t.initialFilteredQuery||t.permanentFilteredQuery)&&(r.definitionExpression=this.filter.getCombinedSql()),this.configDrawOrder(t,r),r}onLoadActions(){const t=Date.now(),r=super.onLoadActions(),i=this.esriLayer&&this.origRampConfig.customRenderer?.type;i&&(this.esriLayer.renderer=Pv(this.origRampConfig.customRenderer));const s=this.esriLayer.parsedUrl.path,o=this.$iApi.geo.shared.parseUrlIndex(s).index||0;this.layerIdx=o,this.serviceUrl=s;const a=this.loadLayerMetadata(i?{customRenderer:this.esriLayer?.renderer}:{}).then(()=>{t>this.lastCancel&&(this.visibility=this.origRampConfig?.state?.visibility??this._serverVisibility??!0,this.nameField=this.origRampConfig.nameField||this.nameField||"",this.tooltipField=this.origRampConfig.tooltipField||this.nameField,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.attribs.attLoader.updateFieldList(this.fieldList),this.attribs.attLoader.updateFieldsToTrim(this.getFieldsToTrim()))}),l=this.$iApi.geo.layer.loadFeatureCount(this.serviceUrl,this.getSqlFilter(Ln.PERMANENT)).then(u=>{t>this.lastCancel&&(this.featureCount=u)});return this.layerTree.name=this.name,this.layerTree.layerIdx=o,r.push(a,l),r}runIdentify(t){if(!this.canIdentify())return[];const r=new zi,i=Fs({items:[],loading:r.getPromise(),loaded:!1,errored:!1,uid:this.uid,layerId:this.id,requestTime:Date.now()});let s=Promise.resolve(),n=Promise.resolve(),o=[];if(this.identifyMode===Ki.HYBRID||this.identifyMode===Ki.GEOMETRIC){const a={includeGeometry:!1,sourceSR:this.sourceSR};this.geomType!==Ft.POLYGON&&t.geometry.type===Ft.POINT?a.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):a.filterGeometry=t.geometry,a.filterSql=this.getCombinedSqlFilter(),n=this.queryOIDs(a).then(l=>{o=l})}return t.hitTest&&(this.identifyMode===Ki.HYBRID||this.identifyMode===Ki.SYMBOLIC)&&(s=n.then(async()=>{(await t.hitTest).filter(l=>l.layerId===this.id&&o.findIndex(u=>l.oid===u)===-1).forEach(l=>{o.push(l.oid)})})),Promise.all([s,n]).then(()=>{o.forEach(a=>{i.items.push(L2.makeOidItem(a,this))}),i.loaded=!0,r.resolveMe()}).catch(()=>{i.errored=!0,r.resolveMe()}),[i]}applySqlFilter(t=[]){if(this.layerExists){const r=this.filter.getCombinedSql(t);this.esriLayer.definitionExpression=r}else this.noLayerErr()}getGraphicExtent(t){return new Promise((r,i)=>{if(!this.layerExists)this.noLayerErr(),i();else if(!["multipoint","polyline","polygon"].includes(this.esriLayer.geometryType))console.error(`Attempted to query extent for invalid geometry type ${this.esriLayer.geometryType}.`),i();else{const s=this.attribs.quickCache.getExtent(t);s?r(s):this.esriLayer.queryExtent({objectIds:[t],outSpatialReference:this.$iApi.geo.map.getSR().toESRI()}).then(n=>{const o=Yr.fromESRI(n.extent);this.attribs.quickCache.setExtent(t,o),r(o)}).catch(()=>{console.error(`Extent querying failed for ${t}.`),i()})}})}}class $et extends ng{isDynamic;origState;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.supportsSublayers=!0,this.layerType=ct.MAPIMAGE,this.layerFormat=aa.MAPIMAGE,this.isDynamic=!1,this.hovertips=!1,this.layerTree.layerIdx=-1,this.identifyMode=Ki.GEOMETRIC}async onInitiate(){this.esriLayer=Gi(new K8(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t);return this.origState={visibility:r.visible,opacity:r.opacity},r.visible=!1,t.imageFormat&&(r.imageFormat=t.imageFormat),r}onLoadActions(){const t=super.onLoadActions();if(!this.layerExists)return this.noLayerErr(),t;const r=Date.now();if(this.layerTree.name=this.name,!this.esriLayer.capabilities.exportMap)throw this.$iApi.notify.show(ta.WARNING,this.$iApi.$i18n.t("layer.noexportmap",{name:this.name||this.id})),new Error("Service does not support Map Image Layer, Map Export is not enabled");this.isDynamic=this.esriLayer.capabilities.exportMap.supportsDynamicLayers,this.extent=this.extent??Yr.fromESRI(this.esriLayer.fullExtent,this.id+"_extent");const i=l=>{const u=this.esriLayer?.allSublayers.find(c=>c.id===l);if(!u)throw new Error("attempt to find map image sublayer failed");return u},s={};this.origRampConfig.sublayers.forEach(l=>{s[l.index||0]=l});const n=[],o=(l,u)=>{const c=l.id,p=s[c];if(l.sublayers&&l.sublayers.length>0){const f=(p?p.name:"")||l.title||"",m=new qI(c,"",f,!1);u.findChildByIdx(c)||u.children.push(m),l.sublayers.reverse().forEach(g=>{o(g,m)})}else{this._sublayers[c]||(this._sublayers[c]=new Cet({id:`${this.id}-${c}`,index:c,layerType:ct.SUBLAYER,name:p?.name,state:p?.state??{opacity:this.opacity,visibility:this.visibility,hovertips:this.hovertips,identify:this.identify},extent:p?.extent,controls:p?.controls,disabledControls:p?.disabledControls,initialFilteredQuery:p?.initialFilteredQuery,permanentFilteredQuery:p?.permanentFilteredQuery,labels:p?.labels},this.$iApi,this));const f=this._sublayers[c];if(f.isRemoved)return;if(f.name=p?.name||l.title||"",n.push(f),!u.children.map(m=>m.layerIdx).includes(c)){const m=new qI(c,f.uid,f.name,!1);u.children.push(m)}f.esriWatches.push(l.watch("visible",()=>{this.$iApi.event.emit(rt.LAYER_VISIBILITYCHANGE,{visibility:f.visibility,layer:f}),f.parentLayer?.checkVisibility()}),l.watch("opacity",m=>{this.$iApi.event.emit(rt.LAYER_OPACITYCHANGE,{opacity:m,layer:f})}))}};this.origRampConfig.sublayers.forEach(l=>{if(!l.cosmetic){const u=i(l.index||0);o(u,this.layerTree)}});const a=n.map(async l=>{const u=i(l.layerIdx),c=s[l.layerIdx];if(l.serviceUrl=u.url,l.fetchEsriSublayer(this),await l.initiate(),r<this.lastCancel)return;const p=l.esriSubLayer&&c?.customRenderer?.type;if(p&&(l.esriSubLayer.renderer=Pv(c.customRenderer)),await l.loadLayerMetadata(p?{customRenderer:l.esriSubLayer?.renderer}:{}),r<this.lastCancel)return;const f=s[l.layerIdx];if(f?(l.visibility=l.isRemoved?!1:f.state?.visibility??(this.origState.visibility?l._serverVisibility??this.origState.visibility:this.origState.visibility??l._serverVisibility)??!0,l.opacity=f.state?.opacity??this.origState.opacity??1,l.nameField=f.nameField||l.nameField||"",this.$iApi.geo.attributes.applyFieldMetadata(l,f.fieldMetadata),l.canModifyLayer||this.$iApi.notify.show(ta.WARNING,this.$iApi.$i18n.t("layer.filtersdisabled",{name:l.name||l.id}))):this.$iApi.geo.attributes.applyFieldMetadata(l),l.supportsFeatures){l.updateFieldList(),l.updateFieldsToTrim();const m=await this.$iApi.geo.layer.loadFeatureCount(l.serviceUrl,l.getSqlFilter(Ln.PERMANENT));r>this.lastCancel&&(l.featureCount=m)}});return t.push(...a),this.esriLayer.allSublayers.forEach(l=>{!l.sublayers&&!n.find(u=>u.layerIdx===l.id)?(l.visible=!1,l.opacity=0):l.sublayers&&(l.visible=!0)}),this.visibility=this.origState.visibility??!0,t}updateLayerState(t,r=!1){super.updateLayerState(t,r),this.sublayers.forEach(i=>i.updateLayerState(t,r))}updateDrawState(t){super.updateDrawState(t),this.sublayers.forEach(r=>r.updateDrawState(t))}runIdentify(t){if(!this.canIdentify())return[];t.sublayerIds&&(t.sublayerIds=t.sublayerIds.map(s=>typeof s=="number"?this.layerTree?.findChildByIdx(s)?.uid:s));const r=t.sublayerIds?this._sublayers.filter(s=>t.sublayerIds?.includes(s.uid)):this._sublayers.filter(s=>s.canIdentify());if(r.length===0)return[];let i;return t.geometry.type===Ft.POINT&&(i=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance)),r.map(s=>{const n=new zi,o={},a=Fs({items:[],loading:n.getPromise(),loaded:!1,errored:!1,uid:s.uid,layerId:s.id,requestTime:Date.now()});return s.geomType!==Ft.POLYGON&&i?o.filterGeometry=i:o.filterGeometry=t.geometry,o.filterSql=s.getCombinedSqlFilter(),o.sourceSR=s.sourceSR,s.queryOIDs(o).then(l=>{l.forEach(u=>{a.items.push(L2.makeOidItem(u,s))}),a.loaded=!0,n.resolveMe()}).catch(()=>{a.errored=!0,n.resolveMe()}),a})}}class Cet extends X9{tooltipField;constructor(t,r,i){if(super(t,r),this.layerType=ct.SUBLAYER,this.layerFormat=aa.MAPIMAGE,this.isSublayer=!0,this.layerIdx=t.index,this.parentLayer=i,this.dataFormat=Ps.ESRI_FEATURE,this.supportsFeatures=!0,this.tooltipField="",this.hovertips=!1,this.url=this.parentLayer?.url,this.canReload=!!(this.url||this.origRampConfig.caching),!i.esriLayer)throw new Error("Map Image Layer with no internal esri layer encountered in sublayer creation");this.fetchEsriSublayer(i),(t.initialFilteredQuery||t.permanentFilteredQuery)&&this.applySqlFilter()}fetchEsriSublayer(t){if(!t.esriLayer){console.error("Attempted to fetch the ESRI sublayer when parent has no ESRI layer");return}this.esriSubLayer=Gi(t.esriLayer.allSublayers.find(r=>r.id===this.layerIdx))}onLoadActions(){return this.layerTree=this.parentLayer.getLayerTree().findChildByUid(this.uid),this.layerTree.name=this.name,this.layerTree.layerIdx=this.layerIdx,this.identify=this.config.state.identify!=null?this.config.state.identify:this.supportsIdentify,[]}async onInitiate(){this.initiationState=Jr.INITIATED;const t=this.labelVizOverride();t!==void 0&&(this.labelVisibility=t)}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}this.parentLayer?.reload()}cancelLoad(){this.parentLayer?.cancelLoad()}get layerExists(){return!!(this.parentLayer?.layerExists&&this.esriSubLayer&&this.initiationState===Jr.INITIATED)}get visibility(){return this.layerExists?this.esriSubLayer.visible:!1}set visibility(t){this.layerExists?this.esriSubLayer.visible=t:this.noLayerErr()}get opacity(){return this.layerExists?this.esriSubLayer.opacity:0}set opacity(t){if(!this.layerExists){this.noLayerErr();return}this.parentLayer.isDynamic||console.warn(`Opacity of a Map Image Sublayer was set. The service does not support sublayer opacity. LayerId ${this.id}`),this.esriSubLayer.opacity=t}get mouseTolerance(){return this.layerExists?this.parentLayer.mouseTolerance:0}set mouseTolerance(t){this.layerExists?this.parentLayer.mouseTolerance=t:this.noLayerErr()}get touchTolerance(){return this.layerExists?this.parentLayer.touchTolerance:0}set touchTolerance(t){this.layerExists?this.parentLayer.touchTolerance=t:this.noLayerErr()}applySqlFilter(t=[]){if(this.parentLayer?.layerExists&&this.esriSubLayer)if(this.supportsFeatures){const r=this.filter.getCombinedSql(t);this.esriSubLayer.definitionExpression=r}else console.error("Attempted to apply an SQL filter to a sublayer that does not support it (likely Raster datatype)");else this.noLayerErr()}getSR(){return this.parentLayer?.esriLayer?$t.fromESRI(this._parentLayer?.esriLayer?.spatialReference):(this.noLayerErr(),$t.latLongSR())}updateFieldList(){this.attribs.attLoader.updateFieldList(this.fieldList)}updateFieldsToTrim(){this.attribs.attLoader.updateFieldsToTrim(this.getFieldsToTrim())}get labelVisibility(){return this.layerExists?this.esriSubLayer.labelsVisible:!1}set labelVisibility(t){this.layerExists?this.esriSubLayer.labelsVisible=t:this.noLayerErr()}labelVizOverride(){let t=this.origRampConfig.labels?.visible;if(t!==void 0||(t=this.$iApi.geo.map.labelsDefault?.visible,t!==void 0))return t}}class Oet extends ng{constructor(t,r){super(t,r),this.supportsIdentify=!1,this.layerType=ct.OSM,this.layerFormat=aa.OSM,this.dataFormat=Ps.OSM_TILE,this.supportsFeatures=!1}async onInitiate(){this.esriLayer=Gi(new X8(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=this.$iApi.geo.symbology.generatePlaceholderSymbology("O","#03fc4e"),i={uid:this.$iApi.geo.shared.generateUUID(),label:"OpenStreetMap",svgcode:r.svgcode,esriStandard:!0,drawPromise:Promise.resolve()};return this.legend.push(i),t}}class Pet extends ng{constructor(t,r){super(t,r),this.supportsIdentify=!1,this.layerType=ct.IMAGERY,this.layerFormat=aa.IMAGERY,this.dataFormat=Ps.ESRI_RASTER}async onInitiate(){this.esriLayer=Gi(new zre(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=Date.now(),i=this.$iApi.geo.symbology.mapServerToLocalLegend(this.origRampConfig.url).then(s=>{r>this.lastCancel&&(this.legend=s)});return t.push(i),t}}class Ret extends ng{constructor(t,r){super(t,r),this.supportsIdentify=!1,this.layerType=ct.TILE,this.layerFormat=aa.TILE,this.dataFormat=Ps.ESRI_TILE}async onInitiate(){this.esriLayer=Gi(new Q8(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions(),r=Date.now();this.layerTree.name=this.name;const i=this.$iApi.geo.symbology.mapServerToLocalLegend(this.origRampConfig.url).then(s=>{r>this.lastCancel&&(this.legend=s)});return t.push(i),t.push(this.checkProj()),t}checkProj(){const t=this.getSR(),i=this.$iApi.geo.map.getSR().isEqual(t);if(this.layerState===yi.LOADED&&!i)this.$iApi.notify.show(ta.WARNING,this.$iApi.$i18n.t("layer.mismatch",{name:this.name||this.id})),this.onError();else if(this.layerState===yi.ERROR&&i)this.reload();else if(this.layerState!==yi.ERROR&&!i)return this.$iApi.notify.show(ta.WARNING,this.$iApi.$i18n.t("layer.mismatch",{name:this.name||this.id})),Promise.reject();return Promise.resolve()}}class Let extends ng{sublayerNames;mimeType;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.layerType=ct.WMS,this.layerFormat=aa.WMS,this.mimeType=t.featureInfoMimeType||"",this.sublayerNames=[],this.dataFormat=Ps.OGC_RASTER,this.identifyMode=Ki.GEOMETRIC}async onInitiate(){this.esriLayer=Gi(new yie(this.makeEsriLayerConfig(this.origRampConfig))),await super.onInitiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t),i=t.sublayers;this.sublayerNames=i.map(n=>n.id||"error_no_wms_id");const s=i.map(n=>n.currentStyle).join();return r.customParameters={styles:s},t.url.indexOf("/geomet")!==-1&&(r.customParameters.layers=i[0].id),r}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=i=>{let s=!1;return i.forEach(n=>{this.sublayerNames.indexOf(n.name)>-1||n.sublayers&&n.sublayers.length>0&&r(n.sublayers)?s=!0:n.visible=!1}),s};return this.layerExists?r(this.esriLayer.sublayers):this.noLayerErr(),this.loadSymbology(),t}canIdentify(){return super.canIdentify()}runIdentify(t){if(t.geometry.type!==Ft.POINT)throw new Error("a point must be used for WMS Identify");if(!this.canIdentify())return[];const r=new zi,i=Fs({items:[],loading:r.getPromise(),loaded:!1,errored:!1,uid:this.uid,layerId:this.id,requestTime:Date.now()});return this.getFeatureInfo(this.sublayerNames,t.geometry,this.mimeType).then(s=>{if(s){let n=!0,o;typeof s!="string"?o=q0.JSON:s.indexOf("Search returned no results")===-1&&s!==""?o=q0.TEXT:(n=!1,o=q0.UNKNOWN),n&&i.items.push(L2.makeRawItem(o,s))}i.loaded=!0,r.resolveMe()}).catch(()=>{i.errored=!0,r.resolveMe()}),[i]}setCustomParameter(t,r,i=!0){this.layerExists?(this.esriLayer.customLayerParameters||(this.esriLayer.customLayerParameters={}),this.esriLayer.customLayerParameters[t]=r,i&&this.esriLayer.refresh()):this.noLayerErr()}getFeatureInfo(t,r,i){const s=this.$iApi.geo.map,n=this.esriLayer;if(!s.esriView)throw new Error("WMS get feature, no map view exists. Cannot derive click coords");if(!n)throw this.noLayerErr(),new Error("wms get feature failed, no layer");let o,a;const l=s.getExtent(),u=n.spatialReferences,c=t.join(","),p=s.esriView.toScreen(r.toESRI()),f=Math.floor(p.x),m=Math.floor(p.y),b={"application/json":"json","text/html":"text","text/plain":"text"}[i]||"text",w=s.getSR();w.wkid?o=w.wkid:(o=4326,console.error("Map is likely in a WKT projection. WMS Identify request will likely fail.")),u&&u.length>1?u.indexOf(o)===-1&&(w.latestWkid&&u.indexOf(w.latestWkid)>-1?o=w.latestWkid:console.error("WMS service does not support the maps projection. Identify request will likely fail.")):console.error("No supported wkid/epsg code found for WMS service. Identify request will likely fail."),n.version==="1.3"||n.version==="1.3.0"?(a={CRS:"EPSG:"+o,I:f,J:m,STYLES:"",FORMAT:n.imageFormat},this.$iApi.geo.layer.ogc.reversedAxisWKIDs().indexOf(o)>-1&&(a.BBOX=`${l.ymin},${l.xmin},${l.ymax},${l.xmax}`)):a={SRS:"EPSG:"+o,X:f,Y:m},Object.prototype.hasOwnProperty.call(a,"BBOX")||(a.BBOX=`${l.xmin},${l.ymin},${l.xmax},${l.ymax}`);const S={SERVICE:"WMS",REQUEST:"GetFeatureInfo",VERSION:n.version,WIDTH:s.getPixelWidth(),HEIGHT:s.getPixelHeight(),QUERY_LAYERS:c,LAYERS:c,INFO_FORMAT:i},M=n.customLayerParameters;return M&&Object.keys(M).forEach(x=>{x.toLowerCase()!=="styles"&&(S[x]=M[x])}),Object.keys(S).forEach(x=>a[x]=S[x]),Re(n.url.split("?")[0],{query:a,responseType:b})}getLegendUrls(t){if(!this.layerExists)return this.noLayerErr(),[];const r=new Map;this.esriLayer.allSublayers.forEach(s=>{s.visible&&(s.legendUrl&&this.origRampConfig.sublayers?.forEach(n=>{if(n.id&&n.currentStyle&&n.id===s.name){const o=new HI(s.legendUrl);"STYLE"in o.queryMap&&o.queryMap.STYLE!==n.currentStyle&&(s.legendUrl=o.updateQuery({STYLE:n.currentStyle}))}}),r.set(s.name,s.legendUrl))});const i=t.map(s=>s.styleLegends&&s.currentStyle?s.styleLegends.find(n=>n.name===s.currentStyle).url:void 0);return i.forEach((s,n)=>{s||(i[n]=r.get(t[n].id))}),i}getWMSLayerTitle(t){if(!this.esriLayer)return"";let r;return this.esriLayer.allSublayers.some(i=>{if(i.name===t)return r=i.title,!0}),r||""}loadSymbology(){const t=Date.now(),r=this.config.sublayers,i=this.getLegendUrls(r.map(s=>({id:s.id,styleLegends:s.styleLegends,currentStyle:s.currentStyle}))).map((s,n)=>{const o=r[n].name||this.getWMSLayerTitle(r[n].id)||r[n].id,a={uid:this.$iApi.geo.shared.generateUUID(),label:o,svgcode:"",esriStandard:!1,drawPromise:this.$iApi.geo.symbology.generateWMSSymbology(s).then(l=>{t>this.lastCancel&&(a.svgcode=l.svgcode,a.imgHeight=l.imgHeight,a.imgWidth=l.imgWidth)})};return a});this.legend=i}}class ket extends og{constructor(t,r){super(t,r),this.layerType=ct.WFS}async onInitiate(){const t=Date.now(),r=new HI(this.config.url),{offset:i,limit:s}=r.queryMap,n=await this.$iApi.geo.layer.ogc.loadWfsData(this.config.url,-1,parseInt(i)||0,parseInt(s)||1e3,void 0,this.config.xyInAttribs);t>this.lastCancel&&(this.sourceGeoJson=n,await super.onInitiate())}}class wce extends bce{sourceJson;attribs;_visibility;constructor(t,r){super(t,r),this.dataFormat=Ps.ESRI_FEATURE,this.layerFormat=aa.NOLAYER,this.drawState=ho.NOT_VISUAL,this.attribs=new _ce,this.supportsFeatures=!0,this.mapLayer=!1,this.isFile=!1,this._visibility=t.state?.visibility??!0,this.expectedTime.draw=0}async onInitiate(){if(this.sourceJson){const t=this.sourceJson;if(t.data.length===0||t.fields.length===0)throw new Error("Data layer with no columns or now rows.");const r=t.fields.slice(),i=t.data[0].slice(),s=/ /gi;this.fields=r.map((o,a)=>{let l="",u=o;o.indexOf(" ")>-1&&(l=o,u=o.trim().replace(s,"-"),t.fields[a]=u);const c=this.$iApi.geo.layer.files.inferType(i[a]);return{name:u,alias:l,type:c,length:c===ch.STRING?256:void 0}}),this.oidField="rampOID",this.fields.push({name:this.oidField,type:ch.OID}),t.fields.push(this.oidField),t.data.forEach((o,a)=>o.push(a+1)),this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata),this.fieldList="*";const n={batchSize:-1,sourceDataJson:t,oidField:this.oidField,attribs:"*",fieldsToTrim:this.getFieldsToTrim()};this.attribs.attLoader=new Vet(this.$iApi,n),await this.attribs.attLoader.getAttribs(),this.featureCount=t.data.length,this.origRampConfig.nameField?this.nameField=this.$iApi.geo.attributes.fieldValidator(this.fields,this.origRampConfig.nameField)||this.oidField:this.nameField=this.oidField,this.sourceJson=void 0,this.origRampConfig.caching||delete this.origRampConfig.rawData}else throw new Error("Attempted to initiate file based data layer, sourceJson is missing")}async terminate(){await super.terminate()}async reload(){this.$iApi.event.emit(rt.LAYER_RELOAD_START,this),await this.terminate(),await this.initiate(),this.layerState!==yi.ERROR&&this.onLoad(),setTimeout(()=>{this.$iApi.event.emit(rt.LAYER_RELOAD_END,this)},300)}onLoadActions(){const t=super.onLoadActions();return this.legend=[{uid:this.$iApi.geo.shared.generateUUID(),label:"",svgcode:"",esriStandard:!0,visibility:!0,lastVisbility:!0,drawPromise:this.getIcon(0).then(r=>{this.legend[0].svgcode=r})}],t}getAttributes(){return this.attribs.attLoader.getAttribs()}getTabularAttributes(){return this.$iApi.geo.attributes.generateTabularAttributes(this,this.attribs)}async getGraphic(t,r){let i={};if(this.attribs.attLoader.isLoaded()){const s=await this.attribs.attLoader.getAttribs();i=s.features[s.oidIndex[t]]}else throw new Error("Non ESRI data layer did not have attributes populated.");return new Vl(new rf,"",i)}async getIcon(t){return'<svg id="SvgjsSvg1012" width="32" height="32" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" viewBox="0 0 32 32">                      <defs id="SvgjsDefs1013"></defs>                      <rect id="SvgjsRect1014" width="28"  height="28" x="2" y="2" fill="#2e8b57"></rect>                      <text id="SvgjsText1015" font-family="Roboto" font-size="23" fill="#ffffff" font-weight="bold" x="7.6875" y="-6.40000057220459" svgjs:data="{&quot;leading&quot;:&quot;1.3&quot;}">                          <tspan id="SvgjsTspan1016" class="grid-icons" dy="29.900000000000002" x="7.6875" svgjs:data="{&quot;newLined&quot;:true}">D</tspan>                      </text>                </svg>'}async getFilterOIDs(t=[],r=void 0){}abortAttributeLoad(){}attribLoadAborted(){return!1}clearFeatureCache(){}downloadedAttributes(){return this.featureCount}get layerExists(){return this.isLoaded}get visibility(){return this._visibility}set visibility(t){this._visibility!==t&&(this._visibility=t,this.$iApi.event.emit(rt.LAYER_VISIBILITYCHANGE,{visibility:t,layer:this}))}}class Net extends wce{constructor(t,r){super(t,r),this.layerType=ct.DATAJSON}async onInitiate(){const t=Date.now();let r;if(this.origRampConfig.rawData)r=this.$iApi.geo.layer.files.rawDataJsonParser(this.origRampConfig.rawData,this.origRampConfig.caching);else if(this.origRampConfig.url)r=await this.$iApi.geo.layer.files.fetchFileData(this.origRampConfig.url,this.layerType);else throw new Error("Json Data layer config contains no raw data or url");t>this.lastCancel&&(this.sourceJson=r,await super.onInitiate())}}class Det extends wce{filter;serviceUrl;constructor(t,r){super(t,r),this.layerType=ct.DATATABLE,this.serviceUrl=t.url,this.filter=new Jne(t.permanentFilteredQuery||"",t.initialFilteredQuery||"")}async onInitiate(){}onLoadActions(){const t=super.onLoadActions(),r=Date.now(),s=this.$iApi.geo.shared.parseUrlIndex(this.serviceUrl).index||0,n=this.$iApi.geo.layer.loadLayerMetadata(this.serviceUrl).then(a=>{if(r<this.lastCancel)return;this.name||(this.name=a.name),this.layerTree.name=this.name,this.oidField=a.objectIdField,this.nameField=this.origRampConfig.nameField||a.displayField||this.oidField,this.fields=a.fields,this.$iApi.geo.attributes.applyFieldMetadata(this,this.origRampConfig.fieldMetadata);const l={supportsLimit:(a.currentVersion||1)>=10.1,serviceUrl:this.serviceUrl,oidField:this.oidField,batchSize:-1,attribs:this.fieldList,permanentFilter:this.getSqlFilter(Ln.PERMANENT),fieldsToTrim:this.getFieldsToTrim()};this.attribs.attLoader=new Sce(this.$iApi,l),this.attribs.quickCache=new xce(this.geomType)}),o=this.$iApi.geo.layer.loadFeatureCount(this.serviceUrl,this.getSqlFilter(Ln.PERMANENT)).then(a=>{r>this.lastCancel&&(this.featureCount=a)});return this.layerTree.layerIdx=s,t.push(n,o),t}async getGraphic(t,r){let i={};const s=this.attribs.quickCache.getAttribs(t);if(s)i=s;else if(this.attribs.attLoader.isLoaded()){const o=await this.attribs.attLoader.getAttribs();i=o.features[o.oidIndex[t]]}else{const o={oid:t,serviceUrl:this.serviceUrl,includeGeometry:!1,attribs:this.fieldList},a=await this.$iApi.geo.attributes.loadSingleFeature(o);this.attribs.quickCache.setAttribs(t,a.attributes),i=a.attributes}return new Vl(new rf,"",i)}abortAttributeLoad(){this.attribs.attLoader.abortAttribLoad()}clearFeatureCache(){this.attribs.clearAll()}downloadedAttributes(){return this.isLoaded?this.attribs.attLoader.loadCount():0}attribLoadAborted(){return this.isLoaded?this.attribs.attLoader.isLoadAborted():!1}setSqlFilter(t,r){const i=this.filter.getSql(t);r!==i&&(this.filter.setSql(t,r),this.$iApi.event.emit(rt.FILTER_CHANGE,{uid:this.uid,filterKey:t}))}getSqlFilter(t){return this.filter.getSql(t)}getCombinedSqlFilter(t){return this.filter.getCombinedSql(t)}async getFilterOIDs(t=[],r=void 0){const i=this.filter.getCombinedSql(t);if(!i)return;const s=this.filter.sqlActiveFilters(t);let n=this.filter.getCache(s,!1);if(!n){const o={filterSql:i,includeGeometry:!1};n=this.queryOIDs(o),this.filter.setCache(n,s,!1)}return n}queryOIDs(t){const r={url:this.serviceUrl,...t};return this.$iApi.geo.query.arcGisServerQueryIds(r)}async queryFeaturesDiscrete(t){const r=await this.queryOIDs(t),i={getAttribs:!0};return r.map(s=>({oid:s,graphic:this.getGraphic(s,i)}))}async queryFeatures(t){const r=await this.queryFeaturesDiscrete(t);return Promise.all(r.map(i=>i.graphic))}}class Fet extends qi{oidIndexer(t,r){t.features.forEach((i,s)=>{t.oidIndex[i[r]]=s})}async arcGisBatchLoad(t,r){if(r.loadAbortFlag)return[];const i=t.permanentFilter?` AND ${t.permanentFilter}`:"",s={query:{where:`${t.oidField}>${t.maxId}${i}`,outFields:t.attribs,orderByFields:t.oidField,returnGeometry:"false",f:"json"}},[n,o]=await zy(Re(t.serviceUrl+"/query",s));if(!o)return console.error(`ArcGIS batch load error: ${t.serviceUrl}`,n),Promise.reject(new Error(`ArcGIS batch load error: ${t.serviceUrl}`));if(!o.data||!o.data.features)return console.error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`),Promise.reject(new Error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`));let a=o.data.features;const l=a.length;if(l>0){r.loadedCount+=l;let u;if(t.supportsLimit?u=o.data.exceededTransferLimit:(t.batchSize===-1&&(t.batchSize=l),u=l>=t.batchSize),a=this.trimFeatureSetAttributes(a,t.fieldsToTrim??[]),u){t.maxId=a[l-1].attributes[t.oidField];const c=await this.arcGisBatchLoad(t,r);return r.loadAbortFlag?[]:a.concat(c)}else return r.loadAbortFlag?[]:a}else return[]}async loadArcGisServerAttributes(t,r){t.maxId=-1,t.batchSize=-1;const s={features:(await this.arcGisBatchLoad(t,r)).map(n=>n.attributes),oidIndex:{}};return this.oidIndexer(s,t.oidField),r.loadIsDone=!0,s}async loadGraphicsAttributes(t,r){if(!t.sourceGraphics)throw new Error("No .sourceGraphics provided to file layer attribute loader");const s={features:t.sourceGraphics.map(n=>Rt(n).attributes).toArray(),oidIndex:{}};return this.oidIndexer(s,t.oidField),r.loadIsDone=!0,r.loadedCount=s.features.length,s}async loadCompactJsonAttributes(t,r){if(!t.sourceDataJson)throw new Error("No .sourceDataJson provided to file data-layer attribute loader");const i=t.sourceDataJson.fields,s=t.fieldsToTrim??[],o={features:t.sourceDataJson.data.map(a=>{const l={};return a.forEach((u,c)=>{l[i[c]]=typeof u=="string"&&s.includes(i[c])?u.trim():u}),l}),oidIndex:{}};return this.oidIndexer(o,t.oidField),r.loadIsDone=!0,r.loadedCount=o.features.length,t.sourceDataJson=void 0,o}async loadSingleFeature(t){const r={query:{f:"json",objectIds:t.oid,returnGeometry:t.includeGeometry,outFields:t.attribs}};typeof t.maxOffset<"u"&&(r.query.maxAllowableOffset=t.maxOffset),typeof t.mapSR<"u"&&(r.query.outSR=t.mapSR),typeof t.geometryPrecision<"u"&&t.geometryPrecision>=0&&(r.query.geometryPrecision=t.geometryPrecision);const[i,s]=await zy(Re(t.serviceUrl+"/query",r));if(!s)return console.error(`ArcGIS single feature load error: ${t.serviceUrl}`,i),Promise.reject(new Error(`ArcGIS single feature load error: ${t.serviceUrl}`));if(!s.data||!s.data.features)return console.error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`),Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`));const n=s.data.features;if(n.length>0){let o,a=this.trimFeatureSetAttributes([n[0]],t.fieldsToTrim??[])[0];if(t.includeGeometry){a.geometry.spatialReference=s.data.spatialReference;const l=bi(a.geometry);o=this.$iApi.geo.geom.geomEsriToRamp(l)}else o=new rf;return new Vl(o,"",a.attributes)}return Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`))}trimFeatureSetAttributes(t,r){return r.forEach(i=>{t.forEach(s=>{typeof s.attributes[i]=="string"&&(s.attributes[i]=s.attributes[i].trim())})}),t}orderFields(t,r){const i=(n,o)=>n.findIndex(a=>a.name===o),s=(n,o)=>{const a=i(r,n.name),l=i(r,o.name);return a===-1&&l===-1?i(t,n.name)-i(t,o.name):a===-1?1:l===-1?-1:a-l};return t.slice().sort(s)}applyFieldMetadata(t,r=void 0){if(!r||!r.fieldInfo){t.fieldList="*";return}let i=r.fieldInfo.filter(s=>s.trim).map(s=>s.name);if(t.fields.forEach(s=>{i.includes(s.name)&&(s.trim=!0)}),r?.enforceOrder&&r?.fieldInfo&&r?.fieldInfo.length>0&&(t.fields=this.orderFields(t.fields,r.fieldInfo),t.fieldList=r.fieldInfo.map(s=>s.name).join(",")),r.exclusiveFields){r.fieldInfo.find(n=>n.name===t.oidField)||r.fieldInfo.push({name:t.oidField}),t.fieldList=r.fieldInfo.map(n=>n.name).join(",");const s=r.fieldInfo;t.fields=t.fields.filter(n=>s.find(o=>o.name===n.name))}else t.fieldList="*";r.fieldInfo.forEach(s=>{if(s.alias){const n=t.fields.find(o=>o.name===s.name);n&&(n.alias=s.alias)}})}fieldValidator(t,r){if(t.findIndex(i=>i.name===r)===-1){const i=t.find(s=>s.alias===r);return i?i.name:(console.warn(`Cannot find name field in layer field list: ${r}`),"")}else return r}async generateTabularAttributes(t,r){return r.attLoader.tabularAttributesCache||(r.attLoader.tabularAttributesCache=this.$iApi.geo.attributes.generateTabularAttributesWorker(t,r)),r.attLoader.tabularAttributesCache}async generateTabularAttributesWorker(t,r){if(t.dataFormat===Ps.ESRI_RASTER)throw new Error("Attempting to get attributes on a raster layer.");const i=await r.attLoader.getAttribs();if(!i.features||i.features.length===0)return{columns:[],rows:[],fields:[],oidField:""};const s=t.fields.filter(o=>Object.prototype.hasOwnProperty.call(i.features[0],Rt(o).name)).map(o=>({data:Rt(o).name,title:Rt(o).alias||Rt(o).name})),n=i.features.map(o=>{const a=Zne({},o);return a.rvInteractive="",a.rvSymbol=t.getIcon(o[t.oidField]),a.rvUid=t.uid,a});return s.forEach(o=>{if(o.data.slice(-2)==="()"){const a=function(){return this[o.data]},l=o.data.slice(0,-2);n.forEach(u=>{u[l]=a})}}),{columns:s,rows:n,fields:t.fields,oidField:t.oidField}}}class _ce{_attribLoader;_quickCache;get attLoader(){if(this._attribLoader)return this._attribLoader;throw console.trace(),new Error("Attempted to load attributes prior to layer being loaded.")}set attLoader(t){this._attribLoader=t}get quickCache(){if(this._quickCache)return this._quickCache;throw console.trace(),new Error("Attempted to access attribute cache prior to layer being loaded.")}set quickCache(t){this._quickCache=t}clearAll(){this._attribLoader&&this._attribLoader.destroyAttribs(),this._quickCache&&this._quickCache.clearAll()}}class BW{loadedCount;loadAbortFlag;loadIsDone;constructor(){this.loadedCount=0,this.loadAbortFlag=!1,this.loadIsDone=!1}}class Q9 extends qi{aac;loadPromise;details;tabularAttributesCache;constructor(t,r){super(t),this.aac=new BW,this.details=r}updateFieldList(t){this.details.attribs=t}updateFieldsToTrim(t){this.details.fieldsToTrim=t}getAttribs(){return this.loadPromise||(this.aac=new BW,this.loadPromise=this.loadPromiseGenerator()),this.loadPromise}abortAttribLoad(){this.aac.loadAbortFlag=!0}destroyAttribs(){this.loadPromise=void 0,this.tabularAttributesCache=void 0,this.aac.loadIsDone=!1,this.aac.loadedCount=0}loadCount(){return this.aac.loadedCount}isLoaded(){return this.aac.loadIsDone}isLoadAborted(){return this.aac.loadAbortFlag}loadPromiseGenerator(){return Promise.reject(new Error("Subclass of AttributeLoaderBase did not implement loadPromiseGenerator"))}}class Sce extends Q9{constructor(t,r){super(t,r)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadArcGisServerAttributes(this.details,this.aac)}}class jet extends Q9{constructor(t,r){super(t,r)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadGraphicsAttributes(this.details,this.aac)}}class Vet extends Q9{constructor(t,r){super(t,r)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadCompactJsonAttributes(this.details,this.aac)}}class xce{attribs;geoms;extents;isPoint;constructor(t){this.attribs={},this.geoms={},this.extents={},this.isPoint=t===Ft.POINT||t===Ft.MULTIPOINT}getScaleStore(t){return this.geoms[t]||(this.geoms[t]={}),this.geoms[t]}getGeomStore(t=void 0){if(this.isPoint)return this.geoms;if(typeof t>"u")throw new Error("Attempted to access geometry store for non-point layer without providing a map scale");return this.getScaleStore(t)}getAttribs(t){return this.attribs[t]}setAttribs(t,r){this.attribs[t]=r}getGeom(t,r=void 0){return this.getGeomStore(r)[t]}setGeom(t,r,i=void 0){const s=this.getGeomStore(i);s[t]=r}getExtent(t){return this.extents[t]}setExtent(t,r){this.extents[t]=r}clearAll(){this.attribs={},this.geoms={},this.extents={}}}class e7{innerRenderer;symbolUnits;defaultUnit;type;falseRenderer;constructor(t,r,i=!1){this.innerRenderer=t,this.symbolUnits=[],this.falseRenderer=i,this.type=jE.Unknown}makeSearchParams(t){return t}searchRenderer(t){const r=this.makeSearchParams(t),i=this.symbolUnits.find(n=>n.match(r));if(i)return i;if(this.defaultUnit)return this.defaultUnit;console.error(`renderer search could not find match for ${r}`);const s=new Y$(this);return s.svgCode="",s}getGraphicIcon(t){return this.searchRenderer(t).svgCode}getGraphicSymbol(t){return this.searchRenderer(t).symbol}getFieldDelimiter(t,r){let i="'";if(!r||r.length===0)return i;const s=r.find(n=>n.name===t);return s&&s.type&&s.type!=="string"&&(i=""),i}cleanFieldName(t,r){if(!t)return t;let i=r.find(s=>s.name===t);if(i)return t;{const s=t.toLowerCase();return i=r.find(n=>n.name.toLowerCase()===s),i?i.name:t}}makeElseClause(){return this.falseRenderer?"":`(NOT (${this.symbolUnits.map(r=>r.definitionClause).join(" OR ")}))`}}class Y${isDefault=!1;svgCode="";symbol;definitionClause="";label="";parent;constructor(t){this.parent=t,this.symbol=new Mo}match(t){return!!t}}class Uet extends e7{constructor(t,r){super(t,r),this.type=jE.Simple;const i=new Y$(this);i.label=t.label||"",i.symbol=t.symbol,i.definitionClause="",this.symbolUnits.push(i)}}class zet extends e7{delim;keyFields;constructor(t,r,i=!1){super(t,r,i),this.type=jE.Unique,this.delim=t.fieldDelimiter||", ";const s=o=>o.replace(/'/g,"''");this.keyFields=[t.field,t.field2,t.field3].filter(o=>o).map(o=>this.cleanFieldName(o,r));const n=this.keyFields.map(o=>this.getFieldDelimiter(o,r));if(t.uniqueValueInfos.forEach(o=>{const a=new qW(this,o.value);if(a.label=o.label||"",a.symbol=o.symbol,!this.falseRenderer){const l=a.matchValue.split(this.delim),u=this.keyFields.map((c,p)=>l[p]==="<Null>"?`${c} IS NULL`:`${c} = ${n[p]}${s(l[p])}${n[p]}`).join(" AND ");a.definitionClause=`(${u})`,a.matchValue=a.matchValue.replace(/<Null>/g,"")}this.symbolUnits.push(a)}),t.defaultSymbol){const o=new qW(this,"");o.isDefault=!0,o.label=t.defaultLabel||"",o.symbol=t.defaultSymbol,o.definitionClause=this.makeElseClause(),this.defaultUnit=o}}makeSearchParams(t){return this.keyFields.map(r=>{let i=t[r]===null?"":t[r];return typeof i!="string"&&(i=i.toString()),i}).join(this.delim)}}class qW extends Y${matchValue;constructor(t,r){super(t),typeof r=="number"?this.matchValue=r.toString():this.matchValue=r}match(t){return this.matchValue===t}}class Get extends e7{valField;constructor(t,r,i=!1){if(super(t,r,i),this.valField=this.cleanFieldName(t.field,r),t.classBreakInfos.forEach((s,n)=>{const o=n===0,a=new HW(this,s.minValue,s.maxValue,o);a.label=s.label||"",a.symbol=s.symbol,this.falseRenderer||(a.definitionClause=`(${this.valField} >${o?"=":""}  ${s.minValue} AND ${this.valField} <= ${s.maxValue})`),this.symbolUnits.push(a)}),t.defaultSymbol){const s=new HW(this,0,0,!1);s.isDefault=!0,s.label=t.defaultLabel||"",s.symbol=t.defaultSymbol,s.definitionClause=this.makeElseClause(),this.defaultUnit=s}}makeSearchParams(t){return parseFloat(t[this.valField])}}class HW extends Y${minValue;maxValue;firstBreak;constructor(t,r,i,s){super(t),this.minValue=r,this.maxValue=i,this.firstBreak=s}match(t){return this.minValue===this.maxValue?this.maxValue===t:this.firstBreak?this.minValue<=t&&this.maxValue>=t:this.minValue<t&&this.maxValue>=t}}var A3={exports:{}};/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.7.1
* https://svgdotjs.github.io/
*
* @copyright Wout Fierens <wout@mick-wout.com>
* @license MIT
*
* BUILT: Fri Nov 30 2018 10:01:55 GMT+0100 (GMT+01:00)
*/var Bet=A3.exports,WW;function qet(){return WW||(WW=1,function(e,t){(function(r,i){e.exports=r.document?i(r,r.document):function(s){return i(s,s.document)}})(typeof window<"u"?window:Bet,function(r,i){var s=typeof this<"u"?this:r,n=s.SVG=function(y){if(n.supported)return y=new n.Doc(y),n.parser.draw||n.prepare(),y};if(n.ns="http://www.w3.org/2000/svg",n.xmlns="http://www.w3.org/2000/xmlns/",n.xlink="http://www.w3.org/1999/xlink",n.svgjs="http://svgjs.com/svgjs",n.supported=function(){return!!i.createElementNS&&!!i.createElementNS(n.ns,"svg").createSVGRect}(),!n.supported)return!1;n.did=1e3,n.eid=function(y){return"Svgjs"+w(y)+n.did++},n.create=function(y){var T=i.createElementNS(this.ns,y);return T.setAttribute("id",this.eid(y)),T},n.extend=function(){var y,T,$,P;for(y=[].slice.call(arguments),T=y.pop(),P=y.length-1;P>=0;P--)if(y[P])for($ in T)y[P].prototype[$]=T[$];n.Set&&n.Set.inherit&&n.Set.inherit()},n.invent=function(y){var T=typeof y.create=="function"?y.create:function(){this.constructor.call(this,n.create(y.create))};return y.inherit&&(T.prototype=new y.inherit),y.extend&&n.extend(T,y.extend),y.construct&&n.extend(y.parent||n.Container,y.construct),T},n.adopt=function(y){if(!y)return null;if(y.instance)return y.instance;var T;return y.nodeName=="svg"?T=y.parentNode instanceof r.SVGElement?new n.Nested:new n.Doc:y.nodeName=="linearGradient"?T=new n.Gradient("linear"):y.nodeName=="radialGradient"?T=new n.Gradient("radial"):n[w(y.nodeName)]?T=new n[w(y.nodeName)]:T=new n.Element(y),T.type=y.nodeName,T.node=y,y.instance=T,T instanceof n.Doc&&T.namespace().defs(),T.setData(JSON.parse(y.getAttribute("svgjs:data"))||{}),T},n.prepare=function(){var y=i.getElementsByTagName("body")[0],T=(y?new n.Doc(y):n.adopt(i.documentElement).nested()).size(2,0);n.parser={body:y||i.documentElement,draw:T.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:T.polyline().node,path:T.path().node,native:n.create("svg")}},n.parser={native:n.create("svg")},i.addEventListener("DOMContentLoaded",function(){n.parser.draw||n.prepare()},!1),n.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},n.utils={map:function(y,T){var $,P=y.length,z=[];for($=0;$<P;$++)z.push(T(y[$]));return z},filter:function(y,T){var $,P=y.length,z=[];for($=0;$<P;$++)T(y[$])&&z.push(y[$]);return z},radians:function(y){return y%360*Math.PI/180},degrees:function(y){return y*180/Math.PI%360},filterSVGElements:function(y){return this.filter(y,function(T){return T instanceof r.SVGElement})}},n.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},n.Color=function(y){var T;this.r=0,this.g=0,this.b=0,y&&(typeof y=="string"?n.regex.isRgb.test(y)?(T=n.regex.rgb.exec(y.replace(n.regex.whitespace,"")),this.r=parseInt(T[1]),this.g=parseInt(T[2]),this.b=parseInt(T[3])):n.regex.isHex.test(y)&&(T=n.regex.hex.exec(S(y)),this.r=parseInt(T[1],16),this.g=parseInt(T[2],16),this.b=parseInt(T[3],16)):typeof y=="object"&&(this.r=y.r,this.g=y.g,this.b=y.b))},n.extend(n.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+M(this.r)+M(this.g)+M(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(y){return this.destination=new n.Color(y),this},at:function(y){return this.destination?(y=y<0?0:y>1?1:y,new n.Color({r:~~(this.r+(this.destination.r-this.r)*y),g:~~(this.g+(this.destination.g-this.g)*y),b:~~(this.b+(this.destination.b-this.b)*y)})):this}}),n.Color.test=function(y){return y+="",n.regex.isHex.test(y)||n.regex.isRgb.test(y)},n.Color.isRgb=function(y){return y&&typeof y.r=="number"&&typeof y.g=="number"&&typeof y.b=="number"},n.Color.isColor=function(y){return n.Color.isRgb(y)||n.Color.test(y)},n.Array=function(y,T){y=(y||[]).valueOf(),y.length==0&&T&&(y=T.valueOf()),this.value=this.parse(y)},n.extend(n.Array,{morph:function(y){if(this.destination=this.parse(y),this.value.length!=this.destination.length){for(var T=this.value[this.value.length-1],$=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push($);for(;this.value.length<this.destination.length;)this.value.push(T)}return this},settle:function(){for(var y=0,T=this.value.length,$=[];y<T;y++)$.indexOf(this.value[y])==-1&&$.push(this.value[y]);return this.value=$},at:function(y){if(!this.destination)return this;for(var T=0,$=this.value.length,P=[];T<$;T++)P.push(this.value[T]+(this.destination[T]-this.value[T])*y);return new n.Array(P)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(y){return y=y.valueOf(),Array.isArray(y)?y:this.split(y)},split:function(y){return y.trim().split(n.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var y=new this.constructor;return y.value=f(this.value),y}}),n.PointArray=function(y,T){n.Array.call(this,y,T||[[0,0]])},n.PointArray.prototype=new n.Array,n.PointArray.prototype.constructor=n.PointArray,n.extend(n.PointArray,{toString:function(){for(var y=0,T=this.value.length,$=[];y<T;y++)$.push(this.value[y].join(","));return $.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(y){if(!this.destination)return this;for(var T=0,$=this.value.length,P=[];T<$;T++)P.push([this.value[T][0]+(this.destination[T][0]-this.value[T][0])*y,this.value[T][1]+(this.destination[T][1]-this.value[T][1])*y]);return new n.PointArray(P)},parse:function(y){var T=[];if(y=y.valueOf(),Array.isArray(y)){if(Array.isArray(y[0]))return y.map(function(z){return z.slice()});if(y[0].x!=null)return y.map(function(z){return[z.x,z.y]})}else y=y.trim().split(n.regex.delimiter).map(parseFloat);y.length%2!==0&&y.pop();for(var $=0,P=y.length;$<P;$=$+2)T.push([y[$],y[$+1]]);return T},move:function(y,T){var $=this.bbox();if(y-=$.x,T-=$.y,!isNaN(y)&&!isNaN(T))for(var P=this.value.length-1;P>=0;P--)this.value[P]=[this.value[P][0]+y,this.value[P][1]+T];return this},size:function(y,T){var $,P=this.bbox();for($=this.value.length-1;$>=0;$--)P.width&&(this.value[$][0]=(this.value[$][0]-P.x)*y/P.width+P.x),P.height&&(this.value[$][1]=(this.value[$][1]-P.y)*T/P.height+P.y);return this},bbox:function(){return n.parser.poly.setAttribute("points",this.toString()),n.parser.poly.getBBox()}});for(var o={M:function(y,T,$){return T.x=$.x=y[0],T.y=$.y=y[1],["M",T.x,T.y]},L:function(y,T){return T.x=y[0],T.y=y[1],["L",y[0],y[1]]},H:function(y,T){return T.x=y[0],["H",y[0]]},V:function(y,T){return T.y=y[0],["V",y[0]]},C:function(y,T){return T.x=y[4],T.y=y[5],["C",y[0],y[1],y[2],y[3],y[4],y[5]]},S:function(y,T){return T.x=y[2],T.y=y[3],["S",y[0],y[1],y[2],y[3]]},Q:function(y,T){return T.x=y[2],T.y=y[3],["Q",y[0],y[1],y[2],y[3]]},T:function(y,T){return T.x=y[0],T.y=y[1],["T",y[0],y[1]]},Z:function(y,T,$){return T.x=$.x,T.y=$.y,["Z"]},A:function(y,T){return T.x=y[5],T.y=y[6],["A",y[0],y[1],y[2],y[3],y[4],y[5],y[6]]}},a="mlhvqtcsaz".split(""),l=0,u=a.length;l<u;++l)o[a[l]]=function(y){return function(T,$,P){if(y=="H")T[0]=T[0]+$.x;else if(y=="V")T[0]=T[0]+$.y;else if(y=="A")T[5]=T[5]+$.x,T[6]=T[6]+$.y;else for(var z=0,X=T.length;z<X;++z)T[z]=T[z]+(z%2?$.y:$.x);return o[y](T,$,P)}}(a[l].toUpperCase());n.PathArray=function(y,T){n.Array.call(this,y,T||[["M",0,0]])},n.PathArray.prototype=new n.Array,n.PathArray.prototype.constructor=n.PathArray,n.extend(n.PathArray,{toString:function(){return C(this.value)},move:function(y,T){var $=this.bbox();if(y-=$.x,T-=$.y,!isNaN(y)&&!isNaN(T))for(var P,z=this.value.length-1;z>=0;z--)P=this.value[z][0],P=="M"||P=="L"||P=="T"?(this.value[z][1]+=y,this.value[z][2]+=T):P=="H"?this.value[z][1]+=y:P=="V"?this.value[z][1]+=T:P=="C"||P=="S"||P=="Q"?(this.value[z][1]+=y,this.value[z][2]+=T,this.value[z][3]+=y,this.value[z][4]+=T,P=="C"&&(this.value[z][5]+=y,this.value[z][6]+=T)):P=="A"&&(this.value[z][6]+=y,this.value[z][7]+=T);return this},size:function(y,T){var $,P,z=this.bbox();for($=this.value.length-1;$>=0;$--)P=this.value[$][0],P=="M"||P=="L"||P=="T"?(this.value[$][1]=(this.value[$][1]-z.x)*y/z.width+z.x,this.value[$][2]=(this.value[$][2]-z.y)*T/z.height+z.y):P=="H"?this.value[$][1]=(this.value[$][1]-z.x)*y/z.width+z.x:P=="V"?this.value[$][1]=(this.value[$][1]-z.y)*T/z.height+z.y:P=="C"||P=="S"||P=="Q"?(this.value[$][1]=(this.value[$][1]-z.x)*y/z.width+z.x,this.value[$][2]=(this.value[$][2]-z.y)*T/z.height+z.y,this.value[$][3]=(this.value[$][3]-z.x)*y/z.width+z.x,this.value[$][4]=(this.value[$][4]-z.y)*T/z.height+z.y,P=="C"&&(this.value[$][5]=(this.value[$][5]-z.x)*y/z.width+z.x,this.value[$][6]=(this.value[$][6]-z.y)*T/z.height+z.y)):P=="A"&&(this.value[$][1]=this.value[$][1]*y/z.width,this.value[$][2]=this.value[$][2]*T/z.height,this.value[$][6]=(this.value[$][6]-z.x)*y/z.width+z.x,this.value[$][7]=(this.value[$][7]-z.y)*T/z.height+z.y);return this},equalCommands:function(y){var T,$,P;for(y=new n.PathArray(y),P=this.value.length===y.value.length,T=0,$=this.value.length;P&&T<$;T++)P=this.value[T][0]===y.value[T][0];return P},morph:function(y){return y=new n.PathArray(y),this.equalCommands(y)?this.destination=y:this.destination=null,this},at:function(y){if(!this.destination)return this;var T=this.value,$=this.destination.value,P=[],z=new n.PathArray,X,ae,te,ye;for(X=0,ae=T.length;X<ae;X++){for(P[X]=[T[X][0]],te=1,ye=T[X].length;te<ye;te++)P[X][te]=T[X][te]+($[X][te]-T[X][te])*y;P[X][0]==="A"&&(P[X][4]=+(P[X][4]!=0),P[X][5]=+(P[X][5]!=0))}return z.value=P,z},parse:function(y){if(y instanceof n.PathArray)return y.valueOf();var T,P,$={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};typeof y=="string"?y=y.replace(n.regex.numbersWithDots,p).replace(n.regex.pathLetters," $& ").replace(n.regex.hyphen,"$1 -").trim().split(n.regex.delimiter):y=y.reduce(function(ye,Me){return[].concat.call(ye,Me)},[]);var P=[],z=new n.Point,X=new n.Point,ae=0,te=y.length;do n.regex.isPathLetter.test(y[ae])?(T=y[ae],++ae):T=="M"?T="L":T=="m"&&(T="l"),P.push(o[T].call(null,y.slice(ae,ae=ae+$[T.toUpperCase()]).map(parseFloat),z,X));while(te>ae);return P},bbox:function(){return n.parser.path.setAttribute("d",this.toString()),n.parser.path.getBBox()}}),n.Number=n.invent({create:function(y,T){this.value=0,this.unit=T||"",typeof y=="number"?this.value=isNaN(y)?0:isFinite(y)?y:y<0?-34e37:34e37:typeof y=="string"?(T=y.match(n.regex.numberAndUnit),T&&(this.value=parseFloat(T[1]),T[5]=="%"?this.value/=100:T[5]=="s"&&(this.value*=1e3),this.unit=T[5])):y instanceof n.Number&&(this.value=y.valueOf(),this.unit=y.unit)},extend:{toString:function(){return(this.unit=="%"?~~(this.value*1e8)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(y){return y=new n.Number(y),new n.Number(this+y,this.unit||y.unit)},minus:function(y){return y=new n.Number(y),new n.Number(this-y,this.unit||y.unit)},times:function(y){return y=new n.Number(y),new n.Number(this*y,this.unit||y.unit)},divide:function(y){return y=new n.Number(y),new n.Number(this/y,this.unit||y.unit)},to:function(y){var T=new n.Number(this);return typeof y=="string"&&(T.unit=y),T},morph:function(y){return this.destination=new n.Number(y),y.relative&&(this.destination.value+=this.value),this},at:function(y){return this.destination?new n.Number(this.destination).minus(this).times(y).plus(this):this}}}),n.Element=n.invent({create:function(y){this._stroke=n.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=y)&&(this.type=y.nodeName,this.node.instance=this,this._events=y._events||{},this._stroke=y.getAttribute("stroke")||this._stroke)},extend:{x:function(y){return this.attr("x",y)},y:function(y){return this.attr("y",y)},cx:function(y){return y==null?this.x()+this.width()/2:this.x(y-this.width()/2)},cy:function(y){return y==null?this.y()+this.height()/2:this.y(y-this.height()/2)},move:function(y,T){return this.x(y).y(T)},center:function(y,T){return this.cx(y).cy(T)},width:function(y){return this.attr("width",y)},height:function(y){return this.attr("height",y)},size:function(y,T){var $=x(this,y,T);return this.width(new n.Number($.width)).height(new n.Number($.height))},clone:function(y){this.writeDataToDom();var T=O(this.node.cloneNode(!0));return y?y.add(T):this.after(T),T},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(y){return this.after(y).remove(),y},addTo:function(y){return y.put(this)},putIn:function(y){return y.add(this)},id:function(y){return this.attr("id",y)},inside:function(y,T){var $=this.bbox();return y>$.x&&T>$.y&&y<$.x+$.width&&T<$.y+$.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var y=this.attr("class");return y==null?[]:y.trim().split(n.regex.delimiter)},hasClass:function(y){return this.classes().indexOf(y)!=-1},addClass:function(y){if(!this.hasClass(y)){var T=this.classes();T.push(y),this.attr("class",T.join(" "))}return this},removeClass:function(y){return this.hasClass(y)&&this.attr("class",this.classes().filter(function(T){return T!=y}).join(" ")),this},toggleClass:function(y){return this.hasClass(y)?this.removeClass(y):this.addClass(y)},reference:function(y){return n.get(this.attr(y))},parent:function(y){var T=this;if(!T.node.parentNode)return null;if(T=n.adopt(T.node.parentNode),!y)return T;for(;T&&T.node instanceof r.SVGElement;){if(typeof y=="string"?T.matches(y):T instanceof y)return T;if(!T.node.parentNode||T.node.parentNode.nodeName=="#document"||T.node.parentNode.nodeName=="#document-fragment")return null;T=n.adopt(T.node.parentNode)}},doc:function(){return this instanceof n.Doc?this:this.parent(n.Doc)},parents:function(y){var T=[],$=this;do{if($=$.parent(y),!$||!$.node)break;T.push($)}while($.parent);return T},matches:function(y){return g(this.node,y)},native:function(){return this.node},svg:function(y){var T=i.createElement("svg");if(y&&this instanceof n.Parent){T.innerHTML="<svg>"+y.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var $=0,P=T.firstChild.childNodes.length;$<P;$++)this.node.appendChild(T.firstChild.firstChild)}else return T.appendChild(y=i.createElement("svg")),this.writeDataToDom(),y.appendChild(this.node.cloneNode(!0)),T.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");return this},writeDataToDom:function(){if(this.each||this.lines){var y=this.each?this:this.lines();y.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(y){return this.dom=y,this},is:function(y){return m(this,y)}}}),n.easing={"-":function(y){return y},"<>":function(y){return-Math.cos(y*Math.PI)/2+.5},">":function(y){return Math.sin(y*Math.PI/2)},"<":function(y){return-Math.cos(y*Math.PI/2)+1}},n.morph=function(y){return function(T,$){return new n.MorphObj(T,$).at(y)}},n.Situation=n.invent({create:function(y){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new n.Number(y.duration).valueOf(),this.delay=new n.Number(y.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=y.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),n.FX=n.invent({create:function(y){this._target=y,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(y,T,$){typeof y=="object"&&(T=y.ease,$=y.delay,y=y.duration);var P=new n.Situation({duration:y||1e3,delay:$||0,ease:n.easing[T||"-"]||T});return this.queue(P),this},delay:function(y){var T=new n.Situation({duration:y,delay:0,ease:n.easing["-"]});return this.queue(T)},target:function(y){return y&&y instanceof n.Element?(this._target=y,this):this._target},timeToAbsPos:function(y){return(y-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(y){return this.situation.duration/this._speed*y+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=r.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){r.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(y){return(typeof y=="function"||y instanceof n.Situation)&&this.situations.push(y),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof n.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var y,T,$,P=this.situation;if(P.init)return this;for(y in P.animations)for($=this.target()[y](),Array.isArray($)||($=[$]),Array.isArray(P.animations[y])||(P.animations[y]=[P.animations[y]]),T=$.length;T--;)P.animations[y][T]instanceof n.Number&&($[T]=new n.Number($[T])),P.animations[y][T]=$[T].morph(P.animations[y][T]);for(y in P.attrs)P.attrs[y]=new n.MorphObj(this.target().attr(y),P.attrs[y]);for(y in P.styles)P.styles[y]=new n.MorphObj(this.target().style(y),P.styles[y]);return P.initialTransformation=this.target().matrixify(),P.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(y,T){var $=this.active;return this.active=!1,T&&this.clearQueue(),y&&this.situation&&(!$&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var y=this.situation;this.stop(),this.situation=y,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),typeof this.situation.loops=="number"?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(y,T){var $=this.situation.duration/this._speed;return this.absPos=y,T||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*$,this.situation.finish=this.situation.start+$,this.step(!0)},speed:function(y){return y===0?this.pause():y?(this._speed=y,this.at(this.absPos,!0)):this._speed},loop:function(y,T){var $=this.last();return $.loops=y??!0,$.loop=0,T&&($.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(y){var T=this.last();return typeof y>"u"?T.reversed=!T.reversed:T.reversed=y,this},progress:function(y){return y?this.situation.ease(this.pos):this.pos},after:function(y){var T=this.last(),$=function P(z){z.detail.situation==T&&(y.call(this,T),this.off("finished.fx",P))};return this.target().on("finished.fx",$),this._callStart()},during:function(y){var T=this.last(),$=function(P){P.detail.situation==T&&y.call(this,P.detail.pos,n.morph(P.detail.pos),P.detail.eased,T)};return this.target().off("during.fx",$).on("during.fx",$),this.after(function(){this.off("during.fx",$)}),this._callStart()},afterAll:function(y){var T=function $(P){y.call(this),this.off("allfinished.fx",$)};return this.target().off("allfinished.fx",T).on("allfinished.fx",T),this._callStart()},duringAll:function(y){var T=function($){y.call(this,$.detail.pos,n.morph($.detail.pos),$.detail.eased,$.detail.situation)};return this.target().off("during.fx",T).on("during.fx",T),this.afterAll(function(){this.off("during.fx",T)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(y,T,$){return this.last()[$||"animations"][y]=T,this._callStart()},step:function(y){if(y||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var T,$,P;T=Math.max(this.absPos,0),$=Math.floor(T),this.situation.loops===!0||$<this.situation.loops?(this.pos=T-$,P=this.situation.loop,this.situation.loop=$):(this.absPos=this.situation.loops,this.pos=1,P=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-P)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var z=this.situation.ease(this.pos);for(var X in this.situation.once)X>this.lastPos&&X<=z&&(this.situation.once[X].call(this.target(),this.pos,z),delete this.situation.once[X]);return this.active&&this.target().fire("during",{pos:this.pos,eased:z,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=z,this):this},eachAt:function(){var y,T,$,P=this,z=this.target(),X=this.situation;for(y in X.animations)$=[].concat(X.animations[y]).map(function(te){return typeof te!="string"&&te.at?te.at(X.ease(P.pos),P.pos):te}),z[y].apply(z,$);for(y in X.attrs)$=[y].concat(X.attrs[y]).map(function(te){return typeof te!="string"&&te.at?te.at(X.ease(P.pos),P.pos):te}),z.attr.apply(z,$);for(y in X.styles)$=[y].concat(X.styles[y]).map(function(te){return typeof te!="string"&&te.at?te.at(X.ease(P.pos),P.pos):te}),z.style.apply(z,$);if(X.transforms.length){for($=X.initialTransformation,y=0,T=X.transforms.length;y<T;y++){var ae=X.transforms[y];if(ae instanceof n.Matrix){ae.relative?$=$.multiply(new n.Matrix().morph(ae).at(X.ease(this.pos))):$=$.morph(ae).at(X.ease(this.pos));continue}ae.relative||ae.undo($.extract()),$=$.multiply(ae.at(X.ease(this.pos)))}z.matrix($)}return this},once:function(y,T,$){var P=this.last();return $||(y=P.ease(y)),P.once[y]=T,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:n.Element,construct:{animate:function(y,T,$){return(this.fx||(this.fx=new n.FX(this))).animate(y,T,$)},delay:function(y){return(this.fx||(this.fx=new n.FX(this))).delay(y)},stop:function(y,T){return this.fx&&this.fx.stop(y,T),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(y){if(this.fx){if(y==null)return this.fx.speed();this.fx.speed(y)}return this}}}),n.MorphObj=n.invent({create:function(y,T){if(n.Color.isColor(T))return new n.Color(y).morph(T);if(n.regex.delimiter.test(y))return n.regex.pathLetters.test(y)?new n.PathArray(y).morph(T):new n.Array(y).morph(T);if(n.regex.numberAndUnit.test(T))return new n.Number(y).morph(T);this.value=y,this.destination=T},extend:{at:function(y,T){return T<1?this.value:this.destination},valueOf:function(){return this.value}}}),n.extend(n.FX,{attr:function(y,T,$){if(typeof y=="object")for(var P in y)this.attr(P,y[P]);else this.add(y,T,"attrs");return this},style:function(y,T){if(typeof y=="object")for(var $ in y)this.style($,y[$]);else this.add(y,T,"styles");return this},x:function(y,T){if(this.target()instanceof n.G)return this.transform({x:y},T),this;var $=new n.Number(y);return $.relative=T,this.add("x",$)},y:function(y,T){if(this.target()instanceof n.G)return this.transform({y},T),this;var $=new n.Number(y);return $.relative=T,this.add("y",$)},cx:function(y){return this.add("cx",new n.Number(y))},cy:function(y){return this.add("cy",new n.Number(y))},move:function(y,T){return this.x(y).y(T)},center:function(y,T){return this.cx(y).cy(T)},size:function(y,T){if(this.target()instanceof n.Text)this.attr("font-size",y);else{var $;(!y||!T)&&($=this.target().bbox()),y||(y=$.width/$.height*T),T||(T=$.height/$.width*y),this.add("width",new n.Number(y)).add("height",new n.Number(T))}return this},width:function(y){return this.add("width",new n.Number(y))},height:function(y){return this.add("height",new n.Number(y))},plot:function(y,T,$,P){return arguments.length==4?this.plot([y,T,$,P]):this.add("plot",new(this.target()).morphArray(y))},leading:function(y){return this.target().leading?this.add("leading",new n.Number(y)):this},viewbox:function(y,T,$,P){return this.target()instanceof n.Container&&this.add("viewbox",new n.ViewBox(y,T,$,P)),this},update:function(y){if(this.target()instanceof n.Stop){if(typeof y=="number"||y instanceof n.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",y.offset)}return this}}),n.Box=n.invent({create:function(y,T,$,P){if(typeof y=="object"&&!(y instanceof n.Element))return n.Box.call(this,y.left!=null?y.left:y.x,y.top!=null?y.top:y.y,y.width,y.height);arguments.length==4&&(this.x=y,this.y=T,this.width=$,this.height=P),R(this)},extend:{merge:function(y){var T=new this.constructor;return T.x=Math.min(this.x,y.x),T.y=Math.min(this.y,y.y),T.width=Math.max(this.x+this.width,y.x+y.width)-T.x,T.height=Math.max(this.y+this.height,y.y+y.height)-T.y,R(T)},transform:function(y){var T=1/0,$=-1/0,P=1/0,z=-1/0,X,ae=[new n.Point(this.x,this.y),new n.Point(this.x2,this.y),new n.Point(this.x,this.y2),new n.Point(this.x2,this.y2)];return ae.forEach(function(te){te=te.transform(y),T=Math.min(T,te.x),$=Math.max($,te.x),P=Math.min(P,te.y),z=Math.max(z,te.y)}),X=new this.constructor,X.x=T,X.width=$-T,X.y=P,X.height=z-P,R(X),X}}}),n.BBox=n.invent({create:function(y){if(n.Box.apply(this,[].slice.call(arguments)),y instanceof n.Element){var T;try{if(i.documentElement.contains){if(!i.documentElement.contains(y.node))throw new Exception("Element not in the dom")}else{for(var $=y.node;$.parentNode;)$=$.parentNode;if($!=i)throw new Exception("Element not in the dom")}T=y.node.getBBox()}catch{if(y instanceof n.Shape){var P=y.clone(n.parser.draw.instance).show();T=P.node.getBBox(),P.remove()}else T={x:y.node.clientLeft,y:y.node.clientTop,width:y.node.clientWidth,height:y.node.clientHeight}}n.Box.call(this,T)}},inherit:n.Box,parent:n.Element,construct:{bbox:function(){return new n.BBox(this)}}}),n.BBox.prototype.constructor=n.BBox,n.extend(n.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),n.RBox=n.invent({create:function(y){n.Box.apply(this,[].slice.call(arguments)),y instanceof n.Element&&n.Box.call(this,y.node.getBoundingClientRect())},inherit:n.Box,parent:n.Element,extend:{addOffset:function(){return this.x+=r.pageXOffset,this.y+=r.pageYOffset,this}},construct:{rbox:function(y){return y?new n.RBox(this).transform(y.screenCTM().inverse()):new n.RBox(this).addOffset()}}}),n.RBox.prototype.constructor=n.RBox,n.Matrix=n.invent({create:function(y){var T,$=I([1,0,0,1,0,0]);for(y=y instanceof n.Element?y.matrixify():typeof y=="string"?I(y.split(n.regex.delimiter).map(parseFloat)):arguments.length==6?I([].slice.call(arguments)):Array.isArray(y)?I(y):typeof y=="object"?y:$,T=U.length-1;T>=0;--T)this[U[T]]=y[U[T]]!=null?y[U[T]]:$[U[T]]},extend:{extract:function(){var y=_(this,0,1),T=_(this,1,0),$=180/Math.PI*Math.atan2(y.y,y.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos($*Math.PI/180)+this.f*Math.sin($*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos($*Math.PI/180)+this.e*Math.sin(-$*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-$,skewY:180/Math.PI*Math.atan2(T.y,T.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:$,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new n.Matrix(this)}},clone:function(){return new n.Matrix(this)},morph:function(y){return this.destination=new n.Matrix(y),this},at:function(y){if(!this.destination)return this;var T=new n.Matrix({a:this.a+(this.destination.a-this.a)*y,b:this.b+(this.destination.b-this.b)*y,c:this.c+(this.destination.c-this.c)*y,d:this.d+(this.destination.d-this.d)*y,e:this.e+(this.destination.e-this.e)*y,f:this.f+(this.destination.f-this.f)*y});return T},multiply:function(y){return new n.Matrix(this.native().multiply(E(y).native()))},inverse:function(){return new n.Matrix(this.native().inverse())},translate:function(y,T){return new n.Matrix(this.native().translate(y||0,T||0))},scale:function(y,T,$,P){return arguments.length==1?T=y:arguments.length==3&&(P=$,$=T,T=y),this.around($,P,new n.Matrix(y,0,0,T,0,0))},rotate:function(y,T,$){return y=n.utils.radians(y),this.around(T,$,new n.Matrix(Math.cos(y),Math.sin(y),-Math.sin(y),Math.cos(y),0,0))},flip:function(y,T){return y=="x"?this.scale(-1,1,T,0):y=="y"?this.scale(1,-1,0,T):this.scale(-1,-1,y,T??y)},skew:function(y,T,$,P){return arguments.length==1?T=y:arguments.length==3&&(P=$,$=T,T=y),y=n.utils.radians(y),T=n.utils.radians(T),this.around($,P,new n.Matrix(1,Math.tan(T),Math.tan(y),1,0,0))},skewX:function(y,T,$){return this.skew(y,0,T,$)},skewY:function(y,T,$){return this.skew(0,y,T,$)},around:function(y,T,$){return this.multiply(new n.Matrix(1,0,0,1,y||0,T||0)).multiply($).multiply(new n.Matrix(1,0,0,1,-y||0,-T||0))},native:function(){for(var y=n.parser.native.createSVGMatrix(),T=U.length-1;T>=0;T--)y[U[T]]=this[U[T]];return y},toString:function(){return"matrix("+N(this.a)+","+N(this.b)+","+N(this.c)+","+N(this.d)+","+N(this.e)+","+N(this.f)+")"}},parent:n.Element,construct:{ctm:function(){return new n.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof n.Nested){var y=this.rect(1,1),T=y.node.getScreenCTM();return y.remove(),new n.Matrix(T)}return new n.Matrix(this.node.getScreenCTM())}}}),n.Point=n.invent({create:function(y,T){var $,P={x:0,y:0};$=Array.isArray(y)?{x:y[0],y:y[1]}:typeof y=="object"?{x:y.x,y:y.y}:y!=null?{x:y,y:T??y}:P,this.x=$.x,this.y=$.y},extend:{clone:function(){return new n.Point(this)},morph:function(y,T){return this.destination=new n.Point(y,T),this},at:function(y){if(!this.destination)return this;var T=new n.Point({x:this.x+(this.destination.x-this.x)*y,y:this.y+(this.destination.y-this.y)*y});return T},native:function(){var y=n.parser.native.createSVGPoint();return y.x=this.x,y.y=this.y,y},transform:function(y){return new n.Point(this.native().matrixTransform(y.native()))}}}),n.extend(n.Element,{point:function(y,T){return new n.Point(y,T).transform(this.screenCTM().inverse())}}),n.extend(n.Element,{attr:function(y,T,$){if(y==null){for(y={},T=this.node.attributes,$=T.length-1;$>=0;$--)y[T[$].nodeName]=n.regex.isNumber.test(T[$].nodeValue)?parseFloat(T[$].nodeValue):T[$].nodeValue;return y}else if(typeof y=="object")for(T in y)this.attr(T,y[T]);else if(T===null)this.node.removeAttribute(y);else{if(T==null)return T=this.node.getAttribute(y),T==null?n.defaults.attrs[y]:n.regex.isNumber.test(T)?parseFloat(T):T;y=="stroke-width"?this.attr("stroke",parseFloat(T)>0?this._stroke:null):y=="stroke"&&(this._stroke=T),(y=="fill"||y=="stroke")&&(n.regex.isImage.test(T)&&(T=this.doc().defs().image(T,0,0)),T instanceof n.Image&&(T=this.doc().defs().pattern(0,0,function(){this.add(T)}))),typeof T=="number"?T=new n.Number(T):n.Color.isColor(T)?T=new n.Color(T):Array.isArray(T)&&(T=new n.Array(T)),y=="leading"?this.leading&&this.leading(T):typeof $=="string"?this.node.setAttributeNS($,y,T.toString()):this.node.setAttribute(y,T.toString()),this.rebuild&&(y=="font-size"||y=="x")&&this.rebuild(y,T)}return this}}),n.extend(n.Element,{transform:function(y,T){var $=this,P,z;if(typeof y!="object")return P=new n.Matrix($).extract(),typeof y=="string"?P[y]:P;if(P=new n.Matrix($),T=!!T||!!y.relative,y.a!=null)P=T?P.multiply(new n.Matrix(y)):new n.Matrix(y);else if(y.rotation!=null)A(y,$),P=T?P.rotate(y.rotation,y.cx,y.cy):P.rotate(y.rotation-P.extract().rotation,y.cx,y.cy);else if(y.scale!=null||y.scaleX!=null||y.scaleY!=null){if(A(y,$),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,!T){var X=P.extract();y.scaleX=y.scaleX*1/X.scaleX,y.scaleY=y.scaleY*1/X.scaleY}P=P.scale(y.scaleX,y.scaleY,y.cx,y.cy)}else if(y.skew!=null||y.skewX!=null||y.skewY!=null){if(A(y,$),y.skewX=y.skew!=null?y.skew:y.skewX!=null?y.skewX:0,y.skewY=y.skew!=null?y.skew:y.skewY!=null?y.skewY:0,!T){var X=P.extract();P=P.multiply(new n.Matrix().skew(X.skewX,X.skewY,y.cx,y.cy).inverse())}P=P.skew(y.skewX,y.skewY,y.cx,y.cy)}else y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?$.bbox()["c"+y.flip]:y.offset:y.offset==null?(z=$.bbox(),y.flip=z.cx,y.offset=z.cy):y.flip=y.offset,P=new n.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(T?P=P.translate(y.x,y.y):(y.x!=null&&(P.e=y.x),y.y!=null&&(P.f=y.y)));return this.attr("transform",P)}}),n.extend(n.FX,{transform:function(y,T){var $=this.target(),P,z;return typeof y!="object"?(P=new n.Matrix($).extract(),typeof y=="string"?P[y]:P):(T=!!T||!!y.relative,y.a!=null?P=new n.Matrix(y):y.rotation!=null?(A(y,$),P=new n.Rotate(y.rotation,y.cx,y.cy)):y.scale!=null||y.scaleX!=null||y.scaleY!=null?(A(y,$),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,P=new n.Scale(y.scaleX,y.scaleY,y.cx,y.cy)):y.skewX!=null||y.skewY!=null?(A(y,$),y.skewX=y.skewX!=null?y.skewX:0,y.skewY=y.skewY!=null?y.skewY:0,P=new n.Skew(y.skewX,y.skewY,y.cx,y.cy)):y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?$.bbox()["c"+y.flip]:y.offset:y.offset==null?(z=$.bbox(),y.flip=z.cx,y.offset=z.cy):y.flip=y.offset,P=new n.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(P=new n.Translate(y.x,y.y)),P?(P.relative=T,this.last().transforms.push(P),this._callStart()):this)}}),n.extend(n.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var y=(this.attr("transform")||"").split(n.regex.transforms).slice(0,-1).map(function(T){var $=T.trim().split("(");return[$[0],$[1].split(n.regex.delimiter).map(function(P){return parseFloat(P)})]}).reduce(function(T,$){return $[0]=="matrix"?T.multiply(I($[1])):T[$[0]].apply(T,$[1])},new n.Matrix);return y},toParent:function(y){if(this==y)return this;var T=this.screenCTM(),$=y.screenCTM().inverse();return this.addTo(y).untransform().transform($.multiply(T)),this},toDoc:function(){return this.toParent(this.doc())}}),n.Transformation=n.invent({create:function(y,T){if(arguments.length>1&&typeof T!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(y))for(var $=0,P=this.arguments.length;$<P;++$)this[this.arguments[$]]=y[$];else if(typeof y=="object")for(var $=0,P=this.arguments.length;$<P;++$)this[this.arguments[$]]=y[this.arguments[$]];this.inversed=!1,T===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(y){for(var T=[],$=0,P=this.arguments.length;$<P;++$)T.push(this[this.arguments[$]]);var z=this._undo||new n.Matrix;return z=new n.Matrix().morph(n.Matrix.prototype[this.method].apply(z,T)).at(y),this.inversed?z.inverse():z},undo:function(y){for(var T=0,$=this.arguments.length;T<$;++T)y[this.arguments[T]]=typeof this[this.arguments[T]]>"u"?0:y[this.arguments[T]];return y.cx=this.cx,y.cy=this.cy,this._undo=new n[w(this.method)](y,!0).at(1),this}}}),n.Translate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,T){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),n.Rotate=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,T){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(y){var T=new n.Matrix().rotate(new n.Number().morph(this.rotation-(this._undo?this._undo.rotation:0)).at(y),this.cx,this.cy);return this.inversed?T.inverse():T},undo:function(y){return this._undo=y,this}}}),n.Scale=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,T){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),n.Skew=n.invent({parent:n.Matrix,inherit:n.Transformation,create:function(y,T){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),n.extend(n.Element,{style:function(y,T){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(typeof y=="object")for(T in y)this.style(T,y[T]);else if(n.regex.isCss.test(y))for(y=y.split(/\s*;\s*/).filter(function($){return!!$}).map(function($){return $.split(/\s*:\s*/)});T=y.pop();)this.style(T[0],T[1]);else return this.node.style[b(y)];else this.node.style[b(y)]=T===null||n.regex.isBlank.test(T)?"":T;return this}}),n.Parent=n.invent({create:function(y){this.constructor.call(this,y)},inherit:n.Element,extend:{children:function(){return n.utils.map(n.utils.filterSVGElements(this.node.childNodes),function(y){return n.adopt(y)})},add:function(y,T){return T==null?this.node.appendChild(y.node):y.node!=this.node.childNodes[T]&&this.node.insertBefore(y.node,this.node.childNodes[T]),this},put:function(y,T){return this.add(y,T),y},has:function(y){return this.index(y)>=0},index:function(y){return[].slice.call(this.node.childNodes).indexOf(y.node)},get:function(y){return n.adopt(this.node.childNodes[y])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(y,T){var $,P,z=this.children();for($=0,P=z.length;$<P;$++)z[$]instanceof n.Element&&y.apply(z[$],[$,z]),T&&z[$]instanceof n.Container&&z[$].each(y,T);return this},removeElement:function(y){return this.node.removeChild(y.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),n.extend(n.Parent,{ungroup:function(y,T){return T===0||this instanceof n.Defs||this.node==n.parser.draw?this:(y=y||(this instanceof n.Doc?this:this.parent(n.Parent)),T=T||1/0,this.each(function(){return this instanceof n.Defs?this:this instanceof n.Parent?this.ungroup(y,T-1):this.toParent(y)}),this.node.firstChild||this.remove(),this)},flatten:function(y,T){return this.ungroup(y,T)}}),n.Container=n.invent({create:function(y){this.constructor.call(this,y)},inherit:n.Parent}),n.ViewBox=n.invent({create:function(y){var T=[0,0,0,0],$,P,z,X,ae,te,ye,Me=1,De=1,$e=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(y instanceof n.Element){for(te=y,ye=y,ae=(y.attr("viewBox")||"").match($e),y.bbox,z=new n.Number(y.width()),X=new n.Number(y.height());z.unit=="%";)Me*=z.value,z=new n.Number(te instanceof n.Doc?te.parent().offsetWidth:te.parent().width()),te=te.parent();for(;X.unit=="%";)De*=X.value,X=new n.Number(ye instanceof n.Doc?ye.parent().offsetHeight:ye.parent().height()),ye=ye.parent();this.x=0,this.y=0,this.width=z*Me,this.height=X*De,this.zoom=1,ae&&($=parseFloat(ae[0]),P=parseFloat(ae[1]),z=parseFloat(ae[2]),X=parseFloat(ae[3]),this.zoom=this.width/this.height>z/X?this.height/X:this.width/z,this.x=$,this.y=P,this.width=z,this.height=X)}else y=typeof y=="string"?y.match($e).map(function(gt){return parseFloat(gt)}):Array.isArray(y)?y:typeof y=="object"?[y.x,y.y,y.width,y.height]:arguments.length==4?[].slice.call(arguments):T,this.x=y[0],this.y=y[1],this.width=y[2],this.height=y[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(y,T,$,P){return this.destination=new n.ViewBox(y,T,$,P),this},at:function(y){return this.destination?new n.ViewBox([this.x+(this.destination.x-this.x)*y,this.y+(this.destination.y-this.y)*y,this.width+(this.destination.width-this.width)*y,this.height+(this.destination.height-this.height)*y]):this}},parent:n.Container,construct:{viewbox:function(y,T,$,P){return arguments.length==0?new n.ViewBox(this):this.attr("viewBox",new n.ViewBox(y,T,$,P))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(y){n.Element.prototype[y]=function(T){return T==null?n.off(this,y):n.on(this,y,T),this}}),n.listenerId=0,n.on=function(y,T,$,P,z){var X=$.bind(P||y),ae=y instanceof n.Element?y.node:y;ae.instance=ae.instance||{_events:{}};var te=ae.instance._events;$._svgjsListenerId||($._svgjsListenerId=++n.listenerId),T.split(n.regex.delimiter).forEach(function(ye){var Me=ye.split(".")[0],De=ye.split(".")[1]||"*";te[Me]=te[Me]||{},te[Me][De]=te[Me][De]||{},te[Me][De][$._svgjsListenerId]=X,ae.addEventListener(Me,X,z||!1)})},n.off=function(y,T,$,P){var z=y instanceof n.Element?y.node:y;if(z.instance&&!(typeof $=="function"&&($=$._svgjsListenerId,!$))){var X=z.instance._events;(T||"").split(n.regex.delimiter).forEach(function(ae){var te=ae&&ae.split(".")[0],ye=ae&&ae.split(".")[1],Me,De;if($)X[te]&&X[te][ye||"*"]&&(z.removeEventListener(te,X[te][ye||"*"][$],P||!1),delete X[te][ye||"*"][$]);else if(te&&ye){if(X[te]&&X[te][ye]){for(De in X[te][ye])n.off(z,[te,ye].join("."),De);delete X[te][ye]}}else if(ye)for(ae in X)for(Me in X[ae])ye===Me&&n.off(z,[ae,ye].join("."));else if(te){if(X[te]){for(Me in X[te])n.off(z,[te,Me].join("."));delete X[te]}}else{for(ae in X)n.off(z,ae);z.instance._events={}}})}},n.extend(n.Element,{on:function(y,T,$,P){return n.on(this,y,T,$,P),this},off:function(y,T){return n.off(this.node,y,T),this},fire:function(y,T){return y instanceof r.Event?this.node.dispatchEvent(y):this.node.dispatchEvent(y=new n.CustomEvent(y,{detail:T,cancelable:!0})),this._event=y,this},event:function(){return this._event}}),n.Defs=n.invent({create:"defs",inherit:n.Container}),n.G=n.invent({create:"g",inherit:n.Container,extend:{x:function(y){return y==null?this.transform("x"):this.transform({x:y-this.x()},!0)},y:function(y){return y==null?this.transform("y"):this.transform({y:y-this.y()},!0)},cx:function(y){return y==null?this.gbox().cx:this.x(y-this.gbox().width/2)},cy:function(y){return y==null?this.gbox().cy:this.y(y-this.gbox().height/2)},gbox:function(){var y=this.bbox(),T=this.transform();return y.x+=T.x,y.x2+=T.x,y.cx+=T.x,y.y+=T.y,y.y2+=T.y,y.cy+=T.y,y}},construct:{group:function(){return this.put(new n.G)}}}),n.Doc=n.invent({create:function(y){y&&(y=typeof y=="string"?i.getElementById(y):y,y.nodeName=="svg"?this.constructor.call(this,y):(this.constructor.call(this,n.create("svg")),y.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:n.Container,extend:{namespace:function(){return this.attr({xmlns:n.ns,version:"1.1"}).attr("xmlns:xlink",n.xlink,n.xmlns).attr("xmlns:svgjs",n.svgjs,n.xmlns)},defs:function(){if(!this._defs){var y;(y=this.node.getElementsByTagName("defs")[0])?this._defs=n.adopt(y):this._defs=new n.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return!this.node.parentNode||this.node.parentNode.nodeName=="#document"||this.node.parentNode.nodeName=="#document-fragment"?null:this.node.parentNode},spof:function(){var y=this.node.getScreenCTM();return y&&this.style("left",-y.e%1+"px").style("top",-y.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,n.parser.draw.parentNode||this.node.appendChild(n.parser.draw),this},clone:function(y){this.writeDataToDom();var T=this.node,$=O(T.cloneNode(!0));return y?(y.node||y).appendChild($.node):T.parentNode.insertBefore($.node,T.nextSibling),$}}}),n.extend(n.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var y=this.position()+1,T=this.parent();return T.removeElement(this).add(this,y),T instanceof n.Doc&&T.node.appendChild(T.defs().node),this},backward:function(){var y=this.position();return y>0&&this.parent().removeElement(this).add(this,y-1),this},front:function(){var y=this.parent();return y.node.appendChild(this.node),y instanceof n.Doc&&y.node.appendChild(y.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(y){y.remove();var T=this.position();return this.parent().add(y,T),this},after:function(y){y.remove();var T=this.position();return this.parent().add(y,T+1),this}}),n.Mask=n.invent({create:function(){this.constructor.call(this,n.create("mask")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unmask();return this.targets=[],n.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new n.Mask)}}}),n.extend(n.Element,{maskWith:function(y){return this.masker=y instanceof n.Mask?y:this.parent().mask().add(y),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),n.ClipPath=n.invent({create:function(){this.constructor.call(this,n.create("clipPath")),this.targets=[]},inherit:n.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new n.ClipPath)}}}),n.extend(n.Element,{clipWith:function(y){return this.clipper=y instanceof n.ClipPath?y:this.parent().clip().add(y),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),n.Gradient=n.invent({create:function(y){this.constructor.call(this,n.create(y+"Gradient")),this.type=y},inherit:n.Container,extend:{at:function(y,T,$){return this.put(new n.Stop).update(y,T,$)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(y,T,$){return y=="transform"&&(y="gradientTransform"),n.Container.prototype.attr.call(this,y,T,$)}},construct:{gradient:function(y,T){return this.defs().gradient(y,T)}}}),n.extend(n.Gradient,n.FX,{from:function(y,T){return(this._target||this).type=="radial"?this.attr({fx:new n.Number(y),fy:new n.Number(T)}):this.attr({x1:new n.Number(y),y1:new n.Number(T)})},to:function(y,T){return(this._target||this).type=="radial"?this.attr({cx:new n.Number(y),cy:new n.Number(T)}):this.attr({x2:new n.Number(y),y2:new n.Number(T)})}}),n.extend(n.Defs,{gradient:function(y,T){return this.put(new n.Gradient(y)).update(T)}}),n.Stop=n.invent({create:"stop",inherit:n.Element,extend:{update:function(y){return(typeof y=="number"||y instanceof n.Number)&&(y={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",new n.Number(y.offset)),this}}}),n.Pattern=n.invent({create:"pattern",inherit:n.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return this.fill()},attr:function(y,T,$){return y=="transform"&&(y="patternTransform"),n.Container.prototype.attr.call(this,y,T,$)}},construct:{pattern:function(y,T,$){return this.defs().pattern(y,T,$)}}}),n.extend(n.Defs,{pattern:function(y,T,$){return this.put(new n.Pattern).update($).attr({x:0,y:0,width:y,height:T,patternUnits:"userSpaceOnUse"})}}),n.Shape=n.invent({create:function(y){this.constructor.call(this,y)},inherit:n.Element}),n.Bare=n.invent({create:function(y,T){if(this.constructor.call(this,n.create(y)),T)for(var $ in T.prototype)typeof T.prototype[$]=="function"&&(this[$]=T.prototype[$])},inherit:n.Element,extend:{words:function(y){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(i.createTextNode(y)),this}}}),n.extend(n.Parent,{element:function(y,T){return this.put(new n.Bare(y,T))}}),n.Symbol=n.invent({create:"symbol",inherit:n.Container,construct:{symbol:function(){return this.put(new n.Symbol)}}}),n.Use=n.invent({create:"use",inherit:n.Shape,extend:{element:function(y,T){return this.attr("href",(T||"")+"#"+y,n.xlink)}},construct:{use:function(y,T){return this.put(new n.Use).element(y,T)}}}),n.Rect=n.invent({create:"rect",inherit:n.Shape,construct:{rect:function(y,T){return this.put(new n.Rect).size(y,T)}}}),n.Circle=n.invent({create:"circle",inherit:n.Shape,construct:{circle:function(y){return this.put(new n.Circle).rx(new n.Number(y).divide(2)).move(0,0)}}}),n.extend(n.Circle,n.FX,{rx:function(y){return this.attr("r",y)},ry:function(y){return this.rx(y)}}),n.Ellipse=n.invent({create:"ellipse",inherit:n.Shape,construct:{ellipse:function(y,T){return this.put(new n.Ellipse).size(y,T).move(0,0)}}}),n.extend(n.Ellipse,n.Rect,n.FX,{rx:function(y){return this.attr("rx",y)},ry:function(y){return this.attr("ry",y)}}),n.extend(n.Circle,n.Ellipse,{x:function(y){return y==null?this.cx()-this.rx():this.cx(y+this.rx())},y:function(y){return y==null?this.cy()-this.ry():this.cy(y+this.ry())},cx:function(y){return y==null?this.attr("cx"):this.attr("cx",y)},cy:function(y){return y==null?this.attr("cy"):this.attr("cy",y)},width:function(y){return y==null?this.rx()*2:this.rx(new n.Number(y).divide(2))},height:function(y){return y==null?this.ry()*2:this.ry(new n.Number(y).divide(2))},size:function(y,T){var $=x(this,y,T);return this.rx(new n.Number($.width).divide(2)).ry(new n.Number($.height).divide(2))}}),n.Line=n.invent({create:"line",inherit:n.Shape,extend:{array:function(){return new n.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(y,T,$,P){return y==null?this.array():(typeof T<"u"?y={x1:y,y1:T,x2:$,y2:P}:y=new n.PointArray(y).toLine(),this.attr(y))},move:function(y,T){return this.attr(this.array().move(y,T).toLine())},size:function(y,T){var $=x(this,y,T);return this.attr(this.array().size($.width,$.height).toLine())}},construct:{line:function(y,T,$,P){return n.Line.prototype.plot.apply(this.put(new n.Line),y!=null?[y,T,$,P]:[0,0,0,0])}}}),n.Polyline=n.invent({create:"polyline",inherit:n.Shape,construct:{polyline:function(y){return this.put(new n.Polyline).plot(y||new n.PointArray)}}}),n.Polygon=n.invent({create:"polygon",inherit:n.Shape,construct:{polygon:function(y){return this.put(new n.Polygon).plot(y||new n.PointArray)}}}),n.extend(n.Polyline,n.Polygon,{array:function(){return this._array||(this._array=new n.PointArray(this.attr("points")))},plot:function(y){return y==null?this.array():this.clear().attr("points",typeof y=="string"?y:this._array=new n.PointArray(y))},clear:function(){return delete this._array,this},move:function(y,T){return this.attr("points",this.array().move(y,T))},size:function(y,T){var $=x(this,y,T);return this.attr("points",this.array().size($.width,$.height))}}),n.extend(n.Line,n.Polyline,n.Polygon,{morphArray:n.PointArray,x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},width:function(y){var T=this.bbox();return y==null?T.width:this.size(y,T.height)},height:function(y){var T=this.bbox();return y==null?T.height:this.size(T.width,y)}}),n.Path=n.invent({create:"path",inherit:n.Shape,extend:{morphArray:n.PathArray,array:function(){return this._array||(this._array=new n.PathArray(this.attr("d")))},plot:function(y){return y==null?this.array():this.clear().attr("d",typeof y=="string"?y:this._array=new n.PathArray(y))},clear:function(){return delete this._array,this},move:function(y,T){return this.attr("d",this.array().move(y,T))},x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},size:function(y,T){var $=x(this,y,T);return this.attr("d",this.array().size($.width,$.height))},width:function(y){return y==null?this.bbox().width:this.size(y,this.bbox().height)},height:function(y){return y==null?this.bbox().height:this.size(this.bbox().width,y)}},construct:{path:function(y){return this.put(new n.Path).plot(y||new n.PathArray)}}}),n.Image=n.invent({create:"image",inherit:n.Shape,extend:{load:function(y){if(!y)return this;var T=this,$=new r.Image;return n.on($,"load",function(){n.off($);var P=T.parent(n.Pattern);P!==null&&(T.width()==0&&T.height()==0&&T.size($.width,$.height),P&&P.width()==0&&P.height()==0&&P.size(T.width(),T.height()),typeof T._loaded=="function"&&T._loaded.call(T,{width:$.width,height:$.height,ratio:$.width/$.height,url:y}))}),n.on($,"error",function(P){n.off($),typeof T._error=="function"&&T._error.call(T,P)}),this.attr("href",$.src=this.src=y,n.xlink)},loaded:function(y){return this._loaded=y,this},error:function(y){return this._error=y,this}},construct:{image:function(y,T,$){return this.put(new n.Image).load(y).size(T||0,$||T||0)}}}),n.Text=n.invent({create:function(){this.constructor.call(this,n.create("text")),this.dom.leading=new n.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",n.defaults.attrs["font-family"])},inherit:n.Shape,extend:{x:function(y){return y==null?this.attr("x"):this.attr("x",y)},y:function(y){var T=this.attr("y"),$=typeof T=="number"?T-this.bbox().y:0;return y==null?typeof T=="number"?T-$:T:this.attr("y",typeof y.valueOf()=="number"?y+$:y)},cx:function(y){return y==null?this.bbox().cx:this.x(y-this.bbox().width/2)},cy:function(y){return y==null?this.bbox().cy:this.y(y-this.bbox().height/2)},text:function(y){if(typeof y>"u"){for(var y="",T=this.node.childNodes,$=0,P=T.length;$<P;++$)$!=0&&T[$].nodeType!=3&&n.adopt(T[$]).dom.newLined==!0&&(y+=`
`),y+=T[$].textContent;return y}if(this.clear().build(!0),typeof y=="function")y.call(this,this);else{y=y.split(`
`);for(var $=0,z=y.length;$<z;$++)this.tspan(y[$]).newLine()}return this.build(!1).rebuild()},size:function(y){return this.attr("font-size",y).rebuild()},leading:function(y){return y==null?this.dom.leading:(this.dom.leading=new n.Number(y),this.rebuild())},lines:function(){var y=(this.textPath&&this.textPath()||this).node,T=n.utils.map(n.utils.filterSVGElements(y.childNodes),function($){return n.adopt($)});return new n.Set(T)},rebuild:function(y){if(typeof y=="boolean"&&(this._rebuild=y),this._rebuild){var T=this,$=0,P=this.dom.leading*new n.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(T.textPath()||this.attr("x",T.attr("x")),this.text()==`
`?$+=P:(this.attr("dy",P+$),$=0))}),this.fire("rebuild")}return this},build:function(y){return this._build=!!y,this},setData:function(y){return this.dom=y,this.dom.leading=new n.Number(y.leading||1.3),this}},construct:{text:function(y){return this.put(new n.Text).text(y)},plain:function(y){return this.put(new n.Text).plain(y)}}}),n.Tspan=n.invent({create:"tspan",inherit:n.Shape,extend:{text:function(y){return y==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof y=="function"?y.call(this,this):this.plain(y),this)},dx:function(y){return this.attr("dx",y)},dy:function(y){return this.attr("dy",y)},newLine:function(){var y=this.parent(n.Text);return this.dom.newLined=!0,this.dy(y.dom.leading*y.attr("font-size")).attr("x",y.x())}}}),n.extend(n.Text,n.Tspan,{plain:function(y){return this._build===!1&&this.clear(),this.node.appendChild(i.createTextNode(y)),this},tspan:function(y){var T=(this.textPath&&this.textPath()||this).node,$=new n.Tspan;return this._build===!1&&this.clear(),T.appendChild($.node),$.text(y)},clear:function(){for(var y=(this.textPath&&this.textPath()||this).node;y.hasChildNodes();)y.removeChild(y.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),n.TextPath=n.invent({create:"textPath",inherit:n.Parent,parent:n.Text,construct:{morphArray:n.PathArray,path:function(y){for(var T=new n.TextPath,$=this.doc().defs().path(y);this.node.hasChildNodes();)T.node.appendChild(this.node.firstChild);return this.node.appendChild(T.node),T.attr("href","#"+$,n.xlink),this},array:function(){var y=this.track();return y?y.array():null},plot:function(y){var T=this.track(),$=null;return T&&($=T.plot(y)),y==null?$:this},track:function(){var y=this.textPath();if(y)return y.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return n.adopt(this.node.firstChild)}}}),n.Nested=n.invent({create:function(){this.constructor.call(this,n.create("svg")),this.style("overflow","visible")},inherit:n.Container,construct:{nested:function(){return this.put(new n.Nested)}}}),n.A=n.invent({create:"a",inherit:n.Container,extend:{to:function(y){return this.attr("href",y,n.xlink)},show:function(y){return this.attr("show",y,n.xlink)},target:function(y){return this.attr("target",y)}},construct:{link:function(y){return this.put(new n.A).to(y)}}}),n.extend(n.Element,{linkTo:function(y){var T=new n.A;return typeof y=="function"?y.call(T,T):T.to(y),this.parent().put(T).put(this)}}),n.Marker=n.invent({create:"marker",inherit:n.Container,extend:{width:function(y){return this.attr("markerWidth",y)},height:function(y){return this.attr("markerHeight",y)},ref:function(y,T){return this.attr("refX",y).attr("refY",T)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(y,T,$){return this.defs().marker(y,T,$)}}}),n.extend(n.Defs,{marker:function(y,T,$){return this.put(new n.Marker).size(y,T).ref(y/2,T/2).viewbox(0,0,y,T).attr("orient","auto").update($)}}),n.extend(n.Line,n.Polyline,n.Polygon,n.Path,{marker:function(y,T,$,P){var z=["marker"];return y!="all"&&z.push(y),z=z.join("-"),y=arguments[1]instanceof n.Marker?arguments[1]:this.doc().marker(T,$,P),this.attr(z,y)}});var c={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(y,T){return T=="color"?y:y+"-"+T}};["fill","stroke"].forEach(function(y){var T,$={};$[y]=function(P){if(typeof P>"u")return this;if(typeof P=="string"||n.Color.isRgb(P)||P&&typeof P.fill=="function")this.attr(y,P);else for(T=c[y].length-1;T>=0;T--)P[c[y][T]]!=null&&this.attr(c.prefix(y,c[y][T]),P[c[y][T]]);return this},n.extend(n.Element,n.FX,$)}),n.extend(n.Element,n.FX,{rotate:function(y,T,$){return this.transform({rotation:y,cx:T,cy:$})},skew:function(y,T,$,P){return arguments.length==1||arguments.length==3?this.transform({skew:y,cx:T,cy:$}):this.transform({skewX:y,skewY:T,cx:$,cy:P})},scale:function(y,T,$,P){return arguments.length==1||arguments.length==3?this.transform({scale:y,cx:T,cy:$}):this.transform({scaleX:y,scaleY:T,cx:$,cy:P})},translate:function(y,T){return this.transform({x:y,y:T})},flip:function(y,T){return T=typeof y=="number"?y:T,this.transform({flip:y||"both",offset:T})},matrix:function(y){return this.attr("transform",new n.Matrix(arguments.length==6?[].slice.call(arguments):y))},opacity:function(y){return this.attr("opacity",y)},dx:function(y){return this.x(new n.Number(y).plus(this instanceof n.FX?0:this.x()),!0)},dy:function(y){return this.y(new n.Number(y).plus(this instanceof n.FX?0:this.y()),!0)},dmove:function(y,T){return this.dx(y).dy(T)}}),n.extend(n.Rect,n.Ellipse,n.Circle,n.Gradient,n.FX,{radius:function(y,T){var $=(this._target||this).type;return $=="radial"||$=="circle"?this.attr("r",new n.Number(y)):this.rx(y).ry(T??y)}}),n.extend(n.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(y){return this.node.getPointAtLength(y)}}),n.extend(n.Parent,n.Text,n.Tspan,n.FX,{font:function(y,T){if(typeof y=="object")for(T in y)this.font(T,y[T]);return y=="leading"?this.leading(T):y=="anchor"?this.attr("text-anchor",T):y=="size"||y=="family"||y=="weight"||y=="stretch"||y=="variant"||y=="style"?this.attr("font-"+y,T):this.attr(y,T)}}),n.Set=n.invent({create:function(y){y instanceof n.Set?this.members=y.members.slice():Array.isArray(y)?this.members=y:this.clear()},extend:{add:function(){var y,T,$=[].slice.call(arguments);for(y=0,T=$.length;y<T;y++)this.members.push($[y]);return this},remove:function(y){var T=this.index(y);return T>-1&&this.members.splice(T,1),this},each:function(y){for(var T=0,$=this.members.length;T<$;T++)y.apply(this.members[T],[T,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(y){return this.index(y)>=0},index:function(y){return this.members.indexOf(y)},get:function(y){return this.members[y]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(this.members.length==0)return new n.RBox;var y=this.members[0].rbox(this.members[0].doc());return this.each(function(){y=y.merge(this.rbox(this.doc()))}),y}},construct:{set:function(y){return new n.Set(y)}}}),n.FX.Set=n.invent({create:function(y){this.set=y}}),n.Set.inherit=function(){var y,T=[];for(var y in n.Shape.prototype)typeof n.Shape.prototype[y]=="function"&&typeof n.Set.prototype[y]!="function"&&T.push(y);T.forEach(function($){n.Set.prototype[$]=function(){for(var P=0,z=this.members.length;P<z;P++)this.members[P]&&typeof this.members[P][$]=="function"&&this.members[P][$].apply(this.members[P],arguments);return $=="animate"?this.fx||(this.fx=new n.FX.Set(this)):this}}),T=[];for(var y in n.FX.prototype)typeof n.FX.prototype[y]=="function"&&typeof n.FX.Set.prototype[y]!="function"&&T.push(y);T.forEach(function($){n.FX.Set.prototype[$]=function(){for(var P=0,z=this.set.members.length;P<z;P++)this.set.members[P].fx[$].apply(this.set.members[P].fx,arguments);return this}})},n.extend(n.Element,{data:function(y,T,$){if(typeof y=="object")for(T in y)this.data(T,y[T]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+y))}catch{return this.attr("data-"+y)}else this.attr("data-"+y,T===null?null:$===!0||typeof T=="string"||typeof T=="number"?T:JSON.stringify(T));return this}}),n.extend(n.Element,{remember:function(y,T){if(typeof arguments[0]=="object")for(var T in y)this.remember(T,y[T]);else{if(arguments.length==1)return this.memory()[y];this.memory()[y]=T}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var y=arguments.length-1;y>=0;y--)delete this.memory()[arguments[y]];return this},memory:function(){return this._memory||(this._memory={})}}),n.get=function(y){var T=i.getElementById(D(y)||y);return n.adopt(T)},n.select=function(y,T){return new n.Set(n.utils.map((T||i).querySelectorAll(y),function($){return n.adopt($)}))},n.extend(n.Parent,{select:function(y){return n.select(y,this.node)}});function p(y,T,$,P){return $+P.replace(n.regex.dots," .")}function f(y){for(var T=y.slice(0),$=T.length;$--;)Array.isArray(T[$])&&(T[$]=f(T[$]));return T}function m(y,T){return y instanceof T}function g(y,T){return(y.matches||y.matchesSelector||y.msMatchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector).call(y,T)}function b(y){return y.toLowerCase().replace(/-(.)/g,function(T,$){return $.toUpperCase()})}function w(y){return y.charAt(0).toUpperCase()+y.slice(1)}function S(y){return y.length==4?["#",y.substring(1,2),y.substring(1,2),y.substring(2,3),y.substring(2,3),y.substring(3,4),y.substring(3,4)].join(""):y}function M(y){var T=y.toString(16);return T.length==1?"0"+T:T}function x(y,T,$){if(T==null||$==null){var P=y.bbox();T==null?T=P.width/P.height*$:$==null&&($=P.height/P.width*T)}return{width:T,height:$}}function _(y,T,$){return{x:T*y.a+$*y.c+0,y:T*y.b+$*y.d+0}}function I(y){return{a:y[0],b:y[1],c:y[2],d:y[3],e:y[4],f:y[5]}}function E(y){return y instanceof n.Matrix||(y=new n.Matrix(y)),y}function A(y,T){y.cx=y.cx==null?T.bbox().cx:y.cx,y.cy=y.cy==null?T.bbox().cy:y.cy}function C(y){for(var T=0,$=y.length,P="";T<$;T++)P+=y[T][0],y[T][1]!=null&&(P+=y[T][1],y[T][2]!=null&&(P+=" ",P+=y[T][2],y[T][3]!=null&&(P+=" ",P+=y[T][3],P+=" ",P+=y[T][4],y[T][5]!=null&&(P+=" ",P+=y[T][5],P+=" ",P+=y[T][6],y[T][7]!=null&&(P+=" ",P+=y[T][7])))));return P+" "}function O(y){for(var T=y.childNodes.length-1;T>=0;T--)y.childNodes[T]instanceof r.SVGElement&&O(y.childNodes[T]);return n.adopt(y).id(n.eid(y.nodeName))}function R(y){return y.x==null&&(y.x=0,y.y=0,y.width=0,y.height=0),y.w=y.width,y.h=y.height,y.x2=y.x+y.width,y.y2=y.y+y.height,y.cx=y.x+y.width/2,y.cy=y.y+y.height/2,y}function D(y){var T=(y||"").toString().match(n.regex.reference);if(T)return T[1]}function N(y){return Math.abs(y)>1e-37?y:0}var U="abcdef".split("");if(typeof r.CustomEvent!="function"){var J=function(y,T){T=T||{bubbles:!1,cancelable:!1,detail:void 0};var $=i.createEvent("CustomEvent");return $.initCustomEvent(y,T.bubbles,T.cancelable,T.detail),$};J.prototype=r.Event.prototype,n.CustomEvent=J}else n.CustomEvent=r.CustomEvent;return function(y){for(var T=0,$=["moz","webkit"],P=0;P<$.length&&!r.requestAnimationFrame;++P)y.requestAnimationFrame=y[$[P]+"RequestAnimationFrame"],y.cancelAnimationFrame=y[$[P]+"CancelAnimationFrame"]||y[$[P]+"CancelRequestAnimationFrame"];y.requestAnimationFrame=y.requestAnimationFrame||function(z){var X=new Date().getTime(),ae=Math.max(0,16-(X-T)),te=y.setTimeout(function(){z(X+ae)},ae);return T=X+ae,te},y.cancelAnimationFrame=y.cancelAnimationFrame||y.clearTimeout}(r),n})}(A3)),A3.exports}var Het=qet();const $g=wS(Het);class Wet extends qi{constructor(t){super(t)}SIMPLE="simple";UNIQUE_VALUE="unique-value";CLASS_BREAKS="class-breaks";NONE="none";CONTAINER_SIZE=32;CONTENT_SIZE=24;CONTENT_IMAGE_SIZE=28;CONTAINER_CENTER=this.CONTAINER_SIZE/2;CONTENT_PADDING=(this.CONTAINER_SIZE-this.CONTENT_SIZE)/2;getGraphicIcon(t,r){return r.getGraphicIcon(t)}getGraphicSymbol(t,r){return r.getGraphicSymbol(t)}makeRenderer(t,r,i=!1){switch(t.type){case this.SIMPLE:return new Uet(t,r);case this.CLASS_BREAKS:return new Get(t,r,i);case this.UNIQUE_VALUE:return new zet(t,r,i);default:throw new Error(`Unknown renderer type encountered - ${t.type}`)}}async generateWMSSymbology(t){const r=$g(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0),i={svgcode:"",imgHeight:"",imgWidth:""};if(t){const s=await this.renderSymbologyImage(t);if(s){i.svgcode=s;const n=document.createElement("span");n.innerHTML=s;const o=n.firstElementChild?.lastElementChild;i.imgHeight=o?.getAttribute("height")||"",i.imgWidth=o?.getAttribute("width")||""}else i.svgcode=r.svg()}else i.svgcode=r.svg();return i}listToSymbology(t,r){return r.map(({text:s,image:n})=>{const o={name:s,image:n,svgcode:""};return t(n).then(a=>{o.svgcode=a}),o})}listToIconSymbology(t){return this.listToSymbology(this.renderSymbologyIcon,t)}listToImageSymbology(t){return this.listToSymbology(this.renderSymbologyImage,t)}async renderSymbologyImage(t,r=null){r===null&&(r=$g(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0));const i=await this.$iApi.geo.shared.convertImagetoDataURL(t);if(i===t)return"";const{loader:s}=await this.svgDrawImage(r,i);return r.viewbox(0,0,s.width,s.height),r.svg()}async renderSymbologyIcon(t,r=null){if(r===null){const n=document.createElement("div");n.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),document.body.appendChild(n),r=$g(n).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE)}const i=await this.$iApi.geo.shared.convertImagetoDataURL(t),{image:s}=await this.svgDrawImage(r,i);return s.center(this.CONTAINER_CENTER,this.CONTAINER_CENTER),this.fitInto(s,this.CONTENT_IMAGE_SIZE),r.svg()}generatePlaceholderSymbology(t,r="#000"){const i=$g(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE);return i.rect(this.CONTENT_IMAGE_SIZE,this.CONTENT_IMAGE_SIZE).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER).fill(r),i.text(t[0].toUpperCase()).size(23).fill("#fff").attr({"font-weight":"bold","font-family":"Roboto"}).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER).tspan(t[0].toUpperCase()).addClass("grid-icons").attr({dy:"29.900000000000002",x:"7.6875"}),{name:t,svgcode:i.svg()}}async generateBlankSymbology(){return $g(document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).svg()}async symbolToSvg(t){const r=this,i=1.33333,s=document.createElement("div");s.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),document.body.appendChild(s);const n=$g(s).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE),o={path({size:g,path:b}){return n.path(b).size(g*i)},circle({size:g}){return n.circle(g*i)},cross({size:g}){return n.path("M 0,10 L 20,10 M 10,0 L 10,20").size(g*i)},x({size:g}){return n.path("M 0,0 L 20,20 M 20,0 L 0,20").size(g*i)},triangle({size:g}){return n.path("M 20,20 L 10,0 0,20 Z").size(g*i)},diamond({size:g}){return n.path("M 20,10 L 10,0 0,10 10,20 Z").size(g*i)},square({size:g}){return n.path("M 0,0 20,0 20,20 0,20 Z").size(g*i)}},a={[io.SOLID]:"none",[io.NONE]:"none",[io.DASH]:"5.333,4",[io.DOT]:"1.333,4",[io.DASHDOT]:"5.333,4,1.333,4",[io.LONGDASH]:"10.666,4",[io.LONGDASHDOT]:"10.666,4,1.333,4",[io.LONGDASHDOTDOT]:"10.666,4,1.333,4,1.333,4",[io.SHORTDOT]:"1.333,1.333",[io.SHORTDASH]:"5.333,1.333",[io.SHORTDASHDOT]:"5.333,1.333,1.333,1.333",[io.SHORTDASHDOTDOT]:"5.333,1.333,1.333,1.333,1.333,1.333"},l={color:"#000",opacity:1,width:1,linecap:"square",linejoin:"miter",miterlimit:4},u={color:[0,0,0,0],width:0,style:a.none},c={solid:g=>({color:g.colour,opacity:g.opacity}),none:()=>"transparent",horizontal:(g,b)=>n.pattern(5,5,S=>S.line(0,5/2,5,5/2)).stroke(b),vertical:(g,b)=>n.pattern(5,5,S=>S.line(5/2,0,5/2,5)).stroke(b),"forward-diagonal":(g,b)=>n.pattern(5,5,S=>{S.line(0,0,5,5).stroke(b),S.line(0,0,5,5).move(0,5).stroke(b),S.line(0,0,5,5).move(5,0).stroke(b)}),"backward-diagonal":(g,b)=>n.pattern(5,5,S=>{S.line(5,0,0,5).stroke(b),S.line(5,0,0,5).move(5/2,5/2).stroke(b),S.line(5,0,0,5).move(-5/2,-5/2).stroke(b)}),cross:(g,b)=>n.pattern(5,5,S=>{S.line(5/2,0,5/2,5).stroke(b),S.line(0,5/2,5,5/2).stroke(b)}),"diagonal-cross":(g,b)=>n.pattern(7,7,S=>{S.line(0,0,7,7).stroke(b),S.line(7,0,0,7).stroke(b)})},p={"simple-marker"(){const g=m(t.color);t.outline=t.outline||u;const b=m(t.outline.color),w=f({color:b.colour,opacity:b.opacity,width:t.outline.width,dasharray:a[t.outline.style]}),S=o[t.style](t).fill({color:g.colour,opacity:g.opacity}).stroke(w).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).rotate(t.angle||0);r.fitInto(S,r.CONTENT_SIZE)},"simple-line"(){const g=m(t.color),b=f({color:g.colour,opacity:g.opacity,width:t.width,linecap:"butt",dasharray:a[t.style]}),w=r.CONTENT_PADDING,S=r.CONTAINER_SIZE-r.CONTENT_PADDING;n.line(w,w,S,S).stroke(b)},esriCLS(){this["simple-line"]()},"simple-fill"(){const g=m(t.color),b=f({color:g.colour,opacity:g.opacity}),w=c[t.style](g,b);t.outline=t.outline||u;const S=m(t.outline.color),M=f({color:S.colour,opacity:S.opacity,width:t.outline.width,linecap:"butt",dasharray:a[t.outline.style]});n.rect(r.CONTENT_SIZE,r.CONTENT_SIZE).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).fill(w).stroke(M)},text(){console.error("no support for feature service legend of text symbols")},"picture-fill"(){const g=t.imageData?`data:${t.contentType};base64,${t.imageData}`:t.url,b=t.width*t.xscale,w=t.height*t.yscale;t.outline=t.outline||u;const S=m(t.outline.color),M=f({color:S.colour,opacity:S.opacity,width:t.outline.width,dasharray:a[t.outline.style]});return r.$iApi.geo.shared.convertImagetoDataURL(g).then(_=>{const I=n.pattern(b,w,E=>E.image(_,b,w));n.rect(r.CONTENT_SIZE,r.CONTENT_SIZE).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).fill(I).stroke(M)})},"picture-marker"(){const g=t.source,b=g&&g.imageData?`data:${g.contentType};base64,${g.imageData}`:t.url;return r.$iApi.geo.shared.convertImagetoDataURL(b).then(S=>r.svgDrawImage(n,S)).then(({image:S})=>{S.center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).rotate(t.angle||0),r.fitInto(S,r.CONTENT_IMAGE_SIZE)})}};try{return await Promise.resolve(p[t.type]()),document.body.removeChild(s),n.svg()}catch(g){return console.error(g),this.generateBlankSymbology()}function f(g){return Object.assign({},l,g)}function m(g){return g?{colour:`rgb(${g.r},${g.g},${g.b})`,opacity:g.a}:{colour:"rgb(0, 0, 0)",opacity:0}}}async svgDrawImage(t,r,i=0,s=0,n=!0){return new Promise((o,a)=>{const l=t.image(r,i,s,n).loaded(u=>o({image:l,loader:u})).error(u=>{a(u),console.error(u)})})}fitInto(t,r){const i=t.node.getBoundingClientRect(),s=r/Math.max(i.width,i.height);s<1&&t.scale(s)}rendererToLegend(t){let r;const i=t.symbolUnits.slice(0);if(t.defaultUnit&&i.push(t.defaultUnit),t.falseRenderer)r=i.map(s=>[s]);else{const s=new Map;i.forEach(n=>{const o=s.get(n.label);o?o.push(n):s.set(n.label,[n])}),r=[],s.forEach(n=>r.push(n))}return r.map(s=>{const n=s[0],o={uid:this.$iApi.geo.shared.generateUUID(),label:n.label||"",definitionClause:s.length===1?n.definitionClause:`(${s.map(a=>a.definitionClause).join(" OR ")})`,svgcode:"",esriStandard:!0,visibility:!0,lastVisbility:!0,drawPromise:this.symbolToSvg(n.symbol).then(a=>{o.svgcode=a,s.forEach(l=>{l.svgCode=a})})};return o})}async getMapServerLegend(t){if(!t)throw new Error("Legend server request is missing the required url.");const r={query:{f:"json"}},i={layers:[]},[s,n]=await zy(Re(`${t}/legend`,r));return n?n.data?n.data:(console.error(`Error loading legend data for ${t}`),i):(console.error(`Error loading legend for ${t}`,s),i)}mapServerLegendToRenderer(t,r){const i=t.layers.find(n=>n.layerId===r);let s;if(typeof i<"u")return s={type:"uniqueValue",field:"fakefield",uniqueValueInfos:i.legend.map(n=>({label:n.label,value:n.label,symbol:{type:"esriPMS",imageData:n.imageData,contentType:n.contentType}}))},this.makeRenderer(Pv(s),[],!0);throw new Error("attempted to make renderer from non-existing legend data")}mapServerLegendToRendererAll(t){const r=t.layers.map(s=>s.legend.map(n=>({label:n.label,value:n.label,symbol:{type:"esriPMS",imageData:n.imageData,contentType:n.contentType}}))),i={type:"uniqueValue",field1:"fakefield",uniqueValueInfos:[].concat(...r)};return this.makeRenderer(Pv(i),[],!0)}async mapServerToLocalLegend(t,r=void 0){const i=await this.getMapServerLegend(t);let s,n;return typeof r>"u"?(n=0,s=this.mapServerLegendToRendererAll(i)):(n=parseInt(r),s=this.mapServerLegendToRenderer(i,n)),this.rendererToLegend(s)}}class Jet extends qi{constructor(t){super(t)}async arcGisServerQueryIds(t){if(!(t.filterGeometry||t.filterSql))return console.error("arcGisServerQueryIds called without any filter"),[];const r=new Ci;r.returnGeometry=!1,t.filterSql&&(r.where=t.filterSql),t.filterGeometry&&(r.geometry=await this.queryGeometryHelper(t.filterGeometry,!1,this.$iApi.geo.map.getScale(),t.sourceSR),r.spatialRelationship="intersects");const i=await z8(t.url,r);return Array.isArray(i)?i:[]}async geoJsonQuery(t){const r=new Ci;if(r.returnGeometry=!!t.includeGeometry,r.outFields=["*"],t.filterGeometry&&(r.geometry=await this.queryGeometryHelper(t.filterGeometry,!0),r.spatialRelationship="intersects"),t.filterSql&&(r.where=t.filterSql),t.filterOIDs&&(r.objectIds=t.filterOIDs),await t.layer.loadPromise(),!t.layer.esriLayer)throw new Error("file layer being queried contains no ESRI layer");return(await t.layer.esriLayer.queryFeatures(r)).features.map((s,n)=>{let o;return r.returnGeometry?o=this.$iApi.geo.geom.geomEsriToRamp(s.geometry,`queryResult${n}`):o=new rf,new Vl(o,"",s.attributes)})}async queryGeometryHelper(t,r,i,s){return!r&&t.type===Ft.EXTENT&&s&&!s.isEqual(t.sr)&&!(i&&i>2e7&&t.sr.wkid===3978&&s.wkid===4326)?(await this.$iApi.geo.proj.projectExtent(s,t)).toESRI():t.toESRI()}makeClickBuffer(t,r=5){const i=this.$iApi.geo.map,s=i.getExtent(),n=r*(s.xmax-s.xmin)/i.getPixelWidth();return new Yr("ze_buffer",[t.x-n,t.y-n],[t.x+n,t.y+n],t.sr)}}class Zet extends qi{attributes;geom;layer;map;proj;query;shared;symbology;constructor(t){super(t),this.geom=wv.geom,this.proj=wv.proj,this.shared=wv.sharedUtils,this.map=new jQe(t),this.layer=new vet(t),this.attributes=new Fet(t),this.query=new Jet(t),this.symbology=new Wet(t),Array.isArray(Vt.request.interceptors)||(Vt.request.interceptors=[]),Vt.request.interceptors.push({before:r=>{r.url.includes("?blankTile=false")&&(r.url=r.url.replace("?blankTile=false","?blankTile=true"))}})}set proxy(t){Vt.request.proxyUrl=t}get proxy(){return Vt.request.proxyUrl||""}}const Yet=Object.assign({"../fixtures/appbar/index.ts":()=>fe(()=>import("./index-Bh7qbEVi.js"),__vite__mapDeps([234,1,235]),import.meta.url),"../fixtures/areas-of-interest/index.ts":()=>fe(()=>import("./index-CyYGCWEC.js"),__vite__mapDeps([236,237,238,1]),import.meta.url),"../fixtures/basemap/index.ts":()=>fe(()=>import("./index-CO7xKVXD.js"),__vite__mapDeps([239,1]),import.meta.url),"../fixtures/crosshairs/index.ts":()=>fe(()=>import("./index-Du7_d06n.js"),__vite__mapDeps([240,1,241]),import.meta.url),"../fixtures/details/index.ts":()=>fe(()=>import("./index-r1a2JTQb.js"),__vite__mapDeps([242,1,243]),import.meta.url),"../fixtures/export-footnote/index.ts":()=>fe(()=>import("./index-DGc9zG0r.js"),__vite__mapDeps([244,245,1]),import.meta.url),"../fixtures/export-legend/index.ts":()=>fe(()=>import("./index-DJbh_WTz.js"),__vite__mapDeps([246,245,1]),import.meta.url),"../fixtures/export-map/index.ts":()=>fe(()=>import("./index-CM-ZMkGS.js"),__vite__mapDeps([247,245,1]),import.meta.url),"../fixtures/export-northarrow/index.ts":()=>fe(()=>import("./index-DPClZ7Dn.js"),__vite__mapDeps([248,245,1]),import.meta.url),"../fixtures/export-scalebar/index.ts":()=>fe(()=>import("./index-8ziTb45B.js"),__vite__mapDeps([249,245,1]),import.meta.url),"../fixtures/export-timestamp/index.ts":()=>fe(()=>import("./index-BKmj040x.js"),__vite__mapDeps([250,245,1]),import.meta.url),"../fixtures/export-title/index.ts":()=>fe(()=>import("./index-DQ5tkJT5.js"),__vite__mapDeps([251,245,1]),import.meta.url),"../fixtures/export/index.ts":()=>fe(()=>import("./index-BgVgGMLS.js"),__vite__mapDeps([252,1,253]),import.meta.url),"../fixtures/extentguard/index.ts":()=>fe(()=>import("./index-CN7r9_ue.js"),__vite__mapDeps([254,1]),import.meta.url),"../fixtures/gazebo/index.ts":()=>fe(()=>import("./index-C2sWq2Tl.js"),__vite__mapDeps([255,1]),import.meta.url),"../fixtures/geosearch/index.ts":()=>fe(()=>import("./index-0zFChL0V.js"),__vite__mapDeps([256,1]),import.meta.url),"../fixtures/grid/index.ts":()=>fe(()=>import("./index-pK0h9t06.js"),__vite__mapDeps([257,1,258]),import.meta.url),"../fixtures/help/index.ts":()=>fe(()=>import("./index-wl5Sw16T.js"),__vite__mapDeps([259,1]),import.meta.url),"../fixtures/hilight/index.ts":()=>fe(()=>import("./index-D-e8a6Kf.js"),__vite__mapDeps([260,243,1]),import.meta.url),"../fixtures/layer-reorder/index.ts":()=>fe(()=>import("./index-CKS9V-uO.js"),__vite__mapDeps([261,1]),import.meta.url),"../fixtures/legend/index.ts":()=>fe(()=>import("./index-Bix7Y3QS.js"),__vite__mapDeps([262,1]),import.meta.url),"../fixtures/mapnav/index.ts":()=>fe(()=>import("./index-iClN2xwk.js"),__vite__mapDeps([263,1,264]),import.meta.url),"../fixtures/metadata/index.ts":()=>fe(()=>import("./index-pcZmjvUb.js"),__vite__mapDeps([265,1]),import.meta.url),"../fixtures/northarrow/index.ts":()=>fe(()=>import("./index-CYRstoDP.js"),__vite__mapDeps([266,1]),import.meta.url),"../fixtures/overviewmap/index.ts":()=>fe(()=>import("./index-gHG4fV0D.js"),__vite__mapDeps([267,1,268]),import.meta.url),"../fixtures/panguard/index.ts":()=>fe(()=>import("./index-DoDptNk9.js"),__vite__mapDeps([269,1,270]),import.meta.url),"../fixtures/scrollguard/index.ts":()=>fe(()=>import("./index-BZr-g9x4.js"),__vite__mapDeps([271,1,272]),import.meta.url),"../fixtures/settings/index.ts":()=>fe(()=>import("./index-CqRnhPtZ.js"),__vite__mapDeps([273,1]),import.meta.url),"../fixtures/snowman/index.ts":()=>fe(()=>import("./index-CC-MkzSl.js"),__vite__mapDeps([274,1]),import.meta.url),"../fixtures/wizard/index.ts":()=>fe(()=>import("./index-AkOR3c4J.js"),__vite__mapDeps([275,1]),import.meta.url)});class Ket extends qi{constructor(t){super(t)}exists(t){return t in Ea(this.$vApp.$pinia).items}async add(t,r){let i;if(t in Ea(this.$vApp.$pinia).items)return this.get(t);if(r){if(typeof r!="function")throw new Error("malformed fixture constructor");i=t7.updateBaseToInstance(new r,t,this.$iApi)}else{const s=(await Yet[`../fixtures/${t}/index.ts`]()).default;i=new s(t,this.$iApi)}return Ea(this.$vApp.$pinia).addFixture(i),this.$iApi.event.emit(rt.FIXTURE_ADDED,i),this.$iApi.geo.map.created&&i.initialized?.(),i}remove(t){const r=this.get(t);if(!r)throw new Error(`Could not find fixture ${t} for removal`);return Ea(this.$vApp.$pinia).removeFixture(r),this.$iApi.event.emit(rt.FIXTURE_REMOVED,r),r}flush(){const t=Ea(this.$vApp.$pinia);Object.keys(t.items).forEach(i=>{const s=this.get(i);s?.persist&&typeof s?.removed=="function"?s.removed():s&&this.remove(i)})}restore(){const t=Ea(this.$vApp.$pinia);Object.keys(t.items).forEach(i=>{const s=t.items[i];typeof s.added=="function"&&s.added(),this.$iApi.geo.map.created&&typeof s.initialized=="function"&&s.initialized()})}get(t){const r=[];typeof t=="string"?r.push(t):Array.isArray(t)?r.push(...t):r.push(t.id);const i=r.map(s=>{const n=Ea(this.$vApp.$pinia).items[s];if(n)return n});return i.length===1?i[0]:i}isLoaded(t){const r=Ea(this.$vApp.$pinia),i=Array.isArray(t)?t:[t];i.forEach(n=>{r.loadPromises[n]===void 0&&r.addLoadPromise(n)});const s=r.getLoadPromises(i);return Array.isArray(t)?Promise.all(s):s[0]}addDefaultFixtures(t){(!Array.isArray(t)||t.length===0)&&(t=["appbar","basemap","crosshairs","details","geosearch","grid","help","hilight","layer-reorder","legend","mapnav","northarrow","overviewmap","panguard","scrollguard","settings","wizard"]);const r=fo(this.$vApp.$pinia);return r.startingFixtures=t,Promise.all(t.map(i=>this.add(i)))}}class t7 extends qi{static updateBaseToInstance(t,r,i){const s=new t7(r,i);return Object.defineProperties(t,{id:{value:r},$iApi:{value:i},persist:{value:t.persist??!0},$vApp:{get(){return s.$vApp}},remove:{value:s.remove},extend:{value:s.extend},config:{get(){return s.config}},mount:{value:s.mount}}),t}id;persist;constructor(t,r){super(r),this.id=t,this.persist=!0}remove(){return this.$iApi.fixture.remove(this),this}extend(t,r={}){const i=Wt({extends:t,iApi:this.$iApi,data(){return{...r}}}),s=jy(i),{el:n}=this.mount(i,{props:{...r.propsData},app:s});return n}mount(t,{props:r,children:i,element:s,app:n}={}){let o=s,a=Cl(t,r,i);return n&&n._context&&(a.appContext=n._context),o?w_(a,o):w_(a,o=document.createElement("div")),{vNode:a,destroy:()=>{o&&w_(null,o),o=null,a=null},el:o}}get config(){return fo(this.$vApp.$pinia).config.fixtures[this.id]}getLayerFixtureConfig(t){return this.getLayerFixtureConfigs()[t]}getLayerFixtureConfigs(){const t={},r=(i,s=void 0)=>{if(i.fixtures&&i.fixtures[this.id]!==void 0){let n=i.id;s!==void 0&&(n=`${s.id}-${i.index}`),t[n]=i.fixtures[this.id]}i.sublayers&&i.sublayers.forEach(n=>r(n,i))};return this.$iApi.geo.layer.allLayers().forEach(i=>r(i.config)),t}handlePanelWidths(t){if(this.config?.panelWidth){const r={};typeof this.config?.panelWidth=="number"&&(this.config.panelWidth={default:this.config?.panelWidth}),this.config.panelWidth.default&&t.forEach(i=>{r[i]=this.config.panelWidth.default});for(const i in this.config.panelWidth)i!="default"&&(r[i]=this.config.panelWidth[i]);for(const i in r){const s=this.$iApi.panel.get(i);this.$iApi.panel.setStyle(s,{"flex-basis":`${r[i]}px`})}}}handlePanelTeleports(t){if(this.config?.panelTeleport){const r=Vy(this.$vApp.$pinia),i=!!this.config.panelTeleport.target;t.forEach(s=>{r.items[s].teleport=i?this.config.panelTeleport:this.config.panelTeleport[s],r.items[s].style.width="100%"})}}}class Xet extends qi{panelStore=Vy(this.$vApp.$pinia);updateHTML(t,r,i){const s=this.get(t),n=i?s.screens[i]:Object.values(s.screens)[0];if(voe(n))for(const o in r)n[o].innerHTML=r[o]instanceof HTMLElement?r[o].outerHTML:r[o];else console.error("Screen must be an HTML object")}registerHTMLConfig(t){for(const i in t.content)if(typeof t.content[i]=="string"){const s=document.createElement("div");s.innerHTML=t.content[i],t.content[i]=s}const r={};return r[t.id]={screens:{},style:t.style??{width:"350px"},alertName:t.alertName},r[t.id].screens[t.id]=t.content,r}registerHTML(t){const r=this.get(t.id);if(r)return console.error("panel already exist"),r;const i=this.registerHTMLConfig(t);return this.register(i,t.options)}register(t,r){const i=Qet(t)?{[t.id]:t.config}:t;if(r){const n=r.i18n||{},o=this.$iApi.$i18n;Object.entries(n.messages||{}).forEach(a=>o.mergeLocaleMessage(...a)),Object.entries(n.dateTimeFormats||{}).forEach(a=>o.mergeDateTimeFormat(...a)),Object.entries(n.numberFormats||{}).forEach(a=>o.mergeNumberFormat(...a))}const s=Object.entries(i).reduce((n,[o,a])=>(n.push(new OM(this.$iApi,o,a)),n),[]);return s.forEach(n=>this.panelStore.registerPanel(n)),s.length===1?s[0]:s.reduce((n,o)=>(n[o.id]=o,n),{})}async isRegistered(t){const r=Array.isArray(t)?t:[t];r.forEach(s=>{this.panelStore.regPromises[s]===void 0&&this.panelStore.addRegPromise(s)});const i=this.panelStore.getRegPromises(r);return Array.isArray(t)?Promise.all(i):i[0]}remove(t){const r=this.get(t);r&&(r.isOpen&&this.close(r),this.panelStore.removePanel(r))}get(t){const r=typeof t=="string"?t:t.id;return this.panelStore.items[r]}open(t){let r,i,s;if(typeof t=="string"||t instanceof OM?r=this.get(t):(r=this.get(t.id),{screen:i,props:s}=t),!r)return r;if(r.isOpen&&!r.isVisible)r.minimize();else if(r.isOpen)return r;return i||(r.route&&!s?{screen:i,props:s}=r.route:i=Object.keys(r.screens).pop()),this.show(r,{screen:i,props:s})?(this.panelStore.openPanel(r),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.open",{name:r.alertName?this.$iApi.$i18n.t(r.alertName):r.id})),this.$iApi.event.emit(rt.PANEL_OPENED,r)):console.error(`Failed to open ${r.id} panel.`),r}get opened(){return this.panelStore.orderedItems.concat(this.panelStore.teleported)}get visible(){return this.panelStore.visible.concat(this.panelStore.teleported)}close(t){const r=this.get(t);return r&&(r.isPinned&&r.pin(!1),this.panelStore.closePanel(r),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.close",{name:r.alertName?this.$iApi.$i18n.t(r.alertName):r.id})),this.$iApi.event.emit(rt.PANEL_CLOSED,r),r)}minimize(t){const r=this.get(t);return r&&(r.isPinned&&r.pin(!1),this.panelStore.closePanel(r),this.$iApi.updateAlert(this.$iApi.$i18n.t("panels.alert.minimize",{name:r.alertName?this.$iApi.$i18n.t(r.alertName):r.id})),this.$iApi.event.emit(rt.PANEL_MINIMIZED,r),r)}move(t,r){const i=this.get(t);return i&&(this.panelStore.movePanel(i,r),i)}toggle(t,r){let i;return typeof t=="string"||t instanceof OM?i=this.get(t):i=this.get(t.id),i&&(r=typeof r<"u"?r:!i.isVisible,r!==i.isVisible&&(r?this.open(t):this.close(i)),i)}toggleMinimize(t,r){let i;return typeof t=="string"||t instanceof OM?i=this.get(t):i=this.get(t.id),i&&(r=typeof r<"u"?r:!i.isVisible,r!==i.isVisible&&(r?this.open(i):this.minimize(i)),i)}pin(t,r){const i=this.get(t);return!i||(r=typeof r<"u"?r:!i.isPinned,!i.isPinned&&!r)||(this.panelStore.pinned=r?i:void 0),i}get pinned(){return this.panelStore.pinned||void 0}show(t,r){const i=this.get(t);if(!i)return i;if(i.screens[r.screen]){if(i.screens[r.screen]?.props){const s=Object.keys(i.screens[r.screen]?.props).filter(o=>o!=="panel"),n=r.props?Object.keys(r.props):[];for(let o=0;o<s.length;o++)if(!n.includes(s[o])&&i.screens[r.screen].props[s[o]].required)return}return r.screen in this.$element._context.components||i.registerScreen(r.screen),i.teleport&&(r.props={header:!!i.teleport?.showHeader,...r.props}),this.panelStore.items[i.id].route=r,i}}setStyle(t,r,i=!1){const s=this.get(t);return s&&(this.panelStore.items[s.id].style=i?r:{...s.style,...r},s)}expand(t,r){const i=this.get(t);return i&&(this.panelStore.items[i.id].expanded=r!==void 0?r:!i.expanded,i)}}function Qet(e){return e.id!==void 0&&typeof e.id=="string"&&e.config!==void 0}const ett={};function ttt(e,t){const r=Vi("panel-screen");return Ae(),Vr(r,{header:!1,class:"screen-spinner"},{content:Bi(()=>t[0]||(t[0]=[Te("div",{class:"loader"},null,-1)])),_:1})}const rtt=qh(ett,[["render",ttt],["__scopeId","data-v-d6b3771a"]]),itt=Object.assign({"../fixtures/areas-of-interest/screen.vue":()=>fe(()=>import("./screen-RALGRNJ8.js"),__vite__mapDeps([276,237,238,1]),import.meta.url),"../fixtures/basemap/screen.vue":()=>fe(()=>import("./screen-CwZKIVuX.js"),__vite__mapDeps([277,1,278]),import.meta.url),"../fixtures/export/screen.vue":()=>fe(()=>import("./screen-DLeSmi6z.js"),__vite__mapDeps([279,253,1]),import.meta.url),"../fixtures/geosearch/screen.vue":()=>fe(()=>import("./screen-Dk_bN7g0.js"),__vite__mapDeps([280,1,281]),import.meta.url),"../fixtures/grid/screen.vue":()=>fe(()=>import("./screen-DmUFbCJa.js"),__vite__mapDeps([282,258,1,283]),import.meta.url),"../fixtures/help/screen.vue":()=>fe(()=>import("./screen-CWwMpTRd.js"),__vite__mapDeps([284,285,1,286]),import.meta.url),"../fixtures/layer-reorder/screen.vue":()=>fe(()=>import("./screen-a5Xh5ZG1.js"),__vite__mapDeps([287,288,1,289]),import.meta.url),"../fixtures/legend/screen.vue":()=>fe(()=>import("./screen-DFHzawtH.js"),__vite__mapDeps([290,1]),import.meta.url),"../fixtures/metadata/screen.vue":()=>fe(()=>import("./screen-DEi7lwan.js"),__vite__mapDeps([291,285,1,292]),import.meta.url),"../fixtures/settings/screen.vue":()=>fe(()=>import("./screen-BVFnOf1Q.js"),__vite__mapDeps([293,288,294,295,1,296]),import.meta.url),"../fixtures/wizard/screen.vue":()=>fe(()=>import("./screen-Bhsny0Q4.js"),__vite__mapDeps([297,288,1,298]),import.meta.url)});class OM extends qi{id;screens;loadedScreens=[];alertName;teleport;controls;button;isScreenLoaded(t){return this.loadedScreens.indexOf(t)!==-1}registerScreen(t){const r=this.screens[t];let i;if(rVe(r)||tVe(r))i=r,this.loadedScreens.push(t);else if(voe(r))i={template:`<panel-screen :panel="this" :screenId="'${t}'">
                           </panel-screen>`};else{let s;typeof r=="string"?s=itt[`../fixtures/${r}`]():s=r();const n=new Promise((o,a)=>{s.then(l=>{this.loadedScreens.push(t),o(iVe(l)?l.default:l)}),s.catch(l=>a(l))});i=cae({loader:()=>n,loadingComponent:rtt,delay:200})}this.$iApi.$element.component(t,i)}style;expanded;get width(){if(!(!this.style.width||this.style.width.slice(-2)!=="px"))return parseInt(this.style.width)}route;constructor(t,r,i){if(super(t),{id:this.id,screens:this.screens,style:this.style,expanded:this.expanded,alertName:this.alertName,button:this.button,controls:this.controls}={id:r,style:{},expanded:!1,controls:{expand:!1,...i.controls},...i},Object.keys(this.screens).length===0)throw new Error("panel must have at least a single screen");this.route={screen:Object.keys(this.screens).pop()},this.style["flex-basis"]||(this.style["flex-basis"]=this.style.width||"350px"),this.style.width="80%"}open(t){return typeof t>"u"?this.$iApi.panel.open(this):this.$iApi.panel.open({id:this.id,...typeof t=="string"?{screen:t}:t}),this}get isOpen(){return this.$iApi.panel.opened.indexOf(this)!==-1}get isVisible(){return this.$iApi.panel.visible.indexOf(this)!==-1}close(){return this.$iApi.panel.close(this),this}minimize(){return this.$iApi.panel.minimize(this),this}move(t){return this.$iApi.panel.move(this,t),this}get isLeftMostPanel(){if(this.$iApi.panel.visible.length>0){for(const t of this.$iApi.panel.visible)if(!t.teleport)return this.id===t.id}return!1}get isRightMostPanel(){if(this.$iApi.panel.visible.length>0){for(let t=this.$iApi.panel.visible.length-1;t>=0;t--)if(!this.$iApi.panel.visible[t].teleport)return this.id===this.$iApi.panel.visible[t].id}return!1}remove(){return this.$iApi.panel.remove(this),this}toggle(t){return typeof t>"u"?this.$iApi.panel.toggle(this,!this.isOpen):typeof t=="boolean"?t!==this.isOpen&&this.$iApi.panel.toggle(this,t):this.$iApi.panel.toggle({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}toggleMinimize(t){return typeof t>"u"||typeof t=="boolean"?this.$iApi.panel.toggleMinimize(this,t):this.$iApi.panel.toggleMinimize({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}pin(t){return t=typeof t<"u"?t:!this.isPinned,this.$iApi.panel.pin(this,t),this}get isPinned(){return!!this.$iApi.panel.pinned&&this.$iApi.panel.pinned.id===this.id}show(t){const r=typeof t=="string"?{screen:t}:t;return this.route=r,this.$iApi.panel.show(this,r),this}setStyles(t,r=!1){return this.$iApi.panel.setStyle(this,t,r),this}expand(t){return this.$iApi.panel.expand(this,t),this}}function stt(e){const t={};(Array.isArray(e)?e:[e]).forEach(o=>{o.language||(console.warn("RAMP2 config with no language supplied. Defaulting to English"),o.language="en");const a=ntt(o);t[o.language]=a});const i=Object.entries(t).map(o=>{const a=o[1].fixturesEnabled;return delete o[1].fixturesEnabled,a});let s=!1;const n=i.reduce((o,a)=>o.filter(l=>{const u=a.includes(l);return s=s||!u,u}));return s&&console.warn("Configs attempted to load different sets of fixtures. Only common fixtures will be loaded (all configs must load the same fixtures)."),n.push("grid","crosshairs","scrollguard","panguard","wizard","layer-reorder","details"),{startingFixtures:n,configs:t}}function ntt(e){const t={version:"4.0",fixtures:{},layers:[],map:{},panels:{open:[]},system:{animate:!0,exposeOid:!1,exposeMeasurements:!0},fixturesEnabled:[]};return ltt(e.services,t),ott(e.map,t),utt(e.ui,t),e.plugins&&ctt(e.plugins,t),t}function ott(e,t){if(e.layers&&e.layers.forEach(r=>{t.layers.unshift(att(r))}),e.initialBasemapId&&(t.map.initialBasemapId=e.initialBasemapId),e.components){if(e.components.geoSearch&&(e.components.geoSearch.enabled&&t.fixturesEnabled.push("geosearch"),typeof e.components.geoSearch.showGraphic<"u"&&console.warn("showGraphic property provided in geoSearch map component cannot be mapped and will be skipped."),typeof e.components.geoSearch.showInfo<"u"&&console.warn("showInfo property provided in geoSearch map component cannot be mapped and will be skipped.")),e.components.overviewMap&&e.components.overviewMap.enabled&&(t.fixtures.overviewmap||(t.fixtures.overviewmap={basemaps:{}},t.fixturesEnabled.push("overviewmap")),t.fixtures.overviewmap.startMinimized=!e.components.overviewMap.initiallyExpanded,t.fixtures.overviewmap.expandFactor=e.components.overviewMap.expandFactor??1.5),e.components.northArrow&&e.components.northArrow.enabled){const r={};e.components.northArrow.arrowIcon&&(r.arrowIcon=e.components.northArrow.arrowIcon),e.components.northArrow.poleIcon&&(r.poleIcon=e.components.northArrow.poleIcon),r&&(t.fixtures.northarrow=r,t.fixturesEnabled.push("northarrow"))}if(e.components.scaleBar&&e.components.scaleBar.enabled){switch(t.map.caption={mapCoords:{disabled:!1},scaleBar:{disabled:!1,imperialScale:e?.components?.scaleBar?.scalebarUnit==="english"||e?.components?.scaleBar?.scalebarUnit==="dual"&&Math.floor(Math.random()*2)===0}},e.components?.mouseInfo?.spatialReference?.wkid){case 4326:t.map.caption.mapCoords.formatter="LAT_LONG_DMS";break;case 3978:t.map.caption.mapCoords.formatter="CANADA_ATLAS_LAMBERT";break;case 102100:t.map.caption.mapCoords.formatter="WEB_MERCATOR";break;default:t.map.caption.mapCoords.formatter="LAT_LONG_DMS";break}e.components.scaleBar.attachTo&&console.warn("attachTo property provided in scaleBar map component cannot be mapped and will be skipped.")}e.components.basemap&&e.components.basemap.enabled&&t.fixturesEnabled.push("basemap")}e.extentSets&&(t.map.extentSets=[],e.extentSets.forEach(r=>{const i={id:r.id,default:{xmin:r.default.xmin,xmax:r.default.xmax,ymin:r.default.ymin,ymax:r.default.ymax,spatialReference:r.spatialReference}};r.full&&(i.full={xmin:r.full.xmin,xmax:r.full.xmax,ymin:r.full.ymin,ymax:r.full.ymax,spatialReference:r.spatialReference}),r.maximum&&(i.maximum={xmin:r.maximum.xmin,xmax:r.maximum.xmax,ymin:r.maximum.ymin,ymax:r.maximum.ymax,spatialReference:r.spatialReference}),t.map.extentSets.push(i)})),e.lodSets&&(t.map.lodSets=e.lodSets),e.tileSchemas&&(t.map.tileSchemas=[],e.tileSchemas.forEach(r=>{const i={id:r.id,name:r.name,extentSetId:r.extentSetId,lodSetId:r.lodSetId,thumbnailTileUrls:[],hasNorthPole:r.hasNorthPole||!1};r.overviewUrl&&(t.fixtures.overviewmap||(t.fixtures.overviewmap={basemaps:{}},t.fixturesEnabled.push("overviewmap")),t.fixtures.overviewmap.basemaps[r.id]={id:r.overviewUrl.id||`overviewmap-basemap-${r.id}`,tileSchemaId:r.id,layers:[{id:r.overviewUrl.id||`overviewmap-basemap-${r.id}-0`,layerType:r.overviewUrl.layerType==="esriDynamic"?ct.MAPIMAGE:ct.TILE,url:r.overviewUrl.url,opacity:r.overviewUrl.opacity??1}]}),t.map.tileSchemas.push(i)})),e.baseMaps&&(t.map.basemaps=[],e.baseMaps.forEach(r=>{const i={id:r.id,tileSchemaId:r.tileSchemaId,name:r.name,description:r.description,altText:r.altText,thumbnailUrl:r.thumbnailUrl,layers:[]};r.attribution&&(i.attribution={text:{},logo:{}},r.attribution.text&&(i.attribution.text.disabled=!r.attribution.text.enabled,i.attribution.text.value=r.attribution.text.value),r.attribution.logo&&(i.attribution.logo.disabled=!r.attribution.logo.enabled,i.attribution.logo.altText=r.attribution.logo.altText,i.attribution.logo.value=r.attribution.logo.value,i.attribution.logo.link=r.attribution.logo.link)),r.layers.forEach((s,n)=>{const o={id:s.id||`${r.id}-${n}`,layerType:s.layerType==="esriDynamic"?ct.MAPIMAGE:ct.TILE,url:s.url,opacity:s.opacity??1};i.layers.push(o)}),t.map.basemaps.push(i)})),e.legend&&(t.fixturesEnabled.push("legend"),e.legend.type==="autopopulate"?(t.fixtures.legend={root:{name:"I'm root",children:[]}},t.layers&&t.layers.toReversed().forEach(r=>{if(r.type==="esri-map-image"||r.type==="ogc-wms"){const i={name:r.name??`${r.id} Group`,children:[]};r.sublayers.forEach(s=>{const n={layerId:r.id};s.name&&(n.name=s.name),s.controls&&(n.controls=s.controls),s.disabledControls&&(n.disabledControls=s.disabledControls),r.type==="esri-map-image"?n.sublayerIndex=s.index:(n.sublayerId=s.id,console.warn(`sublayerId property defined in legend entry ${n.layerId} is currently not supported.`)),i.children.push(n)}),t.fixtures.legend.root.children.push(i)}else{const i={layerId:r.id};r.controls&&(i.controls=r.controls),r.disabledControls&&(i.disabledControls=r.disabledControls),t.fixtures.legend.root.children.push(i)}})):t.fixtures.legend={root:oD(e.legend.root)})}function oD(e){const t={name:e.name,children:[]};typeof e.hidden<"u"&&(t.hidden=e.hidden),typeof e.expanded<"u"&&(t.expanded=e.expanded);const r=["identify","opacity","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.controls=o1(e.controls,r),e.controls.includes("visibility")&&t.controls.push("visibilityButton"),(e.controls.length!==1||e.controls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported."),t.controls.push("expandButton")),e.disabledControls&&e.disabledControls.length>0&&(t.disabledControls=o1(e.disabledControls,r),e.disabledControls.includes("visibility")&&t.disabledControls.push("visibilityButton"),(e.disabledControls.length!==1||e.disabledControls[0]!=="visibility")&&console.warn("Legend entry groups currently support only the visibility control. All other controls are currently not supported.")),e.children.forEach(i=>{if(i.layerId)t.children.push(JW(i));else if(i.infoType)i.infoType==="unboundLayer"?console.warn(`unboundLayer infoType in infoSection in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`):(t.children.push({infoType:i.infoType,content:i.content}),typeof i.export<"u"&&console.warn(`export property in infoSection in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`));else if(i.exclusiveVisibility){const s={name:"Visibility Set",children:[],exclusive:!0};typeof i.collapse<"u"&&console.warn(`collapse property in visibilitySet in children list of legend entry group ${t.name} cannot be mapped and will be skipped.`),i.exclusiveVisibility.forEach(n=>{n.layerId?s.children.push(JW(n)):s.children.push(oD(n))}),t.children.push(s)}else t.children.push(oD(i))}),t}function JW(e){const t=e,r=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.layerControls=o1(e.controls,r),t.layerControls.push("symbology")),e.disabledControls&&e.disabledControls.length>0&&(t.disabledLayerControls=o1(e.disabledControls,r)),e.controlledIds&&(console.warn(`controlledIds property defined in legend entry ${e.layerId} cannot be mapped and will be skipped.`),delete t.controlledIds),e.entryIndex&&(t.sublayerIndex=e.entryIndex,delete e.entryIndex),e.entryId&&console.warn(`entryId property defined in legend entry ${e.layerId} cannot be mapped and will be skipped.`),t}function att(e){const t=VC(e);switch(t.id=e.id,t.url=e.url,e.refreshInterval&&(t.refreshInterval=e.refreshInterval,console.warn("Property refreshInterval in layer is currently not supported.")),e.expectedResponseTime&&(t.expectedLoadTime=e.expectedResponseTime),e.metadataUrl&&(t.metadata={url:e.metadataUrl}),e.catalogueUrl&&(t.catalogueUrl=e.catalogueUrl),typeof e.enableStructuredDelete<"u"&&console.warn(`enableStructuredDelete property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.tooltipField&&(t.tooltipField=e.tooltipField),e.tolerance&&(t.mouseTolerance=e.tolerance,e.layerType==="esriDynamic"&&(t.touchTolerance=e.tolerance+10)),e.customRenderer&&(t.customRenderer=e.customRenderer),e.layerType){case"esriDynamic":t.layerType="esri-map-image",typeof e.singleEntryCollapse<"u"&&(t.singleEntryCollapse=e.singleEntryCollapse),e.imageFormat&&(t.imageFormat=e.imageFormat),e.layerEntries&&(t.sublayers=[],e.layerEntries.forEach(r=>{const i=VC(r);i.index=r.index,t.sublayers.push(i)}));break;case"esriFeature":t.layerType="esri-feature",e.fileType&&(t.layerType=e.fileType==="shapefile"?"file-shape":`file-${e.fileType}`,e.colour&&(t.colour=e.colour),e.latField&&(t.latField=e.latField),e.longField&&(t.longField=e.longField));break;case"ogcWfs":t.layerType="ogc-wfs",e.colour&&(t.colour=e.colour),typeof e.xyInAttribs<"u"&&(t.xyInAttribs=e.xyInAttribs);break;case"ogcWms":t.layerType="ogc-wms",e.suppressGetCapabilities&&console.warn(`suppressGetCapabilities property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.featureInfoMimeType&&(e.featureInfoMimeType==="text/html;fgpv=summary"?t.featureInfoMimeType="text/html":t.featureInfoMimeType=e.featureInfoMimeType),e.legendMimeType&&console.warn(`legendMimeType property provided in layer ${e.id} cannot be mapped and will be skipped.`),e.layerEntries&&(t.sublayers=[],e.layerEntries.forEach(r=>{const i=VC(r);i.id=r.id,r.currentStyle&&(i.currentStyle=r.currentStyle,console.warn(`currentStyle property provided in layer entry ${r.id} of layer ${e.id} is currently not supported.`)),r.allStyles&&console.warn(`allStyles property provided in layer entry ${r.id} of layer ${e.id} cannot be mapped and will be skipped.`),t.sublayers.push(i)}));break;case"esriImage":t.layerType="esri-imagery";break;case"esriTile":t.layerType="esri-tile";break;default:console.warn(`Unhandled layer type in ramp 2 config ${e.layerType}`)}return e.details&&console.warn(`Details config provided in layer ${e.id} cannot be mapped and will be skipped.`),t}function VC(e){const t={};e.name&&(t.name=e.name),e.nameField&&(t.nameField=e.nameField),e.extent&&(t.extent=e.extent);const r=["boundaryZoom","datatable","identify","metadata","opacity","refresh","reload","remove","settings","symbology","visibility"];return e.controls&&e.controls.length>0&&(t.controls=o1(e.controls,r),t.controls.push("symbology")),e.disabledControls&&e.disabledControls.length>0&&(t.disabledControls=o1(e.disabledControls,r)),e.state&&(t.state={opacity:e.state.opacity??1,visibility:e.state.visibility??!0,identify:e.state.query??!0,hovertips:e.state.hovertips??!0},typeof e.state.snapshot<"u"&&console.warn(`snapshot property provided in initialLayer settings in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.state.boundingBox<"u"&&console.warn(`boundingBox property provided in initialLayer settings in layer ${e.id} cannot be mapped and will be skipped.`)),typeof e.stateOnly<"u"&&(t.cosmetic=e.stateOnly),e.initialFilteredQuery&&(t.initialFilteredQuery=e.initialFilteredQuery),htt(e,t),(typeof e.toggleSymbology<"u"||e.table)&&(t.fixtures={},typeof e.toggleSymbology<"u"&&(t.fixtures.legend={toggleSymbology:e.toggleSymbology}),e.table&&(t.fixtures.grid={},e.table.title&&(t.fixtures.grid.title=e.table.title),e.table.description&&console.warn(`description property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.maximize<"u"&&console.warn(`maximize property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),e.table.search&&(e.table.search.enabled&&(t.fixtures.grid.search=e.table.search.enabled),e.table.search.value&&(t.fixtures.grid.searchFilter=e.table.search.value)),typeof e.table.lazyFilter<"u"&&console.warn(`lazyFilter property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.applyMap<"u"&&(t.fixtures.grid.applyMap=e.table.applyMap),typeof e.table.showFilter<"u"&&(t.fixtures.grid.showFilter=e.table.showFilter),typeof e.table.filterByExtent<"u"&&(t.fixtures.grid.filterByExtent=e.table.filterByExtent),typeof e.table.searchStrictMatch<"u"&&console.warn(`searchStrictMatch property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof e.table.printEnabled<"u"&&console.warn(`printEnabled property provided in table property in layer ${e.id} cannot be mapped and will be skipped.`),e.table.columns&&(t.fixtures.grid.columns=[],e.table.columns.forEach(i=>{const s={field:i.data};i.title&&(s.title=i.title),i.description&&console.warn(`description property provided in column property in table property in layer ${e.id} cannot be mapped and will be skipped.`),typeof i.visible<"u"&&(s.visible=i.visible),i.width&&(s.width=i.width),i.sort&&(s.sort=i.sort),typeof i.searchable<"u"&&(s.searchable=i.searchable),i.filter&&(s.filter=i.filter),t.fixtures.grid.columns.push(s)})))),t}function o1(e,t){const r=[];return e.forEach(i=>{t.includes("identify")&&i==="query"?r.push("identify"):t.includes("datatable")&&i==="data"?r.push("datatable"):t.includes(i)?r.push(i):console.warn(`Ignored invalid control: ${i}`)}),r}function ltt(e,t){if(!e)return;e.search&&(t.fixtures.geosearch={},t.fixtures.geosearch.serviceUrls={geoNames:e.search.serviceUrls.geoNames,geoLocation:e.search.serviceUrls.geoLocation,geoProvince:e.search.serviceUrls.provinces,geoTypes:e.search.serviceUrls.types},e.search.serviceUrls.geoSuggest&&console.warn("geoSuggest property provided in serviceUrls of search service cannot be mapped and will be skipped."),e.search.settings&&(t.fixtures.geosearch.settings=e.search.settings),e.search.disabledSearches&&(t.fixtures.geosearch.settings.disabledSearchTypes=e.search.disabledSearches.filter(i=>i!=="SCALE"))),e.export&&(t.fixtures.export||(t.fixtures.export={},t.fixturesEnabled.push("export")),e.export.title&&(t.fixtures.export.title={selected:e.export.title.isSelected??!0,selectable:e.export.title.isSelectable??!0,value:e.export.title.value??"RAMP-Map / PCAR-Carte"}),e.export.map&&(t.fixtures.export.map={selected:e.export.map.isSelected??!0,selectable:e.export.map.isSelectable??!0},e.export.map.value&&console.warn("value property provided in map export component cannot be mapped and will be skipped.")),e.export.mapElements&&(t.fixtures.export.mapElements={selected:e.export.mapElements.isSelected??!0,selectable:e.export.mapElements.isSelectable??!0},e.export.mapElements.value&&console.warn("value property provided in mapElements export component cannot be mapped and will be skipped.")),e.export.legend&&(t.fixtures.export.legend={selected:e.export.legend.isSelected??!0,selectable:e.export.legend.isSelectable??!0},e.export.legend.columnWidth&&(t.fixtures.export.legend.columnWidth=e.export.legend.columnWidth),e.export.legend.value&&console.warn("value property provided in legend export component cannot be mapped and will be skipped."),typeof e.export.legend.showInfoSymbology<"u"&&console.warn("showInfoSymbology property provided in legend export component cannot be mapped and will be skipped."),typeof e.export.legend.showControlledSymbology<"u"&&console.warn("showControlledSymbology property provided in legend export component cannot be mapped and will be skipped.")),e.export.footnote&&(t.fixtures.export.footnote={selected:e.export.footnote.isSelected??!0,selectable:e.export.footnote.isSelectable??!0,value:e.export.footnote.value??""}),e.export.timestamp&&(t.fixtures.export.timestamp={selected:e.export.timestamp.isSelected??!0,selectable:e.export.timestamp.isSelectable??!0},e.export.timestamp.value&&console.warn("value property provided in timestamp export component cannot be mapped and will be skipped.")),e.export.timeout&&console.warn("timeout property provided in export property of services config cannot be mapped and will be skipped."),typeof e.cleanCanvas<"u"&&console.warn("cleanCanvas property provided in export property of services config cannot be mapped and will be skipped.")),e.proxyUrl&&(t.system.proxyUrl=e.proxyUrl),["corsEverywhere","exportMapUrl","geometryUrl","googleAPIKey","esriLibUrl","geolocation","coordInfo","print"].forEach(i=>{typeof e[i]<"u"&&console.warn(`${i} property provided in services config cannot be mapped and will be skipped.`)})}function utt(e,t){if(e.navBar){t.fixtures.mapnav={zoomOption:e.navBar.zoom||"buttons",items:[]};const s=["geolocator","zoom","home","basemap","help","fullscreen","geosearch","legend"];e.navBar.extra.forEach(n=>{const o=n.toLowerCase();s.includes(o)?t.fixtures.mapnav.items.push(o):console.warn(`Ignored invalid mapnav item: ${n}`)}),t.fixturesEnabled.push("mapnav")}if(e.help&&(t.fixtures.help={location:e.help.folderName&&e.help.folderName!=="default"?`./${e.help.folderName}`:"./help",panelWidth:350},t.fixturesEnabled.push("help")),e.legend){const s=["groupToggle","visibilityToggle"];e.legend.reorderable&&s.push("layerReorder"),e.legend.allowImport&&s.push("wizard"),t.fixtures.legend?t.fixtures.legend.headerControls=s:(t.fixturesEnabled.push("legend"),t.fixtures.legend={headerControls:s,root:{}}),e.legend.isOpen&&e.legend.isOpen.large&&t.panels.open.push({id:"legend"})}t.fixtures.appbar={items:[]},t.fixturesEnabled.push("appbar");const r=["layers","basemap","export","help","geoSearch"];e.appBar?(e.appBar.layers!==!1&&(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend")),e.appBar.geoSearch!==!1&&t.fixturesEnabled.includes("geosearch")&&t.fixtures.appbar.items.push("geosearch"),e.appBar.basemap!==!1&&t.fixtures.appbar.items.push("basemap")):(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend"),t.fixtures.appbar.items.push("geosearch"),t.fixtures.appbar.items.push("basemap")),e.sideMenu&&e.sideMenu.items&&e.sideMenu.items.length>0&&e.sideMenu.items.forEach(s=>{s.forEach(n=>{n==="layers"&&!t.fixtures.appbar.items.includes("legend")?(t.fixtures.appbar.items.push("legend"),t.fixturesEnabled.includes("legend")||t.fixturesEnabled.push("legend")):n!=="layers"&&r.includes(n)&&!t.fixtures.appbar.items.includes(n.toLowerCase())&&(t.fixtures.appbar.items.push(n.toLowerCase()),(n.toLowerCase()==="help"||n.toLowerCase()==="export"&&!t.fixturesEnabled.includes(n.toLowerCase()))&&t.fixturesEnabled.push(n.toLowerCase()))})}),e.tableIsOpen&&e.tableIsOpen.large,["fullscreen","theme","logoUrl","failureFeedback","title","restrictNavigation","about"].forEach(s=>{typeof e[s]<"u"&&console.warn(`${s} property provided in services config cannot be mapped and will be skipped.`)})}function ctt(e,t){e.areasOfInterest.enable&&(t.fixturesEnabled.includes("areas-of-interest")||t.fixturesEnabled.push("areas-of-interest"),e.areasOfInterest.areas&&(t.fixtures["areas-of-interest"]={areas:e.areasOfInterest.areas.map(r=>({title:`${r["title-en-CA"]} / ${r["title-fr-CA"]}`,thumbnail:r.thumbnailUrl,altText:r.altText??"",description:r.description??"",extent:{xmin:r.xmin,xmax:r.xmax,ymin:r.ymin,ymax:r.ymax,spatialReference:{wkid:r.wkid}}}))}))}function htt(e,t){const r=e.outfields&&e.outfields!=="*";if(!r&&!e.fieldMetadata)return;const i={fieldInfo:[],exclusiveFields:!1,enforceOrder:!1};e.fieldMetadata?(i.fieldInfo=e.fieldMetadata.map(s=>{const n={name:s.data};return s.alias&&(n.alias=s.alias),n}),r&&(e.outfields.split(",").map(n=>n.trim()).forEach(n=>{i.fieldInfo.findIndex(o=>o.name===n)===-1&&i.fieldInfo.push({name:n})}),i.exclusiveFields=!0)):r&&(i.fieldInfo=e.outfields.split(",").map(s=>({name:s.trim()})),i.exclusiveFields=!0),t.fieldMetadata=i}var M0={major:"4",minor:"10",patch:"0-beta",timestamp:"Wed Dec 4 16:25:20 2024 -0500",hash:"9ac248104d6e792f0e3f2a55d7dccd293aca66d4"};console.info(`RAMP v${M0.major}.${M0.minor}.${M0.patch} [${M0.hash.slice(0,9)}] (Built on ${new Date(M0.timestamp.toString()).toLocaleString()})`);const xb=M0;function Act(e){return stt(e)}const $ct=(e,t,r)=>new RQe(e,t,r),wv=new eVe;export{hc as $,lo as A,sr as B,xo as C,Vt as D,TZ as E,yy as F,be as G,$ye as H,gi as I,ywe as J,gwe as K,Frt as L,vwe as M,ce as N,ra as O,Z as P,Fnt as Q,Ide as R,J0 as S,Dnt as T,Re as U,ia as V,Rme as W,Ome as X,F_ as Y,Lnt as Z,je as _,W3e as a,Rit as a$,qe as a0,Ga as a1,mk as a2,yk as a3,Lit as a4,oA as a5,vi as a6,by as a7,Ku as a8,zn as a9,Le as aA,Gl as aB,fJ as aC,mo as aD,Un as aE,D_ as aF,Px as aG,QD as aH,XD as aI,Zm as aJ,e6 as aK,uit as aL,Gte as aM,Hye as aN,Gm as aO,Vrt as aP,or as aQ,ztt as aR,X6 as aS,Oh as aT,hrt as aU,Rs as aV,Jo as aW,p1 as aX,yt as aY,b1e as aZ,Pit as a_,Vwe as aa,zwe as ab,Gwe as ac,Zwe as ad,e_e as ae,AQ as af,IQ as ag,EQ as ah,Qwe as ai,n_e as aj,o_e as ak,IY as al,yye as am,Dye as an,IO as ao,zd as ap,q2 as aq,dA as ar,BE as as,GE as at,wit as au,c6 as av,rde as aw,ws as ax,KY as ay,ene as az,P2e as b,jn as b$,fit as b0,mit as b1,vit as b2,git as b3,Cd as b4,yit as b5,ty as b6,Vke as b7,Aut as b8,Cut as b9,eRe as bA,Fw as bB,_6 as bC,hV as bD,hit as bE,est as bF,lst as bG,Id as bH,OZ as bI,a3 as bJ,mot as bK,Pse as bL,fF as bM,qk as bN,Fv as bO,vLe as bP,Rse as bQ,Tse as bR,Py as bS,R_ as bT,UC as bU,ENe as bV,XW as bW,Yt as bX,ue as bY,t7 as bZ,Zne as b_,Ld as ba,h as bb,d as bc,j as bd,ql as be,$it as bf,wA as bg,ht as bh,fn as bi,Yy as bj,Bd as bk,Pv as bl,Zy as bm,jr as bn,ef as bo,Rd as bp,tf as bq,Vh as br,ec as bs,hO as bt,Fr as bu,cO as bv,dO as bw,Q3 as bx,Fe as by,Mte as bz,mnt as c,PD as c$,Ko as c0,Mtt as c1,Pr as c2,bn as c3,Vs as c4,zr as c5,Wat as c6,KE as c7,Zt as c8,Zce as c9,YR as cA,vn as cB,Ad as cC,fne as cD,x6e as cE,cct as cF,RDe as cG,hct as cH,act as cI,GDe as cJ,vfe as cK,ent as cL,snt as cM,tU as cN,w1e as cO,Iy as cP,W1e as cQ,nnt as cR,jh as cS,ast as cT,slt as cU,ait as cV,VZ as cW,LA as cX,GSe as cY,o1e as cZ,Oit as c_,Hce as ca,jrt as cb,uS as cc,ILe as cd,Hrt as ce,pLe as cf,Sye as cg,$rt as ch,Zme as ci,Iee as cj,zxe as ck,ej as cl,FZ as cm,jZ as cn,Tee as co,wfe as cp,ND as cq,DD as cr,_fe as cs,aA as ct,lA as cu,mde as cv,frt as cw,jat as cx,kre as cy,Ax as cz,Lh as d,Yd as d$,Xat as d0,rie as d1,tie as d2,Kat as d3,Yat as d4,Bve as d5,mX as d6,Oy as d7,To as d8,_1e as d9,ZSe as dA,U6 as dB,ist as dC,ust as dD,Act as dE,We as dF,r8 as dG,Utt as dH,mD as dI,U2 as dJ,Y2 as dK,et as dL,Ky as dM,A1 as dN,I1 as dO,E1 as dP,Xy as dQ,Zd as dR,pe as dS,Xee as dT,n8 as dU,oS as dV,js as dW,qn as dX,Sh as dY,Mo as dZ,Hl as d_,Nit as da,v1e as db,kit as dc,Wo as dd,Brt as de,Ho as df,Qat as dg,uA as dh,Nre as di,Hme as dj,sye as dk,bY as dl,TY as dm,SY as dn,nye as dp,dr as dq,sa as dr,Att as ds,_de as dt,Sv as du,ED as dv,ohe as dw,g8 as dx,Uo as dy,oI as dz,j6 as e,RJ as e$,jA as e0,GA as e1,Z6 as e2,EY as e3,_ye as e4,cye as e5,hye as e6,Pye as e7,WMe as e8,WJ as e9,lct as eA,uct as eB,bi as eC,wee as eD,ftt as eE,uc as eF,Ud as eG,I0 as eH,Jm as eI,Rnt as eJ,j3e as eK,DT as eL,Ert as eM,prt as eN,wt as eO,Yu as eP,JE as eQ,H5e as eR,vTe as eS,NSe as eT,Nnt as eU,OMe as eV,knt as eW,CMe as eX,Bn as eY,K6 as eZ,zce as e_,qE as ea,zD as eb,B2 as ec,U_ as ed,Fn as ee,Yo as ef,gme as eg,rA as eh,vme as ei,mte as ej,art as ek,krt as el,Ne as em,P_ as en,ge as eo,_1 as ep,S8 as eq,iit as er,L3e as es,lit as et,tit as eu,mn as ev,wIe as ew,wj as ex,l1 as ey,dct as ez,J3e as f,Ah as f$,Jat as f0,Ci as f1,B4e as f2,Jrt as f3,Xt as f4,fD as f5,bLe as f6,$7 as f7,X4 as f8,Ry as f9,Wt as fA,Xr as fB,Vy as fC,cQe as fD,Bt as fE,Vi as fF,br as fG,vr as fH,Ae as fI,Vr as fJ,Bi as fK,Te as fL,Be as fM,sg as fN,wi as fO,Or as fP,at as fQ,xr as fR,vs as fS,Se as fT,WUe as fU,fE as fV,C$ as fW,ks as fX,wn as fY,dc as fZ,jt as f_,N2 as fa,HC as fb,t6 as fc,Os as fd,MB as fe,O_ as ff,Pde as fg,SD as fh,Td as fi,xa as fj,si as fk,Ctt as fl,Rh as fm,j2 as fn,fs as fo,jD as fp,tme as fq,eit as fr,vY as fs,fLe as ft,yLe as fu,Ose as fv,Jee as fw,k2 as fx,Cs as fy,ah as fz,p7 as g,l8 as g$,Zr as g0,hQe as g1,rt as g2,Yr as g3,e2 as g4,Uxe as g5,Grt as g6,fye as g7,hxe as g8,fa as g9,jO as gA,lX as gB,_8 as gC,$v as gD,s8 as gE,lS as gF,l5 as gG,wI as gH,nS as gI,iS as gJ,eee as gK,HMe as gL,v8 as gM,sIe as gN,ACe as gO,ECe as gP,TCe as gQ,fj as gR,nA as gS,Ru as gT,es as gU,$a as gV,C6 as gW,Ttt as gX,Sj as gY,b8 as gZ,Z_ as g_,Xd as ga,BU as gb,Knt as gc,Xnt as gd,oe as ge,yxe as gf,g3e as gg,UA as gh,H2 as gi,o8 as gj,cae as gk,Kot as gl,T0 as gm,EL as gn,wtt as go,xye as gp,ni as gq,PIe as gr,II as gs,uie as gt,vt as gu,My as gv,m3e as gw,c3e as gx,zMe as gy,JA as gz,VE as h,Mfe as h$,Yee as h0,St as h1,YMe as h2,ZMe as h3,u1 as h4,fTe as h5,lSe as h6,Uh as h7,M1 as h8,S1 as h9,Yme as hA,Kme as hB,Xme as hC,Ixe as hD,Wme as hE,Exe as hF,Jce as hG,uQe as hH,Gi as hI,dE as hJ,EQe as hK,CN as hL,AQe as hM,L3 as hN,kA as hO,J6 as hP,vk as hQ,Sst as hR,Nw as hS,L4e as hT,lye as hU,Nye as hV,Fye as hW,MLe as hX,r_e as hY,gfe as hZ,gte as h_,Twe as ha,Mwe as hb,xwe as hc,NTe as hd,LMe as he,bTe as hf,KSe as hg,tTe as hh,rTe as hi,iTe as hj,wu as hk,nTe as hl,oTe as hm,aTe as hn,lTe as ho,uTe as hp,cTe as hq,hTe as hr,pTe as hs,w8 as ht,dTe as hu,Lte as hv,JMe as hw,fct as hx,oct as hy,m5e as hz,H3e as i,Ac as i$,RI as i0,WD as i1,dye as i2,uye as i3,wY as i4,It as i5,kL as i6,eat as i7,Dz as i8,d$e as i9,n9 as iA,qh as iB,iCe as iC,Ott as iD,Mt as iE,RA as iF,d1 as iG,ys as iH,na as iI,nit as iJ,gd as iK,sA as iL,ige as iM,R$ as iN,Sle as iO,Rle as iP,L2 as iQ,xQe as iR,MQe as iS,VW as iT,qp as iU,gce as iV,K9 as iW,ct as iX,$Qe as iY,fo as iZ,Fs as i_,u$e as ia,Eot as ib,Aot as ic,HIe as id,Cot as ie,$ot as ig,Oot as ih,Q4e as ii,SI as ij,rM as ik,wS as il,BA as im,Y6 as io,QSe as ip,exe as iq,n3 as ir,yte as is,YE as it,Gie as iu,ste as iv,dZ as iw,gZ as ix,G3e as iy,IQe as iz,Hw as j,tde as j$,Vl as j0,md as j1,of as j2,qi as j3,H$ as j4,HI as j5,PQe as j6,Joe as j7,ku as j8,i9 as j9,Ut as jA,za as jB,OO as jC,CCe as jD,Bo as jE,xte as jF,ahe as jG,S6 as jH,tst as jI,Qit as jJ,Tk as jK,F as jL,Irt as jM,Q5e as jN,Rp as jO,cie as jP,nct as jQ,d$ as jR,p$ as jS,SF as jT,yo as jU,cDe as jV,Yce as jW,Zo as jX,Ul as jY,Vu as jZ,ort as j_,TUe as ja,zrt as jb,x1 as jc,xY as jd,vxe as je,nI as jf,qrt as jg,MY as jh,gye as ji,jhe as jj,Gtt as jk,ilt as jl,yse as jm,$se as jn,n2 as jo,oF as jp,Gk as jq,lse as jr,gS as js,Xtt as jt,r8e as ju,s9 as jv,pE as jw,ir as jx,D4e as jy,Vd as jz,LP as k,Crt as k$,La as k0,tA as k1,drt as k2,iG as k3,Zye as k4,Jye as k5,Yrt as k6,oit as k7,DI as k8,Ist as k9,uD as kA,cD as kB,Cl as kC,XY as kD,Od as kE,IMe as kF,EMe as kG,UMe as kH,XTe as kI,f3e as kJ,iIe as kK,oJ as kL,aJ as kM,gtt as kN,nlt as kO,Zat as kP,Kre as kQ,Qre as kR,Zre as kS,cA as kT,DM as kU,pit as kV,WZ as kW,Xfe as kX,nme as kY,eie as kZ,G2 as k_,Est as ka,Tst as kb,WQ as kc,iA as kd,iy as ke,Tot as kf,Pot as kg,bet as kh,Ret as ki,wet as kj,OQe as kk,ui as kl,pct as km,fk as kn,Z5e as ko,nG as kp,Ss as kq,Gat as kr,Ey as ks,NQe as kt,CQe as ku,e8e as kv,u2 as kw,kQe as kx,sn as ky,$t as kz,iot as l,wZ as l$,Bm as l0,wae as l1,Oye as l2,Lw as l3,N1e as l4,xI as l5,fnt as l6,xit as l7,_Te as l8,Hat as l9,OVe as lA,Soe as lB,Eo as lC,wVe as lD,Ect as lE,Ict as lF,Mv as lG,Vnt as lH,lfe as lI,NJ as lJ,Jtt as lK,Wtt as lL,z4e as lM,F4e as lN,Dat as lO,tlt as lP,elt as lQ,Khe as lR,Sk as lS,Yhe as lT,U4e as lU,btt as lV,qce as lW,sit as lX,nJ as lY,mu as lZ,zl as l_,qat as la,vd as lb,FU as lc,nte as ld,q_ as le,Uee as lf,tMe as lg,rMe as lh,kse as li,fr as lj,Da as lk,mr as ll,Tr as lm,Jl as ln,L1 as lo,Ls as lp,Jt as lq,Qe as lr,aVe as ls,R1 as lt,yv as lu,boe as lv,ly as lw,PVe as lx,$Ve as ly,CVe as lz,ynt as m,AV as m$,nrt as m0,UZ as m1,z7 as m2,iY as m3,tDe as m4,mrt as m5,oi as m6,Wnt as m7,Lst as m8,kwe as m9,gY as mA,Qst as mB,ZY as mC,Krt as mD,ii as mE,CJ as mF,Kr as mG,C7 as mH,Pwe as mI,Ast as mJ,WE as mK,ube as mL,rge as mM,q5e as mN,jre as mO,kn as mP,mg as mQ,FMe as mR,tte as mS,Vre as mT,z8 as mU,wLe as mV,Vat as mW,Rot as mX,sEe as mY,$V as mZ,NA as m_,mLe as ma,yRe as mb,hRe as mc,yS as md,Urt as me,HD as mf,g6 as mg,Gy as mh,lrt as mi,PJ as mj,Sit as mk,Ln as ml,Ii as mm,Rt as mn,Nu as mo,nD as mp,yce as mq,tGe as mr,TQe as ms,zy as mt,Jr as mu,Oi as mv,Km as mw,yi as mx,Xm as my,Wbe as mz,YSe as n,aAe as n$,km as n0,Nn as n1,pk as n2,Stt as n3,xtt as n4,_tt as n5,bde as n6,bxe as n7,cxe as n8,pxe as n9,qt as nA,FL as nB,jL as nC,Al as nD,SEe as nE,L$e as nF,YEe as nG,ure as nH,ZEe as nI,i$e as nJ,ZAe as nK,KEe as nL,Qot as nM,Ire as nN,Xot as nO,WAe as nP,HEe as nQ,got as nR,lme as nS,YA as nT,Trt as nU,tat as nV,UAe as nW,Y4e as nX,Iot as nY,J4e as nZ,L8 as n_,bQ as na,Dhe as nb,sJ as nc,Unt as nd,IR as ne,ufe as nf,EX as ng,znt as nh,Xv as ni,pc as nj,gJe as nk,Wu as nl,CS as nm,rs as nn,XJe as no,zke as np,XSe as nq,Hot as nr,Wot as ns,O8 as nt,$8 as nu,Bot as nv,qot as nw,E8 as nx,Nv as ny,BEe as nz,urt as o,VMe as o$,SAe as o0,bre as o1,wre as o2,lv as o3,xAe as o4,bAe as o5,XA as o6,N8 as o7,bd as o8,oXe as o9,FLe as oA,_2e as oB,w2e as oC,yst as oD,gst as oE,vst as oF,Ll as oG,rye as oH,$b as oI,Mnt as oJ,_Y as oK,Vve as oL,Dve as oM,UTe as oN,cbe as oO,Xu as oP,Ty as oQ,Wrt as oR,Yst as oS,$u as oT,$Re as oU,l$ as oV,Yi as oW,k6 as oX,int as oY,lIe as oZ,Vw as o_,Ft as oa,PY as ob,hbe as oc,rst as od,TD as oe,Axe as of,Txe as og,mye as oh,Mxe as oi,gJ as oj,Mae as ok,vae as ol,Qs as om,wd as on,Nl as oo,c$ as op,Wit as oq,xse as or,Ise as os,JRe as ot,lut as ou,iLe as ov,hv as ow,uut as ox,a2 as oy,Wce as oz,h1 as p,n$e as p$,ult as p0,Cit as p1,Tit as p2,Eit as p3,Iit as p4,Ait as p5,Gn as p6,Dit as p7,f7 as p8,Mit as p9,Hst as pA,qst as pB,Wst as pC,Jst as pD,G_e as pE,G6 as pF,fR as pG,lF as pH,Th as pI,Nst as pJ,nne as pK,_v as pL,ect as pM,crt as pN,dtt as pO,$1 as pP,vot as pQ,iat as pR,Mr as pS,R6 as pT,_Ie as pU,dot as pV,L6 as pW,AIe as pX,kv as pY,fot as pZ,wot as p_,CRe as pa,mse as pb,k5e as pc,LNe as pd,Lot as pe,bO as pf,w_ as pg,vle as ph,q0 as pi,OM as pj,ch as pk,ta as pl,zi as pm,kQ as pn,kst as po,GQ as pp,Xst as pq,BQ as pr,Vst as ps,Fst as pt,q_e as pu,Kst as pv,jst as pw,PV as px,RV as py,LV as pz,Drt as q,H6e as q$,yz as q0,O0 as q1,sat as q2,mz as q3,fz as q4,Mot as q5,bot as q6,Sot as q7,vj as q8,xot as q9,Alt as qA,Elt as qB,$Oe as qC,AOe as qD,f6 as qE,xT as qF,kot as qG,mtt as qH,P1e as qI,Kie as qJ,uDe as qK,O1e as qL,dI as qM,mI as qN,B_ as qO,Itt as qP,yct as qQ,z2 as qR,ot as qS,NG as qT,Dot as qU,Not as qV,vEe as qW,bEe as qX,v6 as qY,j1e as qZ,V1e as q_,qte as qa,_ot as qb,rat as qc,lb as qd,Gz as qe,_5 as qf,$re as qg,Ent as qh,g4e as qi,olt as qj,M5 as qk,T5 as ql,zZ as qm,A5e as qn,x4e as qo,A4e as qp,j4e as qq,rlt as qr,SSe as qs,cnt as qt,unt as qu,bB as qv,gO as qw,$1e as qx,bit as qy,Gu as qz,Ote as r,zye as r0,B_e as r1,Zrt as r2,cit as r3,nge as r4,Xrt as r5,qye as r6,Qrt as r7,cst as r8,hLe as r9,flt as rA,ylt as rB,vlt as rC,_lt as rD,Dst as ra,Zst as rb,Gst as rc,Bst as rd,MA as re,rit as rf,Ust as rg,zst as rh,GLe as ri,BLe as rj,kye as rk,Lde as rl,ytt as rm,sst as rn,nst as ro,Bxe as rp,Gxe as rq,tRe as rr,Gce as rs,ost as rt,xst as ru,Qnt as rv,tot as rw,bIe as rx,zat as ry,plt as rz,K as s,uIe as t,rot as u,wv as v,gnt as w,Ay as x,O2e as y,$ct as z};
