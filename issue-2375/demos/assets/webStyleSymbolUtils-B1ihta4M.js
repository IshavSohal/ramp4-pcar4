import{s as S,y as $,C as w,I as p,p as f,R as N,b as D,c as U,e as j,x,j as g,k as d,w as F,m as I}from"./main-DFK8jSbu.js";import{c as k,a as h}from"./devEnvironmentUtils-b2XrV2Jv.js";import"./preload-helper-ExcqyqRp.js";function W(e,t,l,n){const r=e.name;return r==null?Promise.reject(new S("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference")):e.styleName&&e.styleName==="Esri2DPointSymbolsStyle"?C(r,t,n):$(e,t,n).then(o=>A(o,r,t,l,I,n))}function v(e,t){return t.items.find(l=>l.name===e)}function A(e,t,l,n,r,o){const s=l?.portal!=null?l.portal:w.getDefault(),b={portal:s,url:p(e.baseUrl),origin:"portal-item"},m=v(t,e.data);if(!m){const u=`The symbol name '${t}' could not be found`;return Promise.reject(new S("symbolstyleutils:symbol-name-not-found",u,{symbolName:t}))}let i=f(r(m,n),b),y=m.thumbnail?.href??null;const c=m.thumbnail?.imageData;k()&&(i=h(i)??"",y=h(y));const P={portal:s,url:p(N(i)),origin:"portal-item"};return D(i,o).then(u=>{const O=n==="cimRef"?U(u.data):u.data,a=j(O,P);if(a&&x(a)){if(y){const R=f(y,b);a.thumbnail=new g({url:R})}else c&&(a.thumbnail=new g({url:`data:image/png;base64,${c}`}));e.styleUrl?a.styleOrigin=new d({portal:l.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(a.styleOrigin=new d({portal:l.portal,styleName:e.styleName,name:t}))}return a})}function C(e,t,l){const n=F.replaceAll(/\{SymbolName\}/gi,e),r=t.portal!=null?t.portal:w.getDefault();return D(n,l).then(o=>{const s=U(o.data);return j(s,{portal:r,url:p(N(n)),origin:"portal-item"})})}export{A as fetchSymbolFromStyle,v as getStyleItemFromStyle,W as resolveWebStyleSymbol};
