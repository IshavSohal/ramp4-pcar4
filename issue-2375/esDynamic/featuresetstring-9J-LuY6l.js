import{a as t,H as m,a1 as b,m as f,B as s,a2 as v,b as c,r as d,a3 as A,N as l,A as y,a4 as T,a5 as h,a6 as g,a7 as x,P as F,a8 as P,a9 as V,aa as w}from"./arcadeUtils-Cqggt430.js";function p(n,r){return n&&n.domain?n.domain.type==="coded-value"||n.domain.type==="codedValue"?l.convertObjectToArcadeDictionary({type:"codedValue",name:n.domain.name,dataType:w[n.field.type],codedValues:n.domain.codedValues.map(e=>({name:e.name,code:e.code}))},y(r)):l.convertObjectToArcadeDictionary({type:"range",name:n.domain.name,dataType:w[n.field.type],min:n.domain.minValue,max:n.domain.maxValue},y(r)):null}function D(n){n.mode==="async"&&(n.functions.domain=function(r,e){return n.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,2,3,r,e),m(a[0]))return p(b(a[0],f(a[1]),a[2]===void 0?void 0:a[2]),r);if(s(a[0]))return await a[0]._ensureLoaded(),p(v(f(a[1]),a[0],null,a[2]===void 0?void 0:a[2]),r);throw new c(r,d.InvalidParameter,e)})},n.functions.subtypes=function(r,e){return n.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,1,1,r,e),m(a[0])){const o=A(a[0]);return o?l.convertObjectToArcadeDictionary(o,y(r)):null}if(s(a[0])){await a[0]._ensureLoaded();const o=a[0].subtypeMetaData();return o?l.convertObjectToArcadeDictionary(o,y(r)):null}throw new c(r,d.InvalidParameter,e)})},n.functions.domainname=function(r,e){return n.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,2,4,r,e),m(a[0]))return T(a[0],f(a[1]),a[2],a[3]===void 0?void 0:a[3]);if(s(a[0])){await a[0]._ensureLoaded();const o=v(f(a[1]),a[0],null,a[3]===void 0?void 0:a[3]);return h(o,a[2])}throw new c(r,d.InvalidParameter,e)})},n.signatures.push({name:"domainname",min:2,max:4}),n.functions.domaincode=function(r,e){return n.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,2,4,r,e),m(a[0]))return g(a[0],f(a[1]),a[2],a[3]===void 0?void 0:a[3]);if(s(a[0])){await a[0]._ensureLoaded();const o=v(f(a[1]),a[0],null,a[3]===void 0?void 0:a[3]);return x(o,a[2])}throw new c(r,d.InvalidParameter,e)})},n.signatures.push({name:"domaincode",min:2,max:4}),n.functions.text=function(r,e){return n.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,1,2,r,e),s(a[0])){const o=F(a[1],"");if(o==="")return a[0].castToText();if(o.toLowerCase()==="schema")return a[0].convertToText("schema",i.abortSignal);if(o.toLowerCase()==="featureset")return a[0].convertToText("featureset",i.abortSignal);throw new c(r,d.InvalidParameter,e)}return P(a[0],a[1])})},n.functions.gdbversion=function(r,e){return n.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,1,1,r,e),m(a[0]))return a[0].gdbVersion();if(s(a[0]))return(await a[0].load()).gdbVersion;throw new c(r,d.InvalidParameter,e)})},n.functions.schema=function(r,e){return n.standardFunctionAsync(r,e,async(i,u,a)=>{if(t(a,1,1,r,e),s(a[0]))return await a[0].load(),l.convertObjectToArcadeDictionary(a[0].schema(),y(r));if(m(a[0])){const o=V(a[0]);return o?l.convertObjectToArcadeDictionary(o,y(r)):null}throw new c(r,d.InvalidParameter,e)})})}export{D as registerFunctions};
