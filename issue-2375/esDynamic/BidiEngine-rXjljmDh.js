const x=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\xAB","\xBB"],["\xBB","\xAB"],["\u2039","\u203A"],["\u203A","\u2039"],["\u207D","\u207E"],["\u207E","\u207D"],["\u208D","\u208E"],["\u208E","\u208D"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232A"],["\u232A","\u2329"],["\uFE59","\uFE5A"],["\uFE5A","\uFE59"],["\uFE5B","\uFE5C"],["\uFE5C","\uFE5B"],["\uFE5D","\uFE5E"],["\uFE5E","\uFE5D"],["\uFE64","\uFE65"],["\uFE65","\uFE64"]],v=["\u0622","\u0623","\u0625","\u0627"],X=["\uFEF5","\uFEF7","\uFEF9","\uFEFB"],tt=["\uFEF6","\uFEF8","\uFEFA","\uFEFC"],j=["\u0627","\u0628","\u062A","\u062B","\u062C","\u062D","\u062E","\u062F","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063A","\u0641","\u0642","\u0643","\u0644","\u0645","\u0646","\u0647","\u0648","\u064A","\u0625","\u0623","\u0622","\u0629","\u0649","\u0644","\u0645","\u0646","\u0647","\u0648","\u064A","\u0625","\u0623","\u0622","\u0629","\u0649","\u06CC","\u0626","\u0624"],rt=["\uFE8D","\uFE8F","\uFE95","\uFE99","\uFE9D","\uFEA1","\uFEA5","\uFEA9","\uFEAB","\uFEAD","\uFEAF","\uFEB1","\uFEB5","\uFEB9","\uFEBD","\uFEC1","\uFEC5","\uFEC9","\uFECD","\uFED1","\uFED5","\uFED9","\uFEDD","\uFEE1","\uFEE5","\uFEE9","\uFEED","\uFEF1","\uFE87","\uFE83","\uFE81","\uFE93","\uFEEF","\uFBFC","\uFE89","\uFE85","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE89","\uFE85"],et=["\uFE8E","\uFE90","\uFE96","\uFE9A","\uFE9E","\uFEA2","\uFEA6","\uFEAA","\uFEAC","\uFEAE","\uFEB0","\uFEB2","\uFEB6","\uFEBA","\uFEBE","\uFEC2","\uFEC6","\uFECA","\uFECE","\uFED2","\uFED6","\uFEDA","\uFEDE","\uFEE2","\uFEE6","\uFEEA","\uFEEE","\uFEF2","\uFE88","\uFE84","\uFE82","\uFE94","\uFEF0","\uFBFD","\uFE8A","\uFE86","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE8A","\uFE86"],nt=["\uFE8E","\uFE92","\uFE98","\uFE9C","\uFEA0","\uFEA4","\uFEA8","\uFEAA","\uFEAC","\uFEAE","\uFEB0","\uFEB4","\uFEB8","\uFEBC","\uFEC0","\uFEC4","\uFEC8","\uFECC","\uFED0","\uFED4","\uFED8","\uFEDC","\uFEE0","\uFEE4","\uFEE8","\uFEEC","\uFEEE","\uFEF4","\uFE88","\uFE84","\uFE82","\uFE94","\uFEF0","\uFBFF","\uFE8C","\uFE86","\uFE71","\uFE72","\uFE74","\uFE77","\uFE79","\uFE7B","\uFE7D","\uFE7F","\uFE80","\uFE8C","\uFE86"],ut=["\uFE8D","\uFE91","\uFE97","\uFE9B","\uFE9F","\uFEA3","\uFEA7","\uFEA9","\uFEAB","\uFEAD","\uFEAF","\uFEB3","\uFEB7","\uFEBB","\uFEBF","\uFEC3","\uFEC7","\uFECB","\uFECF","\uFED3","\uFED7","\uFEDB","\uFEDF","\uFEE3","\uFEE7","\uFEEB","\uFEED","\uFEF3","\uFE87","\uFE83","\uFE81","\uFE93","\uFEEF","\uFBFE","\uFE8B","\uFE85","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE8B","\uFE85"],W=["\u0621","\u0622","\u0623","\u0624","\u0625","\u0627","\u0629","\u062F","\u0630","\u0631","\u0632","\u0648","\u0649"],ot=["\u064B","\u064B","\u064C","\u061F","\u064D","\u061F","\u064E","\u064E","\u064F","\u064F","\u0650","\u0650","\u0651","\u0651","\u0652","\u0652","\u0621","\u0622","\u0622","\u0623","\u0623","\u0624","\u0624","\u0625","\u0625","\u0626","\u0626","\u0626","\u0626","\u0627","\u0627","\u0628","\u0628","\u0628","\u0628","\u0629","\u0629","\u062A","\u062A","\u062A","\u062A","\u062B","\u062B","\u062B","\u062B","\u062C","\u062C","\u062C","\u062C","\u062D","\u062D","\u062D","\u062D","\u062E","\u062E","\u062E","\u062E","\u062F","\u062F","\u0630","\u0630","\u0631","\u0631","\u0632","\u0632","\u0633","\u0633","\u0633","\u0633","\u0634","\u0634","\u0634","\u0634","\u0635","\u0635","\u0635","\u0635","\u0636","\u0636","\u0636","\u0636","\u0637","\u0637","\u0637","\u0637","\u0638","\u0638","\u0638","\u0638","\u0639","\u0639","\u0639","\u0639","\u063A","\u063A","\u063A","\u063A","\u0641","\u0641","\u0641","\u0641","\u0642","\u0642","\u0642","\u0642","\u0643","\u0643","\u0643","\u0643","\u0644","\u0644","\u0644","\u0644","\u0645","\u0645","\u0645","\u0645","\u0646","\u0646","\u0646","\u0646","\u0647","\u0647","\u0647","\u0647","\u0648","\u0648","\u0649","\u0649","\u064A","\u064A","\u064A","\u064A","\uFEF5","\uFEF6","\uFEF7","\uFEF8","\uFEF9","\uFEFA","\uFEFB","\uFEFC","\u061F","\u061F","\u061F"],Z=["\u0621","\u0641"],ct=["\u063A","\u064A"],at=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],it=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],e=0,c=1,f=2,U=3,t=4,p=5,k=6,r=7,F=8,m=9,b=10,A=11,n=12,st=13,lt=14,ht=15,ft=16,At=17,h=18,Tt=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],_=100,Lt=[_+0,e,e,e,e,_+1,_+2,_+3,c,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,_+4,t,t,t,e,t,e,t,e,t,t,t,e,e,t,t,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,t,t,e,e,t,t,e,e,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,_+5,r,r,_+6,_+7],gt=[[h,h,h,h,h,h,h,h,h,k,p,k,F,p,h,h,h,h,h,h,h,h,h,h,h,h,h,h,p,p,p,k,F,t,t,A,A,A,t,t,t,t,t,b,m,b,m,m,f,f,f,f,f,f,f,f,f,f,m,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,h,h,h,h,h,h,p,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,m,t,A,A,A,A,t,t,t,t,e,t,t,h,t,t,A,A,f,f,t,e,t,t,t,f,e,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e],[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,e,e,e,e,e,e,e,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,e,t,t,t,t,t,t,t,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,c,n,c,n,n,c,n,n,c,n,t,t,t,t,t,t,t,t,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,t,t,t,t,t,c,c,c,c,c,t,t,t,t,t,t,t,t,t,t,t],[U,U,U,U,t,t,t,t,r,A,A,r,m,r,t,t,n,n,n,n,n,n,n,n,n,n,n,r,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,U,U,U,U,U,U,U,U,U,U,A,U,U,r,r,r,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,U,t,n,n,n,n,n,n,r,r,n,n,t,n,n,n,n,r,r,f,f,f,f,f,f,f,f,f,f,r,r,r,r,r,r],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,r,r,n,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,n,n,n,n,n,n,n,n,n,n,n,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,n,n,n,n,n,n,n,n,n,c,c,t,t,t,t,c,t,t,t,t,t],[F,F,F,F,F,F,F,F,F,F,F,h,h,h,e,c,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,p,st,lt,ht,ft,At,m,A,A,A,A,A,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,m,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,h,h,h,h,h,t,t,t,t,t,h,h,h,h,h,h,f,e,t,t,f,f,f,f,f,f,b,b,t,t,t,e,f,f,f,f,f,f,f,f,f,f,b,b,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,A,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,t,t,t,t,t,c,n,c,c,c,c,c,c,c,c,c,c,b,c,c,c,c,c,c,c,c,c,c,c,c,c,t,c,c,c,c,c,t,c,t,c,c,t,c,c,t,c,c,c,c,c,c,c,c,c,c,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r],[n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,n,n,n,n,n,n,n,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,m,t,m,t,t,m,t,t,t,t,t,t,t,t,t,A,t,t,b,b,t,t,t,t,t,A,A,t,t,t,t,t,r,r,r,r,r,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,h],[t,t,t,A,A,A,t,t,t,t,t,b,m,b,m,m,f,f,f,f,f,f,f,f,f,f,m,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,t,t,t,t,t,t,t,t,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,t,t,t,e,e,e,e,e,e,t,t,e,e,e,e,e,e,t,t,e,e,e,e,e,e,t,t,e,e,e,t,t,t,A,A,t,t,t,A,A,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t]];class dt{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(u,a,i){if(this.sourceToTarget=[],this.targetToSource=[],!u)return"";if(It(this.sourceToTarget,this.targetToSource,u.length),!this.checkParameters(a,i))return u;a=this.inputFormat,i=this.outputFormat;let s=u;const l=jt,L=J(a.charAt(1)),T=J(i.charAt(1)),g=(a.charAt(0)==="I"?"L":a.charAt(0))+L,d=(i.charAt(0)==="I"?"L":i.charAt(0))+T,B=a.charAt(2)+i.charAt(2);l.defInFormat=g,l.defOutFormat=d,l.defSwap=B;const w=E(u,g,d,B,l);let N=!1;return i.charAt(1)==="R"?N=!0:i.charAt(1)!=="C"&&i.charAt(1)!=="D"||(N=this.checkContextual(w)==="rtl"),this.sourceToTarget=R,this.targetToSource=xt(this.sourceToTarget),P=this.targetToSource,s=a.charAt(3)===i.charAt(3)?w:i.charAt(3)==="S"?Bt(N,w):Rt(w,N,!0),this.sourceToTarget=R,this.targetToSource=P,this.levels=y,s}_inputFormatSetter(u){if(!Q.test(u))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=u}_outputFormatSetter(u){if(!Q.test(u))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=u}checkParameters(u,a){return u?this._inputFormatSetter(u):u=this.inputFormat,a?this._outputFormatSetter(a):a=this.outputFormat,u!==a}checkContextual(u){let a=D(u);if(a!=="ltr"&&a!=="rtl"){try{a=document.dir.toLowerCase()}catch{}a!=="ltr"&&a!=="rtl"&&(a="ltr")}return a}hasBidiChar(u){return Pt.test(u)}}function E(o,u,a,i,s){const l=Ut(o,{inFormat:u,outFormat:a,swap:i},s);if(l.inFormat===l.outFormat)return o;u=l.inFormat,a=l.outFormat,i=l.swap;const L=u.substring(0,1),T=u.substring(1,4),g=a.substring(0,1),d=a.substring(1,4);if(s.inFormat=u,s.outFormat=a,s.swap=i,L==="L"&&a==="VLTR"){if(T==="LTR")return s.dir=V,S(o,s);if(T==="RTL")return s.dir=I,S(o,s)}if(L==="V"&&g==="V")return s.dir=T==="RTL"?I:V,M(o,s);if(L==="L"&&a==="VRTL")return T==="LTR"?(s.dir=V,o=S(o,s)):(s.dir=I,o=S(o,s)),M(o);if(u==="VLTR"&&a==="LLTR")return s.dir=V,S(o,s);if(L==="V"&&g==="L"&&T!==d)return o=M(o),T==="RTL"?E(o,"LLTR","VLTR",i,s):E(o,"LRTL","VRTL",i,s);if(u==="VRTL"&&a==="LRTL")return E(o,"LRTL","VRTL",i,s);if(L==="L"&&g==="L"){const B=s.swap;return s.swap=B.substr(0,1)+"N",T==="RTL"?(s.dir=I,o=S(o,s),s.swap="N"+B.substr(1,2),s.dir=V,o=S(o,s)):(s.dir=V,o=S(o,s),s.swap="N"+B.substr(1,2),o=E(o,"VLTR","LRTL",s.swap,s)),o}return o}function Ut(o,u,a){if(u.inFormat===void 0&&(u.inFormat=a.defInFormat),u.outFormat===void 0&&(u.outFormat=a.defOutFormat),u.swap===void 0&&(u.swap=a.defSwap),u.inFormat===u.outFormat)return u;const i=u.inFormat.substring(0,1),s=u.outFormat.substring(0,1);let l,L=u.inFormat.substring(1,4),T=u.outFormat.substring(1,4);return L.charAt(0)==="C"&&(l=D(o),L=l==="ltr"||l==="rtl"?l.toUpperCase():u.inFormat.charAt(2)==="L"?"LTR":"RTL",u.inFormat=i+L),T.charAt(0)==="C"&&(l=D(o),l==="rtl"?T="RTL":l==="ltr"?(l=mt(o),T=l.toUpperCase()):T=u.outFormat.charAt(2)==="L"?"LTR":"RTL",u.outFormat=s+T),u}function Bt(o,u,a){if(u.length===0)return"";o===void 0&&(o=!0);const i=(u=String(u)).split("");let s=0,l=1,L=i.length;o||(s=i.length-1,l=-1,L=1);const T=Ft(i,s,l,L);let g="";for(let d=0;d<i.length;d++)St(T,T.length,d)>-1?(K(P,d,!o,-1),R.splice(d,1)):g+=i[d];return g}function Ft(o,u,a,i,s){let l=0;const L=[];let T=0;for(let g=u;g*a<i;g+=a)if(q(o[g])||O(o[g])){if(o[g]==="\u0644"&&wt(o,g+a,a,i)){o[g]=Ot(o[g+a],l===0?X:tt),g+=a,Et(o,g,a,i),L[T]=g,T++,l=0;continue}const d=o[g];l===1?o[g]=G(o,g+a,a,i)?Vt(o[g]):z(o[g],et):G(o,g+a,a,i)===!0?o[g]=z(o[g],ut):o[g]=z(o[g],rt),O(d)||(l=1),vt(d)===!0&&(l=0)}else l=0;return L}function D(o){const u=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(o);return u?u[0]<="z"?"ltr":"rtl":""}function mt(o){const u=o.split("");return u.reverse(),D(u.join(""))}function Rt(o,u,a){if(o.length===0)return"";u===void 0&&(u=!0);let i="";const s=(o=String(o)).split("");for(let l=0;l<o.length;l++){let L=!1;if(s[l]>="\uFE70"&&s[l]<"\uFEFF"){const T=o.charCodeAt(l);s[l]>="\uFEF5"&&s[l]<="\uFEFC"?(u?(l>0&&a&&s[l-1]===" "?i=i.substring(0,i.length-1)+"\u0644":(i+="\u0644",L=!0),i+=v[(T-65269)/2]):(i+=v[(T-65269)/2],i+="\u0644",l+1<o.length&&a&&s[l+1]===" "?l++:L=!0),L&&(K(P,l,!0,1),R.splice(l,0,R[l]))):i+=ot[T-65136]}else i+=s[l]}return i}function S(o,u){const a=o.split(""),i=[];return $(a,i,u),pt(a,i,u),H(2,a,i,u),H(1,a,i,u),y=i,a.join("")}function $(o,u,a){const i=o.length,s=a.dir?it:at;let l=0,L=-1;const T=[],g=[];a.hiLevel=a.dir,a.lastArabic=!1,a.hasUbatAl=!1,a.hasUbatB=!1,a.hasUbatS=!1;for(let d=0;d<i;d++)T[d]=_t(o[d]);for(let d=0;d<i;d++){const B=l,w=Nt(o,T,g,d,a);g[d]=w,l=s[B][w];const N=240&l;l&=15;const Y=s[l][kt];if(u[d]=Y,N>0)if(N===16){for(let C=L;C<d;C++)u[C]=1;L=-1}else L=-1;if(s[l][Dt])L===-1&&(L=d);else if(L>-1){for(let C=L;C<d;C++)u[C]=Y;L=-1}T[d]===p&&(u[d]=0),a.hiLevel|=Y}a.hasUbatS&&bt(T,u,i,a)}function bt(o,u,a,i){for(let s=0;s<a;s++)if(o[s]===k){u[s]=i.dir;for(let l=s-1;l>=0&&o[l]===F;l--)u[l]=i.dir}}function pt(o,u,a){if(a.hiLevel!==0&&a.swap.substr(0,1)!==a.swap.substr(1,2))for(let i=0;i<o.length;i++)u[i]===1&&(o[i]=Ct(o[i]))}function _t(o){const u=o.charCodeAt(0),a=Lt[u>>8];return a<_?a:gt[a-_][255&u]}function M(o,u){const a=o.split("");if(u){const i=[];$(a,i,u),y=i}return a.reverse(),R.reverse(),a.join("")}function St(o,u,a){for(let i=0;i<u;i++)if(o[i]===a)return i;return-1}function q(o){for(let u=0;u<Z.length;u++)if(o>=Z[u]&&o<=ct[u])return!0;return!1}function G(o,u,a,i){for(;u*a<i&&O(o[u]);)u+=a;return!!(u*a<i&&q(o[u]))}function wt(o,u,a,i){for(;u*a<i&&O(o[u]);)u+=a;let s=" ";if(!(u*a<i))return!1;s=o[u];for(let l=0;l<v.length;l++)if(v[l]===s)return!0;return!1}function H(o,u,a,i){if(i.hiLevel<o)return;if(o===1&&i.dir===I&&!i.hasUbatB)return u.reverse(),void R.reverse();const s=u.length;let l,L,T,g,d,B=0;for(;B<s;){if(a[B]>=o){for(l=B+1;l<s&&a[l]>=o;)l++;for(L=B,T=l-1;L<T;L++,T--)g=u[L],u[L]=u[T],u[T]=g,d=R[L],R[L]=R[T],R[T]=d;B=l}B++}}function Nt(o,u,a,i,s){const l=u[i];return{UBAT_L:()=>(s.lastArabic=!1,e),UBAT_R:()=>(s.lastArabic=!1,c),UBAT_ON:()=>t,UBAT_AN:()=>U,UBAT_EN:()=>s.lastArabic?U:f,UBAT_AL:()=>(s.lastArabic=!0,s.hasUbatAl=!0,c),UBAT_WS:()=>t,UBAT_CS:()=>{let L,T;return i<1||i+1>=u.length||(L=a[i-1])!==f&&L!==U||(T=u[i+1])!==f&&T!==U?t:(s.lastArabic&&(T=U),T===L?T:t)},UBAT_ES:()=>(i>0?a[i-1]:p)===f&&i+1<u.length&&u[i+1]===f?f:t,UBAT_ET:()=>{if(i>0&&a[i-1]===f)return f;if(s.lastArabic)return t;let L=i+1;const T=u.length;for(;L<T&&u[L]===A;)L++;return L<T&&u[L]===f?f:t},UBAT_NSM:()=>{if(s.inFormat==="VLTR"){const L=u.length;let T=i+1;for(;T<L&&u[T]===n;)T++;if(T<L){const g=o[i].charCodeAt(0),d=g>=1425&&g<=2303||g===64286,B=u[T];if(d&&(B===c||B===r))return c}}return i<1||u[i-1]===p?t:a[i-1]},UBAT_B:()=>(s.lastArabic=!0,s.hasUbatB=!0,s.dir),UBAT_S:()=>(s.hasUbatS=!0,t),UBAT_LRE:()=>(s.lastArabic=!1,t),UBAT_RLE:()=>(s.lastArabic=!1,t),UBAT_LRO:()=>(s.lastArabic=!1,t),UBAT_RLO:()=>(s.lastArabic=!1,t),UBAT_PDF:()=>(s.lastArabic=!1,t),UBAT_BN:()=>t}[Tt[l]]()}function Ct(o){let u,a=0,i=x.length-1;for(;a<=i;)if(u=Math.floor((a+i)/2),o<x[u][0])i=u-1;else{if(!(o>x[u][0]))return x[u][1];a=u+1}return o}function vt(o){for(let u=0;u<W.length;u++)if(W[u]===o)return!0;return!1}function Vt(o){for(let u=0;u<j.length;u++)if(o===j[u])return nt[u];return o}function z(o,u){for(let a=0;a<j.length;a++)if(o===j[a])return u[a];return o}function O(o){return o>="\u064B"&&o<="\u0655"}function J(o){return o==="L"?"LTR":o==="R"?"RTL":o==="C"?"CLR":o==="D"?"CRL":""}function Et(o,u,a,i){for(;u*a<i&&O(o[u]);)u+=a;return u*a<i&&(o[u]=" ",!0)}function Ot(o,u){for(let a=0;a<v.length;a++)if(o===v[a])return u[a];return o}function It(o,u,a){R=[],y=[];for(let i=0;i<a;i++)o[i]=i,u[i]=i,R[i]=i}function xt(o){const u=new Array(o.length);for(let a=0;a<o.length;a++)u[o[a]]=a;return u}function K(o,u,a,i){for(let s=0;s<o.length;s++)(o[s]>u||!a&&o[s]===u)&&(o[s]+=i)}let R=[],P=[],y=[];const jt={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},kt=5,Dt=6,V=0,I=1,Q=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,Pt=/[\u0591-\u06ff\ufb1d-\ufefc]/;export{dt as C};
