import{h as z,dm as x,a2 as J,hv as Q,am as V,an as W,dh as C,hw as D,hx as E,hy as G,ge as K,hz as L,d$ as d,O as o,P as l,bV as R,aI as X,hA as Y,aJ as Z,dg as h,hB as _,cl as tt,g1 as st,Q as rt}from"./main-C02UbYD7.js";import{e as M}from"./mat4f64-Dn1WEGBx.js";import{v as w,I as y,x as et}from"./quat-WfNBaEox.js";import{e as g}from"./quatf64-DxbQqBtW.js";class A{constructor(s,r,e){this.assetName=s,this.assetMimeType=r,this.parts=e}equals(s){return this===s||this.assetName===s.assetName&&this.assetMimeType===s.assetMimeType&&z(this.parts,s.parts,(r,e)=>r.equals(e))}isOnService(s){return this.parts.every(r=>r.isOnService(s))}makeHash(){let s="";for(const r of this.parts)s+=r.partHash;return s}async toBlob(s){const{parts:r}=this;if(r.length===1)return r[0].toBlob(s);const e=await Promise.all(r.map(c=>c.toBlob(s)));return x(s),new Blob(e)}}class at{constructor(s,r){this.partUrl=s,this.partHash=r}equals(s){return this===s||this.partUrl===s.partUrl&&this.partHash===s.partHash}isOnService(s){return this.partUrl.startsWith(`${s.path}/assets/`)}async toBlob(s){const{data:r}=await J(this.partUrl,{responseType:"blob"});return x(s),r}}function nt(t){return ot(t?.source)}function T(t){return Array.isArray(t)?t.every(s=>s instanceof A):!1}const B=/^(model\/gltf\+json)|(model\/gltf-binary)$/,j=/\.(gltf|glb)/i;function ot(t){return t?Array.isArray(t)?t.some(q):q(t):!1}function q(t){if(t instanceof File){const{type:s,name:r}=t;return B.test(s)||j.test(r)}return B.test(t.assetMimeType)||j.test(t.assetName)}function it(t,s){if(!t)return!1;const{source:r}=t;return ut(r,s)}function lt(t,s){if(t===s)return!0;const{source:r}=t,{source:e}=s;if(r===e)return!0;if(T(r)&&T(e)){if(r.length!==e.length)return!1;const c=(i,v)=>i.assetName<v.assetName?-1:i.assetName>v.assetName?1:0,b=[...r].sort(c),P=[...e].sort(c);for(let i=0;i<b.length;++i)if(!b[i].equals(P[i]))return!1;return!0}return!1}function ut(t,s){if(Array.isArray(t)){const r=t;return r.length>0&&r.every(e=>H(e,s))}return H(t,s)}function H(t,s){return t instanceof A&&t.isOnService(s)}function ct(t,s){return t instanceof File?Q(t,s):V(t.assetMimeType,s)??W(t.assetName,s)}function ht(t){return Array.isArray(t)?t:[t]}function pt(t){return!!t.original}function n(t=I){return[t[0],t[1],t[2],t[3]]}function p(t,s,r=n()){return C(r,t),r[3]=s,r}function ft(t,s=n()){const r=L(u,t);return U(s,d(w(s,r))),s}function O(t,s,r=n()){return y(u,t,f(t)),y(S,s,f(s)),et(u,S,u),U(r,d(w(r,u)))}function mt(t,s,r,e=n()){return p(D,t,m),p(E,s,$),p(G,r,k),O(m,$,m),O(m,k,e),e}function yt(t){return t}function gt(t){return t[3]}function f(t){return K(t[3])}function U(t,s){return t[3]=s,t}const I=[0,0,1,0],u=g(),S=g();n();const m=n(),$=n(),k=n();var N;let a=N=class extends R{constructor(t){super(t),this.translation=X(),this.rotationAxis=Y(I),this.rotationAngle=0,this.scale=Z(1,1,1)}get rotation(){return p(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=h(t),this.rotationAngle=gt(t)}get localMatrix(){const t=M();return y(F,this.rotation,f(this.rotation)),_(t,F,this.translation,this.scale),t}get localMatrixInverse(){return tt(M(),this.localMatrix)}equals(t){return this===t||t!=null&&st(this.localMatrix,t.localMatrix)}clone(){const t={translation:h(this.translation),rotationAxis:h(this.rotationAxis),rotationAngle:this.rotationAngle,scale:h(this.scale)};return new N(t)}};o([l({type:[Number],nonNullable:!0,json:{write:!0}})],a.prototype,"translation",void 0),o([l({type:[Number],nonNullable:!0,json:{write:!0}})],a.prototype,"rotationAxis",void 0),o([l({type:Number,nonNullable:!0,json:{write:!0}})],a.prototype,"rotationAngle",void 0),o([l({type:[Number],nonNullable:!0,json:{write:!0}})],a.prototype,"scale",void 0),o([l()],a.prototype,"rotation",null),o([l()],a.prototype,"localMatrix",null),o([l()],a.prototype,"localMatrixInverse",null),a=N=o([rt("esri.geometry.support.MeshTransform")],a);const F=g(),At=a;export{ht as A,At as N,ct as a,n as b,f as c,yt as d,it as h,A as i,ft as k,at as o,nt as u,pt as v,mt as w,lt as y};
