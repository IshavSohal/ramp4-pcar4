import{hu as Ae,cB as Le,cA as x,cE as Ce,cF as Re,ex as Z,cC as kt,cG as Pt,kh as Dt}from"./main-C02UbYD7.js";import{g as At,a as Be,t as pe,o as Lt,q as Ct,y as Rt,f as Bt}from"./dom-BHTTQ4_z.js";import{c as Ot,d as Ht,e as Oe}from"./locale-CSB_Olw5.js";import{s as He,a as Me,c as Te}from"./loadable-gPk-VuYN.js";import{d as Ie}from"./action-Ca3B4Enr.js";import{d as Se}from"./icon-DB266cbD.js";import{d as Fe}from"./loader-CoZkztYW.js";import{d as Mt}from"./debounce-27Hmkkyg.js";import{d as me,a as ze,c as Tt,u as It}from"./focusTrapComponent-dLgtUMwA.js";import{o as $e}from"./openCloseComponent-Bv6viTE5.js";import{u as St,c as Ft,s as zt,d as $t}from"./t9n-C40ZCanu.js";import{c as Wt}from"./observers-f0Gdl5YX.js";import{g as _t}from"./component-CWGf1hug.js";function We(e,t){return(e+t)%t}const _e=["top","right","bottom","left"],Ne=["start","end"],Ve=_e.reduce((e,t)=>e.concat(t,t+"-"+Ne[0],t+"-"+Ne[1]),[]),K=Math.min,U=Math.max,ie=Math.round,oe=Math.floor,_=e=>({x:e,y:e}),Nt={left:"right",right:"left",bottom:"top",top:"bottom"},Vt={start:"end",end:"start"};function ge(e,t,n){return U(e,K(t,n))}function j(e,t){return typeof e=="function"?e(t):e}function $(e){return e.split("-")[0]}function I(e){return e.split("-")[1]}function Ue(e){return e==="x"?"y":"x"}function ve(e){return e==="y"?"height":"width"}function re(e){return["top","bottom"].includes($(e))?"y":"x"}function ye(e){return Ue(re(e))}function je(e,t,n){n===void 0&&(n=!1);const i=I(e),o=ye(e),a=ve(o);let r=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(r=se(r)),[r,se(r)]}function Ut(e){const t=se(e);return[ae(e),t,ae(t)]}function ae(e){return e.replace(/start|end/g,t=>Vt[t])}function jt(e,t,n){const i=["left","right"],o=["right","left"],a=["top","bottom"],r=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:i:t?i:o;case"left":case"right":return t?a:r;default:return[]}}function qt(e,t,n,i){const o=I(e);let a=jt($(e),n==="start",i);return o&&(a=a.map(r=>r+"-"+o),t&&(a=a.concat(a.map(ae)))),a}function se(e){return e.replace(/left|right|bottom|top/g,t=>Nt[t])}function Kt(e){return{top:0,right:0,bottom:0,left:0,...e}}function qe(e){return typeof e!="number"?Kt(e):{top:e,right:e,bottom:e,left:e}}function le(e){const{x:t,y:n,width:i,height:o}=e;return{width:i,height:o,top:n,left:t,right:t+i,bottom:n+o,x:t,y:n}}function Ke(e,t,n){let{reference:i,floating:o}=e;const a=re(t),r=ye(t),s=ve(r),l=$(t),c=a==="y",f=i.x+i.width/2-o.width/2,u=i.y+i.height/2-o.height/2,g=i[s]/2-o[s]/2;let d;switch(l){case"top":d={x:f,y:i.y-o.height};break;case"bottom":d={x:f,y:i.y+i.height};break;case"right":d={x:i.x+i.width,y:u};break;case"left":d={x:i.x-o.width,y:u};break;default:d={x:i.x,y:i.y}}switch(I(t)){case"start":d[r]-=g*(n&&c?-1:1);break;case"end":d[r]+=g*(n&&c?-1:1);break}return d}const Yt=async(e,t,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:a=[],platform:r}=n,s=a.filter(Boolean),l=await(r.isRTL==null?void 0:r.isRTL(t));let c=await r.getElementRects({reference:e,floating:t,strategy:o}),{x:f,y:u}=Ke(c,i,l),g=i,d={},h=0;for(let p=0;p<s.length;p++){const{name:v,fn:m}=s[p],{x:y,y:b,data:w,reset:E}=await m({x:f,y:u,initialPlacement:i,placement:g,strategy:o,middlewareData:d,rects:c,platform:r,elements:{reference:e,floating:t}});f=y??f,u=b??u,d={...d,[v]:{...d[v],...w}},E&&h<=50&&(h++,typeof E=="object"&&(E.placement&&(g=E.placement),E.rects&&(c=E.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:o}):E.rects),{x:f,y:u}=Ke(c,g,l)),p=-1)}return{x:f,y:u,placement:g,strategy:o,middlewareData:d}};async function J(e,t){var n;t===void 0&&(t={});const{x:i,y:o,platform:a,rects:r,elements:s,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:f="viewport",elementContext:u="floating",altBoundary:g=!1,padding:d=0}=j(t,e),h=qe(d),p=s[g?u==="floating"?"reference":"floating":u],v=le(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(p)))==null||n?p:p.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(s.floating)),boundary:c,rootBoundary:f,strategy:l})),m=u==="floating"?{x:i,y:o,width:r.floating.width,height:r.floating.height}:r.reference,y=await(a.getOffsetParent==null?void 0:a.getOffsetParent(s.floating)),b=await(a.isElement==null?void 0:a.isElement(y))?await(a.getScale==null?void 0:a.getScale(y))||{x:1,y:1}:{x:1,y:1},w=le(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:m,offsetParent:y,strategy:l}):m);return{top:(v.top-w.top+h.top)/b.y,bottom:(w.bottom-v.bottom+h.bottom)/b.y,left:(v.left-w.left+h.left)/b.x,right:(w.right-v.right+h.right)/b.x}}const Xt=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:i,placement:o,rects:a,platform:r,elements:s,middlewareData:l}=t,{element:c,padding:f=0}=j(e,t)||{};if(c==null)return{};const u=qe(f),g={x:n,y:i},d=ye(o),h=ve(d),p=await r.getDimensions(c),v=d==="y",m=v?"top":"left",y=v?"bottom":"right",b=v?"clientHeight":"clientWidth",w=a.reference[h]+a.reference[d]-g[d]-a.floating[h],E=g[d]-a.reference[d],D=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c));let P=D?D[b]:0;(!P||!await(r.isElement==null?void 0:r.isElement(D)))&&(P=s.floating[b]||a.floating[h]);const R=w/2-E/2,k=P/2-p[h]/2-1,B=K(u[m],k),V=K(u[y],k),A=B,Q=P-p[h]-V,L=P/2-p[h]/2+R,M=ge(A,L,Q),T=!l.arrow&&I(o)!=null&&L!==M&&a.reference[h]/2-(L<A?B:V)-p[h]/2<0,z=T?L<A?L-A:L-Q:0;return{[d]:g[d]+z,data:{[d]:M,centerOffset:L-M-z,...T&&{alignmentOffset:z}},reset:T}}});function Gt(e,t,n){return(e?[...n.filter(i=>I(i)===e),...n.filter(i=>I(i)!==e)]:n.filter(i=>$(i)===i)).filter(i=>e?I(i)===e||(t?ae(i)!==i:!1):!0)}const Qt=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,i,o;const{rects:a,middlewareData:r,placement:s,platform:l,elements:c}=t,{crossAxis:f=!1,alignment:u,allowedPlacements:g=Ve,autoAlignment:d=!0,...h}=j(e,t),p=u!==void 0||g===Ve?Gt(u||null,d,g):g,v=await J(t,h),m=((n=r.autoPlacement)==null?void 0:n.index)||0,y=p[m];if(y==null)return{};const b=je(y,a,await(l.isRTL==null?void 0:l.isRTL(c.floating)));if(s!==y)return{reset:{placement:p[0]}};const w=[v[$(y)],v[b[0]],v[b[1]]],E=[...((i=r.autoPlacement)==null?void 0:i.overflows)||[],{placement:y,overflows:w}],D=p[m+1];if(D)return{data:{index:m+1,overflows:E},reset:{placement:D}};const P=E.map(k=>{const B=I(k.placement);return[k.placement,B&&f?k.overflows.slice(0,2).reduce((V,A)=>V+A,0):k.overflows[0],k.overflows]}).sort((k,B)=>k[1]-B[1]),R=((o=P.filter(k=>k[2].slice(0,I(k[0])?2:3).every(B=>B<=0))[0])==null?void 0:o[0])||P[0][0];return R!==s?{data:{index:m+1,overflows:E},reset:{placement:R}}:{}}}},Zt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,i;const{placement:o,middlewareData:a,rects:r,initialPlacement:s,platform:l,elements:c}=t,{mainAxis:f=!0,crossAxis:u=!0,fallbackPlacements:g,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:p=!0,...v}=j(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const m=$(o),y=$(s)===s,b=await(l.isRTL==null?void 0:l.isRTL(c.floating)),w=g||(y||!p?[se(s)]:Ut(s));!g&&h!=="none"&&w.push(...qt(s,p,h,b));const E=[s,...w],D=await J(t,v),P=[];let R=((i=a.flip)==null?void 0:i.overflows)||[];if(f&&P.push(D[m]),u){const A=je(o,r,b);P.push(D[A[0]],D[A[1]])}if(R=[...R,{placement:o,overflows:P}],!P.every(A=>A<=0)){var k,B;const A=(((k=a.flip)==null?void 0:k.index)||0)+1,Q=E[A];if(Q)return{data:{index:A,overflows:R},reset:{placement:Q}};let L=(B=R.filter(M=>M.overflows[0]<=0).sort((M,T)=>M.overflows[1]-T.overflows[1])[0])==null?void 0:B.placement;if(!L)switch(d){case"bestFit":{var V;const M=(V=R.map(T=>[T.placement,T.overflows.filter(z=>z>0).reduce((z,Et)=>z+Et,0)]).sort((T,z)=>T[1]-z[1])[0])==null?void 0:V[0];M&&(L=M);break}case"initialPlacement":L=s;break}if(o!==L)return{reset:{placement:L}}}return{}}}};function Ye(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Xe(e){return _e.some(t=>e[t]>=0)}const Jt=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:i="referenceHidden",...o}=j(e,t);switch(i){case"referenceHidden":{const a=await J(t,{...o,elementContext:"reference"}),r=Ye(a,n.reference);return{data:{referenceHiddenOffsets:r,referenceHidden:Xe(r)}}}case"escaped":{const a=await J(t,{...o,altBoundary:!0}),r=Ye(a,n.floating);return{data:{escapedOffsets:r,escaped:Xe(r)}}}default:return{}}}}};async function en(e,t){const{placement:n,platform:i,elements:o}=e,a=await(i.isRTL==null?void 0:i.isRTL(o.floating)),r=$(n),s=I(n),l=re(n)==="y",c=["left","top"].includes(r)?-1:1,f=a&&l?-1:1,u=j(t,e);let{mainAxis:g,crossAxis:d,alignmentAxis:h}=typeof u=="number"?{mainAxis:u,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...u};return s&&typeof h=="number"&&(d=s==="end"?h*-1:h),l?{x:d*f,y:g*c}:{x:g*c,y:d*f}}const tn=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,i;const{x:o,y:a,placement:r,middlewareData:s}=t,l=await en(t,e);return r===((n=s.offset)==null?void 0:n.placement)&&(i=s.arrow)!=null&&i.alignmentOffset?{}:{x:o+l.x,y:a+l.y,data:{...l,placement:r}}}}},nn=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:i,placement:o}=t,{mainAxis:a=!0,crossAxis:r=!1,limiter:s={fn:v=>{let{x:m,y}=v;return{x:m,y}}},...l}=j(e,t),c={x:n,y:i},f=await J(t,l),u=re($(o)),g=Ue(u);let d=c[g],h=c[u];if(a){const v=g==="y"?"top":"left",m=g==="y"?"bottom":"right",y=d+f[v],b=d-f[m];d=ge(y,d,b)}if(r){const v=u==="y"?"top":"left",m=u==="y"?"bottom":"right",y=h+f[v],b=h-f[m];h=ge(y,h,b)}const p=s.fn({...t,[g]:d,[u]:h});return{...p,data:{x:p.x-n,y:p.y-i}}}}};function ce(){return typeof window<"u"}function Y(e){return Ge(e)?(e.nodeName||"").toLowerCase():"#document"}function C(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function W(e){var t;return(t=(Ge(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Ge(e){return ce()?e instanceof Node||e instanceof C(e).Node:!1}function O(e){return ce()?e instanceof Element||e instanceof C(e).Element:!1}function S(e){return ce()?e instanceof HTMLElement||e instanceof C(e).HTMLElement:!1}function Qe(e){return!ce()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof C(e).ShadowRoot}function ee(e){const{overflow:t,overflowX:n,overflowY:i,display:o}=H(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+n)&&!["inline","contents"].includes(o)}function on(e){return["table","td","th"].includes(Y(e))}function de(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function fe(e){const t=be(),n=O(e)?H(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function rn(e){let t=N(e);for(;S(t)&&!X(t);){if(fe(t))return t;if(de(t))return null;t=N(t)}return null}function be(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function X(e){return["html","body","#document"].includes(Y(e))}function H(e){return C(e).getComputedStyle(e)}function ue(e){return O(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function N(e){if(Y(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Qe(e)&&e.host||W(e);return Qe(t)?t.host:t}function Ze(e){const t=N(e);return X(t)?e.ownerDocument?e.ownerDocument.body:e.body:S(t)&&ee(t)?t:Ze(t)}function te(e,t,n){var i;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=Ze(e),a=o===((i=e.ownerDocument)==null?void 0:i.body),r=C(o);if(a){const s=an(r);return t.concat(r,r.visualViewport||[],ee(o)?o:[],s&&n?te(s):[])}return t.concat(o,te(o,[],n))}function an(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Je(e){const t=H(e);let n=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const o=S(e),a=o?e.offsetWidth:n,r=o?e.offsetHeight:i,s=ie(n)!==a||ie(i)!==r;return s&&(n=a,i=r),{width:n,height:i,$:s}}function we(e){return O(e)?e:e.contextElement}function G(e){const t=we(e);if(!S(t))return _(1);const n=t.getBoundingClientRect(),{width:i,height:o,$:a}=Je(t);let r=(a?ie(n.width):n.width)/i,s=(a?ie(n.height):n.height)/o;return(!r||!Number.isFinite(r))&&(r=1),(!s||!Number.isFinite(s))&&(s=1),{x:r,y:s}}const sn=_(0);function et(e){const t=C(e);return!be()||!t.visualViewport?sn:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ln(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==C(e)?!1:t}function q(e,t,n,i){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=we(e);let r=_(1);t&&(i?O(i)&&(r=G(i)):r=G(e));const s=ln(a,n,i)?et(a):_(0);let l=(o.left+s.x)/r.x,c=(o.top+s.y)/r.y,f=o.width/r.x,u=o.height/r.y;if(a){const g=C(a),d=i&&O(i)?C(i):i;let h=g,p=h.frameElement;for(;p&&i&&d!==h;){const v=G(p),m=p.getBoundingClientRect(),y=H(p),b=m.left+(p.clientLeft+parseFloat(y.paddingLeft))*v.x,w=m.top+(p.clientTop+parseFloat(y.paddingTop))*v.y;l*=v.x,c*=v.y,f*=v.x,u*=v.y,l+=b,c+=w,h=C(p),p=h.frameElement}}return le({width:f,height:u,x:l,y:c})}function cn(e){let{elements:t,rect:n,offsetParent:i,strategy:o}=e;const a=o==="fixed",r=W(i),s=t?de(t.floating):!1;if(i===r||s&&a)return n;let l={scrollLeft:0,scrollTop:0},c=_(1);const f=_(0),u=S(i);if((u||!u&&!a)&&((Y(i)!=="body"||ee(r))&&(l=ue(i)),S(i))){const g=q(i);c=G(i),f.x=g.x+i.clientLeft,f.y=g.y+i.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+f.x,y:n.y*c.y-l.scrollTop*c.y+f.y}}function dn(e){return Array.from(e.getClientRects())}function tt(e){return q(W(e)).left+ue(e).scrollLeft}function fn(e){const t=W(e),n=ue(e),i=e.ownerDocument.body,o=U(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),a=U(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let r=-n.scrollLeft+tt(e);const s=-n.scrollTop;return H(i).direction==="rtl"&&(r+=U(t.clientWidth,i.clientWidth)-o),{width:o,height:a,x:r,y:s}}function un(e,t){const n=C(e),i=W(e),o=n.visualViewport;let a=i.clientWidth,r=i.clientHeight,s=0,l=0;if(o){a=o.width,r=o.height;const c=be();(!c||c&&t==="fixed")&&(s=o.offsetLeft,l=o.offsetTop)}return{width:a,height:r,x:s,y:l}}function hn(e,t){const n=q(e,!0,t==="fixed"),i=n.top+e.clientTop,o=n.left+e.clientLeft,a=S(e)?G(e):_(1),r=e.clientWidth*a.x,s=e.clientHeight*a.y,l=o*a.x,c=i*a.y;return{width:r,height:s,x:l,y:c}}function nt(e,t,n){let i;if(t==="viewport")i=un(e,n);else if(t==="document")i=fn(W(e));else if(O(t))i=hn(t,n);else{const o=et(e);i={...t,x:t.x-o.x,y:t.y-o.y}}return le(i)}function it(e,t){const n=N(e);return n===t||!O(n)||X(n)?!1:H(n).position==="fixed"||it(n,t)}function pn(e,t){const n=t.get(e);if(n)return n;let i=te(e,[],!1).filter(s=>O(s)&&Y(s)!=="body"),o=null;const a=H(e).position==="fixed";let r=a?N(e):e;for(;O(r)&&!X(r);){const s=H(r),l=fe(r);!l&&s.position==="fixed"&&(o=null),(a?!l&&!o:!l&&s.position==="static"&&o&&["absolute","fixed"].includes(o.position)||ee(r)&&!l&&it(e,r))?i=i.filter(c=>c!==r):o=s,r=N(r)}return t.set(e,i),i}function mn(e){let{element:t,boundary:n,rootBoundary:i,strategy:o}=e;const a=[...n==="clippingAncestors"?de(t)?[]:pn(t,this._c):[].concat(n),i],r=a[0],s=a.reduce((l,c)=>{const f=nt(t,c,o);return l.top=U(f.top,l.top),l.right=K(f.right,l.right),l.bottom=K(f.bottom,l.bottom),l.left=U(f.left,l.left),l},nt(t,r,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}}function gn(e){const{width:t,height:n}=Je(e);return{width:t,height:n}}function vn(e,t,n){const i=S(t),o=W(t),a=n==="fixed",r=q(e,!0,a,t);let s={scrollLeft:0,scrollTop:0};const l=_(0);if(i||!i&&!a)if((Y(t)!=="body"||ee(o))&&(s=ue(t)),i){const u=q(t,!0,a,t);l.x=u.x+t.clientLeft,l.y=u.y+t.clientTop}else o&&(l.x=tt(o));const c=r.left+s.scrollLeft-l.x,f=r.top+s.scrollTop-l.y;return{x:c,y:f,width:r.width,height:r.height}}function xe(e){return H(e).position==="static"}function ot(e,t){return!S(e)||H(e).position==="fixed"?null:t?t(e):e.offsetParent}function rt(e,t){const n=C(e);if(de(e))return n;if(!S(e)){let o=N(e);for(;o&&!X(o);){if(O(o)&&!xe(o))return o;o=N(o)}return n}let i=ot(e,t);for(;i&&on(i)&&xe(i);)i=ot(i,t);return i&&X(i)&&xe(i)&&!fe(i)?n:i||rn(e)||n}const yn=async function(e){const t=this.getOffsetParent||rt,n=this.getDimensions,i=await n(e.floating);return{reference:vn(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function bn(e){return H(e).direction==="rtl"}const Ee={convertOffsetParentRelativeRectToViewportRelativeRect:cn,getDocumentElement:W,getClippingRect:mn,getOffsetParent:rt,getElementRects:yn,getClientRects:dn,getDimensions:gn,getScale:G,isElement:O,isRTL:bn};function wn(e,t){let n=null,i;const o=W(e);function a(){var s;clearTimeout(i),(s=n)==null||s.disconnect(),n=null}function r(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),a();const{left:c,top:f,width:u,height:g}=e.getBoundingClientRect();if(s||t(),!u||!g)return;const d=oe(f),h=oe(o.clientWidth-(c+u)),p=oe(o.clientHeight-(f+g)),v=oe(c),m={rootMargin:-d+"px "+-h+"px "+-p+"px "+-v+"px",threshold:U(0,K(1,l))||1};let y=!0;function b(w){const E=w[0].intersectionRatio;if(E!==l){if(!y)return r();E?r(!1,E):i=setTimeout(()=>{r(!1,1e-7)},1e3)}y=!1}try{n=new IntersectionObserver(b,{...m,root:o.ownerDocument})}catch{n=new IntersectionObserver(b,m)}n.observe(e)}return r(!0),a}function xn(e,t,n,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=i,c=we(e),f=o||a?[...c?te(c):[],...te(t)]:[];f.forEach(m=>{o&&m.addEventListener("scroll",n,{passive:!0}),a&&m.addEventListener("resize",n)});const u=c&&s?wn(c,n):null;let g=-1,d=null;r&&(d=new ResizeObserver(m=>{let[y]=m;y&&y.target===c&&d&&(d.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var b;(b=d)==null||b.observe(t)})),n()}),c&&!l&&d.observe(c),d.observe(t));let h,p=l?q(e):null;l&&v();function v(){const m=q(e);p&&(m.x!==p.x||m.y!==p.y||m.width!==p.width||m.height!==p.height)&&n(),p=m,h=requestAnimationFrame(v)}return n(),()=>{var m;f.forEach(y=>{o&&y.removeEventListener("scroll",n),a&&y.removeEventListener("resize",n)}),u?.(),(m=d)==null||m.disconnect(),d=null,l&&cancelAnimationFrame(h)}}const En=tn,kn=Qt,Pn=nn,at=Zt,Dn=Jt,An=Xt,Ln=(e,t,n)=>{const i=new Map,o={platform:Ee,...n},a={...o.platform,_c:i};return Yt(e,t,{...o,platform:a})};function Cn(e){return Rn(e)}function ke(e){return e.assignedSlot?e.assignedSlot:e.parentNode instanceof ShadowRoot?e.parentNode.host:e.parentNode}function Rn(e){for(let t=e;t;t=ke(t))if(t instanceof Element&&getComputedStyle(t).display==="none")return null;for(let t=ke(e);t;t=ke(t)){if(!(t instanceof Element))continue;const n=getComputedStyle(t);if(n.display!=="contents"&&(n.position!=="static"||fe(n)||t.tagName==="BODY"))return t}return null}(function(){if(Le()){const e=Ee.getOffsetParent;Ee.getOffsetParent=t=>e(t,Cn)}})();function st(e){const t=window.devicePixelRatio||1;return Math.round(e*t)/t}const lt=async(e,{referenceEl:t,floatingEl:n,overlayPositioning:i="absolute",placement:o,flipDisabled:a,flipPlacements:r,offsetDistance:s,offsetSkidding:l,arrowEl:c,type:f})=>{if(!t||!n)return null;const u=At(n)==="rtl",{x:g,y:d,placement:h,strategy:p,middlewareData:v}=await Ln(t,n,{strategy:i,placement:o==="auto"||o==="auto-start"||o==="auto-end"?void 0:ft(o,u),middleware:Hn({placement:o,flipDisabled:a,flipPlacements:r?.map(w=>ft(w,u)),offsetDistance:s,offsetSkidding:l,arrowEl:c,type:f})});if(c&&v.arrow){const{x:w,y:E}=v.arrow,D=h.split("-")[0],P=w!=null?"left":"top",R=Sn[D],k={left:"",top:"",bottom:"",right:""};"floatingLayout"in e&&(e.floatingLayout=D==="left"||D==="right"?"horizontal":"vertical"),Object.assign(c.style,{...k,[P]:`${P=="left"?w:E}px`,[D]:"100%",transform:R})}const m=v.hide?.referenceHidden?"hidden":null,y=m?"none":null;n.setAttribute(Bn,h);const{open:b}=e;Object.assign(n.style,{visibility:m,pointerEvents:y,position:p,transform:b?`translate(${st(g)}px,${st(d)}px)`:"",top:0,left:0})},Bn="data-placement",ct=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end","leading","trailing","leading-start","leading-end","trailing-start","trailing-end"],On="bottom-end",dt={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active",arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"};function Hn({placement:e,flipDisabled:t,flipPlacements:n,offsetDistance:i,offsetSkidding:o,arrowEl:a,type:r}){const s=[Pn(),Dn()];if(r==="menu")return[...s,at({fallbackPlacements:n||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})];if(r==="popover"||r==="tooltip"){const l=[...s,En({mainAxis:typeof i=="number"?i:0,crossAxis:typeof o=="number"?o:0})];return e==="auto"||e==="auto-start"||e==="auto-end"?l.push(kn({alignment:e==="auto-start"?"start":e==="auto-end"?"end":null})):t||l.push(at(n?{fallbackPlacements:n}:{})),a&&l.push(An({element:a})),l}return[]}function Mn(e,t){const n=e.filter(i=>ct.includes(i));return n.length!==e.length&&console.warn(`${t.tagName}: Invalid value found in: flipPlacements. Try any of these: ${ct.map(i=>`"${i}"`).join(", ").trim()}`,{el:t}),n}function ft(e,t=!1){const n=["left","right"];return t&&n.reverse(),e.replace(/leading/gi,n[0]).replace(/trailing/gi,n[1])}async function Tn(e,t,n=!1){if(!(!e.open||!t.floatingEl||!t.referenceEl)){if(!ne.get(e))return ut(e,t.referenceEl,t.floatingEl);await(n?In(e):lt)(e,t)}}function In(e){let t=he.get(e);return t||(t=Mt(lt,Ae.reposition,{leading:!0,maxWait:Ae.reposition}),he.set(e,t),t)}const Sn={top:"",left:"rotate(-90deg)",bottom:"rotate(180deg)",right:"rotate(90deg)"},ne=new WeakMap,he=new WeakMap;async function ut(e,t,n){if(!n.isConnected)return;const i=Le()?xn:(r,s,l)=>(l(),()=>{});ne.set(e,{state:"pending"});let o;const a=i(t,n,()=>{const r=e.reposition();o||(o=r)});return ne.set(e,{state:"active",cleanUp:a}),o}async function Fn(e,t,n){if(!(!n||!t)&&(ht(e,t,n),Object.assign(n.style,{visibility:"hidden",pointerEvents:"none",position:e.overlayPositioning}),!!e.open))return ut(e,t,n)}function ht(e,t,n){if(!n||!t)return;const i=ne.get(e);i?.state==="active"&&i.cleanUp(),ne.delete(e),he.get(e)?.cancel(),he.delete(e)}const pt=4,zn=Math.ceil(Math.hypot(pt,pt)),mt=(e,t)=>{const n=e.level?`h${e.level}`:"div";return delete e.level,x(n,{class:e.class,key:e.key},t)},gt={arrow:"calcite-floating-ui-arrow",arrowStroke:"calcite-floating-ui-arrow__stroke"},$n={width:12,height:6,strokeWidth:1},Wn=({floatingLayout:e,key:t,ref:n})=>{const{width:i,height:o,strokeWidth:a}=$n,r=i/2,s=e==="vertical",l=`M0,0 H${i} L${i-r},${o} Q${r},${o} ${r},${o} Z`;return x("svg",{"aria-hidden":"true",class:gt.arrow,height:i,key:t,ref:n,viewBox:`0 0 ${i} ${i+(s?0:a)}`,width:i+(s?a:0)},a>0&&x("path",{class:gt.arrowStroke,d:l,fill:"none","stroke-width":a+1}),x("path",{d:l,stroke:"none"}))};class _n{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=t=>{const{registeredElements:n}=this,i=t.find(o=>n.has(o));return n.get(i)},this.togglePopovers=t=>{const n=t.composedPath(),i=this.queryPopover(n);i&&!i.triggerDisabled&&(i.open=!i.open),Array.from(this.registeredElements.values()).filter(o=>o!==i&&o.autoClose&&o.open&&!n.includes(o)).forEach(o=>o.open=!1)},this.keyDownHandler=t=>{t.defaultPrevented||(t.key==="Escape"?this.closeAllPopovers():Oe(t.key)&&this.togglePopovers(t))},this.clickHandler=t=>{Rt(t)||this.togglePopovers(t)}}registerElement(t,n){this.registeredElementCount++,this.registeredElements.set(t,n),this.registeredElementCount===1&&this.addListeners()}unregisterElement(t){this.registeredElements.delete(t)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(t=>t.open=!1)}addListeners(){window.addEventListener("click",this.clickHandler),window.addEventListener("keydown",this.keyDownHandler)}removeListeners(){window.removeEventListener("click",this.clickHandler),window.removeEventListener("keydown",this.keyDownHandler)}}const F={container:"container",imageContainer:"image-container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContainer:"headerContainer",headerContent:"header-content",heading:"heading"},Nn="auto",vt="aria-controls",yt="aria-expanded",Vn=":host{--calcite-floating-ui-z-index:var(--calcite-popover-z-index, var(--calcite-z-index-popup));display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:inset, left, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:var(--calcite-z-index);border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{inset-block-start:-5px}:host([data-placement^=top]) .calcite-floating-ui-anim{inset-block-start:5px}:host([data-placement^=left]) .calcite-floating-ui-anim{left:5px}:host([data-placement^=right]) .calcite-floating-ui-anim{left:-5px}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;inset-block:0;left:0}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.calcite-floating-ui-arrow{pointer-events:none;position:absolute;z-index:calc(var(--calcite-z-index) * -1);fill:var(--calcite-color-foreground-1)}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-color-border-3)}:host([scale=s]) .heading{padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding-inline:1.25rem;padding-block:1rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host{pointer-events:none}:host([open]){pointer-events:initial}.calcite-floating-ui-anim{border-width:1px;border-style:solid;background-color:var(--calcite-popover-background-color, var(--calcite-color-foreground-1));border-color:var(--calcite-popover-border-color, var(--calcite-color-border-3));border-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round))}.calcite-floating-ui-arrow{fill:var(--calcite-popover-background-color, var(--calcite-color-foreground-1))}.calcite-floating-ui-arrow__stroke{stroke:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-block-end-width:1px;border-style:solid;border-block-end-color:var(--calcite-popover-border-color, var(--calcite-color-border-3))}.heading{margin:0px;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);word-wrap:break-word;word-break:break-word;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.headerContainer{position:relative;display:flex;block-size:100%;flex-direction:row;flex-wrap:nowrap;border-radius:0.25rem;color:var(--calcite-popover-text-color, var(--calcite-color-text-1))}.headerContainer.has-header{flex-direction:column}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));border-end-end-radius:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-round));--calcite-action-corner-radius-start-end:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp));--calcite-action-corner-radius-end-end:var(--calcite-popover-corner-radius, var(--calcite-corner-radius-sharp))}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%}:host([hidden]){display:none}[hidden]{display:none}",Un=Vn,bt=new _n,jn=Ce(class extends Re{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePopoverBeforeClose=Z(this,"calcitePopoverBeforeClose",6),this.calcitePopoverClose=Z(this,"calcitePopoverClose",6),this.calcitePopoverBeforeOpen=Z(this,"calcitePopoverBeforeOpen",6),this.calcitePopoverOpen=Z(this,"calcitePopoverOpen",6),this.mutationObserver=Wt("mutation",()=>this.updateFocusTrapElements()),this.guid=`calcite-popover-${Be()}`,this.openTransitionProp="opacity",this.hasLoaded=!1,this.setTransitionEl=e=>{this.transitionEl=e},this.setFilteredPlacements=()=>{const{el:e,flipPlacements:t}=this;this.filteredFlipPlacements=t?Mn(t,e):null},this.setUpReferenceElement=(e=!0)=>{this.removeReferences(),this.effectiveReferenceElement=this.getReferenceElement(),Fn(this,this.effectiveReferenceElement,this.el);const{el:t,referenceElement:n,effectiveReferenceElement:i}=this;e&&n&&!i&&console.warn(`${t.tagName}: reference-element id "${n}" was not found.`,{el:t}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.setExpandedAttr=()=>{const{effectiveReferenceElement:e,open:t}=this;e&&"setAttribute"in e&&e.setAttribute(yt,pe(t))},this.addReferences=()=>{const{effectiveReferenceElement:e}=this;if(!e)return;const t=this.getId();"setAttribute"in e&&e.setAttribute(vt,t),bt.registerElement(e,this.el),this.setExpandedAttr()},this.removeReferences=()=>{const{effectiveReferenceElement:e}=this;e&&("removeAttribute"in e&&(e.removeAttribute(vt),e.removeAttribute(yt)),bt.unregisterElement(e))},this.hide=()=>{this.open=!1},this.storeArrowEl=e=>{this.arrowEl=e,this.reposition(!0)},this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.pointerDisabled=!1,this.flipPlacements=void 0,this.heading=void 0,this.headingLevel=void 0,this.label=void 0,this.messageOverrides=void 0,this.messages=void 0,this.offsetDistance=zn,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=Nn,this.referenceElement=void 0,this.scale="m",this.triggerDisabled=!1,this.effectiveLocale="",this.floatingLayout="vertical",this.effectiveReferenceElement=void 0,this.defaultMessages=void 0}handleFocusTrapDisabled(e){this.open&&(e?me(this):ze(this))}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}onMessagesChange(){}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(){$e(this),this.reposition(!0),this.setExpandedAttr()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}effectiveLocaleChange(){St(this,this.effectiveLocale)}connectedCallback(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),Ot(this),Ft(this),Tt(this),requestAnimationFrame(()=>this.setUpReferenceElement(this.hasLoaded))}async componentWillLoad(){await zt(this),He(this)}componentDidLoad(){Me(this),this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.open&&$e(this),this.hasLoaded=!0}disconnectedCallback(){this.mutationObserver?.disconnect(),this.removeReferences(),Ht(this),$t(this),ht(this,this.effectiveReferenceElement,this.el),me(this)}async reposition(e=!1){const{el:t,effectiveReferenceElement:n,placement:i,overlayPositioning:o,flipDisabled:a,filteredFlipPlacements:r,offsetDistance:s,offsetSkidding:l,arrowEl:c}=this;return Tn(this,{floatingEl:t,referenceEl:n,overlayPositioning:o,placement:i,flipDisabled:a,flipPlacements:r,offsetDistance:s,offsetSkidding:l,arrowEl:c,type:"popover"},e)}async setFocus(){await Te(this),kt(this.el),Lt(this.el)}async updateFocusTrapElements(){It(this)}getReferenceElement(){const{referenceElement:e,el:t}=this;return(typeof e=="string"?Ct(t,{id:e}):e)||null}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),ze(this)}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),me(this)}renderCloseButton(){const{messages:e,closable:t}=this;return t?x("div",{class:F.closeButtonContainer,key:F.closeButtonContainer},x("calcite-action",{appearance:"transparent",class:F.closeButton,onClick:this.hide,ref:n=>this.closeButtonEl=n,scale:this.scale,text:e.close},x("calcite-icon",{icon:"x",scale:_t(this.scale)}))):null}renderHeader(){const{heading:e,headingLevel:t}=this,n=e?x(mt,{class:F.heading,level:t},e):null;return n?x("div",{class:F.header,key:F.header},n,this.renderCloseButton()):null}render(){const{effectiveReferenceElement:e,heading:t,label:n,open:i,pointerDisabled:o,floatingLayout:a}=this,r=e&&i,s=!r,l=o?null:x(Wn,{floatingLayout:a,key:"floating-arrow",ref:this.storeArrowEl});return x(Pt,{key:"a563d48090d6e6c0c138023e169667834f657c4c","aria-hidden":pe(s),"aria-label":n,"aria-live":"polite","calcite-hydrated-hidden":s,id:this.getId(),role:"dialog"},x("div",{key:"73053dbdce2cfc68fcd42667089d611e81010955",class:{[F.container]:!0,[dt.animation]:!0,[dt.animationActive]:r},ref:this.setTransitionEl},l,x("div",{key:"1fbcd45ee42b10a67881ced74db2db051231c94d",class:{[F.hasHeader]:!!t,[F.headerContainer]:!0}},this.renderHeader(),x("div",{key:"522abe801b98787863aac14d990b948d2d286156",class:F.content},x("slot",{key:"022a8f690288acdbac4ec1b3eccf807ffe382d5d"})),t?null:this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Un}},[1,"calcite-popover",{autoClose:[516,"auto-close"],closable:[516],flipDisabled:[516,"flip-disabled"],focusTrapDisabled:[516,"focus-trap-disabled"],pointerDisabled:[516,"pointer-disabled"],flipPlacements:[16],heading:[1],headingLevel:[514,"heading-level"],label:[1],messageOverrides:[1040],messages:[1040],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],scale:[513],triggerDisabled:[516,"trigger-disabled"],effectiveLocale:[32],floatingLayout:[32],effectiveReferenceElement:[32],defaultMessages:[32],reposition:[64],setFocus:[64],updateFocusTrapElements:[64]},void 0,{focusTrapDisabled:["handleFocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}]);function Pe(){typeof customElements>"u"||["calcite-popover","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-popover":customElements.get(e)||customElements.define(e,jn);break;case"calcite-action":customElements.get(e)||Ie();break;case"calcite-icon":customElements.get(e)||Se();break;case"calcite-loader":customElements.get(e)||Fe();break}})}Pe();const wt={menu:"menu",defaultTrigger:"default-trigger"},De={tooltip:"tooltip",trigger:"trigger"},qn={menu:"ellipsis"},Kn="data-active",Yn=":host{box-sizing:border-box;display:flex;flex-direction:column;font-size:var(--calcite-font-size-1)}::slotted(calcite-action-group:not(:last-of-type)){border-block-end-width:var(--calcite-border-width-sm)}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{display:flex;max-block-size:45vh;flex-direction:column;flex-wrap:nowrap;overflow-y:auto;overflow-x:hidden;outline:2px solid transparent;outline-offset:2px;gap:var(--calcite-action-menu-items-space, 0)}:host([hidden]){display:none}[hidden]{display:none}",Xn=Yn,Gn=["ArrowUp","ArrowDown","End","Home"],Qn=Ce(class extends Re{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionMenuOpen=Z(this,"calciteActionMenuOpen",6),this.actionElements=[],this.guid=`calcite-action-menu-${Be()}`,this.menuId=`${this.guid}-menu`,this.menuButtonId=`${this.guid}-menu-button`,this.connectMenuButtonEl=()=>{const{menuButtonId:e,menuId:t,open:n,label:i}=this,o=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==o&&(this.disconnectMenuButtonEl(),this.menuButtonEl=o,this.setTooltipReferenceElement(),o&&(o.active=n,o.setAttribute("aria-controls",t),o.setAttribute("aria-expanded",pe(n)),o.setAttribute("aria-haspopup","true"),o.id||(o.id=e),o.label||(o.label=i),o.text||(o.text=i),o.addEventListener("click",this.menuButtonClick),o.addEventListener("keydown",this.menuButtonKeyDown)))},this.disconnectMenuButtonEl=()=>{const{menuButtonEl:e}=this;e&&(e.removeEventListener("click",this.menuButtonClick),e.removeEventListener("keydown",this.menuButtonKeyDown))},this.setMenuButtonEl=e=>{const t=e.target.assignedElements({flatten:!0}).filter(n=>n?.matches("calcite-action"));this.slottedMenuButtonEl=t[0],this.connectMenuButtonEl()},this.setDefaultMenuButtonEl=e=>{this.defaultMenuButtonEl=e,this.connectMenuButtonEl()},this.handleCalciteActionClick=()=>{this.open=!1,this.setFocus()},this.menuButtonClick=()=>{this.toggleOpen()},this.updateTooltip=e=>{const t=e.target.assignedElements({flatten:!0}).filter(n=>n?.matches("calcite-tooltip"));this.tooltipEl=t[0],this.setTooltipReferenceElement()},this.setTooltipReferenceElement=()=>{const{tooltipEl:e,expanded:t,menuButtonEl:n,open:i}=this;e&&(e.referenceElement=!t&&!i?n:null)},this.updateAction=(e,t)=>{const{guid:n,activeMenuItemIndex:i}=this,o=`${n}-action-${t}`;e.tabIndex=-1,e.setAttribute("role","menuitem"),e.id||(e.id=o),e.toggleAttribute(Kn,t===i)},this.updateActions=e=>{e?.forEach(this.updateAction)},this.handleDefaultSlotChange=e=>{const t=e.target.assignedElements({flatten:!0}).reduce((n,i)=>i?.matches("calcite-action")?(n.push(i),n):i?.matches("calcite-action-group")?n.concat(Array.from(i.querySelectorAll("calcite-action"))):n,[]);this.actionElements=t.filter(n=>!n.disabled&&!n.hidden)},this.menuButtonKeyDown=e=>{const{key:t}=e,{actionElements:n,activeMenuItemIndex:i,open:o}=this;if(n.length){if(Oe(t)){if(e.preventDefault(),!o){this.toggleOpen();return}const a=n[i];a?a.click():this.toggleOpen(!1)}if(t==="Tab"){this.open=!1;return}if(t==="Escape"){this.toggleOpen(!1),e.preventDefault();return}this.handleActionNavigation(e,t,n)}},this.handleActionNavigation=(e,t,n)=>{if(!this.isValidKey(t,Gn))return;if(e.preventDefault(),!this.open){this.toggleOpen(),(t==="Home"||t==="ArrowDown")&&(this.activeMenuItemIndex=0),(t==="End"||t==="ArrowUp")&&(this.activeMenuItemIndex=n.length-1);return}t==="Home"&&(this.activeMenuItemIndex=0),t==="End"&&(this.activeMenuItemIndex=n.length-1);const i=this.activeMenuItemIndex;t==="ArrowUp"&&(this.activeMenuItemIndex=We(Math.max(i-1,-1),n.length)),t==="ArrowDown"&&(this.activeMenuItemIndex=We(i+1,n.length))},this.toggleOpenEnd=()=>{this.setFocus(),this.el.removeEventListener("calcitePopoverOpen",this.toggleOpenEnd)},this.toggleOpen=(e=!this.open)=>{this.el.addEventListener("calcitePopoverOpen",this.toggleOpenEnd),this.open=e},this.handlePopoverOpen=()=>{this.open=!0},this.handlePopoverClose=()=>{this.open=!1},this.appearance="solid",this.expanded=!1,this.flipPlacements=void 0,this.label=void 0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale=void 0,this.menuButtonEl=void 0,this.activeMenuItemIndex=-1}connectedCallback(){this.connectMenuButtonEl()}componentWillLoad(){He(this)}componentDidLoad(){Me(this)}disconnectedCallback(){this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(e){this.activeMenuItemIndex=this.open?0:-1,this.menuButtonEl&&(this.menuButtonEl.active=e),this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}activeMenuItemIndexHandler(){this.updateActions(this.actionElements)}async setFocus(){return await Te(this),Bt(this.menuButtonEl)}renderMenuButton(){const{appearance:e,label:t,scale:n,expanded:i}=this;return x("slot",{name:De.trigger,onSlotchange:this.setMenuButtonEl},x("calcite-action",{appearance:e,class:wt.defaultTrigger,icon:qn.menu,ref:this.setDefaultMenuButtonEl,scale:n,text:t,textEnabled:i}))}renderMenuItems(){const{actionElements:e,activeMenuItemIndex:t,open:n,menuId:i,menuButtonEl:o,label:a,placement:r,overlayPositioning:s,flipPlacements:l}=this,c=e[t]?.id||null;return x("calcite-popover",{autoClose:!0,flipPlacements:l,focusTrapDisabled:!0,label:a,offsetDistance:0,onCalcitePopoverClose:this.handlePopoverClose,onCalcitePopoverOpen:this.handlePopoverOpen,open:n,overlayPositioning:s,placement:r,pointerDisabled:!0,referenceElement:o},x("div",{"aria-activedescendant":c,"aria-labelledby":o?.id,class:wt.menu,id:i,onClick:this.handleCalciteActionClick,role:"menu",tabIndex:-1},x("slot",{onSlotchange:this.handleDefaultSlotChange})))}render(){return x(Dt,{key:"d13aa4f3d43fb5651c0487ccfa456813f69955d2"},this.renderMenuButton(),this.renderMenuItems(),x("slot",{key:"b63d187516c766db6a1b1db3df34050fdec9e6ce",name:De.tooltip,onSlotchange:this.updateTooltip}))}isValidKey(e,t){return!!t.find(n=>n===e)}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}}static get style(){return Xn}},[1,"calcite-action-menu",{appearance:[513],expanded:[516],flipPlacements:[16],label:[1],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],scale:[513],menuButtonEl:[32],activeMenuItemIndex:[32],setFocus:[64]},void 0,{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}]);function xt(){typeof customElements>"u"||["calcite-action-menu","calcite-action","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-menu":customElements.get(e)||customElements.define(e,Qn);break;case"calcite-action":customElements.get(e)||Ie();break;case"calcite-icon":customElements.get(e)||Se();break;case"calcite-loader":customElements.get(e)||Fe();break;case"calcite-popover":customElements.get(e)||Pe();break}})}xt();export{mt as H,De as S,xt as a,On as b,Pe as d};
