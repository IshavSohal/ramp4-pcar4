import{a0 as d,a as v,m as p,B as s,b as o,r as l}from"./arcadeUtils-Cqggt430.js";import{s as w}from"./TimeOnly-CAgpzQQx.js";import{u as c,f as h}from"./SpatialFilter-BUrqUC35.js";import{eB as i}from"./main-C02UbYD7.js";import{relate as y,crosses as F,touches as I,within as A,overlaps as P,contains as g,intersects as R}from"./geometryEngineAsync-BO1kuDgL.js";function f(n){return n instanceof i}function u(n,r,a,m){return m(n,r,async(S,e,t)=>{if(t.length<2)throw new o(n,l.WrongNumberOfParameters,r);if((t=d(t))[0]===null&&t[1]===null)return!1;if(s(t[0])){if(t[1]instanceof i)return new h({parentfeatureset:t[0],relation:a,relationGeom:t[1]});if(t[1]===null)return new c({parentfeatureset:t[0]});throw new o(n,l.InvalidParameter,r)}if(f(t[0])){if(f(t[1])){switch(a){case"esriSpatialRelEnvelopeIntersects":return R(w(t[0]),w(t[1]));case"esriSpatialRelIntersects":return R(t[0],t[1]);case"esriSpatialRelContains":return g(t[0],t[1]);case"esriSpatialRelOverlaps":return P(t[0],t[1]);case"esriSpatialRelWithin":return A(t[0],t[1]);case"esriSpatialRelTouches":return I(t[0],t[1]);case"esriSpatialRelCrosses":return F(t[0],t[1])}throw new o(n,l.InvalidParameter,r)}if(s(t[1]))return new h({parentfeatureset:t[1],relation:a,relationGeom:t[0]});if(t[1]===null)return!1;throw new o(n,l.InvalidParameter,r)}if(t[0]===null){if(s(t[1]))return new c({parentfeatureset:t[1]});if(t[1]instanceof i||t[1]===null)return!1}throw new o(n,l.InvalidParameter,r)})}function C(n){n.mode==="async"&&(n.functions.intersects=function(r,a){return u(r,a,"esriSpatialRelIntersects",n.standardFunctionAsync)},n.functions.envelopeintersects=function(r,a){return u(r,a,"esriSpatialRelEnvelopeIntersects",n.standardFunctionAsync)},n.signatures.push({name:"envelopeintersects",min:2,max:2}),n.functions.contains=function(r,a){return u(r,a,"esriSpatialRelContains",n.standardFunctionAsync)},n.functions.overlaps=function(r,a){return u(r,a,"esriSpatialRelOverlaps",n.standardFunctionAsync)},n.functions.within=function(r,a){return u(r,a,"esriSpatialRelWithin",n.standardFunctionAsync)},n.functions.touches=function(r,a){return u(r,a,"esriSpatialRelTouches",n.standardFunctionAsync)},n.functions.crosses=function(r,a){return u(r,a,"esriSpatialRelCrosses",n.standardFunctionAsync)},n.functions.relate=function(r,a){return n.standardFunctionAsync(r,a,async(m,S,e)=>{if(e=d(e),v(e,3,3,r,a),f(e[0])&&f(e[1]))return y(e[0],e[1],p(e[2]));if(e[0]instanceof i&&e[1]===null||e[1]instanceof i&&e[0]===null)return!1;if(s(e[0])&&e[1]===null)return new c({parentfeatureset:e[0]});if(s(e[1])&&e[0]===null)return new c({parentfeatureset:e[1]});if(s(e[0])&&e[1]instanceof i)return e[0].relate(e[1],p(e[2]));if(s(e[1])&&e[0]instanceof i)return e[1].relate(e[0],p(e[2]));if(e[0]===null&&e[1]===null)return!1;throw new o(r,l.InvalidParameter,a)})})}export{C as registerFunctions};
