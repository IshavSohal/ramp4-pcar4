{"version":3,"file":"screen-wcWmXYOy.js","sources":["../../src/fixtures/legend/screen.vue"],"sourcesContent":["<template>\r\n    <panel-screen :panel=\"panel\">\r\n        <template #header> {{ t('legend.title') }} </template>\r\n\r\n        <template #content>\r\n            <legend-header />\r\n            <div\r\n                v-focus-list\r\n                :content=\"t('panels.controls.items')\"\r\n                v-tippy=\"{\r\n                    trigger: 'manual',\r\n                    placement: 'top-end',\r\n                    touch: false,\r\n                    maxWidth: 190\r\n                }\"\r\n                ref=\"el\"\r\n            >\r\n                <legend-item v-for=\"item in children\" :legendItem=\"item\" :key=\"item.uid\" />\r\n            </div>\r\n        </template>\r\n    </panel-screen>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { computed, defineAsyncComponent, inject, onBeforeUnmount, onMounted, ref } from 'vue';\r\nimport { useI18n } from 'vue-i18n';\r\n\r\nimport type { InstanceAPI, PanelInstance } from '@/api';\r\nimport type { PropType } from 'vue';\r\nimport type { LegendAPI } from './api/legend';\r\nimport type { LegendItem } from './store/legend-item';\r\n\r\nconst legendHeader = defineAsyncComponent(() => import('./header.vue'));\r\nconst legendItem = defineAsyncComponent(() => import('./components/item.vue'));\r\n\r\nconst { t } = useI18n();\r\nconst iApi = inject('iApi') as InstanceAPI;\r\nconst el = ref<Element>();\r\n\r\nconst blurEvent = () => {\r\n    (el.value as any)._tippy.hide();\r\n};\r\n\r\nconst keyupEvent = (e: Event) => {\r\n    const evt = e as KeyboardEvent;\r\n    if (evt.key === 'Tab' && el.value?.matches(':focus')) {\r\n        (el.value as any)._tippy.show();\r\n    }\r\n};\r\n\r\nonMounted(() => {\r\n    el.value?.addEventListener('blur', blurEvent);\r\n\r\n    el.value?.addEventListener('keyup', keyupEvent);\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n    el.value?.removeEventListener('blur', blurEvent);\r\n\r\n    el.value?.removeEventListener('keyup', keyupEvent);\r\n});\r\n\r\ndefineProps({\r\n    panel: {\r\n        type: Object as PropType<PanelInstance>,\r\n        required: true\r\n    }\r\n});\r\n\r\nconst children = computed<Array<LegendItem>>(() => {\r\n    let legendApi = iApi.fixture.get<LegendAPI>('legend');\r\n    if (legendApi) {\r\n        return [...legendApi.getLegend()];\r\n    }\r\n    return [];\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n"],"names":["legendHeader","defineAsyncComponent","legendItem","t","useI18n","iApi","inject","el","ref","blurEvent","keyupEvent","e","onMounted","onBeforeUnmount","children","computed","legendApi"],"mappings":";;;;;;;;;;AAgCA,UAAMA,IAAeC,EAAqB,MAAM,OAAO,sBAAc,CAAC,GAChEC,IAAaD,EAAqB,MAAM,OAAO,oBAAuB,CAAC,GAEvE,EAAE,GAAAE,EAAE,IAAIC,EAAQ,GAChBC,IAAOC,EAAO,MAAM,GACpBC,IAAKC,EAAa,GAElBC,IAAY,MAAM;AACnB,MAAAF,EAAG,MAAc,OAAO,KAAK;AAAA,IAClC,GAEMG,IAAa,CAACC,MAAa;AAE7B,MADYA,EACJ,QAAQ,SAASJ,EAAG,OAAO,QAAQ,QAAQ,KAC9CA,EAAG,MAAc,OAAO,KAAK;AAAA,IAEtC;AAEA,IAAAK,EAAU,MAAM;AACT,MAAAL,EAAA,OAAO,iBAAiB,QAAQE,CAAS,GAEzCF,EAAA,OAAO,iBAAiB,SAASG,CAAU;AAAA,IAAA,CACjD,GAEDG,EAAgB,MAAM;AACf,MAAAN,EAAA,OAAO,oBAAoB,QAAQE,CAAS,GAE5CF,EAAA,OAAO,oBAAoB,SAASG,CAAU;AAAA,IAAA,CACpD;AASK,UAAAI,IAAWC,EAA4B,MAAM;AAC/C,UAAIC,IAAYX,EAAK,QAAQ,IAAe,QAAQ;AACpD,aAAIW,IACO,CAAC,GAAGA,EAAU,WAAW,IAE7B,CAAC;AAAA,IAAA,CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}