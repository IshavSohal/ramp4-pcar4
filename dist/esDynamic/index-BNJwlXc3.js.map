{"version":3,"file":"index-BNJwlXc3.js","sources":["../../src/fixtures/help/api/help.ts","../../src/fixtures/help/nav-button.vue","../../src/fixtures/help/lang/lang.csv?raw","../../src/fixtures/help/index.ts"],"sourcesContent":["import { FixtureInstance } from '@/api';\r\nimport { useHelpStore } from '../store';\r\nimport type { HelpConfig } from '../store';\r\n\r\nexport class HelpAPI extends FixtureInstance {\r\n    /**\r\n     * Toggles help panel\r\n     *\r\n     * @param {boolean} [open] force panel open or closed\r\n     * @memberof HelpAPI\r\n     */\r\n    toggleHelp(open?: boolean) {\r\n        const panel = this.$iApi.panel.get('help');\r\n        this.$iApi.panel.toggle(panel, open);\r\n    }\r\n\r\n    /**\r\n     * Returns `HelpConfig` section of the global config file.\r\n     *\r\n     * @readonly\r\n     * @type {HelpConfig}\r\n     * @memberof HelpAPI\r\n     */\r\n    get config(): HelpConfig | undefined {\r\n        return super.config;\r\n    }\r\n\r\n    /**\r\n     * Parses the help config JSON snippet from the config file and save to the fixture store.\r\n     *\r\n     * @param {HelpConfig} [helpConfig]\r\n     * @memberof HelpAPI\r\n     */\r\n    _parseConfig(helpConfig?: HelpConfig) {\r\n        const helpStore = useHelpStore(this.$vApp.$pinia);\r\n        helpStore.location = helpConfig?.location ?? './help/';\r\n        this.handlePanelWidths(['help']);\r\n        this.handlePanelTeleports(['help']);\r\n    }\r\n}\r\n","<template>\r\n    <mapnav-button :onClickFunction=\"onClick\" :tooltip=\"t('help.title')\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" class=\"fill-current w-32 h-20\">\r\n            <path d=\"M0 0h24v24H0z\" fill=\"none\" />\r\n            <path\r\n                d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"\r\n            />\r\n        </svg>\r\n    </mapnav-button>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { inject } from 'vue';\r\nimport { GlobalEvents } from '@/api/internal';\r\nimport type { InstanceAPI } from '@/api/internal';\r\nimport { useI18n } from 'vue-i18n';\r\n\r\nconst iApi = inject<InstanceAPI>('iApi')!;\r\nconst { t } = useI18n();\r\n\r\nconst onClick = () => iApi.event.emit(GlobalEvents.HELP_TOGGLE);\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>\r\n","export default \"key,enValue,enValid,frValue,frValid\\r\\nhelp.title,Help,1,Aide,1\\r\\nhelp.search,Search Help,1,Aide à la recherche,1\\r\\nhelp.section.expand,Expand section,1,Développer une section,1\\r\\nhelp.section.collapse,Collapse section,1,Réduire une section,1\\r\\nhelp.noResults,Nothing is found. Please try a different search.,1,Aucun résultat. Veuillez essayer une autre recherche.,1\"","import { markRaw } from 'vue';\r\nimport { HelpAPI } from './api/help';\r\nimport HelpNavButtonV from './nav-button.vue';\r\n\r\nimport messages from './lang/lang.csv?raw';\r\nimport { useMapnavStore } from '../mapnav/store';\r\nimport { useHelpStore } from './store';\r\n\r\nclass HelpFixture extends HelpAPI {\r\n    added() {\r\n        // console.log(`[fixture] ${this.id} added`);\r\n\r\n        this.$iApi.component('help-nav-button', HelpNavButtonV);\r\n\r\n        this.$iApi.panel.register(\r\n            {\r\n                help: {\r\n                    screens: {\r\n                        'help-screen': () => markRaw(import('./screen.vue'))\r\n                    },\r\n                    style: {\r\n                        'flex-grow': '1',\r\n                        'max-width': '750px'\r\n                    },\r\n                    alertName: 'help.title'\r\n                }\r\n            },\r\n            {\r\n                i18n: { messages }\r\n            }\r\n        );\r\n        // parse help section of config and store information in help store\r\n        this._parseConfig(this.config);\r\n        const unwatch = this.$vApp.$watch(\r\n            () => this.config,\r\n            (value: any) => this._parseConfig(value)\r\n        );\r\n\r\n        // override the removed method here to get access to scope\r\n        this.removed = () => {\r\n            // console.log(`[fixture] ${this.id} removed`);\r\n            unwatch();\r\n\r\n            if (this.$iApi.fixture.exists('mapnav')) {\r\n                const mapnavStore = useMapnavStore(this.$vApp.$pinia);\r\n                mapnavStore.removeItem('help');\r\n            }\r\n\r\n            const helpStore = useHelpStore(this.$vApp.$pinia);\r\n            helpStore.$reset();\r\n\r\n            this.$iApi.panel.remove('help');\r\n        };\r\n    }\r\n}\r\n\r\nexport default HelpFixture;\r\n"],"names":["HelpAPI","FixtureInstance","open","panel","helpConfig","helpStore","useHelpStore","iApi","inject","t","useI18n","onClick","GlobalEvents","messages","HelpFixture","HelpNavButtonV","markRaw","unwatch","value","useMapnavStore"],"mappings":";AAIO,MAAMA,UAAgBC,EAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOzC,WAAWC,GAAgB;AACvB,UAAMC,IAAQ,KAAK,MAAM,MAAM,IAAI,MAAM;AACzC,SAAK,MAAM,MAAM,OAAOA,GAAOD,CAAI;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUvC,IAAI,SAAiC;AACjC,WAAO,MAAM;AAAA,EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EASjB,aAAaE,GAAyB;AAClC,UAAMC,IAAYC,EAAa,KAAK,MAAM,MAAM;AACtC,IAAAD,EAAA,WAAWD,GAAY,YAAY,WACxC,KAAA,kBAAkB,CAAC,MAAM,CAAC,GAC1B,KAAA,qBAAqB,CAAC,MAAM,CAAC;AAAA,EAAA;AAE1C;;;;ACtBM,UAAAG,IAAOC,EAAoB,MAAM,GACjC,EAAE,GAAAC,EAAE,IAAIC,EAAQ,GAEhBC,IAAU,MAAMJ,EAAK,MAAM,KAAKK,EAAa,WAAW;;;;;;;;;;;;;;;;;;;;;;;;ICpB/CC,IAAA,EAAC,IAAK,EAAC,cAAa,QAAO,eAAc,eAAc,uBAAsB,kBAAiB,yBAAwB,oBAAmB,kBAAiB,mDAAkD,GAAE,IAAK,EAAC,cAAa,QAAO,eAAc,uBAAsB,uBAAsB,0BAAyB,yBAAwB,uBAAsB,kBAAiB,wDAAuD,EAAC;ACQjc,MAAMC,UAAoBd,EAAQ;AAAA,EAC9B,QAAQ;AAGC,SAAA,MAAM,UAAU,mBAAmBe,CAAc,GAEtD,KAAK,MAAM,MAAM;AAAA,MACb;AAAA,QACI,MAAM;AAAA,UACF,SAAS;AAAA,YACL,eAAe,MAAMC,EAAQ,OAAO,sBAAc,CAAC;AAAA,UACvD;AAAA,UACA,OAAO;AAAA,YACH,aAAa;AAAA,YACb,aAAa;AAAA,UACjB;AAAA,UACA,WAAW;AAAA,QAAA;AAAA,MAEnB;AAAA,MACA;AAAA,QACI,MAAM,EAAE,UAAAH,EAAS;AAAA,MAAA;AAAA,IAEzB,GAEK,KAAA,aAAa,KAAK,MAAM;AACvB,UAAAI,IAAU,KAAK,MAAM;AAAA,MACvB,MAAM,KAAK;AAAA,MACX,CAACC,MAAe,KAAK,aAAaA,CAAK;AAAA,IAC3C;AAGA,SAAK,UAAU,MAAM;AAET,MAAAD,EAAA,GAEJ,KAAK,MAAM,QAAQ,OAAO,QAAQ,KACdE,EAAe,KAAK,MAAM,MAAM,EACxC,WAAW,MAAM,GAGfb,EAAa,KAAK,MAAM,MAAM,EACtC,OAAO,GAEZ,KAAA,MAAM,MAAM,OAAO,MAAM;AAAA,IAClC;AAAA,EAAA;AAER;"}