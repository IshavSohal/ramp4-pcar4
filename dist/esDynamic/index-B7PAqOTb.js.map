{"version":3,"file":"index-B7PAqOTb.js","sources":["../../src/fixtures/metadata/api/metadata.ts","../../src/fixtures/metadata/lang/lang.csv?raw","../../src/fixtures/metadata/index.ts"],"sourcesContent":["import { FixtureInstance } from '@/api';\r\nimport type { MetadataPayload } from '../store';\r\n\r\nexport class MetadataAPI extends FixtureInstance {\r\n    /**\r\n     * Toggles the metadata panel. Provides the given payload as a prop to the panel.\r\n     * @param payload\r\n     */\r\n    toggleMetadata(payload?: MetadataPayload, open?: boolean): void {\r\n        const panel = this.$iApi.panel.get('metadata');\r\n\r\n        if (open === false) {\r\n            panel.close();\r\n            return;\r\n        }\r\n\r\n        // open metadata panel if not open\r\n        if (!panel.isOpen || !panel.isVisible) {\r\n            this.$iApi.panel.open({\r\n                id: 'metadata',\r\n                props: { payload: payload }\r\n            });\r\n        } else {\r\n            // otherwise refresh with new layer info or close if it is the same layer\r\n            const currentUid = (panel.route.props! as any).payload.layer.uid;\r\n            if (currentUid !== payload?.layer?.uid || open) {\r\n                panel.show({\r\n                    screen: 'metadata-screen-content',\r\n                    props: { payload: payload }\r\n                });\r\n            } else {\r\n                panel.close();\r\n            }\r\n        }\r\n    }\r\n}\r\n","export default \"key,enValue,enValid,frValue,frValid\\r\\nmetadata.title,Metadata,1,Métadonnées,1\\r\\nmetadata.loading,Loading...,1,Chargement en cours...,1\\r\\nmetadata.error,There was an error retrieving this resource. Please try again.,1,Une erreur s'est produite lors du chargement de cette ressource. Veuillez essayer de nouveau.,1\\r\\nmetadata.label.no.layer,No metadata to show because the layer has been removed,1,Aucune métadonnée à afficher, car la couche a été supprimée.,1\\r\\nmetadata.xslt.Abstract,Abstract,1,Résumé,1\\r\\nmetadata.xslt.Scope,Scope,1,Portée,1\\r\\nmetadata.xslt.hereBeScope,here be scope,1,la portée jusqu'ici,1\\r\\nmetadata.xslt.timePeriod,Time Period,1,Période,1\\r\\nmetadata.xslt.supplementalData,Supplemental Data,1,Données supplémentaires,1\\r\\nmetadata.xslt.contactInfo,Contact Information,1,Coordonnées,1\\r\\nmetadata.xslt.resourceProvider,Resource Provider,1,Fournisseur de la ressource,1\\r\\nmetadata.xslt.custodian,Custodian,1,Dépositaire,1\\r\\nmetadata.xslt.owner,Owner,1,Propriétaire,1\\r\\nmetadata.xslt.user,User,1,Utilisateur,1\\r\\nmetadata.xslt.distributor,Distributor,1,Distributeur,1\\r\\nmetadata.xslt.originator,Originator,1,Auteur,1\\r\\nmetadata.xslt.pointOfContact,Point of Contact,1,Point de contact,1\\r\\nmetadata.xslt.principalInvestigator,Principal Investigator,1,Chercheur principal,1\\r\\nmetadata.xslt.processor,Processor,1,Préparateur,1\\r\\nmetadata.xslt.publisher,Publisher,1,Éditeur,1\\r\\nmetadata.xslt.author,Author,1,Auteur,1\\r\\nmetadata.xslt.collaborator,Collaborator,1,Collaborateur,1\\r\\nmetadata.xslt.editor,Editor,1,Éditeur,1\\r\\nmetadata.xslt.mediator,Mediator,1,Médiateur,1\\r\\nmetadata.xslt.rightsHolder,Rights Holder,1,Titulaire des droits,1\\r\\nmetadata.xslt.cataloguePage,Data Catalogue Page,1,Page des données du catalogue,1\\r\\nmetadata.xslt.metadataPage,Raw Metadata,1,Métadonnées brutes,1\\r\\nmetadata.xslt.metadata,Metadata,1,Métadonnées,1\"","import { markRaw } from 'vue';\r\nimport { MetadataAPI } from './api/metadata';\r\n\r\nimport messages from './lang/lang.csv?raw';\r\nimport { useAppbarStore } from '../appbar/store';\r\nimport { useMetadataStore } from './store';\r\n\r\nclass MetadataFixture extends MetadataAPI {\r\n    async added() {\r\n        this.$iApi.panel.register(\r\n            {\r\n                metadata: {\r\n                    screens: {\r\n                        'metadata-screen-content': () => markRaw(import('./screen.vue'))\r\n                    },\r\n                    style: {\r\n                        width: '350px'\r\n                    },\r\n                    button: {\r\n                        tooltip: 'metadata.title',\r\n                        // https://fonts.google.com/icons?selected=Material%20Icons%3Adescription\r\n                        icon: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M0 0h24v24H0z\" fill=\"none\" /><path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z\" /></svg>'\r\n                    },\r\n                    alertName: 'metadata.title'\r\n                }\r\n            },\r\n            { i18n: { messages } }\r\n        );\r\n\r\n        this.handlePanelTeleports(['metadata']);\r\n\r\n        this.removed = () => {\r\n            // console.log(`[fixture] ${this.id} removed`);\r\n            if (this.$iApi.fixture.exists('appbar')) {\r\n                const appbarStore = useAppbarStore(this.$vApp.$pinia);\r\n                appbarStore.removeButton('metadata');\r\n            }\r\n\r\n            const metadataStore = useMetadataStore(this.$vApp.$pinia);\r\n            metadataStore.$reset();\r\n\r\n            this.$iApi.panel.remove('metadata');\r\n        };\r\n    }\r\n}\r\n\r\nexport default MetadataFixture;\r\n"],"names":["MetadataAPI","FixtureInstance","payload","open","panel","messages","MetadataFixture","markRaw","useAppbarStore","useMetadataStore"],"mappings":";AAGO,MAAMA,UAAoBC,EAAgB;AAAA;AAAA;AAAA;AAAA;AAAA,EAK7C,eAAeC,GAA2BC,GAAsB;AAC5D,UAAMC,IAAQ,KAAK,MAAM,MAAM,IAAI,UAAU;AAE7C,QAAID,MAAS,IAAO;AAChB,MAAAC,EAAM,MAAM;AACZ;AAAA,IAAA;AAIJ,IAAI,CAACA,EAAM,UAAU,CAACA,EAAM,YACnB,KAAA,MAAM,MAAM,KAAK;AAAA,MAClB,IAAI;AAAA,MACJ,OAAO,EAAE,SAAAF,EAAiB;AAAA,IAAA,CAC7B,IAGmBE,EAAM,MAAM,MAAe,QAAQ,MAAM,QAC1CF,GAAS,OAAO,OAAOC,IACtCC,EAAM,KAAK;AAAA,MACP,QAAQ;AAAA,MACR,OAAO,EAAE,SAAAF,EAAiB;AAAA,IAAA,CAC7B,IAEDE,EAAM,MAAM;AAAA,EAEpB;AAER;ACnCA,MAAeC,IAAA,EAAC,IAAK,EAAC,kBAAiB,YAAW,oBAAmB,cAAa,kBAAiB,kEAAiE,2BAA0B,0DAAyD,0BAAyB,YAAW,uBAAsB,SAAQ,6BAA4B,iBAAgB,4BAA2B,eAAc,kCAAiC,qBAAoB,6BAA4B,uBAAsB,kCAAiC,qBAAoB,2BAA0B,aAAY,uBAAsB,SAAQ,sBAAqB,QAAO,6BAA4B,eAAc,4BAA2B,cAAa,gCAA+B,oBAAmB,uCAAsC,0BAAyB,2BAA0B,aAAY,2BAA0B,aAAY,wBAAuB,UAAS,8BAA6B,gBAAe,wBAAuB,UAAS,0BAAyB,YAAW,8BAA6B,iBAAgB,+BAA8B,uBAAsB,8BAA6B,gBAAe,0BAAyB,WAAU,GAAE,IAAK,EAAC,kBAAiB,eAAc,oBAAmB,0BAAyB,kBAAiB,iGAAgG,2BAA0B,gCAA+B,0BAAyB,UAAS,uBAAsB,UAAS,6BAA4B,uBAAsB,4BAA2B,WAAU,kCAAiC,2BAA0B,6BAA4B,eAAc,kCAAiC,+BAA8B,2BAA0B,eAAc,uBAAsB,gBAAe,sBAAqB,eAAc,6BAA4B,gBAAe,4BAA2B,UAAS,gCAA+B,oBAAmB,uCAAsC,uBAAsB,2BAA0B,eAAc,2BAA0B,WAAU,wBAAuB,UAAS,8BAA6B,iBAAgB,wBAAuB,WAAU,0BAAyB,aAAY,8BAA6B,wBAAuB,+BAA8B,iCAAgC,8BAA6B,sBAAqB,0BAAyB,cAAa,EAAC;ACOz+E,MAAMC,UAAwBN,EAAY;AAAA,EACtC,MAAM,QAAQ;AACV,SAAK,MAAM,MAAM;AAAA,MACb;AAAA,QACI,UAAU;AAAA,UACN,SAAS;AAAA,YACL,2BAA2B,MAAMO,EAAQ,OAAO,sBAAc,CAAC;AAAA,UACnE;AAAA,UACA,OAAO;AAAA,YACH,OAAO;AAAA,UACX;AAAA,UACA,QAAQ;AAAA,YACJ,SAAS;AAAA;AAAA,YAET,MAAM;AAAA,UACV;AAAA,UACA,WAAW;AAAA,QAAA;AAAA,MAEnB;AAAA,MACA,EAAE,MAAM,EAAE,UAAAF,EAAW,EAAA;AAAA,IACzB,GAEK,KAAA,qBAAqB,CAAC,UAAU,CAAC,GAEtC,KAAK,UAAU,MAAM;AAEjB,MAAI,KAAK,MAAM,QAAQ,OAAO,QAAQ,KACdG,EAAe,KAAK,MAAM,MAAM,EACxC,aAAa,UAAU,GAGjBC,EAAiB,KAAK,MAAM,MAAM,EAC1C,OAAO,GAEhB,KAAA,MAAM,MAAM,OAAO,UAAU;AAAA,IACtC;AAAA,EAAA;AAER;"}