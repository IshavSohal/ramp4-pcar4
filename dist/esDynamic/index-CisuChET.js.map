{"version":3,"file":"index-CisuChET.js","sources":["../../src/fixtures/crosshairs/crosshairs.vue","../../src/fixtures/crosshairs/index.ts"],"sourcesContent":["<template>\r\n    <div class=\"crosshairs absolute duration-150 top-1/2 left-1/2 h-230 w-230\" :class=\"{ 'opacity-0': !visible }\">\r\n        <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fit=\"\"\r\n            height=\"100%\"\r\n            width=\"100%\"\r\n            preserveAspectRatio=\"xMidYMid meet\"\r\n            viewBox=\"0 0 24 24\"\r\n            focusable=\"false\"\r\n        >\r\n            <g fill=\"#545353\" stroke=\"#fff\" id=\"crosshairs\">\r\n                <ellipse ry=\".254\" rx=\".262\" id=\"path3808\" cx=\"12\" cy=\"12\" stroke-width=\".076\"></ellipse>\r\n                <path\r\n                    d=\"M.045 12.047l6.093.051 4.264.068v-.332l-4.264.067-6.093.064v.039z\"\r\n                    id=\"rect4632-6\"\r\n                    stroke-width=\".09\"\r\n                ></path>\r\n                <path\r\n                    d=\"M12.047 23.955l.051-6.093.068-4.264h-.332l.067 4.264.064 6.093h.039z\"\r\n                    id=\"rect4632-6-0\"\r\n                    stroke-width=\".09\"\r\n                ></path>\r\n                <path\r\n                    d=\"M23.955 11.953l-6.093-.051-4.264-.068v.332l4.264-.067 6.093-.064v-.039z\"\r\n                    id=\"rect4632-6-4\"\r\n                    stroke-width=\".09\"\r\n                ></path>\r\n                <path\r\n                    d=\"M11.953.045l-.051 6.093-.068 4.264h.332l-.067-4.264-.064-6.093h-.039z\"\r\n                    id=\"rect4632-6-9\"\r\n                    stroke-width=\".09\"\r\n                ></path>\r\n            </g>\r\n        </svg>\r\n    </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { inject, onBeforeUnmount, onMounted, ref } from 'vue';\r\nimport { GlobalEvents } from '@/api';\r\nimport type { InstanceAPI } from '@/api';\r\n\r\nconst iApi = inject<InstanceAPI>('iApi')!;\r\n\r\nconst visible = ref<Boolean>(false);\r\nconst handlers = ref<Array<string>>([]);\r\n\r\nonMounted(() => {\r\n    handlers.value.push(\r\n        iApi.event.on(GlobalEvents.MAP_EXTENTCHANGE, () => {\r\n            // display crosshairs if pan/zoom keys are active\r\n            if (iApi.geo.map.keysActive) {\r\n                visible.value = true;\r\n            }\r\n        })\r\n    );\r\n\r\n    handlers.value.push(\r\n        iApi.event.on(GlobalEvents.MAP_FOCUS, () => {\r\n            // display crosshairs only when focused with keyboard controls\r\n            if (!iApi.geo.map.mouseFocus) {\r\n                visible.value = true;\r\n            }\r\n        })\r\n    );\r\n\r\n    handlers.value.push(\r\n        iApi.event.on(GlobalEvents.MAP_MOUSEDOWN, () => {\r\n            visible.value = false;\r\n        })\r\n    );\r\n\r\n    handlers.value.push(\r\n        iApi.event.on(GlobalEvents.MAP_BLUR, () => {\r\n            visible.value = false;\r\n        })\r\n    );\r\n});\r\n\r\nonBeforeUnmount(() => {\r\n    handlers.value.forEach(h => iApi.event.off(h));\r\n});\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.crosshairs {\r\n    transform: translate(-50%, -50%);\r\n}\r\n</style>\r\n","import CrosshairsV from './crosshairs.vue';\r\n\r\nimport { FixtureInstance } from '@/api';\r\n\r\nclass CrosshairsFixture extends FixtureInstance {\r\n    added(): void {\r\n        // console.log(`[fixture] ${this.id} added`);\r\n        const { destroy, el } = this.mount(CrosshairsV, {\r\n            app: this.$element\r\n        });\r\n\r\n        const innerShell = this.$vApp.$el.getElementsByClassName('inner-shell')[0];\r\n        innerShell.appendChild(el.childNodes[0]);\r\n\r\n        // override the removed method here to get access to scope\r\n        this.removed = () => {\r\n            // console.log(`[fixture] ${this.id} removed`);\r\n            destroy();\r\n        };\r\n    }\r\n}\r\n\r\nexport default CrosshairsFixture;\r\n"],"names":["iApi","inject","visible","ref","handlers","onMounted","GlobalEvents","onBeforeUnmount","h","CrosshairsFixture","FixtureInstance","destroy","el","CrosshairsV"],"mappings":";;;;AA2CM,UAAAA,IAAOC,EAAoB,MAAM,GAEjCC,IAAUC,EAAa,EAAK,GAC5BC,IAAWD,EAAmB,EAAE;AAEtC,WAAAE,EAAU,MAAM;AACZ,MAAAD,EAAS,MAAM;AAAA,QACXJ,EAAK,MAAM,GAAGM,EAAa,kBAAkB,MAAM;AAE3C,UAAAN,EAAK,IAAI,IAAI,eACbE,EAAQ,QAAQ;AAAA,QAEvB,CAAA;AAAA,MACL,GAEAE,EAAS,MAAM;AAAA,QACXJ,EAAK,MAAM,GAAGM,EAAa,WAAW,MAAM;AAExC,UAAKN,EAAK,IAAI,IAAI,eACdE,EAAQ,QAAQ;AAAA,QAEvB,CAAA;AAAA,MACL,GAEAE,EAAS,MAAM;AAAA,QACXJ,EAAK,MAAM,GAAGM,EAAa,eAAe,MAAM;AAC5C,UAAAJ,EAAQ,QAAQ;AAAA,QACnB,CAAA;AAAA,MACL,GAEAE,EAAS,MAAM;AAAA,QACXJ,EAAK,MAAM,GAAGM,EAAa,UAAU,MAAM;AACvC,UAAAJ,EAAQ,QAAQ;AAAA,QACnB,CAAA;AAAA,MACL;AAAA,IAAA,CACH,GAEDK,EAAgB,MAAM;AAClB,MAAAH,EAAS,MAAM,QAAQ,CAAAI,MAAKR,EAAK,MAAM,IAAIQ,CAAC,CAAC;AAAA,IAAA,CAChD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9ED,MAAMC,UAA0BC,EAAgB;AAAA,EAC5C,QAAc;AAEV,UAAM,EAAE,SAAAC,GAAS,IAAAC,EAAA,IAAO,KAAK,MAAMC,GAAa;AAAA,MAC5C,KAAK,KAAK;AAAA,IAAA,CACb;AAGD,IADmB,KAAK,MAAM,IAAI,uBAAuB,aAAa,EAAE,CAAC,EAC9D,YAAYD,EAAG,WAAW,CAAC,CAAC,GAGvC,KAAK,UAAU,MAAM;AAET,MAAAD,EAAA;AAAA,IACZ;AAAA,EAAA;AAER;"}