import{aM as N,Q as c,aN as b}from"./main-BfV_Ya13.js";import{c as g,f as A}from"./FeatureType-D4XFnyPy.js";class i{constructor(t,r,a){this.assetName=t,this.assetMimeType=r,this.parts=a}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&N(this.parts,t.parts,(r,a)=>r.equals(a))}isOnService(t){return this.parts.every(r=>r.isOnService(t))}makeHash(){let t="";for(const r of this.parts)t+=r.partHash;return t}async toBlob(t){const{parts:r}=this;if(r.length===1)return r[0].toBlob(t);const a=await Promise.all(r.map(n=>n.toBlob(t)));return c(t),new Blob(a)}}class v{constructor(t,r){this.partUrl=t,this.partHash=r}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:r}=await b(this.partUrl,{responseType:"blob"});return c(t),r}}function B(s){return H(s?.source)}function l(s){return Array.isArray(s)?s.every(t=>t instanceof i):!1}const f=/^(model\/gltf\+json)|(model\/gltf-binary)$/,h=/\.(gltf|glb)/i;function H(s){return s?Array.isArray(s)?s.some(p):p(s):!1}function p(s){if(s instanceof File){const{type:t,name:r}=s;return f.test(t)||h.test(r)}return f.test(s.assetMimeType)||h.test(s.assetName)}function M(s,t){if(!s)return!1;const{source:r}=s;return U(r,t)}function T(s,t){if(s===t)return!0;const{source:r}=s,{source:a}=t;if(r===a)return!0;if(l(r)&&l(a)){if(r.length!==a.length)return!1;const n=(e,u)=>e.assetName<u.assetName?-1:e.assetName>u.assetName?1:0,o=[...r].sort(n),y=[...a].sort(n);for(let e=0;e<o.length;++e)if(!o[e].equals(y[e]))return!1;return!0}return!1}function U(s,t){if(Array.isArray(s)){const r=s;return r.length>0&&r.every(a=>m(a,t))}return m(s,t)}function m(s,t){return s instanceof i&&s.isOnService(t)}function q(s,t){return s instanceof File?g(s,t):A(s.assetMimeType,s.assetName,t)}function O(s){return Array.isArray(s)?s:[s]}function S(s){return!!s.original}export{S as A,O as N,i as a,q as b,T as h,v as i,M as m,B as o};
